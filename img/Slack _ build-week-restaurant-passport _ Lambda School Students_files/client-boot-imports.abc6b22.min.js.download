(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"+9CW":function(e,t,a){},"+BnW":function(e,t,a){},"+V7z":function(e,t,a){},"+ZNJ":function(e,t,a){},"+dXq":function(e,t,a){},"+sOg":function(e,t,a){"use strict";var n=a("Ff2n"),r=a("wx14"),s=a("ifKl"),i=a("q1tI"),o=a.n(i),c=a("XHGt"),l=(a("aK/h"),a("tn36")),d=a("uPpK"),p=a("peh1"),u=a("TSYQ"),h=a.n(u),m=a("TDTp"),b=a("6xja"),_=a("0d94"),g=a("eK0w"),f=a("nNoG"),v=a("aLpA"),O=a("Kdk+"),y=a("sIET"),C=a("FsNM"),j=a("HckQ"),E=a("AWNZ"),k=a("uylt"),S=(a("2FVR"),new f.b("starred_items")),I=Object(_.b)(j.a),w={fetchMoreItems:s.a,isLoading:!1,items:void 0,onItemTabWithin:s.a,focusKey:null,setFocusKey:s.a},T={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment"};class StarredItemsList extends i.PureComponent{constructor(e){super(e),Object(l.a)(this,["renderItem","isFocusableItem","getAriaLabelForRow","onFocusEnter","onFocusLeave"]),this.getItemKeys=Object(p.createSelector)(e=>{var{items:t}=e;return t},e=>{var{isLoading:t}=e;return t},(e,t)=>{var a=["top-anchor-hack"],n=e.map(e=>this.getStarredItemId(e));return a.push(...n),t&&a.push("loader"),a}),this.list=o.a.createRef(),this.state={hasKeyboardFocus:!1}}componentDidMount(){var{focusKey:e,items:t}=this.props;"stars"===e&&t.length&&this.setFocusOnFirstItem()}onFocusEnter(e){this.setState(()=>({hasKeyboardFocus:e.isKeyboardFocus}))}onFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}setFocusOnFirstItem(){var{isLoading:e,items:t}=this.props,a=this.getItemKeys({isLoading:e,items:t})[1],n=this.list.current;n&&n.focusOnKey(a),this.props.setFocusKey(null)}getStarredItemId(e){switch(e.type){case T.MESSAGE:return e.channel+e.ts;case T.FILE:case T.FILE_COMMENT:return e.id;default:return null}}getAriaLabelForRow(e){var{index:t}=e,{items:a}=this.props,{hasKeyboardFocus:n}=this.state,r=a[t-1];if(r&&r.type)return r.type===T.MESSAGE?{"aria-label":this.props.makeMessageSummary({channelId:r.channel,ts:r.ts,hasFocus:n,viewContext:v.I.STARS_FLEXPANE})}:{"aria-label":this.props.makeFileSummary({fileId:r.id,hasFocus:n})}}focus(){var e=this.list.current;e&&e.focus()}isFocusableItem(e){var{index:t}=e,{isLoading:a,items:n}=this.props,r=this.getItemKeys({isLoading:a,items:n})[t];return!!r&&("top-anchor-hack"!==r&&"loader"!==r)}renderItem(e){var{isLoading:t,items:a}=this.props,n=this.getItemKeys({isLoading:t,items:a});if("top-anchor-hack"===n[e])return o.a.createElement("div",{className:"p-starred_item__top_anchor_item_hack"});if("loader"===n[e])return o.a.createElement(C.a,null);var s=a[e-1],i={key:this.getStarredItemId(s),className:h()("c-message_kit__message","p-starred_item",{"p-starred_item--first":s===a[0]}),"data-qa":"starred_item_".concat(s.type)};switch(s.type){case T.MESSAGE:return o.a.createElement(I,Object(r.a)({},i,{channelId:s.channel,ts:s.ts}));case T.FILE:return o.a.createElement(E.a,Object(r.a)({},i,{id:s.id}));case T.FILE_COMMENT:return o.a.createElement(k.a,Object(r.a)({},i,{fileId:s.fileId,commentId:s.id}));default:return null}}render(){var{isLoading:e,items:t,onItemTabWithin:a}=this.props;return o.a.createElement(d.a,null,n=>{var{width:r,height:s}=n;return o.a.createElement(g.a,{ref:this.list,width:r,height:s,keys:this.getItemKeys({isLoading:e,items:t}),rowRenderer:this.renderItem,loadPost:this.props.fetchMoreItems,animateOnScroll:!1,"aria-label":S.t("Starred Items"),getPropsForItem:this.getAriaLabelForRow,isFocusableItem:this.isFocusableItem,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onItemTabWithin:a})})}}StarredItemsList.defaultProps=w;var N=Object(c.b)(e=>({focusKey:Object(O.a)(e)}),function(e){return{makeMessageSummary:function(){return e(Object(m.a)(...arguments))},makeFileSummary:function(){return e(Object(b.a)(...arguments))},setFocusKey:t=>e(Object(y.a)(t))}})(e=>{var{forwardedRef:t}=e,a=Object(n.a)(e,["forwardedRef"]);return o.a.createElement(StarredItemsList,Object(r.a)({ref:t},a))});t.a=o.a.forwardRef((e,t)=>o.a.createElement(N,Object(r.a)({forwardedRef:t},e)))},"+yrr":function(e,t,a){"use strict";var n=a("wx14"),r=a("c8Bs"),s=a("u3oV"),i=a("Z0Cl"),o=a("Fsnq"),c=a("3Hq1"),l=a("1Lli"),d=a("owWc"),p=a("zmn3"),u=a("lCmp"),h=a("m8R6"),m=a("AFNo"),b=a("peh1"),_=a("k55U"),g=["#FFE0E0","#DBEB8D","#B5E0FF","#FFE5B2","#BDE595","#D4D5FF","#F9EF6E","#D0F2ED","#FFCCFF"];var f=a("Fdc0"),v=a("1YQg"),O=a("4zXV"),y=a("TM4O"),C=Object(m.b)("Sends an invite to the web API from the call window",(e,t,a)=>{var{id:n,invitedUserIds:r}=a;return Object(_.f)(Object(y.a)(),"We expect this to run in a call window context"),Promise.all([r.map(t=>e(Object(O.a)({method:"screenhero.rooms.invite",reason:"calls-invite",args:{responder:t,room:n,should_share:!0,cancelable:!0}})))])});C.meta={name:"sendInvites",key:"appCallsFetchersSendInvitesSendInvites",description:"Sends an invite to the web API from the call window"},a.d(t,"D",function(){return S}),a.d(t,"C",function(){return I}),a.d(t,"c",function(){return w}),a.d(t,"G",function(){return T}),a.d(t,"O",function(){return N}),a.d(t,"b",function(){return P}),a.d(t,"P",function(){return A}),a.d(t,"E",function(){return M}),a.d(t,"I",function(){return x}),a.d(t,"J",function(){return R}),a.d(t,"M",function(){return D}),a.d(t,"N",function(){return F}),a.d(t,"L",function(){return L}),a.d(t,"a",function(){return U}),a.d(t,"F",function(){return B}),a.d(t,"H",function(){return H}),a.d(t,"q",function(){return G}),a.d(t,"x",function(){return K}),a.d(t,"n",function(){return V}),a.d(t,"o",function(){return z}),a.d(t,"h",function(){return J}),a.d(t,"z",function(){return Z}),a.d(t,"d",function(){return $}),a.d(t,"w",function(){return ee}),a.d(t,"u",function(){return te}),a.d(t,"t",function(){return ne}),a.d(t,"v",function(){return re}),a.d(t,"k",function(){return se}),a.d(t,"r",function(){return ie}),a.d(t,"i",function(){return oe}),a.d(t,"B",function(){return ce}),a.d(t,"g",function(){return le}),a.d(t,"f",function(){return de}),a.d(t,"m",function(){return pe}),a.d(t,"l",function(){return ue}),a.d(t,"y",function(){return he}),a.d(t,"j",function(){return me}),a.d(t,"s",function(){return be}),a.d(t,"p",function(){return _e}),a.d(t,"K",function(){return fe}),a.d(t,"A",function(){return ve});var j=new class ReactionColorManager{constructor(){this.startIndex=Math.floor(Math.random()*(g.length-1))}getSelfColor(){return g[this.startIndex]}getColorForJoinIndex(e){return g[(this.startIndex+1+e)%g.length]}};function E(e,t){return"Could not ".concat(t,": problem with peerId ").concat(e,".")}function k(e){return"self"===e.id}function S(e){return k(e)}function I(e){return k(e)}var w=Object(m.a)("Add a remote peer");w.meta={name:"addRemotePeer",key:"appCallsReduxPeersStoreAddRemotePeer",description:"Add a remote peer"};var T=Object(m.a)("Remove a remote peer");T.meta={name:"removeRemotePeer",key:"appCallsReduxPeersStoreRemoveRemotePeer",description:"Remove a remote peer"};var N=Object(m.a)("Update a peer");N.meta={name:"updatePeer",key:"appCallsReduxPeersStoreUpdatePeer",description:"Update a peer"};var P=Object(m.a)("Add an invited user");P.meta={name:"addInvitedUser",key:"appCallsReduxPeersStoreAddInvitedUser",description:"Add an invited user"};var A=Object(m.a)("Update a response for an invited user");A.meta={name:"updateResponseForInvitedUser",key:"appCallsReduxPeersStoreUpdateResponseForInvitedUser",description:"Update a response for an invited user"};var M=Object(m.a)("Remove an invited user");M.meta={name:"markInviteExpired",key:"appCallsReduxPeersStoreMarkInviteExpired",description:"Remove an invited user"};var x=Object(m.a)("Update a peer's connection");x.meta={name:"setRemotePeerIsConnected",key:"appCallsReduxPeersStoreSetRemotePeerIsConnected",description:"Update a peer's connection"};var R=Object(m.a)("Update the screen share of a peer");R.meta={name:"setRemotePeerScreenshareDoNotDispatch",key:"appCallsReduxPeersStoreSetRemotePeerScreenshareDoNotDispatch",description:"Update the screen share of a peer"};var D=Object(m.a)("Set the ID of the peer selected by the user");D.meta={name:"setUserSelectedPeerId",key:"appCallsReduxPeersStoreSetUserSelectedPeerId",description:"Set the ID of the peer selected by the user"};var F=Object(m.a)("Set the ID of the peer selected by the user");F.meta={name:"unsetUserSelectedPeerId",key:"appCallsReduxPeersStoreUnsetUserSelectedPeerId",description:"Set the ID of the peer selected by the user"};var L=Object(m.a)("Set the ID of the active speaker");L.meta={name:"setSpeakingPeerId",key:"appCallsReduxPeersStoreSetSpeakingPeerId",description:"Set the ID of the active speaker"};var U=Object(m.a)("Add an emoji reaction");U.meta={name:"addEphemeralMessage",key:"appCallsReduxPeersStoreAddEphemeralMessage",description:"Add an emoji reaction"};var B=Object(m.a)("Remove an emoji reaction");B.meta={name:"removeEmojiReaction",key:"appCallsReduxPeersStoreRemoveEmojiReaction",description:"Remove an emoji reaction"};var H=Object(m.a)("Send an emoji reaction");H.meta={name:"sendEphemeralMessage",key:"appCallsReduxPeersStoreSendEphemeralMessage",description:"Send an emoji reaction"};var W={self:{id:"self",isMicrophoneEnabled:!0,isDrawEnabled:!0,reactionColor:j.getSelfColor(),drawHue:Math.floor(360*Math.random())},invitedUsers:{},byId:{},leftById:{},reacjis:[],reacjiShownCounter:0,remotePeerJoinedCounter:0},q=Object(m.d)({},W,{storeKey:"peers",persistenceEnabled:!1}).on(w,(e,t)=>{Object(_.f)(!e.byId[t.id],E(t.id,"addRemotePeer"));var a=e.remotePeerJoinedCounter;return Object(n.a)(Object(n.a)(Object(n.a)({},e),{remotePeerJoinedCounter:e.remotePeerJoinedCounter+1,lastRemoteScreensharePeerId:ge(e,t),byId:Object(n.a)(Object(n.a)({},e.byId),{[t.id]:Object(n.a)(Object(n.a)({},t),{joinIndex:a,reactionColor:j.getColorForJoinIndex(a)})})}),e.invitedUsers[t.userId]?{invitedUsers:Object(n.a)(Object(n.a)({},e.invitedUsers),{[t.userId]:Object(n.a)(Object(n.a)({},e.invitedUsers[t.userId]),{isExpired:!0})})}:null)}).on(T,(e,t)=>{var a=e.byId[t];return Object(_.f)(!!a,"Peer should exist in order to remove"),Object(n.a)(Object(n.a)({},e),{speakingPeerId:e.speakingPeerId===t?void 0:e.speakingPeerId,userSelectedPeerId:e.userSelectedPeerId===t?void 0:e.userSelectedPeerId,lastRemoteScreensharePeerId:e.lastRemoteScreensharePeerId===t?void 0:e.lastRemoteScreensharePeerId,byId:Object(n.a)({},Object(h.a)(e.byId,t)),leftById:Object(n.a)(Object(n.a)({},e.leftById),{[a.id]:Object(n.a)({},a)})})}).on(P,(e,t)=>{var{userId:a,isCancelable:r=!0}=t;return Object(n.a)(Object(n.a)({},e),{invitedUsers:Object(n.a)(Object(n.a)({},e.invitedUsers),{[a]:{response:"pending",isCancelable:r,isExpired:!1}})})}).on(A,(e,t)=>{var{userId:a,response:r}=t;return Object(n.a)(Object(n.a)({},e),{invitedUsers:Object(n.a)(Object(n.a)({},e.invitedUsers),{[a]:Object(n.a)(Object(n.a)({},e.invitedUsers[a]),{response:r})})})}).on(M,(e,t)=>Object(n.a)(Object(n.a)({},e),{invitedUsers:Object(n.a)(Object(n.a)({},e.invitedUsers),{[t]:Object(n.a)(Object(n.a)({},e.invitedUsers[t]),{isExpired:!0})})})).on(N,(e,t)=>S(t)?Object(n.a)(Object(n.a)({},e),{self:Object(n.a)(Object(n.a)(Object(n.a)({},e.self),t),!Object(c.a)(t.isScreenshareEnabled)&&{isHostDrawEnabled:!1})}):(Object(_.f)(!!e.byId[t.id],E(t.id,"updatePeer")),Object(n.a)(Object(n.a)({},e),{byId:Object(n.a)(Object(n.a)({},e.byId),{[t.id]:Object(n.a)(Object(n.a)({},e.byId[t.id]),t)})}))).on(R,(e,t)=>(Object(_.f)(!!e.byId[t.id],E(t.id,"setRemotePeerScreenshare")),Object(n.a)(Object(n.a)({},e),{lastRemoteScreensharePeerId:ge(e,t),byId:Object(n.a)(Object(n.a)({},e.byId),{[t.id]:Object(n.a)(Object(n.a)({},e.byId[t.id]),t)})}))).on(x,(e,t)=>{var{id:a,isConnected:r}=t;return Object(_.f)(!!e.byId[a],E(a,"setRemotePeerIsConnected")),Object(n.a)(Object(n.a)(Object(n.a)({},e),!r&&{lastRemoteScreensharePeerId:ge(e,{id:a,isScreenshareEnabled:!1})}),{byId:Object(n.a)(Object(n.a)({},e.byId),{[a]:Object(n.a)(Object(n.a)(Object(n.a)({},e.byId[a]),{isConnected:r}),!r&&{isCameraEnabled:!1,isScreenshareEnabled:!1})})})}).on(D,(e,t)=>("self"!==t&&Object(_.f)(!!e.byId[t],E(t,"setUserSelectedPeerId")),Object(n.a)(Object(n.a)({},e),{userSelectedPeerId:t}))).on(F,e=>Object(n.a)(Object(n.a)({},e),{userSelectedPeerId:void 0})).on(L,(e,t)=>(Object(_.f)(!!e.byId[t],E(t,"setSpeakingPeerId")),Object(n.a)(Object(n.a)({},e),{speakingPeerId:t}))).on(U,(e,t)=>{var a=e.reacjiShownCounter+1;return Object(n.a)(Object(n.a)({},e),{reacjiShownCounter:a,reacjis:[{peerId:t.peerId,emoji:t.emoji,id:a,isEmoji:t.isEmoji},...e.reacjis]})}).on(B,(e,t)=>{var a=e.reacjis.filter(e=>e.id!==t);return Object(n.a)(Object(n.a)({},e),{reacjis:a})}),G=(t.e=q,Object(m.e)((e,t)=>{var a=e.peers;if("self"===t)return a.self;var n=a.byId[t];return Object(_.f)(!!n,E(t,"getPeer")),n}));G.meta={name:"getPeer",key:"appCallsReduxPeersStoreGetPeer"},Object(m.e)((e,t)=>{var a=e.peers.byId[t];return Object(_.f)(!!a,E(t,"getPeer")),a}).meta={name:"getRemotePeer",key:"appCallsReduxPeersStoreGetRemotePeer"};var K=Object(m.e)(e=>e.peers.self);K.meta={name:"getSelf",key:"appCallsReduxPeersStoreGetSelf"};var V=Object(m.e)((e,t)=>"self"===t?e.peers.self:z(e,t));V.meta={name:"getMaybeLeftPeer",key:"appCallsReduxPeersStoreGetMaybeLeftPeer"};var z=Object(m.e)((e,t)=>{var a=e.peers,n=a.byId[t],r=a.leftById[t];return Object(_.f)(!!n||!!r,"No record of peer ever existing with id: ".concat(t)),n||r});z.meta={name:"getMaybeLeftRemotePeer",key:"appCallsReduxPeersStoreGetMaybeLeftRemotePeer"};var Y=Object(m.e)(e=>e.peers.leftById);Y.meta={name:"getLeftPeers",key:"appCallsReduxPeersStoreGetLeftPeers"};var Q=Object(m.e)(e=>e.peers.invitedUsers);Q.meta={name:"getAllInvitedUsers",key:"appCallsReduxPeersStoreGetAllInvitedUsers"};var X=Object(b.createSelector)(Q,e=>Object(s.a)(e,e=>{var{isExpired:t}=e;return!t})),J=Object(b.createSelector)(Q,e=>Object.keys(e)),Z=Object(b.createSelector)(X,e=>Object.keys(e)),$=Object(b.createSelector)(Q,e=>0!==Object(o.a)(e)&&Object(r.a)(e,e=>e.response===v.c.DoNotDisturb)),ee=Object(m.e)(e=>e.peers.byId);ee.meta={name:"getRemotePeers",key:"appCallsReduxPeersStoreGetRemotePeers"};var te=Object(b.createSelector)(ee,e=>Object(p.a)(e,"userId")),ae=Object(b.createSelector)(ee,e=>Object(l.a)(e,"joinIndex","desc")),ne=Object(b.createSelector)(ae,e=>Object(p.a)(e,"id")),re=Object(b.createSelector)(ae,e=>Object(p.a)(e,"userId")),se=Object(m.e)(e=>!!Object.keys(e.peers.byId).length||!!Object.keys(e.peers.leftById).length);se.meta={name:"getHasRemotePeerEverJoined",key:"appCallsReduxPeersStoreGetHasRemotePeerEverJoined"};Object(b.createSelector)(ee,e=>Object(u.a)(e,e=>{var{isScreenshareEnabled:t}=e;return!!t}));var ie=Object(b.createSelector)(X,e=>Object(d.a)(e,(e,t,a)=>{var{response:n,isExpired:r}=t;return("pending"===n||n===v.c.Accept&&!r)&&e.push(a),e},[])),oe=Object(b.createSelector)(X,e=>Object(i.a)(e,e=>{var{isCancelable:t}=e;return t})),ce=Object(b.createSelector)(Q,ee,Y,e=>e.activeCall.conversationId,(e,t,a,n)=>!Object(o.a)(t)&&!Object(o.a)(a)&&Object(o.a)(e)&&!!n&&!Object(v.o)(n)&&Object(r.a)(e,e=>"pending"!==e.response&&e.response!==v.c.Accept)),le=Object(m.e)(e=>he(e)||e.peers.lastRemoteScreensharePeerId||e.peers.speakingPeerId||Number(Object.keys(e.peers.byId)[0]));le.meta={name:"getActivePeerId",key:"appCallsReduxPeersStoreGetActivePeerId"};var de=Object(b.createSelector)(ie,e=>e[0]),pe=Object(m.e)(e=>{var t=le(e);return!!t&&!!G(e,t).isScreenshareEnabled});pe.meta={name:"getIsActivePeerScreenSharing",key:"appCallsReduxPeersStoreGetIsActivePeerScreenSharing"};var ue=Object(m.e)(e=>{var t=le(e);return!!t&&!!G(e,t).isCameraEnabled});ue.meta={name:"getIsActivePeerCameraEnabled",key:"appCallsReduxPeersStoreGetIsActivePeerCameraEnabled"};var he=Object(m.e)(e=>e.peers.userSelectedPeerId);he.meta={name:"getUserSelectedPeerId",key:"appCallsReduxPeersStoreGetUserSelectedPeerId"};var me=Object(m.e)(e=>{var t=K(e);if(t.isScreenshareEnabled&&t.screens)return t.screens[t.thumbnailIndex||0]});me.meta={name:"getCurrentlySharedScreen",key:"appCallsReduxPeersStoreGetCurrentlySharedScreen"};var be=Object(m.e)(e=>e.peers.reacjis);be.meta={name:"getReactions",key:"appCallsReduxPeersStoreGetReactions"};var _e=Object(m.e)((e,t)=>Object(f.W)(e,z(e,t).userId));function ge(e,t){var a=t.isScreenshareEnabled;if(e.lastRemoteScreensharePeerId!==t.id||a)return a&&t.id||e.lastRemoteScreensharePeerId}_e.meta={name:"getMemberNameByRemotePeerId",key:"appCallsReduxPeersStoreGetMemberNameByRemotePeerId"};var fe=Object(m.f)("Set the screen sharing of a peer. If screen sharing is turned on, turn off our screen share",(e,t,a)=>{var{id:n,isScreenshareEnabled:r}=a;e(R({id:n,isScreenshareEnabled:r})),r&&e(N({id:"self",isScreenshareEnabled:!1}))});fe.meta={name:"setRemoteScreenshareAndDisableForSelf",key:"appCallsReduxPeersStoreSetRemoteScreenshareAndDisableForSelf",description:"Set the screen sharing of a peer. If screen sharing is turned on, turn off our screen share"};var ve=Object(m.f)("Invite new members to an existing call",(e,t,a)=>{var n=t();Object(_.b)(n.activeCall.id,"Must have an active call to send an invite")&&(a.forEach(t=>e(P({userId:t}))),e(C({id:n.activeCall.id,invitedUserIds:a})))});ve.meta={name:"inviteMembersToCall",key:"appCallsReduxPeersStoreInviteMembersToCall",description:"Invite new members to an existing call"}},"/6P7":function(e,t,a){},"/9ln":function(e,t,a){"use strict";var n=a("aK/h"),r=a("rePB"),s=a("4zXV"),i=a("om+M"),o=a("hOQf");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var l=Object(i.a)("Deletes a message",(e,t,a)=>{var{channelId:n,ts:i,broadcastDelete:d,attempts:p=0,reason:u}=a;if(Object(o.tb)(i))return Promise.reject(new Error("message_not_found"));var h={channel:n,ts:i};return d&&(h.broadcast_delete=!0),e(Object(s.a)({method:"chat.delete",args:h,reason:u})).catch(t=>{var{data:n={}}=t;if("message_not_found"===n.error&&p<10){return Promise.delay(175).then(()=>e(l(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a,{attempts:p+1}))))}return Promise.reject(new Error(n.error||"unknown_error"))})});l.meta={name:"chatDeleteApi",key:"fetchersChatDeleteApiChatDeleteApi",description:"Deletes a message"},l.propTypes={channelId:n.default.string,ts:n.default.string,broadcastDelete:n.default.bool,attempts:n.default.number,reason:n.default.string.isRequired};var d=l,p=Object(i.a)("Deletes a join/leave message rollup",(e,t,a)=>{var{channelId:n,firstMessageTs:r,lastMessageTs:i}=a,o={channel_id:n,first_message_ts:r,last_message_ts:i};return e(Object(s.a)({method:"chat.deleteBulkJoinLeave",args:o}))});p.meta={name:"chatDeleteApi",key:"fetchersChatBulkDeleteApiChatDeleteApi",description:"Deletes a join/leave message rollup"},p.propTypes={channelId:n.default.string,firstMessageTs:n.default.string,lastMessageTs:n.default.string};var u=p,h=a("XfeM"),m=a("4M+g"),b=a("DTfP"),_=a("ejSh"),g=a("fYfO"),f=a("pfyZ"),v=a("MhQa"),O=Object(h.b)("Animate a message deletion as well as calling the delete API endpoint",function(e,t){var{channelId:a,ts:n,broadcastDelete:r=!1,rollupTimestamps:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t(),c=Object(g.a)(i,a,n),l=s&&s.length>1;if(!c)return Promise.resolve();if(l||Object(o.S)(c)||r||e(Object(f.a)({channelId:a,ts:n})),Object(o.tb)(n)||Object(o.bb)(c))return Promise.resolve();if(l){var p=s[0],h=s.pop();return e(u({channelId:a,firstMessageTs:p,lastMessageTs:h}))}return e(d({channelId:a,ts:n,broadcastDelete:r,reason:"animateAndDeleteMessageApi"})).then(()=>{if(Object(o.lb)(c)&&!r){var e=Object(m.e)(t(),a);Object(v.g)(e,c)}}).catch(t=>{throw"message_not_found"!==t.message&&(e(Object(f.a)({channelId:a,ts:n,isDeleting:!1})),r?e(Object(_.l)({channelId:a,ts:n})):(e(Object(b.b)({channelId:a,timestamps:[n]})),e(Object(_.a)([c])))),t})});O.meta={name:"animateAndDeleteMessageApi",key:"actionsAnimateAndDeleteMessageApiAnimateAndDeleteMessageApi",description:"Animate a message deletion as well as calling the delete API endpoint"},O.propTypes={channelId:n.default.string.isRequired,ts:n.default.string.isRequired,broadcastDelete:n.default.bool,rollupTimestamps:n.default.array};t.a=O},"/FWe":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=(a("aK/h"),a("TSYQ")),o=a.n(i),c=a("Uk1S"),l=(a("G59f"),{className:void 0,children:void 0,theme:"light"});class MessageIndent extends n.Component{render(){var{children:e,theme:t}=this.props;if("light"===t)return e;var a=o()("c-message_kit__indent",this.props.className);return r.a.createElement("div",{className:a},e)}}MessageIndent.defaultProps=l,t.a=Object(s.b)(e=>({theme:Object(c.a)(e)}))(MessageIndent)},"/PGu":function(e,t,a){},"/Qam":function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=a("XHGt"),o=(a("aK/h"),a("nNoG")),c=a("MREy"),l=a("rz65"),d=a("vPEJ"),p=a("llxT"),u=a("od5y"),h=a("RAhH"),m=a("0SzJ"),b=a("t85p"),_=a("XL7r"),g=a("dxEi"),f=a("7dYf"),v=a("6kok"),O=a("/LVU"),y=a("kcos"),C=a("qN/r"),j=a("jcvV"),E=a("dohy"),k=a("mqzt"),S=a("negh"),I=a("kOzZ"),w=new o.b("do_not_disturb"),T={currentChannel:{},menuProps:{},openDndDialog:n.a,openChannelNotificationPrefsModal:n.a,openPrefsModal:n.a,clogger:{track:n.a},setUserPrefByApi:n.a,showNotificationScheduleNewBadge:!1,featureGranularDnd:!1};class DndDisabledMenu extends r.PureComponent{constructor(e){super(e),this.onClickDoNotDisturbSchedule=this.onClickDoNotDisturbSchedule.bind(this),this.onClickNotificationPreferences=this.onClickNotificationPreferences.bind(this)}onClickDoNotDisturbSchedule(){var{featureGranularDnd:e,showNotificationScheduleNewBadge:t}=this.props;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"}),e&&t&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:!0})}onClickNotificationPreferences(){this.props.openPrefsModal({activeSection:"notifications"})}renderSettingsMenuItem(){var{currentChannel:e}=this.props;if(!e.id||Object(v.hb)(e))return null;var t=s.a.createElement(d.a,{channelId:e.id,iconProps:{inherit:!0,align:"baseline"},inline:!0}),a=w.rt("Settings for {name}\u2026",{name:s.a.createElement("strong",null,t),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return s.a.createElement(c.b,{label:a,onSelected:()=>this.props.openChannelNotificationPrefsModal({channelId:e.id,entryPoint:"dnd_disabled_menu"})})}render(){var e,t,a,{menuProps:n,clogger:r,featureGranularDnd:i,showNotificationScheduleNewBadge:o,featureOfflineMode:d,isOffline:b,isIAP1Enabled:_}=this.props;return i&&(e=w.t("Do Not Disturb allows you to pause your Slack notifications"),t=s.a.createElement("span",{className:"p-dnd_menu__new_pill"},w.t("NEW")),a=o?s.a.createElement("span",null,w.t("Notification schedule\u2026")," ",t):w.t("Notification schedule\u2026")),s.a.createElement(c.f,n,s.a.createElement(c.c,{label:i?w.t("Do Not Disturb"):w.t("Pause notifications")}),i&&s.a.createElement(h.c,{tip:e,position:"right",zIndex:"above_fs"},s.a.createElement(p.a,{className:"p-dnd_menu_question_button"},s.a.createElement(u.b,{type:"question-circle"}))),s.a.createElement(c.b,{type:l.a.subheaderChild,label:w.t("30 minutes"),onSelected:()=>{this.props.snoozeNotifications({duration:30,reason:"DndDisabledMenu:30m"}),r.track(S.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:30,dnd_preset:S.DndPreset.DURATION_30_MINUTES,dnd_snooze_type:S.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_30",disabled:d&&b,showOfflineIcon:d&&b}),s.a.createElement(c.b,{type:l.a.subheaderChild,label:w.t("1 hour"),onSelected:()=>{this.props.snoozeNotifications({duration:60,reason:"DndDisabledMenu:1hr"}),r.track(S.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:60,dnd_preset:S.DndPreset.DURATION_1_HOUR,dnd_snooze_type:S.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_60",disabled:d&&b,showOfflineIcon:d&&b}),s.a.createElement(c.b,{type:l.a.subheaderChild,label:w.t("2 hours"),onSelected:()=>{this.props.snoozeNotifications({duration:120,reason:"DndDisabledMenu:2hr"}),r.track(S.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:120,dnd_preset:S.DndPreset.DURATION_2_HOURS,dnd_snooze_type:S.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_120",disabled:d&&b,showOfflineIcon:d&&b}),!_&&s.a.createElement(c.b,{type:l.a.subheaderChild,label:w.t("4 hours"),onSelected:()=>{this.props.snoozeNotifications({duration:240,reason:"DndDisabledMenu:4hr"}),r.track(S.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:240,dnd_preset:S.DndPreset.DURATION_4_HOURS,dnd_snooze_type:S.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_240",disabled:d&&b,showOfflineIcon:d&&b}),s.a.createElement(c.b,{type:l.a.subheaderChild,label:_?"Tomorrow":w.t("Until tomorrow"),onSelected:()=>{var e=Object(k.d)();this.props.snoozeNotifications({duration:e,reason:"DndDisabledMenu:tomorrow"}),r.track(S.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:e,dnd_preset:S.DndPreset.DURATION_TOMORROW,dnd_snooze_type:S.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_tomorrow",disabled:d&&b,showOfflineIcon:d&&b}),!_&&s.a.createElement(c.b,{type:l.a.subheaderChild,label:w.t("Until next week"),onSelected:()=>{var e=Object(k.c)();this.props.snoozeNotifications({duration:e,reason:"DndDisabledMenu:week"}),r.track(S.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:e,dnd_preset:S.DndPreset.DURATION_NEXT_WEEK,dnd_snooze_type:S.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_next_week",disabled:d&&b,showOfflineIcon:d&&b}),s.a.createElement(c.b,{type:l.a.subheaderChild,label:w.t("Custom\u2026"),onSelected:()=>{this.props.openDndDialog(),r.track(S.EventId.DND_OPEN_CUSTOM_SNOOZE_DIALOG)},"data-qa":"snooze_btn_custom",disabled:d&&b,showOfflineIcon:d&&b}),s.a.createElement(c.d,null),_&&s.a.createElement(c.c,{label:"Availability"}),s.a.createElement(c.b,{label:i?a:w.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!i&&!_&&s.a.createElement(c.d,null),!i&&!_&&this.renderSettingsMenuItem(),!i&&!_&&s.a.createElement(c.b,{label:w.t("Your notification preferences\u2026"),onSelected:this.onClickNotificationPreferences}),_&&s.a.createElement(m.a,null))}}DndDisabledMenu.defaultProps=T;t.a=Object(i.b)(e=>({clogger:Object(I.a)({state:e}),featureGranularDnd:Object(b.m)(e,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(_.k)(e,"dnd_notification_schedule_new_badge_seen"),featureOfflineMode:Object(b.m)(e,"feature_offline_mode"),isOffline:!Object(g.c)(e),isIAP1Enabled:Object(y.d)(e)}),e=>({snoozeNotifications:t=>e(Object(O.e)(t)),openDndDialog:()=>e(Object(E.a)()),openChannelNotificationPrefsModal:t=>e(Object(j.a)(t)),setUserPrefByApi:t=>e(Object(f.f)(t)),openPrefsModal:t=>e(Object(C.a)(t))}))(DndDisabledMenu)},"/UDf":function(e,t,a){},"/VNe":function(e,t,a){},"/X+W":function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a("P1FA");function r(e){return Object(n.a)((e||"").trim().toLowerCase())}},"/e6G":function(e,t,a){},"/gIb":function(e,t,a){},"/xs0":function(e,t,a){"use strict";var n=a("rePB"),r=a("OL4R"),s=a("+Z1G"),i=a("qAkX"),o=a("q1tI"),c=(a("aK/h"),a("XHGt")),l=a("RMmo"),d=a("brL+"),p=a("nNoG"),u=a("x3CK"),h=a("lhZz"),m=a("yHhI"),b=a("LWrH"),_=a("gLeh");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var f={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},v=Object(r.a)(f),O=!1;class GlobalKeyCommandHandler extends o.PureComponent{componentDidMount(){var{logger:e}=this.props;O?e.error("More than one global key command handler was mounted"):this.initializeKeyCommands()}componentDidUpdate(e){e.keyboardLocale!==this.props.keyboardLocale&&this.keyCommands&&(this.destroyKeyCommands(),this.initializeKeyCommands())}componentWillUnmount(){this.keyCommands&&this.destroyKeyCommands()}getFilterFunctionWithInjectedState(e){return t=>e(Object(h.getStateByTeamId)(this.props.teamId),this.getMetaDataPayload(t))}getMetaDataPayload(e){return{event:e,keyCode:Object(p.i)(e.keyCode,{kb:this.props.keyboardLocale,useReverseMap:!0}),isScreenReaderEnabled:this.props.isScreenReaderEnabled}}getLocalizedKeys(e){var{keyboardLocale:t}=this.props;return t===u.a?e:e.map(e=>{var a=e.split("+"),n=v[Object(i.a)(a)];if(!n)return e;var r=Object(p.i)(n,{kb:t});if(!r)return e;var o=f[r];return o?[...Object(s.a)(a,1),o].join("+"):e})}initializeKeyCommands(){var{commands:e}=this.props;this.keyCommands=new l.a(window),this.keyCommands.bindAll(this.connectCommandsWithRedux(e)),O=!0}destroyKeyCommands(){this.keyCommands.reset(),this.keyCommands=null,O=!1}connectCommandsWithRedux(e){return e.map(e=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({},e,{keys:this.getLocalizedKeys(e.keys),handler:t=>{this.props.dispatch(e.handler(this.getMetaDataPayload(t)))},filter:e.ignoreIf?this.getFilterFunctionWithInjectedState(e.ignoreIf):void 0}))}render(){return!1}}GlobalKeyCommandHandler.defaultProps={keyboardLocale:null,isScreenReaderEnabled:!1};var y=Object(c.b)(e=>({teamId:Object(d.b)(e),logger:Object(m.a)(e),isScreenReaderEnabled:Object(_.b)(e)}))(GlobalKeyCommandHandler);t.a=Object(b.a)(y)},"02hs":function(e,t,a){"use strict";var n=a("Z7NI"),r=a("FQfs");t.a=Object(n.a)(r.a,{useShortMode:!0})},"05X0":function(e,t,a){},"07TJ":function(e,t,a){},"08gB":function(e,t,a){},"0BC7":function(e,t,a){"use strict";var n=a("wx14"),r=a("xWuZ"),s=a("lE2N"),i=a("7EGn"),o=a("q1tI"),c=a.n(o),l=(a("aK/h"),a("XHGt")),d=a("1hAG"),p=a("G4ux"),u=a("t85p"),h=a("KGMq"),m=a("5mKg"),b=a("nNoG"),_=a("Smdl"),g=a("x4bP"),f=a("um7Q"),v=a("MREy"),O=new b.b("global_nav"),y={menuProps:void 0,enterprises:[],others:[],currentEnterpriseId:void 0,currentUserId:void 0,signinURL:void 0,featureGlobalNav:!1,featureClassicNav:!1};class SwitchWorkspacesSubmenu extends o.Component{constructor(e){super(e),this.getTeamItem=this.getTeamItem.bind(this),this.getEnterpriseItems=this.getEnterpriseItems.bind(this),this.getOtherItems=this.getOtherItems.bind(this)}getTeamItem(e){var{featureGlobalNav:t,featureClassicNav:a}=this.props;if(!t&&!a)return null;if(!e.url)return null;var n=Object(_.a)()?Object(m.n)({domain:"app"},"client/".concat(e.id).concat(window.location.search)):e.url+("/"===e.url.substr(-1)?"messages":"/messages"),r=e.icons&&(e.icons.image_44||e.icons.image_88);return{label:c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:"p-global_nav__top_switch_workspaces_icon",style:{backgroundImage:"url(".concat(r,")")}}),c.a.createElement("strong",null,e.name)),href:n,target:"_self",showLinkIndicatorIcon:!1}}getEnterpriseItems(){var{enterprises:e,currentEnterpriseId:t,currentUserId:a,featureGlobalNav:n,featureClassicNav:s}=this.props;return n||s?Object(r.a)(e.map(e=>{var n=e.teams.map(this.getTeamItem),r=e.id===t&&e.overLimit?{label:O.rt("See all <strong>{enterpriseName}</strong> workspaces",{enterpriseName:e.name}),click:()=>this.props.openFindMoreWorkspacesModal(a)}:null;return[{type:"header",label:e.name},...n,r,{type:"separator"}]})):[]}getOtherItems(){var{others:e,featureGlobalNav:t,featureClassicNav:a}=this.props;if(!t&&!a)return[];if(!e||!e.length)return[];var n=e.map(e=>this.getTeamItem(e));return[{type:"header",label:O.t("Your other workspaces")},...n]}render(){var{signinURL:e,featureGlobalNav:t,featureClassicNav:a,menuProps:r}=this.props;if(!t&&!a)return null;var s=e&&[{type:"separator"},{label:O.t("Sign in to another workspace"),href:e}],i=[...this.getEnterpriseItems(),...this.getOtherItems(),...s||[]];return c.a.createElement(v.a,Object(n.a)({},r,{template:i,stripTerminalSeparators:!0}))}}SwitchWorkspacesSubmenu.defaultProps=y;var C={openFindMoreWorkspacesModal:function(){return Object(h.a)(...arguments)}};t.a=Object(l.b)(e=>{var t=(e=>{var t=Object(u.h)(e).map(e=>({id:e.team_id,enterpriseId:e.enterprise_id,url:e.team_url,name:e.team_name,enterpriseName:e.enterprise_name,icons:e.team_icon}));if(!Object(g.a)()){var a=Object(p.b)(e);(Object(i.a)(a,"enterprise_user.teams")||[]).map(t=>Object(d.i)(e,t)).forEach(n=>{t.push({id:n.id,enterpriseId:Object(i.a)(a,"enterprise_user.enterprise_id")||n.enterprise_id,url:Object(f.b)(e,n.domain),name:Object(m.e)(n),enterpriseName:Object(i.a)(a,"enterprise_user.enterprise_name")||n.enterprise_name,icons:n.icon,isUnknown:Object(m.M)(n)})})}var n=Object(d.d)(e),r=n.enterprise_id;t=t.sort((e,t)=>{if(r){if(e.enterpriseId===r&&t.enterpriseId!==r)return-1;if(t.enterpriseId===r&&e.enterpriseId!==r)return 1}return!e.isUnknown&&t.isUnknown?-1:!t.isUnknown&&e.isUnknown?1:Object(b.r)(e.name,t.name)});var o=n.id;return t=t.filter(e=>e.id!==o),Object(s.a)(t,"id")})(e);return{enterprises:(e=>{var t={};return e.filter(e=>e.enterpriseId).forEach(e=>{var a=e.enterpriseId;t[a]?t[a].teams.length<3?t[a].teams.push(e):t[a].overLimit=!0:t[a]={id:a,name:e.enterpriseName,teams:[e]}}),Object.values(t)})(t),others:t.filter(e=>!e.enterpriseId),currentEnterpriseId:Object(d.d)(e).enterprise_id,currentUserId:Object(u.d)(e),signinURL:Object(u.f)(e,"signin_url"),featureGlobalNav:Object(u.m)(e,"feature_global_nav"),featureClassicNav:Object(u.m)(e,"feature_classic_nav")}},C)(SwitchWorkspacesSubmenu)},"0Eo7":function(e,t,a){},"0Mct":function(e,t,a){"use strict";var n=a("XfeM"),r=a("S3eg"),s=a("5tH5"),i=Object(n.b)("Switches to the All Threads view",e=>{e(Object(r.a)({id:s.a.allThreads}))});i.meta={name:"openThreadsView",key:"actionsOpenThreadsViewOpenThreadsView",description:"Switches to the All Threads view"},t.a=i},"0Qg5":function(e,t,a){"use strict";a.d(t,"a",function(){return b}),a.d(t,"c",function(){return g}),a.d(t,"b",function(){return f});var n=a("rePB"),r=a("Ff2n"),s=a("NFsq"),i=a("HI9p"),o=a("nNoG"),c=a("x3CK"),l=a("rWF5"),d=a("g5qt");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var h=new o.b("shortcuts_flexpane"),m=/key_(Cmd|Option|Ctrl|CtrlAlternative|ShiftAlternative)/,b=(e,t)=>{var a=Object(l.E)(),n=Object(l.p)(),r=a||n;return"Cmd"!==e&&"Ctrl"!==e||!r||"de"!==t?"Cmd"===e&&r?"Ctrl":"Option"===e&&r?"Alt":"CtrlAlternative"===e?"Ctrl":"ShiftAlternative"===e?"Shift":e:"Strg"},_=e=>t=>{var{keys:a,keysWin:n,keysLinux:s}=t,i=Object(r.a)(t,["keys","keysWin","keysLinux"]);if(Object(l.E)()&&n)return u({},i,{keys:n});if(Object(l.p)()&&s)return u({},i,{keys:s});var o=(e=>t=>{if(!m.test(t))return t;var a=t.split("key_")[1];if(!a)return t;var n=b(a,e);return t.replace(a,n)})(e);return u({},i,{keys:a.map(o)})},g=function(){var{keyboardLocale:e,enableUnreadView:t,featureWysiwygComposer:a,featureContextualMessageShortcuts:n=!1,featureMessageNavigationShortcuts:o=!1,featureAppViewsReminders:p=!1,isIAPhase1Enabled:m=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=[{title:h.t("Basics"),id:"basics",shortcuts:[{title:h.t("Quick Switcher"),keys:d.W?["key_Cmd","key_K","  or  ","key_T"]:["key_Cmd","key_K"],hasInfoButton:!0,infoButtonMessage:h.t("Jump to another conversation by just typing its name"),id:"quick_switcher"},{title:h.t("Browse DMs"),keys:["key_Cmd","key_Shift","key_K"],id:"browse_dms"},{title:h.t("Browse channels",{ns:"channel_browser"}),keys:["key_Cmd","key_Shift","key_L"],id:"browse_channels"},{title:h.t("Edit last message (in empty text input)"),keys:o?["key_Cmd","key_\u2191"]:["key_\u2191"]},{title:h.t("Back in history"),keys:["key_Cmd","key_["],keysWin:["key_Alt","key_\u2190"],keysLinux:["key_Alt","key_\u2190"],localeBlackList:["de","fr"]},{title:h.t("Forward in history"),keys:["key_Cmd","key_]"],keysWin:["key_Alt","key_\u2192"],keysLinux:["key_Alt","key_\u2192"],localeBlackList:["de","fr"]},{title:h.t("Back in history"),keys:["key_Cmd","key_\u2190"],keysWin:["key_Alt","key_\u2190"],keysLinux:["key_Alt","key_\u2190"],localeBlackList:["us","gb","es","ja"]},{title:h.t("Forward in history"),keys:["key_Cmd","key_\u2192"],keysWin:["key_Alt","key_\u2192"],keysLinux:["key_Alt","key_\u2192"],localeBlackList:["us","gb","es","ja"]},{title:h.t("All Unreads"),keys:["key_Cmd","key_Shift","key_A"],id:"open_all_unreads"},{title:h.t("Threads"),keys:["key_Cmd","key_Shift","key_T"],id:"open_all_threads",isSsbOnly:!0},{title:h.t("Search"),keys:["key_Cmd","key_F"],isSsbOnly:!0},{title:h.t("Dismiss dialogs"),keys:["key_Esc"]}]},{title:h.t("Navigation"),id:"navigation",shortcuts:[{title:h.t("Move focus to the next element"),keys:["key_Tab"]},{title:h.t("Move focus to the previous element"),keys:["key_Shift","key_Tab"]},{title:h.t("Move focus through messages"),keys:["key_\u2191","  or  ","key_\u2193"]},{title:h.t("Move focus to the next section"),keys:d.W?["key_F6"]:["key_Cmd","key_F6"]},{title:h.t("Move focus to the previous section"),keys:d.W?["key_Shift","key_F6"]:["key_Cmd","key_Shift","key_F6"]},{title:h.t('Take action or "click" on selected element'),keys:["key_Enter"]},{title:h.t("Increase text size"),keys:["key_Cmd","key_+"]},{title:h.t("Decrease text size"),keys:["key_Cmd","key_-"]},{title:h.t("Scroll up"),keys:["key_\u2191","  or  ","key_Page Up"]},{title:h.t("Scroll down"),keys:["key_\u2193","  or  ","key_Page Down"]},{title:h.t("Scroll to previous day"),keys:["key_Shift","key_Page Up"]},{title:h.t("Scroll to next day"),keys:["key_Shift","key_Page Down"]},{title:h.t("Preferences"),keys:["key_Cmd","key_,"],id:"open_preferences",isSsbOnly:!0,browserBlackList:["windows","linux"]},{title:h.t("Close or re-open right pane",{fallbackHash:"1b790540b5c4590525e4706f1e3023888862a175"}),keys:["key_Cmd","key_".concat(Object(c.c)(".",{kb:e}))]},{title:h.t("Channel Info"),keys:["key_Cmd","key_Shift","key_I"],isSsbOnly:!0},{title:h.t("Activity"),keys:["key_Cmd","key_Shift","key_M"],browserBlackList:["chrome"]},{title:h.t("Directory"),keys:["key_Cmd","key_Shift","key_E"],browserBlackList:["firefox"]},{title:m?"Saved items":h.t("Starred items"),keys:["key_Cmd","key_Shift","key_S"],browserBlackList:["firefox"]},{title:h.t("Toggle full screen"),keys:["key_Ctrl","key_Cmd","key_F"],keysWin:["key_Ctrl","key_Shift","key_F"],keysLinux:["key_Ctrl","key_Shift","key_F"]}]},{title:h.t("Messaging"),id:"messaging",shortcuts:[{title:h.t("Select text to beginning of current line"),keys:["key_Shift","key_\u2191"]},{title:h.t("Select text to end of current line"),keys:["key_Shift","key_\u2193"]},{title:h.t("Start a new line"),keys:["key_Shift","key_Enter"]},{title:h.t("React to last message (or message with focus)"),keys:["key_Cmd","key_Shift","key_".concat(Object(c.c)("\\",{kb:e}))]},{title:h.t("Autocomplete @username"),keys:["key_@"]},{title:h.t("Autocomplete channel"),keys:["key_#"]},{title:h.t("Autocomplete emoji"),keys:["key_:"]}]},{title:h.t("Mark Messages Read and Unread"),shortcuts:[{title:h.t("Mark all messages in current channel as read"),keys:["key_Esc"]},{title:h.t("Mark all messages as read"),keys:["key_Shift","key_Esc"]},{title:h.t("Mark a message as unread"),keys:["key_Option",h.t("  and click message")],keysWin:["key_Alt",h.t("  and click message")],keysLinux:["key_Alt",h.t("  and click message")]}]},{title:h.t("Channels & Direct Messages"),shortcuts:[{title:h.t("Previous channel or DM"),keys:["key_Option","key_\u2191"]},{title:h.t("Next channel or DM"),keys:["key_Option","key_\u2193"]},{title:h.t("Previous unread channel or DM"),keys:["key_Option","key_Shift","key_\u2191"]},{title:h.t("Next unread channel or DM"),keys:["key_Option","key_Shift","key_\u2193"]}]},{title:h.t("All Unreads"),id:"all_unreads",shortcuts:[{title:h.t("Expand channel"),keys:["key_\u2192"]},{title:h.t("Collapse channel"),keys:["key_\u2190"]},{title:h.t("Mark channel as read"),keys:["key_Esc"]},{title:h.t("Previous channel"),keys:["key_Shift","key_Page Up"]},{title:h.t("Next channel"),keys:["key_Shift","key_Page Down"]}]},{title:h.t("Files and Snippets"),shortcuts:[{title:h.t("Add a file",{fallbackHash:"454a8bf181f08812db03551730d074d78ce5743f"}),keys:["key_Cmd","key_U"],browserBlackList:["firefox"]},{title:h.t("Create a snippet"),keys:["key_Cmd","key_Shift","key_Enter"]}]},{title:h.t("Calls"),shortcuts:[{title:h.t("Toggle mute"),keys:["key_M"]},{title:h.t("Toggle video"),keys:["key_V"]},{title:h.t("Invite list"),keys:["key_+",h.t("  or  "),"key_A"]},{title:h.t("Emoji reactions"),keys:["key_E",h.t("  then 1-9")]}]},{title:h.t("Workspace Switching"),id:"workspaces",shortcuts:[{title:h.t("Next workspace"),keys:["key_Cmd","key_Shift","key_["],keysWin:["key_Ctrl","key_Tab"]},{title:h.t("Previous workspace"),keys:["key_Cmd","key_Shift","key_]"],keysWin:["key_Ctrl","key_Shift","key_Tab"]},{title:h.t("A specific workspace"),keys:["key_Cmd",h.t("  and 1-9")]}]}];if(n){var g=[{title:h.t("Edit (your own message)"),keys:["key_E"]},{title:h.t("Delete (your own message)"),keys:["key_Delete"]},{title:h.t("Add an emoji reaction"),keys:["key_R"]},{title:h.t("Open a thread"),keys:["key_\u2192",h.t("or"),"key_T"]},{title:h.t("Pin / unpin"),keys:["key_P"]},{title:h.t("Share"),keys:["key_S"]},{title:h.t("Star / unstar"),keys:["key_A"]},{title:h.t("Mark as unread from this message"),keys:["key_U"]}];p&&g.push({title:h.t("Remind me about this message"),keys:["key_M"]}),b.push({title:h.t("When focused on a message"),id:"message_shortcuts",shortcuts:g})}var f=b[Object(i.a)(b,["id","basics"])].shortcuts,v=b[Object(i.a)(b,["id","navigation"])].shortcuts,O=b[Object(i.a)(b,["id","messaging"])].shortcuts;d.W&&v.push({title:h.t("Jump to unread messages"),keys:["key_Cmd","key_J"]}),O.push({title:h.t("Bold text"),keys:["key_Cmd","key_B"]}),O.push({title:h.t("Italic text"),keys:["key_Cmd","key_I"]}),O.push({title:h.t("Strikethrough text"),keys:["key_Cmd","key_Shift","key_X"]}),O.push({title:h.t("Format text as code"),keys:["key_Cmd","key_Shift","key_C"]}),d.W&&!Object(l.w)("3.0.0")||(O.push({title:h.t("Format selection as bullet list"),keys:["key_Cmd","key_Shift","key_8"]}),O.push({title:h.t("Format selection as numbered list"),keys:["key_Cmd","key_Shift","key_7"]})),a?O.push({title:h.t("Format selection as quote"),keys:["key_Cmd","key_Shift","key_9"]}):O.push({title:h.t("Format selection as quote"),keys:["key_Cmd","key_Shift","key_>"]}),O.push({title:h.t("Format selection as code block"),keys:["key_Cmd","key_Alt","key_Shift","key_c"]}),f.push({title:h.t("Set a status"),keys:["key_Cmd","key_Shift","key_Y"],id:"set_a_status"});var y=(e=>{var{keyboardLocale:t,enableUnreadView:a}=e;return e=>{var n=d.W?"":Object(l.g)(),r=Object(l.j)();if(e.isSsbOnly&&!d.W)return!1;var i=e.browserBlackList||[];return!(Object(s.a)(i,n)||Object(s.a)(i,r)||Object(s.a)(e.localeBlackList,t)||"open_all_unreads"===e.id&&!a)}})({keyboardLocale:e,enableUnreadView:t}),C=_(e);return b.map(e=>{var{shortcuts:t}=e;return u({},Object(r.a)(e,["shortcuts"]),{shortcuts:t.filter(y).map(C)})})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(g(e)||[]).reduce((e,t)=>{var{shortcuts:a}=t;return e.concat(a)},[]).filter(e=>{var{id:t}=e;return t}).reduce((e,t)=>(e[t.id]=t,e),{})}},"0SzJ":function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),s=a("q1tI"),i=a.n(s),o=(a("aK/h"),a("XHGt")),c=a("t85p"),l=a("yZEV"),d=a("BWAg"),p=a("6FZx"),u=e=>{var{userPresence:t,dispatch:a}=e,o=Object(r.a)(e,["userPresence","dispatch"]),c=Object(s.useCallback)(()=>{a(Object(l.h)())},[a]),p=i.a.createElement(s.Fragment,null,"Set yourself to ",i.a.createElement("strong",null,"active"===t?"away":"active"));return i.a.createElement(d.a,Object(n.a)({},o,{label:p,onSelected:c}))};u.defaultProps={userPresence:"active"};t.a=Object(p.b)(Object(o.b)(e=>{var t=Object(c.d)(e);return{userPresence:Object(l.f)(e,t)}})(u))},"0agN":function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=a("aK/h"),o=a("tn36"),c=a("XHGt"),l=a("x3CK"),d=a("rWF5"),p=a("nNoG"),u=a("XL7r"),h=a("Zr7G"),m=a("Smdl"),b=a("LWrH"),_=a("Kdk+"),g=a("sIET"),f=a("a+Oh"),v=a("t85p"),O=a("kcos"),y=a("x4bP"),C=a("XfeM"),j=a("ARZM"),E=a("eqKo"),k=a("d24p"),S=a("QOdn"),I=a("qN/r"),w=a("0Mct"),T=a("Nc5J"),N=a("ROZo"),P=Object(N.b)("TS.ui.react_keyboard_shortcuts.executeShortcut",()=>null),A=Object(C.b)("Run a keyboard shortcut without the keyboard",function(e,t){var{id:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t();"browse_dms"===a&&Object(v.m)(n,"feature_sonic_dm_browser")?e(Object(k.a)()):"open_preferences"!==a?"open_all_threads"!==a?"open_all_unreads"!==a?"browse_channels"!==a?Object(y.a)()?"set_a_status"===a?e(Object(E.a)()):"quick_switcher"===a?e(Object(j.a)()):"open_all_unreads"===a&&e(Object(T.a)()):P(a):e(Object(S.a)()):e(Object(T.a)()):e(Object(w.a)()):e(Object(I.a)())});A.meta={name:"executeKeyboardShortcut",key:"componentsFlexpaneKeyboardShortcutsUtilityExecuteKeyboardShortcutExecuteKeyboardShortcut",description:"Run a keyboard shortcut without the keyboard"},A.propTypes={id:i.default.oneOf(["open_all_unreads","set_a_status","browse_dms","browse_channels","quick_switcher","open_preferences","open_all_threads"]).isRequired};var M=A,x=a("0Qg5"),R=a("s/YD"),D=a("rePB"),F=a("uPpK"),L=a("TSYQ"),U=a.n(L),B=a("oUPN"),H=a("fp5s"),W=a("RAhH"),q=a("hOGb"),G=a("ynxK"),K=a("18Pa"),V=(a("/e6G"),new p.b("keyboard_shortcuts")),z={title:"",keys:[],hasInfoButton:!1,infoButtonMessage:"",id:null,executeKeyboardShortcut:n.a,telemeter:{count:n.a}};class shortcut_Shortcut extends s.a.PureComponent{static makeAriaLabel(e){var{title:t,keys:a}=e,n=(a||[]).map(e=>{var t=e.split("key_")[1];return t?Object(q.b)(t):e}).join(" ");return V.t("{shortcutTitle}: {keyNames}",{shortcutTitle:t,keyNames:n})}constructor(){super(),this.execShortcut=this.execShortcut.bind(this)}execShortcut(){this.props.executeKeyboardShortcut({id:this.props.id}),this.props.telemeter.count("clicked_keyboard_shortcut")}renderKeys(){var{keys:e,title:t}=this.props;return e.map(e=>{var a=e.split("key_")[1];return a?s.a.createElement(q.a,{label:a,key:"".concat(t," ").concat(e," ").concat(Object(H.a)())}):e})}renderInfoButton(){return s.a.createElement(W.c,{tip:this.props.infoButtonMessage,delay:W.b},s.a.createElement(K.a,{className:"p-shortcuts_flexpane__tip",icon:"question-circle"}))}renderTitle(){var e=this.props.hasInfoButton?this.renderInfoButton():null,t=this.props.title;return null==this.props.id?s.a.createElement(r.Fragment,null,t,e):s.a.createElement(r.Fragment,null,s.a.createElement(G.a,{type:"button",onClick:this.execShortcut},t),e)}render(){return s.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut"},s.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},this.renderTitle()),s.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_keys"},this.renderKeys()))}}shortcut_Shortcut.defaultProps=z;var Y=shortcut_Shortcut;a("fHJC");function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var X=new p.b("shortcuts_flexpane"),J={items:[],executeKeyboardShortcut:n.a,telemeter:{count:n.a},onItemTabWithin:n.a,focusKey:null,setFocusKey:n.a};class keyboard_shortcuts_list_KeyboardShortcutsList extends r.PureComponent{constructor(e){super(e),Object(o.a)(this,["renderItem","isFocusableItem","focus","renderLabelForRow"]),this.list=s.a.createRef()}componentDidMount(){var{focusKey:e,items:t}=this.props;"keyboard_shortcuts"===e&&t.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}componentDidUpdate(e){var{focusKey:t}=e,{focusKey:a,items:n}=this.props;"keyboard_shortcuts"===a&&a!==t&&n.length&&(this.setFocusOnFirstItem(),this.clearFocusKey()),"keyboard_shortcuts"===a&&n.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}setFocusOnFirstItem(){var e=this.getItemKeys()[1],t=this.list.current;t&&t.focusOnKey(e)}getItemKeys(){return this.rows.map(e=>e.key)}clearFocusKey(){this.props.setFocusKey(null)}focus(){var e=this.list.current;e&&e.focus()}isFocusableItem(e){var{index:t}=e,a=this.rows[t];return a&&"shortcut"===a.type}createRows(){return this.props.items.reduce((e,t,a)=>{var n=t.shortcuts.map((e,t)=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach(function(t){Object(D.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({type:"shortcut",key:"shortcut-".concat(a,"-").concat(t)},e));return[...e,{type:"header",key:"header-".concat(a),title:t.title,subtitle:t.subtitle},...n]},[])}renderItem(e){var t=this.rows[e];if(!t||!t.type)return null;var{executeKeyboardShortcut:a,telemeter:n}=this.props;if("shortcut"===t.type)return s.a.createElement(Y,{title:t.title,hasInfoButton:t.hasInfoButton,infoButtonMessage:t.infoButtonMessage,id:t.id,executeKeyboardShortcut:a,telemeter:n,keys:t.keys});var i=U()("p-shortcuts_flexpane__shortcut_heading",{"p-shortcuts_flexpane__shortcut_heading_first":0===e});return"header"===t.type?s.a.createElement(r.Fragment,null,s.a.createElement("h3",{className:i},t.title),t.subtitle&&s.a.createElement("h4",{className:"p-shortcuts_flexpane__shortcut_sub_heading"},t.subtitle)):null}renderLabelForRow(e){var{index:t}=e,a=this.rows[t];if(a&&a.type&&"shortcut"===a.type)return{"aria-label":Y.makeAriaLabel({title:a.title,keys:a.keys})}}render(){this.rows=this.createRows();var e=this.getItemKeys();return s.a.createElement(F.a,null,t=>{var{width:a,height:n}=t;return s.a.createElement(B.a,{className:"p-shortcuts_flexpane__list",ref:this.list,width:a,height:n,keys:e,rowRenderer:this.renderItem,getPropsForItem:this.renderLabelForRow,animateOnScroll:!1,"aria-label":X.t("Keyboard Shortcuts"),isFocusableItem:this.isFocusableItem,onItemTabWithin:this.props.onItemTabWithin})})}}keyboard_shortcuts_list_KeyboardShortcutsList.defaultProps=J;var Z=keyboard_shortcuts_list_KeyboardShortcutsList;a("445Q");a.d(t,"a",function(){return keyboard_shortcuts_flexpane_KeyboardShortcutsFlexpane});var $={className:void 0,sections:void 0,keyboardLocale:null,enableUnreadView:!1,executeKeyboardShortcut:n.a,telemeter:{count:n.a},focusKey:null,setFocusKey:n.a,featureWysiwygComposer:!1,featureContextualMessageShortcuts:!1,featureMessageNavigationShortcuts:!1,featureAppViewsReminders:!1,isIAPhase1Enabled:!1},ee=new p.b("shortcuts_flexpane"),te=Object(d.j)();class keyboard_shortcuts_flexpane_KeyboardShortcutsFlexpane extends s.a.PureComponent{constructor(e){super(e),Object(o.a)(this,["renderBody","renderSubtitle","focus","onItemTabWithin"]),this.list=s.a.createRef(),this.flexpane=s.a.createRef()}onItemTabWithin(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}focus(){var e=this.list.current;e&&e.focus()}renderSubtitle(){var e="mac"===te?ee.t("Cmd"):ee.t("Ctrl"),t=Object(l.c)("/",{kb:this.props.keyboardLocale});return ee.rt('Press <span className="c-keyboard_key c-keyboard_key--slim">{headerCmdButton}</span><span className="c-keyboard_key c-keyboard_key--slim">{headerSlashButton}</span> to toggle this panel.',{headerCmdButton:e,headerSlashButton:t})}renderBody(){var{keyboardLocale:e,enableUnreadView:t,featureWysiwygComposer:a,executeKeyboardShortcut:n,focusKey:r,setFocusKey:i,telemeter:o,featureContextualMessageShortcuts:c,featureMessageNavigationShortcuts:l,featureAppViewsReminders:d}=this.props,p=this.props.sections||Object(x.c)({keyboardLocale:e,enableUnreadView:t,featureWysiwygComposer:a,featureContextualMessageShortcuts:c,featureMessageNavigationShortcuts:l,featureAppViewsReminders:d,isIAPhase1Enabled:this.props.isIAPhase1Enabled});return s.a.createElement(Z,{ref:this.list,items:p,keyboardLocale:e,executeKeyboardShortcut:n,telemeter:o,onItemTabWithin:this.onItemTabWithin,focusKey:r,setFocusKey:i})}render(){var e=ee.t("Keyboard Shortcuts");return s.a.createElement(R.b,{className:this.props.className,ref:this.flexpane,focus:this.focus,renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,title:e,kbNavOrder:Object(m.a)()?void 0:4.6,viewId:"shortcuts"})}}keyboard_shortcuts_flexpane_KeyboardShortcutsFlexpane.defaultProps=$;var ae=Object(c.b)(function(e){return{enableUnreadView:Object(u.k)(e,"enable_unread_view"),telemeter:Object(h.c)({state:e}),focusKey:Object(_.a)(e),featureWysiwygComposer:Object(f.a)(e),featureContextualMessageShortcuts:Object(v.m)(e,"feature_contextual_message_shortcuts"),featureMessageNavigationShortcuts:Object(v.m)(e,"feature_message_navigation_shortcuts"),featureAppViewsReminders:Object(v.m)(e,"feature_app_views_reminders"),isIAPhase1Enabled:Object(O.d)(e)}},e=>({executeKeyboardShortcut:function(){return e(M(...arguments))},setFocusKey:t=>e(Object(g.a)(t))}))(keyboard_shortcuts_flexpane_KeyboardShortcutsFlexpane);t.b=Object(b.a)(ae)},"0d94":function(e,t,a){"use strict";a.d(t,"b",function(){return p}),a.d(t,"a",function(){return h});var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=a("brL+"),o=a("fYfO"),c=a("hOQf"),l=a("ULIY"),d=(e,t)=>{var{ts:a,channelId:n}=t,r=Object(o.a)(e,n,a);return a&&Object(l.d)(Object(i.b)(e),n,a),{msg:r}};function p(e){return Object(s.b)(d)(t=>t.msg?r.a.createElement(e,t):null)}var u=(e,t)=>{var{ts:a,prevTs:n,channelId:r}=t,s=Object(o.a)(e,r,a),d=Object(o.a)(e,r,n),p=Object(i.b)(e);return a&&Object(l.d)(p,r,a),n&&Object(l.d)(p,r,n),{msg:s,adjacent:Object(c.W)(e,s,d)}};function h(e){return Object(s.b)(u)(t=>t.msg?r.a.createElement(e,t):null)}},"0dCl":function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return X});var n=a("UXvI"),r=a("ifKl"),s=a("q1tI"),i=a.n(s),o=a("wSSu"),c=a.n(o),l=a("9rZX"),d=a.n(l),p=a("kvAW"),u=a("qJlv"),h=a("7B0+"),m=(a("aK/h"),a("TSYQ")),b=a.n(m),_=a("XHGt"),g=a("lhZz"),f=a("s/0T"),v=a("yHhI"),O=a("Zr7G"),y=a("+Lv6"),C=a("IY6O"),j=a("gLeh"),E=a("mNhP"),k=a("Z7Ay"),S=a("g5qt"),I=a("4lvZ"),w=a("t1Oe"),T=a("c+ts"),N=a("jfx7"),P=a("p9qW"),A=a("Tc5z"),M=a("Gogr"),x=a("yw6X"),R=a("R//h"),D=a("7R01"),F=a("Mv5p"),L=(a("TY84"),a("aXcn")),U=a("8mv9"),B=a("kcos"),H=a("fj0Z"),W=a("DEaQ"),q=a("xRgT"),G=a("lV17"),K=(a("ztz9"),{teamId:"",numTeams:0,teamStore:null,handleWindowFocusEvent:r.a,handleWindowUnloadingEvent:r.a,handleWindowMouseDownEvent:r.a,handleWindowKeyDownEvent:r.a,isScreenReaderEnabled:!1,isCustomTitlebarShown:!1,isMainWindowVisible:!1,workspaceFailedToBoot:!1,workspaceIsMigrating:!1,workspaceMigrationIsComplete:!1,workspaceIsAccessLimited:!1,willNavigateToUnbootedWorkspace:!1,useIATopNav:!1}),V=1e4,z={leading:!0,trailing:!1};class Client extends s.Component{constructor(e){super(e),this.state={isMockingTeamSwitch:!1},Object(k.a)("mockSwitchTeams",()=>{this.setState(()=>({isMockingTeamSwitch:!0})),setTimeout(()=>{this.setState(()=>({isMockingTeamSwitch:!1}))},500)}),this.handleWindowFocus=this.handleWindowFocus.bind(this),this.handleWindowBlur=this.handleWindowBlur.bind(this),this.handleWindowBeforeUnload=this.handleWindowBeforeUnload.bind(this),this.handleWindowDragOver=this.handleWindowDragOver.bind(this),this.handleWindowDrop=this.handleWindowDrop.bind(this),this.handleWindowMouseDown=this.handleWindowMouseDown.bind(this),this.handleWindowKeyDown=Object(n.a)(this.handleWindowKeyDown.bind(this),V,z),this.handleVisibilityChange=this.handleVisibilityChange.bind(this)}componentDidMount(){window.addEventListener("focus",this.handleWindowFocus),window.addEventListener("blur",this.handleWindowBlur),window.addEventListener("beforeunload",this.handleWindowBeforeUnload),window.addEventListener("dragover",this.handleWindowDragOver),window.addEventListener("drop",this.handleWindowDrop),window.addEventListener("mousedown",this.handleWindowMouseDown),window.addEventListener("keydown",this.handleWindowKeyDown),window.addEventListener("visibilitychange",this.handleVisibilityChange);var e=!!(document&&document.hasFocus&&document.hasFocus());this.props.handleWindowFocusEvent({isFocused:e}),(!e||"visible"!==document.visibilityState||S.W&&!this.props.isMainWindowVisible)&&(Object(g.dispatchForClientStore)(Object(f.c)(!1)),Object(g.dispatchForClientStore)(Object(f.d)(!1)),Object(g.dispatchForClientStore)(Object(f.b)(!1))),Object(F.a)()&&document.body.classList.add("supports_custom_scrollbar")}componentDidUpdate(){S.W&&!this.props.isMainWindowVisible&&(Object(g.dispatchForClientStore)(Object(f.c)(!1)),Object(g.dispatchForClientStore)(Object(f.d)(!1)),Object(g.dispatchForClientStore)(Object(f.b)(!1)))}componentWillUnmount(){window.removeEventListener("focus",this.handleWindowFocus),window.removeEventListener("blur",this.handleWindowBlur),window.removeEventListener("beforeunload",this.handleWindowBeforeUnload),window.removeEventListener("dragover",this.handleWindowDragOver),window.removeEventListener("drop",this.handleWindowDrop),window.removeEventListener("mousedown",this.handleWindowMouseDown),window.removeEventListener("keydown",this.handleWindowKeyDown),window.removeEventListener("visibilitychange",this.handleVisibilityChange)}handleWindowFocus(){Object(v.b)().info("FOCUS-EVENT","Client window focused"),this.props.handleWindowFocusEvent({isFocused:!0})}handleWindowBlur(){Object(v.b)().info("FOCUS-EVENT","Client window blurred"),this.props.handleWindowFocusEvent({isFocused:!1}),Object(g.dispatchForClientStore)(Object(f.c)(!1))}handleVisibilityChange(){"visible"!==document.visibilityState&&Object(g.dispatchForClientStore)(Object(f.c)(!1))}handleWindowBeforeUnload(){Object(v.b)().info("WINDOW-UNLOADING","Client window is unloading"),this.props.handleWindowUnloadingEvent({isUnloading:!0})}handleWindowDragOver(e){return e.preventDefault(),!1}handleWindowDrop(e){return e.preventDefault(),!1}handleWindowMouseDown(){this.props.handleWindowMouseDownEvent()}handleWindowKeyDown(){this.props.handleWindowKeyDownEvent()}renderMockSwitchTeamsDisplay(){return i.a.createElement("div",{style:{height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center"}},i.a.createElement("h1",null,"Pretending to switch teams, will switch back shortly"))}renderActiveMigrationView(){var{teamId:e,workspaceFailedToBoot:t,workspaceMigrationIsComplete:a}=this.props;if(!t)return null;var n=Object(M.d)(e,"name"),r=Object(M.d)(e,"enterprise_name");return i.a.createElement("span",{id:"migration_blocker_page__wrapper",className:"p-migration_blocker_page__wrapper"},i.a.createElement(x.a,{enterpriseName:r,teamId:e,teamName:n,migrationIsComplete:a}))}renderBootErrorView(){var{workspaceFailedToBoot:e,workspaceIsAccessLimited:t}=this.props;return e?i.a.createElement(H.a,{isAccessLimited:t,shouldRetry:!0}):null}renderWorkspace(){var{workspaceFailedToBoot:e,workspaceIsMigrating:t}=this.props;if(t)return this.renderActiveMigrationView();if(e)return this.renderBootErrorView();return i.a.createElement(G.a,{teamId:this.props.teamId,renderSonicMenu:e=>i.a.createElement(W.a,{menuProps:e})})}renderMainContent(){var{isMockingTeamSwitch:e}=this.state,{willNavigateToUnbootedWorkspace:t}=this.props;return e?this.renderMockSwitchTeamsDisplay():t?i.a.createElement(N.a,null):this.renderWorkspace()}render(){var{numTeams:e,teamId:t,teamStore:a,useIATopNav:n}=this.props,r=Object(g.getClientStoreInstance)(),o=Object(P.a)({numTeams:e}),c=o?i.a.createElement(_.a,{store:r},i.a.createElement(q.a,{className:"p-client__team_sidebar",selectedTeamId:t})):null,l=b()("p-client",{"p-client--show-team-sidebar":o,"p-client--ia-top-nav":n,"p-client--custom-titlebar":this.props.isCustomTitlebarShown}),d=n&&i.a.createElement(s.Fragment,null,i.a.createElement(L.a,{teamId:this.props.teamId}),i.a.createElement(U.a,null));return i.a.createElement(s.Fragment,null,i.a.createElement(T.a,null),i.a.createElement(w.a,{isScreenReaderEnabled:this.props.isScreenReaderEnabled},i.a.createElement(_.a,{key:t,store:a},i.a.createElement(R.a,null,i.a.createElement(I.a,{store:a},i.a.createElement(D.a,null,i.a.createElement("div",{className:l},i.a.createElement(y.b,null,d,c,i.a.createElement(y.b,null,this.renderMainContent())))))))))}}Client.defaultProps=K;var Y={handleWindowFocusEvent:function(){return Object(E.a)(...arguments)},handleWindowUnloadingEvent:function(){return Object(E.d)(...arguments)},handleWindowMouseDownEvent:function(){return Object(E.c)(...arguments)},handleWindowKeyDownEvent:function(){return Object(E.b)(...arguments)}},Q=Object(h.hot)(e)(Object(_.b)(function(e){var t=Object(C.getFocusedWorkspace)(e),a=Object(C.getNumberOfWorkspaces)(e),n=Object(g.getStoreInstanceByTeamId)(t),r=n&&n.getState();return{teamId:t,teamStore:n,numTeams:a,isScreenReaderEnabled:Object(j.b)(r),workspaceIsMigrating:Object(C.isWorkspaceMigrating)(e,t),workspaceMigrationIsComplete:Object(C.isWorkspaceMigrationComplete)(e,t),workspaceIsAccessLimited:Object(C.isWorkspaceAccessLimited)(e,t),isCustomTitlebarShown:Object(A.k)(e),isMainWindowVisible:Object(A.m)(e),workspaceFailedToBoot:Object(C.hasWorkspaceFailedToBoot)(e,t),willNavigateToUnbootedWorkspace:!!Object(C.getWillNavigateToUnbootedWorkspaceId)(e),useIATopNav:Object(B.f)(r)}},Y)(Client));function X(e,t){var a=Object(g.getClientStoreInstance)(),n=Object(C.getFocusedWorkspace)(a.getState()),r=()=>{c.a.render(i.a.createElement(p.a,{backend:u.a},i.a.createElement(_.a,{store:a},i.a.createElement(Q,null))),e,t)};Object(O.c)({teamId:n}).count("client_boot_mount_attempt"),window.clientBootMountTeam=n,Object(v.a)({teamId:n}).info("BOOT","(".concat(n,") Mounting client")),r(),d.a.setAppElement(e),Object(k.a)("mountClient",()=>{r()}),Object(k.a)("unmountClient",()=>{c.a.unmountComponentAtNode(e)})}}).call(this,a("3UD+")(e))},"0gKA":function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=a("aK/h"),o=a("XHGt"),c=a("tn36"),l=a("TSYQ"),d=a.n(l),p=(a("yPgC"),a("negh")),u=a("kOzZ"),h=a("BUzq"),m=a("0F/N"),b=a("t85p"),_=a("uvIC"),g=a("4M+g"),f=a("fYfO"),v=a("miRO"),O=a("oRxB"),y=a("dxEi"),C=a("iZHp"),j=a("hhak"),E=a("S2Hy"),k=a("QOH6"),S=a("kcos"),I=a("hOGb"),w=a("rePB"),T=a("4zXV"),N=a("om+M"),P=a("Y/4G");function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var M=Object(N.a)("Adds a reminder for a message via API call",(e,t,a)=>{var n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a,{client_token:P.a.generateAndEnqueue(t())});return e(Object(T.a)({method:"reminders.addFromMessage",args:n}))});M.meta={name:"addReminderForMessage",key:"fetchersMessageActionsApiAddReminderForMessage",description:"Adds a reminder for a message via API call"},M.propTypes={time:i.default.oneOf(["In 20 minutes","In 1 hour","In 3 hours","Tomorrow","Next week","Custom"]).isRequired,message_channel:i.default.string.isRequired,message_ts:i.default.string.isRequired,respond_in_channel:i.default.bool};var x=a("hOQf"),R=a("h9PG"),D=a("8dKT"),F=a("ICFZ"),L=a("nNoG"),U=a("Smdl"),B=a("PM8X"),H=a("ROZo"),W=(Object(H.b)("TS.replies.promiseToGetSubscriptionState",()=>Promise.resolve()),Object(H.b)("TS.replies.setSubscriptionState")),q=(Object(H.b)("TS.replies.getSubscriptionState"),Object(H.b)("TS.replies.canReplyToMsg"),Object(H.b)("TS.replies.requestOfflineThread"),Object(H.b)("TS.replies.dispatchThreadSyncedSig"),a("2Zgd")),G=a("wMtF"),K=a("J19L"),V=a("1yga"),z=a("auxT"),Y=a("aLpA"),Q=a("dhvi"),X=a("MREy"),J=a("wx14"),Z=a("Ff2n"),$=a("m8R6"),ee=a("NFsq"),te=a("Z0Cl"),ae=a("6FZx"),ne=a("BWAg"),re=a("XfeM"),se=a("zmn3"),ie=a("hbEN"),oe=a("qcAq"),ce=a("TGBA"),le=a("U/ze"),de=a("n2GJ"),pe=new L.b("message"),ue={ts:i.default.string.isRequired,channelId:i.default.string.isRequired},he=Object(le.b)(function(e){var{ts:t,channelId:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(f.a)(e,a,t);return n&&Object(x.e)(e,n)?{id:Y.V.addReaction,name:pe.t("Add reaction"),iconType:"add-reaction","data-qa":"add_reaction_menu_item",frecencyId:Object(de.f)("add_reaction"),uiElement:p.UiElement.ADD_REACTION_BUTTON}:null});he.meta={name:"addReaction",key:"componentsMessageActionSelectorsAddReactionAddReaction"},he.propTypes=ue;var me=he,be=new L.b("message"),_e={ts:i.default.string.isRequired,channelId:i.default.string.isRequired},ge=Object(le.b)(function(e){var{ts:t,channelId:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(f.a)(e,a,t);if(!n)return null;var r=Object(g.e)(e,a);if(!Object(x.r)(e,{message:n,channel:r}))return null;var s=be.t("Start a thread"),i=p.UiElement.START_A_THREAD_BUTTON;return(Object(x.ub)(n)||Object(x.S)(n))&&(s=be.t("Reply to thread"),i=p.UiElement.REPLY_TO_THREAD_BUTTON),{id:Y.V.comment,name:s,iconType:"comment-alt","data-qa":"start_thread_menu",frecencyId:Object(de.f)("thread_reply"),uiElement:i}});ge.meta={name:"comment",key:"componentsMessageActionSelectorsCommentComment"},ge.propTypes=_e;var fe=ge,ve=new L.b("message"),Oe={ts:i.default.string.isRequired,channelId:i.default.string.isRequired},ye=Object(le.b)(function(e){var{ts:t,channelId:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(f.a)(e,a,t);if(!n)return null;var r=Object(g.e)(e,a);return Object(x.h)(e,{message:n,channel:r})?{id:Y.V.copyLink,name:Object(b.m)(e,"feature_desktop_copy_text")?ve.t("Copy link to message"):ve.t("Copy link"),iconType:"link","data-qa":"copy_link",frecencyId:Object(de.f)("copy_link"),uiElement:p.UiElement.COPY_LINK_BUTTON}:null});ye.meta={name:"copyLink",key:"componentsMessageActionSelectorsCopyLinkCopyLink"},ye.propTypes=Oe;var Ce=ye,je=new L.b("message"),Ee={ts:i.default.string.isRequired,channelId:i.default.string.isRequired,disabled:i.default.bool.isRequired,showOfflineIcon:i.default.bool.isRequired},ke=Object(le.b)(function(e){var{ts:t,channelId:a,messageContainerType:n,disabled:r=!1,showOfflineIcon:s=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object(f.a)(e,a,t);if(!i)return null;var o=Object(g.e)(e,a);if(!Object(x.k)(e,{message:i,channel:o,messageContainerType:n}))return null;var c=Object(b.m)(e,"feature_contextual_message_shortcuts");return{id:Y.V.deleteMessage,name:je.t("Delete message"),shortcut:c?je.t("delete"):void 0,iconType:"trash",danger:!0,"data-qa":"delete_message",frecencyId:Object(de.f)("delete"),uiElement:p.UiElement.DELETE_MESSAGE_BUTTON,disabled:r,showOfflineIcon:s}});ke.meta={name:"deleteMessage",key:"componentsMessageActionSelectorsDeleteMessageDeleteMessage"},ke.propTypes=Ee;var Se=ke,Ie=new L.b("message"),we={ts:i.default.string.isRequired,channelId:i.default.string.isRequired,disabled:i.default.bool.isRequired,showOfflineIcon:i.default.bool.isRequired},Te=Object(le.b)(function(e){var{ts:t,channelId:a,disabled:n=!1,showOfflineIcon:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=Object(f.a)(e,a,t);if(!s)return null;var i=Object(g.e)(e,a),o=Object(b.d)(e),c=Object(R.a)(e,"msg_edit_window_mins");if(!Object(x.l)(e,o,s,i,c))return null;var l=Object(b.m)(e,"feature_contextual_message_shortcuts");return{id:Y.V.editMessage,name:Ie.t("Edit message"),shortcut:l?Ie.t("E"):void 0,iconType:"pencil","data-qa":"edit_message",frecencyId:Object(de.f)("edit"),uiElement:p.UiElement.EDIT_MESSAGE_BUTTON,disabled:n,showOfflineIcon:r}});Te.meta={name:"editMessage",key:"componentsMessageActionSelectorsEditMessageEditMessage"},Te.propTypes=we;var Ne=Te,Pe=new L.b("message"),Ae=new L.b("messages_action_items"),Me={ts:i.default.string.isRequired,channelId:i.default.string.isRequired,allUnreads:i.default.string.isRequired},xe=Object(le.b)(function(e){var{ts:t,channelId:a,allUnreads:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(f.a)(e,a,t);if(!r)return null;var s=Object(g.e)(e,a);if(!Object(x.m)(e,{message:r,channel:s}))return null;var i=Object(b.m)(e,"feature_contextual_message_shortcuts");return{id:Y.V.markUnread,name:n?Ae.t("Mark above as read"):Pe.t("Mark unread"),shortcut:!n&&i?Pe.t("U"):void 0,iconType:"mark-unread","data-qa":"mark_unread",frecencyId:Object(de.f)("mark_unread"),uiElement:p.UiElement.MARK_UNREAD_BUTTON}});xe.meta={name:"markUnread",key:"componentsMessageActionSelectorsMarkUnreadMarkUnread"},xe.propTypes=Me;var Re=xe,De=a("6kok"),Fe=new L.b("message");function Le(e,t,a,n){var r="#".concat(t);switch(a){case"channel":return e?Fe.t("Un-pin from channel",{channelName:r,fallbackHash:"fde81182bd7937727711f50079046f2e43ab467c"}):n?Fe.t("Pin to channel",{channelName:r,fallbackHash:"017de9a57dbb4ec0a6c70cb3a18a8c6c762a3e0f"}):Fe.t("Pin to channel",{channelName:r,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"});case"private":return e?Fe.t("Un-pin from channel",{channelName:t,fallbackHash:"fde81182bd7937727711f50079046f2e43ab467c"}):n?Fe.t("Pin to channel",{channelName:t,fallbackHash:"017de9a57dbb4ec0a6c70cb3a18a8c6c762a3e0f"}):Fe.t("Pin to channel",{channelName:t,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"});default:return e?Fe.t("Un-pin from this conversation"):n?Fe.t("Pin to this conversation",{fallbackHash:"26463acec4f15a90924c42970bb258dae75e73f9"}):Fe.t("Pin to this conversation\u2026")}}var Ue=new L.b("message"),Be={ts:i.default.string.isRequired,channelId:i.default.string.isRequired,disabled:i.default.bool.isRequired,showOfflineIcon:i.default.bool.isRequired},He=Object(le.b)(function(e){var{ts:t,channelId:a,disabled:n=!1,showOfflineIcon:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=Object(f.a)(e,a,t);if(!s)return null;var i=Object(g.e)(e,a);if(!Object(x.o)(e,{message:s,channel:i}))return null;var o=Object(h.j)(e,{channelId:a,ts:t}),c=Object(De.w)(e,i,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),l=Object(De.u)(i),d=o?p.UiElement.PIN_TO_THIS_CONVERSATION_BUTTON:p.UiElement.UNPIN_FROM_THIS_CONVERSATION_BUTTON,u=Object(b.m)(e,"feature_sonic_pins"),m=Object(b.m)(e,"feature_contextual_message_shortcuts");return{id:Y.V.pin,name:Le(o,c,l,u),iconType:"thumb-tack",shortcut:m?Ue.t("P"):void 0,"data-qa":"pin_message",frecencyId:Object(de.f)(o?"unpin":"pin"),uiElement:d,disabled:n,showOfflineIcon:r}});He.meta={name:"pin",key:"componentsMessageActionSelectorsPinPin"},He.propTypes=Be;var We=He,qe=a("JS8a"),Ge=a("J47P"),Ke=a("hcpk"),Ve=Object(re.b)("Add a reminder for a message",function(e,t){var{time:a,channelId:n,ts:r,viewContext:s,featureContextualMessageShortcuts:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Object(f.a)(t(),n,r);return i&&e(Object(k.a)({viewContext:s,channelId:n,ts:r})),e(M({time:a,message_channel:n,message_ts:r,respond_in_channel:Object(x.yb)(o)}))});Ve.meta={name:"addReminderForMessage",key:"actionsAddReminderForMessageAddReminderForMessage",description:"Add a reminder for a message"},Ve.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired,time:i.default.string.isRequired,viewContext:i.default.string};var ze=Ve,Ye=new L.b("message"),Qe={shortcut:void 0};class remind_RemindMenuItem extends r.PureComponent{constructor(e){super(e),this.onSelected=this.onSelected.bind(this)}onSelected(){var{remind:e,ts:t,channelId:a,time:n,clogger:r}=this.props;e({ts:t,channelId:a,time:n}),r.track(p.EventId.MSG_ACTION,{contexts:{ui_context:{action:p.UiAction.CLICK,step:p.UiStep.MORE_ACTIONS_MENU,ui_element:p.UiElement.REMIND_ME_BUTTON}}})}render(){var e=this.props,{remind:t,ts:a,channelId:n,time:r}=e,i=Object(Z.a)(e,["remind","ts","channelId","time"]);return s.a.createElement(ne.a,Object(J.a)({},i,{onSelected:this.onSelected}))}}remind_RemindMenuItem.defaultProps=Qe;var Xe={remind:ze},Je=Object(o.b)(e=>({clogger:Object(u.a)({state:e})}),Xe)(remind_RemindMenuItem),Ze=Object(ae.b)(Je);class remind_Remind extends r.PureComponent{constructor(e){super(e),this.renderSubmenu=this.renderSubmenu.bind(this)}renderSubmenu(e){var{channelId:t,ts:a,featureAppViewsReminders:n,featureContextualMessageShortcuts:r}=this.props,i={channelId:t,ts:a};return s.a.createElement(qe.a,Object(J.a)({},e,{"data-qa":"remind_submenu",width:"auto"}),s.a.createElement(Ze,Object(J.a)({},i,{label:Ye.t("In 20 minutes",{fallbackHash:"c473e4622b51d4d86dabe29940fee9c1796bb93d"}),time:"In 20 minutes"})),s.a.createElement(Ze,Object(J.a)({},i,{label:Ye.t("In 1 hour",{fallbackHash:"e2e5de960f1c2c574aaeac98339a787a5bdab8e6"}),time:"In 1 hour"})),s.a.createElement(Ze,Object(J.a)({},i,{label:Ye.t("In 3 hours",{fallbackHash:"9ec09cee220ff97e87efe884ad910bc050c301cb"}),time:"In 3 hours"})),s.a.createElement(Ze,Object(J.a)({},i,{label:Ye.t("Tomorrow"),time:"Tomorrow"})),s.a.createElement(Ze,Object(J.a)({},i,{label:Ye.t("Next week",{fallbackHash:"fdc2b827d9b1e8ed62eeb53c174f0ba91f90f490"}),time:"Next week"})),n&&s.a.createElement(Ze,Object(J.a)({},i,{label:Ye.t("Custom\u2026"),time:"Custom",shortcut:r?Ye.t("M"):void 0})))}render(){var e=this.props,{channelId:t,ts:a}=e,n=Object(Z.a)(e,["channelId","ts"]);return s.a.createElement(Ke.a,Object(J.a)({},n,{renderSubmenu:this.renderSubmenu}))}}remind_Remind.defaultProps={featureAppViewsReminders:!1,renderLegacySubmenu:!0,featureContextualMessageShortcuts:!1};var $e=Object(Ge.a)(remind_Remind),et=Object(le.b)(function(e){var{ts:t,channelId:a,disabled:n=!1,showOfflineIcon:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object(f.a)(e,a,t);if(!i)return null;var o=Object(g.e)(e,a);if(!Object(x.f)(e,{message:i,channel:o}))return null;var c=Object(b.m)(e,"feature_app_views_reminders"),l=Object(b.m)(e,"feature_contextual_message_shortcuts");return s.a.createElement($e,{key:"remind_submenu",label:Ye.t("Remind me about this"),"data-qa":"remind_me",frecencyId:Object(de.f)("remind"),ts:t,channelId:a,featureAppViewsReminders:c,featureContextualMessageShortcuts:l,renderLegacySubmenu:!0,disabled:n,showOfflineIcon:r})});et.meta={name:"remindSubmenu",key:"componentsMessageActionSelectorsRemindRemindSubmenu"};var tt=et,at=new L.b("message"),nt={ts:i.default.string.isRequired,channelId:i.default.string.isRequired,messageContainerType:i.default.oneOf(Object(ce.a)(Y.I)),disabled:i.default.bool.isRequired,showOfflineIcon:i.default.bool.isRequired},rt=Object(le.b)(function(e){var{ts:t,channelId:a,messageContainerType:n,disabled:r=!1,showOfflineIcon:s=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object(f.a)(e,a,t);if(!i)return null;var o=Object(g.e)(e,a);if(!Object(x.p)(e,{message:i,channel:o,messageContainerType:n}))return null;var c=Object(De.Cb)(o)||Object(De.Bb)(o)?at.t("Remove from channel"):at.t("Remove from conversation");return{id:Y.V.removeBroadcast,name:c,iconType:"times","data-qa":"remove_broadcast",frecencyId:Object(de.f)("remove"),uiElement:p.UiElement.REMOVE_FROM_CONVERSATION_BUTTON,disabled:r,showOfflineIcon:s}});rt.meta={name:"removeBroadcast",key:"componentsMessageActionSelectorsRemoveBroadcastRemoveBroadcast"},rt.propTypes=nt;var st=rt,it=a("NrNc"),ot=a("Ro9a"),ct=new L.b("message"),lt={ts:i.default.string.isRequired,channelId:i.default.string.isRequired},dt=Object(le.b)(function(e){var{ts:t,channelId:a,disabled:n=!1,showOfflineIcon:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object(ot.a)(e))return null;var s=Object(f.a)(e,a,t);return s&&Object(it.a)(e,s)?{id:Y.V.replyToEmail,name:ct.t("Reply to email"),iconType:"share-email","data-qa":"reply_to_email",frecencyId:"reply_to_email",disabled:n,showOfflineIcon:r}:null});dt.meta={name:"replyToEmail",key:"componentsMessageActionSelectorsReplyToEmailReplyToEmail"},dt.propTypes=lt;var pt=dt,ut=new L.b("message"),ht={ts:i.default.string.isRequired,channelId:i.default.string.isRequired},mt=Object(le.b)(function(e){var{ts:t,channelId:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(f.a)(e,a,t);if(!n)return null;if(!Object(x.g)(n))return null;var r=Object(x.ob)(n)?ut.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):ut.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"}),s=Object(b.m)(e,"feature_contextual_message_shortcuts");return{id:Y.V.shareMessage,name:r,iconType:"share-action","data-qa":"share_message_menu",frecencyId:Object(de.f)("share"),uiElement:p.UiElement.SHARE_MESSAGE_BUTTON,shortcut:s?ut.t("S"):void 0}});mt.meta={name:"shareMessage",key:"componentsMessageActionSelectorsShareMessageShareMessage"},mt.propTypes=ht;var bt=mt,_t=a("F294"),gt=new L.b("message"),ft={ts:i.default.string.isRequired,channelId:i.default.string.isRequired},vt=Object(le.b)(function(e){var{ts:t,channelId:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(f.a)(e,a,t);if(!n)return null;if(!Object(x.t)(n))return null;var r=Object(x.rb)(n),s=r?gt.t("Unstar message"):gt.t("Star message");if(Object(x.cb)(n)){var i=Object(_t.a)(n.files);n.comment&&Object(_.d)(e,i,n.comment.id)&&(s=r?gt.t("Unstar file comment"):gt.t("Star file comment"))}var o=r?p.UiElement.UNSTAR_MESSAGE_BUTTON:p.UiElement.STAR_MESSAGE_BUTTON,c=r?"unstar-o":"star-o";return Object(S.d)(e)&&(s=r?"Remove from saved":"Save",c=r?"bookmark-filled":"bookmark"),{id:Y.V.star,name:s,iconType:c,"data-qa":"star_message_menu",frecencyId:Object(de.f)(r?"unstar":"star"),uiElement:o}});vt.meta={name:"star",key:"componentsMessageActionSelectorsStarStar"},vt.propTypes=ft;var Ot=vt,yt=a("Xjfm"),Ct=a("XL7r"),jt=new L.b("message"),Et=Object(le.b)(function(e){var{ts:t,threadTs:a,channelId:n,disabled:r=!1,showOfflineIcon:s=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object(f.a)(e,n,a||t),o=Object(g.e)(e,n),c=Object(De.X)(o),l=Object(yt.b)(e,{ts:a||t,channelId:n}),d=c&&l;if(!Object(x.r)(e,{message:i,channel:o,ignoreMembership:d}))return null;var u,h=Object(Ct.k)(e,"threads_everything"),m=Object(x.S)(i),b=jt.t("Follow message"),_=jt.t("You\u2019ll be notified about any replies"),v=p.UiElement.FOLLOW_MESSAGE_BUTTON,O=Object(yt.c)(e,{ts:a||t,channelId:n});return!O||r&&s?l?(m?(b=jt.t("Unfollow thread"),u=jt.t("This will be removed from Threads"),_=h?jt.t("You won\u2019t be notified about new replies"):u):(b=jt.t("Unfollow message"),u=jt.t("Replies will be excluded from Threads"),_=h?jt.t("You won\u2019t be notified about replies"):u),v=p.UiElement.UNFOLLOW_MESSAGE_BUTTON):m?(b=jt.t("Follow thread"),u=jt.t("New replies will appear in Threads"),_=h?jt.t("You\u2019ll be notified about new replies"):u):(b=jt.t("Follow message"),u=jt.t("Any replies will show up in Threads"),_=h?jt.t("You\u2019ll be notified about any replies"):u):(b=jt.t("Loading\u2026",{fallbackHash:"0e140d567d90b0014d95ffec7a755e52355079f3"}),_=""),{id:Y.V.subscribe,name:b,description:_,isLoading:O,iconType:"message-notification","data-qa":"follow_message",frecencyId:Object(de.f)(l?"thread_unfollow":"thread_follow"),uiElement:v}});Et.meta={name:"subscribe",key:"componentsMessageActionSelectorsSubscribeSubscribe"},Et.propTypes={ts:i.default.string.isRequired,channelId:i.default.string.isRequired,disabled:i.default.bool.isRequired,showOfflineIcon:i.default.bool.isRequired};var kt=Et,St=a("quKg"),It=a("1hAG"),wt=a("5mKg"),Tt=a("K2Qr"),Nt=a("HBMi"),Pt=new L.b("message"),At={ts:i.default.string.isRequired,channelId:i.default.string.isRequired,messageContainerType:i.default.oneOf(Object(ce.a)(Y.I)),disabled:i.default.bool.isRequired,showOfflineIcon:i.default.bool.isRequired},Mt=Object(le.b)(function(e){var{ts:t,channelId:a,disabled:n=!1,showOfflineIcon:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object(b.m)(e,"feature_insights_comms_impact_message_stats"))return null;if("treatment"!==Object(St.c)(e,"insights_comms_impact_message_stats_pilot"))return null;var s=Object(It.d)(e);if(!Object(wt.x)(s)&&!Object(wt.v)(s)&&!Object(wt.s)(s))return null;var i=Object(f.a)(e,a,t);if(!i)return null;var o=Object(x.N)(i);if(Object(x.qb)(i)||"bot_message"===o)return null;var c=Object(g.e)(e,a);if(!c||!Object(De.Cb)(c)&&!Object(De.Bb)(c)||Object(De.ab)(c))return null;var l,d=Object(Tt.f)(e,a);if(!(l=d&&d.counts&&d.counts.member_count)||l<50)return null;var u=Object(Nt.a)(t),h=Object(St.c)(e,"insights_comms_impact_message_stats_data_cutoff");return u<new Date(h&&"control"!==h?h:"2019-12-15")?null:{id:Y.V.viewStats,name:Pt.t("View message activity"),iconType:"times","data-qa":Y.V.viewStats,frecencyId:Object(de.f)(Y.V.viewStats),uiElement:p.UiElement.REMOVE_FROM_CONVERSATION_BUTTON,disabled:n,showOfflineIcon:r}});Mt.meta={name:"viewStats",key:"componentsMessageActionSelectorsViewStatsViewStats"},Mt.propTypes=At;var xt=Mt,Rt=a("qSXi"),Dt=a("HYPA"),Ft=a("/X+W"),Lt=a("rtjy");function Ut(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Bt=new L.b("app_actions"),Ht=e=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(a),!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ut(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({},e,{danger:!1,description:Bt.t("Slack")}),Wt=e=>({id:e.frecencyId,action:e}),qt=Object(re.b)("Search message actions (app + Slack) in Redux store",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{query:n=""}=a,r=Object(Z.a)(a,["query"]),s=t(),{actions:i}=Object(Dt.c)(s),o=[...((e,t)=>[me(e,t),fe(e,t),Ce(e,t),Se(e,t),Ne(e,t),Re(e,t),We(e,t),st(e,t),pt(e,t),bt(e,t),Ot(e,t),kt(e,t)])(s,r).filter(e=>e&&!e.isLoading).map(Ht),...i.map(Rt.a)];return o=o.filter(e=>Object(Rt.b)(e,Object(Ft.a)(n))),o=(o=Object(Lt.e)(s,{query:n,list:o.map(Wt)})).map(e=>e.action)});qt.meta={name:"searchLocalMessageActions",key:"actionsSearchMessageActionsSearchLocalMessageActions",description:"Search message actions (app + Slack) in Redux store"},qt.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired,messageContainerType:i.default.oneOf(Object(ce.a)(Y.I)),query:i.default.string};var Gt=Object(re.b)("Search message actions (app + Slack), returns as Promise",(e,t,a)=>{var n=e(qt(a));return Promise.resolve(n)});Gt.meta={name:"searchMessageActions",key:"actionsSearchMessageActionsSearchMessageActions",description:"Search message actions (app + Slack), returns as Promise"},Gt.propTypes=qt.propTypes;var Kt=Gt,Vt=a("2/vs"),zt=a("9E9B"),Yt=a("/Q0P"),Qt=a("d7ED"),Xt=(a("8yst"),a("ejm9"),a("zoXK"),s.a.lazy(()=>Promise.all([a.e(132),a.e(131)]).then(a.bind(null,"D+tl")))),Jt=Object(re.b)("Opens the Message Stats modal",function(e,t){var{messageTs:a,channelId:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(Qt.k)({messageTs:a,channelId:n})),e(Object(Yt.a)({element:s.a.createElement(Xt,{messageTs:a,channelId:n})}))});Jt.meta={name:"openMessageStats",key:"actionsCommsImpactOpenMessageStatsOpenMessageStats",description:"Opens the Message Stats modal"},Jt.propTypes={messageTs:i.default.string.isRequired,channelId:i.default.string.isRequired};var Zt=Jt,$t=a("yHhI"),ea=a("Q+UV");var ta={changeReactionFromUserAction:function(){return Object(O.a)(...arguments)},closeModal:function(){return Object(Q.a)(...arguments)}},aa=Object(o.b)(null,ta)(class app_actions_emoji_menu_AppActionsEmojiMenu extends r.PureComponent{constructor(e){super(e),this.onEmojiSelected=this.onEmojiSelected.bind(this)}onEmojiSelected(e,t){this.props.changeReactionFromUserAction({key:this.props.reactionKey,name:t})}render(){return s.a.createElement(G.a,{showHandyReactions:!0,forceOpen:!0,onEmojiSelected:this.onEmojiSelected,onClose:this.props.closeModal,startsOpen:!0,contentStyle:{left:"auto",top:"auto"},overlayStyle:{display:"flex","justify-content":"center","align-items":"center"}},s.a.createElement("span",{style:{position:"absolute"}}))}}),na=(e,t,a)=>{var{channelId:n,ts:r}=t;return a((t,i)=>{var o=i(),c=Object(f.a)(o,n,r),l=Object(ea.b)(c);return Object(U.a)()?a(Object(Q.e)({element:s.a.createElement(aa,{reactionKey:l})})):Object(B.a)({e:e,rxn_key:l})})},ra=a("HvGc"),sa=Object(re.b)("Open a thread to reply to a message",function(e,t){var{channelId:a,ts:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t(),s=Object(f.a)(r,a,n).thread_ts||n;e(Object(ra.l)({channelId:a,threadTs:s}))});sa.meta={name:"comment",key:"actionsCommentComment",description:"Open a thread to reply to a message"},sa.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired};var ia=sa,oa=a("jLdI"),ca=Object(re.b)("Copy link to message",function(e,t){var{channelId:a,ts:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t(),s=Object(f.a)(r,a,n),i=s.thread_ts,o=Object(It.d)(r),c=o&&o.domain,l=Object(x.u)({teamDomain:c,channelId:a,ts:n,threadTs:i});e(Object(oa.a)({msg:s,payload:{subtype:"copy_link"}})),Object(F.c)(l)});ca.meta={name:"copyLink",key:"actionsCopyLinkCopyLink",description:"Copy link to message"},ca.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired};var la=ca,da=a("pWPO"),pa=a("+z37"),ua=Object(re.b)("Copy message text",function(e,t){var{channelId:a,ts:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t(),s=Object(f.a)(r,a,n);e(Object(oa.a)({msg:s,payload:{subtype:"copy_text"}}));var i=Object(da.a)(Object(pa.a)(r,{text:s.text,tsf_mode:"EDIT"}));Object(F.c)(i)});ua.meta={name:"copyText",key:"actionsCopyTextCopyText",description:"Copy message text"},ua.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired};var ha=ua,ma=Object(re.b)("Delete message",function(e,t){var{channelId:a,ts:n,rollup:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=s.a.createElement(V.a,{channelId:a,ts:n,rollup:r});Promise.resolve().then(()=>e(Object(Q.e)({element:i})))});ma.meta={name:"deleteMsg",key:"actionsDeleteMessageDeleteMsg",description:"Delete message"},ma.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired};var ba=ma,_a=Object(re.b)("Remove message broadcast",(e,t,a)=>{var n=s.a.createElement(K.a,a);Promise.resolve().then(()=>e(Object(Q.e)({element:n})))});_a.meta={name:"removeBroadcast",key:"actionsRemoveBroadcastRemoveBroadcast",description:"Remove message broadcast"},_a.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired};var ga=_a,fa=a("lE2N"),va=a("bo4X"),Oa=a("pmOY"),ya=a("FdTv"),Ca=a("JVYW"),ja=a("+J1t"),Ea=a("8W09"),ka=a("CGJF"),Sa=a("XLFM"),Ia=a("Aeia"),wa=a("G4ux"),Ta=a("0f2Y"),Na=a("plEq"),Pa=a("O0RF"),Aa=a("20gP"),Ma=a("hyG2"),xa=a("Dpjh"),Ra=a("mM05"),Da=a.n(Ra),Fa=a("brL+"),La=a("rZal"),Ua=a("NAkb"),Ba=a("2Y1Y"),Ha=a("mLe0"),Wa=a("a+Oh"),qa=a("eglI"),Ga=a("oxKW"),Ka=a("9kTo"),Va=a("Pe1S");function za(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ya(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?za(Object(a),!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):za(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Qa={channelId:void 0,teamId:void 0,legacyChannel:void 0,threadTs:void 0,text:"",initialContents:void 0,enabled:!0,useJumbomoji:!0,enableBroadcastKeywords:!0,onTextChange:n.a,ariaLabel:void 0,placeholder:null,focusOnMount:!1,onEnter:n.a,onEscape:n.a,featureSonicInputs:!1,clientToolBar:!1,featureWysiwygComposer:!1,featureWysiwygAnchorText:!1,maxLines:3};class reply_to_email_input_ReplyToEmailInput extends r.PureComponent{constructor(e){super(e),this.setTextyRef=this.setTextyRef.bind(this),this.onTextChange=this.onTextChange.bind(this),this.renderInput=this.renderInput.bind(this),this.onEnter=this.onEnter.bind(this),this.state={numCharsOverLimit:this.countCharsOverLimit()}}onEnter(e){return!(!e||!e.shiftKey)||this.props.onEnter()}onTextChange(){var e,t,{featureWysiwygComposer:a}=this.props,{numCharsOverLimit:n}=this.state;a?t=a?this.getTextContents():void 0:e=this.getText();var r=this.countCharsOverLimit(),s=r>0||n>0;s&&this.setState(()=>({numCharsOverLimit:r})),this.props.onTextChange({text:e,msgOps:t,overLimit:s})}getComputedModules(e){var{modules:t}=e,{teamId:a,clientToolBar:n,featureWysiwygComposer:r,featureWysiwygAnchorText:s}=this.props,i=n||r||Object(Ka.a)()?Ya({},Object(Va.a)({featureWysiwygComposer:r,featureWysiwygAnchorText:s}),{teamId:a}):null;return Ya({},t,{composer:i,slacklink:r&&{convertImages:!1,disableLinksWithLabels:!s},slackmarkdown:r&&{convertHeaders:!1,convertHorizontalRule:!1}})}getText(){var{text:e,featureSonicInputs:t,featureWysiwygComposer:a}=this.props;return a?null:this.texty?t?this.texty.value():Object(Ba.i)(this.texty.value(),{enableBroadcastKeywords:this.props.enableBroadcastKeywords}):e||""}getTextContents(){var{featureWysiwygComposer:e,initialContents:t}=this.props;if(!e)return null;if(!this.texty)return t&&t.contents;var a=this.texty.getContents();return a&&a.contents}setTextyRef(e){this.texty=e&&e.getWrappedInstance?e.getWrappedInstance():e}UNSAFE_componentWillReceiveProps(e){var{featureWysiwygComposer:t}=this.props;t||""===e.text&&this.texty.clear()}countCharsOverLimit(){var e,{featureSonicInputs:t,featureWysiwygComposer:a}=this.props;if(t&&a){var n=this.getTextContents();return e=Object(Ha.a)(new Da.a(n)),Math.max(0,e-Y.C)}return e=this.getText().length,Math.max(0,e-Y.B)}focus(){this.texty&&this.texty.focus()}renderInput(e){var{modules:t,isOpen:a,legacyTextyClassName:n}=e,{featureSonicInputs:r,featureWysiwygComposer:i,maxLines:o,text:c,initialContents:l}=this.props,d=this.getComputedModules({modules:t}),p=i?l:c;return s.a.createElement(qa.default,{id:"reply-to-email-input",className:"p-reply_to_email_input",ref:this.setTextyRef,channelId:this.props.channelId,modules:d,isAutocompleteOpen:a,legacyTextyClassName:n,ariaLabel:this.props.ariaLabel,initialText:p,placeholder:Object(xa.a)(this.props.placeholder),enableBroadcastKeywords:this.props.enableBroadcastKeywords,enableJumbomoji:this.props.useJumbomoji,onEnter:this.onEnter,onEscape:this.props.onEscape,onTextChange:this.onTextChange,isDisabled:!this.props.enabled,focusOnMount:this.props.focusOnMount,useLegacyCreate:!r,maxLines:o,minLines:3,maxLength:i?Y.C:Y.B})}renderLegacyAutocomplete(){var{legacyChannel:e,threadTs:t}=this.props,a={searchOptions:{model_ob:e,in_thread:!!t},tabcomplete:{positionMenu:e=>{e.style.width="".concat(this.texty.container.offsetWidth,"px"),Object(Ua.a)(e,this.texty.container)},completers:["channels","emoji","members"]}};return this.renderInput({modules:a})}renderModernAutocomplete(){var e={enabled:this.props.enabled};return s.a.createElement(Ga.a,Object(J.a)({completeOnMembers:!0,completeOnChannels:!0,completeOnEmoji:!0,channelId:this.props.channelId,renderInput:this.renderInput,shouldCompleteOnTab:!0,position:"bottom"},e))}render(){var{featureSonicInputs:e}=this.props;return e?this.renderModernAutocomplete():this.renderLegacyAutocomplete()}}reply_to_email_input_ReplyToEmailInput.defaultProps=Qa;var Xa=Object(o.b)(function(e,t){var{channelId:a}=t,n=Object(b.m)(e,"feature_sonic_inputs");return{legacyChannel:n?null:Object(g.e)(e,a),useJumbomoji:Object(La.a)(e),teamId:Object(Fa.b)(e),featureSonicInputs:n,clientToolBar:"composer_toolbar"===Object(St.c)(e,"composer_toolbar"),featureWysiwygComposer:Object(Wa.a)(e),featureWysiwygAnchorText:Object(b.m)(e,"feature_wysiwyg_anchor_text")}},null,null,{withRef:!0})(reply_to_email_input_ReplyToEmailInput),Ja=a("mZe+"),Za=a("oLrU");var $a=class reply_to_email_attachments_ReplyToEmailAttachments extends r.PureComponent{constructor(e){super(e),Object(c.a)(this,["onFilesSelected","renderPendingFiles"]),this.state={pendingFiles:[]}}onFilesSelected(e){this.setState(t=>({pendingFiles:[...t.pendingFiles,...e]}))}renderPendingFiles(){return this.state&&this.state.pendingFiles&&this.state.pendingFiles.length&&this.state.pendingFiles.length>0?s.a.createElement("ul",{className:"p-email_attachments"},this.state.pendingFiles.map(e=>s.a.createElement("li",{key:"email-attachment-".concat(Object(Za.a)())},e.name))):null}render(){return s.a.createElement("div",null,this.renderPendingFiles(),s.a.createElement(Ja.a,{files:[],isEagerUpload:!0,onFilesSelected:this.onFilesSelected}))}},en=Object(N.a)("Reply to an email",(e,t,a)=>{var{ts:n,fileId:r,channelId:s,reason:i,text:o,blocks:c,to:l,cc:d,bcc:p}=a;return e(Object(T.a)({method:"email.reply",reason:i,args:{message_ts:n,file_id:r,channel_id:s,text:o,blocks:c,to:l,cc:d,bcc:p}}))});en.meta={name:"emailReply",key:"componentsWIPEmailWorkflowEmailReplyApiEmailReply",description:"Reply to an email"},en.propTypes={channelId:i.default.string.isRequired,ts:i.default.string,fileId:i.default.string,reason:i.default.string.isRequired,text:i.default.string,blocks:i.default.string,to:i.default.array};var tn=en,an=a("YaVv"),nn=Object(re.b)("Sends a reply to an email",(e,t,a)=>{var{ts:n,channelId:r,fileId:s,text:i,blocks:o,to:c,cc:l,bcc:d}=a,p=Object(an.a)(t(),new Da.a(o&&o.contents)),u=p&&p.blocks,h=JSON.stringify(u);return e(tn({ts:n,channelId:r,fileId:s,text:i,blocks:h,to:c,cc:l,bcc:d,reason:"email_reply_api"})).then(()=>{Object($t.a)({getState:t}).info("Dispatched call to email.reply")}).catch(e=>{throw Object($t.a)({getState:t}).error("Error in replyToEmail thunk: ".concat(JSON.stringify(e))),e})});nn.meta={name:"replyToEmail",key:"componentsWIPEmailWorkflowReplyToEmailThunkReplyToEmail",description:"Sends a reply to an email"},nn.propTypes={};var rn=nn,sn=(a("PRpv"),new L.b("email_workflow")),on={closeModal:n.a,featureEmailWorkflow:!1,email:void 0,replyToEmailThunk:n.a,message:void 0};class reply_to_email_dialog_ReplyToEmailDialog extends r.PureComponent{constructor(e){super(e),this.emailResponseRef=null,this.emailSubjectRef=null,this.emailToRef=null,this.emailCCRef=null,this.emailBCCRef=null,this.sendEmailButtonRef=null,this.state={editMode:!1,showCC:!1,showBCC:!1,toRecipients:[],ccRecipients:[],bccRecipients:[]},Object(c.a)(this,["onGo","buildRecipientNameList","buildRecipientEmailList","setEmailResponseRef","setEmailSubjectRef","setEmailToRef","setEmailCCRef","setEmailBCCRef","renderEmailBody","toggleEditMode","toggleCCField","toggleBCCField","maybeTokenizeEmail","removeTokenizedEmail","createEmptyStateMessage","sanitizeTokenList"])}componentDidMount(){var e=this.buildRecipientEmailList();this.setState(()=>({toRecipients:e}))}componentWillUnmount(){this.emailResponseRef&&this.emailResponseRef.texty&&this.emailResponseRef.texty.instance&&this.emailResponseRef.texty.instance.unload()}onGo(){var{email:e,message:t}=this.props,a=t&&t.channel,n=t&&t.files&&t.files[0],r=t&&t.ts,s=this.emailResponseRef&&this.emailResponseRef.texty&&this.emailResponseRef.texty.value(),i=this.emailResponseRef&&this.emailResponseRef.texty&&this.emailResponseRef.texty.getContents(),o=Object(_t.a)(e&&e.from),c=o&&o.address,l=c?[c]:[],d=this.emailToRef&&this.emailToRef.state&&this.emailToRef.state.options?this.sanitizeTokenList(this.emailToRef.state.options):l,p=this.emailCCRef&&this.emailCCRef.state&&this.emailCCRef.state.options?this.sanitizeTokenList(this.emailCCRef.state.options):[],u=this.emailBCCRef&&this.emailBCCRef.state&&this.emailBCCRef.state.options?this.sanitizeTokenList(this.emailBCCRef.state.options):[];this.props.replyToEmailThunk({ts:r,channelId:a,fileId:n,text:s,blocks:i,to:d,cc:p,bcc:u}),this.props.closeModal()}setEmailResponseRef(e){this.emailResponseRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}setEmailSubjectRef(e){this.emailSubjectRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}setEmailToRef(e){this.emailToRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}setEmailCCRef(e){this.emailCCRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}setEmailBCCRef(e){this.emailBCCRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}sanitizeTokenList(e){var t=[];return e.forEach(e=>{t.push(e.value)}),t}maybeTokenizeEmail(e,t){var a,n,r;switch(t){case"to":a=this.emailToRef,n=this.state.toRecipients,r="toRecipients";break;case"cc":a=this.emailCCRef,n=this.state.ccRecipients,r="ccRecipients";break;case"bcc":a=this.emailBCCRef,n=this.state.bccRecipients,r="bccRecipients"}var s=a.state.filterQuery.trim().replace(",","");if((this.createEmptyStateMessage(s),e&&(188===e.keyCode||32===e.keyCode||13===e.keyCode))&&Object(Ma.b)(s).isValid){var i=Object(fa.a)([...n,{label:s,value:s}],"label");this.setState(()=>({[r]:i})),a.state.selectedOptions=i,a.state.filterQuery="",a.state.isExpanded=!1}}removeTokenizedEmail(e,t){var a;switch(t){case"to":a="toRecipients";break;case"cc":a="ccRecipients";break;case"bcc":a="bccRecipients"}this.setState(()=>({[a]:e}))}createEmptyStateMessage(e){return s.a.createElement("div",{className:"c-select_options_list__option",role:"option","aria-selected":!1,tabIndex:"-1"},s.a.createElement("span",{className:"c-select_options_list__option_label"},e))}buildRecipientNameList(){var{email:{from:e}}=this.props,t=[];return e.forEach(e=>{var{name:a}=e;a&&t.push(a)}),t.join(", ")}buildRecipientEmailList(){var{email:{from:e}}=this.props,t=[];return e.forEach(e=>{var{address:a}=e;a&&t.push({label:a,value:a})}),t}toggleEditMode(){this.setState(e=>({editMode:!e.editMode})),setTimeout(()=>this.emailSubjectRef.focus(),0)}toggleCCField(){this.setState(e=>({showCC:!e.showCC}))}toggleBCCField(){this.setState(e=>({showBCC:!e.showBCC}))}renderEmailBody(){var{message:e}=this.props,t=s.a.createElement(Ia.b,{msg:e,showActions:!1}),a=d()("c-message__files","c-message__files--file_email","c-message__files--pillow",{"c-message__files--empty_body":!e});return s.a.createElement("div",{className:a},t)}render(){var{featureEmailWorkflow:e,email:t}=this.props,a=e?sn.rt("<strong>Subject:</strong>"):s.a.createElement("strong",null,"Subject:"),i=e?sn.rt("<strong>To:</strong>"):s.a.createElement("strong",null,"To:");return e?s.a.createElement(va.a,{labelledby:"deletePost__title-bar",centered:!0,closeModal:this.props.closeModal,className:"p-email_reply_modal"},s.a.createElement(Oa.a,null,s.a.createElement(ya.a,{id:"deletePost__title-bar",title:"Reply to email","data-qa":"dialog_header"})),s.a.createElement(Ca.a,null,s.a.createElement(ja.a,{"data-qa":"dialog_body"},!this.state.editMode&&s.a.createElement("p",null,i," ",this.buildRecipientNameList(),s.a.createElement("br",null),a," ",t.subject,s.a.createElement("br",null),s.a.createElement(Ta.a,{onClick:this.toggleEditMode},e?sn.t("Edit"):"Edit")),this.state.editMode&&s.a.createElement(r.Fragment,null,s.a.createElement(Pa.a,{text:e?sn.t("To"):"To",htmlFor:"email-recipients",id:"emailRecipients",className:"p-email_to_label"},s.a.createElement("div",{className:"p-email_cc_bcc_links"},!this.state.showCC&&s.a.createElement(Ta.a,{onClick:this.toggleCCField},e?sn.t("Cc"):"Cc"),!this.state.showBCC&&s.a.createElement(Ta.a,{onClick:this.toggleBCCField},e?sn.t("Bcc"):"Bcc")),s.a.createElement(Aa.d,{className:"p-to_recipients_list_select",options:this.state.toRecipients,ariaLabel:"To Recipients",selectId:"to-recipients",selectedOptions:this.state.toRecipients,isRequired:!0,isExpanded:!1,isDisabled:!1,onOptionSelected:n.a,width:"100%",onKeyUp:e=>this.maybeTokenizeEmail(e,"to"),ref:this.setEmailToRef,onSelectedItemsChange:e=>this.removeTokenizedEmail(e,"to"),emptyStateMessage:this.createEmptyStateMessage})),this.state.showCC&&s.a.createElement(Pa.a,{text:e?sn.t("Cc"):"Cc",htmlFor:"cc-recipients",id:"ccRecipients"},s.a.createElement(Aa.d,{className:"p-email_cc_list_select",options:this.state.ccRecipients,ariaLabel:"Cc Recipients",selectId:"cc-recipients",selectedOptions:this.state.ccRecipients,isRequired:!0,isExpanded:!1,isDisabled:!1,onOptionSelected:n.a,width:"100%",onKeyUp:e=>this.maybeTokenizeEmail(e,"cc"),ref:this.setEmailCCRef,onSelectedItemsChange:e=>this.removeTokenizedEmail(e,"cc"),emptyStateMessage:this.createEmptyStateMessage})),this.state.showBCC&&s.a.createElement(Pa.a,{text:e?sn.t("Bcc"):"Bcc",htmlFor:"bcc-recipients",id:"bccRecipients"},s.a.createElement(Aa.d,{className:"p-email_bcc_list_select",options:this.state.bccRecipients,ariaLabel:"Bcc Recipients",selectId:"bcc-recipients",selectedOptions:this.state.bccRecipients,isRequired:!0,isExpanded:!1,isDisabled:!1,onOptionSelected:n.a,width:"100%",onKeyUp:e=>this.maybeTokenizeEmail(e,"bcc"),ref:this.setEmailBCCRef,onSelectedItemsChange:e=>this.removeTokenizedEmail(e,"bcc"),emptyStateMessage:this.createEmptyStateMessage})),s.a.createElement(Pa.a,{text:"Subject",htmlFor:"email-subject",id:"emailSubject"},s.a.createElement(Na.a,{ref:this.setEmailSubjectRef,ariaDescribedby:"emailSubject",name:"email-subject",id:"email-subject",value:t.subject,size:"medium"}))),s.a.createElement("p",null,e?sn.rt("<strong>Message</strong>"):s.a.createElement("strong",null,"Message")),s.a.createElement(Xa,{ariaLabel:"Email message",focusOnMount:!0,ref:this.setEmailResponseRef}),s.a.createElement("br",null),s.a.createElement($a,null),this.renderEmailBody())),s.a.createElement(Ea.a,{"data-qa":"dialog_footer"},s.a.createElement(ka.a,null,s.a.createElement(Sa.d,{type:"outline",onClick:this.props.closeModal,"data-qa":"dialog_cancel"},e?sn.t("Cancel"):"Cancel"),s.a.createElement(Sa.d,{onClick:this.onGo,"data-qa":"dialog_go",disabled:!this.state.toRecipients.length||this.emailToRef&&this.emailToRef.state&&this.emailToRef.state.selectedOptions&&!this.emailToRef.state.selectedOptions.length},e?sn.t("Send"):"Send")))):null}}reply_to_email_dialog_ReplyToEmailDialog.defaultProps=on;var cn=Object(o.b)(e=>{var t=Object(ot.a)(e),a=Object(wa.b)(e);return{featureEmailWorkflow:t,myEmailAddress:a&&a.profile&&a.profile.email}},e=>({closeModal:function(){return e(Object(Q.a)(...arguments))},replyToEmailThunk:function(){return e(rn(...arguments))}}))(reply_to_email_dialog_ReplyToEmailDialog),ln=Object(re.b)("Reply to email",function(e,t){var{channelId:a,ts:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t(),i=Object(f.a)(r,a,n),o=Object(it.b)(r,i);e(Object(Q.e)({element:s.a.createElement(cn,{message:i,email:o}),name:"reply-to-email-dialog"}))});ln.meta={name:"replyToEmail",key:"actionsReplyToEmailReplyToEmail",description:"Reply to email"},ln.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired};var dn=ln,pn=Object(re.b)("Share message in channel",function(e,t){var{channelId:a,ts:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(C.a)({ts:n,channelId:a}))});pn.meta={name:"shareMessage",key:"actionsShareMessageShareMessage",description:"Share message in channel"},pn.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired};var un=pn,hn=a("MYD1"),mn=Object(re.b)("Toggle message pinned status, with a confirmation dialog before un-pinning",function(e,t){var{ts:a,channelId:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t();if(Object(h.j)(r,{ts:a,channelId:n})){var i=Object(h.g)(r,{type:h.a.MESSAGE,channel:n,ts:a});e(Object(Q.e)({element:s.a.createElement(hn.a,{pin:i,channelId:n})}))}else e(Object(h.m)({ts:a,channelId:n}))});mn.meta={name:"togglePinWithUnpinConfirmation",key:"actionsTogglePinWithUnpinConfirmationTogglePinWithUnpinConfirmation",description:"Toggle message pinned status, with a confirmation dialog before un-pinning"},mn.propTypes={ts:i.default.string.isRequired,channelId:i.default.string.isRequired};var bn=(e,t,a,n)=>{var{ts:r,threadTs:s,channelId:i,rollup:o,messageContainerType:c}=a,l=Object($t.b)();if(t.appId)return n(Object(Vt.c)({actionId:t.id,appId:t.appId,messageTs:r,channelId:i}));switch(t.id){case Y.V.addReaction:return na(e,a,n);case Y.V.comment:return n(ia({ts:r,channelId:i}));case Y.V.copyLink:return n(la({ts:r,channelId:i}));case Y.V.copyText:return n(ha({ts:r,channelId:i}));case Y.V.deleteMessage:return n(ba({ts:r,channelId:i,rollup:o}));case Y.V.editMessage:return l.warn("Edit message is an unhandled case"),null;case Y.V.markUnread:return n(Object(zt.setUnreadPoint)({channelId:i,unreadTs:r}));case Y.V.pin:return Object(U.a)()?n(mn({ts:r,channelId:i})):n(Object(h.o)({ts:r,channelId:i}));case Y.V.remind:return l.warn("Remind is an unhandled case"),null;case Y.V.removeBroadcast:return n(ga({ts:r,channelId:i}));case Y.V.replyToEmail:return n(dn({ts:r,channelId:i}));case Y.V.shareMessage:return n(un({ts:r,channelId:i}));case Y.V.star:return n(Object(m.b)({ts:r,channelId:i}));case Y.V.subscribe:return n(Object(yt.h)({ts:s||r,channelId:i,messageContainerType:c}));case Y.V.viewStats:return n(Zt({messageTs:r,channelId:i}));default:return l.warn("Unknown action type ".concat(t.id)),null}},_n=a("HOkk"),gn=a("cD5Y"),fn=a("cTBa"),vn=a("Rrdp"),On=a("od5y"),yn=a("1zbP"),Cn=a("AE1P"),jn=a("V/As"),En=56,kn={className:"",pillarClassName:"",app:void 0};class app_actions_dialog_item_AppActionsDialogItem extends r.PureComponent{constructor(e){super(e),Object(c.a)(this,["renderEnter","renderIcon","renderIconMaybe"])}renderIcon(){var{action:e,app:t,defaultAppIcon:a}=this.props,n=t&&t.icons||e.iconSet;if(n){var r=En,i=Object(jn.b)({icons:n},r,a);return s.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:i})}return e.iconType?s.a.createElement(On.b,{type:e.iconType}):null}renderIconMaybe(e){return e?s.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},e):null}renderEnter(){var{className:e,pillarClassName:t}=this.props,a=d()(e,"c-menu_item__enter",{["".concat(t,"__enter")]:t});return s.a.createElement(On.a,{type:"enter",className:a,"data-qa":"menu_item_enter",role:"presentation"})}render(){var{action:e,app:t,className:a,pillarClassName:n}=this.props,r=d()(a,"c-menu_item__button","c-button-unstyled",{"c-menu_item__button--danger":e.danger,["".concat(n)]:n,["".concat(n,"--danger")]:e.danger&&n}),i=t&&t.name||e.description;return!i&&t&&(i=s.a.createElement(vn.a,{type:Object(yn.d)(t)?"unknown":"non-existent"})),s.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},s.a.createElement("div",{className:r,"data-qa":e["data-qa"],key:e.id,id:e.id},this.renderIconMaybe(this.renderIcon()),s.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},e.label||e.name,s.a.createElement("div",{className:"c-menu_item__description"},i)),this.renderEnter()))}}app_actions_dialog_item_AppActionsDialogItem.defaultProps=kn;var Sn=Object(o.b)((e,t)=>{var{action:a}=t;return{app:a&&a.appId&&Object(Cn.e)(e,a.appId),defaultAppIcon:Object(Cn.f)(e)}})(app_actions_dialog_item_AppActionsDialogItem),In=a("wSSu"),wn=a("Uk1S"),Tn=a("Bekf"),Nn=a("t3QL"),Pn=a("3fyd"),An=a("CaXY"),Mn=a("lek6"),xn=a("3dqR"),Rn=a("NvKv"),Dn=a("lV3N"),Fn=a("y7mK"),Ln=(a("pic6"),{theme:"light",hasAdHocSender:!1,userId:null,username:null,botId:null,attachments:[],blocks:void 0,blocksContainerContext:An.a.app_actions,text:void 0,message:void 0});class app_actions_pillow_AppActionsPillow extends r.PureComponent{constructor(e){super(e),this.state={gradient:!1},this.renderAttachment=this.renderAttachment.bind(this)}componentDidMount(){this.maybeSetGradient()}maybeSetGradient(){var e=Object(In.findDOMNode)(this);e&&e.scrollHeight>e.clientHeight&&this.setState(()=>({gradient:!0}))}renderContent(){var{text:e,blocksContainerContext:t,message:a}=this.props;return a&&a.blocks?s.a.createElement(Pn.a,{msg:a,blocksContainerContext:t}):s.a.createElement(Mn.a,{"data-qa":"app-actions-pillow-message-text",text:e})}renderAvatar(){var{userId:e,hasAdHocSender:t,botId:a}=this.props;return s.a.createElement(xn.c,{className:"p-app_actions_pillow__avatar",userId:e,isAdHocMember:t,botId:a,size:24,isInteractive:!1,showCard:!1,showTooltip:!1,tabIndex:"-1"})}renderTimestamp(){var{ts:e}=this.props;return s.a.createElement(Rn.b,{timestamp:e,relative:!1,full:!0})}renderAttachment(e,t){var{ts:a,channelId:n,blocksContainerContext:r}=this.props;return s.a.createElement(Dn.a,Object(J.a)({key:t},Object(Nn.b)(e),{messageTs:a,activeChannelId:n,showDelete:!1,blocksContainerContext:r}))}renderAttachments(){var{attachments:e}=this.props;return e&&e.length?s.a.createElement("div",{className:"p-app_actions_pillow__attachments"},e.map(this.renderAttachment)):null}renderGutter(){return"light"===this.props.theme?s.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderAvatar()):s.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderTimestamp())}renderContentHeader(){var{userId:e,botId:t,username:a,theme:n,channel:r}=this.props;return s.a.createElement("div",{className:"p-app_actions_pillow__content_header"},s.a.createElement(Fn.a,{userId:e,botId:t,username:a,channelName:Object(De.v)(r),isInteractive:!1}),"light"===n&&this.renderTimestamp())}render(){var{theme:e}=this.props,t=d()("p-app_actions_pillow","p-app_actions_pillow--".concat(e),{"p-app_actions_pillow--gradient":this.state.gradient});return s.a.createElement("div",{className:t,role:"presentation","data-qa":"app_action_pillow"},this.renderGutter(),s.a.createElement("div",{className:"p-app_actions_pillow__content"},this.renderContentHeader(),s.a.createElement("div",{className:"p-app_actions_pillow__body",id:"p-app_actions_pillow__body"},this.renderContent(),this.renderAttachments(),s.a.createElement("span",{className:"p-app_actions_pillow__blocker"}))))}}app_actions_pillow_AppActionsPillow.defaultProps=Ln;var Un=Object(o.b)((e,t)=>{var{ts:a,channelId:n}=t,r=Object(f.a)(e,n,a),s=Object(g.e)(e,n),i=Object(x.H)(r),{botId:o,username:c}=Object(x.R)(e,r);return{channel:s,userId:i,username:c,botId:o,theme:Object(wn.a)(e),hasAdHocSender:Object(Tn.a)(r),text:r.text,attachments:r.attachments,message:r}})(app_actions_pillow_AppActionsPillow),Bn=(a("qiqk"),new L.b("app_actions")),Hn=64,Wn="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click",qn={onClose:n.a,onSelectAction:n.a};class app_actions_dialog_AppActionsDialog extends r.PureComponent{constructor(e){super(e),this.state={filterQuery:"",isLoading:!0,isError:!1,actions:[]},this.initClogged=!1,Object(c.a)(this,["onFilterUpdate","onFooterLinkClick","onSelectAction","renderSingleAction","handleSelectEvent","searchActions"]),this.searchActionsDebounced=Object(ie.a)(this.searchActions,200,{leading:!0})}componentDidMount(){this.searchActionsDebounced()}componentDidUpdate(){if(!this.initClogged&&!this.state.isLoading&&!this.state.isError){var{clogger:e}=this.props;e.track(p.EventId.MSG_ACTION,{contexts:{ui_context:{action:p.UiAction.IMPRESSION,step:p.UiStep.MESSAGE_ACTION_DIALOG,ui_element:p.UiElement.MESSAGE_ACTION_DIALOG}},app_actions_showing:this.state.actions.length}),this.initClogged=!0}}componentWillUnmount(){this.activePromise&&delete this.activePromise}onFooterLinkClick(){var{clogger:e}=this.props;e.track(p.EventId.MSG_ACTION,{contexts:{ui_context:{action:p.UiAction.CLICK,step:p.UiStep.MESSAGE_ACTION_DIALOG,ui_element:p.UiElement.GET_MORE_APP_ACTIONS}},app_actions_showing:this.state.actions.length})}onSelectAction(e,t){var{ts:a,channelId:n,closeModal:r,handleMessageAction:s,onSelectAction:i,clogger:o}=this.props;r(),this.props.onClose&&this.props.onClose(e),i(e,t,{ts:a,channelId:n})||s(e,t,{ts:a,channelId:n}),this.props.recordMessageActionFrecencyEvent({action:t,query:this.state.filterQuery});var c={ui_context:{action:p.UiAction.CLICK,step:p.UiStep.MESSAGE_ACTION_DIALOG,ui_element:t.uiElement}};t.appId?o.track(p.EventId.MSG_ACTION,{contexts:c,app_id:t.appId,action_id:t.id}):o.track(p.EventId.MSG_ACTION,{contexts:c})}onFilterUpdate(e){this.setState(()=>({filterQuery:e}),this.searchActionsDebounced)}searchActions(){var e=this.props.searchMessageActions({channelId:this.props.channelId,ts:this.props.ts,query:this.state.filterQuery}).then(t=>{this.activePromise===e&&this.setState(()=>({actions:t,isError:!1,isLoading:!1}))}).catch(()=>{this.setState(()=>({isError:!0,isLoading:!1}))});this.activePromise=e}handleSelectEvent(e,t,a){this.onSelectAction(a,t.props.action)}renderTitle(e){return s.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":!0},s.a.createElement("div",{className:"p-app_actions_dialog__title_text"},e))}renderMessagePreview(){var{channelId:e,ts:t}=this.props;return s.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":!0},s.a.createElement(Un,{channelId:e,ts:t}))}renderLoading(){return s.a.createElement("div",{className:"p-app_actions_dialog__loader"},s.a.createElement(gn.a,null))}renderSingleAction(e){return{label:s.a.createElement(Sn,{key:e.id,pillarClassName:"p-app_actions_dialog_option",action:e}),value:e.id}}renderSelect(){var e=Bn.t("Search message actions\u2026");return s.a.createElement(fn.b,{"data-qa":"app-actions-dialog-list",isAlwaysOpen:!0,usePlaceholderOption:!1,autoSelectFirstOption:!0,focusInputOnMount:!0,placeholder:e,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(se.a)(this.state.actions,this.renderSingleAction),optionsRowHeight:Hn,useFullWidthOptions:!0})}render(){var{isLoading:e}=this.state,t=Bn.t("Get more message actions"),a=Bn.t("Use an action");return s.a.createElement(_n.a,{contentLabel:a,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:Wn,onFooterLinkClick:this.onFooterLinkClick,footerText:t,goOnEnterPressed:!1,onCancel:this.props.onClose,showCancelButton:!1,showGoButton:!1,title:this.renderTitle(a),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:!1},this.renderMessagePreview(),e?this.renderLoading():this.renderSelect())}}app_actions_dialog_AppActionsDialog.defaultProps=qn;var Gn=Object(o.b)(function(e){return{clogger:Object(u.a)({state:e})}},e=>({closeModal:()=>e(Object(Q.a)()),handleMessageAction:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return bn(...a,e)},searchMessageActions:function(){return e(Kt(...arguments))},recordMessageActionFrecencyEvent:t=>e(Object(oe.a)(t))}))(app_actions_dialog_AppActionsDialog),Kn=a("CpTu"),Vn=a("umiW");function zn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Yn=Dt.c,Qn=new L.b("app_actions"),Xn=64,Jn="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click",Zn={appActions:[],onClose:n.a,onSelectAction:n.a};class deprecated_app_actions_dialog_AppActionsDialog extends r.Component{constructor(e){super(e),this.state={normalizedFilterQuery:""},Object(c.a)(this,["onFilterUpdate","onFooterLinkClick","onSelectAction","filterAction","formatSlackAction","renderSingleAction","handleSelectEvent"])}componentDidMount(){var{clogger:e}=this.props;e.track(p.EventId.MSG_ACTION,{contexts:{ui_context:{action:p.UiAction.IMPRESSION,step:p.UiStep.MESSAGE_ACTION_DIALOG,ui_element:p.UiElement.MESSAGE_ACTION_DIALOG}},app_actions_showing:this.props.appActions.length}),this.props.onLoad()}shouldComponentUpdate(){var{channelId:e,ts:t,isLoading:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{normalizedFilterQuery:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.state.normalizedFilterQuery!==n||(!(!this.props.isLoading||a)||(this.props.channelId!==e||this.props.ts!==t))}onFooterLinkClick(){var{clogger:e}=this.props;e.track(p.EventId.MSG_ACTION,{contexts:{ui_context:{action:p.UiAction.CLICK,step:p.UiStep.MESSAGE_ACTION_DIALOG,ui_element:p.UiElement.GET_MORE_APP_ACTIONS}},app_actions_showing:this.props.appActions.length})}onSelectAction(e,t){var{ts:a,channelId:n,closeModal:r,handleMessageAction:s,onSelectAction:i,clogger:o}=this.props;r(),this.props.onClose&&this.props.onClose(e),i(e,t,{ts:a,channelId:n})||s(e,t,{ts:a,channelId:n}),Object(de.b)(t,this.state.normalizedFilterQuery);var c={ui_context:{action:p.UiAction.CLICK,step:p.UiStep.MESSAGE_ACTION_DIALOG,ui_element:t.uiElement}};t.appId?o.track(p.EventId.MSG_ACTION,{contexts:c,app_id:t.appId,action_id:t.id}):o.track(p.EventId.MSG_ACTION,{contexts:c})}onFilterUpdate(e){var t=Object(Ft.a)(e);this.setState(()=>({normalizedFilterQuery:t}))}getActions(){var e=[...Object(se.a)(this.props.slackActions,this.formatSlackAction),...Object(se.a)(this.props.appActions,Rt.a)];return e=Object(te.a)(e,this.filterAction),e=Object(de.c)(e,this.state.normalizedFilterQuery)}handleSelectEvent(e,t,a){this.onSelectAction(a,t.props.action)}filterAction(e){return Object(Rt.b)(e,this.state.normalizedFilterQuery)}formatSlackAction(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(a),!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zn(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{danger:!1,description:Qn.t("Slack")})}renderTitle(e){return s.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":!0},s.a.createElement("div",{className:"p-app_actions_dialog__title_text"},e))}renderMessagePreview(){var{channelId:e,ts:t}=this.props;return s.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":!0},s.a.createElement(Un,{channelId:e,ts:t}))}renderLoading(){return s.a.createElement("div",{className:"p-app_actions_dialog__loader"},s.a.createElement(gn.a,null))}renderSingleAction(e){return{label:s.a.createElement(Sn,{key:e.id,pillarClassName:"p-app_actions_dialog_option",action:e}),value:e.id}}renderSelect(){var e=Qn.t("Search message actions\u2026");return s.a.createElement(fn.b,{"data-qa":"app-actions-dialog-list",isAlwaysOpen:!0,usePlaceholderOption:!1,autoSelectFirstOption:!0,focusInputOnMount:!0,placeholder:e,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(se.a)(this.getActions(),this.renderSingleAction),optionsRowHeight:Xn})}render(){var{isLoading:e}=this.props,t=Qn.t("Get more message actions"),a=Qn.t("Use an action");return s.a.createElement(_n.a,{contentLabel:a,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:Jn,onFooterLinkClick:this.onFooterLinkClick,footerText:t,goOnEnterPressed:!1,onCancel:this.props.onClose,showCancelButton:!1,showGoButton:!1,title:this.renderTitle(a),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:!1},this.renderMessagePreview(),e?this.renderLoading():this.renderSelect())}}deprecated_app_actions_dialog_AppActionsDialog.defaultProps=Zn;var $n=Object(o.b)(function(e,t){var{loading:a,actions:n}=Yn(e),r=Object(te.a)([me(e,t),fe(e,t),Ce(e,t),Se(e,t),Ne(e,t),Re(e,t),We(e,t),st(e,t),bt(e,t),Ot(e,t),kt(e,t)]);return{slackActions:r,appActions:n,isLoading:!(!a&&!Object(Kn.a)(r,"isLoading")),clogger:Object(u.a)({state:e})}},e=>({closeModal:()=>e(Object(Q.a)()),onLoad:()=>e(Object(Vn.b)()),handleMessageAction:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return bn(...a,e)}}))(deprecated_app_actions_dialog_AppActionsDialog),er=Object(o.b)(e=>({featureAppActionsFeRefactor:Object(b.m)(e,"feature_app_actions_fe_refactor")}))(e=>{var{featureAppActionsFeRefactor:t}=e,a=Object(Z.a)(e,["featureAppActionsFeRefactor"]);return t?s.a.createElement(Gn,a):s.a.createElement($n,a)}),tr=Object(re.b)("Open app actions dialog",(e,t,a)=>{var n=s.a.createElement(er,a);e(Object(Q.e)({element:n}))});tr.meta={name:"browseAppActions",key:"actionsBrowseAppActionsBrowseAppActions",description:"Open app actions dialog"},tr.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired,onSelectAction:i.default.func.isRequired};var ar=tr,nr=new L.b("message"),rr="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-more_message_actions_button-more_actions_menu-click";var sr=Object(ae.b)(Object(o.b)(e=>{var{actions:t,loading:a}=Object(Dt.c)(e),n=t.length;return{hasActions:a||!!n,hasOverflow:a||n>3,clogger:Object(u.a)({state:e}),featureOfflineMode:Object(b.m)(e,"feature_offline_mode"),isOffline:!Object(y.c)(e)}},e=>({browseAppActions:function(){return e(ar(...arguments))}}))(class browse_app_actions_menu_item_BrowseAppActions extends r.Component{constructor(e){super(e),this.onSelected=this.onSelected.bind(this),this.state={hasActions:e.hasActions}}onSelected(e){var{ts:t,channelId:a,onSelectAction:n,clogger:r}=this.props;this.props.hasOverflow?this.props.browseAppActions({ts:t,channelId:a,onSelectAction:n}):e&&"click"!==e.type&&window.open(rr,"_blank"),r.track(p.EventId.MSG_ACTION,{contexts:{ui_context:{action:p.UiAction.CLICK,step:p.UiStep.MORE_ACTIONS_MENU,ui_element:p.UiElement.MORE_MESSAGE_ACTIONS_BUTTON}}})}render(){var e=this.props,{ts:t,channelId:a,onSelectAction:n,hasActions:r,browseAppActions:i,featureOfflineMode:o,isOffline:c}=e,l=Object(Z.a)(e,["ts","channelId","onSelectAction","hasActions","browseAppActions","featureOfflineMode","isOffline"]),d=this.state.hasActions?nr.t("More message actions\u2026"):nr.t("Add a message action\u2026");return s.a.createElement(ne.a,Object(J.a)({},l,{label:d,"data-qa":this.props.hasOverflow?"app_message_actions_dialog":"app_directory_link",onSelected:this.onSelected,href:this.props.hasOverflow?void 0:rr,disabled:o&&c,showOfflineIcon:o&&c}))}})),ir=a("rz65"),or=new L.b("message"),cr={ts:i.default.string.isRequired,channelId:i.default.string.isRequired},lr=Object(le.b)(function(e){var{ts:t,channelId:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(f.a)(e,a,t);return n&&Object(x.i)(e,{message:n})?{id:Y.V.copyText,name:or.t("Copy text"),iconType:"link","data-qa":"copy_text",frecencyId:Object(de.f)("copy_text"),uiElement:p.UiElement.COPY_LINK_BUTTON}:null});lr.meta={name:"copyText",key:"componentsMessageActionSelectorsCopyTextCopyText"},lr.propTypes=cr;var dr=lr,pr=a("Fdc0"),ur=56,hr=40,mr={type:ir.a.default,app:void 0,shortcut:void 0};class message_action_menu_item_MessageActionMenuItem extends r.PureComponent{constructor(e){super(e),this.onSelected=this.onSelected.bind(this)}componentDidMount(){var{clogger:e,action:t}=this.props;if(t.appId){var a={ui_context:{action:p.UiAction.IMPRESSION,step:p.UiStep.MORE_ACTIONS_MENU,ui_element:t.uiElement}};e.track(p.EventId.MSG_ACTION,{app_id:t.appId,action_id:t.id,contexts:a})}}onSelected(e){var{action:t,onSelected:a}=this.props;a(e,t)}renderIcon(){var{action:e,app:t,type:a,defaultAppIcon:n}=this.props,r=t&&t.icons||e.iconSet;if(r){var i=a===ir.a.compactItem?hr:ur,o=Object(jn.b)({icons:r},i,n);return s.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:o})}return e.iconType?s.a.createElement(On.b,{type:e.iconType}):null}render(){var e=this.props,{action:t,app:a,onSelected:n,type:r,shortcut:i}=e,o=Object(Z.a)(e,["action","app","onSelected","type","shortcut"]),c=a&&a.name||t.description;return!c&&a&&(c=s.a.createElement(vn.a,{type:Object(yn.d)(a)?"unknown":"non-existent"})),s.a.createElement(ne.a,Object(J.a)({type:r,label:t.label||t.name,description:c,icon:this.renderIcon(),danger:t.danger,onSelected:this.onSelected,"data-qa":t["data-qa"],shortcut:i},o))}}message_action_menu_item_MessageActionMenuItem.defaultProps=mr;var br=Object(o.b)((e,t)=>{var{action:a}=t;return{app:a&&a.appId&&Object(Cn.e)(e,a.appId),defaultAppIcon:Object(Cn.f)(e),clogger:Object(u.a)({state:e})}})(message_action_menu_item_MessageActionMenuItem),_r=Object(ae.b)(br);a("FeTz");function gr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function fr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(a),!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gr(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var vr=3,Or={messageContainerType:Y.I.MESSAGE_PANE,onSelectAction:n.a,onMenuItemSelected:n.a,onLoad:n.a,canRunAppAction:!1,appActions:[],rollup:void 0,threadTs:void 0};class message_actions_menu_MessageActionsMenu extends r.PureComponent{constructor(e){super(e),this.state={appActions:e.appActions},Object(c.a)(this,["onSelectAction","renderSingleAppAction","renderSingleSlackAction"])}componentDidMount(){this.props.onLoad();var{clogger:e}=this.props;e.track(p.EventId.MSG_ACTION,{contexts:{ui_context:{action:p.UiAction.IMPRESSION,step:p.UiStep.MORE_ACTIONS_MENU,ui_element:p.UiElement.MORE_ACTIONS_MENU}},app_actions_showing:Math.min(this.state.appActions.length,vr)})}onSelectAction(e,t){var{ts:a,threadTs:n,channelId:r,handleMessageAction:s,onSelectAction:i,rollup:o,clogger:c,messageContainerType:l}=this.props;i(e,t,{ts:a,channelId:r})||s(e,t,{ts:a,threadTs:n,channelId:r,rollup:o,messageContainerType:l}),this.props.recordMessageActionFrecencyEvent({action:t});var d={ui_context:{action:p.UiAction.CLICK,step:p.UiStep.MORE_ACTIONS_MENU,ui_element:t.uiElement}};t.appId?c.track(p.EventId.MSG_ACTION,{contexts:d,app_id:t.appId,action_id:t.id}):c.track(p.EventId.MSG_ACTION,{contexts:d})}renderAppActions(){var{onSelectAction:e,ts:t,channelId:a}=this.props,{appActions:n}=this.state;return[...n.slice(0,vr).map(this.renderSingleAppAction),s.a.createElement(sr,{key:"browse_app_actions",ts:t,channelId:a,onSelectAction:e})]}renderSingleAppAction(e){var{featureOfflineMode:t,isOffline:a}=this.props,n=Object(Rt.a)(e);return s.a.createElement(_r,{key:n.id,type:ir.a.compactItem,action:n,onSelected:this.onSelectAction,disabled:t&&a,showOfflineIcon:t&&a})}renderSlackActions(){return this.props.slackActions.map(this.renderSingleSlackAction)}renderSingleSlackAction(e,t){if(!e)return null;if(s.a.isValidElement(e))return s.a.cloneElement(e,{key:t});var a=Object($.a)(e,["iconType","iconSet"]);return s.a.createElement(_r,{key:a.id,className:"p-message_actions_menu__".concat(a.id),action:a,onSelected:this.onSelectAction,disabled:a.disabled,showOfflineIcon:a.showOfflineIcon,shortcut:e.shortcut?e.shortcut:void 0})}render(){var e=this.props,{ts:t,channelId:a,messageContainerType:n,onLoad:r,onMenuItemSelected:i,onSelectAction:o,canRunAppAction:c,appActions:l,slackActions:d,handleMessageAction:p}=e,u=Object(Z.a)(e,["ts","channelId","messageContainerType","onLoad","onMenuItemSelected","onSelectAction","canRunAppAction","appActions","slackActions","handleMessageAction"]);return s.a.createElement(X.f,Object(J.a)({menuClassNames:"p-message_actions_menu",onMenuItemSelected:i,stripTerminalSeparators:!0},u),this.renderSlackActions(),s.a.createElement(X.d,null),c&&this.renderAppActions())}}message_actions_menu_MessageActionsMenu.defaultProps=Or;var yr=Object(o.b)((e,t)=>{var{channelId:a,ts:n}=t,r=t.messageContainerType||Y.I.MESSAGE_PANE,i=Object(f.a)(e,a,n),o=Object(x.s)(i),c=Object(pr.n)(e),{actions:l}=Object(Dt.c)(e),d=Object(b.m)(e,"feature_offline_mode"),p=!Object(y.c)(e),h=c&&o,m=d?fr({},t,{disabled:p,showOfflineIcon:p}):t;return{slackActions:Object(te.a)([kt(e,m),s.a.createElement(X.d,null),Object(ee.a)([Y.I.THREADS_FLEXPANE,Y.I.THREADS_VIEW,Y.I.SLI_BRIEFING],r)&&bt(e,t),Ce(e,t),dr(e,t),Object(ee.a)([Y.I.MESSAGE_PANE,Y.I.UNREAD_VIEW],r)&&Re(e,fr({},t,{allUnreads:r===Y.I.UNREAD_VIEW})),tt(e,m),pt(e,m),We(e,m),xt(e,m),Ne(e,m),st(e,m),Se(e,m)]),appActions:l,canRunAppAction:h,clogger:Object(u.a)({state:e}),featureOfflineMode:d,isOffline:p}},e=>({onLoad:()=>e(Object(Vn.b)()),handleMessageAction:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return bn(...a,e)},recordMessageActionFrecencyEvent:t=>e(Object(oe.a)(t))}))(message_actions_menu_MessageActionsMenu),Cr=a("RMmo"),jr=a("X28p"),Er=a("UceB"),kr=new L.b("message"),Sr={reactionKey:null,fileId:null,fileIds:null,comment:null,replies:[],replyCount:0,ts:null,rollup:void 0,threadTs:null,channel:null,file:null,subtype:null,channelId:null,theme:"light",isStarred:!1,isPinned:!1,isEphemeral:!1,isFileAuthorExternal:!1,isReply:!1,canUserReplyToMessage:!1,messageContainerType:Y.I.MESSAGE_PANE,editHandler:n.a,unreadHandler:n.a,onMenuOpen:n.a,onMenuClose:n.a,onEmojiPickerOpen:n.a,onEmojiPickerClose:n.a,showComment:!0,showShare:!0,showReact:!0,showJump:!1,showStar:!0,showMoreActions:!0,canEditMessage:!1,canPin:!1,canMarkUnread:!1,canAddReminder:!1,canDeleteMessage:!1,changeReactionFromUserAction:n.a,pinMessage:n.a,unpinMessage:n.a,updateStar:n.a,renderMenuBelowTrigger:!0,openModal:n.a,showThreadOrRefresh:n.a,addReminderForMessage:n.a,openShareDialog:n.a,jumpToMessage:n.a,featureOfflineMode:!1,wasRecentlyOnline:!1,featureSonicEmoji:!1,clogLinkClick:n.a,clogThreadEvent:n.a,featureContextualMessageShortcuts:!1,parentId:void 0,featureAppViewsReminders:!1,featureMessageActionsRefresh:!1,setViewContextToRestoreFocus:n.a,completedMessageAction:n.a,isIAP1Enabled:!1},Ir={x:0,y:-8},wr={x:4,y:-16},Tr={x:50,y:0},Nr={EDIT:["e"],REACT:["r"],COMMENT:["t"],PIN:["p"],SHARE:["s"],STAR:["a"],MARK_UNREAD:["u"],REMIND:["m"],DELETE:["Delete","del"]};class message_actions_MessageActions extends r.PureComponent{constructor(e){super(e),this.state={moreActionsMenuOpen:!1,subscribed:"loading",shouldReturnFocusAfterEmojiPickerClose:!0},Object(c.a)(this,["onAddReaction","onEmojiSelected","onEmojiPickerClose","onComment","onCopyLink","onDelete","onEdit","onMarkUnread","onMenuSelectAction","onMoreActionsMenuClose","onMoreActionsMenuOpen","onPin","onRemind","onRemoveBroadcast","onShare","onStar","onJump","onSubscribe","renderMoreActionsMenu","onMenuKeyDown","restoreFocusInTheFuture","restoreFocusImmediately","onEscapeKey"]),this.reactionBtnRef=s.a.createRef()}componentDidMount(){var{featureContextualMessageShortcuts:e}=this.props;e&&this.bindContextualShortcuts()}componentWillUnmount(){var{featureContextualMessageShortcuts:e}=this.props;e&&this.unbindContextualShortcuts()}onEscapeKey(e){e.stopPropagation();var{messageContainerType:t,channelId:a,ts:n}=this.props;this.dispatchActionMessageCompleted({viewContext:t,channelId:a,ts:n,focusOnInput:!0})}onStar(e){if(this.canStarMessage()){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation(),this.restoreFocusImmediately()}var{channelId:t,ts:a,fileId:n,fileIds:r,comment:s,subtype:i,isStarred:o}=this.props,c={channel:t,timestamp:a};if(n&&(c={file:n}),s&&"file_comment"===i)c={file_comment:s,file_comment_file:r&&r[0]||n};this.props.updateStar(!o,c);var l=o?p.UiElement.UNSTAR_MESSAGE_BUTTON:p.UiElement.STAR_MESSAGE_BUTTON;this.trackAction(l),a&&Object(U.a)()&&this.clogMsgStarClick()}}onAddReaction(e){this.props.reactionKey&&(Object(B.a)({e:e,rxn_key:this.props.reactionKey}),this.trackAction(p.UiElement.ADD_REACTION_BUTTON))}onEmojiSelected(e,t){var{reactionKey:a}=this.props;this.props.changeReactionFromUserAction({key:a,name:t})}onEmojiPickerClose(e){this.state.shouldReturnFocusAfterEmojiPickerClose||this.setState(()=>({shouldReturnFocusAfterEmojiPickerClose:!0})),this.props.featureContextualMessageShortcuts&&this.dispatchActionMessageCompleted(),this.props.onEmojiPickerClose(e)}onComment(e){if(this.canCommentOnMessage()){var t=!1;if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation(),t=!0,this.trackShortcut(Nr.COMMENT[0])}var a=this.props.threadTs||this.props.ts;this.props.showThreadOrRefresh({channelId:this.props.channel.id,threadTs:a,requestFocus:t});var n=this.state.subscribed?p.UiElement.REPLY_TO_THREAD_BUTTON:p.UiElement.START_A_THREAD_BUTTON;this.trackAction(n)}}onShare(e){if(this.canShareMessage()){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation(),this.restoreFocusInTheFuture(),this.trackShortcut(Nr.SHARE[0])}var{ts:t,channelId:a,fileId:n,messageContainerType:r}=this.props;this.props.fileId&&"file_comment"!==this.props.subtype?this.props.openShareDialog({fileId:n,initialChannelId:a,viewContext:r}):this.props.openShareDialog({ts:t,channelId:a,viewContext:r}),this.trackAction(p.UiElement.SHARE_MESSAGE_BUTTON)}}onEdit(e){if(this.props.canEditMessage){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type&&"Enter"!==e.key){if(e.target!==e.currentTarget)return;e.stopPropagation(),this.restoreFocusInTheFuture(),this.trackShortcut(Nr.EDIT[0])}this.props.onMenuClose(),this.props.editHandler(),e.stopPropagation(),this.trackAction(p.UiElement.EDIT_MESSAGE_BUTTON,!0)}}onDelete(e){if(this.props.canDeleteMessage){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation(),this.restoreFocusInTheFuture(),this.trackShortcut(Nr.DELETE[0])}var{channelId:t,ts:a,messageContainerType:n}=this.props;this.props.openModal({element:s.a.createElement(V.a,{channelId:t,ts:a,viewContext:n})}),this.trackAction(p.UiElement.DELETE_MESSAGE_BUTTON,!0)}}onMarkUnread(e){if(this.props.canMarkUnread){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation(),this.trackShortcut(Nr.MARK_UNREAD[0])}this.props.unreadHandler({channelId:this.props.channel.id,unreadTs:this.props.ts}),this.trackAction(p.UiElement.MARK_UNREAD_BUTTON,!0)}}onRemind(e){var{channel:t,ts:a,subtype:n,messageContainerType:r,featureContextualMessageShortcuts:s}=this.props;return this.trackAction(p.UiElement.REMIND_ME_BUTTON,!0),()=>{this.props.addReminderForMessage({time:e,message_channel:t.id,message_ts:a,respond_in_channel:"thread_broadcast"===n,viewContext:r,featureContextualMessageShortcuts:s})}}onSubscribe(){var{replies:e,ts:t,channel:a}=this.props,{subscribed:n}=this.state,r=e.length&&e[e.length-1].ts;W(a.id,t,!n,r);var s=n?p.UiElement.UNFOLLOW_MESSAGE_BUTTON:p.UiElement.FOLLOW_MESSAGE_BUTTON;this.trackAction(s,!0)}onPin(e){if(this.props.canPin){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation(),this.trackShortcut(Nr.PIN[0])}var{ts:t,channel:a,isPinned:n,pinMessage:r,unpinMessage:s}=this.props;n?(s({ts:t,channelId:a.id}),this.trackAction(p.UiElement.UNPIN_FROM_THIS_CONVERSATION_BUTTON,!0)):(r({ts:t,channelId:a.id}),this.trackAction(p.UiElement.PIN_TO_THIS_CONVERSATION_BUTTON,!0))}}onCopyLink(){var{channel:e,ts:t,threadTs:a,file:n,subtype:r}=this.props,s=Object(q.a)(e.id,t,a);n&&"file_comment"!==r&&(s=n.permalink),Object(F.c)(s),this.trackAction(p.UiElement.COPY_LINK_BUTTON,!0)}onJump(){var{channel:e,ts:t,isReply:a,clogLinkClick:n}=this.props,r=this.props.threadTs||this.props.ts;this.props.jumpToMessage({channelId:e&&e.id,ts:t,threadTs:a&&r}),this.props.messageContainerType===Y.I.THREADS_VIEW&&n("OPEN_IN_CHANNEL")}onRemoveBroadcast(){var{channelId:e,ts:t}=this.props;this.props.openModal({element:s.a.createElement(K.a,{channelId:e,ts:t})}),this.trackAction(p.UiElement.REMOVE_FROM_CONVERSATION_BUTTON,!0)}onMoreActionsMenuOpen(){this.setState(()=>({moreActionsMenuOpen:!0})),this.props.onMenuOpen(),this.trackAction(p.UiElement.MORE_ACTIONS_BUTTON)}onMoreActionsMenuClose(){this.setState(()=>({moreActionsMenuOpen:!1})),this.props.onMenuClose()}onMenuSelectAction(e,t){return t.id===Y.V.editMessage&&(this.onEdit(e),!0)}onMenuKeyDown(e){var{isCurrentItemSubmenu:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.props.featureContextualMessageShortcuts)switch(e.key){case Nr.EDIT[0]:this.onEdit(e);break;case Nr.PIN[0]:this.onPin(e);break;case Nr.MARK_UNREAD[0]:this.onMarkUnread(e);break;case Nr.SHARE[0]:this.onShare(e);break;case Nr.DELETE[0]:case Nr.DELETE[1]:this.onDelete(e);break;case Nr.REMIND[0]:if(!t||!this.props.featureAppViewsReminders)return;this.restoreFocusInTheFuture(),this.trackShortcut(Nr.REMIND[0]),this.onRemind("Custom")()}}getContextualShortcutCommands(){var e=[];return e.push({keys:Nr.EDIT,handler:this.onEdit,action:"keydown"}),e.push({keys:Nr.REACT,handler:e=>{e.target===e.currentTarget&&(e.stopPropagation(),e.preventDefault(),this.reactionBtnRef&&this.reactionBtnRef.current&&(this.setState(()=>({shouldReturnFocusAfterEmojiPickerClose:!1})),this.restoreFocusInTheFuture(),this.reactionBtnRef.current.click(),this.trackShortcut(Nr.REACT[0])))},action:"keydown"}),e.push({keys:Nr.COMMENT,handler:this.onComment,action:"keydown"}),e.push({keys:Nr.PIN,handler:this.onPin,action:"keydown"}),e.push({keys:Nr.SHARE,handler:this.onShare,action:"keydown"}),e.push({keys:Nr.STAR,handler:this.onStar,action:"keydown"}),e.push({keys:Nr.MARK_UNREAD,handler:this.onMarkUnread,action:"keydown"}),e.push({keys:Nr.REMIND,handler:e=>{e.target===e.currentTarget&&this.props.canAddReminder&&this.props.featureAppViewsReminders&&(e.stopPropagation(),this.restoreFocusInTheFuture(),this.onRemind("Custom")(),this.trackShortcut(Nr.REMIND[0]))},action:"keydown"}),e.push({keys:Nr.DELETE,handler:this.onDelete,action:"keydown"}),e.push({keys:"esc",handler:this.onEscapeKey,action:"keydown"}),e}getTooltipFocusText(e,t){return this.props.featureContextualMessageShortcuts?s.a.createElement(r.Fragment,null,e," ",s.a.createElement("br",null),kr.rt("Press {keyShortcut}",{keyShortcut:s.a.createElement(I.a,{label:t,slim:!0})})):e}getType(){var{fileId:e,subtype:t}=this.props;return e?"file_comment"===t?"file comment":"file":"message"}makeAriaLabelForShortcutKey(e,t){return this.props.featureContextualMessageShortcuts?"".concat(e," ").concat(kr.t("Press {key}",{key:t})):e}bindContextualShortcuts(){var{parentId:e}=this.props;if(e){var t=document.getElementById(e);t&&(this.keyCommands=new Cr.a(t),this.keyCommands.bindAll(this.getContextualShortcutCommands()))}}unbindContextualShortcuts(){this.keyCommands&&(this.keyCommands.reset(),this.keyCommands=null)}isAutomated(){return Object(D.a)(this.props.subtype)}isTemp(){return this.props.ts.indexOf("x")>-1}trackAction(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={action:p.UiAction.CLICK,ui_element:e};t&&(a.step=p.UiStep.MORE_ACTIONS_MENU);var{clogger:n}=this.props;n.track(p.EventId.MSG_ACTION,{contexts:{ui_context:a}})}clogMsgStarClick(){var{channelId:e,isStarred:t,messageContainerType:a,threadTs:n,clogger:r,clogThreadEvent:s}=this.props,i=t?p.EventId.STAR_REMOVE_CLICKED:p.EventId.STAR_ADD_CLICKED,o={channel_id:e,parent_message_id:n};a===Y.I.THREADS_VIEW?s({event:i,metadata:o}):r.track(i,o)}canCommentOnMessage(){var{replyCount:e,subtype:t,isEphemeral:a,canUserReplyToMessage:n}=this.props,r=e||"thread_broadcast"===t;return!this.props.isFileAuthorExternal&&(!(this.isAutomated()||this.isTemp()||a)&&!(!n&&!r))}canShareMessage(){var{ts:e,subtype:t,isEphemeral:a}=this.props;return!a&&"tombstone"!==t&&!Object(x.tb)(e)&&"file_comment"!==t}canStarMessage(){var{subtype:e,isStarred:t,isEphemeral:a}=this.props;return!(a||"tombstone"===e&&!t)}restoreFocusInTheFuture(){this.props.featureContextualMessageShortcuts&&this.props.setViewContextToRestoreFocus(this.props.messageContainerType)}restoreFocusImmediately(){this.props.featureContextualMessageShortcuts&&(this.props.setViewContextToRestoreFocus(this.props.messageContainerType),this.dispatchActionMessageCompleted())}dispatchActionMessageCompleted(){if(this.props.featureContextualMessageShortcuts){var{messageContainerType:e,channelId:t,ts:a}=this.props;this.props.completedMessageAction({viewContext:e,channelId:t,ts:a})}}trackShortcut(e){var{clogger:t,featureContextualMessageShortcuts:a,messageContainerType:n}=this.props;a&&t.track(p.EventId.CLIENT_KEYBOARD_SHORTCUTS,{contexts:{[p.ClientEventKeys.ui_context]:{[p.UiContextKeys.action]:p.UiAction.KEYDOWN,[p.UiContextKeys.ui_properties]:{[p.UiPropertiesKeys.key]:e,[p.UiPropertiesKeys.view_context]:n}}}})}renderAriaLabelForStar(){var{isIAP1Enabled:e}=this.props,t=this.getType();return{file:e?"Save":kr.t("Star file"),"file comment":e?"Save":kr.t("Star file comment"),message:e?"Save":kr.t("Star message")}[t]}renderTextForStarTooltip(){var e={file:kr.t("Unstar file"),"file comment":kr.t("Unstar file comment"),message:kr.t("Unstar message")},t={file:kr.t("Star file"),"file comment":kr.t("Star file comment"),message:kr.t("Star message")};return this.props.isIAP1Enabled&&(e={file:"Remove from saved","file comment":"Remove from saved",message:"Remove from saved"},t={file:"Save","file comment":"Save",message:"Save"}),(this.props.isStarred?e:t)[this.getType()]}renderStar(){var{isStarred:e,channel:t,showStar:a,isIAP1Enabled:n,featureMessageActionsRefresh:r}=this.props;if(!a||!this.canStarMessage())return null;var i,o=this.props.featureContextualMessageShortcuts?kr.t("A"):"",c=this.renderAriaLabelForStar();return i=n?e?"bookmark-filled":"bookmark":r?e?"star":"star-o":e?"small-star-filled":"small-star",s.a.createElement(Er.a,{iconType:i,label:e=>{var{hasKeyboardFocus:t}=e;return t?this.getTooltipFocusText(c,o):this.renderTextForStarTooltip()},ariaLabel:this.makeAriaLabelForShortcutKey(c,o),onClick:this.onStar,"data-qa":"star_message",tooltipPosition:t?"top":"top-right",shortcutKey:this.props.featureContextualMessageShortcuts?Nr.STAR[0]:null,"aria-pressed":e,hideFromScreenReader:!0})}renderShare(){var{subtype:e,featureOfflineMode:t,wasRecentlyOnline:a,showShare:n}=this.props;if(!n||!this.canShareMessage())return null;var r="file_share"===e||"file_mention"===e?kr.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):kr.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});t&&!a&&(r=s.a.createElement(z.a,{tooltipLabel:r}));var i=this.props.featureContextualMessageShortcuts?kr.t("S"):"",o=this.getTooltipFocusText(r,i);return s.a.createElement(Er.a,{iconType:this.props.featureMessageActionsRefresh?"share-square-o":"share-action",label:e=>{var{hasKeyboardFocus:t}=e;return t?o:r},ariaLabel:this.makeAriaLabelForShortcutKey(r,i),onClick:this.onShare,"data-qa":"share_message",shortcutKey:this.props.featureContextualMessageShortcuts?Nr.SHARE[0]:null})}renderReaction(){if(!this.props.showReact)return null;if("tombstone"===this.props.subtype||this.props.isEphemeral)return null;if("file_comment"===this.props.subtype)return null;var e=kr.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),t=this.props.featureContextualMessageShortcuts?kr.t("R"):"",a=this.getTooltipFocusText(e,t);return this.props.featureSonicEmoji?s.a.createElement(G.a,{onEmojiSelected:this.onEmojiSelected,onClick:this.props.onEmojiPickerOpen,onClose:this.onEmojiPickerClose,showHandyReactions:!0,shouldReturnFocusAfterClose:this.state.shouldReturnFocusAfterEmojiPickerClose},s.a.createElement(Er.a,{iconType:this.props.featureMessageActionsRefresh?"add-reaction":"small-reaction",label:t=>{var{hasKeyboardFocus:n}=t;return n?a:e},ariaLabel:this.makeAriaLabelForShortcutKey(e,t),"data-qa":"add_reaction_action",btnRef:this.reactionBtnRef,shortcutKey:this.props.featureContextualMessageShortcuts?Nr.REACT[0]:null})):s.a.createElement(Er.a,{iconType:this.props.featureMessageActionsRefresh?"add-reaction":"small-reaction",label:kr.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),onClick:this.onAddReaction,"data-qa":"add_reaction_action"})}renderJump(){if(!this.props.showJump)return null;if(!this.props.channel)return null;var e=kr.t("Jump");return this.props.messageContainerType!==Y.I.THREADS_VIEW&&this.props.messageContainerType!==Y.I.THREADS_FLEXPANE||(e=kr.t("Open in channel",{fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})),s.a.createElement(Er.a,{iconType:"jump",label:e,onClick:this.onJump,"data-qa":"jump_to_message"})}renderComment(){var{replyCount:e,subtype:t,canUserReplyToMessage:a,messageContainerType:n,featureOfflineMode:r,wasRecentlyOnline:i,showComment:o}=this.props;if(!o||!this.canCommentOnMessage())return null;var c,l=e||"thread_broadcast"===t;n===Y.I.THREADS_VIEW?c=kr.t("View thread in sidebar"):!a&&l?c=kr.t("View thread"):l?(c=kr.t("Reply to thread"),r&&!i&&(c=s.a.createElement(z.a,{tooltipLabel:c}))):(c=kr.t("Start a thread"),r&&!i&&(c=s.a.createElement(z.a,{tooltipLabel:c})));var d=this.props.featureContextualMessageShortcuts?kr.t("T"):"",p=this.getTooltipFocusText(c,d);return s.a.createElement(Er.a,{iconType:this.props.featureMessageActionsRefresh?"comment-alt":"small-reply",label:e=>{var{hasKeyboardFocus:t}=e;return t?p:c},ariaLabel:this.makeAriaLabelForShortcutKey(c,d),onClick:this.onComment,ariaHasPopup:null,"data-qa":"start_thread",shortcutKey:this.props.featureContextualMessageShortcuts?Nr.COMMENT[0]:null})}renderEllipsis(){var{renderMenuBelowTrigger:e,channel:t,featureOfflineMode:a,featureMessageActionsRefresh:n,wasRecentlyOnline:r,showMoreActions:i}=this.props;if(!t||!i)return null;var o=kr.t("More actions",{fallbackHash:"3a91b1007dce1af87db6afdb266966dd5d7a3df1"});return a&&!r&&(o=s.a.createElement(z.a,{tooltipLabel:kr.t("More actions")})),s.a.createElement(X.e,{renderMenu:this.renderMoreActionsMenu,position:"".concat(e?"right-bottom":"top-right"),allowanceX:e?Tr.x:0,offsetX:e?wr.x:Ir.x,offsetY:e?wr.y:Ir.y,onOpen:this.onMoreActionsMenuOpen,onClose:this.onMoreActionsMenuClose},s.a.createElement(Er.a,{iconType:n?"vertical-ellipsis":"small-ellipsis",label:o,tooltipPosition:"top-right","data-qa":"more_message_actions"}))}renderMoreActionsMenu(e){var{channel:t,ts:a,threadTs:n,messageContainerType:r,rollup:i}=this.props,{onTriggerClose:o,onMenuItemSelected:c}=e;return s.a.createElement(yr,{rollup:i,ts:a,threadTs:n,channelId:t.id,onSelectAction:this.onMenuSelectAction,onTriggerClose:o,onMenuItemSelected:c,messageContainerType:r,onMenuKeyDown:this.onMenuKeyDown})}render(){var e=d()("c-message__actions",{"c-message__actions--menu-showing":this.state.moreActionsMenuOpen,"c-message__actions--dense":"dense"===this.props.theme,"c-message__actions--offscreen":this.props.renderOffscreen}),t=kr.t("Message actions");return s.a.createElement(jr.a,{className:e,ariaLabel:t},this.renderReaction(),this.renderJump(),this.renderComment(),this.renderShare(),this.renderStar(),this.renderEllipsis())}}message_actions_MessageActions.defaultProps=Sr;var Pr={changeReactionFromUserAction:O.a,pinMessage:h.m,unpinMessage:h.q,updateStar:m.a,openModal:Q.e,showThreadOrRefresh:function(){return Object(v.n)(...arguments)},addReminderForMessage:M,openShareDialog:C.a,jumpToMessage:function(){return Object(j.a)(...arguments)},setViewContextToRestoreFocus:function(){return Object(E.a)(...arguments)},completedMessageAction:function(){return Object(k.a)(...arguments)}};t.a=Object(o.b)((e,t)=>{var{fileId:a,channelId:n,ts:r,showReact:s,messageContainerType:i}=t,o=Object(g.e)(e,n),c=Object(f.a)(e,n,r),l=Object(b.d)(e),d=Object(R.a)(e,"msg_edit_window_mins");return{channel:o,file:Object(_.c)(e,a),isFileAuthorExternal:Object(_.f)(e,a),featureSonicEmoji:Object(b.m)(e,"feature_sonic_emoji"),clogger:Object(u.a)({state:e}),featureOfflineMode:Object(b.m)(e,"feature_offline_mode"),wasRecentlyOnline:Object(y.h)(e),canUserReplyToMessage:Object(x.r)(e,{message:c,channel:o}),showReact:Object(x.e)(e,c)&&s,canEditMessage:Object(x.l)(e,l,c,o,d),canPin:Object(x.o)(e,{message:c,channel:o}),canMarkUnread:Object(x.m)(e,{message:c,channel:o}),canAddReminder:Object(x.f)(e,{message:c,channel:o}),canDeleteMessage:Object(x.k)(e,{message:c,channel:o,messageContainerType:i}),featureContextualMessageShortcuts:Object(b.m)(e,"feature_contextual_message_shortcuts"),featureAppViewsReminders:Object(b.m)(e,"feature_app_views_reminders"),featureMessageActionsRefresh:Object(b.m)(e,"feature_message_actions_refresh"),isIAP1Enabled:Object(S.d)(e)}},Pr)(message_actions_MessageActions)},"0nyD":function(e,t,a){},"0rID":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("ifKl"),r=a("yIs4"),s=a("q1tI");function i(e,t){var a=Object(s.useRef)(e),[i,o]=Object(s.useState)(e);return Object(s.useEffect)(()=>{if(i!==a.current&&Object(r.a)(t)&&t>0){var e=setTimeout(()=>{o(a.current)},t);return()=>{clearTimeout(e)}}return n.a},[t,i]),[i,o]}},"0xwB":function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"a",function(){return s});var n=a("ROZo"),r=(Object(n.b)("TS.permissions.members.canPostInModelOb",()=>!1),Object(n.b)("TS.permissions.members.canCreateConvertOrgSharedChannels",()=>!1),Object(n.b)("TS.permissions.members.canUserInviteToWorkspace",()=>!1)),s=(Object(n.b)("TS.permissions.members.canEditUserGroups",()=>!1),Object(n.b)("TS.permissions.members.canCreateAndDeleteUserGroups",()=>!1))},"0z7M":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=(a("aK/h"),a("DQNL")),o=a("HYSh"),c=a("t85p"),l=a("A+cF"),d=a("9mdM"),p=a("kd6D"),u=a("od5y"),h=a("nNoG"),m=(a("JfyJ"),new h.b("user_groups")),b={className:void 0,userGroup:void 0},_={unknown:"unknown",nonexistent:"non-existent"},g=e=>{var t=Object(i.h)(e);return r.a.createElement(l.c,{className:"c-user_group__name"},r.a.createElement(u.b,{type:"user_groups",inline:!0,className:"c-medium_user_group__icon"}),t)},f=e=>{var t=Object(i.e)(e);return r.a.createElement(l.b,null,t)},v=(e,t)=>{var a=Object(i.f)(e),n=Object(i.l)(e);return r.a.createElement(l.a,null,r.a.createElement("span",{className:"c-medium_user_group__handle"},a),t?m.rt("{count} {count, plural, =1 {member} other {members}}",{count:n}):void 0)};function O(e){var{className:t,userGroup:a,featureSonicUserGroups:n}=e,s=!Object(i.v)(a);if(Object(i.s)(a)||Object(i.r)(a))return r.a.createElement(d.a,{type:Object(i.s)(a)?_.unknown:_.nonexistent,size:"medium"});var o=s?p.c.dim:null;return r.a.createElement(l.d,{className:t,size:"medium",style:o,text:g(a),subtext:f(a),metadata:v(a,n)})}O.defaultProps=b,t.a=Object(s.b)(function(e,t){var{id:a,group:n}=t;return{userGroup:n||Object(o.e)(e,a),featureSonicUserGroups:Object(c.m)(e,"feature_sonic_user_groups")}})(O)},"1Oqo":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("q1tI"),r=a("oHBb"),s=a("lCOO");function i(){var e=Object(n.useContext)(r.a),t=Object(s.a)();return e&&e.teamId||t.warn("USE_CLOGGER","Missing team-based clogger"),e}},"1Uzj":function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=a("uvIC"),o=(e,t)=>{var{fileId:a}=t;return{file:Object(i.c)(e,a)}};function c(e){return Object(s.b)(o)(t=>t&&t.file?r.a.createElement(e,t):null)}},"1YQg":function(e,t,a){"use strict";a.d(t,"f",function(){return l}),a.d(t,"e",function(){return d}),a.d(t,"j",function(){return p}),a.d(t,"l",function(){return u}),a.d(t,"m",function(){return h}),a.d(t,"o",function(){return m}),a.d(t,"a",function(){return n}),a.d(t,"c",function(){return r}),a.d(t,"k",function(){return b}),a.d(t,"n",function(){return _}),a.d(t,"b",function(){return s}),a.d(t,"d",function(){return g}),a.d(t,"i",function(){return f}),a.d(t,"g",function(){return i}),a.d(t,"h",function(){return v}),a.d(t,"p",function(){return O});var n,r,s,i,o=a("Z0Cl"),c=a("k55U"),l="calls_server_credentials",d="A00";function p(e){return e.startsWith("R")}function u(e){return e.startsWith("C")||e.startsWith("D")||e.startsWith("G")}function h(e){return e.startsWith("D")}function m(e){return e.startsWith("C")}function b(e){var t=e;return"sh_room_created"===t.subtype||"sh_room_shared"===t.subtype}function _(e){return void 0!==e.slack_id}function g(e){return void 0!==e.slackId}function f(e){return Object(o.a)(e,e=>g(e))}function v(e){switch(e){case 0:return"good";case 1:return"fair";case 2:return"bad";case 3:return"worst";default:return Object(c.a)(e),"good"}}function O(e){return{token:e.token,tokenExpiry:e.token_expiry,hostname:e.hostname,port:e.port,turn:{username:e.turn_auth.username,password:e.turn_auth.password,ports:e.turn_ports}}}!function(e){e.Cleanup="cleanup",e.Timeout="timeout",e.InviterCancel="inviter_cancel",e.AcceptedTimeout="accepted_timeout",e.CallerHangup="caller_hangup"}(n||(n={})),function(e){e.Accept="accept",e.Reject="reject",e.DoNotDisturb="dnd",e.OnCall="on_call",e.Hangup="hangup",e.Missed="missed"}(r||(r={})),function(e){e.Outgoing="outgoing",e.Incoming="incoming"}(s||(s={})),function(e){e.UserEndedOrphanedCall="UserEndedOrphanedCall",e.OutgoingInviteRejected="OutgoingInviteRejected",e.ShowSurvey="ShowSurvey",e.MaxTeams="rooms_max_teams",e.CallEnded="rooms_call_ended",e.MaxParticipants="rooms_max_participants",e.UnauthorizedRoom="rooms_invalid_room",e.InvalidParameters="rooms_invalid_parameters",e.NoServersAvailable="rooms_no_servers_available",e.UnauthorizedChannel="rooms_invalid_channel"}(i||(i={}))},"1c4n":function(e,t,a){},"1iAE":function(e,t,a){},"1lYC":function(e,t,a){},"1yga":function(e,t,a){"use strict";var n=a("owWc"),r=a("F294"),s=a("ifKl"),i=a("q1tI"),o=a.n(i),c=a("aK/h"),l=a("XHGt"),d=(a("yPgC"),a("tbBR")),p=a("aLpA"),u=a("fYfO"),h=a("hOQf"),m=a("t85p"),b=a("uvIC"),_=a("nNoG"),g=a("/9ln"),f=a("HOkk"),v=a("H3xq"),O=a("CaXY"),y=a("dhvi"),C=a("QOH6"),j=a("S2Hy"),E=a("p2RN"),k=a("dEjE"),S=a("0d94"),I=Object(S.b)(k.a),w=new _.b("msg_edit"),T={messageExists:!0,removeMessage:s.a,subtype:void 0,hasFile:!1,fileMode:void 0,rollup:void 0,useBulkDelete:!1,closeModal:s.a,completedMessageAction:s.a,viewContext:p.I.MESSAGE_PANE,featureContextualMessageShortcuts:!1,setViewContextToRestoreFocus:s.a,viewContextToRestoreFocus:null,featureMessageKitInMessagePane:!1};class BaseDeleteMessageDialog extends i.PureComponent{constructor(){super(),this.onGo=this.onGo.bind(this),this.onClose=this.onClose.bind(this)}componentDidMount(){this.maybeCloseModal()}componentDidUpdate(){this.maybeCloseModal()}onGo(e){this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type&&"Enter"===e.key&&e.preventDefault();var{ts:t,channelId:a,removeMessage:r,useBulkDelete:s,rollup:i,featureContextualMessageShortcuts:o}=this.props,c=s?Object(n.a)(i,(e,t)=>e.concat(t.timestamps),[]):[];c.sort(),r({channelId:a,ts:t,rollupTimestamps:s&&c?c:[]}),o&&(this.messageDeleted=!0)}onClose(){var{channelId:e,ts:t,viewContext:a,viewContextToRestoreFocus:n,featureContextualMessageShortcuts:r,completedMessageAction:s,setViewContextToRestoreFocus:i}=this.props;if(r&&n){var o=this.messageDeleted;o&&i(null),s({viewContext:a,channelId:e,ts:t,focusOnInput:o})}}getBodyText(){var{subtype:e}=this.props;if(!e)return null;var t=this.getFileLabel();if("file_upload"===e){if("file"===t)return w.t("Note that deleting this message will not delete the file that was uploaded.");if("snippet"===t)return w.t("Note that deleting this message will not delete the snippet that was uploaded.");if("post"===t)return w.t("Note that deleting this message will not delete the post that was uploaded.")}else if("file_share"===e){if("file"===t)return w.t("Note that deleting this message will not unshare the file.");if("snippet"===t)return w.t("Note that deleting this message will not unshare the snippet.");if("post"===t)return w.t("Note that deleting this message will not unshare the post.")}else if("file_comment"===e)return w.t("Note that deleting this message will not delete the comment.");return null}getFileLabel(){var{hasFile:e,fileMode:t}=this.props;return e?"snippet"===t?"snippet":"post"===t?"post":"file":null}maybeCloseModal(){this.props.messageExists||this.props.closeModal()}render(){var{ts:e,channelId:t,rollup:a,useBulkDelete:n,messageExists:r,featureMessageKitInMessagePane:s}=this.props;if(!r)return null;var i=this.getBodyText();return o.a.createElement(d.a,{id:p.I.DELETE_MSG_DIALOG},o.a.createElement(f.a,{title:w.t("Delete message"),goButtonText:w.t("Delete"),goButtonType:"danger",onGo:this.onGo,onClose:this.onClose},w.t("Are you sure you want to delete this message? This cannot be undone."),i&&o.a.createElement("div",{className:"margin_top_50"},i),o.a.createElement("div",{className:"margin_top_100"},s?o.a.createElement(I,{ts:e,channelId:t,blocksContainerContext:O.a.delete_dialog,footer:!1}):o.a.createElement(v.a,{ts:e,channelId:t,rollup:n&&a?a:null,blocksContainerContext:O.a.delete_dialog,isStandalone:!0}))))}}BaseDeleteMessageDialog.defaultProps=T;var N={removeMessage:function(){return Object(g.a)(...arguments)},closeModal:function(){return Object(y.a)(...arguments)},completedMessageAction:function(){return Object(C.a)(...arguments)},setViewContextToRestoreFocus:function(){return Object(j.a)(...arguments)}},P=Object(l.b)((e,t)=>{var{channelId:a,ts:n,rollup:s}=t,i=Object(m.m)(e,"feature_allow_bulk_delete_join_leave_messages"),o=Object(u.a)(e,a,n);if(!o)return{messageExists:!1};var c,l=o.files,d=Object(b.c)(e,Object(r.a)(l)),p=!1;d&&(p=!0,c=d.mode);var _=!(!i||!s);return{messageExists:!0,hasFile:p,fileMode:c,subtype:Object(h.N)(o),rollup:s,useBulkDelete:_,featureContextualMessageShortcuts:Object(m.m)(e,"feature_contextual_message_shortcuts"),viewContextToRestoreFocus:Object(E.a)(e),featureMessageKitInMessagePane:Object(m.m)(e,"feature_message_kit_in_message_pane")}},N)(BaseDeleteMessageDialog);P.propTypes={channelId:c.default.string.isRequired,ts:c.default.string.isRequired},t.a=P},"2/vs":function(e,t,a){"use strict";a.d(t,"c",function(){return f}),a.d(t,"b",function(){return v}),a.d(t,"a",function(){return O});var n=a("rePB"),r=a("aK/h"),s=a("Pb16"),i=a("vhAc"),o=a("XfeM"),c=a("t85p"),l=a("ns4K"),d=a("brL+"),p=a("DVJN"),u=a("jZWL"),h=a("umiW"),m=a("5/cL");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var g=Object(o.b)("Runs a message action (deprecated)",(e,t,a)=>{var n=t(),r=Object(h.f)(n);return Object(h.c)(r,a)?Promise.resolve():(e(Object(h.e)(a)),e(Object(i.c)(_({},a,{type:"message_action"}))).then(()=>e(Object(h.j)(a))).catch(()=>{e(Object(h.i)(a));var t=Object(s.a)({onRetry:()=>e(g(a))});e(Object(l.c)({element:t}))}))});g.meta={name:"deprecatedRunMessageAction",key:"appActionsStoreActionsDeprecatedRunMessageAction",description:"Runs a message action (deprecated)"},g.propTypes={actionId:r.default.string,appId:r.default.string,channelId:r.default.string,messageTs:r.default.string};var f=Object(o.b)("Runs a message action",(e,t,a)=>{if(!Object(c.m)(t(),"feature_app_actions_fe_refactor"))return e(g(a));e(Object(m.c)());var n=_({},a,{type:p.a.messageAction});return e(Object(i.c)(n)).catch(()=>{var t=Object(s.a)({onRetry:()=>e(f(n))});e(Object(l.c)({element:t}))})});f.meta={name:"runMessageAction",key:"appActionsStoreActionsRunMessageAction",description:"Runs a message action"},f.propTypes={actionId:r.default.string.isRequired,appId:r.default.string.isRequired,channelId:r.default.string.isRequired,messageTs:r.default.string.isRequired};var v=Object(o.b)("Runs a global action",(e,t,a)=>{e(Object(m.c)());var n=_({},a,{type:p.a.globalAction});return e(Object(i.c)(n)).catch(()=>{var t=Object(s.a)({onRetry:()=>e(v(n))});e(Object(l.c)({element:t}))})});v.meta={name:"runGlobalAction",key:"appActionsStoreActionsRunGlobalAction",description:"Runs a global action"},v.propTypes={actionId:r.default.string.isRequired,appId:r.default.string.isRequired};var O=Object(o.b)("Explicitly load app actions",(e,t)=>{var a=t(),n=Object(d.b)(a);return Object(u.a)(n)});O.meta={name:"loadAppActions",key:"appActionsStoreActionsLoadAppActions",description:"Explicitly load app actions"}},"20nV":function(e,t,a){},"23La":function(e,t,a){},"2Dlx":function(e,t,a){},"2FVR":function(e,t,a){},"2I0B":function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a("TGBA"),r=a("1zbP"),s=a("6kok"),i=a("Qrgz"),o=a("+uGN"),c=a("fYfO"),l=a("t85p"),d=a("4M+g"),p=a("g+Y+");function u(e){var{includeAllTeams:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(n.a)(Object(p.e)(e)),u=[];return a.forEach(a=>{if(Object(o.p)(a))u.push(a);else{var{channelId:n,threadTs:p}=Object(o.b)(a)||{},h=Object(d.e)(e,n);if(!t&&Object(s.cb)(h))return;if(Object(s.Nb)(h))return;if(Object(s.X)(h))return;if(!Object(s.nb)(h))return;if(p&&!Object(i.q)(e,n))return;if(!p&&!Object(i.p)(e,n))return;if(p&&Object(l.m)(e,"feature_unknown_messages")){var m=Object(c.a)(e,n,p);if(Object(r.e)(m))return}u.push(a)}}),u}},"2LCd":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("MIIS")),i=a("OZf9"),o=a("CpTu"),c=a("XHGt"),l=a("yHhI"),d=a("UF3u"),p=0;class favicon_Favicon extends n.PureComponent{constructor(e){super(e),this.originalFavicon=this.findFavicon()}componentDidMount(){p&&this.props.logger.error("Multiple Favicons mounted"),p+=1,this.updateFavicon()}componentDidUpdate(e){Object(d.a)(this.getFaviconProps(e),this.getFaviconProps(this.props))||this.updateFavicon()}componentWillUnmount(){p-=1,this.setOrRemoveFavicon(this.originalFavicon)}getFaviconProps(e){return{rel:"shortcut icon",href:e.href,sizes:e.sizes,type:e.type}}setOrRemoveFavicon(e){var t=document.querySelector("head");if(t){var a=this.findFavicon();a?e?t.replaceChild(e,a):a.remove():e&&t.appendChild(e)}else this.logger.error("<head> not found")}findFavicon(){var e=document.querySelectorAll("head > link");return Object(o.a)(e,e=>{var t=e.getAttribute("rel");return!(!t||!t.split(" ").includes("icon"))})}updateFavicon(){var e=document.createElement("link");Object(i.a)(this.getFaviconProps(this.props),(t,a)=>{e.setAttribute(a,t)}),this.setOrRemoveFavicon(e)}render(){return null}}favicon_Favicon.defaultProps={sizes:"16x16 32x32 48x48",type:"image/png"};var u=Object(c.b)(e=>({logger:Object(l.a)({state:e})}))(favicon_Favicon),h=a("dxEi"),m=a("G3Sk"),b=a("9kTo"),_={online:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",onlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABNVBMVEVKFEz///9NGE+EX4VLFU3w7PD9/f1SH1Tb0Nv59/n18/W4orhZKFt2TnhwRXF2TXdpPGqghKFMFk7FtMZTIFVhMmNxR3PHt8hfL2F6U3xpPWt/WYD+/v5nOWhWI1edgJ7z8POBW4LIuMhySHS6pruHZIl/WoGJZopuQ3CObI/Vydba0NtsQW7ArcHw6/DEs8VYJlqojqnx7fH8/PyfgqDGtcbg1+Du6e7e1N5kN2Z8VX2fg6BbKlxOGVBxRnJ4T3ljNWV6UnuDXoSLaIyih6NMF07az9qWd5f8+/zUx9Ts5+zj2+Pv6u/t5+13Tni1n7WYeZlTH1XYzdn49vjLu8uIZYm5pLpmOGipkKqMaY2UdJXr5euZe5prP2xsQG2JZovTxtSnjahOGlDSxdOQcJKHY4hXJVnkajHYAAABJUlEQVR4Xr3PNXbFMBCF4Tvmx8wYZmZmZmaG/S8hHke2UuikfF9xp9DfCC3V4YQzUeB01umDStYkogKS5EpCIUGukLHOZwMKRYsLrYv3EyqTljqQcm26DmWQXen2HNsIgrNEUf7PJGGm1w/yJlkLEBwK9PvBgLtWTgRhGQxD53OHCT5rIpiSwRCe+QyCt1kXQbQQIk9oZBQYGz9sAETV6RgChuaBpGlpSHPzlcoilpZLqwDikXZPZtOG0CCXvrXt7g7iu+TbM0Sw7wUx3gNESCqL4IiDfA9vGCck1USQIqLztAjKF+S7hO/qOmVDBLi57fRE7jX8FQRqMugienj8P3A9QeGLg+bveYFCjYNXxPiUoPJWJTOOd4foQ4OSHeUH47uO1voBEO4eo1Zt+vMAAAAASUVORK5CYII=",onlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAC9UlEQVR4AdSVA4wfXxDH/7H/rm3bttvzVWfbtm3btm3bVnC27Wk23dvu/VxPvsGbTOaz7w32j5f/v6ZKz/97mXSQoeIIM4WiGvDsvxeFh5l+H4Dsc/m26raZqZmC+MIPx9kQQNaZ998GwLyfdXx4fO2zFSUVg1PwplAZs/y3ASi+UVrD2MLcwqstb7TYtCuNXL8NgOscz8rKCpbxZju9Pq9he2lVxTHWb1MDL11vLAMABnxGY2NjRTwa36yLeC7y6bDp6nMZgOBoxG+ysLBQl1tUDqWmFgBVVaZX0fqog5MSnTLTPhYIQABwJ7hEga13xVEWKgDQkdiewdnowKjkI2kEAMelpaWurq58NatyygHQ72skraGkEQWsrq7CQ3V0dBg/4S84zEgRAKaJNGB8aBzCoBLIEWGoc2g8++d2HocK9BUZQGFCIWlAdkQOhInfl0A9wBC9J/7k32f19fXZkXG5apZF9NLFN7gLjzDBOkk8SO+779UGADYBzCpM0+bU4MyPK3h/9CMSGWwZMjEyMTY45qHtCccX/72Cq0DZ4cXiI+LZbrNf++sG6MZfN2/9fQffpjCr0Ow4kW1liHm9je7llk/LHJYVKjh+AeC/JqjOqqH1QRvEdpIdPHQ7GGSeyqoyq/NdEUDDpJ/IJPsmFycX4wQL0dfID21oRBsAuO8axqCY8FGtVa2ox1HJCcm+vLRMolT1RfXwDAQAw33DOIAinTLW09XWBWHw7WvkTOSOGAHASN8INkjmmZyJoCnWA30MYQleCWQBQjeECQC89X3QiOaKltdb6QgC4OvmZ+dJZC9LKyNcA5CxgEmKfyqQkEIRBIAErwuHWIemBqbhBK9nL++A6zoS25QwgFpRDUB2EdhQz5CLmut3BCAmdk+cdoARnzE219T41GaniaAZ7QDoNmyuusJ6cOKGA4acdgAoyCIYViYkgn8RzDB46HYyoH+O2oI6sptqfYTrZGCSBRa0YIMQBWK4amSYcjiFqYgwGhkWAAA494XLYBFPegAAAABJRU5ErkJggg==",offline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",offlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",offlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABSlBMVEVKFEyScpNLFU1iNGSMao17VH2Qb5FZKFtNGE9hMmPGJFKObZCOb4+EX4WRcZJjNWVHE0lcK15sQG2Iaol2TXdIE0pQHFJaKVxVIlfMJVNwRXHMJVRdLV98VX1WI1dsQW5WJFhOGVA3DzlMFk5PG1FfL2GLaIzNJVOBW4J3Tnh9Vn5gMGGIXXu6JlKPcJCaRWdYJ1pbK11TIFV+Yn9zKE/FJFFSH1SCXINTI1WzNFxYJlpWJVhFEke3IlB3T2uTP2CwMlq+K1a2Ik+WP2FHETylNlyNa46MaY1/Y39sT21HIUheMGA5Dzo7ED1JFEtgM2JeLmBZMFpRHVNhM2N5UXunN11UIVZgMWJ5XnptQm9pPGqBWHbIKFSHZImiH0uQcZF1THaMR2dJE0uDXoR9V392TniBZYJnOmmKZ4tpPWtXJVmObI9vRHFOGlBSjo4eAAABPUlEQVR4Xr3QNWPrQBCF0TtiMzNTmJmZmZnh8fv/bVYrGWRbKVLka+c0c9FcZL7TUgvwO78OYh6XHIW/3w4UJCLKYGraDgwTS8HuoB2YID3hsC9lAxDk4DR0bgcwculwQHTf3rWAQqCXF9AA8TH0nGgCMYnMNocg0sCP1YQVeKjWJANe9+jYuAW46kCCg5g4XltPNQC5Ds4wQ0zMzl0tLC4tO50rD2BFM4oBFLkMJDekIF7coa3tnWJxbx9GAg/1BBxE/KwIB/GjSuUEJTV9AUAN9/Dka80yoUPQn7mB6qVqXTDr4CCgs3uEqV6+EcR8OnDhqQFkTZBj4FUwQV6pgTdU873nNJgA8WQ3L/xTgCUT2GcCkejX788B6w9aMy5/DeBrB7LGNnyONNr1j0hSUfIwJqBtWpQfyv/xvX0AvdA4SuBm2+sAAAAASUVORK5CYII=",posts:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAw0lEQVR4AWOAg4IAAYaqqHqG6sj9QPo/jfB5IE5gwAAVEQpAifsgRXTC98F2wgB9LUc4AhzqoCCBC9IfNzAwVEefHzAHVALTG4gxoJiQglEHJKyZ8b9hzxpyMEgv5Q64//71f3LB/XevaRwFo2lgNA2MpoHRNDCaBgjHOZ3SACLOh2IUjDpg1AGV0fsHrlkO7KqBOgcD5oCKCGA/sSFBANhBoHvXDGQnSucUJEBPy8F2ogNwkFRH0ayrBu36N4A7pVAAAK813oG8J1mnAAAAAElFTkSuQmCC"};var g=class workspace_favicon_WorkspaceFavicon extends n.Component{constructor(e){super(e),this.renderWithState=this.renderWithState.bind(this)}renderWithState(e){var t,a=Object(h.d)(e),n=!!Object(m.f)(e),s=Object(m.o)(e);return a?t=n?_.onlineMentions:s?_.onlineUnreads:Object(b.a)()?_.posts:_.online:(t=_.offline,t=n?_.offlineMentions:s?_.offlineUnreads:_.offline),r.a.createElement(u,{href:t})}render(){return r.a.createElement(s.a,{render:this.renderWithState,store:this.props.store})}};t.a=g},"2LTG":function(e,t,a){},"2Mhf":function(e,t,a){e.exports=a.p+"data_storage-32c2fbf.png"},"2Rjh":function(e,t,a){e.exports=a.p+"guests@2x-b86f826.png"},"2TEj":function(e,t,a){"use strict";var n=a("rePB"),r=a("GxtX"),s=a("BeL+"),i=a("lE2N"),o=a("yIs4"),c=a("uKXT"),l=a("ZP0B"),d=a("zmn3"),p=a("aK/h"),u=a("XfeM"),h=a("JHHQ"),m=a("7tsZ"),b=a("fAc/"),_=a("BUzq"),g=a("PbVc"),f=a("yHhI"),v=a("ZAxE"),O=a("n74X"),y=a("yzQ7"),C=a("Z1bu");function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var E=Object(u.b)("Helper for handling history",function(e,t){var{oldest:a,latest:n,channelId:r,msgs:s,hasMore:i,pinCount:p,channelActionsCount:u,isLimited:b,deleted:g}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=Object(d.a)(s,"ts");if(e(a||n?Object(h.a)({msgs:s,channelId:r,oldest:a,latest:n,hasMore:i,isLimited:b,loading:!1,deleted:g}):Object(h.a)({msgs:s,channelId:r,isLimited:b,latest:Object(l.a)(f),oldest:Object(c.a)(f),hasMore:{hasMoreStart:i,hasMoreEnd:!1},loading:!1,deleted:g})),Object(o.a)(p)&&e(Object(_.r)({channelId:r,count:p})),Object(o.a)(u)){var v=t(),O=Object(y.c)(v,r);Object(y.d)(v,r)&&O===u||(e(Object(C.a)([r])),e(Object(m.d)({channelId:r,count:u})))}});E.meta={name:"historyHandler",key:"messagePaneStoreFetchHistoryHistoryHandler",description:"Helper for handling history"},E.propTypes={oldest:p.default.string,latest:p.default.string,channelId:p.default.string,msgs:p.default.array,hasMore:p.default.oneOfType([p.default.object,p.default.bool]),pinCount:p.default.number,channelActionsCount:p.default.number,isLimited:p.default.bool,deleted:p.default.array};var k=Object(u.b)("Fetch conversation history",function(e,t){var{channelId:a,oldest:o=null,latest:p=null,reason:u="message-pane-store/fetchHistory"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!a)return!1;var h=t();if(Object(b.d)(h,a))return!1;if(Object(f.a)({getState:t}).info("HISTORY-FETCH","Fetching history for message pane: ".concat(a," oldest: ").concat(o," latest: ").concat(p)),p&&o){var m=e(Object(v.b)({channelId:a,oldest:null,latest:p,reason:u})),_=e(Object(v.b)({channelId:a,oldest:o,latest:null,reason:u})),y=Promise.all([m,_]).then(t=>{var{msgs:n,hasMore:u,isLimited:h,pinCount:m,channelActionsCount:b,deleted:_}=t[0],{msgs:g,hasMore:f,deleted:v}=t[1],O=Object(i.a)(n.concat(g),"ts"),y=Object(s.a)(Object(r.a)(_,v)),C=Object(d.a)(O,"ts");e(E({channelId:a,msgs:O,isLimited:h,pinCount:m,channelActionsCount:b,hasMore:{hasMoreStart:u,hasMoreEnd:f},oldest:Object(c.a)([o,Object(c.a)(C)]),latest:Object(l.a)([p,Object(l.a)(C)]),deleted:y}))}).catch(t=>{Object(O.c)(t,"Failed to fetch history for ".concat(a),"message_pane_history_fetch_fail"),e(Object(b.c)({channelId:a}))});return e(Object(b.f)({channelId:a,loadingOlder:!0,request:y})),y}p&&e(Object(g.d)());var C=e(Object(v.b)({channelId:a,oldest:o,latest:p,reason:u})).then(t=>{e(E(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t,{oldest:o,latest:p,channelId:a})))}).catch(t=>{Object(O.c)(t,"Failed to fetch history for ".concat(a),"message_pane_history_fetch_fail"),e(Object(b.c)({channelId:a}))});return e(Object(b.f)({channelId:a,loadingOlder:!!p,request:C})),C});k.meta={name:"fetchHistory",key:"messagePaneStoreFetchHistoryFetchHistory",description:"Fetch conversation history"},k.propTypes={channelId:p.default.string.isRequired,oldest:p.default.string,latest:p.default.string,reason:p.default.string},t.a=k},"2XjY":function(e,t,a){},"2ekl":function(e,t,a){},"2ojh":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=new(a("nNoG").b)("message");function r(){var{currentUserId:e,pinnedBy:t,renderPinnedBy:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t?t===e?n.t("Pinned by you"):n.rt("Pinned by {member}",{member:a(t)}):n.t("Pinned")}function s(){var{long:e=!1,renderStarButton:t,featureMessageLabelsCopy:a,isIAP1Enabled:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r?t(e?{text:"Added to your saved items"}:a?{text:"Starred"}:{text:"starred"}):e?n.rt("<star>Added to your starred items</star>",null,t):a?n.rt("<star>Starred</star>",null,t):n.rt("<star>starred</star>",null,t)}function i(){var{isPinned:e,isStarred:t,isEphemeral:a,isBroadcast:i,isCustomResponse:o,isSliHighlight:c,isSelfIm:l,isSlackbotIm:d,currentUserId:p,pinnedBy:u,renderPinnedBy:h,renderStarButton:m,renderHighlight:b,renderBroadcast:_,featureMessageLabelsCopy:g,isIAP1Enabled:f}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a?l||d?null:n.t("Only visible to you"):g&&i?e&&t?n.rt("<a>Also sent to the channel</a> \u2219 {pinned} \u2219 {starred}",{pinned:r({currentUserId:p,pinnedBy:u,renderPinnedBy:h}),starred:s({renderStarButton:m,featureMessageLabelsCopy:g,isIAP1Enabled:f}),fallbackHash:"d2f0c6a83913776accbe386c64ce06300680f44f"},_):t?n.rt("<a>Also sent to the channel</a> \u2219 {starred}",{starred:s({renderStarButton:m,featureMessageLabelsCopy:g,isIAP1Enabled:f}),fallbackHash:"aead0d7a1eed4a8c18d29d9377a3f4fabc60f2cc"},_):e?n.rt("<a>Also sent to the channel</a> \u2219 {pinned}",{pinned:r({currentUserId:p,pinnedBy:u,renderPinnedBy:h}),fallbackHash:"b25a074514a36f2157703e7f0f332143878f55a8"},_):n.rt("<a>Also sent to the channel</a>",{fallbackHash:"5ee7c5390f0e1abffe537265bbbbb3316238001a"},_):o?e&&t?n.rt("{pinned} \u2219 {starred} \u2219 Custom response",{pinned:r({currentUserId:p,pinnedBy:u,renderPinnedBy:h}),starred:s({renderStarButton:m,featureMessageLabelsCopy:g,isIAP1Enabled:f})}):t?n.rt("{starred} \u2219 Custom response",{starred:s({long:!0,renderStarButton:m,featureMessageLabelsCopy:g,isIAP1Enabled:f})}):e?n.rt("{pinned} \u2219 Custom response",{pinned:r({currentUserId:p,pinnedBy:u,renderPinnedBy:h})}):n.t("Custom response"):c?e&&t?n.rt("{pinned} \u2219 {starred} \u2219 {highlight}",{highlight:b(),pinned:r({currentUserId:p,pinnedBy:u,renderPinnedBy:h}),starred:s({renderStarButton:m,featureMessageLabelsCopy:g,isIAP1Enabled:f})}):t?n.rt("{starred} \u2219 {highlight}",{highlight:b(),starred:s({long:!0,renderStarButton:m,featureMessageLabelsCopy:g,isIAP1Enabled:f})}):e?n.rt("{pinned} \u2219 {highlight}",{highlight:b(),pinned:r({currentUserId:p,pinnedBy:u,renderPinnedBy:h})}):n.rt("{highlight}",{highlight:b()}):e&&t?n.rt("{pinned} \u2219 {starred}",{pinned:r({currentUserId:p,pinnedBy:u,renderPinnedBy:h}),starred:s({renderStarButton:m,featureMessageLabelsCopy:g,isIAP1Enabled:f})}):e?r({currentUserId:p,pinnedBy:u,renderPinnedBy:h}):t?s({long:!0,renderStarButton:m,featureMessageLabelsCopy:g,isIAP1Enabled:f}):null}},"3AZy":function(e,t,a){e.exports=a.p+"sidebar_bg_plus-2c1f56a.png"},"3Dhv":function(e,t,a){},"3JmS":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=a("TSYQ"),o=a.n(i),c=a("MnCE"),l=(a("aK/h"),a("t85p")),d=a("Fdc0"),p=a("nNoG"),u=(a("/gIb"),new p.b("member_profile")),h={className:void 0};function m(e){var{className:t,member:a,featureEasyProfileImgDownload:n,memberName:s}=e,i=a.profile.image_512,c=a.profile.image_48,l=n?"url('".concat(c,"')"):"url('".concat(i,"'), url('").concat(c,"')"),d=n?u.t("Profile photo for {member_name}",{member_name:s}):"";return r.a.createElement("div",{className:o()(t,"p-member_profile_picture"),style:{backgroundImage:l}},n&&r.a.createElement("img",{src:i,alt:d,className:"p_member_profile_picture__img"}))}m.defaultProps=h;t.a=Object(s.b)((e,t)=>{var{member:a}=t;return{featureEasyProfileImgDownload:Object(l.m)(e,"feature_easy_profile_img_download"),memberName:Object(d.V)(e,a)}})(Object(c.a)(m))},"3dej":function(e,t,a){},"3ise":function(e,t,a){},"3lVB":function(e,t,a){"use strict";a.d(t,"b",function(){return r});var n=null;function r(){return n}t.a=(e=>{var{prevTeamId:t,nextTeamId:a,navigationTimestamp:r}=e;return t===a?Promise.resolve():(n=r,Promise.resolve())})},"3rHJ":function(e,t,a){},"445Q":function(e,t,a){},"4EIq":function(e,t,a){"use strict";var n=a("vJtL"),r=(a("aK/h"),a("q1tI")),s=a("XHGt"),i=a("brL+"),o=(e,t)=>"".concat(e,"-").concat(t),c={add:function(e,t,a){this.sections||(this.sections={});var n=o(e,t);this.sections[n]||(this.sections[n]=a)},remove:function(e,t){if(this.sections){var a=o(e,t);this.sections[a]&&(this.sections[a]=null,delete this.sections[a])}},get:function(e,t){if(this.sections)return this.sections[o(e,t)]}};class focusable_section_FocusableSection extends r.PureComponent{constructor(e){super(e);var{focus:t,blur:a}=e.component;if(!(Object(n.a)(t)&&Object(n.a)(a)))throw new Error("FocusableSection requires a single child that implements focus and blur methods.")}componentDidMount(){var{teamId:e,order:t,component:a}=this.props;c.add(e,t,a)}componentWillUnmount(){var{teamId:e,order:t}=this.props;c.remove(e,t)}render(){return this.props.children}}focusable_section_FocusableSection.defaultProps={children:null};var l=Object(s.b)(e=>({teamId:Object(i.b)(e)}))(focusable_section_FocusableSection);a.d(t,"a",function(){return l})},"4F1B":function(e,t,a){},"4OD1":function(e,t,a){e.exports=a.p+"data_storage@2x-be89942.png"},"4RH7":function(e,t,a){"use strict";var n=a("uXhx"),r=a("NFsq"),s=a("4Ok1"),i=(a("aK/h"),a("q1tI")),o=a.n(i),c=a("XHGt"),l=a("MnCE"),d=a("TSYQ"),p=a.n(d),u=a("t85p"),h=a("RAhH"),m=a("nNoG"),b=a("05v1"),_=a("Fdc0"),g=new m.b("threads"),f={className:void 0,replyCount:0,prefixWithReplyCount:!1,includesSelf:!1,broadcastPreabmle:!1};function v(e){var{className:t,participantNames:a,replyUsersCount:n,replyCount:r,prefixWithReplyCount:i,includesSelf:c,broadcastPreabmle:l}=e;if(0===n)return null;var d=p()("p-thread_participant_list",t);return o.a.createElement("span",{className:d,"data-qa":"thread_participant_list"},n<=3?function(e){var{participantNames:t,includesSelf:a,replyCount:n,replyUsersCount:r,prefixWithReplyCount:s,broadcastPreabmle:i}=e;if(i&&1===n)return g.rt("1 reply");if(a)switch(r){case 1:return s?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from you",{replyCount:n}):g.t("Just you");case 2:return s?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName} and you",{replyCount:n,userName:t[0]}):g.rt("{userName} and you",{userName:t[0]});default:return s?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and you",{replyCount:n,userName1:t[0],userName2:t[1]}):g.rt("{userName1}, {userName2}, and you",{userName1:t[0],userName2:t[1]})}var o=Object(m.k)(t,{noEscape:!0}).join("");return s?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {names}",{replyCount:n,names:o}):o}({participantNames:a,replyCount:r,replyUsersCount:n,prefixWithReplyCount:i,includesSelf:c,broadcastPreabmle:l}):function(e){var{participantNames:t,replyUsersCount:a,replyCount:n,prefixWithReplyCount:r}=e,i=a-2,c=Object(s.a)(t,2);c.length<i&&c.push(g.rt("others"));var l=Object(m.k)(c,{noEscape:!0}).join("");return r?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{replyCount:n,userName1:t[0],userName2:t[1],numOthers:i},e=>{var{text:t}=e;return o.a.createElement(h.c,{tip:l},o.a.createElement("span",null,t))}):g.rt("{userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{userName1:t[0],userName2:t[1],numOthers:i},e=>{var{text:t}=e;return o.a.createElement(h.c,{tip:l},o.a.createElement("span",null,t))})}({participantNames:a,replyCount:r,replyUsersCount:n,prefixWithReplyCount:i}))}v.defaultProps=f;Object(l.a)(v);var O=Object(c.b)(function(e,t){var{replyUsers:a}=t,{replyUsersCount:s}=t,i=Object(u.d)(e),o=Object(r.a)(a,i),c=Object(r.a)(a,_.a),l=Object(b.a)(e,a);return s||(s=a.length),{participantNames:c?Object(n.a)(l,e=>e===_.b):l,replyUsersCount:c?s-1:s,includesSelf:o}})(v);t.a=O},"4lvZ":function(e,t,a){"use strict";var n=a("q1tI"),r=(a("aK/h"),a("OZf9")),s=a("UXvI"),i=a("ifKl"),o=a("t85p"),c=a("o37S"),l=a("kOzZ"),d=a("/V1y"),p=0,u=6e4,h=["focus","focusin","touchstart","mousedown","mouseup","wheel","keydown","keyup","beforeinput","input","scroll","compositionstart","compositionupdate","compositionend"];function m(e){if(!Object(o.m)(e(),"feature_track_time_spent"))return i.a;var t={capture:!0,passive:!0},a=setInterval(()=>(function(e){var t=e(),a=Object(d.a)(Object(d.c)(t)),n=Object(l.a)({state:t});Object(r.a)(a,e=>{null===e.lastLogged?n.track("SESSION_START",{client_session:b(e)}):e.isActive&&e.needsRefresh&&n.track("SESSION_REFRESH",{client_session:b(e)}),e.isActive||n.track("SESSION_END",{client_session:b(e)})})})(e),u),n=Object(s.a)(()=>{document.hasFocus&&document.hasFocus()&&Object(d.e)(Object(d.c)(e()))},5e3,{leading:!0,trailing:!0});h.forEach(e=>{window.addEventListener(e,n,t)});return()=>{h.forEach(e=>{window.removeEventListener(e,n,t)}),clearInterval(a)}}function b(e){return{uid:e.id,timestamp_start:Object(c.a)(e.startTime),timestamp_refresh:Object(c.a)(e.lastActivity),version:p}}a.d(t,"a",function(){return track_time_spent_TrackTimeSpent});class track_time_spent_TrackTimeSpent extends n.Component{constructor(e){super(e),this.removeListener=null}componentDidMount(){this.removeListener=m(()=>this.props.store.getState())}componentWillUnmount(){this.removeListener&&(this.removeListener(),this.removeListener=null)}render(){return this.props.children}}track_time_spent_TrackTimeSpent.defaultProps={children:null}},"4tN7":function(e,t,a){},"533h":function(e,t,a){"use strict";var n=a("Ff2n"),r=a("wx14"),s=a("ifKl"),i=a("q1tI"),o=a.n(i),c=(a("aK/h"),a("XHGt")),l=a("TSYQ"),d=a.n(l),p=a("HvGc"),u=a("18Pa"),h=a("RAhH"),m=a("nNoG"),b=(a("LFzE"),new m.b("flexpane"));class FlexpaneHeader extends i.PureComponent{constructor(e){super(e),this.closeButtonRef=o.a.createRef(),this.focus=this.focus.bind(this)}focus(){var e=this.closeButtonRef.current;e&&e.focus()}render(){var{children:e,className:t,onOptionsClick:a,optionsHref:n,optionsIconType:s,optionsTooltipText:i,renderSecondary:c,clientTheme:l,isIAP1Enabled:p}=this.props,m=a||n,_="dark"===l?{backgroundStyle:"dark"}:{},g=m?h.a:1e3,f=c(),v=i||b.t("View options",{fallbackHash:"a09052c3b42360a3492e17c37d74b78324785541",fallbackHashNs:"mentions"});return o.a.createElement("div",{className:d()("p-flexpane_header",t)},o.a.createElement("div",{className:"p-flexpane_header__primary"},o.a.createElement("div",{className:"p-flexpane_header__primary_content"},e),m&&o.a.createElement(h.c,{delay:g,tip:v,position:p?"bottom":"top"},o.a.createElement(u.a,Object(r.a)({"aria-label":b.t("View options",{fallbackHash:"a09052c3b42360a3492e17c37d74b78324785541",fallbackHashNs:"mentions"}),className:"p-flexpane_header__control",icon:s,href:n,onClick:a},_))),o.a.createElement(h.c,{delay:g,tip:b.t("Close",{fallbackHash:"1f863990d6ec5b308a2330f10e271f087ccf0bf7"}),position:p?"bottom-right":"top-right"},o.a.createElement(u.a,Object(r.a)({"aria-label":b.t("Close Right Sidebar"),className:"p-flexpane_header__control",onClick:this.props.closeFlexpane,"data-qa":"close_flexpane",icon:"times",ref:this.closeButtonRef},_)))),f&&o.a.createElement("div",{className:"p-flexpane_header__secondary"},f))}}FlexpaneHeader.defaultProps={children:null,className:void 0,closeFlexpane:s.a,onOptionsClick:void 0,optionsHref:void 0,optionsIconType:"filters",optionsTooltipText:void 0,renderSecondary:s.a,isIAP1Enabled:!1};var _=Object(c.b)(null,{closeFlexpane:p.a})(e=>{var{forwardedRef:t}=e,a=Object(n.a)(e,["forwardedRef"]);return o.a.createElement(FlexpaneHeader,Object(r.a)({ref:t},a))});t.a=o.a.forwardRef((e,t)=>o.a.createElement(_,Object(r.a)({forwardedRef:t},e)))},"53Ys":function(e,t,a){"use strict";var n=a("rePB"),r=a("Ff2n"),s=a("aK/h"),i=a("q1tI"),o=a.n(i),c=a("XfeM"),l=a("dhvi"),d=a("brL+"),p=a("1hAG"),u=a("rWF5"),h=a("g5qt"),m=a("5mKg"),b=a("kOzZ"),_=a("negh"),g=a("XHGt"),f=a("aolG"),v=a("yg0S"),O=a("ifKl"),y=a("ANjH"),C=a("nNoG"),j=a("vmJv"),E=a("za+y"),k=a("XLFM"),S=a("vPEJ"),I=a("QkOX"),w=a("TSYQ"),T=a.n(w),N=a("XL7r"),P=a("O5cs"),A=a("IRvZ"),M=a("G4ux"),x=a("Fdc0"),R=a("wfE8"),D=a("3C31"),F=Object(c.b)("Adds app to channel by member id",function(e,t){var{memberId:a,channelId:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(a&&n){var r=Object(M.d)(t(),a);Object(x.jb)(r)?e(Object(D.a)({appUserId:a,channelId:n,referringEventId:"INVITE_TO_CHANNEL_DIALOG",referringUiContext:{action:"IMPRESSION"}})):e(Object(R.L)({channelId:n,users:a}))}});F.meta={name:"addAppToChannelByMemberId",key:"actionsAddAppToChannelByMemberIdAddAppToChannelByMemberId",description:"Adds app to channel by member id"},F.propTypes={memberId:s.default.string.isRequired,channelId:s.default.string.isRequired};var L=F,U=a("Lev8"),B=a("t85p"),H=a("A8q6"),W=a("NB3s");function q(){var{image:e,title:t,description:a,children:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.a.createElement(o.a.Fragment,null,o.a.createElement(W.d,null,o.a.createElement(W.i,{height:300,width:500,alt:"",src:e}),o.a.createElement(W.j,{title:t}),o.a.createElement(W.e,null,o.a.createElement("p",null,a))),n)}var G=a("wx14"),K=a("8W09");function V(e){var{tutorialStatus:t,actions:a}=e;return o.a.createElement(K.a,null,o.a.createElement("span",null,t),o.a.createElement(W.g,null,a.map(e=>{var{label:t}=e,a=Object(r.a)(e,["label"]);return o.a.createElement(k.d,Object(G.a)({},a,{key:t}),t)})))}V.defaultProps={tutorialStatus:"",actions:[]};var z=V,Y=new C.b("step_tutorial");var Q=new C.b("apps_browser");var X=Object(g.b)(null,e=>Object(y.b)({closeModal:l.a},e))(function(e){var{closeModal:t}=e,a=Object(i.useMemo)(()=>{var e=[{id:"common_tasks",image:cdn_url+"/80588/img/app_space_tutorial_illustration_01.jpg",title:Q.t("Common tasks, done in a jiffy"),description:Q.t("Approve requests, schedule meetings, share documents, and more \u2014 all inside Slack.")},{id:"connect_tools",image:cdn_url+"/80588/img/app_space_tutorial_illustration_02.jpg",title:Q.t("Connect the tools you already use"),description:Q.t("Slack works with the systems you use, for everything from accounting to customer support.")},{id:"discover_ways",image:cdn_url+"/80588/img/app_space_tutorial_illustration_03.jpg",title:Q.t("Discover new ways to work"),description:Q.t("Poll your workspace, send kudos, and automate the coffee run. Have a better workday with apps.")}],a=function(){var{steps:e=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var{index:t,navigate:a,end:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(t<0||t>=e.length)){var r=0===t,s=t===e.length-1,i=[],o=Y.t("{current} of {total}",{current:t+1,total:e.length});return r||i.push({type:"outline",label:Y.t("Back"),onClick:()=>a(e[t-1].id)}),i.push({label:s?Y.t("Done"):Y.t("Next"),onClick:s?n:()=>a(e[t+1].id)}),{step:e[t],footer:{tutorialStatus:o,actions:i}}}}}({steps:e});return e.reduce((e,n,r)=>(e[n.id]={render:function(){var{switchPane:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a({index:r,navigate:e,end:t});return o.a.createElement(q,n.step,o.a.createElement(z,n.footer))}},e),{})},[t]);return o.a.createElement(H.b,{defaultPane:"common_tasks",isOpen:!0,invertCloseButton:!0,panes:a,closeModal:t})}),J=a("F+Fq"),Z=a("s0HP"),$=Object(c.b)("Opens the apps tutorial modal",(e,t)=>{var a=t(),n=Object(b.a)({state:a});Object(B.m)(a,"feature_m11n_apps_browser")?(n.track("APP_TUTORIAL_VIEW",null),Object(N.k)(a,"seen_app_space_tutorial")||e(Object(Z.b)({pref:"seen_app_space_tutorial",value:!0})),e(Object(l.e)({element:o.a.createElement(X),isStackable:!0}))):Object(J.a)()});$.meta={name:"openAppsTutorialModal",key:"actionsOpenAppsTutorialModalOpenAppsTutorialModal",description:"Opens the apps tutorial modal"},$.propTypes=null;var ee=$,te=a("uksu"),ae=a("eR+M"),ne=a("AjwY"),re=a("eK0w"),se=a("VBRD"),ie=a("cD5Y"),oe=a("M4HD"),ce=a("V/As"),le=a("yywf"),de=a("od5y"),pe=a("llxT"),ue=new C.b("apps_browser"),he=e=>{var{app:t,appCanBeAdded:a,className:n,featureAppBrowserViewInstall:r,onClick:s,onMouseLeave:i,"data-app_index":c}=e,l=ue.t("Install"),d=ue.t("Install app",{fallbackHash:"fd6c3ebf7befca9f8208f86c76e4d4180303745c"});"tutorial_app"===t.app_id?(l=ue.t("Start"),d=ue.t("Start app tutorial",{fallbackHash:"952f375412e89ff213a8aca383d18e5691354347"})):a?(l=ue.t("Add"),d=ue.t("Add app",{fallbackHash:"61cc55aa0453184734c3fa0b621eda6fa874bd83"})):t.is_installed&&(l=ue.t("View"),d=ue.t("View app",{fallbackHash:"69bd4ef9fbd0894a22759c3766b859defbdedbc8"}));var p=Object(ce.b)(t,72);return o.a.createElement("div",{className:n,onClick:s,onMouseLeave:i,"data-app":!0,"data-app_index":c,"data-is_installed":t.is_installed,"data-app_id":t.app_id,"data-bot_id":t.bot_id,"data-bot_user_id":t.bot_user_id,"data-can_app_be_added":a||null,"data-qa":"apps_browser_row",role:"presentation"},o.a.createElement("img",{className:"p-apps_browser__app_icon",src:p,alt:t.name}),o.a.createElement("div",{className:"p-apps_browser__app_info"},o.a.createElement("div",{className:"p-apps_browser__app_name"},o.a.createElement("strong",null,t.name)),o.a.createElement("div",{className:"p-apps_browser__app_description"},Object(le.a)(t.short_description,(e,t)=>o.a.createElement("strong",{key:t},e)))),r?(e=>o.a.createElement(pe.a,{className:"p-apps_browser__enter_button","aria-label":e,key:"enter-or-preview"},o.a.createElement(de.b,{type:"enter",inline:!0}),o.a.createElement("span",null,e)))(l):o.a.createElement(k.d,{"data-qa":"apps_browser_row_action",className:"p-apps_browser__app_action",type:"outline","aria-label":d},l))};he.defaultProps={onClick:void 0,onMouseLeave:void 0};var me=Object(g.b)((e,t)=>{var{addAppsVariant:a,app:n,channelId:r}=t;return{appCanBeAdded:a&&Object(oe.a)(e,n,r),featureAppBrowserViewInstall:Object(B.m)(e,"feature_app_browser_view_install")}})(he),be=a("0f2Y"),_e=a("MnCE"),ge=a("RAhH"),fe=(a("qqis"),new C.b("apps_browser")),ve=e=>{var{apps:t,isFirefoxAndWindows:a,isFirefoxAndMac:n,isInternetExplorer:r,featureM11nAppsBrowser:s}=e;if(!s)return null;if(t.length>10)return null;var c=[...t,...Array(10-t.length)],l=c.map((e,t)=>{var s=!e,i="limit-apps-".concat(t),c="bottom";0===t?c="bottom-left":9===t&&(c="bottom-right");var l=T()("p-apps_browser__app_limit_meter__apps","inline_block",{"p-apps_browser__app_limit_meter__blank_app_box":s,is_ff_and_win:a,is_ff_and_mac:n,is_ie:r});return o.a.createElement(ge.c,{key:i,tip:s?fe.t("Try a new app"):e.name,position:c,offsetY:17},o.a.createElement("div",{className:l,"data-qa":s?"app_limit_meter__blank_app_box":"app_limit_meter__app_box"},!s&&o.a.createElement("img",{className:"p-apps_browser__app_limit_meter__app_icon align_top",src:Object(ce.b)(e,24),alt:""})))}),d=c.map((e,t)=>{if(0===t)return null;var a="color-meter-".concat(t),n=!e,r=T()({first:1===t,meter_first_green:t<4&&!n,meter_second_green:4===t&&!n,meter_third_green:5===t&&!n,meter_fourth_green:6===t&&!n,meter_yellow:7===t&&!n,meter_orange:8===t&&!n,meter_red:9===t&&!n,on:!n,off:n&&1!==t});return o.a.createElement("li",{className:r,key:a})}),p=T()("p-apps_browser__app_limit_meter__color_meter",{is_ff_and_win:a});return o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"p-apps_browser__app_limit_meter__apps_container"},l),o.a.createElement("ul",{className:p},d))};ve.defaultProps={apps:[],isFirefoxAndWindows:!1,isFirefoxAndMac:!1,isInternetExplorer:!1,featureM11nAppsBrowser:!1};var Oe=Object(_e.a)(ve),ye=new C.b("apps_browser");class app_limit_meter_container_AppLimitMeterContainer extends i.Component{constructor(e){super(e),this.limitMeterClogId="",this.firstSelectableAppIndex=e.hasSeenAppSpaceTutorial?1:0,this.appLimitMeterClogPayload={},this.cloggedLimitMeterImpression=!1,this.showLimitMeter=!1,this.handleAppLimitMeterClickClog=this.handleAppLimitMeterClickClog.bind(this)}handleAppLimitMeterClickClog(){var{clogger:e}=this.props;"GROWTH_PRICING"===this.LimitMeterClogId&&(this.appLimitMeterClogPayload.contexts.ui_context.action="click",e.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload))}render(){var e=this.props.installedApps.length,{isFirefoxAndWindows:t,isFirefoxAndMac:a,isInternetExplorer:n,clogger:r,featureM11nAppsBrowser:s,isShowingDefaultAppCategories:i}=this.props;if(!e||e>10||!i)return null;var c,l,d,p,u,h="num_of_apps=".concat(e),m=!!e,b="limit-meter-".concat(A.f);if(this.showLimitMeter=m,!this.showLimitMeter)return null;this.firstSelectableAppIndex=0;var _=T()("p-apps_browser__app_limit_meter",{is_ff_and_mac:a});return e<6?(c=ye.t("Add apps to get things done"),d="/apps?utm_source=in-prod&utm_medium=inprod-link_see_app_suggestions-apps_browser-click",this.LimitMeterClogId="UPGRDEXP_LIMIT_APPSPACE",p="link_app_directory",l=ye.rt("Schedule meetings, share docs, and more \u2014 straight from Slack. <a>See app suggestions</a>",null,e=>{var{tag:t,text:a}=e;return"a"!==t?null:o.a.createElement(be.a,{href:d,target:"new","data-app":!0,"data-app_index":this.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":this.LimitMeterClogId,"data-clog-ui-element":p,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":h,onClick:this.handleAppLimitMeterClickClog},a)})):e<10?(c=ye.t("Upgrade for unlimited apps"),d=Object(ne.j)({entryPoint:"app_limit_meter"}),this.LimitMeterClogId="GROWTH_PRICING",p="pricing_link",u=T()({hidden:this.props.isMacSsbBuild}),l=ye.rt("Your team\u2019s up and running \u2014\xa0they\u2019re using {numOfApps} apps already. On a paid plan you can add as many as you\u2019d like. <a>See upgrade options</a>",{numOfApps:e},e=>{var{tag:t,text:a}=e;return"a"!==t?null:o.a.createElement(be.a,{className:u,href:d,target:"new","data-app":!0,"data-app_index":this.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":this.LimitMeterClogId,"data-clog-ui-element":p,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":h,onClick:this.handleAppLimitMeterClickClog},a)})):(c=ye.t("Upgrade to add more apps"),d=Object(ne.j)({entryPoint:"app_limit_meter"}),this.LimitMeterClogId="GROWTH_PRICING",p="pricing_link",u=T()({hidden:this.props.isMacSsbBuild}),l=ye.rt("Your team\u2019s already using 10 apps, the max you can use with the free version of Slack. Upgrade to a paid plan to add as many apps as you\u2019d like. <a>See upgrade options</a>",null,e=>{var{tag:t,text:a}=e;return"a"!==t?null:o.a.createElement(be.a,{className:u,href:d,target:"new","data-app":!0,"data-app_index":this.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":this.LimitMeterClogId,"data-clog-ui-element":p,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":h,onClick:this.handleAppLimitMeterClickClog},a)})),this.appLimitMeterClogPayload={num_of_apps:e,contexts:{ui_context:{step:"apps_browser",action:"impression",ui_element:p}}},this.cloggedLimitMeterImpression||("GROWTH_PRICING"===this.LimitMeterClogId?(r.track(this.LimitMeterClogId,this.appLimitMeterClogPayload),r.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload)):(r.track(this.LimitMeterClogId,this.appLimitMeterClogPayload),r.track("APP_CLICK_LINK_SEE_APP_SUGGESTIONS_IN_APPS_BROWSER",{contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_see_app_suggestions"}}})),this.cloggedLimitMeterImpression=!0),o.a.createElement("div",{className:"p-apps_browser__app_limit_meter__container",key:b},o.a.createElement("div",{className:_,"data-qa":"apps_browser_app_limit_meter"},o.a.createElement("p",{className:"p-apps_browser__app_limit_meter__heading very_small_bottom_margin"},o.a.createElement("b",null,c)),o.a.createElement("p",{className:"p-apps_browser__app_limit_meter__paragraph","data-qa":"apps_browser_app_limit_meter_paragraph"},l),o.a.createElement(Oe,{apps:this.props.installedApps,isFirefoxAndWindows:t,isFirefoxAndMac:a,isInternetExplorer:n,featureM11nAppsBrowser:s})))}}app_limit_meter_container_AppLimitMeterContainer.defaultProps={isInternetExplorer:!1,isFirefoxAndMac:!1,isFirefoxAndWindows:!1,isMacSsbBuild:!1,installedApps:[],isShowingDefaultAppCategories:!0,featureM11nAppsBrowser:!1,hasSeenAppSpaceTutorial:!1};var Ce=Object(g.b)(e=>{var t=Object(u.g)();return{installedApps:Object(P.j)(e),isInternetExplorer:"ie"===t,isFirefoxAndWindows:"firefox"===t&&Object(u.E)(),isFirefoxAndMac:"firefox"===t&&Object(u.q)(),isMacSsbBuild:Object(h.U)(),clogger:Object(b.a)({state:e}),featureM11nAppsBrowser:Object(B.m)(e,"feature_m11n_apps_browser")}},null)(app_limit_meter_container_AppLimitMeterContainer);function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ke=new C.b("apps_browser"),Se={addAppToChannelByMemberId:O.a,hasSeenAppSpaceTutorial:!1,channelId:void 0,nextCursor:void 0,loadMoreApps:O.a,openAboutApp:O.a,openAppsTutorialModal:O.a,closeModal:O.a,getChannelMembershipInfoForUsers:O.a,clientTheme:"light"},Ie=()=>({name:ke.t("What are apps?"),short_description:ke.t("A quick look at how apps in Slack can streamline your work"),icons:{image_84:cdn_url+"/80588/img/tutorial@2x.png"},app_id:"tutorial_app",bot_id:"",bot_user_id:"",is_installed:!1});class apps_browser_results_AppsBrowserResults extends i.Component{constructor(e){super(e),this.isPaginating=!1,this.renderRow=this.renderRow.bind(this),this.isFocusableItem=this.isFocusableItem.bind(this),this.paginate=this.paginate.bind(this),this.handleItemClick=this.handleItemClick.bind(this)}componentDidUpdate(e){var{results:t,addAppsVariant:a}=this.props;if(t!==e.results&&a){var n=t.reduce((e,t)=>("app"===t.type&&t.bot_user_id&&e.push(t.bot_user_id),e),[]);this.props.getChannelMembershipInfoForUsers({channelId:this.props.channelId,userIds:n})}}paginate(){this.shouldPaginate()&&this.loadMoreApps()}shouldPaginate(){return!!this.props.nextCursor}loadMoreApps(){this.isPaginating||(this.isPaginating=!0,this.props.loadMoreApps().then(()=>{this.isPaginating=!1}))}isFocusableItem(e){var{index:t}=e,{type:a}=this.props.results[t]||{};return a===A.h.APP||a===A.h.APP_LIMIT_METER||a===A.h.APP_TUTORIAL}handleItemClick(e){var t=e.currentTarget.children[0].dataset;t.app_id&&this.selectApp(t)}openAboutApp(e){this.props.openAboutApp({appId:e.app_id,serviceId:e.bot_id,memberId:e.bot_user_id})}selectApp(e){var{clogger:t,channelId:a}=this.props,n={app_id:e.app_id,bot_id:e.bot_id,is_from_search:this.props.isShowingDefaultAppCategories?"0":"1",contexts:{core:{app_id:e.app_id,bot_id:e.bot_id}}};if("tutorial_app"===e.app_id)this.props.openAppsTutorialModal();else if("app_limit_meter"===e.app_id){var r=parseInt(e.clogParams.split("=")[1],10);"pricing_link"===e.clogUiElement?(Object(m.P)(this.props.team,Object(ne.j)({entryPoint:"apps_browser_results"})),t.track("GROWTH_PRICING",{num_of_apps:r,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}}),t.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:r,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}})):(Object(m.P)(this.props.team,"/apps"),t.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:r,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_app_directory"}}}))}else"true"===e.can_app_be_added?(this.props.closeModal(),this.props.addAppToChannelByMemberId({memberId:e.bot_user_id,channelId:a})):"true"===e.is_installed?(this.openAboutApp(e),t.track("APP_INDEX_VIEW_CLICK",n)):(Object(m.P)(this.props.team,"/apps/".concat(e.app_id,"?utm_source=in-prod&utm_medium=inprod-btn_app_install-index-click")),t.track("APP_INDEX_INSTALL_CLICK",n),t.track("APP_CLICK_BTN_APP_INSTALL_IN_INDEX",Ee({},n,{contexts:Ee({},n.contexts,{ui_context:{step:"index",action:"click",ui_element:"btn_app_install"}})})))}renderRow(e,t){var{key:a}=t,n=this.props.results[e];switch(n.type){case A.h.LOADING:return o.a.createElement("div",{style:{height:62}},o.a.createElement(ie.a,{size:"jumbo"}));case A.h.APP_LIMIT_METER:var{isShowingDefaultAppCategories:r,hasSeenAppSpaceTutorial:s}=this.props,i={isShowingDefaultAppCategories:r,hasSeenAppSpaceTutorial:s};return o.a.createElement(Ce,i);case A.h.CATEGORY:var c=n.display_name;return o.a.createElement("div",{className:T()("p-apps_browser__category_header",{margin_top_150:!(0===e)}),"data-category_header":"true","data-qa":"apps_browser__category_header"},c);case A.h.APP_TUTORIAL:return o.a.createElement(me,{key:a,addAppsVariant:this.props.addAppsVariant,app:Ie(),className:"p-apps_browser__app p-apps_browser__app--tutorial","data-app_index":e});case A.h.APP:return o.a.createElement(me,{key:a,addAppsVariant:this.props.addAppsVariant,channelId:this.props.channelId,app:n,className:"p-apps_browser__app","data-app_index":e});default:return o.a.createElement(o.a.Fragment,null)}}render(){var{clientTheme:e,results:t,keys:a,searchInput:n}=this.props;if(!t.length&&n)return o.a.createElement("section",{key:"no-results",className:"p-apps_browser__no_results","data-qa":"apps_browser__no_results"},ke.t("There are no apps matching"),"\xa0",o.a.createElement("strong",null,n));var r=T()("p-apps_browser__list_container",{"p-apps_browser__list_container--loading":0===a.length,["p-apps_browser__list_container--loading--".concat(e)]:0===a.length&&"light"!==e});return o.a.createElement(se.a,null,e=>{var{width:t,height:n,measureRef:s}=e;return o.a.createElement("div",{className:r,"data-qa":"apps_browser__results_list",ref:s},o.a.createElement(re.a,{width:t,height:Math.floor(n),keys:a,rowRenderer:this.renderRow,onItemClick:this.handleItemClick,loadPost:this.paginate,loadAround:this.paginate,isFocusableItem:this.isFocusableItem,hideHiddenStopTabs:!0}))})}}apps_browser_results_AppsBrowserResults.defaultProps=Se;var we=Object(g.b)(e=>({clogger:Object(b.a)({state:e}),hasSeenAppSpaceTutorial:Object(N.k)(e,"seen_app_space_tutorial"),searchInput:Object(P.s)(e),results:Object(P.r)(e),keys:Object(P.o)(e),nextCursor:Object(P.p)(e),isShowingDefaultAppCategories:Object(P.n)(e),clientTheme:Object(U.c)(e)}),e=>Object(y.b)({openAboutApp:te.b,openAppsTutorialModal:ee,closeModal:l.a,getChannelMembershipInfoForUsers:ae.g,loadMoreApps:E.e,addAppToChannelByMemberId:L},e))(apps_browser_results_AppsBrowserResults),Te=(a("x4cI"),new C.b("apps_browser")),Ne={channelId:void 0,addAppsVariant:!1,team:void 0,fetchDefaultApps:O.a,resetSearch:O.a};class apps_browser_v2_AppsBrowser extends i.Component{constructor(e){super(e),this.handleAppDirectoryButtonClick=this.handleAppDirectoryButtonClick.bind(this),this.renderHeader=this.renderHeader.bind(this)}componentDidMount(){this.props.fetchDefaultApps()}componentWillUnmount(){this.props.resetSearch()}handleAppDirectoryButtonClick(){var{clogger:e}=this.props;Object(m.P)(this.props.team,"/apps?utm_source=in-prod&utm_medium=inprod-link_app_directory-index-click"),e.track("APP_INDEX_VIEW_APP_DIRECTORY_CLICK"),e.track("APP_CLICK_LINK_APP_DIRECTORY_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_app_directory"}}})}renderHeader(){var e,{addAppsVariant:t,channelId:a}=this.props;return e=t&&a?o.a.createElement("h2",{className:"overflow_hidden"},Te.rt("Add apps to {channelName}",{channelName:o.a.createElement(S.a,{channelId:a,inline:!0,className:"overflow_ellipsis"})})):o.a.createElement("h2",null,Te.t("Browse Apps")),o.a.createElement("div",{className:"p-apps_browser__filter_header","data-qa":"apps_browser__header"},e,o.a.createElement(k.d,{className:"p-apps_browser__browse_apps flex_shrink_none","data-qa":"apps_browser__app_directory_button",size:"large",type:"outline",onClick:this.handleAppDirectoryButtonClick},Te.t("View App Directory")))}render(){var{addAppsVariant:e,channelId:t,team:a}=this.props,n={addAppsVariant:e,channelId:t,team:a};return o.a.createElement("div",{className:"p-apps_browser","data-qa":"apps_browser"},o.a.createElement("div",{className:"p-apps_browser__filter_container"},this.renderHeader(),o.a.createElement(I.a,null)),o.a.createElement(we,n))}}apps_browser_v2_AppsBrowser.defaultProps=Ne;var Pe=Object(g.b)(e=>{var t=Object(p.d)(e);return{channelId:Object(j.a)(e),team:t,clogger:Object(b.a)({state:e})}},e=>Object(y.b)({fetchDefaultApps:E.c,resetSearch:E.h},e))(apps_browser_v2_AppsBrowser),Ae=a("4M+g"),Me=a("6kok"),xe=new C.b("apps_browser");var Re=Object(g.b)(e=>({tutorialSeen:Object(N.k)(e,"seen_app_space_tutorial"),clogger:Object(b.a)({state:e})}),e=>Object(y.b)({openAppsTutorial:ee},e))(function(e){var{tutorialSeen:t,openAppsTutorial:a,clogger:n}=e,r=Object(i.useCallback)(()=>{n.track("APP_INDEX_MANAGE_CLICK",null),n.track("APP_CLICK_LINK_MANAGE_APPS_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_manage_apps"}}})},[n]);return o.a.createElement("div",{className:"p-apps_browser_links"},o.a.createElement(pe.a,{className:"p-apps_browser_links__link",href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-link_manage_apps-index-click",onClick:r,"data-qa":"apps_browser_manage_apps"},o.a.createElement(de.b,{type:"cog-o",inline:!0,className:"p-apps_browser_links__link_icon"}),xe.t("Manage apps...")),t&&o.a.createElement(pe.a,{className:"p-apps_browser_links__link","data-qa":"apps_browser_view_tutorial",onClick:a},o.a.createElement(de.b,{type:"lightbulb-o",inline:!0,className:"p-apps_browser_links__link_icon"}),xe.t("What are apps?")))}),De=new C.b("apps_browser");function Fe(e){var{addAppsVariant:t,channelName:a,clogger:n}=e,r=t&&a?De.t("Add apps to {channelName}",{channelName:a}):De.t("Browse Apps");return o.a.createElement(f.a,{showGoButton:!1,showCancelButton:!1,onCancel:()=>{n.track(_.EventId.APP_BROWSER_CLOSE,{contexts:{ui_context:{step:_.UiStep.APPS_BROWSER,action:_.UiAction.CLICK,ui_properties:{element_type:_.ElementType.X,element_name:"app_browser_fullscreen_modal_close"}}}})},contentLabel:r,"data-qa":"apps_browser_modal",modalClasses:"p-apps_browser_modal"},o.a.createElement(Re,null),o.a.createElement(v.a,null,o.a.createElement("div",{className:"p-apps_browser_container"},o.a.createElement(Pe,e))))}Fe.defaultProps={addAppsVariant:!1,channelName:"",clogger:{}};var Le=Object(g.b)(e=>{var t=Object(j.a)(e),a=Object(b.a)({state:e});if(!t)return{};var n=Object(Ae.e)(e,t);return{channelName:Object(Me.w)(e,n,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),clogger:a}})(Fe),Ue=a("1tsX"),Be=a("97va");function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function We(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?He(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var qe=Object(c.b)("Opens the apps browser modal",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{referringEventId:n,referringUiContext:s,channelId:i}=a,c=Object(r.a)(a,["referringEventId","referringUiContext","channelId"]),g=Object(Ue.a)(t());!c.addAppsVariant&&g&&e(Object(Be.a)());var f=Object(b.a)({getState:t});f.track(_.EventId.APP_INDEX_OPEN,null),c.addAppsVariant&&n&&f.track(_.EventId.APPS_BROWSER_ADD_TO_CHANNEL,{contexts:{ui_context:{action:_.UiAction.IMPRESSION},referring_ui_context:s,core:{channel_id:i}},referring_event_id:n});var v=Object(d.b)(t()),O=Object(p.i)(t(),v),y=Object(m.s)(O),C=Object(m.D)(O),j=Object(u.g)(),E={isUnpaid:!C&&!y,isInternetExplorer:"ie"===j,isFirefoxAndWindows:"firefox"===j&&Object(u.E)(),isFirefoxAndMac:"firefox"===j&&Object(u.q)(),isMacSsbBuild:Object(h.U)()};e(Object(l.e)({element:o.a.createElement(Le,We({},c,{},E))}))});qe.meta={name:"openAppsBrowserModal",key:"actionsOpenAppsBrowserModalOpenAppsBrowserModal",description:"Opens the apps browser modal"},qe.propTypes={addAppsVariant:s.default.bool,eventId:s.default.number,uiContext:s.default.object,channelId:s.default.string};t.a=qe},"59b6":function(e,t,a){"use strict";a.d(t,"a",function(){return d}),a.d(t,"b",function(){return p});var n=a("nNoG"),r=a("AFNo"),s=a("Fdc0"),i=a("+yrr"),o=a("OX5w"),c=a("7Ztl"),l=new n.b("calls"),d=Object(r.e)(e=>{var t=e.activeCall.incomingInviterUserId&&Object(s.W)(e,e.activeCall.incomingInviterUserId),a=e.activeCall.name,n=e.activeCall.conversationId,r=e.activeCall.hasJoined,c=Object(i.v)(e),d=c.length,p=Object(o.d)(e),u=Object(i.h)(e);if(a&&r)return a;if(p)return l.t("{inviterName} is calling you",{inviterName:t});if(n&&!d&&u.length){var h=Object(s.W)(e,u[0]),m=u.length-1;return u.length>1?l.t("Calling {namedInvitedUser} and {remainingInvitedUserCount,plural,=1{# other person}other{# other people}}",{namedInvitedUser:h,remainingInvitedUserCount:m,fallbackHash:"1f193c850fe96a988a352bb5c38247343e49f235"}):l.t("Calling {namedInvitedUser}",{namedInvitedUser:h})}if(!d)return l.t("Slack call, waiting for others to join");var b=Object(s.W)(e,c[0]),_=c.length-1;return c.length>1?l.t("Slack call with {namedPeer} and {remainingJoinedPeers,plural,=1{# other person}other{# other people}}",{namedPeer:b,remainingJoinedPeers:_,fallbackHash:"6f6600f1cf4eef0e7f75926baabfc8baf445c5c8"}):l.t("Slack call with {namedPeer}",{namedPeer:b})});d.meta={name:"getCallWindowTitle",key:"callsReduxSelectorsGetCallWindowTitleGetCallWindowTitle"};var p=Object(r.e)(e=>{var t=Object(c.c)(e),a=t&&t.incomingInvite&&Object(s.W)(e,t.incomingInvite.userId);return a?l.t("{inviterName} is calling you",{inviterName:a}):l.t("Incoming call")});p.meta={name:"getIncomingCallAriaLabelForBrowser",key:"callsReduxSelectorsGetCallWindowTitleGetIncomingCallAriaLabelForBrowser"}},"5DNE":function(e,t,a){},"5NHF":function(e,t,a){},"5SxQ":function(e,t,a){},"5g6K":function(e,t,a){},"5iqv":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("aK/h"),i=a("TSYQ"),o=a.n(i),c=a("XHGt"),l=a("GbAX"),d=a("V18M"),p=a("Smdl"),u=a("tbBR"),h=a("aLpA"),m=a("wx14"),b=a("zmn3"),_=a("ifKl"),g=a("UXvI"),f=a("tn36"),v=a("vFlG"),O=a("t85p");function y(e,t){var a=Object(O.m)(e,"feature_fuzzy_match"),n=Object(v.a)(t,"metadata.query_rewriting.spell_correction_context.method");return a&&n}var C=a("9/ob"),j=a("yHhI"),E=a("Mj3f"),k=a("Szmb"),S=a("XfeM"),I=a("kyuO"),w=a("7dYf"),T=a("Rjjz"),N=a("nW5E"),P=Object(S.b)("Clog a search open event using data from redux",function(e,t){var{messageSort:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(j.a)({getState:t}).info("IMPROVED_SEARCH","Set message sort method. messageSort: ".concat(a)),e(Object(w.f)({pref:"search_sort",value:a})),e(Object(T.d)({module:"messages",reason:"search-messages-sort-changed"})),e(Object(I.k)({method:"set_sort_".concat(a===N.f.relevantMessages?"score":"timestamp")}))});P.meta={name:"setMessageSort",key:"actionsUniversalSearchSetMessageSortSetMessageSort",description:"Clog a search open event using data from redux"},P.propTypes={method:s.default.string};var A=a("1hAG"),M=a("JrUZ"),x=a("quKg"),R=a("qgNY"),D=a("1F8+"),F=a("HvGc"),L=a("g5qt"),U=a("5mKg"),B=a("nNoG"),H=a("MREy"),W=a("XLFM"),q=a("od5y"),G=a("j4mf"),K=a("U28S");function V(e){return e>=1e4?Object(K.a)(e,{precision:4,decimal_places:0,lowercase:!0}):Object(G.a)(e)}var z=a("ICFZ"),Y=a("HXD8"),Q=a("x91h"),X=a("qrk6"),J=a("A/mR");function Z(e,t){var a=e[0]&&e[0].ts;if(!a)return"";var n=Object(J.l)(a,{returnMoment:!0});return Object(J.i)(n,{shortenMonth:t,excludeYear:Object(J.h)(a)})}var $=a("Xthn"),ee=a("fdJE"),te=a("XL7r"),ae=a("rsVu"),ne=a("k2C/"),re=a("6kok"),se=a("4M+g");function ie(e,t){return"string"==typeof t?Object(se.e)(e,t,!0):Object(re.pb)(t)?Object(se.e)(e,t.id,!0):(t&&t.id&&Object(se.e)(e,t.id,!0),t)}var oe=new B.b("search"),ce=/[\ue000\ue001]/g;var le=a("gLeh"),de=a("tjIJ"),pe=a("Zr7G"),ue=a("Go8C"),he=a("Ff2n"),me=a("3dqR"),be=a("y7mK"),_e=a("Uk1S"),ge=(a("L5SX"),new B.b("search"));function fe(e){var{theme:t,featureTinyspeck:a}=e;return a?r.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},r.a.createElement("strong",null,"Message Group failed to render. "),"Please go to #triage-search and"," ",r.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org."):r.a.createElement("div",{className:"c-message_group"},r.a.createElement("div",{className:"c-search_message c-search_message--".concat(t)},r.a.createElement("div",{className:"c-search_message__gutter"},r.a.createElement(me.c,{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),r.a.createElement("div",{className:"c-search_message__content"},r.a.createElement("div",{className:"c-search_message__content_header"},r.a.createElement(be.a,{userId:"",isInteractive:!0})),r.a.createElement("div",{className:"c-search_message__body sk_foreground_max"},ge.t("There was an error displaying this message.")))))}fe.defaultProps={featureTinyspeck:!1,theme:"light"};var ve=Object(c.b)(e=>{var t="",a=!1;try{t=Object(_e.a)(e),a=Object(O.m)(e,"feature_tinyspeck")}catch(n){}return{theme:t,featureTinyspeck:a}})(fe),Oe=a("rePB"),ye=a("owWc"),Ce=a("jLdI"),je=a("UF3u"),Ee=a("0f2Y"),ke=a("vPEJ"),Se=a("llxT"),Ie=new B.b("search");function we(e){var{user:t,theme:a,ts:n,channel:s,featureTinyspeck:i}=e;return i?r.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},r.a.createElement("strong",null,"Message ",n," in ",s.id||"[Channel id missing]"," failed to render."," "),"Please go to #triage-search and"," ",r.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org."):r.a.createElement("div",{className:"c-search_message c-search_message--".concat(a)},r.a.createElement("div",{className:"c-search_message__gutter"},r.a.createElement(me.c,{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),r.a.createElement("div",{className:"c-search_message__content"},r.a.createElement("div",{className:"c-search_message__content_header"},r.a.createElement(be.a,{userId:t||"",isInteractive:!0})),r.a.createElement("div",{className:"c-search_message__body sk_foreground_max"},Ie.t("There was an error displaying this message."))))}we.defaultProps={featureTinyspeck:!1,user:"",ts:"[Message timestamp (ts) missing]",channel:{},theme:"light"};var Te=Object(c.b)(e=>{var t="",a=!1;try{t=Object(_e.a)(e),a=Object(O.m)(e,"feature_tinyspeck")}catch(n){}return{theme:t,featureTinyspeck:a}})(we),Ne=a("lCmp"),Pe=a("Bekf"),Ae=a("B/i4"),Me=a("cErB"),xe=a("bA/L"),Re=Object(c.b)((e,t)=>{var a,{bot_id:n,bot_profile:r,thread_ts:s,teamId:i,ts:o,channel:c,replies:l,permalink:d,blocks:p,attachments:u}=t,h=Object(_e.a)(e),m=Object(A.d)(e);m&&(a=m.domain);var b=Object(Ne.a)(t.extracts,e=>e.truncated_head||e.truncated_tail),_=t.text.length>200,g=!(!t.attachments||!t.attachments.length),f=!!t.text,v=b&&_||g&&f;(p||Object(Ne.a)(u,"blocks"))&&(v=!1);var y=Object(A.d)(e).id!==i,C="";if(l&&l.length){var j=l[0].ts,{hostname:E}=Object(Me.k)(d);C="https://".concat(E).concat(Object(Ae.a)({channelId:c.id,ts:j,threadTs:o}))}return{hasText:f,isCrossWorkspace:y,botId:n,botProfile:r,threadTs:s,theme:h,permalinkToMessageThread:C,hasAdHocSender:Object(Pe.a)(t),featureTinyspeck:Object(O.m)(e,"feature_tinyspeck"),canBeTruncated:v,teamDomain:a,channelName:Object(re.w)(e,c),wysiwygSearchHighlightingEnabled:"treatment"===Object(x.c)(e,"wysiwyg_search_highlighting")}},null)(xe.a),De="IMPROVED_SEARCH";var Fe=class protected_search_message_ProtectedSearchMessage extends n.PureComponent{constructor(){super(),this.state={hasError:!1}}componentDidCatch(e,t){this.props.telemeter.count("search_ui_messages_result_message_render_error"),this.props.logger.error(De,"Error caught by ProtectedSearchMessage ".concat(t.componentStack),e),this.setState(()=>({hasError:!0}))}render(){return this.state.hasError?r.a.createElement(Te,this.props):r.a.createElement(Re,this.props)}};a("zXku");function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(a),!0).forEach(function(t){Object(Oe.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Be=new B.b("search"),He={workspaceName:"",index:null,clogSearchMessageClick:_.a,clogMessageClick:_.a};class message_group_SearchMessageGroup extends n.PureComponent{constructor(e){super(e),this.state={isExpanded:!1,isHoveringOnExpandLinks:!1},Object(f.a)(this,["expand","onChannelClick","onMessageJump","onFileJump","onExpandHoverStart","onExpandHoverEnd","onLinkClick","onRepliesClick"])}onChannelClick(){var e=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();e[0]&&this.onMessageJump({iid:e[0].iid,permalink:e[0].permalink,ts:e[0].ts,channelId:this.props.channel.id,userId:e[0].user,botId:e[0].botId})}onLinkClick(e,t){this.props.clogSearchMessageClick({iid:t.iid,ts:t.ts,channelId:t.channelId,botId:t.botId,userId:t.userId,type:t.type,position:this.props.index}),t.type===I.b.copyLink?this.props.clogMessageClick({msg:e,payload:t}):t.type===I.b.channel&&this.props.close()}onMessageJump(e){var{iid:t,permalink:a,ts:n,channelId:r,userId:s,botId:i}=e;this.props.onMessageJump({teamId:this.props.currentTeam.id,permalink:a}),this.props.clogSearchMessageClick({type:I.b.messageJump,iid:t,ts:n,channelId:r,userId:s,botId:i,position:this.props.index})}onFileJump(e,t){var{file:a,iid:n,ts:r,channelId:s,userId:i,botId:o}=t;this.props.onFileJump(e,{file:a,iid:n,ts:r,channelId:s,userId:i,botId:o,position:this.props.index})}onRepliesClick(e){this.props.onRepliesClick(e),this.props.clogSearchMessageClick({type:I.b.repliesJump,iid:e.iid,ts:e.ts,channelId:e.channelId,userId:e.userId,botId:e.botId,position:this.props.index})}onExpandHoverStart(){this.setState(()=>({isHoveringOnExpandLinks:!0}))}onExpandHoverEnd(){this.setState(()=>({isHoveringOnExpandLinks:!1}))}getCondensedMessageArray(){var{messages:e}=this.props;return Object(ye.a)(e,(e,t)=>{var a=e.length&&e[e.length-1].collapsedStub;return t.stub&&(!t.text||t.text.length>200||a)?a?e[e.length-1].count+=1:e.push({collapsedStub:!0,count:1}):e.push(t),e},[])}expand(e){var{iid:t,ts:a,channelId:n,userId:r,botId:s}=e;this.setState(()=>({isExpanded:!0})),this.props.clogSearchMessageClick({type:I.b.expand,iid:t,ts:a,channelId:n,userId:r,botId:s,position:this.props.index})}formatHeaderDate(){return Z(this.props.messages,!0)}renderHeader(){var{channel:e}=this.props;if(!e)return null;var t=this.formatHeaderDate();return r.a.createElement(Ee.a,{className:"c-message_group__header",onClick:this.onChannelClick,"data-qa":"search_message_group_header"},r.a.createElement(ke.a,{channel:e,teamIconSize:"14",showPresence:!0,inline:!0,showTeamIconForXwsChannels:!0}),r.a.createElement("span",null,"\u2013"),r.a.createElement("span",{className:"c-message_group__header_date"},t),r.a.createElement("span",{className:"c-message_group__header_view_label"},Be.t("View in channel")))}renderMessages(){var e=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();return Object(b.a)(e,(e,t)=>e.collapsedStub&&!this.state.isExpanded?r.a.createElement(Se.a,{key:t,className:"c-message_group__divider",onClick:this.expand,"aria-expanded":this.state.isExpanded},r.a.createElement("hr",{className:"c-message_group__divider_rule"}),r.a.createElement("div",{className:"c-message_group__divider_text"},Be.t("+{count, plural, =1 {# message} other {# messages}}",{count:e.count}))):r.a.createElement(Fe,Object(m.a)({key:e.ts,index:this.props.index},e,{teamId:this.props.team,channel:this.props.channel,expanded:this.state.isExpanded,onExpand:this.expand,onClick:this.onMessageJump,onLinkClick:t=>{this.onLinkClick(e,t)},onFileClick:this.onFileJump,onRepliesClick:this.onRepliesClick,onExpandHoverStart:this.onExpandHoverStart,onExpandHoverEnd:this.onExpandHoverEnd,logger:this.props.logger,telemeter:this.props.telemeter})))}render(){var e=o()("c-message_group",{"c-message_group--hover-expand":this.state.isHoveringOnExpandLinks});return r.a.createElement("div",{className:e,"data-qa":"search_message_group"},this.renderHeader(),this.renderMessages())}}message_group_SearchMessageGroup.defaultProps=He;var We={clogSearchMessageClick:function(){return Object(I.i)(...arguments)},clogMessageClick:function(){return Object(Ce.a)(...arguments)},close:function(){return Object(D.a)(...arguments)}},qe=Object(c.b)((e,t)=>{var{channel:a,team:n}=t,r=Object(A.d)(e),s=Object(A.i)(e,n||r.id),i=Object(U.e)(s);return{channel:Ue({},ie(e,a),{team_id:n}),isEnterpriseOrg:!(!r||!r.enterprise_id),workspaceName:i,currentTeam:r}},We,null,{areStatePropsEqual:(e,t)=>Object(je.a)(e,t,2)})(message_group_SearchMessageGroup),Ge="IMPROVED_SEARCH";var Ke=class protected_message_group_ProtectedMessageGroup extends n.PureComponent{constructor(){super(),this.state={hasError:!1}}componentDidCatch(e,t){this.props.telemeter.count("search_ui_messages_result_message_group_render_error"),this.props.logger.error(Ge,"Error caught by ProtectedMessageGroup ".concat(t.componentStack),e),this.setState(()=>({hasError:!0}))}render(){var e=this.props,{logger:t}=e,a=Object(he.a)(e,["logger"]);return this.state.hasError?r.a.createElement(ve,a):r.a.createElement(qe,Object(m.a)({logger:t},a))}},Ve=a("wljo"),ze=new B.b("search");function Ye(e){var{visible:t,currentPageOffset:a,totalPageCount:n,onBack:s,onForward:i,onFeedbackClick:o}=e;if(!t)return null;var c,l=1===a,d=a===n,p={currentPageOffset:Object(G.a)(a),totalPageCount:Object(G.a)(n)};c=ze.t("Page {currentPageOffset} of {totalPageCount}",p,{fallbackHash:"12d107c2f54959a419ebf8a58dc959d76473b0ea"});var u=r.a.createElement(Ee.a,{className:"c-search__pager__button_forward",onClick:i,disabled:d,"data-qa":"search_pager_forward_button"},l&&ze.t("See more")||ze.t("Next"),r.a.createElement(q.b,{type:"chevron-medium-right",size:"inherit"})),h=r.a.createElement(Ee.a,{className:"c-search__pager__button__back",onClick:s,disabled:l,"data-qa":"search_pager_back_button"},r.a.createElement(q.b,{type:"chevron-medium-left",size:"inherit"}),ze.t("Previous")),m=r.a.createElement(Ve.a,{short:!0,className:"c-search__pager_feedback",onClick:o});return r.a.createElement("div",{className:"c-search__pager"},l||h,r.a.createElement("div",null,r.a.createElement("span",{className:"c-search__pager__details"},c),m),d||u)}Ye.defaultProps={visible:!0};var Qe=Ye,Xe=a("HI9p"),Je=a("G4ux"),Ze=a("brL+"),$e=a("zbZx"),et=a("TGBA"),tt=a("Hh47"),at=a("wmz2"),nt=a("nOXG");function rt(e,t,a){var n=Object(M.n)(t()),r=n?n.query:"";return e(Object(M.d)()),e(Object(tt.a)()),e(Object(T.a)({query:r,reason:a,fetchSuggestions:Object(nt.a)(t())}))}var st=Object(S.b)("Message/file search: exclude bots checkbox changed",function(e,t){var{value:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(k.i)({value:a})),rt(e,t,"search-exclude-bots-changed")});st.meta={name:"messageAndFileSearchExcludeBotsChanged",key:"actionsUniversalSearchSearchPrefsChangedMessageAndFileSearchExcludeBotsChanged",description:"Message/file search: exclude bots checkbox changed"},st.propTypes={value:s.default.bool.isRequired};var it=Object(S.b)("Message/file search: only my channels checkbox changed",function(e,t){var{value:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(k.j)({value:a})),rt(e,t,"search-only-my-channels-changed")});it.meta={name:"messageAndFileSearchOnlyMyChannelsChanged",key:"actionsUniversalSearchSearchPrefsChangedMessageAndFileSearchOnlyMyChannelsChanged",description:"Message/file search: only my channels checkbox changed"},it.propTypes={value:s.default.bool.isRequired};var ot=Object(S.b)("Channel search: hide member channels flag changed",function(e,t){var{value:a,refetch:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(k.g)({value:a})),n&&rt(e,t,"search-hide-member-channels-changed")});ot.meta={name:"channelSearchHideMemberChannelsChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchHideMemberChannelsChanged",description:"Channel search: hide member channels flag changed"},ot.propTypes={value:s.default.bool.isRequired};var ct=Object(S.b)("File search: sort changed",function(e,t){var{sort:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(at.b)({sort:a})),e(Object(T.d)({module:"files",reason:"search-files-sort-changed"}))});ct.meta={name:"fileSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedFileSearchSortChanged",description:"File search: sort changed"},ct.propTypes={sort:s.default.oneOf(Object(et.a)(N.c)).isRequired};var lt=Object(S.b)("Channel search: sort changed",function(e,t){var{sort:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(k.h)({sort:a})),e(Object(T.d)({module:"channels",reason:"search-channels-sort-changed"}))});lt.meta={name:"channelSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchSortChanged",description:"Channel search: sort changed"},lt.propTypes={sort:s.default.oneOf(Object(et.a)(N.b)).isRequired};var dt=Object(S.b)("People search: sort changed",function(e,t){var{sort:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(k.l)({sort:a})),e(Object(T.d)({module:"people",reason:"search-people-sort-changed"}))});dt.meta={name:"peopleSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchSortChanged",description:"People search: sort changed"},dt.propTypes={sort:s.default.oneOf(Object(et.a)(N.b)).isRequired};var pt=Object(S.b)("Channel search: filter type changed",function(e,t){var{type:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(E.j)({type:a})),rt(e,t,"search-channels-filter-type-changed")});pt.meta={name:"channelSearchFilterTypeChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchFilterTypeChanged",description:"Channel search: filter type changed"},pt.propTypes={type:s.default.oneOf(Object(et.a)(N.a)).isRequired};var ut=Object(S.b)("All of search: search only current workspace changed",function(e,t){var{value:a,refetch:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(k.m)({value:a})),n&&rt(e,t,"search-only-search-workspace-changed")});ut.meta={name:"searchOnlySearchWorkspaceChanged",key:"actionsUniversalSearchSearchPrefsChangedSearchOnlySearchWorkspaceChanged",description:"All of search: search only current workspace changed"},ut.propTypes={value:s.default.bool.isRequired};var ht=Object(S.b)("All of search: search by selected enterprise team id",function(e,t){var{value:a,refetch:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(E.g)({selectedEnterpriseTeamId:a})),n&&rt(e,t,"search-only-by-enterprise-team-id")});ht.meta={name:"searchOnlyByEnterpriseTeamId",key:"actionsUniversalSearchSearchPrefsChangedSearchOnlyByEnterpriseTeamId",description:"All of search: search by selected enterprise team id"},ht.propTypes={value:s.default.string.isRequired};var mt=Object(S.b)("Channel search: update an external org filter",function(e,t){var{teamId:a,value:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t(),s=[...Object(l.e)(r)],i=Object(l.d)(r);n?s.push(a):s=s.filter(e=>e!==a),e(Object(E.k)({teamIds:Array.from(new Set([...i,a]))})),e(Object(E.l)({orgFilters:s})),rt(e,t,"search-channels-org-filter-changed")});mt.meta={name:"toggleChannelSearchOrgFilter",key:"actionsUniversalSearchSearchPrefsChangedToggleChannelSearchOrgFilter",description:"Channel search: update an external org filter"},mt.propTypes={teamId:s.default.string.isRequired,value:s.default.bool.isRequired};var bt=Object(S.b)("People search: update an external org filter",function(e,t){var{teamId:a,value:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t(),s=[...Object(l.n)(r)],i=Object(l.m)(r);n?s.push(a):s=s.filter(e=>e!==a),e(Object(E.x)({teamIds:Array.from(new Set([...i,a]))})),e(Object(E.y)({orgFilters:s})),rt(e,t,"search-people-org-filter-changed")});bt.meta={name:"togglePeopleSearchOrgFilter",key:"actionsUniversalSearchSearchPrefsChangedTogglePeopleSearchOrgFilter",description:"People search: update an external org filter"},bt.propTypes={teamId:s.default.string.isRequired,value:s.default.bool.isRequired};var _t=Object(S.b)("People search: filter type changed",function(e,t){var{type:a,teamId:n,refetch:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(E.w)({type:a,teamId:n})),r&&rt(e,t,"search-people-filter-type-changed")});_t.meta={name:"peopleSearchFilterTypeChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchFilterTypeChanged",description:"People search: filter type changed"},_t.propTypes={type:s.default.oneOf(Object(et.a)(N.h)).isRequired,teamId:s.default.string};var gt=Object(S.b)("People search: custom filter changed",function(e,t){var{id:a,value:n,checked:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(E.v)({id:a,value:n,checked:r})),rt(e,t,"search-people-custom-filter-changed")});gt.meta={name:"peopleSearchCustomFilterChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchCustomFilterChanged",description:"People search: custom filter changed"},gt.propTypes={id:s.default.string.isRequired,value:s.default.string.isRequired,checked:s.default.bool.isRequired};var ft=Object(S.b)("People search: hide deactivated users pref changed",function(e,t){var{value:a,refetch:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(k.k)({value:a})),n&&rt(e,t,"search-people-hide-deactivated-users-changed")});ft.meta={name:"peopleSearchHideDeactivatedUsersChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchHideDeactivatedUsersChanged",description:"People search: hide deactivated users pref changed"},ft.propTypes={value:s.default.bool.isRequired};var vt=Object(S.b)("People search: timezone filter changed",function(e,t){var{label:a,value:n,checked:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(E.C)({label:a,value:n,checked:r})),rt(e,t,"search-people-timezone-filter-changed")});vt.meta={name:"peopleSearchTimezoneFilterChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchTimezoneFilterChanged",description:"People search: timezone filter changed"},vt.propTypes={label:s.default.string.isRequired,value:s.default.string.isRequired,checked:s.default.bool.isRequired};var Ot=a("FHcd"),yt=a("+1yX"),Ct=a("jYCR"),jt=a("fujP");var Et=a("Fdc0"),kt=a("c48M"),St=a("NOj5"),It=a("nlS/"),wt=a("AgpX");a("ym0a");function Tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Nt=new B.b("search"),Pt={onOptionChange:_.a,onOptionAdd:_.a,renderVisibleOption:void 0,renderOption:void 0,filterOptions:(e,t)=>t,showMoreOptions:!0},At={};class search_filter_multi_select_SearchFilterMultiSelect extends n.Component{constructor(e){super(e),this.initialState={isSelectVisible:!1,isLoading:!1,emptyMessage:At,activeRowIndex:null,filterQuery:"",options:[],selectId:"search-multi-select-filter-".concat(e.checkboxName),isExpanded:!1,isInvalid:!1,isDisabled:!1},this.state=this.initialState,Object(f.a)(this,["onShowSelectClick","setSelectState","renderOption","emptyStateMessage"]),this.loadOptionsPromise=null,this.inputRef=r.a.createRef()}componentDidMount(){this.reloadOptions("")}componentWillUnmount(){this.loadOptionsPromise&&this.loadOptionsPromise.cancel()}onShowSelectClick(){this.setState(()=>({isSelectVisible:!0}),()=>{this.inputRef.current.focus()})}setSelectState(e,t){var a=!1;this.setState(t=>{var n=e(),{activeRowIndex:r=t.activeRowIndex,filterQuery:s=t.filterQuery,isExpanded:i=t.isExpanded,isInvalid:o=t.isInvalid,isDisabled:c=t.isDisabled,options:l=t.options,selectId:d=t.selectId}=n;void 0!==s&&s!==t.filterQuery&&(a=!0);var p=Object(St.a)(l,t.options,"value").length;return p===l.length&&p===t.options.length||(a=!0),{activeRowIndex:r,filterQuery:s,isExpanded:i,isInvalid:o,isDisabled:c,options:this.props.filterOptions(s,l),selectId:d}},()=>{a&&this.reloadOptions(this.state.filterQuery),t&&t()})}refilterOptions(){this.setState(e=>({options:this.props.filterOptions(e.filterQuery,e.options)}))}reloadOptions(e){var t=this;this.loadOptionsPromise&&this.loadOptionsPromise.cancel(),this.setState(()=>({isLoading:!0})),this.loadOptionsPromise=this.props.loadOptions(e).then(function(){var{options:e,emptyMessage:a=At}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.setState(n=>({options:t.props.filterOptions(n.filterQuery,e),emptyMessage:a}))}).catch(_.a).finally(()=>{this.loadOptionsPromise.isCancelled()||this.setState(()=>({isLoading:!1}))})}emptyStateMessage(){return this.state.emptyMessage===At?Nt.t("Nothing found",{fallbackHash:"f4e12416c6b8d6a75b8a34fc79a221e1a43d1120",fallbackHashNs:"select"}):this.state.emptyMessage}renderOption(e,t){var{isActive:a,isSelected:n}=t;return r.a.createElement("div",{className:o()("p-search_filter__option p-search_filter__option--suggestion",{"p-search_filter__option--active":a,"p-search_filter__option--selected":n})},this.props.renderOption?this.props.renderOption(e,t):r.a.createElement("span",{className:"p-search_filter__option_label"},e.label))}render(){var e=this,{checkboxName:t,visibleOptions:a,placeholderText:n,onOptionChange:s,onOptionAdd:i,renderVisibleOption:c,showMoreOptions:l,showMoreOptionsAriaLabel:d}=this.props,{isSelectVisible:p}=this.state,u=0===a.length;return r.a.createElement("div",null,a.map(e=>r.a.createElement("label",{key:e.value,htmlFor:"search-filter-".concat(t,"-").concat(e.value),className:o()("p-search_filter__visible_option",{"p-search_filter__visible_option--selected":e.checked}),"data-qa":"search_filter_suggestion"},c?c(e):r.a.createElement("span",{className:"p-search_filter__option_label"},e.label),r.a.createElement("span",{className:"p-search_filter__visible_checkbox"},r.a.createElement("input",{id:"search-filter-".concat(t,"-").concat(e.value),type:"checkbox",name:t,value:e.value,checked:e.checked,onChange:t=>{s(e,t.target.checked),this.refilterOptions()}})))),l&&(p?r.a.createElement("div",{className:"p-search_filter__select"},r.a.createElement(It.b,{width:"100%",inputRef:this.inputRef,selectId:"search-multi-select-filter-".concat(t),placeholderText:n,emptyStateMessage:this.emptyStateMessage,options:this.state.options,isLoading:this.state.isLoading,setSelectState:this.setSelectState,isExpanded:!!this.state.emptyMessage&&this.state.isExpanded,selectState:{activeRowIndex:this.state.activeRowIndex,filterQuery:this.state.filterQuery,options:this.state.options,selectId:this.state.selectId,isExpanded:!!this.state.emptyMessage&&this.state.isExpanded,isInvalid:this.state.isInvalid,isDisabled:this.state.isDisabled},onOptionSelected:function(){e.setState(t=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(a),!0).forEach(function(t){Object(Oe.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({},e.initialState,{options:t.options})),i(...arguments)},renderOption:this.renderOption})):r.a.createElement(wt.a,{className:o()("p-search_filter__more_link",{"p-search_filter__empty_more_link":u}),"data-qa":"search_filter_multi_select__more_link",onClick:this.onShowSelectClick,"aria-label":d,"aria-expanded":"false"},Nt.t("More\u2026"))))}}search_filter_multi_select_SearchFilterMultiSelect.defaultProps=Pt;var Mt=search_filter_multi_select_SearchFilterMultiSelect,xt=a("fX3E"),Rt=a("derf"),Dt=a("hUMe"),Ft=a("z+SX"),Lt=a("wd/R"),Ut=a.n(Lt),Bt=a("/NHa"),Ht=(a("D3Vj"),e=>r.a.createElement("div",{className:"c-search_filter_section"},r.a.createElement("h3",{className:"c-search_filter_section__title"},e.title),e.children));Ht.defaultProps={children:null};var Wt=Ht,qt=a("hFPh"),Gt=-364;class date_selector_DateSelector extends n.PureComponent{constructor(e){super(e),Object(f.a)(this,["onClearDateChange"])}onClearDateChange(){this.props.onDateChange(null)}render(){var{onDateChange:e,date:t,isDateDisabled:a,disableDatesBefore:n,disableDatesAfter:s,dateLabel:i,dateAriaLabel:c,removeAriaLabel:l,qaLabel:d}=this.props,p="es-ES"===Object(B.s)()||"es-LA"===Object(B.s)(),u=t?Object(J.i)(Ut()(t),{shortenMonth:p,shortenDay:p}):"",h=o()("p-search_filter__datepicker_trigger",{"p-search_filter__datepicker_trigger--empty":!t});return r.a.createElement("div",{className:"p-search_filter__date","data-qa":d},r.a.createElement(qt.d,{position:"bottom",offsetY:Gt,selectedDate:t,dateFormat:"YYYY-MM-DD",onDateChange:e,isDateDisabled:a,disableDatesBefore:n,disableDatesAfter:s},r.a.createElement(Se.a,{className:h,"aria-label":t?void 0:c,"data-qa":"".concat(d,"_button")},r.a.createElement("div",{className:"p-search_filter__date_label"},i),r.a.createElement("div",{className:"p-search_filter__date_readout"},u),t?null:r.a.createElement(q.b,{type:"calendar",className:"p-search_filter__calendar_icon"}))),t?r.a.createElement(Se.a,{"aria-label":l,className:"p-search_filter__date_close",onClick:this.onClearDateChange,"data-qa":"".concat(d,"_close")},r.a.createElement(q.b,{type:" c-icon--times-small"})):null)}}date_selector_DateSelector.defaultProps={date:null,disableDatesBefore:null,disableDatesAfter:null,qaLabel:""};var Kt=date_selector_DateSelector,Vt=new B.b("search");class date_range_filter_DateRangeFilter extends n.PureComponent{constructor(e){super(e),Object(f.a)(this,["isDateDisabledStart","isDateDisabledEnd"])}isDateDisabledStart(e){var{endDate:t}=this.props;return t&&e.isAfter(t)||e.isAfter(Ut()())}isDateDisabledEnd(e){var{startDate:t}=this.props;return t&&e.isBefore(t)||e.isAfter(Ut()())}render(){var{onStartDateChange:e,onEndDateChange:t,endDate:a,startDate:n}=this.props;return r.a.createElement(Wt,{title:Vt.t("Date")},r.a.createElement("div",{className:"p-search_filter__dates"},r.a.createElement(Kt,{date:n,onDateChange:t=>{e(t?Ut()(t):null)},isDateDisabled:this.isDateDisabledStart,disableDatesAfter:a||Ut()().format("YYYY-MM-DD"),dateLabel:Vt.t("Starting"),dateAriaLabel:Vt.t("Starting date"),removeAriaLabel:Vt.t("Remove starting date"),qaLabel:"search_starting_date"}),r.a.createElement(Kt,{date:a,onDateChange:e=>{t(e?Ut()(e):null)},isDateDisabled:this.isDateDisabledEnd,disableDatesBefore:n,disableDatesAfter:Ut()().format("YYYY-MM-DD"),dateLabel:Vt.t("Ending"),dateAriaLabel:Vt.t("Ending date"),removeAriaLabel:Vt.t("Remove ending date"),qaLabel:"search_ending_date"})))}}date_range_filter_DateRangeFilter.defaultProps={startDate:null,endDate:null};var zt=date_range_filter_DateRangeFilter;function Yt(e){var{variation:t,includeAvatar:a}=e;return r.a.createElement("div",{className:"p-search_filter__placeholder_suggestion"},a?r.a.createElement("div",{className:"p-search_filter__placeholder_avatar"}):null,r.a.createElement("div",{className:"p-search_filter__placeholder_name p-search_filter__placeholder_name--".concat(t)}))}Yt.defaultProps={includeAvatar:!1};var Qt=Yt,Xt=a("g9w/"),Jt=new B.b("search");function Zt(e){var{loggedInEnterpriseTeams:t,searchOnlyWorkspaceTeamId:a,selfEnterpriseOrgName:s,featureSearchTeamLimitFilter:i}=e;if(i&&!1===i)return null;var o=[{renderLabel:r.a.createElement("div",{className:"p-search_filter__limit_team_filter_dropdown_item"},Jt.rt("All {enterpriseName} Workspaces",{enterpriseName:s})),label:Jt.t("All {enterpriseName} Workspaces",{enterpriseName:s}),value:""},...t.map(e=>({renderLabel:r.a.createElement("div",{className:"p-search_filter__limit_team_filter_dropdown_item"},r.a.createElement(n.Fragment,null,r.a.createElement(Rt.b,{className:"p-search_filter__limit_team_filter_icon",id:e.id,size:18})," ",r.a.createElement(Dt.a,{id:e.id,bold:!1}))),label:e.name,value:e.id}))],c=""===a?o[0]:o.find(e=>e.value===a);return r.a.createElement(Xt.a,{options:o,selectId:"search_limit_team_filter_dropdown",width:"100%",onOptionSelected:t=>{e.onChange(t)},renderOption:e=>r.a.createElement("span",null,e.renderLabel),selectedOption:c,renderSelectedOption:e=>r.a.createElement("span",null,e.renderLabel)})}Zt.defaultProps={loggedInEnterpriseTeams:[],searchOnlyWorkspaceTeamId:"",selfEnterpriseOrgName:"",onChange:_.a,featureSearchTeamLimitFilter:!1};var $t=Zt,ea=(a("YyUD"),new B.b("search")),ta="IMPROVED_SEARCH",aa={showOnlyActiveFilters:!1,showFileFilters:!1,logInfo:_.a,clogSearchFilterAdded:_.a,clogSearchFilterRemoved:_.a,searchOnlyWorkspaceTeamId:"",selfEnterpriseOrgName:"",searchOnlyByEnterpriseTeamId:_.a};class messages_filter_ui_MessagesFilterUIBase extends n.PureComponent{constructor(e){super(e),Object(f.a)(this,["onChannelSelect","onMemberSelect","onEndDateSelect","onStartDateSelect","onFileTypeChange","loadInFilterOptions","loadFromFilterOptions","onSearchLimitTeamFilterDropdownChange"]),this.onStartDateSelect=this.onStartDateSelect.bind(this),this.onEndDateSelect=this.onEndDateSelect.bind(this)}onChannelSelect(e){var{offset:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var a={filter_in:!0,filter_position:t};Object(Ot.a)(e)?a.click_user_id=e:a.click_channel_id=e,this.props.filters.in.indexOf(e)>-1?this.props.clogSearchFilterRemoved(a):this.props.clogSearchFilterAdded(a);var n=e;this.props.imToUserMap[e]&&(n=this.props.imToUserMap[e]),this.props.toggleEditableRequestQueryFilterInItem({channelId:n})}}onMemberSelect(e){var{offset:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(this.props.filters.from.indexOf(e)>-1?this.props.clogSearchFilterRemoved({click_user_id:e,filter_from:!0,filter_position:t}):this.props.clogSearchFilterAdded({click_user_id:e,filter_from:!0,filter_position:t}),this.props.toggleEditableRequestQueryFilterFromItem({memberId:e}))}onEndDateSelect(e){var t=e&&e.add(1,"days").format(Bt.a);t?this.props.clogSearchFilterAdded({filter_before:t}):this.props.clogSearchFilterRemoved({filter_before:""}),this.props.setEditableRequestQueryFilterBefore({dateString:t})}onStartDateSelect(e){var t=e&&e.subtract(1,"days").format(Bt.a);t?this.props.clogSearchFilterAdded({filter_after:t}):this.props.clogSearchFilterRemoved({filter_after:""}),this.props.setEditableRequestQueryFilterAfter({dateString:t})}onSearchPrefChange(e){var t,{searchOnlyCurrentTeam:a,searchExcludeBots:n,searchOnlyMyChannels:r}=this.props.searchPrefs;switch(this.props.logInfo(ta,"Changing search pref. pref: ".concat(e)),e){case N.n:t=!a,this.props.searchOnlySearchWorkspaceChanged({value:t});break;case N.k:t=!n,this.props.messageAndFileSearchExcludeBotsChanged({value:t});break;case N.o:t=!r,this.props.messageAndFileSearchOnlyMyChannelsChanged({value:t});break;default:return}t?this.props.clogSearchFilterAdded({filter_other:e}):this.props.clogSearchFilterRemoved({filter_other:e})}onSearchLimitTeamFilterDropdownChange(e){this.props.searchOnlyByEnterpriseTeamId({value:e.value})}onFileTypeChange(e){this.props.clogSearchFilterAdded({filter_file_type:e}),this.props.setEditableRequestQueryFilterFileType({fileType:e})}loadInFilterOptions(e){return!e||e.length<=1?Promise.resolve({options:[],emptyMessage:null}):this.props.search({query:e,options:{limit:150,entities:{channels:{includeArchived:!0,onlyIfMember:this.props.searchPrefs.searchOnlyMyChannels,includeFromAnotherTeam:!this.props.searchPrefs.searchOnlyCurrentTeam,includeMpims:!0},members:{includeSelf:!0,includeSlackbot:!this.props.searchPrefs.searchExcludeBots,includeBots:!this.props.searchPrefs.searchExcludeBots,includeDeleted:!0}}}}).then(e=>{var t=e.filter(e=>{return-1===Object(Xe.a)(this.props.suggestions.in,t=>t.id===e.id)}),a={};return this.props.suggestions.in.forEach(e=>{a[e.name]=(a[e.name]||0)+1}),t.forEach(e=>{a[e.name]=(a[e.name]||0)+1}),{options:t.map(e=>({label:null,model:e,member:Object(Et.yb)(e)&&e,mpim:Object(re.pb)(e)&&e,channel:Object(re.Y)(e)&&e,value:e.id}))}})}loadFromFilterOptions(e){return!e||e.length<=1?Promise.resolve({options:[],emptyMessage:null}):this.props.search({query:e,options:{entities:{members:{includeSelf:!0,includeSlackbot:!0,includeBots:!0,includeDeleted:!0}}}}).then(e=>{return{options:e.filter(e=>-1===this.props.suggestions.from.indexOf(e.id)).map(e=>({label:null,model:e,member:Object(Et.yb)(e)&&e,mpim:Object(re.pb)(e)&&e,channel:Object(re.Y)(e)&&e,value:e.id}))}})}shouldRenderDateFilter(){var e,{filters:t,showOnlyActiveFilters:a}=this.props;return!((!(e=t)||Object(jt.a)(e)||!(e.in&&e.in.length||e.from&&e.from.length||e.to&&e.to.length||e.before||e.after||e.has_star||e.has_pin||e.has_link||e.has_rxn))&&a)&&(!a||t.before&&t.after)}renderInFilter(){var{filters:e,suggestions:t,fileSuggestions:a,loading:n,loadingFileSuggestions:s,showFileFilters:i}=this.props;if(n&&!i||s&&i)return this.renderInPlaceholder();var o=(i?a:t).in,c={};o.forEach(e=>{c[e.name]=(c[e.name]||0)+1});var l=[],d={};return o.forEach(t=>{var a=e.in.indexOf(t.id)>-1;a&&(d[t.id]=!0),l.push({label:null,model:t,member:Object(Et.yb)(t)&&t,mpim:Object(re.pb)(t)&&t,channel:Object(re.Y)(t)&&t,value:t.id,checked:a})}),r.a.createElement(Wt,{title:ea.t("Channels & direct messages")},r.a.createElement(Mt,{checkboxName:"in_filter",placeholderText:ea.t("Enter a channel or direct message",{fallbackHash:"f95c98e247b782d3e4650fac888dac7c9ca383a9"}),showMoreOptionsAriaLabel:ea.t("More channels or direct messages to filter by"),loadOptions:this.loadInFilterOptions,renderVisibleOption:e=>r.a.createElement(ke.a,{className:"p-search_filter__in_channel",channel:e.model,showTeamIconForLocalChannels:c[e.model.name]>1,showTeamIconForXwsChannels:!0}),renderOption:e=>e.member?r.a.createElement(Ft.a,{className:"p-search_filter__in_member",id:e.member.id}):r.a.createElement(ke.a,{className:"p-search_filter__in_channel",channel:e.model,teamIconSize:18,showTeamIconForLocalChannels:c[e.model.name]>1,showTeamIconForXwsChannels:!0}),visibleOptions:l,onOptionChange:e=>{this.onChannelSelect(e.value,{offset:l.indexOf(e)})},onOptionAdd:e=>{this.onChannelSelect(e.value,{offset:null})},filterOptions:(e,t)=>t.filter(e=>!d[e.value])}))}renderInPlaceholder(){return r.a.createElement(Wt,{title:ea.t("Channels & direct messages")},r.a.createElement(Qt,{variation:0}),r.a.createElement(Qt,{variation:1}),r.a.createElement(Ee.a,{className:"p-search_filter__more_link",disabled:!0,"aria-label":ea.t("More channels or direct messages to filter by"),"aria-expanded":"false"},ea.t("More\u2026")))}renderFromFilter(){var{filters:e,suggestions:t,fileSuggestions:a,loading:s,loadingFileSuggestions:i,showFileFilters:o}=this.props;if(s&&!o||i&&o)return this.renderFromPlaceholder();var c=[],l={};return(o?a:t).from.forEach(t=>{var a=e.from.indexOf(t.id)>-1;a&&(l[t.id]=!0),c.push({label:null,model:t,member:Object(Et.yb)(t)&&t,mpim:Object(re.pb)(t)&&t,channel:Object(re.Y)(t)&&t,value:t.id,checked:a})}),r.a.createElement(Wt,{title:ea.t("People")},r.a.createElement(Mt,{checkboxName:"from_filter",placeholderText:ea.t("Enter a teammate\u2019s name",{fallbackHash:"670ca2ba897531a14d0d51f4b85583c58e9b03dc"}),showMoreOptionsAriaLabel:ea.t("More people to filter by"),loadOptions:this.loadFromFilterOptions,renderVisibleOption:e=>r.a.createElement(n.Fragment,null,r.a.createElement(me.c,{className:"p-search_filter__from_avatar",userId:e.model.id,size:18,ariaHidden:"true",tabIndex:"-1",isInteractive:!1}),r.a.createElement(Ft.a,{className:"p-search_filter__from_name",id:e.model.id})),renderOption:e=>r.a.createElement(n.Fragment,null,r.a.createElement(me.c,{className:"p-search_filter__from_avatar",userId:e.model.id,size:18,ariaHidden:"true",tabIndex:"-1",isInteractive:!1}),r.a.createElement(Ft.a,{className:"p-search_filter__from_name",id:e.model.id})),visibleOptions:c,onOptionChange:e=>{this.onMemberSelect(e.value,{offset:c.indexOf(e)})},onOptionAdd:e=>{this.onMemberSelect(e.value,{offset:null})},filterOptions:(e,t)=>t.filter(e=>!l[e.value])}))}renderFromPlaceholder(){return r.a.createElement(Wt,{title:ea.t("People")},r.a.createElement(Qt,{includeAvatar:!0,variation:0}),r.a.createElement(Qt,{includeAvatar:!0,variation:1}),r.a.createElement(Ee.a,{className:"p-search_filter__more_link",disabled:!0,"aria-label":ea.t("More people to filter by"),"aria-expanded":"false"},ea.t("More\u2026")))}renderFileTypeFilter(){var{filters:e,showOnlyActiveFilters:t,showFileFilters:a}=this.props;return!a||t&&!e.fileType?null:r.a.createElement(Wt,{title:ea.t("File type")},r.a.createElement(xt.a,{filetype:e.fileType,onChange:this.onFileTypeChange}))}renderPrefs(){var{showOnlyActiveFilters:e,isEnterpriseOrg:t,showDebugOption:a,isDebugInfoVisible:s,currentTeam:i,featureSearchLimitTeamFilter:c,searchOnlyWorkspaceTeamId:l,selfEnterpriseOrgName:d,loggedInEnterpriseTeams:p,showEnterpriseOptions:u}=this.props,{searchOnlyCurrentTeam:h,searchExcludeBots:m,searchOnlyMyChannels:b}=this.props.searchPrefs;return e?null:r.a.createElement(n.Fragment,null,u&&c?r.a.createElement(Wt,{title:ea.t("Workspace"),"data-qa":"search-filter-workspace-section"},r.a.createElement("div",{className:"p-search_filter__select"},r.a.createElement($t,{loggedInEnterpriseTeams:p,selfEnterpriseOrgName:d,searchOnlyWorkspaceTeamId:l,onChange:this.onSearchLimitTeamFilterDropdownChange,featureSearchLimitTeamFilter:c}))):null,r.a.createElement(Wt,{title:ea.t("More options")},t&&!c?r.a.createElement("label",{className:o()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":h}),htmlFor:"search_only_current_team"},ea.rt("Only search {currentTeamNameAndIcon}",{fallbackHash:"b326da02faf635a430ceb2bda81e5803542e7b21",currentTeamNameAndIcon:r.a.createElement(n.Fragment,null,r.a.createElement(Rt.b,{className:"p-search_filter__workspace_only_team_icon",team:i,size:18})," ",r.a.createElement(Dt.a,{id:i.id,bold:h}))}),r.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_only_current_team",checked:h,onChange:()=>this.onSearchPrefChange(N.n)})):null,r.a.createElement("label",{className:o()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":b}),htmlFor:"search_only_my_channels"},ea.t("Only search my channels")," ",r.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_only_my_channels",checked:b,onChange:()=>this.onSearchPrefChange(N.o)})),r.a.createElement("label",{className:o()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":m}),htmlFor:"search_exclude_bots"},ea.t("Hide apps and bots")," ",r.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_exclude_bots",checked:m,onChange:()=>this.onSearchPrefChange(N.k)})),a&&r.a.createElement("label",{className:o()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":s}),htmlFor:"search_show_debug_info"},"[DEBUG] Show solr debug info"," ",r.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_show_debug_info",checked:s,onChange:()=>this.props.toggleDebugInfoVisible()}))))}render(){var e=this.props.filters.after&&Ut()(this.props.filters.after,Bt.a).add(1,"days").format(Bt.a),t=this.props.filters.before&&Ut()(this.props.filters.before,Bt.a).subtract(1,"days").format(Bt.a);return r.a.createElement("div",{className:"p-search_filters"},this.renderFromFilter(),this.renderInFilter(),this.renderFileTypeFilter(),r.a.createElement(zt,{onStartDateChange:this.onStartDateSelect,onEndDateChange:this.onEndDateSelect,startDate:e,endDate:t}),this.renderPrefs())}}messages_filter_ui_MessagesFilterUIBase.defaultProps=aa;function na(e,t){return Object(yt.a)(t)?Object(se.e)(e,t):Object(Ot.a)(t)?Object(Je.d)(e,t):null}var ra={setEditableRequestQueryFilterAfter:function(){return Object(M.u)(...arguments)},setEditableRequestQueryFilterBefore:function(){return Object(M.v)(...arguments)},setEditableRequestQueryFilterFileType:function(){return Object(M.w)(...arguments)},toggleEditableRequestQueryFilterFromItem:function(){return Object(M.F)(...arguments)},toggleEditableRequestQueryFilterInItem:function(){return Object(M.G)(...arguments)},search:function(){return Object(Ct.c)(...arguments)},toggleDebugInfoVisible:function(){return Object(E.K)(...arguments)},clogSearchFilterAdded:function(){return Object(I.g)(...arguments)},clogSearchFilterRemoved:function(){return Object(I.h)(...arguments)},searchOnlySearchWorkspaceChanged:function(){return ut(...arguments)},messageAndFileSearchExcludeBotsChanged:function(){return st(...arguments)},messageAndFileSearchOnlyMyChannelsChanged:function(){return it(...arguments)},searchOnlyByEnterpriseTeamId:function(){return ht(...arguments)}},sa=Object(c.b)(e=>{var t=Object(M.h)(e)||kt.b,a=Object(M.j)(e)||kt.b,n=Object(M.k)(e)||kt.b,r=Object(O.d)(e),s=Object(A.d)(e),i=!!s.enterprise_id,o=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce((t,a)=>{if(Object(Ot.a)(a)){var n=Object(se.l)(e,a);n&&(t[n]=a)}return t},{})}(e,t.in),c=(Object(l.j)(e,"suggestions")||kt.b).loading,d=(Object(l.j)(e,"suggestionsForFiles")||{loading:!1}).loading,p="solr_rank_debug"===Object(x.c)(e,"solr_rank_debug"),u=Object(Ze.a)(e),h=Object(O.b)(e).filter(e=>!!e.enterprise_id&&e.enterprise_id===u),m={searchOnlyCurrentTeam:Object(te.k)(e,N.n),searchExcludeBots:Object(te.k)(e,N.k),searchOnlyMyChannels:Object(te.k)(e,N.o)};return{suggestions:{in:(a.in||kt.a).map(t=>na(e,t)).filter(e=>!!e),from:(a.from||kt.a).map(t=>na(e,t)).filter(e=>!!e)},fileSuggestions:{in:(n.in||kt.a).map(t=>na(e,t)).filter(e=>!!e),from:(n.from||kt.a).map(t=>na(e,t)).filter(e=>!!e)},currentTeam:s,isEnterpriseOrg:i,myUserId:r,filters:{in:t.in||kt.a,from:t.from||kt.a,before:t.before,after:t.after,fileType:t.fileType},imToUserMap:o,searchPrefs:m,loading:c,loadingFileSuggestions:d,logInfo:Object(j.a)({state:e}).info,isDebugInfoVisible:Object(l.h)(e),showDebugOption:p,filterWorkspaceOnly:Object(k.f)(e),allAccountsOfCurrentEnterprise:h,loggedInEnterpriseTeams:h.map(t=>Object(A.i)(e,t.id)),featureSearchLimitTeamFilter:Object(O.m)(e,"feature_search_limit_team_filter"),searchOnlyWorkspaceTeamId:Object(l.r)(e),selfEnterpriseOrgName:Object(A.e)(e),showEnterpriseOptions:Object($e.d)(e)}},ra,null,{areStatePropsEqual:(e,t)=>Object(je.a)(e,t,2)})(messages_filter_ui_MessagesFilterUIBase),ia=a("negh"),oa=a("AjwY"),ca=a("kOzZ"),la=Object(S.b)("Clog clicks on the message/storage limit banner that appears in search for free teams",function(e,t){var{elementName:a,uiAction:n,elementType:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(ca.a)({state:t()}).track(ia.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:ia.UiStep.SEARCH_PANE,action:n,element_name:a,element_type:r}}})});la.meta={name:"clogLimitBannerInteraction",key:"actionsUniversalSearchClogLimitBannerInteractionClogLimitBannerInteraction",description:"Clog clicks on the message/storage limit banner that appears in search for free teams"},la.propTypes={elementName:s.default.string.isRequired,uiAction:s.default.number.isRequired,elementType:s.default.number.isRequired};var da=la,pa=(a("IpQt"),new B.b("search"));var ua={clogLimitBannerInteraction:da},ha=Object(c.b)(e=>{var t=Object(A.d)(e);return{overMessageLimit:Object(U.B)(t),overStorageLimit:Object(U.C)(t)}},ua)(class message_limit_banner_MessageLimitBanner extends n.PureComponent{constructor(e){super(e),this.clogLinkClick=this.clogLinkClick.bind(this)}componentDidMount(){this.isVisible()&&this.props.clogLimitBannerInteraction({uiAction:ia.UiAction.IMPRESSION,elementName:this.getClogElementName(),elementType:ia.ElementType.BANNER})}getClogElementName(){return this.props.overStorageLimit?"storage_limit_banner":"message_limit_banner"}getClogUIElement(){return this.props.overStorageLimit?ia.UiElement.FILE_SEARCH_PRICING_LINK:ia.UiElement.MESSAGE_SEARCH_LINK_TOP}clogLinkClick(){this.props.clogLimitBannerInteraction({uiAction:ia.UiAction.CLICK,elementName:this.getClogElementName(),elementType:ia.ElementType.LINK})}isVisible(){var{overMessageLimit:e,overStorageLimit:t,type:a}=this.props;return e||t&&"files"===a}render(){if(!this.isVisible())return null;var e,t,{type:a,overStorageLimit:n}=this.props;return n&&"files"===a?(e=pa.t("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit."),t=pa.t("See paid plans")):(e="messages"===a?pa.t("Some older messages may not be shown because your workspace has over 10,000 messages."):pa.t("Some older files may not be shown because your workspace has over 10,000 messages."),t=pa.t("Learn more")),r.a.createElement("div",{className:"p-message_limit_banner"},r.a.createElement("div",{className:"p-message_limit_banner__graphic"},r.a.createElement(q.b,{type:"eye-closed"})),r.a.createElement("div",{className:"p-message_limit_banner__content"},e,"\xa0",r.a.createElement(Ee.a,{href:Object(oa.j)({entryPoint:"message_limit_banner"}),onClick:this.clogLinkClick,target:"new","data-qa":"message-limit-banner_pricing-link"},t)))}}),ma=a("yt6e"),ba=a("RMmo"),_a=a("3zPy"),ga=a.n(_a);var fa=class focus_managed_list_item_FocusManagedListItem extends n.PureComponent{constructor(){super(),Object(f.a)(this,["setContainerRef","onFocusEnter","onKeyDown","onFocusLeave"]),this.focusedAfterUpdate=!1}componentDidUpdate(e){!e.focused&&this.props.focused&&this.container&&(this.focusedAfterUpdate=!0,this.container.focus())}onFocusEnter(e){var{relatedEvent:t}=e;t&&"mousedown"===t.type||(this.props.onFocusEnter({id:this.props.id,isLifeCycleUpdate:this.focusedAfterUpdate}),this.focusedAfterUpdate&&(this.focusedAfterUpdate=!1))}onFocusLeave(){this.props.onFocusLeave({id:this.props.id})}onKeyDown(e){e.keyCode===_a.codes.enter&&e.target===this.container&&this.props.onSelect(e,this.props.id)}setContainerRef(e){this.container=e}focus(){this.container&&this.container.focus()}render(){var{ariaLabel:e,focused:t,children:a}=this.props;return r.a.createElement(ma.a,{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onFocusWithin:this.onFocusLeave},r.a.createElement("div",{tabIndex:"-1",className:o()("c-focus_manage_list__item",{"c-focus_manage_list__item--focus":t}),ref:this.setContainerRef,role:"listitem","aria-label":e,onKeyDown:this.onKeyDown},a))}};function va(e,t,a,n){if(0===e.length)return null;if(null===t&&null!==a)return a;var r=e.indexOf(t),s=r+n;return s>=e.length?s=e.length-1:-1===r&&n<0?s=e.length-1:s<0&&(s=0),e[s]}a("guNz");var Oa={onSelectItem:_.a};class focus_managed_list_FocusManagedList extends n.PureComponent{constructor(e){super(e),Object(f.a)(this,["onFocusLeave","onItemFocusEnter","onItemFocusLeave","onArrowKeyDown","setContainerRef"]),this.state={activeItem:null},this.inferredActiveItem=null,this.containerRef=null,this.keyCommands=null,this.itemRefs={}}onArrowKeyDown(e){e.preventDefault();var t=0;e.keyCode===_a.codes.up&&(t=-1),e.keyCode===_a.codes.down&&(t=1),0!==t&&this.setState(e=>({activeItem:va(this.props.ids,e.activeItem,this.inferredActiveItem,t)}))}onItemFocusEnter(e){var{id:t,isLifeCycleUpdate:a}=e;a||(this.inferredActiveItem=t,this.setState(()=>({activeItem:null})))}onItemFocusLeave(e){var{id:t}=e;this.setState(e=>{var{activeItem:a}=e;return{activeItem:a===t?null:a}})}onFocusLeave(){this.setState(()=>({activeItem:null})),this.inferredActiveItem=null}setContainerRef(e){if(this.containerRef=e,this.keyCommands&&(this.keyCommands.reset(),this.keyCommands=null),this.containerRef){var t=[{keys:["up","down"],handler:this.onArrowKeyDown,ignoreInputs:!0}];this.keyCommands=new ba.a(this.containerRef),this.keyCommands.bindAll(t)}}setItemRef(e,t){this.itemRefs[e]=t}focus(){this.containerRef&&this.containerRef.focus()}focusItem(e){this.itemRefs[e]&&(this.itemRefs[e].focus(),this.inferredActiveItem=e)}render(){var{ids:e,itemAriaLabel:t,renderItem:a,onSelectItem:n}=this.props;return r.a.createElement(ma.a,{onFocusLeave:this.onFocusLeave},r.a.createElement("div",{role:"list",ref:this.setContainerRef,className:"c-search_focus_managed_list",tabIndex:"-1"},e.map(e=>r.a.createElement(fa,{ref:t=>this.setItemRef(e,t),key:e,id:e,ariaLabel:t(e),focused:this.state.activeItem===e,onFocusEnter:this.onItemFocusEnter,onFocusLeave:this.onItemFocusLeave,onSelect:n},a(e)))))}}focus_managed_list_FocusManagedList.defaultProps=Oa;var ya=focus_managed_list_FocusManagedList,Ca=a("uPpK"),ja=a("LxWA"),Ea=a("cD5Y"),ka=a("zoXk"),Sa=a("mIgp"),Ia=a("z0G2"),wa=a("ukTK"),Ta=new B.b("search");var Na=function(e){return r.a.createElement("div",{className:"c-search__back_to_filters"},r.a.createElement(W.d,{type:"outline",size:"small",className:"padding_left_50",onClick:e.onClick},r.a.createElement(q.b,{type:"arrow-up-medium"}),"\xa0",Ta.t("Back to Filters",{fallbackHash:"2e2575b332e9f936eb1d97f0ef2c04e7ec73cefe"})))},Pa=new B.b("search"),Aa="IMPROVED_SEARCH",Ma=300;class search_results_container_SearchResultsContainerBase extends n.Component{constructor(e){super(e),this.state={isScrolledTop:e.scrollPosition<Ma},this.scrollPosition=this.props.scrollPosition,this.wrapperRef=r.a.createRef(),this.keyboardNavigableListRef=r.a.createRef(),this.virtualizedContainerScrollTop=0,this.filterUIPositionTop=0,this.topScrollElementRef=r.a.createRef(),this.virtualListWidth=0,this.heightCache=new wa.a({heights:this.props.heightCache}),this.layout=new Ia.a({heightCache:this.heightCache}),Object(f.a)(this,["onScroll","scrollTop","onVirtualizedContainerScroll","onResize","setKeyboardNavigableListScrollTop","setHeightCache"]),this.debouncedOnVirtualizedContainerScroll=Object(ja.a)(this.onVirtualizedContainerScroll,150)}componentDidMount(){!this.props.featureSearchResultsVirtualized&&this.props.scrollPosition&&(this.wrapperRef.current.scrollTop=this.props.scrollPosition),this.logTelemetry()}componentDidUpdate(e){e.loading===this.props.loading&&e.errorType===this.props.errorType||this.logTelemetry()}componentWillUnmount(){this.props.setScrollPosition(this.scrollPosition),this.props.featureSearchResultsVirtualized&&this.setHeightCache(this.layout.heightCache.heights)}onScroll(){this.updateScrollPosition(this.wrapperRef.current.scrollTop)}onVirtualizedContainerScroll(e,t){var{scrollTop:a}=t;this.updateScrollPosition(a)}onItemKeyDown(e){if(e.keyCode===ga()("enter")){var t=e.currentTarget.querySelector("a,button");if(!t)return;t.click()}}onResize(e){var{width:t}=e;t!==this.virtualListWidth&&this.heightCache.invalidate(),this.virtualListWidth=t}setKeyboardNavigableListScrollTop(e){this.keyboardNavigableListRef&&this.keyboardNavigableListRef.current&&this.keyboardNavigableListRef.current.node&&this.keyboardNavigableListRef.current.node.scroller&&(this.keyboardNavigableListRef.current.node.scroller.scrollTop=e)}getToastOffset(){var e=window.innerWidth,t=window.innerHeight,a=this.wrapperRef.current?this.wrapperRef.current.getBoundingClientRect():{right:e,top:t};return{offsetX:24+e-a.right,offsetY:24+t-a.bottom}}setHeightCache(e){this.props.setHeightCache({heights:e})}logTelemetry(){var e=this.props.module.replace(/\./g,"_");if(this.props.loading)this.props.telemeter.count("search_ui_".concat(e,"_view_loading"));else switch(this.props.errorType){case N.g.None:this.props.telemeter.count("search_ui_".concat(e,"_view"));break;case N.g.NoQuery:this.props.telemeter.count("search_ui_".concat(e,"_error_noquery"));break;case N.g.Timeout:this.props.telemeter.count("search_ui_".concat(e,"_error_timeout"));break;case N.g.RenderErrorCaught:this.props.telemeter.count("search_ui_".concat(e,"_error_render"));break;case N.g.Unknown:this.props.telemeter.count("search_ui_".concat(e,"_error_unknown"));break;default:this.props.telemeter.count("search_ui_".concat(e,"_unknown"))}}scrollTop(){this.props.logInfo(Aa,"Scrolling to top of results page"),this.topScrollElementRef.current&&(this.updateScrollPosition(0),this.props.featureSearchResultsVirtualized?this.setKeyboardNavigableListScrollTop(0):this.wrapperRef.current.scrollTop=0)}updateScrollPosition(e){this.scrollPosition=e,this.setState(e=>{var t=this.scrollPosition<Ma;return e.isScrolledTop!==t?{isScrolledTop:t}:null})}render(){var{errorType:e,loading:t,filterUI:a,id:n,children:s,emptyResultsTitle:i,numResults:c,sortDropdown:l,onClickRefreshSearch:d,alertHeader:p,userQuery:u,showNumResults:h}=this.props,m=!this.props.usePrimarySearch||!this.props.secondaryView,{isScrolledTop:b}=this.state;if(this.props.featureSearchResultsVirtualized)return r.a.createElement("div",{className:"c-search__results--virtualized"},r.a.createElement(Ca.a,{onResize:this.onResize},e=>{var{width:t,height:n}=e;return r.a.createElement(Sa.b,{containerClassName:"c-search__results_container--virtualized",ref:this.keyboardNavigableListRef,keys:this.props.rowKeys,layout:this.layout,rowRenderer:this.props.rowRenderer,isFocusableItem:this.props.rowFocusability,height:n,width:t,onScroll:this.debouncedOnVirtualizedContainerScroll,initialScrollTop:this.props.scrollPosition,onItemKeyDown:this.onItemKeyDown,onFocusEnter:this.props.onFocusEnter,onFocusLeave:this.props.onFocusLeave,getPropsForItem:this.props.getPropsForItem,siblingNode:m&&r.a.createElement("div",{className:"c-search__extras--virtualized",ref:this.topScrollElementRef},r.a.createElement("div",{className:"c-search__section"},r.a.createElement("h4",{className:o()("c-search__section_header",!this.props.showNumResults&&"c-search__section_header--compact")},Pa.t("Filter by")),a)),hideHiddenStopTabs:!0})}),!b&&r.a.createElement(Na,{onClick:this.scrollTop}));var _=c?Pa.rt("{totalItemCount, plural, =1 {{totalItemCountStr} result} other {{totalItemCountStr} results}}",{totalItemCount:c,totalItemCountStr:V(c)}):null,g=!t&&e===N.g.NoQuery,f=!t&&!g&&e!==N.g.None,v=!!u,O=!(t||g||f||c),y=!t&&!g&&!f&&c>0,C=t||c>0;return r.a.createElement("div",{className:"c-search__results",onScroll:this.onScroll,ref:this.wrapperRef},p,r.a.createElement("div",{className:o()("c-search__view",{"c-search__view--hide_filters":!m}),id:n,role:"tabpanel"},r.a.createElement("div",{className:"c-search__section c-search__main"},r.a.createElement("h4",{className:o()("c-search__section_header",!h&&"c-search__section_header--compact")},g&&Pa.t("Search for messages, files, and more",{fallbackHash:"8d886c0ba6f2b683daba5f19568a316226ce3e4c"}),f&&Pa.t("Something went wrong"),O&&i,h&&r.a.createElement("span",null,y&&_),C&&r.a.createElement("div",{className:"c-search__section_more_link","data-qa":"search_sort_toggle"},l)),t&&r.a.createElement(Ea.a,{size:"large"}),g&&r.a.createElement("p",null,Pa.t("To start your search, simply type into the box above.",{fallbackHash:"e0a09e2db4a36cd1de53ef2d911b8faa689b8983"})),f&&r.a.createElement("p",null,Pa.t("For some reason, Slack wasn\u2019t able to complete your search."),"\xa0",v&&r.a.createElement(Ee.a,{"data-qa":"search-retry",onClick:d},Pa.t("Try again"))),O&&s,y&&s),m&&r.a.createElement("div",{className:"c-search__extras",ref:this.topScrollElementRef},r.a.createElement("div",{className:"c-search__section"},r.a.createElement("h4",{className:o()("c-search__section_header",!this.props.showNumResults&&"c-search__section_header--compact")},Pa.t("Filter by")),a)),!b&&r.a.createElement(Na,{onClick:this.scrollTop})))}}search_results_container_SearchResultsContainerBase.defaultProps={id:void 0,children:void 0,filterUI:void 0,numResults:void 0,emptyResultsTitle:void 0,sortDropdown:void 0,alertHeader:void 0,loading:!1,module:"unknown",errorType:N.g.None,secondaryView:void 0,setScrollPosition:_.a,onClickRefreshSearch:_.a,scrollPosition:0,userQuery:void 0,logInfo:_.a,usePrimarySearch:!1,telemeter:pe.d,featureSearchResultsVirtualized:!1,rowRenderer:_.a,rowKeys:[],rowFocusability:_.a,heightCache:{},setHeightCache:_.a,onFocusEnter:_.a,onFocusLeave:_.a,getPropsForItem:_.a,showNumResults:!0};var xa={setHeightCache:function(){return Object(E.p)(...arguments)}},Ra=Object(c.b)(e=>{var t=Object(x.c)(e,"search_tab_counts");return{logInfo:Object(j.a)({state:e}).info,usePrimarySearch:Object(d.a)(e),userQuery:Object(ue.d)(e),secondaryView:Object(ka.j)(e),telemeter:Object(pe.c)({state:e}),featureSearchResultsVirtualized:Object(O.m)(e,"feature_search_results_virtualized"),heightCache:Object(l.f)(e),showNumResults:"counts"!==t&&"counts_and_sort"!==t}},xa,null,{withRef:!0})(search_results_container_SearchResultsContainerBase),Da=a("WD4z"),Fa=a("Atrf"),La=(a("YlHk"),new B.b("search")),Ua=1e4,Ba=3,Ha={hiddenMessagesCount:void 0,hiddenUsers:[],currentUser:{}};class hidden_messages_banner_HiddenMessagesBanner extends n.PureComponent{constructor(e){super(e),Object(f.a)(this,["getBannerData","clogClick"]),this.impressionClogged=!1}getBannerData(){var e,{currentUser:t={},hiddenUsers:a=[]}=this.props,n=a.slice(0,Ba),r=[],s=0;return n.forEach(a=>{a.id===t.id?e=a:r.push(a),Object(Et.Z)(a)&&(s+=1)}),{currentUserToDisplay:e,otherUsersToDisplay:r,shouldDisplayAvatars:s===Ba}}getFormattedMessagesCount(){var{hiddenMessagesCount:e}=this.props,t=e<Ua?Object(G.a)(e):Object(K.a)(e,{precision:4,decimal_places:0,lowercase:!0});return r.a.createElement("span",{"data-qa":"banner_hidden_messages_message_count"},t)}getClogStepVariantString(){var{currentUserToDisplay:e,shouldDisplayAvatars:t}=this.getBannerData(),a="";switch(this.props.hiddenUsers.length){case 0:a="0_users";break;case 1:a="1_user";break;case 2:a="2_users";break;case 3:a="3_users";break;default:a="more_than_3_users"}return e&&(a+="_incl_current"),t&&(a+="_with_avatars"),a}clogImpression(){this.impressionClogged||(this.clog(ia.UiAction.IMPRESSION,ia.ElementType.BANNER,"banner"),this.impressionClogged=!0)}clogClick(){this.clog(ia.UiAction.CLICK,ia.ElementType.LINK,"cta")}clog(e,t,a){this.props.clogger.track(ia.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:ia.UiStep.SEARCH_PANE,action:e,ui_component:ia.UiComponent.HIDDEN_MESSAGES_BANNER,ui_properties:{element_type:t,element_name:a,step_variant:this.getClogStepVariantString()}}}})}renderBannerMessage(e){var t,{currentUserToDisplay:a,otherUsersToDisplay:n}=e,{hiddenMessagesCount:s,hiddenUsers:i}=this.props,[o,c,l]=n.map(e=>{var{id:t}=e;return r.a.createElement(Fa.a,{key:t,id:t,noLinking:!0})}),d=e=>{var{tag:t,text:a}=e;if("a"!==t)return null;var n=Object(oa.j)({entryPoint:"hidden_messages_banner"});return r.a.createElement(Ee.a,{href:n,onClick:this.clogClick,"data-qa":"banner_hidden_messages_upgrade_cta"},a)};switch(i.length){case 0:t=La.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),fallbackHash:"49cf70bf4860e256ac4ad7c39249c1d905e1278b"},d);break;case 1:t=a?La.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),fallbackHash:"49cf70bf4860e256ac4ad7c39249c1d905e1278b"},d):La.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> from {user1Handle} that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:o,fallbackHash:"e0e00b306fcf1dc9be2f8968aba4c663a998fdd2"},d);break;case 2:t=a?La.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle} and yourself.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:o,fallbackHash:"db9c908e896007c4ca03a95d22a348bfdc3606b3"},d):La.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle} and {user2Handle}.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:o,user2Handle:c,fallbackHash:"f75fc3a0de5cbbd8192386c8f8dbad5c6aefc555"},d);break;case 3:t=a?La.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, and yourself.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:o,user2Handle:c,fallbackHash:"027a3831dd2785910794440ff4a2fdf825866666"},d):La.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, and {user3Handle}.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:o,user2Handle:c,user3Handle:l,fallbackHash:"0834aed47d2f532db9ac4251f198eb17d1e60de4"},d);break;default:t=a?La.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, yourself, and other teammates.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:o,user2Handle:c,fallbackHash:"1b18372df292c706b9c8e6b0344379fc91fb2cb4"},d):La.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, {user3Handle}, and other teammates.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:o,user2Handle:c,user3Handle:l,fallbackHash:"fe9326538241a04ce8b934d622e15e3cee334dc2"},d)}return r.a.createElement("div",{className:"p-hidden_messages_banner__text","data-qa":"banner_hidden_messages_text"},t)}renderAvatars(e){var{currentUserToDisplay:t,otherUsersToDisplay:a}=e,n=(t?[...a,t]:a).map(e=>{var{id:t}=e;return r.a.createElement(me.c,{key:t,userId:t,ariaHidden:"true",size:36,isInteractive:!1,tabIndex:"-1",className:"p-hidden_messages_banner__avatar","data-qa":"banner_hidden_messages_avatar"})});return r.a.createElement("div",{className:"p-hidden_messages_banner__avatars","data-qa":"banner_hidden_messages_avatars"},n)}render(){if(!(this.props.hiddenMessagesCount>0))return null;var e=this.getBannerData();return this.clogImpression(),r.a.createElement(Da.a,{type:"custom",level:"warning",className:"p-hidden_messages_banner","data-qa":"banner_hidden_messages"},r.a.createElement("div",{className:"p-hidden_messages_banner__content"},e.shouldDisplayAvatars&&this.renderAvatars(e),this.renderBannerMessage(e)))}}hidden_messages_banner_HiddenMessagesBanner.defaultProps=Ha;var Wa=Object(c.b)(e=>{var t=Object(M.l)(e)||{from:[]},a=[];return t.from.forEach(t=>{a.push(Object(Je.d)(e,t.id))}),{currentUser:Object(Je.b)(e),hiddenUsers:a,hiddenMessagesCount:t.count,clogger:Object(ca.a)({state:e})}})(hidden_messages_banner_HiddenMessagesBanner),qa=a("vP1t"),Ga=a("lek6"),Ka=a("RAhH"),Va=a("qkTT"),za=a("xE6W"),Ya=a("Yujr"),Qa=a("7E97"),Xa=a("Qrgz");a("PIS5");function Ja(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Za=new B.b("search"),$a="IMPROVED_SEARCH",en={joinState:"",leaveState:"",justification:null,onClickLeave:_.a,onClickJoin:_.a,onClickChannel:_.a,canJoinChannel:!0,canLeaveChannel:!0,canLeaveChannelReason:"",channelPreviousName:null,useChannelEntity:!1,iid:"unknown",logger:{error:_.a},telemeter:{count:_.a}};class channel_search_result_ChannelSearchResult extends r.a.Component{constructor(e){super(e),Object(f.a)(this,["onFocus","onBlur","onClickJoin","onClickLeave","onActionButtonFocus","onActionButtonBlur","onActionsMouseEnter","onActionsMouseLeave","onInteractionButtonClick","onInteractionButtonFocus","onInteractionButtonBlur"]),this.state={didCatch:!1,hasFocus:!1,hasActionFocus:!1,hasActionHover:!1},this.interactionTooltipRef=r.a.createRef(),this.rootRef=r.a.createRef(),this.hasRenderedNonexistentChannel=!1}static getDerivedStateFromError(){return{didCatch:!0}}onFocus(){this.setState(()=>({hasFocus:!0}))}onBlur(){this.setState(()=>({hasFocus:!1}))}onInteractionButtonClick(e){e.preventDefault(),e.stopPropagation()}onInteractionButtonFocus(){this.interactionTooltipRef.current&&this.interactionTooltipRef.current.showTip()}onInteractionButtonBlur(){this.interactionTooltipRef.current&&this.interactionTooltipRef.current.hideTip()}onActionButtonFocus(e){this.setState(()=>({hasActionFocus:!0})),e.target.parentNode.scrollTop=0}onActionButtonBlur(){this.setState(()=>({hasActionFocus:!1}))}onActionsMouseEnter(){this.setState(()=>({hasActionHover:!0}))}onActionsMouseLeave(){this.setState(()=>({hasActionHover:!1}))}onClickJoin(e){this.props.onClickJoin(e).then(()=>{this.updateFocusState()})}onClickLeave(e){this.props.onClickLeave(e).then(()=>{this.updateFocusState()})}componentDidCatch(e,t){this.props.telemeter.count("search_ui_channels_result_channel_render_error"),this.props.logger.error($a,"Error caught by ChannelSearchResult ".concat(t.componentStack),e)}updateFocusState(){this.rootRef&&this.rootRef.current&&this.setState(()=>({hasFocus:this.rootRef.current.contains(document.activeElement)}))}trackNonExistentChannelRender(){this.hasRenderedNonexistentChannel||(this.hasRenderedNonexistentChannel=!0,this.props.telemeter.count("search_channels_nonexistent_channel_rendered",1),this.props.logger.error("Channel search displayed nonexistent channel",{channelId:this.props.channel.id,iid:this.props.iid},{subtype:"search_channels"}))}renderError(){var{onClickChannel:e}=this.props;return r.a.createElement("div",{className:"c-channel_search_result","data-qa":"channel_search_result"},r.a.createElement("div",{role:"presentation",onClick:e},r.a.createElement("div",{className:"c-channel_search_result__channel"},r.a.createElement("div",{className:"c-channel_search_result__name_error"},r.a.createElement(za.a,{type:"unknown"})),r.a.createElement("div",null,Za.t("For some reason, Slack wasn\u2019t able to fetch info about this channel.")))))}render(){if(this.state.didCatch)return this.renderError();var{channel:e,channelTeamName:t,channelPreviousName:a,memberCount:n,joinState:s,leaveState:i,justification:c,onClickChannel:l,useChannelEntity:d}=this.props,p=Za.t("Required"),u=Za.t("Archived"),h=Za.t("Can\u2019t leave"),m=Za.t("Another workspace"),b=Za.t("Can\u2019t leave"),_=Za.t("Your organization requires everyone to be in this channel."),g=Za.t("You can\u2019t join an archived channel, but you can view and search its contents."),f=Za.t("To join this channel, you\u2019ll need to switch to the {channelTeamName} workspace.",{channelTeamName:t}),v=Za.t("To leave this channel, you\u2019ll need to switch to the {channelTeamName} workspace.",{channelTeamName:t}),O=Za.t("For some reason, you can\u2019t currently change your membership for {channelName}.",{channelName:this.props.channelName}),y=Za.t("As a guest, you can\u2019t leave the channel you were invited to."),C=Za.t("As a guest, you need to be in at least one channel."),j=Object(re.nb)(e),E="loading"===s,k="loading"===i,S=j&&this.props.canLeaveChannel,I=null,w=null;if(j&&!S){switch(this.props.canLeaveChannelReason){case Xa.b.LAST_MEMBER:break;case Xa.b.USER_IS_RESTRICTED:I=h,w=y;break;case Xa.b.USER_IS_RESTRICTED_LAST_CHANNEL:case Xa.b.USER_IS_ULTRA_RESTRICTED:I=h,w=C;break;case Xa.b.CANT_LEAVE_GENERAL:case Xa.b.CANT_LEAVE_MANDATORY_SHARED_CHANNEL:I=p,w=_;break;case Xa.b.USER_NOT_FOUND:case Xa.b.CHANNEL_NOT_FOUND:default:I=b,w=O}Object(re.cb)(e)&&(I=m,w=v)}else Object(re.X)(e)?(I=u,w=g):Object(re.cb)(e)?j?(I=m,w=v):(I=m,w=f):j||this.props.canJoinChannel||(I=b,w=O);var T=!Object(re.Nb)(e)&&I&&w,N=!(Object(re.Nb)(e)||I&&w),P=Object(re.rb)(e);return P?(this.trackNonExistentChannelRender(),this.renderError()):r.a.createElement("div",{className:o()("c-channel_search_result",{"c-channel_search_result--focused":this.state.hasFocus,"c-channel_search_result--show_suffix":!(this.state.hasActionFocus||this.state.hasActionHover),"c-channel_search_result--can_leave":S}),ref:this.rootRef,onFocus:this.onFocus,onBlur:this.onBlur,"data-qa":"channel_search_result"},r.a.createElement("div",{role:"presentation",onClick:l},!P&&(d?r.a.createElement(Ya.a,{className:"c-channel_search_result__channel",channel:e,bestFormerName:a,onClick:l,inlineNameSuffix:Za.t("View channel"),nameSuffix:T&&r.a.createElement("div",{className:"c-channel_search_result__inaction_label","data-qa":"channel_search_result_inaction_label"},r.a.createElement(Ka.c,{tip:w,ref:this.interactionTooltipRef},r.a.createElement(W.c,{"aria-disabled":"true",className:"c-channel_search_result__inaction_label_button",onClick:this.onInteractionButtonClick,onFocus:this.onInteractionButtonFocus,onBlur:this.onInteractionButtonBlur},I," ",r.a.createElement(q.b,{type:"info-circle",size:"inherit"})))),showUnreadBadge:!0,metadata:r.a.createElement("div",{className:"c-channel_search_result__metadata","data-qa":"channel_search_result_metadata"},Za.t("{count, plural, =1 {# member} other {# members}}",{count:n}),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"c-channel_search_result__vline"}),r.a.createElement(q.b,{type:"sparkles-filled",size:"inherit",className:"c-channel_search_result__justification_icon"})," ",r.a.createElement(Ga.a,{className:"c-channel_search_result__justification",text:c,emojiSize:Va.a.MEDIUM,showTooltips:!1,noHighlights:!0})))}):r.a.createElement(Qa.a,{size:"medium",className:"c-channel_search_result__channel",channel:e,bestFormerName:a,onClick:l,inlineNameSuffix:Za.t("View channel"),nameSuffix:T&&r.a.createElement("div",{className:"c-channel_search_result__inaction_label","data-qa":"channel_search_result_inaction_label"},r.a.createElement(Ka.c,{tip:w,ref:this.interactionTooltipRef},r.a.createElement(W.c,{"aria-disabled":"true",className:"c-channel_search_result__inaction_label_button",onClick:this.onInteractionButtonClick,onFocus:this.onInteractionButtonFocus,onBlur:this.onInteractionButtonBlur},I," ",r.a.createElement(q.b,{type:"info-circle",size:"inherit"})))),showUnreadBadge:!0,metadata:r.a.createElement("div",{className:"c-channel_search_result__metadata","data-qa":"channel_search_result_metadata"},Za.t("{count, plural, =1 {# member} other {# members}}",{count:n}),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"c-channel_search_result__vline"}),r.a.createElement(q.b,{type:"sparkles-filled",size:"inherit",className:"c-channel_search_result__justification_icon"})," ",r.a.createElement(Ga.a,{className:"c-channel_search_result__justification",text:c,emojiSize:Va.a.MEDIUM,showTooltips:!1,noHighlights:!0})))}))),N&&r.a.createElement("div",{className:"c-channel_search_result__actions","data-qa":"channel_search_result_actions",onMouseEnter:this.onActionsMouseEnter,onMouseLeave:this.onActionsMouseLeave},r.a.createElement(W.b,{type:"danger",className:"c-channel_search_result__action_leave","data-qa":"leave-channel",loading:k,onClick:this.onClickLeave,onFocus:this.onActionButtonFocus,onBlur:this.onActionButtonBlur},k?Za.t("Leaving..."):Za.t("Leave")),r.a.createElement("div",{className:o()("c-button","c-button--medium","c-button--primary","c-channel_search_result__joined_indicator")},Za.t("Joined")),r.a.createElement(W.b,{type:"outline-primary",className:"c-channel_search_result__action_join","data-qa":"join-channel",loading:E,onClick:this.onClickJoin,onFocus:this.onActionButtonFocus,onBlur:this.onActionButtonBlur},E?Za.t("Joining..."):Za.t("Join")),r.a.createElement("div",{className:"c-button c-button--medium c-button--primary c-channel_search_result__width_placeholder"},Za.t("Joined")),r.a.createElement("div",{className:"c-button c-button--medium c-button--outline-primary c-channel_search_result__width_placeholder"},Za.t("Join")),r.a.createElement("div",{className:"c-button c-button--medium c-button--danger c-channel_search_result__width_placeholder"},Za.t("Leave")),r.a.createElement(W.b,{type:"danger",className:"c-channel_search_result__width_placeholder",loading:!0,role:"presentation"},Za.t("Leaving...")),r.a.createElement(W.b,{type:"outline-primary",className:"c-channel_search_result__width_placeholder",loading:!0,role:"presentation"},Za.t("Joining..."))))}}channel_search_result_ChannelSearchResult.defaultProps=en;var tn=Object(c.b)((e,t)=>{var{channel:a,channelData:n}=t,r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(a),!0).forEach(function(t){Object(Oe.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ja(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a,{name:n.name,purpose:n.purpose}),s=Object(Xa.j)(e,n.id),i=Object(A.d)(e);return{useChannelEntity:"channel_search_new_entity"===Object(x.c)(e,"channel_search_new_entity"),channel:Object(re.Nb)(a)?a:r,channelName:Object(re.w)(e,a),channelPreviousName:n.previous_name,channelTeamName:Object(U.e)(Object(re.cb)(a)?Object(A.i)(e,Object(re.Zb)(e,a)):i),isMember:Object(re.cb)(a)?Object(re.nb)(a):n.is_member,memberCount:n.member_count,justification:n.justification,joinState:Object(l.a)(e,n.id),leaveState:Object(l.b)(e,n.id),canJoinChannel:Object(Xa.f)(e,n.id),canLeaveChannel:s.ok,canLeaveChannelReason:s.reason,logger:Object(j.a)({state:e}),telemeter:Object(pe.c)({state:e})}})(channel_search_result_ChannelSearchResult),an=a("ipyK"),nn=a("Muja"),rn=a("IF1j"),sn=a("hCvz"),on=a("Cudy"),cn=a("Apsv"),ln=a("mOAw"),dn=a("O/xh"),pn=a("ZYn4"),un=a("zZZw"),hn=a("1zbP"),mn=a("e9Nc"),bn=a("BrU6"),_n=Object(S.b)("People search result top terms clicked",function(e,t){var{member:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t(),r=Object(ue.b)(n),s=Object(mn.b)(n,a),i="".concat(r," ").concat(s);return e(Object(bn.a)({textyString:i,queryIsUserGenerated:!1})).then(()=>(e(Object(E.I)({tab:"messages"})),e(Object(M.y)({query:i}))))});_n.meta={name:"peopleSearchRefineTopTerms",key:"actionsUniversalSearchPeopleSearchTopTermsPeopleSearchRefineTopTerms",description:"People search result top terms clicked"},_n.propTypes={member:s.default.object.isRequired};a("Bui7");var gn=new B.b("member_profile"),fn="IMPROVED_SEARCH",vn={iid:"",displayQuery:"",onClickMember:_.a,clogSearchPeopleClick:_.a,startImByMemberId:_.a,closeSearch:_.a,onClickTopTerms:_.a,showMemberProfile:_.a,onNavigateError:_.a,onViewProfileError:_.a,logger:{error:_.a},telemeter:pe.d},On=e=>r.a.createElement(Ga.a,{emojiSize:Va.a.SMALL,text:e,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noEmojiText:!0,noHexColors:!0,noCode:!0,noQuotes:!0,noHighlights:!0}),yn=()=>/[\ue000\ue001]/g,Cn=e=>yn().test(e);class people_search_result_PeopleSearchResult extends r.a.Component{constructor(e){super(e),Object(f.a)(this,["onClickMemberName","onClickMember","onFocusResult","onBlurResult","onFocusPerson","onBlurPerson","onClickShowMore","onClickNavigate","onClickViewProfile","onInfoTooltipClick","onInfoTooltipFocus","onInfoTooltipBlur","onClickTopTerms"]),this.infoTooltipRef=r.a.createRef(),this.state={didCatch:!1,resultHasFocus:!1,personHasFocus:!1,isExpanded:!1}}static getDerivedStateFromError(){return{didCatch:!0}}shouldComponentUpdate(e,t){return!Object(nn.a)(this.props,e)||!Object(nn.a)(this.state,t)}onFocusResult(){this.setState(()=>({resultHasFocus:!0}))}onBlurResult(){this.setState(()=>({resultHasFocus:!1}))}onFocusPerson(){this.setState(()=>({personHasFocus:!0}))}onBlurPerson(){this.setState(()=>({personHasFocus:!1}))}onClickMember(e){e.isDefaultPrevented()||this.props.onClickMember(e)}onClickMemberName(e){e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:I.c.avatar,iid:this.props.iid,userId:this.props.member.id}),this.props.featureReactMemberProfileCard||(e.persist(),Object(ln.a)(e,this.props.member.id))}onClickShowMore(e){e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:I.c.showMore,iid:this.props.iid,userId:this.props.member.id}),this.setState(()=>({isExpanded:!0}))}onClickNavigate(e){e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:I.c.navigateToMessages,iid:this.props.iid,userId:this.props.member.id}),this.props.startImByMemberId({memberId:this.props.member.id}).then(()=>{this.props.closeSearch()}).catch(t=>{throw this.props.onNavigateError(()=>this.onClickNavigate(e)),t})}onClickViewProfile(e){e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:I.c.viewProfile,iid:this.props.iid,userId:this.props.member.id}),this.props.showMemberProfile({memberId:this.props.member.id}).then(()=>{this.props.closeSearch()}).catch(t=>{throw this.props.onViewProfileError(()=>this.onClickViewProfile(e)),t})}onClickTopTerms(e){e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:I.c.topTerms,iid:this.props.iid,userId:this.props.member.id}),this.props.onClickTopTerms({member:this.props.member})}onInfoTooltipClick(e){e.preventDefault(),e.stopPropagation()}onInfoTooltipFocus(){this.infoTooltipRef.current&&this.infoTooltipRef.current.showTip()}onInfoTooltipBlur(){this.infoTooltipRef.current&&this.infoTooltipRef.current.hideTip()}getRenderingData(){var{member:e,memberWithHighlights:t,teamCustomProfileFields:a,customProfileFieldMemberNamesById:n}=this.props,s=Object(Et.xb)(e),i=!!t.top_terms,o=Object(Et.K)(t),c=Object(Et.F)(t),l=Object(Et.S)(t),d=Object(Et.D)(t),p=Object(Et.v)(t),u=Object(Et.J)(t),h=Object(Et.E)(t),m=h&&h.status_emoji,b=h&&h.status_text;if(s)return{rows:[],realName:o,memberTitle:l};var _=[];if(c&&o!==c&&Cn(c)&&_.push({className:null,key:"displayname",term:gn.t("Display name",{ns:"member_profile"}),valueAsText:c,node:On(c)}),p&&Cn(p)&&_.push({className:null,key:"email",term:gn.t("Email address",{ns:"member_profile"}),valueAsText:p,node:On(p)}),d&&Cn(d)&&_.push({className:null,key:"phone",term:gn.t("Phone number",{ns:"member_profile"}),valueAsText:d,node:On(d)}),m&&Cn(m)||b&&Cn(b)){var g=[];m&&g.push(m),b&&g.push(b);var f=g.join(" ");_.push({className:null,key:"status",term:gn.t("Status",{ns:"member_profile"}),valueAsText:f,node:On(f)})}return a.forEach(e=>{var t=e.name;if(u&&u[t]&&u[t].value&&yn().test(u[t].value))if("user"===e.type){var a=u[t].value.split(","),r=Object(un.a)(a.map(e=>{var t=Cn(e),a=e.replace(yn(),"");return t?"\ue000".concat(n[a],"\ue001"):n[a]}),{noConj:!0}).join("");_.push({className:null,key:t,term:e.label,valueAsText:r,node:On(r)})}else"link"!==e.type&&_.push({className:null,key:t,term:e.label,valueAsText:u[t].value,node:On(u[t].value)})}),i&&_.push({className:"p-people_search_result__row--top_terms",key:"top_terms",term:null,valueAsText:"top_terms",node:r.a.createElement("span",{className:"p-people_search_result__top_terms"},r.a.createElement(q.b,{className:"p-people_search_result__top_terms_sparkles",type:"sparkles_filled",inline:!0,size:"inherit"}),r.a.createElement(wt.a,{className:"p-people_search_result__top_terms_link","data-qa":"people_search_result__top_terms_link",onClick:this.onClickTopTerms},gn.rt("Talks about \u201c{query}\u201d",{query:r.a.createElement(Ga.a,{className:"p-people_search_result__top_terms_term",emojiSize:Va.a.SMALL,text:this.props.displayQuery,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noHexColors:!0,noCode:!0,noQuotes:!0,noHighlights:!0})})),r.a.createElement(Ka.c,{tip:gn.t("Based on public channels and conversations with you"),ref:this.infoTooltipRef},r.a.createElement(Se.a,{"aria-disabled":"true",className:"p-people_search_result__top_terms_info",onClick:this.onInfoTooltipClick,onFocus:this.onInfoTooltipFocus,onBlur:this.onInfoTooltipBlur},r.a.createElement(q.b,{type:"info-circle",inline:!0,size:"inherit"}))))}),{rows:_=Object(an.a)(_,(e,t)=>e.term===t.term&&e.valueAsText===t.valueAsText),realName:o,memberTitle:l}}componentDidCatch(e,t){this.props.telemeter.count("search_ui_people_result_people_render_error"),this.props.logger.error(fn,"Error caught by PeopleSearchResult ".concat(t.componentStack),e)}render(){var e,{member:t,featureReactMemberProfileCard:a}=this.props,n=Object(Et.P)(t),s=Object(Et.ib)(t),i=Object(Et.mb)(t),c=Object(Et.Kb)(t),l=Object(Et.tb)(t),d=Object(Et.Hb)(t),p=Object(hn.c)(t),u=Object(hn.d)(t),h=Object(Et.xb)(t);if(this.state.didCatch||p)return r.a.createElement("div",{className:"p-people_search_result p-people_search_result--non_existent"},r.a.createElement("div",{className:"p-people_search_result__person"},r.a.createElement("div",{className:"p-people_search_result__avatar_placeholder"}),r.a.createElement("div",{className:"p-people_search_result__body"},gn.t("For some reason, Slack wasn\u2019t able to display this result."))));if(u)return r.a.createElement("div",{className:"p-people_search_result p-people_search_result--unknown"},r.a.createElement("div",{className:"p-people_search_result__person"},r.a.createElement("div",{className:"p-people_search_result__avatar_placeholder"}),r.a.createElement("div",{className:"p-people_search_result__body"},r.a.createElement("div",{className:"p-people_search_result__row"},r.a.createElement(sn.b,{size:"random"})),r.a.createElement("div",{className:"p-people_search_result__row"},r.a.createElement(sn.b,{size:"random"})))));e=i||c?gn.t("View History"):gn.t("Message");var{rows:m,realName:b,memberTitle:_}=this.getRenderingData(),g=!!_||h,f=m.length>0,v=g?m.length>1:m.length>2,O=this.state.isExpanded?m.length:3,y=!this.state.isExpanded&&m.length>O;return r.a.createElement("div",{className:o()("p-people_search_result",{"p-people_search_result--has-focus":this.state.resultHasFocus}),onFocus:this.onFocusResult,onBlur:this.onBlurResult},r.a.createElement("div",{role:"presentation",onClick:this.onClickMember,"data-qa":"people_search_result"},r.a.createElement("div",{className:o()("p-people_search_result__person",{"p-people_search_result__person--has-focus":this.state.personHasFocus,"p-people_search_result__person--deactivated":i}),onFocus:this.onFocusPerson,onBlur:this.onBlurPerson},r.a.createElement(rn.c,{className:"p-people_search_result__avatar",size:70,user:t,userId:t.id,isExternal:l,teamId:n,isInteractive:!0,showCard:!0,showTooltip:!0,showBadge:!1,ariaHidden:"true",tabIndex:"-1"}),r.a.createElement("div",{className:o()("p-people_search_result__body",{"p-people_search_result__body--many_rows":v,"p-people_search_result__body--no_title":!g})},r.a.createElement("div",{className:"p-people_search_result__name","data-qa":"people_search_result__name"},a?r.a.createElement(dn.a,{userId:t.id,onClick:this.onClickMemberName},r.a.createElement(Se.a,{className:"p-people_search_result__name_button","data-qa":"people_search_result__name_button"},r.a.createElement(on.a,{"data-qa":"name",name:On(b),isAppOrBot:s,isDeleted:i,isSelf:d,isNonExistent:p,isUnknown:u}))):r.a.createElement(Se.a,{onClick:this.onClickMemberName,className:"p-people_search_result__name_button","data-qa":"people_search_result__name_button"},r.a.createElement(on.a,{"data-qa":"name",name:On(b),isAppOrBot:s,isDeleted:i,isSelf:d,isNonExistent:p,isUnknown:u})),!i&&r.a.createElement(pn.a,{memberId:t.id,"data-qa":"people_search_result__presence",className:"c-member__presence"})),g&&r.a.createElement("div",{className:"p-people_search_result__title","data-qa":"people_search_result__title"},h?gn.t("Invited member",{fallbackHash:"c4649618a3f5b67c775775107529f167c8d739e5",fallbackHashNs:"members"}):On(_)),f&&r.a.createElement("div",{className:"p-people_search_result__rows","data-qa":"people_search_result__rows"},m.slice(0,O).map(e=>r.a.createElement("div",{key:e.key,className:o()("p-people_search_result__row",e.className),"data-qa":"people_search_result__row"},e.term&&r.a.createElement("b",{"data-qa":"people_search_result__term",className:"p-people_search_result__term"},e.term,":"," "),r.a.createElement("span",{"data-qa":"people_search_result__definition",className:"p-people_search_result__definition"},e.node)))),y&&!this.state.isExpanded&&r.a.createElement(wt.a,{className:"p-people_search_result__show_more","data-qa":"people_search_result__show_more",onClick:this.onClickShowMore,"aria-expanded":"false"},gn.t("Show more\u2026"))))),r.a.createElement("div",{className:"p-people_search_result__actions"},r.a.createElement(W.d,{className:"p-people_search_result__action_button",type:"outline",size:"medium",onClick:this.onClickNavigate,"data-qa":"people_search_result__message-button"},e),r.a.createElement(W.d,{className:"p-people_search_result__action_button",type:"outline",size:"medium",onClick:this.onClickViewProfile,"data-qa":"people_search_result__profile-button"},gn.t("View Profile"))))}}people_search_result_PeopleSearchResult.defaultProps=vn;var jn=Object(c.b)((e,t)=>{var{memberWithHighlights:a}=t,n=Object(A.d)(e),r=Object(cn.a)(n),s=Object(Et.J)(a),i={};return s&&r.forEach(t=>{if("user"===t.type){var a=s&&s[t.name];a&&a.value&&a.value.split(",").forEach(t=>{var a=t.replace(/[\ue000\ue001]/g,""),n=Object(Je.d)(e,a);i[a]=Object(Et.K)(n)})}}),{featureReactMemberProfileCard:Object(O.m)(e,"feature_react_member_profile_card"),teamCustomProfileFields:r,customProfileFieldMemberNamesById:i,displayQuery:Object(ue.b)(e),logger:Object(j.a)({state:e}),telemeter:Object(pe.c)({state:e})}},e=>({clogSearchPeopleClick:function(){return e(Object(I.l)(...arguments))},closeSearch:function(){return e(Object(D.a)(...arguments))},onClickTopTerms:function(){return e(_n(...arguments))}}))(people_search_result_PeopleSearchResult);function En(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function kn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?En(Object(a),!0).forEach(function(t){Object(Oe.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):En(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Sn=new B.b("search"),In={HEADER:"search-result-header",RELATED_RESULTS_HEADER:"search-related-results-header",LOADING:"search-loading",BLANK:"search-blank",ERROR:"search-error",ERROR_RETRY:"search-error-retry",DEBUG:"search-debug-info",HIDDEN_MESSAGES:"search-hidden-messages-banner",MESSAGE_LIMIT_MESSAGES:"search-message-limit-banner-messages",MESSAGE_LIMIT_FILES:"search-message-limit-banner-files",NO_MESSAGE_RESULTS:"search-no-message-results",NO_MESSAGE_RESULTS_FUZZY_MATCH:"search-no-message-results-fuzzy-match",NO_FILE_RESULTS:"search-no-file-results",NO_CHANNEL_RESULTS:"search-no-channel-results",NO_PEOPLE_RESULTS:"search-no-people-results",MESSAGE_RESULT:"search-message-result",PAGER:"search-pager",FEEDBACK_LINK:"search-feedback-link",FILE_RESULT:"search-file-result",CHANNEL_RESULT:"search-channel-result",PEOPLE_RESULT:"search-people-result",PEOPLE_DISCOVERY:"search-people-discovery"},wn=(e,t)=>{var{isLoading:a,errorType:s,numResults:i,emptyResultsTitle:o,jumpToMessage:c,jumpToFile:l,onRepliesClick:d,sortDropdown:p,onClickRefreshSearch:u,onFeedbackClick:h,pageForward:b,pageBack:_,totalPageCount:g,currentPageOffset:f,onFileClick:v,clogLinkClick:O,onChannelClick:y,onChannelJoin:C,onChannelLeave:E,displayEmailAddresses:k,currentDisplayQuery:S,featureFantailNurture:I,startImByMemberId:w,showMemberProfile:T,onViewProfileError:N,onPeopleSearchResultNavigateError:P,getMemberClickHandler:A,telemeter:M,logger:x,showNumResults:R}=t;return t=>{var D=e[t];switch(D.type){case In.MESSAGE_RESULT:return r.a.createElement(Ke,Object(m.a)({key:D.data.iid},D.data,{onMessageJump:c,onFileJump:l,onRepliesClick:d,telemeter:M,logger:x,index:D.data.index}));case In.FILE_RESULT:return r.a.createElement(qa.a,{key:D.data.id,index:D.data.index,file:D.data,onClick:v,clickLinkClick:O});case In.CHANNEL_RESULT:return r.a.createElement(tn,{key:D.data.searchData.id,channel:D.data.flannelData,channelData:D.data.searchData,iid:D.data.searchData.iid,onClickChannel:y(D.data.searchData.iid,D.data.flannelData),onClickJoin:C(D.data.searchData.id),onClickLeave:E(D.data.searchData.id)});case In.PEOPLE_RESULT:return r.a.createElement(jn,{key:D.data.member.id,iid:D.data.highlightData.iid,member:D.data.member,memberWithHighlights:D.data.highlightData,onClickMember:A(D.data.member.id),startImByMemberId:w,showMemberProfile:T,onViewProfileError:N,onNavigateError:P});case In.PEOPLE_DISCOVERY:return r.a.createElement("div",{className:"c-channel_search__new_feature_alert"},r.a.createElement(q.b,{className:"c-channel_search__new_feature_icon",type:"sparkles_filled"}),r.a.createElement("div",null,Sn.rt("<strong>Find people at your organization</strong>. Now you can search for people by their name, profile info, or even the topics they talk about.",{fallbackHash:"07cbc99aff3e533e8b10d9bf430890987c65f7ae"})));case In.HEADER:return Nn({isLoading:a,errorType:s,numResults:i,emptyResultsTitle:o,sortDropdown:p,showNumResults:R});case In.LOADING:return r.a.createElement(Ea.a,{size:"large"});case In.BLANK:return r.a.createElement("p",null,Sn.t("To start your search, simply type into the box above.",{fallbackHash:"e0a09e2db4a36cd1de53ef2d911b8faa689b8983"}));case In.ERROR:return r.a.createElement("p",null,Sn.t("For some reason, Slack wasn\u2019t able to complete your search."));case In.ERROR_RETRY:return r.a.createElement("p",null,Sn.t("For some reason, Slack wasn\u2019t able to complete your search."),"\xa0",r.a.createElement(Ee.a,{"data-qa":"search-retry",onClick:u},Sn.t("Try again")));case In.DEBUG:return r.a.createElement("div",{className:"c-search__debug"},r.a.createElement("h4",{className:"c-search__section_header"},"Solr debug info"),r.a.createElement("pre",{className:"c-search__debug_json"},D.data),r.a.createElement(W.d,{className:"c-search__debug_copy",size:"small",type:"outline",onClick:()=>Object(z.c)(D.data)},"Copy to clipboard"));case In.HIDDEN_MESSAGES:return r.a.createElement(Wa,null);case In.MESSAGE_LIMIT_MESSAGES:return r.a.createElement(ha,{type:"messages"});case In.MESSAGE_LIMIT_FILES:return r.a.createElement(ha,{type:"files"});case In.NO_MESSAGE_RESULTS:return Pn(!1);case In.NO_MESSAGE_RESULTS_FUZZY_MATCH:return Pn(!0);case In.NO_FILE_RESULTS:return r.a.createElement(n.Fragment,null,r.a.createElement("p",null,Sn.t("Slack couldn\u2019t find any files related to your search. You may want to try\u2026")),Mn());case In.NO_CHANNEL_RESULTS:return r.a.createElement(n.Fragment,null,r.a.createElement("p",null,Sn.t("Slack couldn\u2019t find any channels related to your search. You may want to try\u2026")),Mn());case In.NO_PEOPLE_RESULTS:return An({displayEmailAddresses:k,currentDisplayQuery:S,featureFantailNurture:I});case In.RELATED_RESULTS_HEADER:return r.a.createElement("h4",{className:"c-search__section_header--virtualized"},Sn.rt("{totalItemCount, plural, =1 {{totalItemCountStr} related result} other {{totalItemCountStr} related results}}",{totalItemCount:D.data,totalItemCountStr:V(D.data)}));case In.PAGER:return r.a.createElement(Qe,{currentPageOffset:f,totalPageCount:g,onForward:b,onBack:_,onFeedbackClick:h});case In.FEEDBACK_LINK:return r.a.createElement(Ve.a,{className:D.data>0?"c-search__feedback_small":"c-search__feedback",onClick:h});default:return Object(j.b)().warn("Row type ".concat(D.type," is not implemented for Search virtualization"),D),M.count("search_ui__result_row_render_error"),null}}},Tn=e=>t=>{var{index:a}=t;return"presentation"!==e[a].role};function Nn(e){var{isLoading:t,errorType:a,numResults:n,emptyResultsTitle:s,sortDropdown:i,showNumResults:c}=e,l=!t&&a===N.g.NoQuery,d=!t&&!l&&a!==N.g.None,p=!(t||l||d||n),u=!t&&!l&&!d&&n>0,h=t||n>0,m=n?Sn.rt("{totalItemCount, plural, =1 {{totalItemCountStr} result} other {{totalItemCountStr} results}}",{totalItemCount:n,totalItemCountStr:V(n)}):null;return r.a.createElement("h4",{className:o()("c-search__section_header--virtualized",!c&&"c-search__section_header--compact")},l&&Sn.t("Search for messages, files, and more",{fallbackHash:"8d886c0ba6f2b683daba5f19568a316226ce3e4c"}),d&&Sn.t("Something went wrong"),p&&s,c&&r.a.createElement("span",null,u&&m),h&&r.a.createElement("div",{className:"c-search__section_more_link","data-qa":"search_sort_toggle"},i))}function Pn(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?r.a.createElement("p",null,Sn.t("You may want to try using different keywords, checking for typos, or adjusting your filters.",{fallbackHash:"4a81ec18521572e71c7085ea0c159585442445d6"})):r.a.createElement(n.Fragment,null,r.a.createElement("p",null,Sn.t("Slack couldn\u2019t find any messages related to your search. You may want to try\u2026")),Mn())}function An(e){var{displayEmailAddresses:t,currentDisplayQuery:a,featureFantailNurture:s}=e,i=a.replace(/<@[^>]*>/g,"").indexOf("@")>-1;return!t&&i&&s?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,Sn.t("Slack couldn\u2019t find any people related to your search.")),r.a.createElement("p",null,Sn.t("Searching for people by email has been disabled in this workspace. Questions? Contact a Workspace Admin."))):r.a.createElement(n.Fragment,null,r.a.createElement("p",null,Sn.t("Slack couldn\u2019t find any people related to your search. You may want to try\u2026")),Mn())}function Mn(){return r.a.createElement("ul",null,r.a.createElement("li",null,Sn.t("Using different keywords.")),r.a.createElement("li",null,Sn.t("Checking for typos.")),r.a.createElement("li",null,Sn.t("Adjusting your filters.")))}An.defaultProps={displayEmailAddresses:!0,currentDisplayQuery:"",featureFantailNurture:!1},Nn.defaultProps={isLoading:!1,errorType:void 0,numResults:void 0,emptyResultsTitle:void 0,sortDropdown:_.a,showNumResults:!0};var xn=e=>{var{moduleName:t,messageResults:a=[],fileResults:n=[],peopleResults:r=[],channelSearchResults:s=[],channelFlannelMap:i={},isLoading:o,errorType:c,isDebugInfoVisible:l,debugInfo:d,bannerType:p,isFuzzyMatchEnabled:u,totalItemCount:h,isPagerVisible:m,userQuery:b,showPeopleDiscovery:_}=e,g=[],f=!o&&c===N.g.NoQuery,v=!o&&!f&&c!==N.g.None,O=!!b,y=!o&&!f&&!v;return g.push({key:"search-result-header",type:In.HEADER,data:null,role:"presentation"}),o&&g.push({key:"search-loading",type:In.LOADING,data:null,role:"presentation"}),f&&g.push({key:"search-blank",type:In.BLANK,data:null,role:"presentation"}),v&&!O&&g.push({key:"error",type:In.ERROR,data:null,role:"presentation"}),v&&O&&g.push({key:"error-retry",type:In.ERROR_RETRY,data:null,role:"presentation"}),y&&"messages"===t&&(l&&d&&g.push({key:"solr-debug-info",type:In.DEBUG,data:JSON.stringify(d,null,2),role:"presentation"}),p===N.d&&g.push({key:"hidden-messages-banner",type:In.HIDDEN_MESSAGES,data:null,role:"presentation"}),p===N.e&&g.push({key:"message-limit-banner",type:In.MESSAGE_LIMIT_MESSAGES,data:null,role:"presentation"}),u&&(g.push({key:"no-results-fuzzy-match",type:In.NO_MESSAGE_RESULTS_FUZZY_MATCH,data:null,role:"presentation"}),h>0&&g.push({key:"related-results-header",type:In.RELATED_RESULTS_HEADER,data:h,role:"presentation"})),g.push(...a.map((e,t)=>({key:"messages-result-".concat(e.iid),type:In.MESSAGE_RESULT,data:kn({},e,{index:t}),role:"listitem"}))),!u&&h<=0&&g.push({key:"no-results",type:In.NO_MESSAGE_RESULTS,data:null,role:"presentation"}),p===N.d&&a.length>10&&g.push({key:"hidden-messages-banner",type:In.HIDDEN_MESSAGES,data:null,role:"presentation"})),y&&"files"===t&&(g.push({key:"message-limit-banner",type:In.MESSAGE_LIMIT_FILES,data:null,role:"presentation"}),g.push(...n.map((e,t)=>({key:"files-result-".concat(e.iid),type:In.FILE_RESULT,data:kn({},e,{index:t}),role:"listitem"}))),h<=0&&g.push({key:"no-file-results",type:In.NO_FILE_RESULTS,data:null,role:"presentation"})),y&&"channels"===t&&(g.push(...s.map((e,t)=>({key:"channels-result-".concat(e.iid),type:In.CHANNEL_RESULT,data:{flannelData:i[e.id],searchData:e,id:e.id,index:t},role:"listitem"}))),h<=0&&g.push({key:"no-channel-results",type:In.NO_CHANNEL_RESULTS,data:null,role:"presentation"})),"people"===t&&(_&&g.push({key:"people-search-discovery",type:In.PEOPLE_DISCOVERY,data:null,role:"presentation"}),y&&(g.push(...r.map((e,t)=>({key:"people-result-".concat(e.iid),type:In.PEOPLE_RESULT,data:{member:e.member,highlightData:e.highlightData,id:e.member.id,index:t},role:"listitem"}))),h<=0&&g.push({key:"no-people-results",type:In.NO_PEOPLE_RESULTS,data:null,role:"presentation"}))),y&&(m?g.push({key:"pager",type:In.PAGER,data:null,role:"presentation"}):g.push({key:"feedback-link",type:In.FEEDBACK_LINK,data:h,role:"presentation"})),g},Rn=new B.b("search"),Dn="IMPROVED_SEARCH",Fn="HIDDEN_MESSAGES_BANNER",Ln="MESSAGE_LIMIT_BANNER",Un={results:{},uiState:{},logInfo:_.a,setTab:_.a,telemeter:pe.d,logger:{},openSearchFeedbackDialog:_.a,bannerType:"",featureFuzzyMatch:!1,featureSearchResultsVirtualized:!1,featureSearchTabsA11yImprovements:!1,userQuery:"",isScreenReaderEnabled:!1,showNumResults:!0};class message_view_MessageView extends n.PureComponent{constructor(e){super(e),Object(f.a)(this,["pageForward","pageBack","jumpToMessage","jumpToFile","onSelectItem","onRepliesClick","setListRef","renderResultRow","renderSortToggleMenu","onFeedbackClick","setScrollPosition","getPropsForItem","onResultsFocusEnter","onResultsFocusLeave"]),this.state={hasKeyboardFocus:!1},this.searchResultsContainerRef=r.a.createRef(),this.markSearchModuleRenderStart=Object(g.a)(()=>{var t=this.props.results;Object(Y.f)("messages","messages",t&&t.pagination&&t.pagination.page||1,e.telemeter)},2e3,{leading:!0})}componentDidMount(){this.logTelemetry()}componentDidUpdate(e){e.uiState.loading===this.props.uiState.loading&&e.uiState.error===this.props.uiState.error&&e.uiState.page===this.props.uiState.page||this.logTelemetry()}onRepliesClick(e){var{channelId:t,ts:a,permalink:n}=e;this.props.logInfo(Dn,"Jumping to message replies. channel: ".concat(t," ts: ").concat(a)),this.props.openPermalink({permalink:n}).then(()=>this.props.close())}onSelectItem(e,t){var a=this.getVisibleMessages()[t];if(a&&a.messages&&a.messages.length){var n=a.messages[0];this.jumpToMessage({permalink:n.permalink,teamId:this.props.currentTeam.id})}}onFeedbackClick(){this.props.openSearchFeedbackDialog({module:"messages"})}onResultsFocusEnter(){this.setState(()=>({hasKeyboardFocus:!0}))}onResultsFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}setListRef(e){this.listEl=e}setScrollPosition(e){this.props.setViewScrollPosition({view:"messages",position:e})}getVisibleMessages(){return this.props.results.items[this.props.uiState.page]||[]}getPropsForItem(e){return t=>{var{index:a}=t,n=e[a],r={};return n.type===In.MESSAGE_RESULT&&(this.props.isScreenReaderEnabled||this.state.hasKeyboardFocus)&&(r["aria-label"]=this.props.getMessageResultSummary(n.data)),r}}makeNoResultsFragment(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return e&&t>0?r.a.createElement(C.a,{enabled:["feature_fuzzy_match"]},r.a.createElement(n.Fragment,null,r.a.createElement("p",null,Rn.t("You may want to try using different keywords, checking for typos, or adjusting your filters.",{fallbackHash:"4a81ec18521572e71c7085ea0c159585442445d6"})))):t<=0?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,Rn.t("Slack couldn\u2019t find any messages related to your search. You may want to try\u2026")),r.a.createElement("ul",null,r.a.createElement("li",null,Rn.t("Using different keywords.")),r.a.createElement("li",null,Rn.t("Checking for typos.")),r.a.createElement("li",null,Rn.t("Adjusting your filters.")))):null}jumpToMessage(e){var{teamId:t,permalink:a}=e;this.props.logInfo(Dn,"Jumping to message. team: ".concat(t," permalink: ").concat(a)),this.props.openPermalink({permalink:a}).then(()=>this.props.close()).catch(()=>this.props.logInfo(Dn,"FAILED:("))}jumpToFile(e,t){var{file:a,iid:n,ts:r,channelId:s,userId:i,botId:o,index:c}=t;this.props.logInfo(Dn,"Jumping to file. file: ".concat(a.id)),this.props.clogSearchFileClick({iid:n,ts:r,channelId:s,userId:i,botId:o,fileId:a.id,position:c}),this.props.previewFile({fileId:a.id}),this.props.close()}logTelemetry(){if(!this.props.uiState.loading&&this.props.uiState.error===N.g.None){var e=this.getVisibleMessages();e&&this.props.telemeter.count("search_ui_messages_results_view_count",e.length)}}pageForward(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo(Dn,"Page forwards in search results"),this.props.clogSearchNextPage(),this.pageSearchResults(1)}pageBack(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo(Dn,"Page backwards in search results"),this.props.clogSearchPreviousPage(),this.pageSearchResults(-1)}pageSearchResults(e){var{results:t,uiState:a}=this.props,n=Math.max(a.page+e,1);t.items[n]?this.props.setPageForModule({moduleType:"messages",page:n}):(this.props.logInfo(Dn,"Fetching more results to display on next page"),this.props.fetchSearchResultsByModule({module:"messages",reason:"search-messages-page",page:n}))}shouldRenderBottomHiddenMessagesBanner(){var{bannerType:e,uiState:t}=this.props,a=this.getVisibleMessages()||[];return e===Fn&&!t.loading&&a.length>10}renderResultRow(e){return t=>r.a.createElement(Ke,Object(m.a)({key:e[t].iid,index:t},e[t],{onMessageJump:this.jumpToMessage,onFileJump:this.jumpToFile,onRepliesClick:this.onRepliesClick,logger:this.props.logger,telemeter:this.props.telemeter}))}renderResults(){var{uiState:e}=this.props,t=[],a=[];return e.loading||(t=this.getVisibleMessages(),a=Object(b.a)(t,(e,t)=>t)||[]),r.a.createElement(ya,{ref:this.setListRef,ids:a,onSelectItem:this.onSelectItem,itemAriaLabel:e=>this.props.isScreenReaderEnabled||this.state.hasKeyboardFocus?this.props.getMessageResultSummary(t[e]):null,renderItem:this.renderResultRow(t)})}renderSortToggleMenu(e){return r.a.createElement(H.f,e,r.a.createElement(H.b,{key:"recent",label:Rn.t("Most recent"),onSelected:()=>this.props.setMessageSort({messageSort:N.f.recentMessages})}),r.a.createElement(H.b,{key:"relevant",label:Rn.t("Most relevant"),onSelected:()=>this.props.setMessageSort({messageSort:N.f.relevantMessages})}))}renderSortToggle(){var e,t,{messageSort:a,showNumResults:n,featureSearchTabsA11yImprovements:s}=this.props;return a===N.f.recentMessages?(e=Rn.t("most recent",{fallbackHash:"88ac2cf7230bd7f626ef49e4e5c391c6fb6b620e"}),t=Rn.t("Most recent")):(e=Rn.t("most relevant",{fallbackHash:"71b35d44d5b8790ce001fcd485b57fa927e93b01"}),t=Rn.t("Most relevant")),r.a.createElement(H.e,{renderMenu:this.renderSortToggleMenu,position:"bottom-right",width:180,offsetX:0,offsetY:0},r.a.createElement(W.c,{"aria-label":s?Rn.t("Message results sorted by {sortName}",{sortName:e}):void 0,className:o()(!n&&"c-search__section_header--compact")},!n&&"Sort by ",n?t:e,r.a.createElement(q.b,{type:"chevron-down",inline:!0})))}renderHiddenMessagesBanner(){var{uiState:e}=this.props;return e.loading?null:r.a.createElement(Wa,null)}renderMessageLimitBanner(){var{uiState:e}=this.props;return e.loading?null:r.a.createElement(ha,{type:"messages"})}renderDebug(){var{isDebugInfoVisible:e,results:t}=this.props,a=e&&t.debug,n=a&&JSON.stringify(t.debug,null,2);return a&&r.a.createElement("div",{className:"c-search__debug"},r.a.createElement("h4",{className:"c-search__section_header"},"Solr debug info"),r.a.createElement("pre",{className:"c-search__debug_json"},n),r.a.createElement(W.d,{className:"c-search__debug_copy",size:"small",type:"outline",onClick:()=>Object(z.c)(n)},"Copy to clipboard"))}renderSearchResults(){var{results:e,uiState:t,bannerType:a,featureFuzzyMatch:s}=this.props,i=e&&e.pagination&&e.pagination.total_count||0,o=V(i),c=e&&e.pagination&&e.pagination.page_count||0,l=c>1&&!t.loading,d=t.page||1;return r.a.createElement(n.Fragment,null,this.renderDebug(),a===Fn&&this.renderHiddenMessagesBanner(),a===Ln&&this.renderMessageLimitBanner(),this.makeNoResultsFragment(s,i),s&&i>0&&r.a.createElement(C.a,{enabled:["feature_fuzzy_match"]},r.a.createElement("h4",{className:"c-search__section_header"},Rn.rt("{totalItemCount, plural, =1 {{totalItemCountStr} related result} other {{totalItemCountStr} related results}}",{totalItemCount:i,totalItemCountStr:o}))),i>0&&this.renderResults(),this.shouldRenderBottomHiddenMessagesBanner()&&this.renderHiddenMessagesBanner(),!l&&r.a.createElement(Ve.a,{className:i>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),r.a.createElement(Qe,{visible:l,currentPageOffset:d,totalPageCount:c,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}render(){var{results:e,uiState:t,scrollPosition:a,featureFuzzyMatch:n,isDebugInfoVisible:s,bannerType:i,userQuery:o}=this.props;t.loading||this.markSearchModuleRenderStart();var c=e&&e.pagination&&e.pagination.total_count||0,l=n?0:c,d=n&&c>0?Rn.t("No exact matches",{fallbackHash:"09e2b0361ef96f7c05039903cace2ab512999989"}):Rn.t("No results",{fallbackHash:"09e2b0361ef96f7c05039903cace2ab512999989"}),p=this.getVisibleMessages(),u=t.loading,h=t.error,m=e&&e.pagination&&e.pagination.page_count||0,b=t.page||1,_=m>1&&!t.loading,g=xn({messageResults:p,moduleName:"messages",isLoading:u,errorType:h,isDebugInfoVisible:s,debugInfo:e.debug,bannerType:i,isFuzzyMatchEnabled:n,totalItemCount:c,isPagerVisible:_,userQuery:o}),f=g.map(e=>e.key),v=this.renderSortToggle(),O=wn(g,{isLoading:u,errorType:h,numResults:l,emptyResultsTitle:d,jumpToMessage:this.jumpToMessage,jumpToFile:this.jumpToFile,onRepliesClick:this.onRepliesClick,sortDropdown:v,onClickRefreshSearch:this.props.onClickRefreshSearch,pageForward:this.pageForward,pageBack:this.pageBack,onFeedbackClick:this.onFeedbackClick,totalPageCount:m,currentPageOffset:b,telemeter:this.props.telemeter,logger:this.props.logger,showNumResults:this.props.showNumResults}),y=Tn(g),C=this.getPropsForItem(g);return this.props.featureSearchResultsVirtualized?r.a.createElement(Ra,{id:"c-search__tab__messages",module:"messages",scrollPosition:a,loading:u,setScrollPosition:this.setScrollPosition,filterUI:r.a.createElement(sa,null),ref:this.searchResultsContainerRef,rowRenderer:O,rowKeys:f,rowFocusability:y,onFocusEnter:this.onResultsFocusEnter,onFocusLeave:this.onResultsFocusLeave,getPropsForItem:C,persistentKeys:[In.HEADER,In.PAGER,In.FEEDBACK_LINK]}):r.a.createElement(Ra,{id:"c-search__tab__messages",module:"messages",scrollPosition:a,loading:t.loading,errorType:t.error,setScrollPosition:this.setScrollPosition,filterUI:r.a.createElement(sa,null),numResults:l,emptyResultsTitle:d,sortDropdown:this.renderSortToggle(),onClickRefreshSearch:this.props.onClickRefreshSearch,ref:this.searchResultsContainerRef},this.renderSearchResults())}}message_view_MessageView.defaultProps=Un;var Bn={clogSearchNextPage:function(){return Object(I.j)(...arguments)},clogSearchPreviousPage:function(){return Object(I.m)(...arguments)},clogSearchFileClick:function(){return Object(I.f)(...arguments)},previewFile:function(){return Object(F.c)(...arguments)},displayModelOrViewById:R.a,fetchSearchResultsByModule:function(){return Object(T.d)(...arguments)},setMessageSort:P,setPageForModule:function(){return Object(E.u)(...arguments)},setViewScrollPosition:function(){return Object(E.J)(...arguments)},showThread:function(){return Object(F.l)(...arguments)},close:function(){return Object(D.a)(...arguments)},openPermalink:function(){return Object(de.a)(...arguments)},openSearchFeedbackDialog:function(){return Object(T.r)(...arguments)}},Hn=Object(c.b)(e=>{var t,a=Object(A.d)(e),n=Object(j.a)({state:e}),r=Object(M.q)(e,{module:"messages"})||{items:{}},s=Object(x.c)(e,"search_tab_counts"),i="counts"!==s&&"counts_and_sort"!==s,o=Object(l.j)(e,"messages"),c=Object(k.c)(e),d=Object(M.q)(e,{module:"files"})||{items:{}},p=d.pagination&&d.pagination.total_count,u=Object(le.b)(e),{count:h}=Object(M.l)(e)||{};return void 0!==h&&(h>0&&!Object(L.U)()&&"treatment"===Object(x.c)(e,"pers_search_msg_limit_warning")?t=Fn:Object(U.B)(a)&&(t=Ln)),{results:r,uiState:o,messageSort:c,currentTeam:a,numOfFileResults:p,showNumResults:i,getMessageResultSummary:t=>(function(e,t){if(!t)return null;var a,{team:n}=t,r=ie(e,t.channel),s=t.messages||[],i=Object(A.d)(e),o=null;if(n&&Object(ne.a)(n)&&i.id!==n){var c=Object(A.i)(e,n||i.id);o=Object(U.e)(c)}var l=Object(re.w)(e,r,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),d=Z(s),p=s.length,u=i&&i.id!==n&&Object(ne.a)(n);a=Object(re.hb)(r)?oe.t("{count, plural, =1 {Direct} other {# messages from a direct}} message with {conversationName} on {date}:",{conversationName:l,date:d,count:p}):Object(re.pb)(r)?oe.t("{count, plural, =1 {Group} other {# messages from group}} message with {conversationName} on {date}:",{conversationName:l,date:d,count:p}):Object(re.yb)(r)?oe.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a pending shared channel, on {date}:",{conversationName:l,date:d,count:p,fallbackHash:"24663e65e2ac4dc269e630e2237e65674bc121fd"}):Object(re.ab)(r)?oe.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:l,date:d,count:p}):u?oe.t("{count, plural, =1 {From} other {# messages in}} {conversationName} in {workspaceName} on {date}:",{conversationName:l,date:d,count:p,workspaceName:o}):Object(re.vb)(r)?oe.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:l,date:d,count:p}):oe.t("{count, plural, =1 {From} other {# messages in}} {conversationName} on {date}:",{conversationName:l,date:d,count:p}),a=Object(Q.a)(a);var h=s.map(t=>Object(X.a)({day:{ts:t.ts,isFirstDay:!1,isLastDay:!1},name:Object($.a)(e,{userId:t.user}),time:Object(ae.a)(t.ts,{do24hrTime:Object(te.k)(e,"time24"),includeSeconds:!1}),text:Object(ee.a)(e,t.text.replace(ce,"")),reactionCount:t.reactions&&t.reactions.length||0,replyCount:t.reply_count||0,isStarred:t.is_starred,isPinned:!1,isFirstMsgForDay:!1,isLastMsgForDay:!1,isFirstUnreadMsg:!1})).join(". ");return"".concat(a," ").concat(h,".")})(e,t),logInfo:n.info,logger:n,isScreenReaderEnabled:u,isDebugInfoVisible:Object(l.h)(e),scrollPosition:Object(l.q)(e).messages,telemeter:Object(pe.c)({state:e}),bannerType:t,featureFuzzyMatch:y(e,r),featureSearchResultsVirtualized:Object(O.m)(e,"feature_search_results_virtualized"),featureSearchTabsA11yImprovements:Object(O.m)(e,"feature_search_tabs_a11y_improvements"),userQuery:Object(ue.d)(e)}},Bn)(message_view_MessageView),Wn=a("GTwG"),qn=new B.b("search"),Gn=/[\ue000\ue001]/g;var Kn=new B.b("search"),Vn="IMPROVED_SEARCH",zn={clogFileClick:_.a,clogSearchFileClick:_.a,clogSearchNextPage:_.a,clogSearchPreviousPage:_.a,close:_.a,error:"",fetchSearchResultsByModule:_.a,fileResults:{},fileSearchSortChanged:_.a,fileSort:N.c.relevant,fileState:{},getFileResultSummary:_.a,loading:!1,logInfo:_.a,onClickRefreshSearch:_.a,previewFile:_.a,scrollPosition:0,setPageForModule:_.a,setViewScrollPosition:_.a,telemeter:pe.d,openSearchFeedbackDialog:_.a,featureSearchResultsVirtualized:!1,isScreenReaderEnabled:!1,showNumResults:!0,featureSearchTabsA11yImprovements:!1};class file_view_FileViewBase extends n.PureComponent{constructor(e){super(e),Object(f.a)(this,["pageForward","pageBack","pageSearchResults","setListRef","onFileClick","onSelectItem","setScrollPosition","clogLinkClick","onFeedbackClick","renderSortToggle","onResultsFocusEnter","onResultsFocusLeave"]),this.searchResultsContainerRef=r.a.createRef(),this.state={hasKeyboardFocus:!1},this.markSearchModuleRenderStart=Object(g.a)(()=>{var{fileResults:t}=this.props;Object(Y.f)("files","score",t&&t.pagination&&t.pagination.page||1,e.telemeter)},2e3,{leading:!0})}componentDidMount(){this.logTelemetry()}componentDidUpdate(e){e.loading===this.props.loading&&e.error===this.props.error&&e.fileState.page===this.props.fileState.page||this.logTelemetry()}onFileClick(e,t){var{file:a,index:n}=t;this.props.logInfo(Vn,"Jumping to file. file: ".concat(a.id)),this.props.clogSearchFileClick({iid:a.iid,userId:a.user,fileId:a.id,position:n}),this.props.previewFile({fileId:a.id}),this.props.close()}onResultsFocusEnter(){this.setState(()=>({hasKeyboardFocus:!0}))}onResultsFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}onSelectItem(e,t){var a=this.getVisibleFiles()[t];this.onFileClick(e,{file:a,index:t})}onFeedbackClick(){this.props.openSearchFeedbackDialog({module:"files"})}getPropsForItem(e){return t=>{var{index:a}=t,n=e[a],r={};return n.type===In.FILE_RESULT&&(this.state.hasKeyboardFocus||this.props.isScreenReaderEnabled)&&(r["aria-label"]=this.props.getFileResultSummary(n.data)),r}}getClogLinkClickHandler(e){return t=>{this.clogLinkClick(e[0],t)}}setListRef(e){this.listEl=e}setScrollPosition(e){this.props.setViewScrollPosition({view:"files",position:e})}getVisibleFiles(){return this.props.fileResults.items[this.props.fileState.page]||[]}clogLinkClick(e,t){this.props.clogFileClick({file:e,payload:t})}logTelemetry(){if(!this.props.loading&&this.props.error===N.g.None){var e=this.getVisibleFiles();e&&this.props.telemeter.count("search_ui_files_results_view_count",e.length)}}pageForward(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo(Vn,"Page forwards in search results"),this.props.clogSearchNextPage(),this.pageSearchResults(1)}pageBack(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo(Vn,"Page backwards in search results"),this.props.clogSearchPreviousPage(),this.pageSearchResults(-1)}pageSearchResults(e){var{fileState:t,fileResults:a}=this.props,n=Math.max(t.page+e,1);a.items[n]?this.props.setPageForModule({moduleType:"files",page:n}):this.props.fetchSearchResultsByModule({module:"files",sort:"score",reason:"search-files-page",page:n})}renderSortToggle(){var e,t;return this.props.fileSort===N.c.recent?(t=Kn.t("most recent",{fallbackHash:"88ac2cf7230bd7f626ef49e4e5c391c6fb6b620e"}),e=Kn.t("Most recent")):(t=Kn.t("most relevant",{fallbackHash:"71b35d44d5b8790ce001fcd485b57fa927e93b01"}),e=Kn.t("Most relevant")),r.a.createElement(H.e,{"data-qa":"file_sort_toggle",renderMenu:e=>{var{onTriggerClose:t}=e;return r.a.createElement(H.f,null,r.a.createElement(H.b,{"data-qa-sort":N.c.recent,onSelected:()=>{this.props.fileSearchSortChanged({sort:N.c.recent}),t()}},Kn.t("Most recent")),r.a.createElement(H.b,{"data-qa-sort":N.c.relevant,onSelected:()=>{this.props.fileSearchSortChanged({sort:N.c.relevant}),t()}},Kn.t("Most relevant")))},position:"bottom-right",width:180,offsetX:0,offsetY:0},r.a.createElement(W.c,{"data-qa":"file_sort_selection","aria-label":this.props.featureSearchTabsA11yImprovements?Kn.t("File results sorted by {sortName}",{sortName:t}):void 0,className:o()(!this.props.showNumResults&&"c-search__section_header--compact")},!this.props.showNumResults&&"Sort by ",this.props.showNumResults?e:t,r.a.createElement(q.b,{type:"chevron-down",inline:!0})))}renderFiles(){var{fileState:e,fileResults:t}=this.props,a=[],n=[];return t.items[e.page||1]&&(this.markSearchModuleRenderStart(),n=(a=this.getVisibleFiles()).map((e,t)=>t)),r.a.createElement(ya,{ref:this.setListRef,ids:n,onSelectItem:this.onSelectItem,renderItem:e=>r.a.createElement(qa.a,{key:a[e].id,index:e,file:a[e],onClick:this.onFileClick,clogLinkClick:e=>{this.clogLinkClick(a[0],e)}}),itemAriaLabel:e=>!(!this.props.isScreenReaderEnabled&&!this.state.hasKeyboardFocus)&&this.props.getFileResultSummary(a[e])})}renderSearchResults(){var{fileState:e,fileResults:t,loading:a}=this.props,s=t&&t.pagination&&t.pagination.total_count||0,i=t&&t.pagination&&t.pagination.page_count||0,o=i>1&&!this.props.loading,c=e.page||1;return r.a.createElement(n.Fragment,null,!a&&r.a.createElement(ha,{type:"files"}),s>0&&this.renderFiles(),s<=0&&r.a.createElement(n.Fragment,null,r.a.createElement("p",null,Kn.t("Slack couldn\u2019t find any files related to your search. You may want to try\u2026")),r.a.createElement("ul",null,r.a.createElement("li",null,Kn.t("Using different keywords.")),r.a.createElement("li",null,Kn.t("Checking for typos.")),r.a.createElement("li",null,Kn.t("Adjusting your filters.")))),!o&&r.a.createElement(Ve.a,{className:s>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),r.a.createElement(Qe,{visible:o,currentPageOffset:c,totalPageCount:i,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}render(){this.props.loading||this.markSearchModuleRenderStart();var{scrollPosition:e,loading:t,fileResults:a,fileState:n,error:s}=this.props,i=a&&a.pagination&&a.pagination.total_count||0,o=Kn.t("No results",{fallbackHash:"7cded9ea830e64e87819b27ea57209379f4858af"});if(this.props.featureSearchResultsVirtualized){var c=a&&a.pagination&&a.pagination.page_count||0,l=this.getVisibleFiles(),d=c>1&&!this.props.loading,p=n.page||1,u=xn({moduleName:"files",fileResults:l,isLoading:t,totalItemCount:i,isPagerVisible:d,errorType:s}),h=u.map(e=>e.key),m=wn(u,{isLoading:t,errorType:s,numResults:i,emptyResultsTitle:o,onFileClick:this.onFileClick,clogLinkClick:this.getClogLinkClickHandler(l),onFeedbackClick:this.onFeedbackClick,pageForward:this.pageForward,pageBack:this.pageBack,totalPageCount:c,currentPageOffset:p,sortDropdown:this.renderSortToggle(),telemeter:this.props.telemeter,showNumResults:this.props.showNumResults}),b=Tn(u),_=this.getPropsForItem(u);return r.a.createElement(Ra,{id:"c-search__tab_file",module:"files",scrollPosition:e,ref:this.searchResultsContainerRef,setScrollPosition:this.setScrollPosition,filterUI:r.a.createElement(sa,{showFileFilters:!0}),rowKeys:h,rowRenderer:m,rowFocusability:b,onFocusEnter:this.onResultsFocusEnter,onFocusLeave:this.onResultsFocusLeave,getPropsForItem:_})}return r.a.createElement(Ra,{id:"c-search__tab_file",module:"files",scrollPosition:e,loading:t,setScrollPosition:this.setScrollPosition,filterUI:r.a.createElement(sa,{showFileFilters:!0}),numResults:i,emptyResultsTitle:o,errorType:this.props.error,onClickRefreshSearch:this.props.onClickRefreshSearch,ref:this.searchResultsContainerRef,sortDropdown:this.renderSortToggle()},this.renderSearchResults())}}file_view_FileViewBase.defaultProps=zn;var Yn={setPageForModule:function(){return Object(E.u)(...arguments)},setViewScrollPosition:function(){return Object(E.J)(...arguments)},fetchSearchResultsByModule:function(){return Object(T.d)(...arguments)},clogSearchFileClick:function(){return Object(I.f)(...arguments)},clogFileClick:function(){return Object(Wn.a)(...arguments)},clogSearchNextPage:function(){return Object(I.j)(...arguments)},clogSearchPreviousPage:function(){return Object(I.m)(...arguments)},previewFile:function(){return Object(F.c)(...arguments)},close:function(){return Object(D.a)(...arguments)},fileSearchSortChanged:function(){return ct(...arguments)},openSearchFeedbackDialog:function(){return Object(T.r)(...arguments)}},Qn=Object(c.b)(e=>{var t=Object(M.q)(e,{module:"files"})||{items:[]},a=Object(x.c)(e,"search_tab_counts"),n="counts"!==a&&"counts_and_sort"!==a,r=Object(l.j)(e,"files"),s=Object(M.q)(e,{module:"messages"})||{items:{}};return{fileResults:t,fileState:r,numOfMessageResults:s.pagination&&s.pagination.total_count,getFileResultSummary:t=>(function(e,t){if(!t)return null;var{pretty_type:a,name:n,timestamp:r,user:s}=t,i=Object(J.i)(Object(J.l)(r,{returnMoment:!0}),{shortenMonth:!1,excludeYear:Object(J.h)(r)});return Object(Q.a)(qn.t("{type} file \u201c{fileName}\u201d shared by {user} on {date}",{type:a,fileName:n.replace(Gn,""),user:Object($.a)(e,{userId:s}),date:i}))})(e,t),isScreenReaderEnabled:Object(le.b)(e),scrollPosition:Object(l.q)(e).files,loading:r&&r.loading,error:r&&r.error,logInfo:Object(j.a)({state:e}).info,fileSort:Object(at.a)(e),telemeter:Object(pe.c)({state:e}),featureSearchResultsVirtualized:Object(O.m)(e,"feature_search_results_virtualized"),featureSearchTabsA11yImprovements:Object(O.m)(e,"feature_search_tabs_a11y_improvements"),showNumResults:n}},Yn)(file_view_FileViewBase),Xn=a("1myf"),Jn=a("K7TJ"),Zn=a("Z7Ay"),$n=a("ynxK"),er=a("qafc"),tr=a("ns4K"),ar=a("S3eg"),nr=a("CUc0"),rr=a("G4Tr"),sr=new B.b("search");var ir=a("x4bP"),or=(s.default.shape({type:s.default.oneOf(Object(et.a)(N.a)),teamId:s.default.string,teamDisplayName:s.default.string}),s.default.shape({state:s.default.oneOf(["ready","loading","error"]).isRequired,teams:s.default.arrayOf(s.default.shape({id:s.default.string.isRequired,name:s.default.string.isRequired})).isRequired}),s.default.arrayOf(s.default.string),s.default.arrayOf(s.default.string),a("BeL+")),cr=a("wfE8"),lr=Object(S.b)("Channel/people search: fetch shared teams",function(e,t){var{reason:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object(l.s)(t());return"ready"===n.state&&n.refreshed<=Date.now()-36e5||"error"===n.state?(e(Object(E.E)()),e(Object(cr.n)({reason:a})).then(a=>{if(!a.ok)throw new Error(a);var n=Object(or.a)(a.channels.map(e=>e.team.id)),r=t(),s={[Object(Ze.b)(r)]:!0};Object($e.d)(r)&&(s[Object(Ze.a)(r)]=!0,Object(A.a)(r).forEach(e=>{s[e.id]=!0}));var i=n.filter(e=>!s[e]);e(Object(E.F)({teamIds:i})),e(Object(E.k)({teamIds:i.slice(0,3)})),e(Object(E.x)({teamIds:i.slice(0,3)}))}).catch(()=>{e(Object(E.D)())})):Promise.resolve()});lr.meta={name:"fetchSharedTeams",key:"actionsUniversalSearchFetchSharedTeamsFetchSharedTeams",description:"Channel/people search: fetch shared teams"},lr.propTypes={reason:s.default.string};var dr=Object(S.b)("Channel search filter select is opened",e=>e(lr({reason:"channel_search_open"})));dr.meta={name:"channelSearchOpened",key:"actionsUniversalSearchChannelSearchOpenedChannelSearchOpened",description:"Channel search filter select is opened"},dr.propTypes=null;var pr=a("hE2u"),ur=new B.b("search"),hr={sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:_.a,clogSearchFilterRemoved:_.a};class search_org_filter_SearchOrgFilter extends n.PureComponent{constructor(e){super(e),Object(f.a)(this,["loadOptions","filterOptions","renderOption"])}onOrgFilterChange(e,t){var{filters:a}=this.props,n=!a.includes(e);n?this.props.clogSearchFilterAdded({filter_channel_team:e,filter_position:t}):this.props.clogSearchFilterRemoved({filter_channel_team:e,filter_position:t}),this.props.toggleSearchOrgFilter({teamId:e,value:n})}loadOptions(e){var{sharedTeams:t}=this.props,a=new pr.b(e);return Promise.resolve({options:Object(Xn.a)(t.teams.map(t=>({value:t.id,score:0===e.length?0:a.normalizeAndScore(Object(U.e)(t))})),"score")})}filterOptions(e,t){var{filters:a}=this.props;return t.filter(e=>isFinite(e.score)&&!a.includes(e.value))}renderOption(e){var{filters:t}=this.props,a=e.value;return r.a.createElement(n.Fragment,null,r.a.createElement(Rt.b,{id:a,size:18,ariaHidden:"true",tabIndex:"-1"})," ",r.a.createElement("span",{className:"no_wrap overflow_ellipsis padding_left_50"},r.a.createElement(Dt.a,{bold:t.includes(a),id:a})))}render(){var{sharedTeams:e,filters:t,filterSuggestions:a}=this.props,n="loading"===e.state,s=e.teams&&e.teams.length>0;if(n||!s)return null;var i=a.map(e=>({value:e,checked:t.includes(e)}));return r.a.createElement(Wt,{title:ur.t("External organizations")},r.a.createElement(Mt,{checkboxName:"external_org",placeholderText:ur.t("Enter an external organization"),showMoreOptionsAriaLabel:ur.t("More external organizations to filter by"),loadOptions:this.loadOptions,renderVisibleOption:this.renderOption,renderOption:this.renderOption,visibleOptions:i,onOptionChange:e=>{this.onOrgFilterChange(e.value,i.indexOf(e))},onOptionAdd:e=>{this.onOrgFilterChange(e.value,null)},filterOptions:this.filterOptions}))}}search_org_filter_SearchOrgFilter.defaultProps=hr;a("a001");var mr=new B.b("search");class channels_filter_channel_type_ChannelsFilterChannelType extends n.Component{constructor(){super(),this.onChange=this.onChange.bind(this)}onChange(e){this.props.onChannelTypeChange({type:e.value})}render(){var{sharedTeams:e}=this.props,t=["all","private","archived"];"ready"===e.state&&e.teams.length>1&&t.push("shared");var a={all:mr.t("All channels"),private:mr.t("Private channels"),archived:mr.t("Archived channels"),shared:mr.t("Shared channels")},n=t.map(e=>({label:a[e],value:e})),s=n.find(e=>e.value===this.props.channelType.type);return r.a.createElement(Xt.a,{width:"100%",selectId:"channel_filter_type",options:n,selectedOption:s,onOptionSelected:this.onChange})}}channels_filter_channel_type_ChannelsFilterChannelType.defaultProps={channelType:{type:N.a.all},sharedTeams:{state:"ready",teams:[]},onChannelTypeChange:_.a};var br=new B.b("search");function _r(e){var{filterWorkspaceOnly:t,currentTeam:a}=e;return r.a.createElement("label",{className:o()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":t}),htmlFor:"search-channel-filter-workspace-only"},br.rt("Only search {currentTeamNameAndIcon}",{fallbackHash:"b326da02faf635a430ceb2bda81e5803542e7b21",currentTeamNameAndIcon:r.a.createElement(n.Fragment,null,r.a.createElement(Rt.b,{className:"p-search_filter__workspace_only_team_icon",team:a,size:18})," ",r.a.createElement(Dt.a,{id:a.id,bold:t}))}),r.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",checked:t,onChange:t=>e.checkOnlySearchWorkspace(t),id:"search-channel-filter-workspace-only"}))}_r.defaultProps={filterWorkspaceOnly:_.a,checkOnlySearchWorkspace:_.a};var gr=_r,fr=new B.b("search");class channels_filter_ui_ChannelsFilterUIBase extends n.Component{constructor(e){super(e),Object(f.a)(this,["onOnlySearchWorkspaceChange","onHideMemberChannelsChange","onChannelTypeChange","onSearchLimitTeamFilterDropdownChange"])}componentDidMount(){this.props.onChannelSearchOpened()}onChannelTypeChange(){var{type:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props.clogSearchFilterAdded({filter_channel_type:e}),this.props.setChannelSearchFilterType({type:e})}onOnlySearchWorkspaceChange(e){e.target.checked?this.props.clogSearchFilterAdded({filter_other:"workspace_only"}):this.props.clogSearchFilterRemoved({filter_other:"workspace_only"}),this.props.setSearchOnlySearchWorkspace({value:e.target.checked})}onHideMemberChannelsChange(e){e.target.checked?this.props.clogSearchFilterAdded({filter_other:"hide_my_channels"}):this.props.clogSearchFilterRemoved({filter_other:"hide_my_channels"}),this.props.setChannelSearchHideMemberChannels({value:e.target.checked})}onSearchLimitTeamFilterDropdownChange(e){this.props.searchOnlyByEnterpriseTeamId({value:e.value})}renderPrefs(){var{showEnterpriseOptions:e,filterWorkspaceOnly:t,hideMemberChannels:a,currentTeam:s,featureSearchLimitTeamFilter:i,searchOnlyWorkspaceTeamId:c,selfEnterpriseOrgName:l,loggedInEnterpriseTeams:d}=this.props;return r.a.createElement(n.Fragment,null,e&&i?r.a.createElement(Wt,{title:fr.t("Workspace"),"data-qa":"search-filter-workspace-section"},r.a.createElement("div",{className:"p-search_filter__select"},r.a.createElement($t,{loggedInEnterpriseTeams:d,selfEnterpriseOrgName:l,searchOnlyWorkspaceTeamId:c,onChange:this.onSearchLimitTeamFilterDropdownChange,featureSearchLimitTeamFilter:i}))):null,r.a.createElement(Wt,{title:fr.t("More options")},e&&!i?r.a.createElement(gr,{currentTeam:s,filterWorkspaceOnly:t,checkOnlySearchWorkspace:this.onOnlySearchWorkspaceChange,featureSearchLimitTeamFilter:i}):null,r.a.createElement("label",{className:o()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":a}),htmlFor:"search-channel-filter-hide-member-channels"},fr.t("Hide my channels")," ",r.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",checked:a,onChange:this.onHideMemberChannelsChange,id:"search-channel-filter-hide-member-channels"}))))}render(){var{channelType:e,sharedTeams:t,filters:a,filterSuggestions:n}=this.props,s="loading"===t.state;return r.a.createElement("div",{className:"p-search_filters"},r.a.createElement(Wt,{title:fr.t("Channel type")},r.a.createElement("div",{className:"p-search_filter__select"},r.a.createElement(channels_filter_channel_type_ChannelsFilterChannelType,{isLoading:s,sharedTeams:t,channelType:e,onChannelTypeChange:this.onChannelTypeChange}))),t.teams.length>0&&r.a.createElement(search_org_filter_SearchOrgFilter,{sharedTeams:t,filters:a,filterSuggestions:n,toggleSearchOrgFilter:this.props.toggleChannelSearchOrgFilter,clogSearchFilterAdded:this.props.clogSearchFilterAdded,clogSearchFilterRemoved:this.props.clogSearchFilterRemoved}),this.renderPrefs())}}channels_filter_ui_ChannelsFilterUIBase.defaultProps={channelType:{type:N.a.all},sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:_.a,clogSearchFilterRemoved:_.a,selfEnterpriseOrgName:"",loggedInEnterpriseTeams:[],searchOnlyByEnterpriseTeamId:_.a};var vr={setChannelSearchFilterType:function(){return pt(...arguments)},setSearchOnlySearchWorkspace:function(){return ut(...arguments)},setChannelSearchHideMemberChannels:function(){return ot(...arguments)},onChannelSearchOpened:function(){return dr(...arguments)},toggleChannelSearchOrgFilter:function(){return mt(...arguments)},clogSearchFilterAdded:function(){return Object(I.g)(...arguments)},clogSearchFilterRemoved:function(){return Object(I.h)(...arguments)},searchOnlyByEnterpriseTeamId:function(){return ht(...arguments)}},Or=Object(c.b)(e=>{var t=Object(l.s)(e),a=Object(l.d)(e),n=Object(A.d)(e),{type:r,teamId:s}=Object(l.c)(e),i=Object(Ze.a)(e),o=Object(O.b)(e).filter(e=>!!e.enterprise_id&&e.enterprise_id===i);return{channelType:{type:r,teamId:s,teamDisplayName:s&&Object(U.e)(Object(A.i)(e,s))},filters:Object(l.e)(e),filterSuggestions:Object(A.j)(e,a).map(e=>e.id),currentTeam:n,showEnterpriseOptions:Object($e.d)(e),filterWorkspaceOnly:Object(k.f)(e),hideMemberChannels:Object(k.a)(e),sharedTeams:{state:t.state,teams:Object(A.j)(e,t.teamIds).map(e=>({id:e.id,name:Object(U.e)(e)}))},allAccountsOfCurrentEnterprise:o,loggedInEnterpriseTeams:o.map(t=>Object(A.i)(e,t.id)),featureSearchLimitTeamFilter:Object(O.m)(e,"feature_search_limit_team_filter"),searchOnlyWorkspaceTeamId:Object(l.r)(e),selfEnterpriseOrgName:Object(A.e)(e)}},vr)(channels_filter_ui_ChannelsFilterUIBase),yr=(a("9wy/"),new B.b("search")),Cr="IMPROVED_SEARCH";function jr(e){var{channelName:t,onRetry:a}=e,n=Object(he.a)(e,["channelName","onRetry"]);return r.a.createElement(er.b,Object(m.a)({position:"bottom-right",icon:"warning",showCloseButton:!0},n),r.a.createElement("span",null,r.a.createElement("strong",null,yr.rt("Couldn\u2019t join {channelName}.",{channelName:t}))," ",yr.t("This could be a connection issue, or just a little blip.")," ",r.a.createElement($n.a,{onClick:a},yr.t("Try again"))))}function Er(e){var{channelName:t}=e,a=Object(he.a)(e,["channelName"]);return r.a.createElement(er.b,Object(m.a)({position:"bottom-right",icon:"warning",showCloseButton:!0},a),r.a.createElement("span",null,r.a.createElement("strong",null,yr.rt("Couldn\u2019t leave {channelName}.",{channelName:t}))," ",yr.t("Your organization requires everyone to be in it, so no one misses important info.")," "))}function kr(e){var{channelName:t,onRetry:a}=e,n=Object(he.a)(e,["channelName","onRetry"]);return r.a.createElement(er.b,Object(m.a)({position:"bottom-right",icon:"warning",showCloseButton:!0},n),r.a.createElement("span",null,r.a.createElement("strong",null,yr.rt("Couldn\u2019t leave {channelName}.",{channelName:t}))," ",yr.t("This could be a connection issue, or just a little blip.")," ",r.a.createElement($n.a,{onClick:a},yr.t("Try again"))))}class channel_view_ChannelViewBase extends n.Component{constructor(e){super(e),Object(f.a)(this,["setScrollPosition","pageForward","pageBack","pageSearchResults","setListRef","onFeedbackClick","renderSortToggle","onChannelClick","onChannelJoin","onChannelLeave","onResultsFocusEnter","onResultsFocusLeave","getPropsForItem"]),this.searchResultsContainerRef=r.a.createRef(),this.state={hasKeyboardFocus:!1}}componentDidMount(){this.logTelemetry()}componentDidUpdate(e){e.moduleState.loading===this.props.moduleState.loading&&e.moduleState.error===this.props.moduleState.error&&e.moduleState.page===this.props.moduleState.page||this.logTelemetry()}onResultsFocusEnter(){this.setState(()=>({hasKeyboardFocus:!0}))}onResultsFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}onNavigateChannel(e){var t;if(this.props.clogSearchChannelClick({type:I.a.channel,iid:this.props.iidMap[e.id],channelId:e.id}),Object(re.cb)(e)){var a=this.props.teamIdForChannelFromAnotherTeam(e);t=Object(ir.a)()?this.props.setPrimaryView({id:e.id,teamId:a}):this.props.openChannelFromAnotherTeam({channelId:e.id,teamId:a})}else t=this.props.setPrimaryView({id:e.id,teamId:e.team_id});return t.then(()=>this.props.close())}onJoinChannelId(e){return this.props.clogSearchChannelClick({type:I.a.channelJoin,iid:this.props.iidMap[e],channelId:e}),this.props.joinChannelFromSearch({channelId:e}).then(()=>{this.listEl&&this.listEl.focusItem(e)}).catch(()=>{var t=this.props.getDisplayNameForChannel(this.props.flannelChannelMap[e]);this.props.enqueueToast({element:r.a.createElement(jr,Object(m.a)({channelName:t,onRetry:()=>this.onJoinChannelId(e)},this.getToastOffset()))})})}onLeaveChannelId(e){return this.props.clogSearchChannelClick({type:I.a.channelLeave,iid:this.props.iidMap[e],channelId:e}),this.props.leaveChannelFromSearch({channelId:e}).then(()=>{this.listEl&&this.listEl.focusItem(e)}).catch(()=>{var t=this.props.getDisplayNameForChannel(this.props.flannelChannelMap[e]),{ok:a,reason:n}=this.props.canLeaveChannelWithReason(e),s=!a&&[Xa.b.CANT_LEAVE_GENERAL,Xa.b.CANT_LEAVE_MANDATORY_SHARED_CHANNEL].includes(n);this.props.enqueueToast({element:s?r.a.createElement(Er,Object(m.a)({channelName:t},this.getToastOffset())):r.a.createElement(kr,Object(m.a)({channelName:t,onRetry:()=>this.onLeaveChannelId(e)},this.getToastOffset()))})})}onFeedbackClick(){this.props.openSearchFeedbackDialog({module:"channels"})}onChannelClick(e,t){return a=>{for(var n=a.target,r=!1;n&&n!==a.currentTarget;)"A"===n.tagName&&n.href&&(r=!0),n=n.parentNode;r?this.props.clogSearchChannelClick({type:I.a.channelPurposeLink,iid:e,channelId:t.id}):(a.preventDefault(),this.onNavigateChannel(t))}}onChannelJoin(e){return t=>(t.preventDefault(),this.onJoinChannelId(e))}onChannelLeave(e){return t=>(t.preventDefault(),this.onLeaveChannelId(e))}getToastOffset(){return this.searchResultsContainerRef.current?this.searchResultsContainerRef.current.getWrappedInstance().getToastOffset():{}}getPropsForItem(e){return t=>{var{index:a}=t,n=e[a],r={};return n.type===In.CHANNEL_RESULT&&(this.state.hasKeyboardFocus||this.props.isScreenReaderEnabled)&&(r["aria-label"]=this.props.channelSummaryLabels[n.data.id]),r}}getVisibleChannels(){return this.props.channelsResponse.items[this.props.moduleState.page||1]}setListRef(e){this.listEl=e}setScrollPosition(e){this.props.setViewScrollPosition({view:"channels",position:e})}logTelemetry(){if(!this.props.moduleState.loading&&this.props.moduleState.error===N.g.None){var e=this.getVisibleChannels();e&&this.props.telemeter.count("search_ui_channels_results_view_count",e.length)}}pageForward(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo(Cr,"Page forward in channel results"),this.props.clogSearchNextPage(),this.pageSearchResults(1)}pageBack(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo(Cr,"Page backwards in channel results"),this.props.clogSearchPreviousPage(),this.pageSearchResults(-1)}pageSearchResults(e){var{moduleState:t,channelsResponse:a,sort:n}=this.props,r=Math.max(t.page+e,1);a.items[r]?this.props.setPageForModule({moduleType:"channels",page:r}):this.props.fetchSearchResultsByModule({module:"channels",sort:n,reason:"search-channels-page",page:r})}renderSortToggle(){var{sort:e,setSort:t,showNumResults:a,featureSearchTabsA11yImprovements:n}=this.props,s=[[N.b.relevant,{uppercase:yr.t("Most relevant"),lowercase:yr.t("most relevant",{fallbackHash:"71b35d44d5b8790ce001fcd485b57fa927e93b01"})}],[N.b.created,{uppercase:yr.t("Date created (newest to oldest)"),lowercase:yr.t("date created (newest to oldest)",{fallbackHash:"a02a13d5dfbf8c3838a8ee189079acede35b2a47"})}],[N.b.name,{uppercase:yr.t("Name (A to Z)"),lowercase:yr.t("name (A to Z)",{fallbackHash:"e53a5982ee84aaa2d647582a947002c97d33552d"})}],[N.b.memberCount,{uppercase:yr.t("Members (most to least)"),lowercase:yr.t("members (most to least)",{fallbackHash:"6bae871504502b91e5730a1574b493e167d09f62"})}]],i=Object(Jn.a)(s);return r.a.createElement(H.e,{"data-qa":"channel_sort_toggle",renderMenu:e=>{var{onTriggerClose:a}=e;return r.a.createElement(H.f,null,s.map(e=>{var[n,s]=e;return r.a.createElement(H.b,{"data-qa-sort":n,key:n,onSelected:()=>{t({sort:n}),a()}},s.uppercase)}))},position:"bottom-right",width:180,offsetX:0,offsetY:0},r.a.createElement(W.c,{"data-qa":"channel_sort_selection","aria-label":n?yr.t("Channel results sorted by {sortName}",{sortName:i[e].lowercase}):void 0,className:o()(!a&&"c-search__section_header--compact")},!a&&"Sort by ",a?i[e].uppercase:i[e].lowercase,r.a.createElement(q.b,{type:"chevron-down",inline:!0})))}render(){var{scrollPosition:e,moduleState:t,channelsResponse:a,channelSummaryLabels:s,flannelChannelMap:i}=this.props,o=this.getVisibleChannels()||[],c=o.reduce((e,t)=>(e[t.id]=t,e),{}),l=a.pagination&&a.pagination.total_count,d=l>0;a.debug&&Object(Zn.a)("channelSearchExplain",Object(Xn.a)(a.debug.features,e=>-e.total_score));var p=a&&a.pagination&&a.pagination.page_count||0,u=p>1&&!t.loading,h=t.page||1;if(this.props.featureSearchResultsVirtualized){var m=xn({moduleName:"channels",channelSearchResults:o,channelFlannelMap:i,isLoading:t.loading,totalItemCount:l,isPagerVisible:u,errorType:t.error}),b=m.map(e=>e.key),_=wn(m,{isLoading:t.loading,errorType:t.error,numResults:l,emptyResultsTitle:yr.t("No results"),pageForward:this.pageForward,pageBack:this.pageBack,onFeedbackClick:this.onFeedbackClick,totalPageCount:p,currentPageOffset:h,sortDropdown:this.renderSortToggle(),onChannelClick:this.onChannelClick,onChannelJoin:this.onChannelJoin,onChannelLeave:this.onChannelLeave,telemeter:this.props.telemeter,showNumResults:this.props.showNumResults}),g=Tn(m),f=this.getPropsForItem(m);return r.a.createElement(Ra,{id:"c-search__tab_channel",module:"channels",scrollPosition:e,ref:this.searchResultsContainerRef,setScrollPosition:this.setScrollPosition,filterUI:r.a.createElement(Or,null),rowKeys:b,rowRenderer:_,rowFocusability:g,onFocusEnter:this.onResultsFocusEnter,onFocusLeave:this.onResultsFocusLeave,getPropsForItem:f})}return r.a.createElement(Ra,{id:"c-search__tab_channel",module:"channels",loading:t.loading,errorType:t.error,scrollPosition:e,setScrollPosition:this.setScrollPosition,filterUI:r.a.createElement(Or,null),numResults:l,emptyResultsTitle:yr.t("No results"),ref:this.searchResultsContainerRef,onClickRefreshSearch:this.props.onClickRefreshSearch,sortDropdown:this.renderSortToggle()},d&&r.a.createElement(ya,{ref:this.setListRef,ids:o.map(e=>e.id),onSelectItem:(e,t)=>this.onNavigateChannel(i[t]),itemAriaLabel:e=>s[e],renderItem:e=>r.a.createElement(tn,{key:e,channel:i[e],channelData:c[e],iid:this.props.iidMap[e],onClickChannel:this.onChannelClick(this.props.iidMap[e],i[e]),onClickJoin:this.onChannelJoin(e),onClickLeave:this.onChannelLeave(e)})}),!d&&r.a.createElement(n.Fragment,null,r.a.createElement("p",null,yr.t("Slack couldn\u2019t find any channels related to your search. You may want to try\u2026")),r.a.createElement("ul",null,r.a.createElement("li",null,yr.t("Using different keywords.")),r.a.createElement("li",null,yr.t("Checking for typos.")),r.a.createElement("li",null,yr.t("Adjusting your filters.")))),!u&&r.a.createElement(Ve.a,{className:l>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),r.a.createElement(Qe,{visible:u,currentPageOffset:h,totalPageCount:p,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}}channel_view_ChannelViewBase.defaultProps={sort:N.b.relevant,setSort:_.a,scrollPosition:0,setViewScrollPosition:_.a,moduleState:{},channelsResponse:{items:{}},setPageForModule:_.a,fetchSearchResultsByModule:_.a,logInfo:_.a,setPrimaryView:_.a,openChannelFromAnotherTeam:_.a,close:_.a,teamIdForChannelFromAnotherTeam:_.a,clogSearchChannelClick:_.a,clogSearchNextPage:_.a,clogSearchPreviousPage:_.a,channelSummaryLabels:{},iidMap:{},joinChannelFromSearch:_.a,leaveChannelFromSearch:_.a,flannelChannelMap:{},getDisplayNameForChannel:_.a,enqueueToast:_.a,canLeaveChannelWithReason:_.a,onClickRefreshSearch:_.a,openSearchFeedbackDialog:_.a,telemeter:pe.d,featureSearchResultsVirtualized:!1,featureSearchTabsA11yImprovements:!1,isScreenReaderEnabled:!1,showNumResults:!0};var Sr=Object(c.b)(e=>{var t=Object(l.j)(e,"channels")||{},a=Object(M.q)(e,{module:"channels"})||{items:{}},n=a.items[t.page||1]||[],r={},s={},i={},o=Object(le.b)(e);n.forEach(t=>{s[t.id]=function(e,t){var a=Object(se.e)(e,t.id),n=Object(A.i)(e,Object(re.cb)(a)?Object(re.Zb)(e,a):a.team_id),r=Object(U.e)(n),s=Object(U.s)(n)?Object(A.e)(e):null,i=Object(re.w)(e,a,{publicChannelIncludeHashSign:!1}),o=Object(rr.a)({channelName:i,workspaceName:r,orgName:s,isOrgGlobalSharedPublicOrPrivateChannel:Object(re.ub)(a),isOrgSharedPublicOrPrivateChannel:Object(re.wb)(a),isExternallySharedChannel:Object(re.ab)(a),isArchived:Object(re.X)(a),isPrivate:Object(re.Bb)(a),isNotMember:!Object(re.nb)(a)}),c=Object(ee.a)(e,Object(re.Q)(a));return sr.t("{channelDescription}, {memberCount, plural, =1 {# member} other {# members}}, {channelPurpose}",{channelDescription:o,memberCount:t.member_count,channelPurpose:c})}(e,t);var a=Object(se.e)(e,t.id);i[t.id]=a,r[t.id]=t.iid});var c=Object(x.c)(e,"search_tab_counts"),d="counts"!==c&&"counts_and_sort"!==c;return{sort:Object(k.b)(e),scrollPosition:Object(l.q)(e).channels,moduleState:t,channelsResponse:a,iidMap:r,isScreenReaderEnabled:o,channelSummaryLabels:s,flannelChannelMap:i,logInfo:Object(j.a)({state:e}).info,teamIdForChannelFromAnotherTeam:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return Object(re.Zb)(e,...a)},getDisplayNameForChannel:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return Object(re.w)(e,...a)},canLeaveChannelWithReason:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return Object(Xa.j)(e,...a)},telemeter:Object(pe.c)({state:e}),featureSearchResultsVirtualized:Object(O.m)(e,"feature_search_results_virtualized"),featureSearchTabsA11yImprovements:Object(O.m)(e,"feature_search_tabs_a11y_improvements"),showNumResults:d}},e=>({setSort:function(){return e(lt(...arguments))},setViewScrollPosition:function(){return e(Object(E.J)(...arguments))},setPageForModule:function(){return e(Object(E.u)(...arguments))},fetchSearchResultsByModule:function(){return e(Object(T.d)(...arguments))},setPrimaryView:function(){return e(Object(ar.a)(...arguments))},openChannelFromAnotherTeam:function(){return e(Object(nr.a)(...arguments))},close:function(){return e(Object(D.a)(...arguments))},clogSearchChannelClick:function(){return e(Object(I.d)(...arguments))},clogSearchNextPage:function(){return e(Object(I.j)(...arguments))},clogSearchPreviousPage:function(){return e(Object(I.m)(...arguments))},joinChannelFromSearch:function(){return e(Object(T.h)(...arguments))},leaveChannelFromSearch:function(){return e(Object(T.i)(...arguments))},enqueueToast:function(){return e(Object(tr.c)(...arguments))},openSearchFeedbackDialog:function(){return e(Object(T.r)(...arguments))}}))(channel_view_ChannelViewBase),Ir=a("9oTK"),wr=a("9E9B"),Tr=a("h9PG"),Nr=a("eJ6O"),Pr=a("Ik/9"),Ar=new B.b("search");class people_filter_account_type_PeopleFilterAccountType extends n.Component{constructor(e){super(e),Object(f.a)(this,["onChange"])}onChange(e){this.props.onAccountTypeChange({type:e.value})}render(){var e=[{value:N.h.all,label:Ar.t("All types")},{value:N.h.owners,label:Ar.t("Owners")},{value:N.h.admins,label:Ar.t("Admins")},{value:N.h.full,label:Ar.t("Full Members (includes owners and admins)")},{value:N.h.guests,label:Ar.t("Guests")},{value:N.h.deactivated,label:Ar.t("Deactivated accounts"),isDisabled:this.props.hideDeactivatedUsers}],t=e.find(e=>e.value===this.props.accountType.type),a=this.props.hideDeactivatedUsers?"deactivated-accounts-disabled":"deactivated-accounts-enabled";return r.a.createElement(Xt.a,{key:a,width:"100%",options:e,ariaLabel:Ar.t("Select an account type to filter by"),className:"c-people_filter",selectedOption:t,onOptionSelected:this.onChange})}}people_filter_account_type_PeopleFilterAccountType.defaultProps={accountType:{type:N.h.all},hideDeactivatedUsers:!1,onAccountTypeChange:_.a};var Mr=people_filter_account_type_PeopleFilterAccountType,xr=a("okZA"),Rr=Object(S.b)("people search: tab opened, initializing data",(e,t)=>{var a=t(),n=Object(A.d)(a),r=Object(Je.b)(a),s=Object(cn.a)(n),i=Object(Et.J)(r),o=Object(l.k)(a);s.forEach(t=>{if(t.options&&t.options.length>1){var a=t.name,n=[];if(i&&i[a]){var r=t.options.find(e=>e.value===i[a].value);r&&n.push(r.value)}n.push(...t.options.slice(0,3).map(e=>e.value)),Object(or.a)(n).slice(0,3).forEach(t=>{var n=o&&o[a]&&o[a].find(e=>e.value===t);e(Object(E.v)({id:a,value:t,checked:!!n&&n.checked}))})}})});Rr.meta={name:"populateVisibleOptions",key:"actionsUniversalSearchPeopleSearchOpenedPopulateVisibleOptions",description:"people search: tab opened, initializing data"};var Dr=Object(S.b)("people search: tab opened, initializing data",(e,t)=>{var a=t(),n=Object(l.o)(a);return n&&"ready"===n.state&&n.refreshed>=Date.now()-36e5?(e(Rr()),Promise.resolve()):(e(Object(E.A)()),e(Object(xr.e)({reason:"people_search_open"})).then(()=>{e(Rr()),e(Object(E.B)())}).catch(()=>{e(Object(E.z)())}))});Dr.meta={name:"updatePeopleSearchProfileFieldValues",key:"actionsUniversalSearchPeopleSearchOpenedUpdatePeopleSearchProfileFieldValues",description:"people search: tab opened, initializing data"};var Fr=Object(S.b)("people search: tab opened, initializing data",(e,t)=>{var a=t();return Object(O.m)(a,"feature_steeple_church_ext")?Promise.all([e(lr({reason:"people_search_open"})),e(Dr())]):e(Dr())});Fr.meta={name:"peopleSearchOpened",key:"actionsUniversalSearchPeopleSearchOpenedPeopleSearchOpened",description:"people search: tab opened, initializing data"},Fr.propTypes={};var Lr=Fr,Ur=a("oTSI"),Br=(a("Olm7"),a("NRPS")),Hr=a("JvzI"),Wr=Object(Ur.a)(()=>{var e=Object(Br.a)(Object(Hr.a)()),t={};return e.forEach(e=>{var a=e[1],n=e[0];t[a]=n}),t});function qr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Gr=new B.b("search"),Kr={accountType:{type:N.h.all},visibleFilterState:{},sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:_.a,clogSearchFilterRemoved:_.a,peopleSearchOpened:_.a,peopleSearchCustomFilterChanged:_.a,timezoneSuggestions:[],teamProfileState:{state:"ready",refreshed:0},filterWorkspaceOnly:!1,searchOnlyWorkspaceTeamId:"",searchOnlyByEnterpriseTeamId:_.a,loggedInEnterpriseTeams:[],selfEnterpriseOrgName:""};class people_filter_ui_PeopleFilterUIBase extends n.Component{constructor(e){super(e),Object(f.a)(this,["onAccountTypeChange","onOnlySearchWorkspaceChange","onHideDeactivatedUsersChange","onSearchLimitTeamFilterDropdownChange"]),this.peopleSearchOpenedPromise=null}componentDidMount(){this.peopleSearchOpenedPromise=this.props.peopleSearchOpened()}componentWillUnmount(){this.peopleSearchOpenedPromise&&this.peopleSearchOpenedPromise.cancel()}onAccountTypeChange(){var{type:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props.clogSearchFilterAdded({filter_account_type:e}),this.props.setPeopleSearchFilterType({type:e})}onOnlySearchWorkspaceChange(e){e.target.checked?this.props.clogSearchFilterAdded({filter_other:"workspace_only"}):this.props.clogSearchFilterRemoved({filter_other:"workspace_only"}),this.props.setSearchOnlySearchWorkspace({value:e.target.checked})}onSearchLimitTeamFilterDropdownChange(e){this.props.searchOnlyByEnterpriseTeamId({value:e.value})}onHideDeactivatedUsersChange(e){e.target.checked?this.props.clogSearchFilterAdded({filter_other:"hide_deactivated_users"}):this.props.clogSearchFilterRemoved({filter_other:"hide_deactivated_users"}),this.props.setPeopleSearchHideDeactivatedUsers({value:e.target.checked})}loadOptions(e,t){var a=new pr.b(e);return Object(Xn.a)(t.map(t=>({value:t.value,label:t.label,score:0===e.length?0:a.normalizeAndScore(t.label)})),"score")}filterOptions(e,t,a){return t.filter(e=>isFinite(e.score)&&!a.some(t=>t.checked&&t.value===e.value))}renderTimezoneFilter(){var{timezoneSuggestions:e}=this.props,t=Wr(),a=Object.keys(t).map(e=>({value:e,label:t[e]})),n=Gr.t("Choose another");return r.a.createElement(Wt,{title:Gr.t("Time zone",{ns:"edit_profile"}),"data-qa":"search-filter-section-people-timezones"},r.a.createElement(Mt,{checkboxName:"timezone",placeholderText:n,showMoreOptionsAriaLabel:n,loadOptions:e=>Promise.resolve({options:this.loadOptions(e,a)}),visibleOptions:e,onOptionChange:(e,t)=>{this.props.peopleSearchTimezoneFilterChanged({label:e.label,value:e.value,checked:t})},onOptionAdd:t=>{var a=e&&e.find(e=>e.value===t.value),n=a&&a.checked;this.props.peopleSearchTimezoneFilterChanged({label:t.label,value:t.value,checked:!n})},filterOptions:(t,a)=>this.filterOptions(t,a,e)}))}renderPrefs(){var{showEnterpriseOptions:e,filterWorkspaceOnly:t,hideDeactivatedUsers:a,currentTeam:n,accountType:s,featureSearchLimitTeamFilter:i,searchOnlyWorkspaceTeamId:c,selfEnterpriseOrgName:l,loggedInEnterpriseTeams:d}=this.props,p=s.type===N.h.deactivated;return r.a.createElement("div",null,e&&i?r.a.createElement(Wt,{title:Gr.t("Workspace"),"data-qa":"search-filter-workspace-section"},r.a.createElement("div",{className:"p-search_filter__select"},r.a.createElement($t,{loggedInEnterpriseTeams:d,selfEnterpriseOrgName:l,searchOnlyWorkspaceTeamId:c,onChange:this.onSearchLimitTeamFilterDropdownChange,featureSearchLimitTeamFilter:i}))):null,r.a.createElement(Wt,{title:Gr.t("More options")},r.a.createElement("div",{className:"p-search_filter__select"},e&&!i?r.a.createElement(gr,{currentTeam:n,filterWorkspaceOnly:t,checkOnlySearchWorkspace:this.onOnlySearchWorkspaceChange,featureSearchLimitTeamFilter:i}):null,r.a.createElement("label",{className:o()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":a,"p-search_filter__checkbox_label--disabled":p}),htmlFor:"search-people-filter-hide-deactivated-users"},Gr.t("Hide deactivated accounts")," ",r.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",disabled:p,checked:a,onChange:this.onHideDeactivatedUsersChange,id:"search-people-filter-hide-deactivated-users"})))))}render(){var{accountType:e,currentTeam:t,visibleFilterState:a,sharedTeams:s,teamProfileState:i,filters:o,filterSuggestions:c,hideDeactivatedUsers:l}=this.props,d="loading"===i.state||"loading"===s.state,p=Gr.t("Choose another"),u=Object(cn.a)(t).filter(e=>e.options&&e.options.length>1),h={};return u.forEach(e=>{var t=e.name,n={};e.options.forEach(e=>{n[e.value]=e}),h[t]=a[t]?a[t].filter(e=>n[e.value]).map(e=>({value:e.value,label:n[e.value].label,checked:e.checked})):[]}),r.a.createElement(n.Fragment,null,r.a.createElement(Wt,{title:Gr.t("Account type")},r.a.createElement("div",{className:"p-search_filter__select"},r.a.createElement(Mr,{accountType:e,hideDeactivatedUsers:l,onAccountTypeChange:this.onAccountTypeChange}))),r.a.createElement(C.a,{enabled:["feature_steeple_church_ext"]},!d&&s.teams.length>0&&r.a.createElement(search_org_filter_SearchOrgFilter,{sharedTeams:s,filters:o,filterSuggestions:c,toggleSearchOrgFilter:this.props.togglePeopleSearchOrgFilter,clogSearchFilterAdded:this.props.clogSearchFilterAdded,clogSearchFilterRemoved:this.props.clogSearchFilterRemoved})),this.renderPrefs(),d?r.a.createElement("div",null,r.a.createElement(Qt,{variation:0}),r.a.createElement(Qt,{variation:1})):u.map((e,t)=>r.a.createElement(Wt,{key:e.name,title:e.label,"data-qa":"search-filter-section-people-custom"},r.a.createElement(Mt,{checkboxName:e.name,visibleOptions:h[e.name],loadOptions:t=>Promise.resolve({options:this.loadOptions(t,e.options)}),filterOptions:(t,a)=>this.filterOptions(t,a,h[e.name]),onOptionChange:(a,n)=>{n?this.props.clogSearchFilterAdded({filter_custom_profile:!0,filter_module_position:t,filter_position:h[e.name].indexOf(a)}):this.props.clogSearchFilterRemoved({filter_custom_profile:!0,filter_module_position:t,filter_position:h[e.name].indexOf(a)}),this.props.peopleSearchCustomFilterChanged({id:e.name,value:a.value,checked:n})},onOptionAdd:n=>{var r=a[e.name]&&a[e.name].find(e=>e.value===n.value),s=r&&r.checked;this.props.peopleSearchCustomFilterChanged({id:e.name,value:n.value,checked:!s}),s?this.props.clogSearchFilterRemoved({filter_custom_profile:!0,filter_module_position:t,filter_position:null}):this.props.clogSearchFilterAdded({filter_custom_profile:!0,filter_module_position:t,filter_position:null})},placeholderText:p,showMoreOptionsAriaLabel:p,showMoreOptions:e.options.length>h[e.name].length}))))}}people_filter_ui_PeopleFilterUIBase.defaultProps=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(a),!0).forEach(function(t){Object(Oe.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qr(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},Kr);var Vr={setPeopleSearchFilterType:function(){return _t(...arguments)},peopleSearchCustomFilterChanged:function(){return gt(...arguments)},peopleSearchTimezoneFilterChanged:function(){return vt(...arguments)},clogSearchFilterAdded:function(){return Object(I.g)(...arguments)},clogSearchFilterRemoved:function(){return Object(I.h)(...arguments)},peopleSearchOpened:function(){return Lr(...arguments)},togglePeopleSearchOrgFilter:function(){return bt(...arguments)},setSearchOnlySearchWorkspace:function(){return ut(...arguments)},setPeopleSearchHideDeactivatedUsers:function(){return ft(...arguments)},searchOnlyByEnterpriseTeamId:function(){return ht(...arguments)}},zr=Object(c.b)(e=>{var t=Object(l.l)(e),a=Object(l.s)(e),n=Object(l.m)(e),r=Object(Ze.a)(e),s=Object(O.b)(e).filter(e=>!!e.enterprise_id&&e.enterprise_id===r);return{accountType:t,currentTeam:Object(A.d)(e),visibleFilterState:Object(l.k)(e),sharedTeams:{state:a.state,teams:Object(A.j)(e,a.teamIds).map(e=>({id:e.id,name:Object(U.e)(e)}))},filters:Object(l.n)(e),filterSuggestions:Object(A.j)(e,n).map(e=>e.id),showEnterpriseOptions:Object($e.d)(e),filterWorkspaceOnly:Object(k.f)(e),hideDeactivatedUsers:Object(k.d)(e),timezoneSuggestions:Object(l.p)(e),teamProfileState:Object(l.o)(e),featureSearchLimitTeamFilter:Object(O.m)(e,"feature_search_limit_team_filter"),allAccountsOfCurrentEnterprise:s,loggedInEnterpriseTeams:s.map(t=>Object(A.i)(e,t.id)),searchOnlyWorkspaceTeamId:Object(l.r)(e),selfEnterpriseOrgName:Object(A.e)(e)}},Vr)(people_filter_ui_PeopleFilterUIBase),Yr=(a("yNt+"),new B.b("search")),Qr="IMPROVED_SEARCH",Xr={sort:N.i.relevant,setSort:_.a,scrollPosition:0,setViewScrollPosition:_.a,moduleState:{},peopleResponse:{items:{}},setPageForModule:_.a,fetchSearchResultsByModule:_.a,logger:{error:_.a,info:_.a},telemeter:pe.d,clogSearchPeopleClick:_.a,clogSearchNextPage:_.a,clogSearchPreviousPage:_.a,memberSummaryLabels:{},iidMap:{},showNewPeopleSearch:!1,displayEmailAddresses:!1,currentDisplayQuery:"",featureFantailNurture:!1,markPeopleSearchSeen:_.a,incrementPeopleSearchSeenCount:_.a,onClickRefreshSearch:_.a,showMemberProfile:_.a,closeSearch:_.a,startImByMemberId:_.a,enqueueToast:_.a,openSearchFeedbackDialog:_.a,shouldIncrementPeopleSearchSeenCount:!1,featureSearchResultsVirtualized:!1,featureSearchTabsA11yImprovements:!1,isScreenReaderEnabled:!1,showNumResults:!0};class people_view_PeopleViewBase extends n.Component{constructor(e){super(e),Object(f.a)(this,["setScrollPosition","pageForward","pageBack","pageSearchResults","setListRef","onNavigateError","onViewProfileError","onFeedbackClick","getMemberClickHandler","renderSortToggle","onResultsFocusEnter","onResultsFocusLeave","getPropsForItem"]),this.searchResultsContainerRef=r.a.createRef(),this.state={hasKeyboardFocus:!1}}componentDidMount(){this.logTelemetry()}componentDidUpdate(e){e.moduleState.loading===this.props.moduleState.loading&&e.moduleState.error===this.props.moduleState.error&&e.moduleState.page===this.props.moduleState.page||this.logTelemetry()}componentWillUnmount(){this.props.showNewPeopleSearch&&this.props.markPeopleSearchSeen(),this.props.shouldIncrementPeopleSearchSeenCount&&this.props.incrementPeopleSearchSeenCount()}onSelectItem(e){var t=this;return Object(Ir.coroutine)(function*(){t.props.clogSearchPeopleClick({type:I.c.people,iid:t.props.iidMap[e.id],userId:e.id});try{yield t.props.startImByMemberId({memberId:e.id})}catch(a){throw t.onNavigateError(()=>t.onSelectItem(e)),a}try{yield t.props.showMemberProfile({memberId:e.id})}catch(a){throw t.onViewProfileError(()=>t.onSelectItem(e)),a}t.props.closeSearch()})()}onNavigateError(e){this.props.enqueueToast({element:r.a.createElement(er.b,Object(m.a)({position:"bottom-right",icon:"warning",showCloseButton:!0},this.getToastOffset()),r.a.createElement("span",null,Yr.rt("<strong>Couldn\u2019t open conversation</strong>. This could be a connection issue or just a temporary blip. <a>Try again</a>",null,t=>{var{tag:a,key:n,text:s}=t;switch(a){case"strong":return r.a.createElement("strong",{key:n},s);case"a":return r.a.createElement(Ee.a,{key:n,onClick:e},s);default:return null}})))})}onResultsFocusEnter(){this.setState(()=>({hasKeyboardFocus:!0}))}onResultsFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}onViewProfileError(e){this.props.enqueueToast({element:r.a.createElement(er.b,Object(m.a)({position:"bottom-right",icon:"warning",showCloseButton:!0},this.getToastOffset()),r.a.createElement("span",null,Yr.rt("<strong>Couldn\u2019t open profile</strong>. This could be a connection issue or just a temporary blip. <a>Try again</a>",null,t=>{var{tag:a,key:n,text:s}=t;switch(a){case"strong":return r.a.createElement("strong",{key:n},s);case"a":return r.a.createElement(Ee.a,{key:n,onClick:e},s);default:return null}})))})}onFeedbackClick(){this.props.openSearchFeedbackDialog({module:"people"})}getMemberClickHandler(e){return t=>{t.preventDefault(),this.onSelectItem(this.props.getMemberById(e))}}getToastOffset(){return this.searchResultsContainerRef.current?this.searchResultsContainerRef.current.getWrappedInstance().getToastOffset():{}}getPropsForItem(e){return t=>{var{index:a}=t,n=e[a],r={};return n.type===In.PEOPLE_RESULT&&(this.state.hasKeyboardFocus||this.props.isScreenReaderEnabled)&&(r["aria-label"]=this.props.memberSummaryLabels[n.data.id]),r}}getVisiblePeople(){return this.props.peopleResponse.items[this.props.moduleState.page||1]||[]}setListRef(e){this.listEl=e}setScrollPosition(e){this.props.setViewScrollPosition({view:"people",position:e})}logTelemetry(){if(!this.props.moduleState.loading&&this.props.moduleState.error===N.g.None){var e=this.getVisiblePeople();e&&this.props.telemeter.count("search_ui_people_results_view_count",e.length)}}pageForward(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logger.info(Qr,"Page forward in people results"),this.props.clogSearchNextPage(),this.pageSearchResults(1)}pageBack(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logger.info(Qr,"Page backwards in people results"),this.props.clogSearchPreviousPage(),this.pageSearchResults(-1)}pageSearchResults(e){var{moduleState:t,peopleResponse:a,sort:n}=this.props,r=Math.max(t.page+e,1);a.items[r]?this.props.setPageForModule({moduleType:"people",page:r}):this.props.fetchSearchResultsByModule({module:"people",sort:n,reason:"search-people-page",page:r})}renderEmptyResults(){var{displayEmailAddresses:e,currentDisplayQuery:t,featureFantailNurture:a}=this.props,s=t.replace(/<@[^>]*>/g,"").indexOf("@")>-1;return!e&&s&&a?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,Yr.t("Slack couldn\u2019t find any people related to your search.")),r.a.createElement("p",null,Yr.t("Searching for people by email has been disabled in this workspace. Questions? Contact a Workspace Admin."))):r.a.createElement(n.Fragment,null,r.a.createElement("p",null,Yr.t("Slack couldn\u2019t find any people related to your search. You may want to try\u2026")),r.a.createElement("ul",null,r.a.createElement("li",null,Yr.t("Using different keywords.")),r.a.createElement("li",null,Yr.t("Checking for typos.")),r.a.createElement("li",null,Yr.t("Adjusting your filters."))))}renderSortToggle(){var{sort:e,setSort:t,showNumResults:a,featureSearchTabsA11yImprovements:n}=this.props,s=[[N.i.relevant,{uppercase:Yr.t("Most relevant"),lowercase:Yr.t("most relevant",{fallbackHash:"71b35d44d5b8790ce001fcd485b57fa927e93b01"})}],[N.i.name,{uppercase:Yr.t("Name (A to Z)"),lowercase:Yr.t("name (A to Z)",{fallbackHash:"e53a5982ee84aaa2d647582a947002c97d33552d"})}]],i=Object(Jn.a)(s);return r.a.createElement(H.e,{"data-qa":"people_sort_toggle",renderMenu:e=>{var{onTriggerClose:a}=e;return r.a.createElement(H.f,null,s.map(e=>{var[n,s]=e;return r.a.createElement(H.b,{"data-qa-sort":n,key:n,onSelected:()=>{t({sort:n}),a()}},s.uppercase)}))},position:"bottom-right",width:180,offsetX:0,offsetY:0},r.a.createElement(W.c,{"data-qa":"people_sort_selection","aria-label":n?Yr.t("Channel results sorted by {sortName}",{sortName:i[e].lowercase}):void 0,className:o()(!a&&"c-search__section_header--compact")},!a&&"Sort by ",a?i[e].uppercase:i[e].lowercase,r.a.createElement(q.b,{type:"chevron-down",inline:!0})))}render(){var{scrollPosition:e,moduleState:t,peopleResponse:a,memberSummaryLabels:n,displayEmailAddresses:s,currentDisplayQuery:i,featureFantailNurture:o}=this.props,c=this.getVisiblePeople(),l=c.reduce((e,t)=>(e[t.id]=t,e),{}),d=a.pagination&&a.pagination.total_count,p=d>0;a.debug&&Object(Zn.a)("peopleSearchExplain",Object(Xn.a)(a.debug.features,e=>-e.total_score));var u=a&&a.pagination&&a.pagination.page_count||0,h=u>1&&!t.loading,m=t.page||1,b=c.map(e=>({highlightData:e,member:this.props.getMemberById(e.id),iid:e.iid}));if(this.props.featureSearchResultsVirtualized){var _=xn({moduleName:"people",peopleResults:b,isLoading:t.loading,errorType:t.error,totalItemCount:d,isPagerVisible:h,showPeopleDiscovery:this.props.showNewPeopleSearch}),g=_.map(e=>e.key),f=wn(_,{isLoading:t.loading,errorType:t.error,numResults:d,emptyResultsTitle:Yr.t("No results"),pageForward:this.pageForward,pageBack:this.pageBack,onFeedbackClick:this.onFeedbackClick,totalPageCount:u,currentPageOffset:m,sortDropdown:this.renderSortToggle(),displayEmailAddresses:s,currentDisplayQuery:i,featureFantailNurture:o,startImByMemberId:this.props.startImByMemberId,showMemberProfile:this.props.showMemberProfile,onViewProfileError:this.onViewProfileError,onNavigateError:this.onNavigateError,getMemberClickHandler:this.getMemberClickHandler,telemeter:this.props.telemeter,showNumResults:this.props.showNumResults}),v=Tn(_),O=this.getPropsForItem(_);return r.a.createElement(Ra,{id:"c-search__tab_people",module:"people",scrollPosition:e,setScrollPosition:this.setScrollPosition,filterUI:r.a.createElement(zr,null),ref:this.searchResultsContainerRef,rowKeys:g,rowRenderer:f,rowFocusability:v,onFocusEnter:this.onResultsFocusEnter,onFocusLeave:this.onResultsFocusLeave,getPropsForItem:O})}return r.a.createElement(Ra,{id:"c-search__tab_people",module:"people",loading:t.loading,errorType:t.error,scrollPosition:e,setScrollPosition:this.setScrollPosition,filterUI:r.a.createElement(zr,null),numResults:d,emptyResultsTitle:Yr.t("No results"),ref:this.searchResultsContainerRef,onClickRefreshSearch:this.props.onClickRefreshSearch,sortDropdown:this.renderSortToggle(),alertHeader:this.props.showNewPeopleSearch&&r.a.createElement("div",{className:"c-channel_search__new_feature_alert"},r.a.createElement(q.b,{className:"c-channel_search__new_feature_icon",type:"sparkles_filled"}),r.a.createElement("div",null,Yr.rt("<strong>Find people at your organization</strong>. Now you can search for people by their name, profile info, or even the topics they talk about.",{fallbackHash:"07cbc99aff3e533e8b10d9bf430890987c65f7ae"})))},p?r.a.createElement(ya,{ref:this.setListRef,ids:c.map(e=>e.id),onSelectItem:(e,t)=>this.onSelectItem(this.props.getMemberById(t)),itemAriaLabel:e=>n[e],renderItem:e=>r.a.createElement(jn,{key:e,iid:this.props.iidMap[e],member:this.props.getMemberById(e),memberWithHighlights:l[e],onClickMember:t=>{t.preventDefault(),this.onSelectItem(this.props.getMemberById(e))},startImByMemberId:this.props.startImByMemberId,showMemberProfile:this.props.showMemberProfile,onViewProfileError:this.onViewProfileError,onNavigateError:this.onNavigateError})}):this.renderEmptyResults(),!h&&r.a.createElement(Ve.a,{className:d>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),r.a.createElement(Qe,{visible:h,currentPageOffset:m,totalPageCount:u,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}}people_view_PeopleViewBase.defaultProps=Xr;var Jr=Object(c.b)(e=>{var t=Object(l.j)(e,"people")||{},a=Object(M.q)(e,{module:"people"})||{items:{}},n=a.items[t.page||1]||[],r={},s={},i=Object(le.b)(e);n.forEach(t=>{var a=Object(Je.d)(e,t.id);s[t.id]=Object(Pr.a)({name:Object(Et.K)(a),isGuest:Object(Et.wb)(a),isSelf:Object(Et.Hb)(a),isDeleted:Object(Et.mb)(a),isAppOrBot:Object(Et.ib)(a)}),r[t.id]=t.iid});var o=Object(x.c)(e,"search_tab_counts"),c="counts"!==o&&"counts_and_sort"!==o;return{sort:Object(k.e)(e),scrollPosition:Object(l.q)(e).people,moduleState:t,peopleResponse:a,iidMap:r,memberSummaryLabels:s,isScreenReaderEnabled:i,getMemberById:t=>Object(Je.d)(e,t),logger:Object(j.a)({state:e}),telemeter:Object(pe.c)({state:e}),showNewPeopleSearch:!Object(te.k)(e,"seen_people_search"),displayEmailAddresses:Object(Tr.a)(e,"display_email_addresses"),currentDisplayQuery:Object(ue.b)(e),featureFantailNurture:Object(Nr.a)(e),shouldIncrementPeopleSearchSeenCount:Object(te.f)(e),featureSearchResultsVirtualized:Object(O.m)(e,"feature_search_results_virtualized"),featureSearchTabsA11yImprovements:Object(O.m)(e,"feature_search_tabs_a11y_improvements"),showNumResults:c}},e=>({setSort:function(){return e(dt(...arguments))},setViewScrollPosition:function(){return e(Object(E.J)(...arguments))},setPageForModule:function(){return e(Object(E.u)(...arguments))},fetchSearchResultsByModule:function(){return e(Object(T.d)(...arguments))},clogSearchPeopleClick:function(){return e(Object(I.l)(...arguments))},clogSearchNextPage:function(){return e(Object(I.j)(...arguments))},clogSearchPreviousPage:function(){return e(Object(I.m)(...arguments))},markPeopleSearchSeen:function(){return e(Object(T.j)(...arguments))},incrementPeopleSearchSeenCount:function(){return e(Object(T.e)(...arguments))},showMemberProfile:function(){return e(Object(F.j)(...arguments))},closeSearch:function(){return e(Object(D.a)(...arguments))},startImByMemberId:function(){return e(Object(wr.startImByMemberId)(...arguments))},enqueueToast:function(){return e(Object(tr.c)(...arguments))},openSearchFeedbackDialog:function(){return e(Object(T.r)(...arguments))}}))(people_view_PeopleViewBase),Zr=Object(S.b)("Clog a search open event using data from redux",function(e,t){var{tab:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(E.I)({tab:a})),Object(j.a)({getState:t}).info("IMPROVED_SEARCH",'Switching to tab "'.concat(a,'"'))});Zr.meta={name:"setTab",key:"actionsUniversalSearchSetTabSetTab",description:"Clog a search open event using data from redux"},Zr.propTypes={method:s.default.string};var $r=Zr,es=(a("DFT4"),a("BA81")),ts=new B.b("search"),as={counts:{messages:NaN,files:NaN,channels:NaN,people:NaN},showCounts:!1,sortTabs:!1,featureSearchTabsA11yImprovements:!1,clogSearchOpen:_.a};class search_type_switch_SearchTypeSwitch extends n.PureComponent{constructor(e){super(e),Object(f.a)(this,["getClickHandler"])}getClickHandler(e){return()=>{this.props.setTab({tab:e}),this.props.clogSearchOpen({method:"search_tab"})}}isSortReady(e){return Number.isFinite(e.channels)&&Number.isFinite(e.people)&&Number.isFinite(e.files)}render(){var{featureSearchTabsA11yImprovements:e}=this.props,t=[{id:"messages",title:ts.t("Messages"),titleCount:this.props.showCounts?this.props.counts.messages:NaN,isLoading:"messages"!==this.props.tab&&this.props.sortTabs&&!this.isSortReady(this.props.counts),isCountLoading:this.props.showCounts&&!Number.isFinite(this.props.counts.messages),onClick:this.getClickHandler("messages"),"data-qa":"search_tab_messages","aria-label":e?ts.t("Messages, {numResults} {numResults, plural, =1 {result} other {results}}",{numResults:this.props.counts.messages||0}):void 0},{id:"files",title:ts.t("Files"),titleCount:this.props.showCounts?this.props.counts.files:NaN,isLoading:"files"!==this.props.tab&&this.props.sortTabs&&!this.isSortReady(this.props.counts),isCountLoading:this.props.showCounts&&!Number.isFinite(this.props.counts.files),onClick:this.getClickHandler("files"),"data-qa":"search_tab_files","aria-label":e?ts.t("Files, {numResults} {numResults, plural, =1 {result} other {results}}",{numResults:this.props.counts.files||0}):void 0},{id:"channels",title:ts.t("Channels"),titleCount:this.props.showCounts?this.props.counts.channels:NaN,isLoading:"channels"!==this.props.tab&&this.props.sortTabs&&!this.isSortReady(this.props.counts),isCountLoading:this.props.showCounts&&!Number.isFinite(this.props.counts.channels),onClick:this.getClickHandler("channels"),"data-qa":"search_tab_channels","aria-label":e?ts.t("Channels, {numResults} {numResults, plural, =1 {result} other {results}}",{numResults:this.props.counts.channels||0}):void 0},{id:"people",title:ts.t("People"),titleCount:this.props.showCounts?this.props.counts.people:NaN,isLoading:"people"!==this.props.tab&&this.props.sortTabs&&!this.isSortReady(this.props.counts),isCountLoading:this.props.showCounts&&!Number.isFinite(this.props.counts.people),onClick:this.getClickHandler("people"),"data-qa":"search_tab_people","aria-label":e?ts.t("People, {numResults} {numResults, plural, =1 {result} other {results}}",{numResults:this.props.counts.people||0}):void 0}];return this.props.sortTabs&&t.sort((e,t)=>"messages"===e.id?-1:"messages"===t.id?1:Number.isFinite(e.titleCount)?Number.isFinite(t.titleCount)?t.titleCount-e.titleCount:-1:1),r.a.createElement("div",{className:"c-search__tabs c-tabs__tab_menu"},r.a.createElement(es.a,{currentTabId:this.props.tab,tabs:t,formatCount:!0}))}}search_type_switch_SearchTypeSwitch.defaultProps=as;var ns={setTab:function(){return $r(...arguments)},clogSearchOpen:function(){return Object(I.k)(...arguments)}},rs=Object(c.b)(e=>{var t=Object(x.c)(e,"search_tab_counts");return{counts:Object(M.r)(e),tab:Object(l.u)(e),showCounts:"counts"===t||"counts_and_sort"===t,sortTabs:"counts_and_sort"===t,featureSearchTabsA11yImprovements:Object(O.m)(e,"feature_search_tabs_a11y_improvements")}},ns)(search_type_switch_SearchTypeSwitch);class search_view_SearchView extends n.PureComponent{renderCurrentView(){switch(this.props.tab){case"messages":return r.a.createElement(Hn,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"files":return r.a.createElement(Qn,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"channels":return r.a.createElement(Sr,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"people":return r.a.createElement(Jr,{onClickRefreshSearch:this.props.onClickRefreshSearch});default:return null}}render(){var e=o()("c-search__container",{"c-search__container--primary_search_sonic":this.props.usePrimarySearch&&Object(p.a)(),"c-search__container--primary_search_legacy":this.props.usePrimarySearch&&!Object(p.a)()});return r.a.createElement(u.a,{id:h.I.SEARCH},r.a.createElement("div",{className:e},r.a.createElement("div",{className:o()("c-search"),"data-qa":"search_view"},!this.props.usePrimarySearch&&r.a.createElement(rs,null),this.renderCurrentView())))}}search_view_SearchView.defaultProps={usePrimarySearch:!1};t.a=Object(c.b)(e=>({tab:Object(l.u)(e),usePrimarySearch:Object(d.a)(e)}))(search_view_SearchView)},"5oz1":function(e,t,a){},"67Ky":function(e,t,a){},"6EwF":function(e,t,a){"use strict";a.r(t);var n=a("rePB"),r=a("NZ+B"),s=a("tn36"),i=a("q1tI"),o=a.n(i),c=a("aK/h"),l=a("XHGt"),d=a("TSYQ"),p=a.n(d),u=a("sJy+"),h=a("HOkk"),m=a("Rszm"),b=a("O0RF"),_=a("8wro"),g=a("XfeM"),f=a("t85p"),v=a("brL+"),O=a("S3eg"),y=a("h9dl"),C=a("H2PH"),j=a("nNoG"),E=a("oLrU"),k=a("e+d/"),S=new j.b("snippet-dialog"),I=Object(g.b)("Upload a Snippet, maybe share it too",function(e,t){var{broadcast:a,fileName:n,fileType:r,fileContent:s,channelOrMemberId:i,threadTs:o,introMessage:c,blocks:l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=t(),p=Object(f.m)(d,"feature_sonic_snippets"),u=n||(p?S.t("Untitled"):""),h=k.a[r],m=h&&h.mimeType||"text/plain",b=new Blob([s],{type:m});b.name=u,b.snippetType=r;var _=Object(v.b)(d),g=Object(C.a)(_);return i?e(Object(y.a)({channelOrMemberId:i})).then(t=>g.uploadFiles({files:[b],shareData:{channelId:t,threadTs:t?o:void 0,clientMsgId:t?Object(E.a)():void 0,introMessage:c,blocks:l,broadcast:!(!t||!o)&&a}}).then(()=>e(Object(O.a)({id:t})))):g.uploadFiles({files:[b]})});I.meta={name:"uploadSnippet",key:"actionsUploadSnippetUploadSnippet",description:"Upload a Snippet, maybe share it too"},I.propTypes={fileName:c.default.string,fileType:c.default.string,fileContent:c.default.string.isRequired,channelOrMemberId:c.default.string,threadTs:c.default.string,introMessage:c.default.string,blocks:c.default.array,broadcast:c.default.bool};var w=I,T=a("AzV5"),N=a("aLpA"),P=a("RB1+"),A=a("JvzI"),M=a("+1yX"),x=a("XoJV"),R=a("dhvi"),D=a("IyaR"),F=a("Y6FH"),L=a("Hvpu"),U=a("Zwlx"),B=a("iJ4v"),H=a("r6UO");a("T/b3");function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}a.d(t,"BaseSnippetDialog",function(){return snippet_dialog_SnippetDialog});var G=new j.b("snippet-dialog"),K={initialName:"",initialType:void 0,initialSnippetText:"",initialChannelId:void 0,initialShareWith:void 0,threadTs:void 0,viewContext:void 0,resetSnippetText:void 0,initialContents:void 0,resetChannelId:void 0,featureSonicSnippets:!1,msgText:"",channelType:null,selectedChannelId:null,disallowedKeywordInMsgText:null,msgOps:void 0,featureWysiwygComposer:!1};class snippet_dialog_SnippetDialog extends i.PureComponent{constructor(e){super(e),Object(s.a)(this,["handleBroadcastChange","handleFileNameChange","handleFileTypeChange","handleFileContentChange","handleShareWithChange","handleMsgTextChange","handleSubmit","handleSubmitError","shouldShowSpeedBump","handleCancel"]),this.state={fileName:e.initialName,fileType:e.initialType,fileContent:e.initialSnippetText,shareWith:Object(r.a)(e.initialShareWith)?e.initialShareWith:!!e.initialChannelId,overMsgLengthLimit:!1,broadcast:!1}}isGoButtonDisabled(){var{disallowedKeywordInMsgText:e,canPostInSelectedChannel:t,threadTs:a,canThread:n}=this.props,{overMsgLengthLimit:r,fileName:s,fileContent:i,shareWith:o}=this.state,c=s.length>N.y;return o&&!t&&!a||o&&a&&!n||!!e||!i||r||c}shouldShowSpeedBump(e){if("cancel"===e||"close"===e){var{fileContent:t}=this.state,{resetSnippetText:a,initialSnippetText:n,featureWysiwygComposer:r}=this.props;return r?t!==n:t!==a}return!1}handleBroadcastChange(e){this.setState(()=>({broadcast:e}))}handleFileNameChange(e){this.setState(()=>({fileName:e}))}handleFileTypeChange(e){this.setState(()=>({fileType:e}))}handleFileContentChange(e){this.setState(()=>({fileContent:e}))}handleShareWithChange(e){var t=e.target.checked;this.setState(()=>({shareWith:!!t}))}handleMsgTextChange(e){var{text:t,msgOps:a,overLimit:n}=e,{featureWysiwygComposer:r}=this.props;r?this.props.setMsgOps(a):this.props.setMsgText(t),this.setState(()=>({overMsgLengthLimit:n}))}handleSubmit(){var e,{selectedChannelId:t,msgText:a,msgOps:n,threadTs:r,featureWysiwygComposer:s}=this.props,{broadcast:i,fileName:o,fileType:c,fileContent:l,shareWith:d}=this.state;s&&(e=this.props.converMsgOpsToRichTextMessage({msgOps:n,channelId:t,inThread:!!r})),this.props.uploadSnippet({fileName:Object(x.c)({locale:Object(A.a)(),text:o}),fileType:c,fileContent:l,channelOrMemberId:d?t:void 0,threadTs:d?r:void 0,introMessage:a,blocks:s?e:void 0,broadcast:i}).catch(this.handleSubmitError),this.props.closeModal()}handleSubmitError(){var{selectedChannelId:e,threadTs:t,msgText:a,initialContents:n,resetSnippetText:r,resetChannelId:s,viewContext:i}=this.props,{fileName:c,fileType:l,fileContent:d,shareWith:p}=this.state;this.props.openModal({element:o.a.createElement(z,{initialName:c,initialType:l,initialSnippetText:d,initialChannelId:e,initialShareWith:p,initialContents:n,initialText:a,threadTs:t,resetSnippetText:r,resetChannelId:s,viewContext:i})})}handleCancel(){var{resetSnippetText:e,initialContents:t,resetChannelId:a,threadTs:n,viewContext:r,featureWysiwygComposer:s}=this.props,i=Object(P.a)({channelId:a,threadTs:n,viewContext:r});if(i)if(s){if(!t||!i.setContents||!i.focus)return;i.setContents(t),i.focus()}else if(e){if(!i.setText)return;i.setText(e)}}maybeRenderBroadcast(){var{threadTs:e,canPostInSelectedChannel:t,channelType:a,selectedChannelName:n}=this.props,{broadcast:r}=this.state;return e&&t?o.a.createElement("div",{className:"p-snippet_dialog__broadcast_section"},o.a.createElement(H.a,{channelType:a,selectedChannelName:n,value:r,onChange:this.handleBroadcastChange})):null}renderShareWith(){var{shareWith:e}=this.state,t=G.t("Share with:",{fallbackHash:"134bfa9822f411e84749498f9747ec887fd5d0fd",fallbackHashNs:"share-dialog"});return o.a.createElement(b.a,{text:t,htmlFor:"create-snippet-share-with-checkbox",type:"inline"},o.a.createElement(m.a,{id:"create-snippet-share-with-checkbox","data-qa":"share_with",checked:e,onChange:this.handleShareWithChange}))}renderChannelPicker(){var{selectedChannelId:e,setSelectedChannel:t}=this.props,{shareWith:a}=this.state;return o.a.createElement(F.a,{onChange:t,initialChannelId:e,isDisabled:!a,dialogType:"share_snippet_dialog"})}renderShareWithPicker(){var{selectedChannelId:e,featureSonicSnippets:t,threadTs:a}=this.props;return a?o.a.createElement(B.a,{label:t?G.t("Sharing snippet in a thread"):"",channelId:e,threadTs:a}):o.a.createElement("div",{className:"p-snippet_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}renderShareAlert(){var{shareWith:e}=this.state;if(!e)return null;var t=Object(U.a)(q({},this.props));return t?o.a.createElement("div",{className:"p-share_dialog__section"},o.a.createElement(u.d,{type:"inline",level:"warning",className:"margin_bottom_100"},t)):null}renderMessageInput(){var{selectedChannelId:e,msgText:t}=this.props,{shareWith:a}=this.state,n=G.t("Add a message, if you\u2019d like.",{fallbackHash:"23c9aa1fa55b5fbe8da1b3748ad70b595d6fadc5",fallbackHashNs:"share-dialog"}),r=p()("p-share_dialog__section","p-share_dialog__create_snippet_message_input",{"p-share_dialog__create_snippet_message_input--hide":!a}),s=Object(M.a)(e)?e:void 0;return o.a.createElement("div",{className:r},o.a.createElement(D.a,{text:t,channelId:s,onTextChange:this.handleMsgTextChange,enabled:a,placeholder:n,ariaLabel:n,onEnter:this.handleSubmit}),this.maybeRenderBroadcast())}render(){var{fileName:e,fileType:t,fileContent:a}=this.state,{featureSonicSnippets:n}=this.props;if(!n)return null;var r=G.t("Create snippet"),s=G.t("Create Snippet");return o.a.createElement(h.a,{className:"p-snippet_dialog",title:r,goButtonText:s,useSlackScrollbarWithPadding:!0,shouldCloseOnGo:!1,onGo:this.handleSubmit,onClose:this.handleCancel,footerText:this.renderShareWithPicker(),goButtonIsDisabled:this.isGoButtonDisabled(),getShouldShowSpeedBump:this.shouldShowSpeedBump,speedBumpTitleText:G.t("Are you sure you want to discard this snippet permanently?"),speedBumpCancelButtonText:G.t("No, keep it"),speedBumpContinueButtonText:G.t("Yes, discard this snippet"),showCancelButton:!1},o.a.createElement(_.a,{fileName:e,onFileNameChange:this.handleFileNameChange,fileType:t,onFileTypeChange:this.handleFileTypeChange,fileContent:a,onFileContentChange:this.handleFileContentChange,onKBSubmit:this.handleSubmit}),this.renderShareAlert(),this.renderMessageInput())}}snippet_dialog_SnippetDialog.defaultProps=K;var V=Object(l.b)(function(e,t){return q({},Object(L.b)(e,t),{featureSonicSnippets:Object(f.m)(e,"feature_sonic_snippets")})},function(e){return{uploadSnippet:function(){return e(w(...arguments))},closeModal:function(){return e(Object(R.a)(...arguments))},openModal:function(){return e(Object(R.e)(...arguments))},converMsgOpsToRichTextMessage:function(){return e(Object(T.a)(...arguments))}}})(snippet_dialog_SnippetDialog),z=Object(L.a)(V);t.default=z},"6S4m":function(e,t,a){},"6mX7":function(e,t,a){},"6ne/":function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),s=a("q1tI"),i=a.n(s),o=(a("aK/h"),a("hXpn")),c=a("kd6D"),l=a("0z7M"),d=(a("JfyJ"),{className:void 0,isActive:!1,isDeactivated:!1,isDisabled:!1,secondaryContent:void 0});function p(e){var t,{className:a,isActive:s,isDeactivated:d,isDisabled:p,secondaryContent:u}=e,h=Object(r.a)(e,["className","isActive","isDeactivated","isDisabled","secondaryContent"]);return s?t=p||d?c.c.highlightDim:c.c.highlightLight:(p||d)&&(t=c.c.dim),i.a.createElement(o.a,{className:a,primaryContent:i.a.createElement(l.a,Object(n.a)({isDeactivated:d},h)),secondaryContent:u,size:"medium",style:t})}p.defaultProps=d,t.a=p},"6u4E":function(e,t,a){},"6xja":function(e,t,a){"use strict";var n=a("XfeM"),r=a("aK/h"),s=a("uvIC"),i=a("P9LH"),o=a("Fdc0"),c=a("XL7r"),l=a("gLeh"),d=a("bsix"),p=a("A/mR"),u=new(a("nNoG").b)("files"),h=Object(n.b)("build file summary for aria labels",function(e,t){var{fileId:a,hasFocus:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t();if(Object(l.b)(r)||n){var h=Object(s.c)(r,a);if(h){var{created:m,timestamp:b,user:_}=h,g=m||b,f=Object(i.E)(h)?Object(d.a)(h):Object(i.p)(h),v=Object(i.k)(h),O=Object(o.W)(r,_),y=Object(p.i)(g,{shortenMonth:!1,excludeYear:Object(p.h)(g)}),C=Object(c.k)(r,"time24"),j=Object(p.n)(g,{do24hrTime:C});return u.t("{fileType} file {fileName} uploaded by {userName} on {dateStr} at {timeStr}",{fileType:f,fileName:v,userName:O,dateStr:y,timeStr:j})}}});h.meta={name:"makeFileSummary",key:"actionsMakeFileSummaryMakeFileSummary",description:"build file summary for aria labels"},h.propTypes={fileId:r.default.string.isRequired,hasFocus:r.default.bool},t.a=h},"7/SY":function(e,t,a){"use strict";var n=a("mM05"),r=a.n(n),s=a("aLpA"),i=a("9PC1"),o=a("mLe0"),c=a("pWPO");t.a=function(e,t){var{featureWysiwygComposer:a}=t;if(!e)return!1;if(!Object(i.p)(e.contents,{embedReplacement:"a"}).trim())return!1;if(a){if(Object(o.a)(new r.a(e.contents))>s.C)return!1}else if(Object(c.a)(e).length>s.B)return!1;return!0}},"7/T7":function(e,t,a){},"7ARk":function(e,t,a){"use strict";var n=a("XfeM"),r=a("BrU6"),s=a("GbAX"),i=a("Mj3f"),o=a("HG/F"),c=Object(n.b)("Reset people search UI",(e,t)=>{var a=t().searchUi.sharedTeams.teamIds;e(Object(i.e)()),a&&Array.isArray(a)&&a.length&&e(Object(o.f)({teamIds:a.slice(0,3)}))});c.meta={name:"resetPeopleSearchUi",key:"actionsUniversalSearchResetPeopleSearchUiResetPeopleSearchUi",description:"Reset people search UI"};var l=c,d=a("iW0Y"),p=a("tfx1"),u=a("YYb+"),h=a("JrUZ"),m=a("smh8"),b=a("hPzE"),_=Object(n.b)("Clear the search input, resetting the editable query and ending the search and query sessions",(e,t)=>{var a=t();if(e(Object(r.a)({textyString:"",fetchAutocompleteSuggestions:!0})),e(Object(d.a)({interfaceMode:p.a.EDIT})),e(Object(h.s)()),e(Object(i.m)()),e(Object(m.a)()),e(Object(i.c)()),e(Object(u.g)()),e(l()),!Object(s.v)(a)){e(Object(b.c)());var n=Object(s.t)(a);n&&(clearTimeout(n),e(Object(i.G)({sessionTimeoutId:null})))}});_.meta={name:"clearSearchInput",key:"actionsUniversalSearchClearSearchInputClearSearchInput",description:"Clear the search input, resetting the editable query and ending the search and query sessions"},_.propTypes=null;t.a=_},"7SIE":function(e,t,a){},"7Xqt":function(e,t,a){"use strict";a.d(t,"a",function(){return DegradedList});var n=a("rePB"),r=a("q1tI"),s=a.n(r),i=a("TSYQ"),o=a.n(i),c=a("aK/h"),l=a("od5y"),d=a("nNoG"),p=a("j6qi");a("2XjY");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var m=new d.b("messages"),b=20,_=h({},p.a.propTypes,{reachedStart:c.default.bool,reachedEnd:c.default.bool}),g=h({},p.a.defaultProps,{reachedStart:!1,reachedEnd:!1});class DegradedList extends p.a{constructor(e){super(e),this.pendingUpdate=null,this.recomputeOffsets(e),this.overscan=Math.max(200,e.height/2)}componentDidUpdate(){super.componentDidUpdate(...arguments),0===this.props.keys.length&&this.loadMore(),this.layout.setBottomMargin(this.getLoadingOffsetBottom()),this.pendingUpdate=!1}onKeyDownPageDown(e){this.state.hasKeyboardFocus&&this.isScrolledToBottom()&&this.props.reachedEnd?this.focusLastItemInView():super.onKeyDownPageDown(e)}onKeyUpPageDown(e){this.state.hasKeyboardFocus&&this.isScrolledToTop()&&this.props.reachedStart?this.focusFirstItemInView():super.onKeyUpPageDown(e)}getOffset(){var e=this.getLoadingOffsetTop();return this.startTop-e}getLoadingOffsetTop(){return this.props.keys.length?this.props.reachedStart&&0===this.state.start?0:this.layout.getTotalHeight()<=this.props.height?0:0!==this.state.start?96:56:0}getLoadingOffsetBottom(){return this.props.keys.length?this.props.reachedEnd&&this.state.end===this.props.keys.length?0:96:0}getScrollTop(){return"number"==typeof this.scrollTop?this.scrollTop:"number"==typeof this.pendingScrollTop?this.pendingScrollTop:super.getScrollTop()+this.getOffset()}getContentHeight(){return this.endBottom-this.getOffset()+this.getLoadingOffsetBottom()}getTop(e){return this.layout.getTop(e)-this.getOffset()}getBottom(e){return this.layout.getBottom(e)-this.getOffset()}setScrollTop(e){var t=e<this.getOffset(),a=e+this.props.height>this.endBottom+this.getLoadingOffsetBottom();if(t&&0!==this.state.start||a&&this.state.end!==this.props.keys.length)return this.scrollTop=e,void this.relayout();super.setScrollTop(e-this.getOffset())}scrollToOffset(e){var{animate:t,absolute:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.node&&!this.pendingUpdate){var n=a?e:e-this.getOffset();!a&&n>0&&n<this.getLoadingOffsetTop()&&(n=0);var r=this.bracketScrollTop(n);a||r===n?t?this.scrollAnimation=this.node.scrollWithAnimation(r):super.setScrollTop(r):this.setScrollTop(e)}}bracketScrollTop(e){return Math.max(0,Math.min(this.getContentHeight()-this.props.height,e))}resetRendered(){this.overscan=this.props.height/2}loadMore(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.start,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.end,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getScrollTop(),r=this.layout.getTotalHeight(),s=0===e&&n<1,i=t===a.keys.length&&n+a.height>r-1,o=!a.keys.length||r<=a.height||s,c=!a.keys.length||r<=a.height||i;return o&&c?a.loadAround():o?a.loadPre():!!c&&a.loadPost()}relayout(){this.setState((e,t)=>{if(t.isLoading)return null;var{start:a,end:n}=e,r=this.startKey,s=this.endKey;this.recomputeOffsets(t,a,n);var i=this.node?this.node.scrollTop():0,o=this.getScrollTop(),c=i-1<=0||o-1<=this.getOffset(),l=i+1>=this.getContentHeight()-t.height||o+1>=this.endBottom-t.height,d={start:a,end:n};if(this.startKey!==r||this.endKey!==s||c&&0!==a||l&&n!==t.keys.length){e.scrolling&&(this.overscan=8e3),d=this.computeBounds(t,o);var{start:p,end:u}=d;this.recomputeOffsets(t,p,u),c=o-1<=this.getOffset(),l=o+t.height+1>=this.endBottom+this.getLoadingOffsetBottom()}(c&&0===d.start||l&&d.end===t.keys.length||this.layout.getTotalHeight()<t.height&&0===d.start)&&this.loadMore(a,n,t);var m=this.layout.getTops();return d.start===a&&d.end===n&&m===e.tops?null:(this.scrollAnimation&&this.scrollAnimation.cancel(),this.pendingUpdate=!0,this.scrollTop=o,h({},d,{tops:m}))})}recomputeOffsets(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.start,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.end,n=this.layout.getTotalHeight()<=e.height;this.startKey=e.keys[t],this.endKey=e.keys[a-1],this.startTop=n?0:this.layout.getTop(this.startKey)||0,this.endBottom=this.layout.getBottom(this.endKey)||0}computeBounds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1?arguments[1]:void 0,a=t-this.overscan,n=t+e.height+this.overscan,r=super.getBounds(a,n);return this.snapBounds(e,r)}snapBounds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,{start:t,end:a}=arguments.length>1?arguments[1]:void 0;return{start:t<b?0:t,end:e.keys.length-a<b?e.keys.length:a}}renderLoading(e,t){var a=e?{top:0,paddingTop:40}:{bottom:0,paddingBottom:15},n=e?"degradedLoadingTop":"degradedLoadingBottom",r=this.props.featureOfflineMode&&this.props.isOffline&&!t,i=m.t("Loading history...");this.props.featureOfflineMode&&r&&(i=s.a.createElement("span",null,s.a.createElement(l.b,{type:"cloud-offline-small",size:"inherit"})," ",s.a.createElement("strong",null,m.t("No connection."))," ",m.t("Go online to load more messages.")));var c=o()("p-degraded_list__loading",{"p-degraded_list__loading--offline":r});return s.a.createElement("div",{key:n,className:c,style:a},i)}renderItems(){var e=super.renderItems(),t=this.state.start>0,a=this.state.end<this.props.keys.length,n=this.props.keys.length>1&&(!this.props.reachedStart||t),r=this.props.keys.length>1&&(!this.props.reachedEnd||a);return[n&&this.renderLoading(!0,t),...e,r&&this.renderLoading(!1,a)]}}DegradedList.propTypes=_,DegradedList.defaultProps=g},"7p4D":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=a("TSYQ"),o=a.n(i),c=(a("aK/h"),a("t85p")),l=a("dxEi"),d=a("exfU"),p=a("cD5Y"),u={className:void 0,featureOfflineMode:!1,isOffline:!1};function h(e){var{className:t,featureOfflineMode:a,isOffline:n}=e;return a&&n?r.a.createElement(d.a,null):r.a.createElement("div",{className:o()(t,"c-message_list__spinner")},r.a.createElement(p.a,{size:"jumbo"}))}h.defaultProps=u,t.a=Object(s.b)(function(e){return{featureOfflineMode:Object(c.m)(e,"feature_offline_mode"),isOffline:!Object(l.c)(e)}})(h)},"7v/h":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("XHGt")),i=a("oRCd"),o=a("ROZo"),c=Object(o.b)("TS.generic_notification_banner.banner_to_show_sig.dispatch"),l=Object(o.b)("TS.ui.banner.isDunningBanner",()=>!1),d=Object(o.b)("TS.ui.banner.show"),p=a("rePB"),u=a("tn36"),h=a("1hAG"),m=a("5mKg"),b=a("nNoG"),_=a("kOzZ"),g=a("negh"),f=a("ifKl"),v=a("TSYQ"),O=a.n(v),y=a("c8iJ"),C=a("XLFM"),j=(a("+ZNJ"),new b.b("notification_banner")),E={imgSrc:"",imgAlt:"",bannerAriaLabel:"",headerText:"",bodyText:"",focusOnHeader:!1,bodyClass:"",bodyIcon:"",bannerContainerClass:"",goButtonText:"",goButtonClass:"",onGo:f.a,showGoButton:!0,isLearnMoreButton:!1,shouldCloseOnGo:!0,cancelButtonText:void 0,cancelButtonClass:"",onCancel:f.a,cancelHref:void 0,cancelTarget:void 0,showCancelButton:!0,shouldCloseOnCancel:!0,showCloseIcon:!1,onCloseIcon:f.a,onCloseBanner:f.a,bannerPrefs:{}};class message_pane_banner_MessagePaneBanner extends n.PureComponent{constructor(e){super(e),this.headerRef=r.a.createRef(),Object(u.a)(this,["handleGoButton","handleCancelButton","handleCloseIcon"])}componentDidMount(){this.props.focusOnHeader&&this.headerRef.current&&this.headerRef.current.focus()}closeBanner(){var{onCloseBanner:e,bannerPrefs:t}=this.props;this.props.closeBanner({bannerPrefs:t}),e()}handleGoButton(){var{onGo:e,shouldCloseOnGo:t}=this.props;t&&this.closeBanner(),e()}handleCancelButton(){var{onCancel:e,shouldCloseOnCancel:t}=this.props;t&&this.closeBanner(),e()}handleCloseIcon(){var{onCloseIcon:e}=this.props;this.closeBanner(),e()}renderHeader(){var{headerText:e,imgSrc:t,imgAlt:a}=this.props;return e?r.a.createElement("div",{className:"p-message_pane_banner__header"},t&&r.a.createElement("div",{className:"p-message_pane_banner__header_img_container"},r.a.createElement("img",{src:t,alt:a,className:"p-message_pane_banner__header_img","data-qa":"message_pane_banner_header_img"})),r.a.createElement("div",{className:"display_flex justify_content_center"},r.a.createElement("h1",{className:"p-message_pane_banner__header_text",ref:this.headerRef,tabIndex:-1},e))):null}renderBody(){var{bodyText:e,bodyClass:t,bodyIcon:a}=this.props;if(!e)return null;var n=O()("p-message_pane_banner__body",t);return r.a.createElement("div",{className:n},a&&r.a.createElement(y.a,{type:a,size:"inherit",className:"p-message_pane_banner__body_icon"}),e)}renderGoButton(){var{goButtonText:e,goButtonClass:t,isLearnMoreButton:a}=this.props,n=a?j.t("Learn More"):j.t("Show Me"),s=O()("p-message_pane_banner__button ","p-message_pane_banner__button--go",t);return r.a.createElement(C.b,{className:s,onClick:this.handleGoButton,size:"small","data-qa":"message_pane_banner_go_button"},e||n)}renderCancelButton(){var{cancelButtonClass:e,cancelHref:t,cancelTarget:a}=this.props,n=O()("p-message_pane_banner__button","p-message_pane_banner__button--cancel",e),s=this.props.cancelButtonText||j.t("Skip for Now");return r.a.createElement(C.b,{className:n,onClick:this.handleCancelButton,href:t,target:a,size:"small",type:"outline","data-qa":"message_pane_banner_cancel_button"},s)}renderCloseIcon(){return r.a.createElement(C.c,{"aria-label":j.t("Close"),className:"p-message_pane_banner__close_icon",onClick:this.handleCloseIcon,"data-qa":"message_pane_banner_close_icon"},r.a.createElement(y.a,{type:"times"}))}render(){var{showGoButton:e,showCancelButton:t,showCloseIcon:a,bannerAriaLabel:n,bannerContainerClass:s}=this.props,i=O()("p-message_pane_banner",s);return r.a.createElement("div",{className:i,role:"banner","aria-label":n},this.renderHeader(),this.renderBody(),r.a.createElement("div",{className:"p-message_pane_banner__button_container"},t&&this.renderCancelButton(),e&&this.renderGoButton()),a&&this.renderCloseIcon())}}message_pane_banner_MessagePaneBanner.defaultProps=E;var k={closeBanner:i.a},S=Object(s.b)(null,k)(message_pane_banner_MessagePaneBanner);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var w=new b.b("client"),T="btn_show_me",N="btn_close",P={countPref:"activation_msg_limit_banner_cta_count",tsPref:"activation_msg_limit_banner_cta_last_ts"},A=["keydown","mousedown","touchstart"];var M=Object(s.b)(e=>({team:Object(h.d)(e),clogger:Object(_.a)({state:e})}))(class activation_msg_limit_banner_ActivationMsgLimitBanner extends n.PureComponent{constructor(e){super(e),this.teamMenuEl=null,this.menuItemEls=null,this.limitMeterMenuItemEl=null,this.limitMeterInitialStyles=null,this.teamMenuInitialStyles=null,Object(u.a)(this,["onGo","onClose","removeLimitMeterHighlight"])}componentDidMount(){this.clog({action:g.UiAction.IMPRESSION})}onGo(){this.clog({action:g.UiAction.CLICK,ui_properties:{element_type:g.ElementType.BUTTON,element_name:T}});var e=document.querySelector("#team-menu-trigger");e?(e.click(),setTimeout(()=>{this.addLimitMeterHighlight()},100)):Object(m.P)(this.props.team,"/admin/stats")}onClose(){this.clog({action:g.UiAction.CLICK,ui_properties:{element_type:g.ElementType.BUTTON,element_name:N}})}addLimitMeterHighlight(){this.teamMenuEl=document.querySelector(".p-classic_nav__team_menu"),this.menuItemEls=document.getElementsByClassName("c-menu_item__li");var e=document.querySelector(".p-classic_nav__team_messages_limit_meter");if(this.limitMeterMenuItemEl=e&&e.closest(".c-menu_item__li"),this.teamMenuEl&&this.menuItemEls.length&&this.limitMeterMenuItemEl){this.limitMeterInitialStyles=this.limitMeterMenuItemEl.getAttribute("style"),this.teamMenuInitialStyles=this.teamMenuEl.getAttribute("style"),this.limitMeterMenuItemEl.style.boxShadow="0 0 0 99999px rgba(0, 0, 0, .4)",this.limitMeterMenuItemEl.style.position="relative",this.limitMeterMenuItemEl.style.zIndex=99999,this.teamMenuEl.style.overflow="visible";for(var t=0;t<this.menuItemEls.length;t++)this.menuItemEls.item(t).style.pointerEvents="none";this.limitMeterMenuItemEl.style.pointerEvents="auto",A.forEach(e=>{document.addEventListener(e,this.removeLimitMeterHighlight)})}}removeLimitMeterHighlight(){this.teamMenuEl.setAttribute("style",this.teamMenuInitialStyles),this.limitMeterMenuItemEl.setAttribute("style",this.limitMeterInitialStyles);for(var e=0;e<this.menuItemEls.length;e++)this.menuItemEls.item(e).style.pointerEvents="auto";A.forEach(e=>{document.removeEventListener(e,this.removeLimitMeterHighlight)})}clog(e){var{clogger:t,messagesCount:a,totalUsers:n,totalChannels:r}=this.props,s=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({step:g.UiStep.BANNER_ACTIVATION_MSG_LIMIT},e);t.track(g.EventId.UPGRDEXP_MSG_LIM_ACTIVATION_BANNER,{limit_meter_messages_count:a,num_members_minus_bots:n,num_of_channels:r,contexts:{ui_context:s}})}render(){var{totalUsers:e,totalChannels:t,messagesCount:a,teamName:n}=this.props,s=w.t("{name_of_workspace} is on a roll",{name_of_workspace:Object(b.q)(n)}),i=w.rt("Your team\u2019s now <b>{num_of_members} members</b> strong, with <b>{num_of_messages} messages</b> sent across <b>{num_of_channels} channels</b>. You can track your team\u2019s progress via the main menu.",{num_of_members:e,num_of_messages:a,num_of_channels:t}),o=w.t("Show Me");return r.a.createElement(S,{headerText:s,bodyText:i,goButtonText:o,onGo:this.onGo,showCancelButton:!1,showCloseIcon:!0,onCloseIcon:this.onClose,bannerPrefs:P})}}),x=a("XL7r"),R=a("qN/r"),D=a("rWF5"),F=a("0f2Y"),L=new b.b("send_btn"),U={countPref:"i18n_japan_beta_send_btn_banner_cta_count",tsPref:"i18n_japan_beta_send_btn_banner_cta_last_ts"},B=g.UiStep.BANNER_JAPAN_BETA_SEND_BTN,H=g.EventId.UPGRDEXP_I18N_BANNER;var W=Object(s.b)(e=>({hasSendButton:Object(x.k)(e,"msg_input_send_btn"),sendButtonAutoSet:Object(x.k)(e,"msg_input_send_btn_auto_set"),clogger:Object(_.a)({state:e})}),function(e){return{closeBanner:i.a,openPrefsModal:function(){return e(Object(R.a)(...arguments))}}})(class i18n_japan_beta_send_btn_banner_I18nJapanBetaSendBtnBanner extends n.PureComponent{constructor(e){super(e),this.onPrefLinkClick=this.onPrefLinkClick.bind(this)}componentDidMount(){var{clogger:e}=this.props;e.track(H,{contexts:{ui_context:{step:B,action:g.UiAction.IMPRESSION}}})}onPrefLinkClick(){var{clogger:e}=this.props;e.track(H,{contexts:{ui_context:{step:B,action:g.UiAction.CLICK,ui_element:g.UiElement.PREFS_BUTTON}}}),this.props.openPrefsModal({activeSection:"advanced",activeSubsection:"msg_input_send_btn_label"}),this.props.closeBanner()}UNSAFE_componentWillUpdate(e){var{hasSendButton:t,sendButtonAutoSet:a}=this.props;a===e.sendButtonAutoSet&&t===e.hasSendButton||this.props.closeBanner()}renderBodyText(){return r.a.createElement("div",null,L.rt("Send a message with a quick click, or by pressing <Keys>keys</Keys>",{},()=>r.a.createElement("div",{className:"inline_block"},r.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(D.q)()?"\u2318":"Ctrl"),r.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"Enter"))),r.a.createElement("br",null),L.rt("Don\u2018t like the change? You can always switch back in <Link>your preferences</Link>.",{},e=>{var{text:t}=e;return r.a.createElement(F.a,{onClick:this.onPrefLinkClick},t)}))}render(){var e=L.t("Just for Japan: a button for sending"),t=L.t("Got It");return r.a.createElement(S,{headerText:e,bodyText:this.renderBodyText(),bodyClass:"p-message_pane_banner__body--taller-line-height",goButtonText:t,showCancelButton:!1,showCloseIcon:!0,bannerPrefs:U})}}),q=a("4kdM"),G=a("vMmh"),K=a("quKg"),V=a("AjwY"),z=new b.b("notification_banner"),Y={countPref:"local_discount_awareness_banner_cta_count",tsPref:"local_discount_awareness_banner_cta_last_ts",hidePref:"local_discount_awareness_banner_cta_hide"},Q=g.UiStep.BANNER_LOCAL_DISCOUNT_AWARENESS_BANNER;var X=Object(s.b)(e=>({clogger:Object(_.a)({state:e}),goToPlansPage:()=>Object(m.P)(Object(h.d)(e),Object(V.j)({entryPoint:"local_discount_awareness_banner"})),localDiscountAwarenessExperiment:Object(K.c)(e,"local_discount_awareness")}))(class local_discount_awareness_banner_LocalDiscountAwarenessBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["onGo","onCloseIcon","onCancel"])}componentDidMount(){this.clog({action:g.UiAction.IMPRESSION,ui_properties:{element_type:g.ElementType.BANNER,element_name:"local_discount_awareness_banner"}})}onGo(){var{goToPlansPage:e}=this.props;this.clog({action:g.UiAction.CLICK,ui_element:g.UiElement.PRICING_BUTTON,is_primary_cta:!0,ui_properties:{element_type:g.ElementType.BUTTON,element_name:"pricing_button"}},!0),e()}onCancel(){this.clog({action:g.UiAction.CLOSE,ui_element:g.UiElement.SKIP_FOR_NOW_BUTTON,ui_properties:{element_type:g.ElementType.BUTTON,element_name:"skip_for_now_button"}})}onCloseIcon(){this.clog({action:g.UiAction.CLOSE,ui_element:g.UiElement.BTN_CLOSE,ui_properties:{element_type:g.ElementType.X,element_name:"btn_close"}})}getContent(){var{discountPercent:e,country:t,localDiscountAwarenessExperiment:a}=this.props,n=O()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--".concat(t.toLowerCase()));return{headerText:r.a.createElement("div",null,r.a.createElement("div",{className:n}),"treatment1"===a?z.rt("Get a {discountPercent}% discount on a paid plan",{discountPercent:e}):z.rt("Upgrade to access paid features \u2014 at {discountPercent}% off",{discountPercent:e})),bodyText:z.rt("For a limited time, teams in {country} can get {discountPercent}% off when upgrading to a paid plan. Once you upgrade, your team will be able to see and search all past messages and files, add guests to your workspace, and more.",{country:G.a[t].name,discountPercent:e}),cancelButtonText:z.t("Not Now"),goButtonText:z.t("See Upgrade Options")}}clog(e,t){var{clogger:a}=this.props,n=Object(q.a)(e,{step:Q});a.track(g.EventId.GROWTH_LOCAL_DISCOUNT,{contexts:{ui_context:n}}),t&&a.track(g.EventId.GROWTH_PRICING,{contexts:{ui_context:n}})}render(){var e=this.getContent();return r.a.createElement(S,{headerText:e.headerText,bodyClass:"p-message_pane_banner__body--widest-text",bodyText:e.bodyText,cancelButtonText:e.cancelButtonText,goButtonText:e.goButtonText,showCloseIcon:!0,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:Y})}}),J=a("JoAr"),Z=a("t85p");function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var ee=Object(s.b)((e,t)=>({clogger:Object(_.a)({state:e}),goToPlansPage:()=>Object(m.P)(Object(h.d)(e),Object(V.j)({entryPoint:t.clogData.elementName}))}))(class discount_banner_DiscountBanner extends n.Component{constructor(e){super(e),Object(u.a)(this,["onGo","onCloseIcon","onCancel"])}componentDidMount(){this.clog({action:g.UiAction.IMPRESSION,ui_properties:{element_type:g.ElementType.BANNER,element_name:this.props.clogData.elementName}})}onGo(){var{goToPlansPage:e}=this.props;this.clog({action:g.UiAction.CLICK,is_primary_cta:!0,ui_properties:{element_type:g.ElementType.BUTTON,element_name:"pricing_button"}},!0),e()}onCancel(){this.clog({action:g.UiAction.CLOSE,ui_properties:{element_type:g.ElementType.BUTTON,element_name:"skip_for_now_button"}})}onCloseIcon(){this.clog({action:g.UiAction.CLOSE,ui_properties:{element_type:g.ElementType.X,element_name:"btn_close"}})}clog(e,t){var{clogData:a,clogger:n}=this.props,r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({step:a.step},e);n.track(a.eventId,{contexts:{ui_context:r}}),t&&n.track(g.EventId.GROWTH_PRICING,{contexts:{ui_context:r}})}render(){var{cancelButtonText:e,goButtonText:t,headerText:a,bodyText:n,bannerPrefs:s}=this.props;return r.a.createElement(S,{bodyClass:"p-message_pane_banner__body--widest-text",bodyText:n,headerText:a,cancelButtonText:e,goButtonText:t,showCloseIcon:!0,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:s})}}),te=new b.b("notification_banner"),ae={step:g.UiStep.TENURED_TEAMS_DISCOUNT_AWARENESS_BANNER,eventId:g.EventId.GROWTH_PRICING,elementName:"tenured_discount_awareness_banner"},ne={countPref:"tenured_discount_awareness_banner_cta_count",tsPref:"tenured_discount_awareness_banner_cta_last_ts",hidePref:"tenured_discount_awareness_banner_cta_hide"};var re=Object(s.b)(e=>({featureTargetedPromotionalDiscounts:Object(Z.m)(e,"feature_targeted_promotional_discounts")}))(class tenured_discount_awareness_banner_TenuredDiscountAwarenessBanner extends n.PureComponent{getContent(){var e=O()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--tenured-team"),{discountPercent:t,expirationTs:a,featureTargetedPromotionalDiscounts:n}=this.props;return n?{headerText:r.a.createElement("div",null,r.a.createElement("div",{className:e}),te.rt("Get {discountPercent}% off our Standard and Plus plans",{discountPercent:t})),bodyText:te.rt("As a thank you for the time your team\u2019s been on Slack, here\u2019s {discountPercent}% off your upgrade, available through {expirationDate}. Your team will have access to features like group video calls, shared channels, and an unlimited, searchable message history.",{discountPercent:t,expirationDate:Object(J.a)(a,"{date_long}")})}:null}render(){if(!this.props.featureTargetedPromotionalDiscounts)return null;var e=this.getContent();return r.a.createElement(ee,{goButtonText:te.t("See Upgrade Options"),cancelButtonText:te.t("Not Now"),headerText:e.headerText,bodyText:e.bodyText,bannerPrefs:ne,clogData:ae})}}),se=new b.b("notification_banner"),ie={step:g.UiStep.TENURED_TEAMS_DISCOUNT_ONE_WEEK_LEFT_BANNER,eventId:g.EventId.GROWTH_PRICING,elementName:"tenured_discount_one_week_left_banner"},oe={countPref:"one_week_left_tenured_discount_banner_cta_count",tsPref:"one_week_left_tenured_discount_banner_cta_last_ts",hidePref:"one_week_left_tenured_discount_banner_cta_hide"};var ce=Object(s.b)(e=>({featureTargetedPromotionalDiscounts:Object(Z.m)(e,"feature_targeted_promotional_discounts")}))(class one_week_left_tenured_discount_banner_OneWeekLeftTenuredDiscountBanner extends n.PureComponent{getContent(){var{discountPercent:e,expirationTs:t,featureTargetedPromotionalDiscounts:a}=this.props,n=O()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--tenured-team");return a?{headerText:r.a.createElement("div",null,r.a.createElement("div",{className:n}),se.rt("Just for you: {discountPercent}% off Standard and Plus plans",{discountPercent:e})),bodyText:se.rt("As a thank you for the time your team\u2019s been on Slack, here\u2019s {discountPercent}% off your upgrade, available through {expirationDate}. Your team will have access to features like group video calls, shared channels, and an unlimited, searchable message history.",{discountPercent:e,expirationDate:Object(J.a)(t,"{date_long}")})}:null}render(){if(!this.props.featureTargetedPromotionalDiscounts)return null;var e=this.getContent();return r.a.createElement(ee,{goButtonText:se.t("See Upgrade Options"),cancelButtonText:se.t("Not Now"),headerText:e.headerText,bodyText:e.bodyText,bannerPrefs:oe,clogData:ie})}}),le=new b.b("notification_banner"),de={step:g.UiStep.TENURED_TEAMS_DISCOUNT_ONE_DAY_LEFT_BANNER,eventId:g.EventId.GROWTH_PRICING,elementName:"tenured_discount_one_day_left_banner"},pe={countPref:"one_day_left_tenured_discount_banner_cta_count",tsPref:"one_day_left_tenured_discount_banner_cta_last_ts",hidePref:"one_day_left_tenured_discount_banner_cta_hide"};var ue=Object(s.b)(e=>({featureTargetedPromotionalDiscounts:Object(Z.m)(e,"feature_targeted_promotional_discounts")}))(class one_day_left_tenured_discount_banner_OneDayLeftTenuredDiscountBanner extends n.PureComponent{getContent(){var{discountPercent:e,expirationTs:t,featureTargetedPromotionalDiscounts:a}=this.props,n=O()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--tenured-team");return a?{headerText:r.a.createElement("div",null,r.a.createElement("div",{className:n}),le.rt("Last day to get {discountPercent}% off Standard and Plus plans",{discountPercent:e})),bodyText:le.rt("As a thank you for the time your team\u2019s been on Slack, here\u2019s {discountPercent}% off your upgrade, available through {expirationDate}. Your team will have access to features like group video calls, shared channels, and an unlimited, searchable message history.",{discountPercent:e,expirationDate:Object(J.a)(t,"{date_long}")})}:null}render(){if(!this.props.featureTargetedPromotionalDiscounts)return null;var e=this.getContent();return r.a.createElement(ee,{goButtonText:le.t("See Upgrade Options"),cancelButtonText:le.t("Not Now"),headerText:e.headerText,bodyText:e.bodyText,bannerPrefs:pe,clogData:de})}}),he=a("zmn3"),me=a("fujP"),be=a("vmJv"),_e=a("4M+g"),ge=a("6kok"),fe=a("46+D");function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Oe={isSharedChannel:!1,sharedTeamNames:[],bodyClass:"",bodyIcon:"",bannerContainerClass:"",onGoUrl:"",goButtonText:"",headerText:"",showCloseIcon:!0,showGoButton:!0,renderBodyText:f.a,onCloseBanner:f.a};class esc_trial_banner_EscTrialBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["onGo","onCloseIcon","renderBodyText"])}componentDidMount(){this.clog({action:g.UiAction.IMPRESSION})}onGo(){var{onGoUrl:e,team:t}=this.props;this.clog({action:g.UiAction.CLICK,ui_properties:{element_type:g.ElementType.BUTTON,element_name:"upgrade"}}),Object(m.P)(t,e)}onCloseIcon(){this.clog({action:g.UiAction.CLICK,ui_properties:{element_type:g.ElementType.BUTTON,element_name:"close"}})}clog(e){var{clogStep:t,clogEvent:a,clogger:n}=this.props,r=[g.EventId.GROWTH_PRICING,a],s=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(a),!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({step:t},e);r.forEach(e=>{n.track(e,{contexts:{ui_context:s}})})}renderBodyText(){var{renderBodyText:e,sharedTeamNames:t}=this.props;return e(t)}render(){var{isSharedChannel:e,headerText:t,goButtonText:a,bannerPrefs:n,bodyClass:s,bodyIcon:i,bannerContainerClass:o,showCloseIcon:c,showGoButton:l,onCloseBanner:d}=this.props;return e?r.a.createElement(S,{headerText:t,bodyText:this.renderBodyText(),goButtonText:a,showCancelButton:!1,showCloseIcon:c,onGo:this.onGo,onCloseIcon:this.onCloseIcon,onCloseBanner:d,bannerPrefs:n,bodyClass:s,bannerContainerClass:o,bodyIcon:i,showGoButton:l}):null}}esc_trial_banner_EscTrialBanner.defaultProps=Oe;var ye=Object(s.b)(e=>{var t=Object(be.a)(e),a=Object(_e.e)(e,t),n=Object(ge.ab)(a),s=[];if(n){var i=Object(ge.N)(e,a);Object(me.a)(i)||(s=Object(he.a)(i,t=>{var a=Object(h.i)(e,t);return Object(m.M)(a)?r.a.createElement(fe.a,{type:"unknown"}):Object(m.e)(a)}))}return{isSharedChannel:n,sharedTeamNames:s,clogger:Object(_.a)({state:e}),team:Object(h.d)(e)}})(esc_trial_banner_EscTrialBanner),Ce=new b.b("trial_expiration_banners"),je={countPref:"two_weeks_left_esc_trial_cta_count",tsPref:"two_weeks_left_esc_trial_cta_last_ts"};var Ee=class two_weeks_left_esc_trial_banner_TwoWeeksLeftEscTrialBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["renderBodyText","renderHeaderText"])}renderBodyText(e){var{expirationDate:t}=this.props,a=Object(b.k)(e,{noEscape:!0,react:!0});return Ce.rt("When the trial ends, this channel will <b>no longer be shared</b> with {shared_team_name}. Upgrade by {expiration_date} to keep all the features of the Standard plan.",{expiration_date:t,shared_team_name:a})}renderHeaderText(){var{numDaysLeft:e}=this.props;return Ce.t("Heads up: you have {num_of_days} more days on your free trial",{num_of_days:e})}render(){var{productId:e}=this.props,t=Ce.t("Upgrade Now");return r.a.createElement(ye,{bannerPrefs:je,clogStep:g.UiStep.BANNER_SHARED_CHANNELS_TRIAL_TWO_WEEK_REMINDER,clogEvent:g.EventId.UPGRDEXP_FREE_TRIAL_FOR_SC,onGoUrl:"".concat(V.a,"?s=1&p=").concat(e,"&entry_point=two_weeks_left_esc_banner"),goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}},ke=new b.b("trial_expiration_banners"),Se={countPref:"one_week_left_esc_trial_cta_count",tsPref:"one_week_left_esc_trial_cta_last_ts"};var Ie=class one_week_left_esc_trial_banner_OneWeekLeftEscTrialBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["renderBodyText","renderHeaderText"])}renderBodyText(e){var{expirationDate:t}=this.props,a=Object(b.k)(e,{noEscape:!0,react:!0});return ke.rt("<b>You won\u2019t be able to use this channel with {shared_team_name}</b> afterward, even if you upgrade later. To keep sharing this channel, upgrade before <span>{expiration_date}.</span>",{expiration_date:t,shared_team_name:a,fallbackHash:"decd823ab360b2e8c20d6fbcd615ae1c1c450d9e"},e=>{var{text:t,tag:a}=e;return"b"===a?r.a.createElement("strong",{className:"sk_raspberry_red"},t):r.a.createElement("span",{className:"nowrap"},t)})}renderHeaderText(){var{numDaysLeft:e}=this.props;return ke.t("Only {num_of_days} days left on your free trial",{num_of_days:e})}render(){var{productId:e}=this.props,t=ke.t("Upgrade Now");return r.a.createElement(ye,{bannerPrefs:Se,clogStep:g.UiStep.BANNER_SHARED_CHANNELS_TRIAL_ONE_WEEK_REMINDER,clogEvent:g.EventId.UPGRDEXP_FREE_TRIAL_FOR_SC,onGoUrl:"".concat(V.a,"?s=1&p=").concat(e,"&entry_point=one_week_left_esc_trial_banner"),goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}};function we(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Te=new b.b("trial_expiration_banners"),Ne="add_payments_details",Pe="close",Ae="get_quote",Me={countPref:"seven_days_left_trial_cta_count",tsPref:"seven_days_left_trial_cta_last_ts"};var xe=Object(s.b)(e=>({team:Object(h.d)(e),clogger:Object(_.a)({state:e}),featureGGFromTheStart:Object(Z.m)(e,"feature_gg_from_the_start")}))(class seven_days_left_trial_banner_SevenDaysLeftTrialBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["onGo","onClose","onCancel"])}componentDidMount(){this.clog({action:g.UiAction.IMPRESSION})}onGo(){var{team:e,productId:t}=this.props;this.clog({action:g.UiAction.CLICK,is_primary_cta:!0,ui_properties:{element_type:g.ElementType.BUTTON,element_name:Ne}}),Object(m.P)(e,"".concat(V.a,"?s=1&p=").concat(t,"&entry_point=seven_days_left_trial_banner"))}onCancel(){this.clog({action:g.UiAction.CLICK,is_primary_cta:!1,ui_properties:{element_type:g.ElementType.BUTTON,element_name:Ae}})}onClose(){this.clog({action:g.UiAction.CLICK,is_primary_cta:!1,ui_properties:{element_type:g.ElementType.BUTTON,element_name:Pe}})}getHeaderText(){var{featureGGFromTheStart:e,numDaysLeft:t,team:a}=this.props;if(!e)return null;var n=Object(m.z)(a)?Te.t("Slack Standard"):Te.t("Slack Plus");return t<7?Te.rt("Your trial of {plan_level} ends in less than a week",{plan_level:n}):Te.rt("Your trial of {plan_level} ends in 1 week",{plan_level:n})}clog(e){var{featureGGFromTheStart:t,clogger:a,team:n}=this.props;if(t){var r=Object(m.z)(n)?"standard_trial":"plus_trial",s=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?we(Object(a),!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):we(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({step:g.UiStep.BANNER_TRIAL_ONE_WEEK_REMINDER,step_variant:r,entry_point:"client_boot"},e);a.track(g.EventId.UPGRDEXP_TRIAL,{contexts:{ui_context:s}})}}render(){var{featureGGFromTheStart:e,team:t}=this.props;if(!e)return null;var a=Object(m.z)(t),n=this.getHeaderText(),s=a?"p-message_pane_banner--bg_standard":"p-message_pane_banner--bg_plus",i=Te.rt("Get a quote to see how much Slack will cost for your team.{break}Ready to buy? Just add your payment details.",{break:r.a.createElement("br",null)}),o=Te.t("Add Payment Details"),c=Te.t("Get Quote"),l="plans/estimate?level=".concat(a?"std":"plus");return r.a.createElement(S,{headerText:n,bodyText:i,goButtonText:o,onGo:this.onGo,shouldCloseOnGo:!1,cancelHref:l,cancelTarget:"_self",shouldCloseOnCancel:!1,bannerContainerClass:s,showCancelButton:!0,onCancel:this.onCancel,cancelButtonText:c,showCloseIcon:!0,onCloseIcon:this.onClose,bannerPrefs:Me})}}),Re=new b.b("trial_expiration_banners"),De={countPref:"three_days_left_esc_trial_cta_count",tsPref:"three_days_left_esc_trial_cta_last_ts"};var Fe=class three_days_left_esc_trial_banner_ThreeDaysLeftEscTrialBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["renderBodyText"])}renderBodyText(e){return Re.rt("Upgrade before your free trial ends on {expiration_date} to keep sharing this channel with {shared_team_name}. Otherwise, this channel will be permanently disconnected. (You can start a new shared channel if you decide to upgrade later.)",{expiration_date:this.props.expirationDate,shared_team_name:Object(b.k)(e,{noEscape:!0,react:!0})})}render(){var{productId:e}=this.props;return r.a.createElement(ye,{bannerPrefs:De,clogStep:g.UiStep.BANNER_SHARED_CHANNELS_TRIAL_THREE_DAY_REMINDER,onGoUrl:"".concat(V.a,"?s=1&p=").concat(e,"&entry_point=three_days_left_esc_trial_banner"),clogEvent:g.EventId.GROWTH_PLANS_PAGE_TRIALS,goButtonText:Re.t("Upgrade Now"),headerText:Re.t("Upgrade your workspace to keep sharing this channel"),renderBodyText:this.renderBodyText,bodyClass:"p-message_pane_banner__body--widest-text"})}};function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Ue=new b.b("trial_expiration_banners"),Be="add_payments_details",He="close",We="get_quote",qe={countPref:"three_days_left_trial_cta_count",tsPref:"three_days_left_trial_cta_last_ts"};var Ge=Object(s.b)(e=>({team:Object(h.d)(e),clogger:Object(_.a)({state:e}),featureGGFromTheStart:Object(Z.m)(e,"feature_gg_from_the_start")}))(class three_days_left_trial_banner_ThreeDaysLeftTrialBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["onGo","onClose","onCancel"])}componentDidMount(){this.clog({action:g.UiAction.IMPRESSION})}onGo(){var{team:e,productId:t}=this.props;this.clog({action:g.UiAction.CLICK,is_primary_cta:!0,ui_properties:{element_type:g.ElementType.BUTTON,element_name:Be}}),Object(m.P)(e,"".concat(V.a,"?s=1&p=").concat(t,"&entry_point=three_days_left_trial_banner"))}onClose(){this.clog({action:g.UiAction.CLICK,is_primary_cta:!1,ui_properties:{element_type:g.ElementType.BUTTON,element_name:He}})}onCancel(){this.clog({action:g.UiAction.CLICK,is_primary_cta:!1,ui_properties:{element_type:g.ElementType.BUTTON,element_name:We}})}getPropsForPlan(){var{team:e,expirationDate:t,numDaysLeft:a,featureGGFromTheStart:n}=this.props;if(n)return Object(m.z)(e)?{headerText:Ue.t("Your trial of Slack Standard ends in {number_days_left} days",{number_days_left:a}),bodyText:Ue.t("Add your payment details to keep features like group video calls, shared channels, and an unlimited, searchable message history"),bannerContainerClass:"p-message_pane_banner--bg_standard",cancelHref:"plans/estimate?level=std"}:{headerText:Ue.t("Your trial of Slack Plus ends in {number_days_left} days",{number_days_left:a}),bodyText:Ue.t("Add your payment details to keep features like group video calls, shared channels, and SAML-based SSO."),bannerContainerClass:"p-message_pane_banner--bg_plus",cancelHref:"plans/estimate?level=plus"};var r=Object(m.z)(e)?Ue.t("Standard"):Ue.t("Plus"),s=Ue.rt("Your workspace\u2019s trial of our <b>{plan_level} plan</b> only lasts through <b>{expiration_date}</b>. Upgrade to a paid plan to keep your access to features like unlimited messages and files, guest accounts, and more when your trial ends.",{plan_level:r,expiration_date:t});return{headerText:Ue.t("Your free trial ends soon"),bodyText:s,bannerContainerClass:""}}clog(e){var{clogger:t,team:a}=this.props,n=Object(m.z)(a)?"standard_trial":"plus_trial",r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(a),!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({step:g.UiStep.BANNER_TRIAL_THREE_DAY_REMINDER,step_variant:n,entry_point:"client_boot"},e);t.track(g.EventId.UPGRDEXP_TRIAL,{contexts:{ui_context:r}})}render(){var e,t,{featureGGFromTheStart:a}=this.props,{headerText:n,bodyText:s,bannerContainerClass:i,cancelHref:o}=this.getPropsForPlan(),c=Ue.t("Upgrade Now"),l=!1;return a&&(c=Ue.t("Add Payment Details"),e=Ue.t("Get Quote"),l=!0,t="_self"),r.a.createElement(S,{headerText:n,bodyText:s,goButtonText:c,onGo:this.onGo,shouldCloseOnGo:!1,bannerContainerClass:i,showCancelButton:l,cancelButtonText:e,cancelHref:o,cancelTarget:t,onCancel:this.onCancel,shouldCloseOnCancel:!1,showCloseIcon:!0,onCloseIcon:this.onClose,bannerPrefs:qe})}}),Ke=new b.b("free_trial_banners"),Ve={countPref:"in_prod_trial_banner_cta_count",tsPref:"in_prod_trial_banner_cta_last_ts"},ze=205,Ye="UPGRDEXP_FREE_TRIAL_IN_PROD",Qe="trial";var Xe=Object(s.b)(e=>({clogger:Object(_.a)({state:e}),team:Object(h.d)(e)}))(class in_prod_trial_message_pane_banner_InProdTrialMessagePaneBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["onGo","onCloseIcon"])}componentDidMount(){var{clogger:e}=this.props;e.track(Ye,{contexts:{ui_context:{step:ze,action:"impression"}}})}onGo(){var{clogger:e,team:t}=this.props;e.track(Ye,{contexts:{ui_context:{step:ze,action:"click",ui_element:"learn_more_btn"}}}),Object(m.P)(t,Qe)}onCloseIcon(){var{clogger:e}=this.props;e.track(Ye,{contexts:{ui_context:{step:ze,action:"close",ui_element:"btn_close"}}})}getContent(){return{headerText:Ke.t("Start your free trial of the Standard plan"),bodyText:Ke.t("With unlimited searchable messages, you\u2019ll never lose access to your conversations \u2014 or to things like project details, important docs, and key decisions made along the way.")}}render(){var e=this.getContent();return Object(me.a)(e)?null:r.a.createElement(S,{headerText:e.headerText,bodyText:e.bodyText,showCancelButton:!1,showCloseIcon:!0,isLearnMoreButton:!0,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Ve})}}),Je=new b.b("free_trial_banners"),Ze={countPref:"in_prod_trial_reminder_banner_cta_count",tsPref:"in_prod_trial_reminder_banner_cta_last_ts"},$e=207,et="UPGRDEXP_FREE_TRIAL_IN_PROD",tt="trial";var at=Object(s.b)(e=>({clogger:Object(_.a)({state:e}),team:Object(h.d)(e)}))(class in_prod_trial_reminder_banner_InProdTrialReminderBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["onGo","onCloseIcon"])}componentDidMount(){var{clogger:e}=this.props;e.track(et,{contexts:{ui_context:{step:$e,action:"impression"}}})}onGo(){var{clogger:e,team:t}=this.props;e.track(et,{contexts:{ui_context:{step:$e,action:"click",ui_element:"learn_more_btn"}}}),Object(m.P)(t,tt)}onCloseIcon(){var{clogger:e}=this.props;e.track(et,{contexts:{ui_context:{step:$e,action:"close",ui_element:"btn_close"}}})}getContent(){var{expirationDate:e}=this.props;return{headerText:Je.t("Your free trial offer is about to expire"),bodyText:Je.rt("You still have time to try out the <b>Standard plan</b>. Start your trial by <b>{expiration_date}</b> to explore features like unlimited searchable messages, guest accounts, screen sharing, and more \u2014 free for 30 days. ",{expiration_date:e})}}render(){var e=this.getContent();return r.a.createElement(S,{headerText:e.headerText,bodyText:e.bodyText,showCancelButton:!1,showCloseIcon:!0,isLearnMoreButton:!0,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Ze})}}),nt=a("HvGc"),rt=new b.b("notification_banner"),st={countPref:"approaching_file_limit_banner_cta_count",tsPref:"approaching_file_limit_banner_cta_last_ts"},it=200,ot="UPGRDEXP_ENFORCE_FILE_LIMITS";var ct={closeBanner:i.a,showFileList:nt.g},lt=Object(s.b)(e=>({team:Object(h.d)(e),userId:Object(Z.d)(e),clogger:Object(_.a)({state:e})}),ct)(class approaching_file_limit_banner_ApproachingFileLimitBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["onGo","onCloseIcon","onDeleteFilesLinkClicked"])}componentDidMount(){var{clogger:e}=this.props;e.track(ot,{contexts:{ui_context:{step:it,action:"impression"}}})}onGo(){var{clogger:e,team:t}=this.props;e.track(ot,{contexts:{ui_context:{step:it,action:"click",ui_element:"pricing_button"}}}),e.track("GROWTH_PRICING",{contexts:{ui_context:{step:it,action:"click",ui_element:"pricing_button"}}});var a=Object(V.j)({entryPoint:"approaching_file_limit_banner"});Object(m.P)(t,a)}onCloseIcon(){var{clogger:e}=this.props;e.track(ot,{contexts:{ui_context:{step:it,action:"close",ui_element:"btn_close"}}})}onDeleteFilesLinkClicked(){var{userId:e,clogger:t}=this.props;this.props.closeBanner({bannerPrefs:st}),this.props.showFileList({user:e}),t.track(ot,{contexts:{ui_context:{step:it,action:"click",ui_element:"file_storage_link"}}})}getHeaderText(){var{team:e}=this.props;return rt.rt("{name_of_workspace} is almost out of space",{name_of_workspace:e.name})}getBodyText(){return rt.rt('If your workspace goes over the free plan\u2019s <span class="bold">5 GB storage limit,</span> older files will no longer be viewable. To access all your files, you can upgrade to a paid plan.')}render(){var e=rt.t("See Plans");return r.a.createElement(S,{headerText:this.getHeaderText(),bodyText:this.getBodyText(),goButtonText:e,showCancelButton:!1,showCloseIcon:!0,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:st})}}),dt=new b.b("client"),pt={countPref:"approaching_msg_limit_banner_cta_count",tsPref:"approaching_msg_limit_banner_cta_last_ts"},ut=63,ht="GROWTH_PRICING";var mt=Object(s.b)(e=>({clogger:Object(_.a)({state:e}),goToPlansPage:()=>Object(m.P)(Object(h.d)(e),Object(V.j)({entryPoint:"approaching_msg_limit_banner"}))}))(class approaching_msg_limit_banner_ApproachingMsgLimitBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["onGo","onCloseBanner"])}componentDidMount(){var{messagesCount:e,clogger:t}=this.props;t.track(ht,{limit_meter_messages_count:e,contexts:{ui_context:{step:ut,action:"impression"}}})}onGo(){var{messagesCount:e,clogger:t,goToPlansPage:a}=this.props;t.track(ht,{limit_meter_messages_count:e,contexts:{ui_context:{step:ut,action:"click",ui_element:"pricing_button"}}}),a()}onCloseBanner(){var{messagesCount:e,clogger:t}=this.props;t.track(ht,{limit_meter_messages_count:e,contexts:{ui_context:{step:ut,action:"close",ui_element:"skip_for_now_button"}}})}getContent(){return{headerText:dt.t("Unlock unlimited messages for your team"),bodyText:dt.t("Your workspace is getting close to the 10,000 message limit for free teams. On Slack\u2019s paid plans, you can see and search unlimited messages.")}}render(){var e=this.getContent();return r.a.createElement(S,{headerText:e.headerText,bodyText:e.bodyText,isLearnMoreButton:!0,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:pt})}}),bt=new b.b("client"),_t={countPref:"just_reached_msg_limit_banner_cta_count",tsPref:"just_reached_msg_limit_banner_cta_last_ts"},gt=64,ft="GROWTH_PRICING";var vt=Object(s.b)(e=>({clogger:Object(_.a)({state:e}),goToPlansPage:()=>Object(m.P)(Object(h.d)(e),Object(V.j)({entryPoint:"just_reached_msg_limit_banner"}))}))(class just_reached_msg_limit_banner_JustReachedMsgLimitBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["onGo","onCloseBanner"])}componentDidMount(){var{messagesCount:e,clogger:t}=this.props;t.track(ft,{limit_meter_messages_count:e,contexts:{ui_context:{step:gt,action:"impression"}}})}onGo(){var{messagesCount:e,clogger:t,goToPlansPage:a}=this.props;t.track(ft,{limit_meter_messages_count:e,contexts:{ui_context:{step:gt,action:"click",ui_element:"pricing_button"}}}),a()}onCloseBanner(){var{messagesCount:e,clogger:t}=this.props;t.track(ft,{limit_meter_messages_count:e,contexts:{ui_context:{step:gt,action:"close",ui_element:"skip_for_now_button"}}})}getCancelButtonText(){return bt.t("Not Now")}getContent(){return{headerText:bt.t("You\u2019ve just reached the 10k message limit"),bodyText:bt.t("Your workspace has over 10,000 messages in it! That\u2019s a lot of conversation and history. Upgrade to a paid plan to make sure you can access all of it whenever you need it.")}}render(){var e=this.getContent();return r.a.createElement(S,{headerText:e.headerText,bodyText:e.bodyText,isLearnMoreButton:!0,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:_t,cancelButtonText:this.getCancelButtonText()})}}),Ot=a("U28S"),yt=new b.b("client"),Ct={countPref:"thirty_days_after_msg_limit_banner_cta_count",tsPref:"thirty_days_after_msg_limit_banner_cta_last_ts"},jt=65,Et="GROWTH_PRICING";var kt=Object(s.b)(e=>({clogger:Object(_.a)({state:e}),goToPlansPage:()=>Object(m.P)(Object(h.d)(e),Object(V.j)({entryPoint:"thirty_days_after_msg_limit_banner"}))}))(class thirty_days_after_msg_limit_banner_ThirtyDaysAfterMsgLimitBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["onGo","onCloseBanner"])}componentDidMount(){var{messagesCount:e,clogger:t}=this.props;t.track(Et,{limit_meter_messages_count:e,contexts:{ui_context:{step:jt,action:"impression"}}})}onGo(){var{messagesCount:e,clogger:t,goToPlansPage:a}=this.props;t.track(Et,{limit_meter_messages_count:e,contexts:{ui_context:{step:jt,action:"click",ui_element:"pricing_button"}}}),a()}onCloseBanner(){var{messagesCount:e,clogger:t}=this.props;t.track(Et,{limit_meter_messages_count:e,contexts:{ui_context:{step:jt,action:"close",ui_element:"skip_for_now_button"}}})}getContent(){var{messagesCount:e}=this.props,t=e-1e4,a=this.roundNumOfMsgsBeyondLimit(t);return!a||a<0?null:{headerText:yt.t("Your workspace has {num_msgs_beyond_limit} messages more than the 10k limit",{num_msgs_beyond_limit:a}),bodyText:yt.t("That\u2019s more than {num_msgs_beyond_limit} messages you can\u2019t see or search. On a paid plan, you can easily find and view all past messages \u2014 plus features like guest accounts for contractors, group video calls, and unlimited apps.",{num_msgs_beyond_limit:a})}}roundNumOfMsgsBeyondLimit(e){if(e>9&&e<100)return 10*Math.floor(e/10);if(e>=100&&e<=999999){var t=100*Math.floor(e/100);return Object(b.o)(t)}return e>999999?Object(Ot.a)(e):e}render(){var e=this.getContent();return e?r.a.createElement(S,{headerText:e.headerText,bodyText:e.bodyText,isLearnMoreButton:!0,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:Ct}):null}}),St=a("wx14"),It=a("Z0Cl"),wt=a("Fsnq"),Tt=a("yHhI"),Nt=a("Smdl"),Pt=a("brL+"),At=a("dhvi"),Mt=a("kKpd"),xt=a("G4ux"),Rt=a("Lev8"),Dt=a("syB0"),Ft=a("wSSu"),Lt=a.n(Ft),Ut=a("wvq5"),Bt=a("lhZz"),Ht=a("aerA"),Wt=a("h9PG"),qt=a("U45i"),Gt=a("iRvo"),Kt=a("HOkk");class step_Step extends n.Component{UNSAFE_componentWillReceiveProps(){var{title:e,currentStep:t,step:a}=this.props;t===a&&this.props.setModalTitle(e)}render(){var{currentStep:e,step:t}=this.props,a=e===t,n=O()({"p-onboarding__step":!0,"p-onboarding__step--active":a,"p-onboarding__step--inactive":!a}),s=r.a.createElement("div",{className:n},a&&this.props.children);return a?s:null}}step_Step.defaultProps={title:""};var Vt={setModalTitle:Mt.C},zt=Object(s.b)(null,Vt)(step_Step),Yt=a("hbEN"),Qt=a("F7O2"),Xt=new b.b("password"),Jt=e=>{return{no_values:Xt.t("Please enter a password!"),matches_username:Xt.t("That password is too similar to your username. Try something different?"),matches_email:Xt.t("That password is too similar to your email address. Try something different?"),too_short:Xt.t("Your password must be at least 6 characters long."),too_long:Xt.t("Your password can be at most 500 characters long."),numeric_sequence:Xt.t("Your password cannot solely contain sequences of letters or numbers."),alpha_sequence:Xt.t("Your password cannot solely contain sequences of letters or numbers."),adjacent:Xt.t("Your password cannot solely contain adjacent keys on a keyboard."),repeated:Xt.t("Your password cannot solely contain a repeated character."),common:Xt.t("That password is pretty common. Try something different?")}[e]||""},Zt=3,$t={light:{profile:cdn_url+"/80588/img/tractor/steps/step_01.png",workspace:cdn_url+"/80588/img/tractor/steps/step_02.png",invites:cdn_url+"/80588/img/tractor/steps/step_03.png",completion:cdn_url+"/80588/img/tractor/steps/step_04.png"},dark:{profile:cdn_url+"/484c25/img/tractor/steps/step_01_dark.png",workspace:cdn_url+"/484c25/img/tractor/steps/step_02_dark.png",invites:cdn_url+"/484c25/img/tractor/steps/step_03_dark.png",completion:cdn_url+"/484c25/img/tractor/steps/step_04_dark.png"}},ea={profile:0,workspace:1,invites:2,completion:3},ta={0:"TRACTOR_DIALOG_PROFILE_STEP",1:"TRACTOR_DIALOG_WORKSPACE_STEP",2:"TRACTOR_DIALOG_INVITE_STEP",3:"TRACTOR_DIALOG_COMPLETED_STEP"},aa={start_team_creator_account_setup:"BANNER_TRACTOR_WELCOME",complete_team_creator_account_setup:"BANNER_TRACTOR_REMINDER",invite_team_creator_account_setup:"BANNER_TRACTOR_INVITES"},na=a("plEq"),ra=a("nWao"),sa=a("KEK+"),ia=a("Rszm"),oa=a("t4nz"),ca=a("O0RF"),la=e=>{var{src:t}=e;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"p-onboarding__step__header"},r.a.createElement("img",{src:t,srcSet:"".concat(t," 1x, ").concat(t.replace(".png","@2x.png")," 2x"),alt:""})))},da={realName:"",gdprPref:!1,onPasswordSet:f.a,needsPasswordSet:!0,updateRealName:f.a,updateGdprPref:f.a,updateStep:f.a,setStepCallback:f.a,submitCheckPasswordComplexity:f.a},pa=new b.b("team_creation"),ua=Object(Tt.b)(),ha="TEAM_CREATOR_ONBOARDING";class profile_step_ProfileStep extends n.Component{constructor(e){super(e);var{realName:t}=this.props;Object(u.a)(this,["onRealNameChange","onPasswordChange","onGdprPrefChange","onGo","setRealNameInputRef","updateRealName","validateAndSaveStep"]),this.nameInput=null,this.updateRealNameDebounced=Object(Yt.a)(this.updateRealNameApi,500),this.checkPasswordComplexityDebounced=Object(Yt.a)(this.checkPasswordComplexityApi,500),this.state={realName:t,realNameError:null,password:"",passwordError:null,gdpr:null}}componentDidMount(){this.nameInput.focus(),this.props.setStepCallback(this.onGo),this.validateAndSaveStep()}onRealNameChange(){this.updateRealNameDebounced(this.state.realName)}onPasswordChange(e){this.setState(()=>({password:e}),()=>{this.checkPasswordComplexityDebounced(e)})}onGdprPrefChange(e){var t=!!e.target.classList.contains("gdpr_pref_radio")||e.target.checked,a=e.target.value;this.setState(()=>({gdpr:t,gdprRadioValue:a}),()=>{this.props.updateGdprPref({gdprPref:t})})}onGo(){var{needsPasswordSet:e}=this.props;this.validateAndSaveStep().then(t=>{t.isValid&&(e&&this.props.onPasswordSet(this.state.password),this.props.updateStep({number:ea.workspace}))}).catch(e=>{ua.info(ha,e)})}setRealNameInputRef(e){this.nameInput=e}updateRealName(e){this.setState(()=>({realName:e}))}updateRealNameApi(e){this.props.updateRealName({realName:e}).then(()=>{this.setState(()=>({realNameError:null}))}).catch(e=>{this.setState(()=>({realNameError:e}))}).finally(()=>{this.validateAndSaveStep()})}checkPasswordComplexityApi(e){this.props.submitCheckPasswordComplexity({password:e}).then(()=>{this.setState(()=>({passwordError:null}))}).catch(e=>{var{data:t}=e;this.setState(()=>({passwordError:t.error}))}).finally(()=>{this.validateAndSaveStep()})}validateAndSaveStep(){var{realName:e,realNameError:t,password:a,passwordError:n}=this.state,{needsPasswordSet:r}=this.props,s=!r||a;return this.props.updateStep({validated:!(!e||!s||t||n),forceValidation:!0})}renderRealNameField(){var{realName:e,realNameError:t}=this.state,a=t?t.message:null,n=t?t.name:null,s=O()("realName_input",{"c-input_text--with_error":a,"p-onboarding__step__real_name_input--success":!a,[n]:a}),i=a?{errorText:a,errorLevel:"error",errorType:"nested_box"}:null,o={name:"real_name",hintText:pa.t("Your name will be displayed with messages you send."),id:"real_name",className:s,"data-qa":"tractor-real-name-input",value:e,onChange:this.updateRealName,onBlur:this.onRealNameChange,ref:this.setRealNameInputRef,isRequired:!0},c={text:pa.t("Your full name"),className:"margin_bottom_150",htmlFor:"real_name",id:"real_name_label"};return r.a.createElement(ca.a,c,r.a.createElement(na.a,Object(St.a)({},o,i)))}renderPasswordField(){var{password:e,passwordError:t}=this.state,a=O()("password_input",{"c-input_text--with_error":!!t,"p-onboarding__step__password_input--success":!t,[t]:!!t}),n={text:pa.t("Your password"),className:"margin_bottom_150",htmlFor:"password_field",id:"passwordLabel"},s={name:"password_field",hintText:pa.t("Passwords must be at least 6 characters long, and can\u2019t be things like password, 123456, or abcdef."),id:"password_field","data-qa":"tractor-password-input",className:a,onChange:this.onPasswordChange,value:e,type:"password",isRequired:!0},i="";t&&(i=Jt(t));var o=t?{errorText:i,errorLevel:"error",errorType:"nested_box"}:null;return r.a.createElement(ca.a,n,r.a.createElement(na.a,Object(St.a)({},s,o)))}renderGdprPref(){var{inEU:e}=this.props,t=this.props.gdpr,a=this.state.gdpr,n=r.a.createElement(ca.a,{type:"inline",cursor:"pointer",htmlFor:"gdpr_field",text:pa.t("It\u2019s okay to send me email with Slack tips, news, and offers."),className:"margin_bottom_150 normal tractor_checkbox_label",id:"gdpr_checkbox_label"},r.a.createElement(ia.a,{id:"gdpr_field",checked:null===a?t:a,"data-qa":"tractor-gdpr-checkbox",onChange:this.onGdprPrefChange})),s=r.a.createElement(ra.a,{className:"margin_bottom_150 normal tractor_checkbox_label","data-qa":"tractor-gdpr-radiogroup"},r.a.createElement(oa.a,null,pa.rt("<strong>Can we send you email with Slack tips, news, and offers?</strong>")),r.a.createElement(ca.a,{htmlFor:"gdpr_field_yes",text:pa.t("Sure!"),cursor:"pointer",type:"inline"},r.a.createElement(sa.a,{id:"gdpr_field_yes",className:"gdpr_pref_radio",value:"opt_in","data-qa":"tractor-gdpr-radio-yes",checked:"opt_in"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})),r.a.createElement(ca.a,{htmlFor:"gdpr_field_no",text:pa.t("No thanks"),cursor:"pointer",type:"inline"},r.a.createElement(sa.a,{id:"gdpr_field_no",className:"gdpr_pref_radio",value:"opt_out","data-qa":"tractor-gdpr-radio-no",checked:"opt_out"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})));return e?s:n}render(){return r.a.createElement(n.Fragment,null,r.a.createElement(la,{src:this.props.imgUrl}),r.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-profile-step"},this.renderRealNameField(),this.props.needsPasswordSet&&this.renderPasswordField(),this.renderGdprPref()))}}profile_step_ProfileStep.defaultProps=da;var ma={updateRealName:Mt.K,updateGdprPref:Mt.I,updateStep:Mt.L,setStepCallback:Mt.D,submitCheckPasswordComplexity:Qt.d},ba=Object(s.b)(e=>({realName:Object(Mt.r)(e),gdpr:Object(Mt.m)(e),inEU:Object(Mt.n)(e),needsPasswordSet:Object(x.k)(e,"needs_initial_password_set")}),ma)(profile_step_ProfileStep),_a=a("ynxK"),ga=a("P3Po"),fa={invites:[],workspaceName:"",domainWhitelistingPref:!1,signupDomain:"",onDialogFinish:f.a,validateInvites:f.a,sendInvites:f.a,setDomainWhitelistingPref:f.a,updateStep:f.a,setStepCallback:f.a,canWhitelistDomain:!1,featureTractorSharedInviteLink:!0,featureTractorBackupChannelnameCopy:!1,sharedInviteLink:"",fetchAndSetSharedInviteLink:f.a},va=new b.b("team_creation"),Oa=Object(Tt.b)(),ya="TEAM_CREATOR_ONBOARDING";class invites_step_InvitesStep extends n.Component{constructor(e){super(e);var{invites:t}=this.props,a=t instanceof Array?t.join(", "):t;Object(u.a)(this,["onInvitesChange","onDomainWhitelistingCheckboxChange","onGo","setInvitesInputRef","renderSharedInviteLink","toggleSharedInviteLinkView"]),this.invitesInput=null,this.validateInvitesDebounced=Object(Yt.a)(this.validateInvites,250),this.state={invites:a,invitesError:null,domainWhitelistingPref:!1,toggleSharedInviteLink:!1}}componentDidMount(){this.invitesInput.focus();var{sharedInviteLink:e,featureTractorSharedInviteLink:t}=this.props;this.props.setStepCallback(this.onGo),t&&!e&&this.props.fetchAndSetSharedInviteLink(),this.props.updateStep({validated:!0})}onInvitesChange(e){this.setState(()=>({invites:e}),()=>{this.validateInvitesDebounced(e)})}onDomainWhitelistingCheckboxChange(e){var{checked:t}=e.target;this.setState(()=>({domainWhitelistingPref:t}),()=>{this.props.setDomainWhitelistingPref(t)})}onGo(){this.props.sendInvites().then(()=>{this.props.onDialogFinish().then(()=>{this.props.updateStep({number:ea.completion})})}).catch(e=>{Oa.info(ya,e),this.setState(()=>({invitesError:e}))})}setInvitesInputRef(e){this.invitesInput=e}validateInvites(e){this.props.validateInvites({invites:e}).then(()=>{this.setState(()=>({invitesError:null}))}).catch(e=>{this.setState(()=>({invitesError:e}))})}toggleSharedInviteLinkView(){var{toggleSharedInviteLink:e}=this.state;this.setState(()=>({toggleSharedInviteLink:!e}))}renderInvitesInput(){var e,{invites:t,invitesError:a}=this.state,{workspaceName:n,channelName:s,featureTractorBackupChannelnameCopy:i}=this.props,o=a?a.message:null,c=a?a.name:null,l=O()("invites_input",{"c-input_textarea--with_error":o,"p-onboarding__step__invites_input--success":!o,[c]:o});e=i?s&&void 0!==s&&""!==s?va.rt("We\u2019ll send invitations to join <strong>{workspaceName}</strong> on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:s,workspaceName:n}):va.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{workspaceName:n}):va.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:s,workspaceName:n});var d={name:"invites_field",id:"invites_field",className:l,onChange:this.onInvitesChange,value:t,"data-qa":"tractor-invites-input",hintText:a?null:e,ref:this.setInvitesInputRef},p={className:"margin_bottom_150",text:va.t("Email addresses"),htmlFor:"invites_field",id:"invites_label"},u=o?{errorText:o,errorLevel:"error",errorType:"nested_box"}:null;return r.a.createElement(ca.a,p,r.a.createElement(ga.a,Object(St.a)({},d,u)))}renderDomainWhitelistingCheckbox(){var{signupDomain:e}=this.props,t=this.state.domainWhitelistingPref,a=this.props.domainWhitelistingPref;return r.a.createElement(ca.a,{className:"margin_bottom_150 normal tractor_checkbox_label",text:va.rt("Let other people sign up with their verified <strong>@{signupDomain}</strong> email address.",{signupDomain:e}),id:"domain_whitelisting_checkbox_label",htmlFor:"domain_whitelisting_field",type:"inline",cursor:"pointer"},r.a.createElement(ia.a,{id:"domain_whitelisting_field","data-qa":"tractor-domain-whitelisting-checkbox",checked:null===t?a:t,onChange:this.onDomainWhitelistingCheckboxChange}))}renderSharedInviteLink(){if(!this.props.featureTractorSharedInviteLink)return null;var{sharedInviteLink:e}=this.props,{toggleSharedInviteLink:t}=this.state,a=va.t("invite link"),n=va.rt("<b>Or, you could get an <u>{link}</u> to share with other people.</b>",{link:r.a.createElement(_a.a,{"data-qa":"tractor_shared_invite_link_toggle",onClick:this.toggleSharedInviteLinkView},a)}),s={text:n,htmlFor:"shared_invite_link",id:"shared_invite_link_label","data-qa":"tractor_shared_invite_link_label"},i={name:"shared_invite_link",id:"shared_invite_link","data-qa":"tractor-invites-shared-invite-input",hintText:va.t("Anyone can use this link to join your workspace. It will expire in 4 weeks and can be used for up to 2000 members."),value:e,onFocus:this.select};return r.a.createElement("div",{className:"margin_bottom_100"},!t&&r.a.createElement("span",null,n),t&&r.a.createElement(ca.a,s,r.a.createElement(na.a,i)))}render(){return r.a.createElement(n.Fragment,null,r.a.createElement(la,{src:this.props.imgUrl}),r.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-invites-step"},this.renderInvitesInput(),this.renderSharedInviteLink(),this.props.canWhitelistDomain&&this.renderDomainWhitelistingCheckbox()))}}invites_step_InvitesStep.defaultProps=fa;var Ca={validateInvites:Mt.O,sendInvites:Mt.z,setDomainWhitelistingPref:Mt.A,fetchAndSetSharedInviteLink:Mt.d,updateStep:Mt.L,setStepCallback:Mt.D},ja=Object(s.b)(e=>({invites:Object(Mt.o)(e),workspaceName:Object(Mt.y)(e),domainWhitelistingPref:Object(Mt.l)(e),channelName:Object(Mt.j)(e),signupDomain:Object(Mt.t)(e),canWhitelistDomain:Object(Mt.i)(e),featureTractorSharedInviteLink:Object(Z.m)(e,"feature_tractor_shared_invite_link"),featureTractorBackupChannelnameCopy:Object(Z.m)(e,"feature_tractor_backup_channelname_copy"),sharedInviteLink:Object(Mt.s)(e)}),Ca)(invites_step_InvitesStep),Ea={workspaceName:"",workspaceDomain:"",hasInvited:!1,onDialogFinish:f.a,updateWorkspaceName:f.a,updateWorkspaceDomain:f.a,updateStep:f.a,setStepCallback:f.a,fetchAndSetSharedInviteLink:f.a,featureTractorSharedInviteLink:!1},ka=new b.b("team_creation"),Sa=Object(Tt.b)(),Ia="TEAM_CREATOR_ONBOARDING";class workspace_step_WorkspaceStep extends n.Component{constructor(e){super(e);var{workspaceName:t,workspaceDomain:a}=this.props;Object(u.a)(this,["onWorkspaceNameChange","onWorkspaceNameBlur","onWorkspaceDomainChange","onGo","setWorkspaceNameInputRef","validateAndSaveStep"]),this.nameInput=null,this.updateWorkspaceNameDebounced=Object(Yt.a)(this.updateWorkspaceNameApi,500),this.updateWorkspaceDomainDebounced=Object(Yt.a)(this.updateWorkspaceDomainApi,500),this.state={workspaceName:t,workspaceNameError:null,workspaceDomain:a,workspaceDomainError:null}}componentDidMount(){this.nameInput.focus(),this.props.setStepCallback(this.onGo),this.props.updateStep({validated:!0})}onWorkspaceNameChange(e){this.setState(()=>({workspaceName:e}),()=>{this.updateWorkspaceNameDebounced(e)})}onWorkspaceNameBlur(){var{workspaceName:e}=this.props;this.state.workspaceName||this.onWorkspaceNameChange(e)}onWorkspaceDomainChange(e){this.setState(()=>({workspaceDomain:e}),()=>{this.updateWorkspaceDomainDebounced(e)})}onGo(){this.validateAndSaveStep().then(e=>{e.isValid&&(this.props.hasInvited?this.props.onDialogFinish().then(()=>{this.props.updateStep({number:ea.completion})}):this.props.updateStep({number:ea.invites}))}).catch(e=>{Sa.info(Ia,e)})}setWorkspaceNameInputRef(e){this.nameInput=e}updateWorkspaceNameApi(e){this.props.updateWorkspaceName({workspaceName:e}).then(()=>{this.setState(()=>({workspaceNameError:null}))}).catch(e=>{this.setState(()=>({workspaceNameError:e}))}).finally(()=>{this.validateAndSaveStep()})}updateWorkspaceDomainApi(e){var{featureTractorSharedInviteLink:t}=this.props;this.props.updateWorkspaceDomain({workspaceDomain:e}).then(()=>{this.setState(()=>({workspaceDomainError:null})),t&&this.props.fetchAndSetSharedInviteLink()}).catch(e=>{this.setState(()=>({workspaceDomainError:e}))}).finally(()=>{this.validateAndSaveStep()})}validateAndSaveStep(){var{workspaceDomain:e,workspaceNameError:t,workspaceDomainError:a}=this.state;return this.props.updateStep({validated:!(!e||t||a),forceValidation:!0})}renderWorkspaceName(){var{workspaceName:e,workspaceNameError:t}=this.state,a=t?t.message:null,n=t?t.name:null,s=O()("workspaceName_input",{"c-input_text--with_error":a,"p-onboarding__step__workspace_name_input--success":!a,[n]:a}),i={className:"margin_bottom_150",text:ka.t("Slack workspace name"),htmlFor:"workspace_name_field",id:"workspace_name_label"},o={name:"workspace_name_field",id:"workspace_name_field",className:s,onChange:this.onWorkspaceNameChange,onBlur:this.onWorkspaceNameBlur,value:e,"data-qa":"tractor-workspace-name-input",hintText:ka.t("Most teams use the name of their company or organization."),ref:this.setWorkspaceNameInputRef,isRequired:!0},c=a?{errorText:a,errorLevel:"error",errorType:"nested_box"}:null;return r.a.createElement(ca.a,i,r.a.createElement(na.a,Object(St.a)({},o,c)))}renderWorkspaceDomain(){var{workspaceDomain:e,workspaceDomainError:t}=this.state,a=t?t.message:null,n=t?t.name:null,s=O()("workspaceDomain_input",{"c-input_text--with_error":a,"p-onboarding__step__workspace_domain_input--success":!a,[n]:a}),i={text:ka.t("Slack URL"),className:"margin_bottom_150",htmlFor:"workspace_domain_field",id:"workspace_domain_label"},o={name:"workspace_domain_field",id:"workspace_domain_field",className:s,hintText:ka.t("You\u2019ll use this URL to sign in to Slack. Letters, numbers, and hyphens only."),"data-qa":"tractor-workspace-domain-input",onChange:this.onWorkspaceDomainChange,value:e,suffix:".slack.com",isRequired:!0},c=a?{errorText:a,errorLevel:"error",errorType:"nested_box"}:null;return r.a.createElement(ca.a,i,r.a.createElement(na.a,Object(St.a)({},o,c)))}render(){return r.a.createElement(n.Fragment,null,r.a.createElement(la,{src:this.props.imgUrl}),r.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-workspace-step"},this.renderWorkspaceName(),this.renderWorkspaceDomain()))}}workspace_step_WorkspaceStep.defaultProps=Ea;var wa={updateWorkspaceName:Mt.N,updateWorkspaceDomain:Mt.M,fetchAndSetSharedInviteLink:Mt.d,updateStep:Mt.L,setStepCallback:Mt.D},Ta=Object(s.b)(e=>({workspaceName:Object(Mt.y)(e),workspaceDomain:Object(Mt.x)(e),hasInvited:Object(x.k)(e,"has_invited"),featureTractorSharedInviteLink:Object(Z.m)(e,"feature_tractor_shared_invite_link")}),wa)(workspace_step_WorkspaceStep),Na=a("yN0s"),Pa=a("S3eg"),Aa={invites:[],featureGgFromTheStart:!1,ggEnabled:!1,isTeamOnStandardPlan:!1,isTeamOnFreePlan:!1,isTeamOnPlusPlan:!1,updateStep:f.a,setPrimaryView:f.a,closeModal:f.a,clogger:{}},Ma=new b.b("team_creation");class completion_step_CompletionStep extends n.Component{constructor(e){super(e),this.navigateToBenefitsPage=this.navigateToBenefitsPage.bind(this)}componentDidMount(){this.props.updateStep({validated:!0})}navigateToBenefitsPage(e){e.preventDefault();var{clogger:t,isTeamOnStandardPlan:a}=this.props;t.track(Ht.b,{contexts:{ui_context:{step:g.UiStep.TRACTOR_DIALOG_COMPLETED_STEP,step_variant:a?"standard_trial":"plus_trial",action:g.UiAction.CLICK,ui_properties:{element_type:g.ElementType.LINK,element_name:"learn_more_about_features"}}}}),this.props.setPrimaryView({id:"Ppaid-benefits"}),this.props.closeModal()}render(){var{imgUrl:e,invites:t,channelName:a,featureGgFromTheStart:s,ggEnabled:i,isTeamOnFreePlan:o,isTeamOnPlusPlan:c,isTeamOnStandardPlan:l}=this.props,d="";s&&i&&(o?d=Object(Na.a)(Ht.a.Free):l?d=Object(Na.a)(Ht.a.Standard):c&&(d=Object(Na.a)(Ht.a.Plus)));var p,u,h=i&&!o&&d,m=a&&void 0!==a&&""!==a?t.length:0;switch(m){case 0:p=s&&h?Ma.t("Your workspace is all set"):Ma.t("Your Slack workspace is all set"),u=s&&h?Ma.rt("We\u2019ve added a few basic channels for your team\xa0\u2014 go ahead and poke around, or <a>learn about {selectedSlackPlan}</a>. When you\u2019re ready, add your payment details to avoid any disruption when your trial ends. ",{selectedSlackPlan:d},e=>{var{text:t}=e;return r.a.createElement(F.a,{onClick:this.navigateToBenefitsPage},t)}):Ma.rt("We\u2019ve added a few basic channels for your team \u2014 go ahead and poke around! Or <strong>try sending yourself a direct message</strong> to test things out.");break;case 1:p=Ma.t("Your invitation has been sent!"),u=s&&h?Ma.rt("Your teammate will be here as soon as they accept the invitation. Until then, try posting a welcome message in #{channelName}, or <a>learn about {selectedSlackPlan}</a>. When you\u2019re ready, add your payment details to avoid any disruption when your trial ends.",{selectedSlackPlan:d,channelName:a},e=>{var{text:t}=e;return r.a.createElement(F.a,{onClick:this.navigateToBenefitsPage},t)}):Ma.rt("Your teammate will be here as soon as they accept the invitation. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:a});break;default:p=Ma.t("Your {numInvites} invitations have been sent!",{numInvites:m}),u=s&&h?Ma.rt("Your teammates will be here as soon as they accept the invitation. Until then, try posting a welcome message in #{channelName}, or <a>learn about {selectedSlackPlan}</a>. When you\u2019re ready, add your payment details to avoid any disruption when your trial ends.",{selectedSlackPlan:d,channelName:a},e=>{var{text:t}=e;return r.a.createElement(F.a,{onClick:this.navigateToBenefitsPage},t)}):Ma.rt("Your teammates will be here as soon as they accept their invitations. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:a})}return r.a.createElement(n.Fragment,null,r.a.createElement(la,{src:e}),r.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-completion-step"},r.a.createElement("h2",null,p),u))}}completion_step_CompletionStep.defaultProps=Aa;var xa={updateStep:Mt.L,setPrimaryView:Pa.a,closeModal:At.a},Ra=Object(s.b)(e=>{var t=Object(h.d)(e);return{invites:Object(Mt.o)(e),channelName:Object(Mt.j)(e),featureGgFromTheStart:Object(Z.m)(e,"feature_gg_from_the_start"),ggEnabled:Object(Wt.a)(e,"gg_enabled"),isTeamOnStandardPlan:Object(m.z)(t),isTeamOnFreePlan:Object(m.w)(t),isTeamOnPlusPlan:Object(m.x)(t),clogger:Object(_.a)({state:e})}},xa)(completion_step_CompletionStep),Da=(a("Drpm"),{invites:[],modalTitle:"",onClose:f.a,stepCallback:f.a,stepNumber:0,isCurrentStepValid:!1,isPromiseRunning:!1,hasInvited:!1,needsPasswordSet:!0,featureGgFromTheStart:!1,ggEnabled:!1,isTeamOnStandardPlan:!1,isTeamOnFreePlan:!1,isTeamOnPlusPlan:!1,team:null,standardPlanProductId:"",plusPlanProductId:"",fetchAndSetChannelInfo:f.a,fetchAndSetWorkspace:f.a,fetchAndSetSignupDetails:f.a,setInitialMarketingPref:f.a,setStepNumber:f.a,updatePassword:f.a,submitDomainWhitelistingPref:f.a,completeWorkflowTask:f.a,closeModal:f.a,fetchPlansData:f.a,clientTheme:"light"}),Fa=new b.b("team_creation"),La=Object(Tt.b)(),Ua="TEAM_CREATOR_ONBOARDING";class team_creator_onboarding_dialog_TeamCreatorOnboardingDialog extends r.a.Component{constructor(e){super(e),Object(u.a)(this,["getGoButtonText","getFooterText","onBack","onGo","onPasswordSet","onDialogFinish","onClose"]),this.state={password:null}}componentDidMount(){this.props.fetchAndSetChannelInfo(),this.props.fetchAndSetWorkspace(),this.props.fetchAndSetSignupDetails(),this.props.setInitialMarketingPref(),this.preloadRemainingImages(),La.info(Ua,"Onboarding dialog mounted.");var{needsPasswordSet:e}=this.props;e&&this.props.setStepNumber(0),!this.hasGGTrialBehavior()||this.props.standardPlanProductId&&this.props.plusPlanProductId||this.props.fetchPlansData()}componentDidUpdate(e){e.stepNumber!==this.props.stepNumber&&3===this.props.stepNumber&&this.props.clogger.track(Ht.b,{contexts:{ui_context:{step:g.UiStep.TRACTOR_DIALOG_COMPLETED_STEP,step_variant:this.getGGClogStepVariant(),action:g.UiAction.IMPRESSION}}})}onBack(){var e,{stepNumber:t,clogger:a}=this.props;if(this.hasGGTrialBehavior()&&t===ea.completion)return a.track(Ht.b,{contexts:{ui_context:{step:g.UiStep.TRACTOR_DIALOG_COMPLETED_STEP,step_variant:this.getGGClogStepVariant(),action:g.UiAction.CLICK,ui_properties:{element_type:g.ElementType.BUTTON,element_name:"add_payment_details"}}}}),void this.openCheckoutUrl();e=t>0?t-1:Zt-1,a.track(g.EventId.GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:ta[t],action:"BACK"}}}),a.track(Ht.b,{contexts:{ui_context:{step:ta[t],action:"BACK"}}}),this.props.setStepNumber(e)}onGo(){var{stepCallback:e,isCurrentStepValid:t,clogger:a,stepNumber:n}=this.props;t&&e(),a.track(g.EventId.GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:ta[n],action:"CLICK"}}}),a.track(Ht.b,{contexts:{ui_context:{step:ta[n],step_variant:this.getGGClogStepVariant(),action:"CLICK",is_primary_cta:!0,ui_properties:{element_type:g.ElementType.BUTTON,element_name:"explore_slack"}}}})}onClose(){var{clogger:e,stepNumber:t}=this.props;e.track(g.EventId.GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:ta[t],action:"CLOSE"}}}),e.track(Ht.b,{contexts:{ui_context:{step:ta[t],action:"CLOSE"}}}),Object(Nt.a)()?this.props.closeModal():this.props.onClose()}onPasswordSet(e){this.setState(()=>({password:e}))}onDialogFinish(){var e,{password:t}=this.state;e=this.props.needsPasswordSet?this.props.updatePassword({password:t}):Promise.resolve();var a=this.props.submitDomainWhitelistingPref();return Promise.all([e,a]).then(()=>this.props.completeWorkflowTask({taskSubtype:"complete_team_creator_account_setup"})).catch(e=>{La.info(Ua,e)})}getGoButtonText(){var{stepNumber:e,invites:t,hasInvited:a}=this.props,n=t?t.length:0;switch(e){case 1:return a?Fa.t("Finish"):Fa.t("Next");case 2:return n>=1?Fa.t("Add {numEmails, plural, =1 {# Person} other {# People}}",{numEmails:n,fallbackHash:"afa51f5e80065586875a7cd693abcad1a66bdb3b"}):Fa.t("Finish");case 3:return 0===n?Fa.t("Explore Slack"):Fa.t("Start the Conversation");default:return Fa.t("Next")}}getFooterText(){var{stepNumber:e,hasInvited:t}=this.props;if(e>=Zt)return null;var a=e+1,n=t?2:3;return Fa.t("Step {stepNumber} of {totalSteps}",{stepNumber:a,totalSteps:n})}getGGClogStepVariant(){return this.props.isTeamOnStandardPlan?"standard_trial":"plus_trial"}hasGGTrialBehavior(){var{featureGgFromTheStart:e,ggEnabled:t,isTeamOnFreePlan:a}=this.props;return e&&t&&!a}openCheckoutUrl(){var e,{isTeamOnStandardPlan:t,isTeamOnPlusPlan:a,isTeamOnFreePlan:n,standardPlanProductId:r,plusPlanProductId:s,team:i}=this.props;t?e=r:a?e=s:n&&(e=r),Object(m.P)(i,"".concat(V.a,"?s=1&p=").concat(e,"&entry_point=pricing_plans_modal"))}preloadRemainingImages(){Object(he.a)($t[this.props.clientTheme],(e,t)=>{if("profile"===t)return null;var a=new Image,n=new Image;return a.src=e,n.src=e.replace(".png","@2x.png"),null})}shouldShowBackButton(e){return!(e===ea.profile||e===ea.completion&&!this.hasGGTrialBehavior())}render(){var{modalTitle:e,stepNumber:t,isCurrentStepValid:a,isPromiseRunning:s,clientTheme:i,featureGgFromTheStart:o}=this.props,c=o&&this.hasGGTrialBehavior()&&t===ea.completion?Fa.t("Add Payment Details"):Fa.t("Back"),l=O()("p-team_creator_onboarding_dialog",{"p-team_creator_onboarding_dialog--complete":3===t});return r.a.createElement(n.Fragment,null,r.a.createElement(Kt.a,{showGoButton:!0,showCloseButton:!0,showHeader:!0,shouldCloseOnCancel:!1,shouldCloseOnGo:t===ea.completion,truncateTitle:!1,onClose:this.onClose,showCancelButton:this.shouldShowBackButton(t),goButtonIsDisabled:!a,goButtonIsPending:s,goButtonText:this.getGoButtonText(),title:e,footerText:this.getFooterText(),onGo:this.onGo,onCancel:this.onBack,cancelText:c,id:"team-creator-onboarding-dialog","data-qa":"team-creator-onboarding-dialog",className:l,bodyClassName:"p-team_creator_onboarding_dialog__body"},r.a.createElement(zt,{step:0,currentStep:t,title:Fa.t("Set your name and password")},r.a.createElement(ba,{imgUrl:$t[i].profile,onPasswordSet:this.onPasswordSet})),r.a.createElement(zt,{step:1,currentStep:t,title:Fa.t("Review your team\u2019s details")},r.a.createElement(Ta,{imgUrl:$t[i].workspace,onDialogFinish:this.onDialogFinish})),r.a.createElement(zt,{step:2,currentStep:t,title:Fa.t("Add people to your Slack workspace")},r.a.createElement("div",null),r.a.createElement(ja,{imgUrl:$t[i].invites,onDialogFinish:this.onDialogFinish})),r.a.createElement(zt,{step:3,currentStep:t},r.a.createElement("div",null),r.a.createElement(Ra,{imgUrl:$t[i].completion}))))}}team_creator_onboarding_dialog_TeamCreatorOnboardingDialog.defaultProps=Da;var Ba={fetchAndSetChannelInfo:Mt.c,fetchAndSetWorkspace:Mt.f,fetchAndSetSignupDetails:Mt.e,setInitialMarketingPref:Mt.B,setStepNumber:Mt.E,updatePassword:Mt.J,submitDomainWhitelistingPref:Mt.H,completeWorkflowTask:Mt.a,closeModal:At.a,fetchPlansData:Gt.e},Ha=Object(s.b)(e=>{var t=Object(qt.o)(e),[a]=t,n=Object(h.d)(e);return{hasInvited:Object(x.k)(e,"has_invited"),needsPasswordSet:Object(x.k)(e,"needs_initial_password_set"),stepNumber:Object(Mt.v)(e),modalTitle:Object(Mt.q)(e),stepCallback:Object(Mt.u)(e),isCurrentStepValid:Object(Mt.k)(e),isPromiseRunning:Object(Mt.p)(e),invites:Object(Mt.o)(e),clogger:Object(_.a)({state:e}),clientTheme:Object(Rt.c)(e),featureGgFromTheStart:Object(Z.m)(e,"feature_gg_from_the_start"),ggEnabled:Object(Wt.a)(e,"gg_enabled"),isTeamOnStandardPlan:Object(m.z)(n),isTeamOnFreePlan:Object(m.w)(n),isTeamOnPlusPlan:Object(m.x)(n),team:n,standardPlanProductId:Object(qt.c)(e,a,V.g.monthly,V.f.standard.id,V.e.CREDIT_CARD)||"",plusPlanProductId:Object(qt.c)(e,a,V.g.monthly,V.f.plus.id,V.e.CREDIT_CARD)||""}},Ba)(team_creator_onboarding_dialog_TeamCreatorOnboardingDialog),Wa=a("yg0S"),qa=(e,t,a)=>{var n=Object(Bt.getStoreInstanceByTeamId)(e);Object(Ut.a)(r.a.createElement(s.a,{store:n},r.a.createElement(Wa.a,null,r.a.createElement(Ha,Object(St.a)({onClose:()=>{Object(Dt.a)(()=>{Lt.a.unmountComponentAtNode(t)})}},a)))),t)},Ga=a("6Jf9"),Ka=a("Fdc0");function Va(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function za(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Va(Object(a),!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Va(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ya=new b.b("team_creation"),Qa={countPref:"team_creation_account_setup_banner_cta_count",tsPref:"team_creation_account_setup_banner_cta_last_ts"},Xa="team_creation_dialog_mount_point",Ja={hasInvited:!1,workflow:null,activeWorkflowTask:"",completeWorkflowTask:f.a,openTeamCreatorOnboardingDialog:f.a,currentChannelId:"",showSecondBanner:f.a,openInviteDialog:f.a,clientTheme:"light",fetchWorkflow:f.a};class team_creation_account_setup_banner_TeamCreationAccountSetupBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["openInviteDialog","openTeamCreatorDialog"])}componentDidMount(){var{activeWorkflowTask:e,workflow:t,fetchWorkflow:a}=this.props;this.loadFirstImageForDialog(),"start_team_creator_account_setup"===e&&this.props.completeWorkflowTask({taskSubtype:"start_team_creator_account_setup"}),this.clogBannerChanges({action:"impression"}),t||a()}componentDidUpdate(e){var{activeWorkflowTask:t,currentChannelId:a,showSecondBanner:n}=this.props;t!==e.activeWorkflowTask&&this.clogBannerChanges({action:"impression"}),a!==e.currentChannelId&&n()}openInviteDialog(){var{openInviteDialog:e}=this.props;return this.clogBannerChanges({action:"click",ui_element:g.UiElement.BANNER_TRACTOR_PRIMARY_CTA}),e({source:"team_creation_account_setup_banner"})}openTeamCreatorDialog(){var{teamId:e,openTeamCreatorOnboardingDialog:t}=this.props;return this.clogBannerChanges({action:"click",ui_element:g.UiElement.BANNER_TRACTOR_PRIMARY_CTA}),Object(Nt.a)()?t():qa(e,document.getElementById(Xa))}clogBannerChanges(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeWorkflowTask:t,clogger:a}=this.props,n=t;"start_team_creator_account_setup"!==t&&"complete_team_creator_account_setup"!==t&&(n="invite_team_creator_account_setup"),a.track(g.EventId.GROWTH_BANNER_TRACTOR,{contexts:{ui_context:za({},e,{step:aa[n]})}})}loadFirstImageForDialog(){var e=new Image,t=new Image,a=$t[this.props.clientTheme].profile;e.src=a,t.src=a.replace(".png","@2x.png")}render(){var{hasInvited:e,workflow:t,activeWorkflowTask:a}=this.props;if(null===t||"completed"===t.state&&(e||this.props.nonBotMembersCount>1))return null;var n={bodyClass:"p-message_pane_banner__body--wider-text",showCancelButton:!1,bannerPrefs:Qa,shouldCloseOnGo:!1};if("start_team_creator_account_setup"===a){var s=e?Ya.t("You can send messages here right away \u2014 but to get the most out of Slack, the next steps are to save your account and then get the conversation started."):Ya.t("You can send messages here right away \u2013 but to get the most out of Slack, the next step is to save your account and invite a few people to join the conversation.");return r.a.createElement(S,Object(St.a)({},n,{bannerAriaLabel:Ya.t("Account setup banner"),headerText:Ya.t("Here it is! The first channel in your team\u2019s Slack workspace"),focusOnHeader:!0,bodyText:s,onGo:this.openTeamCreatorDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/first_setup@2x.png",goButtonText:Ya.t("Finish Signing Up")}))}if("complete_team_creator_account_setup"===a){var i=e?Ya.t("To see what teamwork is like in Slack, take a moment to save your account."):Ya.t("To see what teamwork is like in Slack, take a moment to save your account and invite some teammates to join your workspace.");return r.a.createElement(S,Object(St.a)({},n,{bannerAriaLabel:Ya.t("Account setup banner"),headerText:Ya.t("Save your account and start collaborating"),focusOnHeader:!0,bodyText:i,onGo:this.openTeamCreatorDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/second_setup@2x.png",goButtonText:Ya.t("Finish Signing Up")}))}return e?null:r.a.createElement(S,Object(St.a)({},n,{bannerAriaLabel:Ya.t("Invite teammates banner"),headerText:Ya.t("Bring your team into Slack"),bodyText:Ya.t("Slack is better with teammates \u2013 invite them to start collaborating."),onGo:this.openInviteDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/invite_others@2x.png",goButtonText:Ya.t("Add People")}))}}team_creation_account_setup_banner_TeamCreationAccountSetupBanner.defaultProps=Ja;var Za=Object(s.b)(e=>{var t=Object(be.a)(e),a=t&&Object(_e.e)(e,t,!1),n=Object(ge.Y)(a)?t:"";return{clogger:Object(_.a)({state:e}),logger:Object(Tt.a)({state:e}),teamId:Object(Pt.b)(e),hasInvited:Object(x.k)(e,"has_invited"),workflow:Object(Mt.w)(e),activeWorkflowTask:Object(Mt.h)(e),nonBotMembersCount:Object(wt.a)(Object(It.a)(Object(xt.a)(e),e=>!e.is_bot&&!e.is_slackbot&&!Object(Ka.tb)(e))),currentChannelId:n,clientTheme:Object(Rt.c)(e)}},e=>({completeWorkflowTask:function(){return e(Object(Mt.a)(...arguments))},fetchWorkflow:()=>e(Object(Mt.g)({onlyActive:!1})),showSecondBanner:function(){return e(Object(Mt.G)(...arguments))},openTeamCreatorOnboardingDialog:()=>{e(Object(At.e)({element:r.a.createElement(Ha),name:"team-creator-onboarding-dialog"}))},openInviteDialog:function(){return e(Object(Ga.a)(...arguments))}}))(team_creation_account_setup_banner_TeamCreationAccountSetupBanner),$a=new b.b("paid_benefits_banners"),en={countPref:"paid_benefits_banner_cta_count",tsPref:"paid_benefits_banner_cta_last_ts"};class paid_benefits_awareness_banner_PaidBenefitsAwarenessBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["onGo","onCancel","onCloseIcon"])}componentDidMount(){this.props.clogger.track(g.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:g.UiStep.BANNER_PAID_BENEFITS_AWARENESS,action:g.UiAction.IMPRESSION}}})}onGo(){this.clogClick("learn_more"),Object(m.P)(this.props.team,"benefits/standard?entry_point=paid_benefits_awareness_banner")}onCancel(){this.clogClick("not_now")}onCloseIcon(){this.clogClick("close")}getContent(){return{headerText:$a.t("See all that Slack has to offer"),bodyText:$a.t("Discover what more your Slack team can do with a paid plan \u2014 including searching unlimited messages, installing unlimited apps, making group calls, and more."),cancelButtonText:$a.t("Not Now")}}clogClick(e){this.props.clogger.track(g.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:g.UiStep.BANNER_PAID_BENEFITS_AWARENESS,action:g.UiAction.CLICK,ui_properties:{element_type:g.ElementType.BUTTON,element_name:e}}}})}render(){var e=this.getContent();return e?r.a.createElement(S,{bodyClass:"p-message_pane_banner__body--wider-text",headerText:e.headerText,bodyText:e.bodyText,cancelButtonText:e.cancelButtonText,showCloseIcon:!0,isLearnMoreButton:!0,shouldCloseOnGo:!1,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:en}):null}}paid_benefits_awareness_banner_PaidBenefitsAwarenessBanner.defaultProps={};var tn=Object(s.b)(e=>({clogger:Object(_.a)({state:e}),team:Object(h.d)(e)}))(paid_benefits_awareness_banner_PaidBenefitsAwarenessBanner),an=a("MXQz"),nn=a("wd/R"),rn=a.n(nn);function sn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function on(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(a),!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):sn(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var cn=new b.b("trial_expiration_banners"),ln={countPref:"shared_channel_trial_banner_cta_count",tsPref:"shared_channel_trial_banner_cta_last_ts"};var dn=Object(s.b)(e=>({featureSharedChannelsFreeTrial:Object(Z.m)(e,"feature_shared_channels_free_trial"),lastDismissTs:Object(i.e)(e),bannerData:Object(i.c)(e),team:Object(h.d)(e),clogger:Object(_.a)({state:e})}),e=>({updateBanner:function(){e(Object(i.g)(...arguments))}}))(class shared_channel_trial_banner_SharedChannelTrialBanner extends n.PureComponent{constructor(e){super(e),Object(u.a)(this,["renderBodyText","renderPersistentBodyText","onCloseBanner","onUpgradeLinkClick"]),this.logImpression=Object(an.a)((e,t)=>{e.track(g.EventId.CHANNEL_CREATE_FLOW,{contexts:{ui_context:{step:t,action:g.UiAction.IMPRESSION}}})})}componentDidUpdate(){var e,{clogger:t}=this.props;e=this.showDismissibleBanner()?this.getDismissibleBannerUiStep():g.UiStep.SHARED_CHANNEL_TRIAL_PERSISTENT_BANNER,this.logImpression(t,e)}onCloseBanner(){var{bannerData:e}=this.props;this.props.updateBanner({name:"shared_channel_trial_banner",data:e})}onUpgradeLinkClick(){var{productId:e,team:t}=this.props,a="".concat(V.a,"?s=1&p=").concat(e,"&entry_point=shared_channel_trial_banner");Object(m.P)(t,a),this.clogLink()}getNumDaysLeft(){var e=this.props.expirationTs,t=rn.a.unix(e),a=rn()();return t.diff(a,"days")}getDismissibleBannerUiStep(){return this.getNumDaysLeft()<=3?g.UiStep.SHARED_CHANNEL_TRIAL_THREE_DAYS_LEFT_BANNER:g.UiStep.SHARED_CHANNEL_TRIAL_WELCOME_BANNER}showDismissibleBanner(){var{lastDismissTs:e,expirationTs:t}=this.props;if(0===e)return!0;var a=rn.a.unix(t).subtract(3,"d"),n=rn.a.unix(e),r=rn()();return!(!n.isBefore(a)||!r.isAfter(a))}clogLink(){var{clogger:e}=this.props,t={step:g.UiStep.SHARED_CHANNEL_TRIAL_PERSISTENT_BANNER,action:g.UiAction.CLICK,is_primary_cta:!0,ui_properties:{element_type:g.ElementType.LINK,element_name:"upgrade"}};e.track(g.EventId.CHANNEL_CREATE_FLOW,{contexts:{ui_context:t}})}renderHeaderText(){return this.props.featureSharedChannelsFreeTrial?this.getNumDaysLeft()<=3?cn.t("Your shared channel is ending soon"):cn.t("Welcome to your shared channel"):null}renderBodyText(e){var{expirationTs:t,featureSharedChannelsFreeTrial:a}=this.props;if(!a)return null;var n=Object(b.k)(e,{noEscape:!0,react:!0});if(this.getNumDaysLeft()<=3){var s=rn.a.unix(t).subtract(1,"d").format("MMM DD, YYYY");return cn.rt("Once your trial ends, you won\u2019t be able to use this channel with <strong>{sharedTeamNameString}</strong>. Upgrade by {upgradeByDate} to stay connected. <a><strong>Learn More</strong></a>",{sharedTeamNameString:n,upgradeByDate:s,fallbackHash:"a6081dce017fd9204682548170dbb922ed911eaf"},e=>{var{text:t,key:a,tag:n}=e;return"a"===n?r.a.createElement(F.a,{target:"_blank",href:"https://slack.com/help/articles/115004151203",key:a},t):""})}return cn.rt("After your 14-day trial ends, this channel will <strong>no longer be shared</strong> with <strong>{sharedTeamNameString}</strong>. Upgrade to keep this channel and all the features in the Standard plan. <a><strong>Learn More</strong></a>",{sharedTeamNameString:n,fallbackHash:"3e3e4795a66286a28a5d1361c35783235c2bc3fb"},e=>{var{text:t,key:a,tag:n}=e;return"a"===n?r.a.createElement(F.a,{target:"_blank",href:"https://slack.com/help/articles/115004151203",key:a},t):""})}renderPersistentBodyText(){return this.props.featureSharedChannelsFreeTrial?cn.rt("<strong>Trial ends in {numDaysLeft, plural, =1 {1 day} other {# days}} - </strong> Upgrade to keep this shared channel. <a><strong>Upgrade</strong></a>",{numDaysLeft:this.getNumDaysLeft()},e=>{var{text:t,key:a,tag:n}=e;return"a"===n?r.a.createElement(F.a,{key:a,onClick:this.onUpgradeLinkClick,"data-qa":"shared_channel_persistent_banner_upgrade_link"},t):""}):null}render(){var{productId:e,featureSharedChannelsFreeTrial:t}=this.props;if(!t)return null;var a={bannerPrefs:ln,clogEvent:g.EventId.CHANNEL_CREATE_FLOW};if(this.showDismissibleBanner()){var n=cn.t("Upgrade Now");a=on({},a,{clogStep:this.getDismissibleBannerUiStep(),onGoUrl:"".concat(V.a,"?s=1&p=").concat(e,"&entry_point=shared_channel_trial_banner"),goButtonText:n,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText,onCloseBanner:this.onCloseBanner,showCloseIcon:!0})}else a=on({},a,{clogStep:g.UiStep.SHARED_CHANNEL_TRIAL_PERSISTENT_BANNER,renderBodyText:this.renderPersistentBodyText,bannerContainerClass:"p-message_pane_banner--persistent",bodyClass:"p-message_pane_banner__body--persistent",bodyIcon:"clock-o",showCloseIcon:!1,showGoButton:!1});return r.a.createElement(ye,a)}}),pn={activation_msg_limit_banner:e=>{var{bannerData:t}=e;return r.a.createElement(M,{totalUsers:t.total_users,totalChannels:t.total_channels,messagesCount:t.messages_count,teamName:t.team_name})},i18n_japan_beta_send_btn_banner:()=>r.a.createElement(W,null),one_week_left_tenured_discount_banner:e=>{var{bannerData:t}=e;return r.a.createElement(ce,{discountPercent:t.discount_pct,expirationTs:t.expiration_ts})},one_day_left_tenured_discount_banner:e=>{var{bannerData:t}=e;return r.a.createElement(ue,{discountPercent:t.discount_pct,expirationTs:t.expiration_ts})},tenured_discount_awareness_banner:e=>{var{bannerData:t}=e;return r.a.createElement(re,{discountPercent:t.discount_pct,expirationTs:t.expiration_ts})},local_discount_awareness_banner:e=>{var{bannerData:t}=e;return r.a.createElement(X,{discountPercent:t.discount_pct,country:t.country})},two_weeks_left_esc_trial_banner:e=>{var{bannerData:t}=e;return r.a.createElement(Ee,{numDaysLeft:t.no_of_days_left,expirationDate:t.pay_date_next,productId:t.product_id})},one_week_left_esc_trial_banner:e=>{var{bannerData:t}=e;return r.a.createElement(Ie,{numDaysLeft:t.no_of_days_left,expirationDate:t.pay_date_next,productId:t.product_id})},seven_days_left_trial_banner:e=>{var{bannerData:t}=e;return r.a.createElement(xe,{numDaysLeft:t.no_of_days_left,productId:t.product_id})},three_days_left_esc_trial_banner:e=>{var{bannerData:t}=e;return r.a.createElement(Fe,{expirationDate:t.pay_date_next,productId:t.product_id})},three_days_left_trial_banner:e=>{var{bannerData:t}=e;return r.a.createElement(Ge,{expirationDate:t.pay_date_next,numDaysLeft:t.no_of_days_left,productId:t.product_id})},shared_channel_trial_banner:e=>{var{bannerData:t}=e;return r.a.createElement(dn,{expirationTs:t.plan_expiration_ts,productId:t.product_id})},in_prod_trial_banner:e=>{var{bannerData:t}=e;return r.a.createElement(Xe,{numMsgs:t.messages_count_abbrev})},in_prod_trial_reminder_banner:e=>{var{bannerData:t}=e;return r.a.createElement(at,{expirationDate:t.expiration_date})},approaching_file_limit_banner:()=>r.a.createElement(lt,null),approaching_msg_limit_banner:e=>{var{bannerData:t}=e;return r.a.createElement(mt,{messagesCount:t.messages_count})},just_reached_msg_limit_banner:e=>{var{bannerData:t}=e;return r.a.createElement(vt,{messagesCount:t.messages_count})},thirty_days_after_msg_limit_banner:e=>{var{bannerData:t}=e;return r.a.createElement(kt,{messagesCount:t.messages_count})},team_creation_account_setup_banner:()=>r.a.createElement(Za,null),paid_benefits_awareness_banner:()=>r.a.createElement(tn,null)};class message_pane_banner_container_MessagePaneBannerContainer extends n.PureComponent{componentDidMount(){this.props.throttledLoadBanner()}render(){var{bannerName:e,bannerData:t}=this.props;if(!e)return null;if(l(e))return d(e,t),null;var a=pn[e];return a?a({bannerData:t}):(c({name:e,data:t}),null)}}message_pane_banner_container_MessagePaneBannerContainer.defaultProps={bannerName:"",bannerData:{}};var un={throttledLoadBanner:i.h},hn=Object(s.b)(e=>({bannerName:Object(i.d)(e),bannerData:Object(i.c)(e)}),un)(message_pane_banner_container_MessagePaneBannerContainer);t.a=hn},"81jb":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("MnCE")),i=a("TSYQ"),o=a.n(i),c=(a("dVmK"),{className:void 0,"data-qa":void 0}),l=e=>{var{children:t,className:a,"data-qa":n}=e;return r.a.createElement("div",{className:o()(a,"c-card"),"data-qa":n},t)};l.displayName="Card",l.defaultProps=c;var d=Object(s.a)(l),p={className:void 0,"data-qa":void 0},u=e=>{var{children:t,className:a,"data-qa":n}=e;return r.a.createElement("div",{className:o()("c-card__header",a),"data-qa":n},t)};u.displayName="CardHeader",u.defaultProps=p;var h=Object(s.a)(u),m={className:void 0,"data-qa":void 0},b=e=>{var{children:t,className:a,"data-qa":n}=e;return r.a.createElement("div",{className:o()("c-card__section",a),"data-qa":n},t)};b.displayName="CardSection",b.defaultProps=m;var _=Object(s.a)(b);a.d(t,"a",function(){return d}),a.d(t,"b",function(){return h}),a.d(t,"c",function(){return _})},"8IIt":function(e,t,a){},"8ISr":function(e,t,a){},"8LWd":function(e,t,a){},"8Mhq":function(e,t,a){"use strict";var n=a("q2IZ");t.a=n.a},"8Nus":function(e,t,a){"use strict";a.d(t,"b",function(){return j}),a.d(t,"a",function(){return E});var n=a("rePB"),r=a("OtLZ"),s=a("Wy5O"),i=a("aK/h"),o=a("XfeM"),c=a("yHhI"),l=a("H2PH"),d=a("YPPF"),p=a("g+Y+"),u=a("m+G5"),h=a("/SKd"),m=a("2XCg"),b=a("yACA"),_=a("brL+"),g=a("N0/W"),f=a("+uGN"),v=a("B+Mk");function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var y=Object(o.b)("Deletes a draft file",function(e,t){var{persistedFileId:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a&&(Object(c.a)({getState:t,label:"DRAFT-FILES"}).info("Deleting a draft file ".concat(a)),e(Object(g.d)({fileId:a,reason:"delete_draft_file"})))});y.meta={name:"deleteDraftFile",key:"draftsStoreThunksRemoveDraftFileDeleteDraftFile",description:"Deletes a draft file"},y.propTypes={persistedFileId:i.default.string.isRequired};var C=Object(o.b)("Cancels a draft file upload",function(e,t){var{pendingFileId:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(a){Object(c.a)({getState:t,label:"DRAFT-FILES"}).info("Cancelling a draft file upload ".concat(a));var n=Object(_.b)(t());Object(l.a)(n).cancelEagerUpload({pendingFileId:a})}});C.meta={name:"cancelDraftFileUpload",key:"draftsStoreThunksRemoveDraftFileCancelDraftFileUpload",description:"Cancels a draft file upload"},C.propTypes={pendingFileId:i.default.string.isRequired};var j=Object(o.b)("Removes individual files from a draft",function(e,t){var{draftId:a,pendingFileId:s,persistedFileId:i,shouldUpdateDraft:o=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(a&&(s||i)){var c=t();if(i){if(o){var l=Object(p.d)(c,a),h=Object(f.h)(l);e(Object(d.f)(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},l,{files:Object(r.a)(h,i)})))}e(y({persistedFileId:i}))}else e(C({pendingFileId:s}));s&&(e(Object(u.c)({pendingFileId:s})),e(Object(m.c)({draftId:a,pendingFileId:s})))}});j.meta={name:"removeDraftFile",key:"draftsStoreThunksRemoveDraftFileRemoveDraftFile",description:"Removes individual files from a draft"},j.propTypes={draftId:i.default.string.isRequired,pendingFileId:i.default.string,persistedFileId:i.default.string};var E=Object(o.b)("Removes individual files from a draft",function(e,t){var{draft:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(a&&Object(f.m)(t(),a)){var n=Object(f.d)(a),r=Object(f.h)(a),i=[...Object(b.a)(t(),{draftId:n})||[]].reverse().map(a=>{var r=Object(h.a)(t(),{pendingFileId:a}),s=Object(v.c)(r);return e(j({draftId:n,pendingFileId:a,persistedFileId:s,shouldUpdateDraft:!1})),s}).filter(e=>!!e);Object(s.a)(r,i).forEach(t=>{e(y({persistedFileId:t}))})}});E.meta={name:"removeAllDraftFiles",key:"draftsStoreThunksRemoveDraftFileRemoveAllDraftFiles",description:"Removes individual files from a draft"},E.propTypes={draft:i.default.object.isRequired}},"8XR2":function(e,t,a){},"8cl8":function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a("nNoG"),r=new n.b("msg_input");function s(e){var{channelName:t,isSelfDm:a}=e;return a?r.t("Jot something down"):t?r.t("Message {msg}",{msg:Object(n.q)(t)}):r.t("Message channel")}},"8mv9":function(e,t,a){"use strict";var n=a("q1tI"),r=a("aK/h"),s=a("XHGt"),i=a("kcos"),o={useIATopNav:r.default.bool},c=e=>{var{useIATopNav:t}=e;return Object(n.useEffect)(()=>(t?document.body.classList.add("p-client_desktop--ia-top-nav"):document.body.classList.remove("p-client_desktop--ia-top-nav"),()=>{document.body.classList.remove("p-client_desktop--ia-top-nav")}),[t]),null};c.propTypes=o,c.defaultProps={useIATopNav:!1};t.a=Object(s.b)(e=>({useIATopNav:Object(i.f)(e)}))(c)},"8tlt":function(e,t,a){},"8vJI":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("aK/h"),i=a("XfeM"),o=a("dhvi"),c=a("8Mhq"),l=a("XHGt"),d=a("81nI"),p=a("7nxQ"),u=a("q2IZ"),h=a("NB3s"),m=a("0f2Y"),b=(a("kNze"),Object(l.b)()(e=>{var{dispatch:t}=e,a=Object(n.useCallback)(()=>{t(Object(o.a)())},[t]),s=Object(n.useMemo)(()=>Object(d.b)({zdLocale:Object(p.a)()}),[]);return r.a.createElement(h.a,{isOpen:!0,centered:!0,closeModal:a,maxWidth:600,className:"p-help_dialog"},r.a.createElement(h.h,null,r.a.createElement(h.j,{title:"Help"},r.a.createElement(m.a,{href:s,className:"p-help_dialog__browse"},"Browse all answers"))),r.a.createElement(h.d,{showScrollIndicatorBottom:!1},r.a.createElement("div",{className:"p-help_dialog__content"},r.a.createElement(u.a,{withoutFullscreenModal:!0}))))})),_=a("kcos");a.d(t,"a",function(){return g});var g=Object(i.b)("Opens the help modal",(e,t,a)=>{Object(_.d)(t())?e(Object(o.e)({element:r.a.createElement(b,null)})):e(Object(o.e)({element:r.a.createElement(c.a,a)}))});g.meta={name:"openHelpModal",key:"actionsHelpActionsOpenHelpModal",description:"Opens the help modal"},g.propTypes={trigger:s.default.string.isRequired}},"8vlY":function(e,t,a){},"8yst":function(e,t,a){},"8zv/":function(e,t,a){},"9/ob":function(e,t,a){"use strict";var n=a("aK/h"),r=a("t85p"),s={children:n.default.node,enabled:n.default.array,disabled:n.default.array,featureFlags:n.default.object};function i(e,t){var a=function(e){var t=e&&e.store;if(t&&t.getState)return t.getState();return}(t);if(!a)throw new Error("Feature component is being used without being provided a redux instance. A Feature component must have a Provider ancestor");var{featureFlags:n}=function(e,t){var{enabled:a=[],disabled:n=[]}=t,s={};return a.concat(n).forEach(t=>{s[t]=!!Object(r.m)(e,t)}),{featureFlags:s}}(a,e),{enabled:s,disabled:i,children:o}=e;return s.length&&s.some(e=>!n[e])?null:i.some(e=>n[e])?null:o}i.contextTypes={store:n.default.object},i.propTypes=s,i.defaultProps={children:null,enabled:[],disabled:[],featureFlags:{}};var o=i;t.a=o},"97Bz":function(e,t,a){},"97va":function(e,t,a){"use strict";var n=a("XfeM"),r=a("S3eg"),s=Object(n.b)("Switches to the App Launcher view",e=>{e(Object(r.a)({id:"Papps"}))});s.meta={name:"openAppLauncherView",key:"actionsOpenAppLauncherViewOpenAppLauncherView",description:"Switches to the App Launcher view"},t.a=s},"9Oym":function(e,t,a){},"9RFl":function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a("HBMi");function r(e){if(e){var t=Object(n.a)(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime().toString()}}},"9jbU":function(e,t,a){},"9m5W":function(e,t,a){},"9pzU":function(e,t,a){},"9wy/":function(e,t,a){},ABxf:function(e,t,a){},AByf:function(e,t,a){},ALaB:function(e,t,a){"use strict";var n=a("ifKl"),r=(a("aK/h"),a("q1tI")),s=a.n(r),i=a("XHGt"),o=a("TSYQ"),c=a.n(o),l=a("fYfO"),d=a("t85p"),p=a("hOQf"),u=a("HvGc"),h=a("nNoG"),m=a("ynxK"),b=new h.b("message"),_={className:void 0,showThread:n.a,featureNewRepliesAfterBcast:!1};class ThreadBroadcastFooter extends r.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){var{channelId:t,threadTs:a,ts:n}=this.props;e.preventDefault(),this.props.showThread({channelId:t,threadTs:a,highlightTs:n})}render(){var{ts:e,latestReply:t,featureNewRepliesAfterBcast:a}=this.props;if(!a||!t)return null;if(t<=e)return null;var n=c()("c-message__broadcast_footer",this.props.className);return s.a.createElement(m.a,{className:n,onClick:this.onClick},b.t("View newer replies"))}}ThreadBroadcastFooter.defaultProps=_;t.a=Object(i.b)((e,t)=>{var{channelId:a,threadTs:n}=t,r=Object(l.a)(e,a,n);return{latestReply:Object(p.C)(r),featureNewRepliesAfterBcast:Object(d.m)(e,"feature_new_replies_after_bcast")}},{showThread:u.l})(ThreadBroadcastFooter)},ARZM:function(e,t,a){"use strict";var n=a("3zPy"),r=a("aK/h"),s=a("XfeM"),i=a("YYb+"),o=a("iH/p"),c=a("1F8+"),l=Object(s.b)("toggle the omniswitcher using command+k",function(e,t){var{key:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i.e)(t())?e(Object(c.a)()):e(Object(o.i)({key:a}))});l.meta={name:"toggleFromQuickSwitcherCmd",key:"actionsUniversalSearchToggleFromToggleFromQuickSwitcherCmd",description:"toggle the omniswitcher using command+k"},l.propTypes={key:r.default.string.isRequired};var d=Object(s.b)("maybe shows omni switcher modal",function(e,t){var a,{event:r,keyCode:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r&&r.preventDefault(),s&&(s===n.codes.k?a="k":s===n.codes.t&&(a="t")),e(l({key:a||"button"})),!0});d.meta={name:"maybeShowOmniSwitcher",key:"actionsToggleOmniSwitcherMaybeShowOmniSwitcher",description:"maybe shows omni switcher modal"},d.propTypes={event:r.default.object,keyCode:r.default.number};t.a=d},AWNZ:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=a("XHGt"),o=(a("aK/h"),a("TSYQ")),c=a.n(o),l=a("HvGc"),d=a("uvIC"),p=a("kcos"),u=a("b7Ww"),h=(a("2FVR"),{className:void 0,useRowAction:!0,previewFile:n.a,"data-qa":void 0,isIAP1Enabled:!1});class StarredItemFile extends r.PureComponent{constructor(e){super(e),this.onFileClick=this.onFileClick.bind(this)}onFileClick(e,t){if(t){this.props.previewFile({fileId:t.id,flexOrigin:"starred_items"})}}render(){var e=c()("p-starred_item__message",this.props.className),{"data-qa":t,isIAP1Enabled:a}=this.props;return this.props.file?s.a.createElement(u.a,{file:this.props.file,className:e,key:this.props.id,useRowAction:this.props.useRowAction,includeRootDownloadAction:!1,includeRootStarAction:!0,fullWidth:!a,onClick:this.onFileClick,"data-qa":t}):null}}StarredItemFile.defaultProps=h;t.a=Object(i.b)((e,t)=>{var{id:a}=t;return{file:Object(d.c)(e,a),isIAP1Enabled:Object(p.d)(e)}},{previewFile:l.c})(StarredItemFile)},Aev0:function(e,t,a){},AuaN:function(e,t,a){},BfV3:function(e,t,a){},Blhu:function(e,t,a){},BuFM:function(e,t,a){},Bui7:function(e,t,a){},C8Zo:function(e,t,a){},"C9/x":function(e,t,a){"use strict";var n=a("pfyZ");t.a=function(){var{isPinned:e=!1,isEphemeral:t=!1,isStarred:a=!1,isBroadcast:r=!1,subtype:s,sliHighlight:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{isPinned:e,isStarred:a,isEphemeral:t,isBroadcast:r,isCustomResponse:"slackbot_response"===s,isSliHighlight:Object(n.i)(i)}}},CDIG:function(e,t,a){},CDdZ:function(e,t,a){},CEgY:function(e,t,a){"use strict";var n=a("wx14"),r=a("ifKl"),s=(a("aK/h"),a("q1tI")),i=a.n(s),o=a("XHGt"),c=a("t85p"),l=a("nNoG"),d=a("1hAG"),p=a("5mKg"),u=a("MREy"),h=a("od5y"),m=(a("cYut"),new l.b("member_directory")),b={featureSonicMemberDirectory:!1,isEnterprise:!1,selectedFilter:void 0,onMenuItemSelected:r.a,workspaceName:void 0,enterpriseOrgName:void 0,externalWorkspaces:[],menuProps:void 0},_={people:"people",orgMembers:"org_members",orgAdmins:"org_admins",workspaceMembers:"members",workspaceAdmins:"admins",bots:"bots",guests:"guests",deactivatedMembers:"deactivated"};class MemberDirectoryMenu extends s.PureComponent{static menuSeparator(){return{type:"separator"}}constructor(e){super(e),this.memberDirectoryStrings=this.props.featureSonicMemberDirectory?{people:m.t("Everyone"),org_members:m.t("All Members"),org_admins:m.t("Org Admins"),members:m.t("All Members"),admins:this.props.isEnterprise?m.t("Workspace Admins"):m.t("Admins"),bots:m.t("Bots"),guests:m.t("Guests"),deactivated:m.t("Deactivated accounts")}:null}getLabel(e){return this.memberDirectoryStrings[e]}getWorkspaceSectionLabel(){var{isEnterprise:e,externalWorkspaces:t,workspaceName:a,featureSonicMemberDirectory:n}=this.props;if(!n)return null;var r=t.length>0;return e?m.t("{workspaceName} (current workspace)",{workspaceName:a}):r?a:""}buildMenuItemTemplate(e){var{selectedFilter:t,onMenuItemSelected:a}=this.props,n=i.a.createElement(h.b,{type:"check-small",className:"p-member_directory_menu--icon"});return{label:this.getLabel(e),click:()=>a(e),icon:t===e?n:null,className:t===e?"p-member_directory_menu--selected-item":""}}maybeBuildOrgFilterSection(){var{isEnterprise:e,enterpriseOrgName:t}=this.props;if(!e)return[];var a={type:"header",label:t};return[MemberDirectoryMenu.menuSeparator(),a,this.buildMenuItemTemplate(_.orgMembers),this.buildMenuItemTemplate(_.orgAdmins)]}buildWorkspaceFilterSection(){var e={type:"header",label:this.getWorkspaceSectionLabel()};return[MemberDirectoryMenu.menuSeparator(),e,this.buildMenuItemTemplate(_.workspaceMembers),this.buildMenuItemTemplate(_.workspaceAdmins),this.buildMenuItemTemplate(_.guests),this.buildMenuItemTemplate(_.bots)]}maybeBuildExternalWorkspaceSection(){var{externalWorkspaces:e,selectedFilter:t,onMenuItemSelected:a,featureSonicMemberDirectory:n}=this.props;if(!n)return null;var r=e.length>0,s=i.a.createElement(h.b,{type:"check-small",className:"p-member_directory_menu--icon"});if(!r)return[];var o={type:"header",label:m.t("External Organizations")},c=e.map(e=>{var n=Object(p.i)(e);return{label:Object(p.e)(e),click:()=>a(n),icon:t===n?s:null,className:t===n?"p-member_directory_menu--selected-item":""}});return[MemberDirectoryMenu.menuSeparator(),o,...c]}render(){var{featureSonicMemberDirectory:e,menuProps:t}=this.props;if(!e)return null;var a=[...this.buildWorkspaceFilterSection(),...this.maybeBuildOrgFilterSection()],r=[this.buildMenuItemTemplate(_.people),...a,...this.maybeBuildExternalWorkspaceSection(),MemberDirectoryMenu.menuSeparator(),this.buildMenuItemTemplate(_.deactivatedMembers)];return i.a.createElement(u.a,Object(n.a)({},t,{template:r}))}}MemberDirectoryMenu.defaultProps=b,t.a=Object(o.b)((e,t)=>{var{externalTeams:a}=t,n=Object(d.d)(e),r=Object(c.q)(e),s={featureSonicMemberDirectory:Object(c.m)(e,"feature_sonic_member_directory"),workspaceName:Object(p.e)(n),isEnterprise:r,externalWorkspaces:a.map(t=>Object(d.i)(e,t))};return r&&(s.enterpriseOrgName=Object(d.e)(e)),s})(MemberDirectoryMenu)},CSbb:function(e,t,a){e.exports=a.p+"gsuite@2x-321c184.png"},CSrb:function(e,t,a){},CUc0:function(e,t,a){"use strict";var n=a("NFsq"),r=a("7EGn"),s=a("aK/h"),i=a("XfeM"),o=a("um7Q"),c=a("g5qt"),l=a("1hAG"),d=a("rWF5"),p=a("cewN"),u=a("n74X"),h=a("GdsW"),m=Object(i.b)("Open channel from another workspace",function(e,t){var{channelId:a,teamId:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t();if(Object(d.v)())return(Object(n.a)(Object(c.rb)(i),s)?Promise.resolve():Object(h.i)(s)).then(()=>new Promise(e=>window.requestAnimationFrame(e))).then(()=>{if(Object(d.w)("3.2"))Object(c.m)(s,a);else{var e=document.createElement("iframe"),t=Object(p.c)({team:s,id:a});e.src="slack://channel".concat(t),document.body.appendChild(e),setTimeout(()=>e.remove(),1e3)}});var m=Object(l.i)(i,s),b=Object(r.a)(m,"domain"),_="".concat(Object(o.b)(i,b),"/messages/").concat(a);return Object(u.d)(_,s),Promise.resolve()});m.meta={name:"openChannelFromAnotherTeam",key:"actionsOpenChannelFromAnotherTeamOpenChannelFromAnotherTeam",description:"Open channel from another workspace"},m.propTypes={channelId:s.default.string.isRequired,teamId:s.default.string.isRequired},t.a=m},CZPb:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("hOQf")),i=a("ALaB");a("Ho8D");function o(e){var{msg:t}=e;return Object(s.ub)(t)?r.a.createElement(i.a,{className:"c-message_kit__broadcast_footer",ts:t.ts,threadTs:t.thread_ts,channelId:t.channel}):null}},Cmng:function(e,t,a){},CoJr:function(e,t,a){},CsEc:function(e,t,a){"use strict";var n=a("rePB"),r=a("ifKl"),s=a("q1tI"),i=a.n(s),o=a("XHGt"),c=(a("aK/h"),a("TSYQ")),l=a.n(c),d=a("4M+g"),p=a("pfyZ"),u=a("t85p"),h=a("Uk1S"),m=a("vmJv"),b=a("S3eg"),_=a("LzXF"),g=a("HvGc"),f=a("kcos"),v=a("hOQf"),O=a("6kok"),y=a("C9/x"),C=a("YmYS"),j=a("2ojh"),E=a("od5y"),k=a("0f2Y"),S=a("zrHi"),I=a("tMdt"),w=a("Q/6m"),T=new(a("nNoG").b)("message"),N={PINNED:"pinned",UNPINNED:"unpinned",STARRED:"starred",UNSTARRED:"unstarred"},P={currentUserId:void 0,isIAP1Enabled:!1,featureContextualMessageShortcuts:!1};class labels_aria_live_message_LabelsAriaLiveMessage extends s.Component{constructor(e){super(e),this.state={ariaLiveMessage:null}}componentDidUpdate(e){this.maybeSetAriaLiveMessage(e)}componentWillUnmount(){this.cancelTimerToClearMessage()}getAriaLiveMessageOnUpdate(e){var{currentUserId:t,msg:a}=this.props,n=Object(v.K)(e.msg),r=(n&&n.pinnedBy)===t,s=Object(v.K)(a),i=(s&&s.pinnedBy)===t,o=Object(v.rb)(e.msg),c=Object(v.rb)(a);return r&&!i?N.UNPINNED:!r&&i?N.PINNED:!o&&c?N.STARRED:o&&!c?N.UNSTARRED:null}getAriaLiveMessageText(){var{isIAP1Enabled:e,featureContextualMessageShortcuts:t}=this.props,{ariaLiveMessage:a}=this.state;return t?a===N.PINNED?T.t("Added to the pinned items",{note:"Used to confirm the pin action for customers using screen readers. Not visible on screen."}):a===N.UNPINNED?T.t("Removed from the pinned items",{note:"Used to confirm the remove pin action for customers using screen readers. Not visible on screen."}):a===N.STARRED?e?"Added to your saved items":T.t("Added to your starred items",{note:"Used to confirm the star action for customers using screen readers. Not visible on screen."}):a===N.UNSTARRED?e?"Removed from your saved items":T.t("Removed from your starred items",{note:"Used to confirm the remove star action for customers using screen readers. Not visible on screen."}):"":""}maybeSetAriaLiveMessage(e){if(this.props.featureContextualMessageShortcuts){var t=this.getAriaLiveMessageOnUpdate(e);t&&t!==this.state.ariaLiveMessage&&(this.cancelTimerToClearMessage(),this.setState(()=>({ariaLiveMessage:t}),()=>{this.startTimerToClearMessage()}))}}startTimerToClearMessage(){this.ariaLiveMessageTimer=setTimeout(()=>{this.setState(()=>({ariaLiveMessage:null}))},3e3)}cancelTimerToClearMessage(){clearTimeout(this.ariaLiveMessageTimer)}render(){return i.a.createElement("div",{className:"c-message_kit__labels__offscreen_message","aria-live":"assertive"},this.getAriaLiveMessageText())}}labels_aria_live_message_LabelsAriaLiveMessage.defaultProps=P;var A=Object(o.b)(function(e){return{currentUserId:Object(u.d)(e),isIAP1Enabled:Object(f.d)(e),featureContextualMessageShortcuts:Object(u.m)(e,"feature_contextual_message_shortcuts")}})(labels_aria_live_message_LabelsAriaLiveMessage);a("GZud");function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var x={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled",broadcast:"jump"},R={className:void 0,children:void 0,showPinned:!0,showStarred:!0,showBroadcast:!1,theme:"light",sliHighlight:void 0,currentUserId:void 0,primaryView:void 0,isSelfIm:!1,isSlackbotIm:!1,dispatch:r.a,isIAP1Enabled:!1,setBackground:r.a};class labels_MessageLabels extends s.PureComponent{constructor(e){super(e),this.onBroadcastClick=this.onBroadcastClick.bind(this),this.renderHighlight=this.renderHighlight.bind(this),this.renderStarButton=this.renderStarButton.bind(this),this.renderBroadcast=this.renderBroadcast.bind(this),this.onStarClick=this.onStarClick.bind(this),this.labelText=null,this.primaryLabelType=null}componentDidMount(){this.setBackground()}componentDidUpdate(){this.setBackground()}onStarClick(){var{dispatch:e}=this.props;e(Object(g.k)())}onBroadcastClick(e){var{dispatch:t,msg:a,primaryView:n}=this.props;e.preventDefault(),n!==a.channel?t(Object(b.a)({id:a.channel,startTs:a.ts})):t(Object(_.c)({ts:a.ts,highlight:!0}))}setBackground(){var{setBackground:e}=this.props;e({labels:this.labelText&&this.primaryLabelType})}getLabelTypes(){var{msg:e,sliHighlight:t,showPinned:a,showStarred:n,showBroadcast:r}=this.props,s=Object(v.K)(e);return Object(y.a)({isPinned:a&&!!s,isEphemeral:Object(v.bb)(e),isStarred:n&&Object(v.rb)(e),isBroadcast:r&&Object(v.ub)(e),subtype:e.subtype,sliHighlight:!!t})}renderPinnedBy(e){return i.a.createElement(S.a,{className:"c-message_kit__labels__link",id:e})}renderStarButton(){var{text:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?i.a.createElement(k.a,{onClick:this.onStarClick,className:"c-message_kit__labels__link"},e):null}renderBroadcast(){var{text:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?i.a.createElement(k.a,{onClick:this.onBroadcastClick,className:"c-message_kit__labels__link"},e):null}renderLabelText(e){var{msg:t,currentUserId:a,isSelfIm:r,isSlackbotIm:s,isIAP1Enabled:o}=this.props,c=Object(v.K)(t),l=c&&c.pinnedBy,d=Object(j.a)(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{isSelfIm:r,isSlackbotIm:s,currentUserId:a,pinnedBy:l,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton,renderHighlight:this.renderHighlight,renderBroadcast:this.renderBroadcast,featureMessageLabelsCopy:!0,isIAP1Enabled:o}));return d?i.a.createElement("span",{className:"c-message_kit__labels__text"},d):null}renderLabelIcon(e){var{isIAP1Enabled:t}=this.props,a=x[e];return a?(t&&"starred"===e&&(a="bookmark-filled"),i.a.createElement("div",{className:"c-message_kit__labels__icon"},i.a.createElement(E.b,{type:a,size:"inherit"}))):null}renderHighlight(){var{msg:e,sliHighlight:t}=this.props,{channel:a,ts:n}=e;return Object(p.i)(t)?i.a.createElement(I.a,{sliHighlight:t,channelId:a,ts:n}):null}render(){var{children:e,theme:t,msg:a}=this.props,n=this.getLabelTypes(),r=Object(C.a)(n),s=this.renderLabelIcon(r),o=this.renderLabelText(n);this.labelText=o,this.primaryLabelType=r;var c=l()(this.props.className,"c-message_kit__labels","c-message_kit__labels--".concat(r),"c-message_kit__labels--".concat(t)),d=o?i.a.createElement("div",{className:c},i.a.createElement("div",{className:"c-message_kit__labels__label"},s,o),e):e;return i.a.createElement(i.a.Fragment,null,i.a.createElement(A,{msg:a}),d)}}labels_MessageLabels.defaultProps=R;t.a=Object(w.b)(Object(o.b)((e,t)=>{var{msg:a}=t;if(!a)return null;var{channel:n,ts:r}=a,s=Object(u.d)(e),i=Object(d.e)(e,n),o=Object(m.a)(e),{sliHighlight:c}=Object(p.e)(e,{channelId:n,ts:r}),l=Object(O.Hb)(i),b=Object(O.Tb)(s,i);return{theme:Object(h.a)(e),currentUserId:s,primaryView:o,sliHighlight:c,isSlackbotIm:l,isSelfIm:b,isIAP1Enabled:Object(f.d)(e)}})(labels_MessageLabels))},CvCA:function(e,t,a){"use strict";var n=a("fujP"),r=a("NZ+B"),s=a("TSYQ"),i=a.n(s),o=a("q1tI"),c=a.n(o),l=a("XHGt"),d=(a("aK/h"),a("nNoG")),p=a("a+Oh"),u=a("rWF5"),h=a("dxEi"),m=a("zoXk"),b=a("XL7r"),_=a("od5y"),g=(a("HyiT"),new d.b("notification_bar")),f={wasRecentlyOnline:!1,typingNames:null,textLength:0,isLegacy:!1,secondaryView:void 0,showTypingIndicator:!0,featureWysiwygComposer:!1,useSendButton:!1,usePreNewlines:!1,cursorInCodeBlock:!1};class notification_bar_NotificationBar extends o.PureComponent{renderLeft(){var e,{wasRecentlyOnline:t,typingNames:a,textLength:r,showTypingIndicator:s}=this.props;if(!t){var i=r?g.t("Slack is trying to connect, so messages can\u2019t be sent yet."):g.t("Slack is trying to connect.");return c.a.createElement("span",{id:"msg_input_info",className:"p-notification_bar__offline","aria-live":"polite"},i," ",c.a.createElement(_.a,{type:"cloud-offline-small-filled",className:"p-notification_bar__offline_icon"}))}return s&&!Object(n.a)(a)?(e=1===a.length?g.rt("<b>{name}</b> is typing",{name:a[0]}):2===a.length?g.rt("<b>{name}</b> and <b>{other_name}</b> are typing",{name:a[0],other_name:a[1]}):g.t("several people are typing"),c.a.createElement("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"p-notification_bar__typing"},e)):null}renderFormattingTips(){var{wasRecentlyOnline:e,featureWysiwygComposer:t,useSendButton:a,usePreNewlines:n,cursorInCodeBlock:r}=this.props;if(!e)return null;if(t){var s=e=>{var{tag:t,key:a,text:n}=e;return"span"===t?c.a.createElement("span",{key:a,className:"p-notification_bar__send"},n):c.a.createElement("b",{className:"p-notification_bar__return",key:a},n)};return n&&r?g.rt("<span><b>Shift + Return</b> to send</span><b>Return</b> to add a new line",null,s):a?Object(u.q)()?g.rt("<span><b>\u2318 + Return</b> to send</span><b>Return</b> to add a new line",null,s):g.rt("<span><b>Ctrl + Return</b> to send</span><b>Return</b> to add a new line",null,s):g.rt("<span><b>Return</b> to send</span><b>Shift + Return</b> to add a new line",null,s)}return Object(d.h)()?g.rt("<b>\uff0abold\uff0a</b> <code>\uff40code\uff40</code> <code>\uff40\uff40\uff40preformatted\uff40\uff40\uff40</code> <span>\uff1equote</span>"):g.rt("<b>*bold*</b> <i>_italics_</i> ~strike~ <code>`code`</code> <code>```preformatted```</code> <span>{quote}quote</span>",{quote:">",fallbackHash:"78fa2eabded9ec376bac82c1ade55d4f646aca2c"})}render(){var{wasRecentlyOnline:e,isLegacy:t,typingNames:a,secondaryView:r,showTypingIndicator:s,textLength:o}=this.props,l=i()("p-notification_bar__section","p-notification_bar__section--right",{"p-notification_bar__section--is-visible":e&&o>2}),d=i()("p-notification_bar",{"p-notification_bar--legacy":t,"p-notification_bar--typers_showing":s&&!Object(n.a)(a),"p-notification_bar--flexpane_open":!!r});return c.a.createElement("div",{className:d},c.a.createElement("div",{className:"p-notification_bar__section p-notification_bar__section--left"},this.renderLeft()),c.a.createElement("div",{className:l},c.a.createElement("span",{className:"p-notification_bar__formatting","aria-hidden":"true"},this.renderFormattingTips())))}}notification_bar_NotificationBar.defaultProps=f;var v=Object(l.b)(function(e,t){var{wasRecentlyOnline:a}=t;return{wasRecentlyOnline:Object(r.a)(a)?a:Object(h.h)(e),secondaryView:Object(m.j)(e),showTypingIndicator:Object(b.k)(e,"show_typing"),useSendButton:Object(b.k)(e,"msg_input_send_btn"),usePreNewlines:Object(b.k)(e,"enter_is_special_in_tbt"),featureWysiwygComposer:Object(p.a)(e)}})(notification_bar_NotificationBar);t.a=v},D3Vj:function(e,t,a){},DBPf:function(e,t,a){"use strict";var n=a("q1tI"),r=a("XHGt"),s=(a("aK/h"),a("yHhI")),i=a("G3Sk"),o=new(a("nNoG").b)("view"),c=0;class document_title_DocumentTitle extends n.PureComponent{componentDidMount(){c&&this.props.logger.error("Multiple DocumentTitles mounted"),c+=1,this.originalTitle=document.title,this.updateTitle()}componentDidUpdate(e){e.title===this.props.title&&e.totalUnreadHighlights===this.props.totalUnreadHighlights||this.updateTitle()}componentWillUnmount(){c-=1,document.title=this.originalTitle}updateTitle(){var{totalUnreadHighlights:e,title:t}=this.props,a=o.t("Slack");0!==t.length?document.title=e?"".concat(a," | ").concat(t," | ").concat(this.unreadHighlightsCountString()):"".concat(a," | ").concat(t):document.title=a}unreadHighlightsCountString(){return o.t("{totalUnreadHighlights, plural, =1 {# new item} other {# new items}}",{totalUnreadHighlights:this.props.totalUnreadHighlights})}render(){return null}}document_title_DocumentTitle.defaultProps={totalUnreadHighlights:null};var l=Object(r.b)(e=>({logger:Object(s.a)({state:e}),totalUnreadHighlights:Object(i.f)(e)}))(document_title_DocumentTitle);t.a=l},DEaQ:function(e,t,a){"use strict";var n=a("wx14"),r=a("q1tI"),s=a.n(r),i=(a("aK/h"),a("XHGt")),o=a("MREy"),c=a("od5y"),l=a("Gogr"),d=a("1hAG"),p=a("vmJv"),u=a("Gmrf"),h=a("rWF5"),m=a("YB7p"),b=a("ICFZ"),_=a("GNdI"),g=a("rb67"),f=a("4ULK"),v=a("rz65"),O=a("nOCT"),y={menuProps:void 0,lastError:void 0},C="not registered",j=document&&document.documentElement&&document.documentElement.dataset,E={versionTs:j.versionTs,versionHash:j.versionHash,minVersionDataTs:O.a};class DebugMenu extends r.Component{constructor(e){super(e),this.resetCredentials=this.resetCredentials.bind(this),this.copyVersionInfo=this.copyVersionInfo.bind(this),this.debugMenuPurgeStoredModel=this.debugMenuPurgeStoredModel.bind(this),this.copyVersionInfo=this.copyVersionInfo.bind(this),this.state={sw:C,cachedRequests:{},storageQuota:0,storageUsage:0}}componentWillUnmount(){this.serviceWorkerP&&this.serviceWorkerP.cancel&&this.serviceWorkerP.cancel(),this.cachedRequestsP&&this.cachedRequestsP.cancel&&this.cachedRequestsP.cancel(),this.storageEstimateP&&this.storageEstimateP.cancel&&this.storageEstimateP.cancel()}UNSAFE_componentWillMount(){this.serviceWorkerP=Object(g.c)().then(e=>{void 0!==e&&e.active&&this.setState(()=>({sw:e.active.state}))}),this.cachedRequestsP=Object(g.b)().then(e=>{e&&this.setState(()=>({cachedRequests:e}))}),Object(h.r)()&&(this.storageEstimateP=navigator.storage.estimate().then(e=>{this.setState(()=>({storageQuota:e.quota,storageUsage:e.usage}))}))}copyVersionInfo(){var e=k(E.versionTs),t=k(E.minVersionDataTs);Object(b.c)("Version TS: ".concat(E.versionTs).concat(e&&" (".concat(e,")")||"",", Version Hash: ").concat(E.versionHash,", Min Version Data TS: ").concat(E.minVersionDataTs).concat(t&&" (".concat(t,")")||""))}debugMenuPurgeStoredModel(){return Object(f.a)(Object(_.a)())}resetCredentials(){Object(l.g)(),Object(m.b)({reason:"Reload initiated from user clicking reset credentials in sonic debug menu",reasonKey:"sonic_debug_menu",noCache:!0})}renderSWStorage(){return Object(h.r)()&&this.state.storageUsage&&this.state.storageQuota?s.a.createElement(s.a.Fragment,null,"Storage: ",(this.state.storageUsage/1024/1024).toFixed(1)," of"," ",Math.round(this.state.storageQuota/1024/1024),"MB (",(this.state.storageUsage/this.state.storageQuota).toFixed(2),"%)"):null}render(){var{menuProps:e,lastError:t,version:a}=this.props,r=Object.keys(this.state.cachedRequests).map(e=>{var t=this.state.cachedRequests[e];return{label:"".concat(e,": ").concat(t.length)}}),i=[{children:s.a.createElement("div",{style:{whiteSpace:"normal"}},s.a.createElement(c.b,{type:"warning",inline:!0})," ",t),hide:!t,key:"last-error"},{label:"Cold boot",click:()=>Object(m.a)({reason:"debug-menu",reasonKey:"debug_menu"})},{label:"Cold boot immediately",click:()=>Object(m.a)({reason:"debug-menu-immediate",reasonKey:"debug_menu",immediate:!0})},{label:"Re-fetch credentials",click:this.resetCredentials},{label:"Copy Version Info",click:this.copyVersionInfo},{type:"separator"},{children:s.a.createElement("div",{style:{whiteSpace:"normal",opacity:.7}},s.a.createElement("strong",null,"Version TS:")," ",a.versionTs,s.a.createElement("br",null),k(a.versionTs),k(a.versionTs)&&s.a.createElement("br",null),s.a.createElement("strong",null,"Data Version:")," ",a.minVersionDataTs,s.a.createElement("br",null),k(a.minVersionDataTs),s.a.createElement("br",null),s.a.createElement("strong",null,"Version Hash:")," ",a.versionHash&&a.versionHash.slice(0,14)),click:this.copyVersionInfo,key:"version-info"},{type:"separator"},{label:"Service Worker",type:v.a.submenu,template:[{children:s.a.createElement("div",{style:{whiteSpace:"normal",opacity:.7}},"State: ",this.state.sw,s.a.createElement("br",null),this.renderSWStorage()),key:"sw-state"},{type:"separator"},{label:"Cached Requests",type:v.a.submenu,template:r.length>0?r:[{label:"None"}]},{type:"separator"},{label:"Register SW",click:g.d,hide:"not registered"!==this.state.sw},{label:"Unregister SW",click:g.e,hide:"not registered"===this.state.sw},{label:"Update SW",click:g.f,hide:"not registered"===this.state.sw},{label:"Clear the SW cache",click:g.a,hide:0===Object.keys(this.state.cachedRequests).length}].filter(e=>!e.hide)},{label:"IndexedDB",type:v.a.submenu,template:[{label:"Purge Stored Model for this Workspace",click:this.debugMenuPurgeStoredModel}]}].filter(e=>!e.hide);return s.a.createElement(o.a,Object(n.a)({},e,{template:i}))}}function k(e){return parseInt(e,10)?new Date(1e3*e).toLocaleString("en-CA",{hour12:!1,timeZoneName:"short"}):null}DebugMenu.defaultProps=y,t.a=Object(i.b)(function(e){var t=Object(p.a)(e),a=Object(d.d)(e),n=Object(u.b)(e);return{channelId:t,lastError:n?n.message:"",teamDomain:a.domain,teamId:a.id,version:E}})(DebugMenu)},DFT4:function(e,t,a){},Dcvo:function(e,t,a){},Drpm:function(e,t,a){},"Dw1/":function(e,t,a){},Ect7:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("TSYQ"),i=a.n(s),o=a("XHGt"),c=(a("aK/h"),a("nNoG")),l=a("5mKg"),d=a("Fdc0"),p=a("derf"),u=a("od5y"),h=a("RAhH"),m=a("/m+M"),b=(a("e3Uf"),new c.b("team"));function _(e){return r.a.createElement(h.c,{position:"bottom-right",tip:e,zIndex:"above_fs"},r.a.createElement(u.b,{type:"question-circle"}))}var g={className:void 0,memberIsAdmin:!1,memberIsOwner:!1};function f(e){var{className:t,member:a,memberIsAdmin:n,memberIsOwner:s,team:o}=e,{featureModernProfileFlexpane:h}=Object(m.a)();if(!h)return null;var g=i()(t,"p-member_profile_restriction"),f=Object(d.xb)(a)&&b.t("This person hasn\u2019t finished signing up. They may receive messages via email.");return Object(d.tb)(a)?r.a.createElement("div",{className:g},r.a.createElement(p.b,{className:"p-member_profile_restriction__team_icon",id:o.id,size:16}),r.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(l.e)(o))):Object(d.mb)(a)?r.a.createElement("div",{className:g},r.a.createElement(u.b,{className:"p-member_profile_restriction__icon",type:"archived-channel"}),r.a.createElement("span",{className:"p-member_profile_restriction__text"},b.t("Deactivated account",{fallbackHash:"d57fa5164165105a1507c830ae06f7af8307870a",fallbackHashNs:"team"}))):Object(d.Mb)(a)?r.a.createElement("div",{className:g},r.a.createElement(u.b,{className:"p-member_profile_restriction__icon",type:Object(d.xb)(a)?"envelope-o":"single-channel-guest"}),r.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(d.xb)(a)?b.t("Invited Guest"):b.t("Single-Channel Guest")),_(f||b.t("Single-Channel Guests see a partial directory and can only access messages and files from selected channels."))):Object(d.Gb)(a)?r.a.createElement("div",{className:g},r.a.createElement(u.b,{className:"p-member_profile_restriction__icon",type:Object(d.xb)(a)?"envelope-o":"restricted-user"}),r.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(d.xb)(a)?b.t("Invited Guest"):b.t("Multi-Channel Guest")),_(f||b.t("Multi-Channel Guests see a partial directory and can only access messages and files from selected channels."))):s?r.a.createElement("div",{className:g},r.a.createElement("span",{className:"p-member_profile_restriction__text"},b.t("Owner of {teamName}",{teamName:Object(c.q)(Object(l.e)(o))}))):n?r.a.createElement("div",{className:g},r.a.createElement("span",{className:"p-member_profile_restriction__text"},b.t("Workspace Admin"))):Object(d.xb)(a)?r.a.createElement("div",{className:g},r.a.createElement(u.b,{className:"p-member_profile_restriction__icon",type:"envelope-o"}),r.a.createElement("span",{className:"p-member_profile_restriction__text"},b.t("Invited Member")),_(f)):null}f.defaultProps=g,t.a=Object(o.b)((e,t)=>{var{member:a}=t;return{memberIsAdmin:Object(d.eb)(e,a),memberIsOwner:Object(d.Eb)(e,a)}})(f)},Efcz:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("od5y")),i=a("vSXf"),o=a("nNoG"),c=(a("ixEi"),new o.b("offline_mode"));function l(e){var{featureOfflineMode:t,caption:a}=e;return t?r.a.createElement("div",{className:"p-large_offline_indicator"},r.a.createElement("p",{className:"p-large_offline_indicator__headline"},r.a.createElement(s.b,{type:"cloud-offline-small",size:"inherit"})," ",c.t("No connection")),r.a.createElement("p",{className:"p-large_offline_indicator__caption"},a||c.t("Go online to get the latest messages."))):null}l.defaultProps={caption:void 0},t.a=Object(i.a)("feature_offline_mode")(l)},EnhK:function(e,t,a){},EpXI:function(e,t,a){},EtLH:function(e,t,a){},"F+Fq":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var n=a("ifKl"),r=a("ROZo"),s=(Object(r.b)("TS.ui.apps_browser.routeAppOpen",n.a),Object(r.b)("TS.ui.apps_browser.showAppTutorial",n.a)),i=(Object(r.b)("TS.ui.apps_browser.canAppBeAdded",n.a),Object(r.b)("TS.ui.apps_browser.addAppToChannel",n.a),Object(r.b)("TS.ui.apps_browser.buildAddAppsTitle",n.a),Object(r.b)("TS.ui.apps_browser.startAddApps",n.a));Object(r.b)("TS.ui.apps_browser.ensureAppMembershipIsKnown",n.a)},F5ou:function(e,t,a){},F8qq:function(e,t,a){"use strict";var n=a("XfeM"),r=a("YYb+"),s=a("rzSx"),i=a("hPzE"),o=a("aK/h"),c=a("kOzZ"),l=a("Go8C"),d=a("GbAX"),p=a("9vuj"),u=Object(n.b)("Clog clicks on a message or file using data from redux",function(e,t){var{suggestion:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t(),s=e(Object(i.g)()),o=e(Object(i.f)()),u=Object(r.d)(n),h=Object(r.c)(n),m=u.map(e=>e.featureVector),b=Object(c.a)({state:n}),_=Object(l.d)(n),g=_?_.length:0,f=Object(d.i)(n),v={accept_module_name:"results_unified",accept_module_length:u.length,accept_item_offset:h,feature_vector_list:m,suggestion_type:a.type,is_navigational:a.is_type_navigational,is_action:a.is_type_action,navigation_model_id:a.id,request_id:Object(p.a)(n),search_session_id:s,client_request_id:o,query_length:g,open_method:f};b.track("SEARCH_AUTOCOMPLETE_ACCEPT",v)});u.meta={name:"clogAutocompleteAccept",key:"actionsUniversalSearchClogAutocompleteClogAutocompleteAccept",description:"Clog clicks on a message or file using data from redux"},u.propTypes={suggestion:o.default.object.isRequired};var h=u,m=a("za+y"),b=a("JrUZ"),_=a("BrU6"),g=a("iW0Y"),f=a("tfx1"),v=a("HvGc"),O=a("qgNY"),y=a("1F8+"),C=a("yHhI"),j=a("k2C/"),E=a("MjS2"),k=a("V18M"),S=a("s19S"),I=a("S3eg"),w=a("CUc0"),T=a("6kok"),N=a("Fdc0"),P=a("Smdl"),A=a("rWF5"),M=a("rtjy"),x=a("YCXn"),R=a("53Ys"),D=a("97va"),F=a("hUCq"),L=a("brL+"),U=a("toaU"),B=a("kLJo"),H=a("5mKg"),W=a("hjTk"),q=a("t85p"),G=a("24Q/"),K=a("1Tny"),V=a("1tsX"),z=a("FHcd"),Y=a("4M+g"),Q=a("lhZz"),X=a("wR6u"),J=a("0nhw"),Z=a("G4ux"),$=a("KXvl"),ee=a("s5Is"),te=a("IY6O");a.d(t,"a",function(){return ae});var ae=Object(n.b)("Accept the selected (or 0th) search autocomplete suggestion",(e,t)=>{Object(C.a)({getState:t}).info("IMPROVED_SEARCH","Accepted search query");var a=t(),n=Object(r.c)(a)||0,o=Object(r.d)(a)[n];if(o)if(e(h({suggestion:o})),o.is_type_query_completion){var c=Object(s.f)(o.suggestion_replacement),d=Object(s.f)(o.suggestion_replacement_for_request);Object(C.a)({getState:t}).info("IMPROVED_SEARCH","Accepting query suggestion"),e(Object(b.y)({query:d})),e(Object(i.j)({query:d})),e(Object(l.g)({displayQuery:c})),Object(k.a)(a)?(e(Object(r.a)()),Object(S.n)("Vsearch")):e(Object(g.a)({interfaceMode:f.a.SEARCH_RESULTS}))}else if(o.is_type_navigational){if(o.is_type_file)Object(C.a)({getState:t}).info("IMPROVED_SEARCH","Navigating to file. file: ".concat(o.file.id)),e(Object(v.c)({fileId:o.file.id}));else{if(Object(C.a)({getState:t}).info("IMPROVED_SEARCH","Navigating to model: id: ".concat(o.id)),Object(j.a)(o.id))if(Object(P.a)()){var p=Object(Z.b)(a);ne(o.id)?Object(B.g)(U.a,{teamId:o.id},{reason:"omniswitcher:searchAutocompleteSuggestionAccept"}):Object($.b)()?re(e,t,p,o.id):se(e,t,p,o.id)}else if(Object(A.v)())Object(E.m)(o.id);else{var u=o.team.url||Object(H.n)(o.team);Object(W.a)(u)}else if(o.channel&&Object(T.cb)(o.channel)){var N=o.channel.id,Q=Object(F.a)({state:a,channel:o.channel,currentTeamId:Object(L.b)(a)})||Object(T.Zb)(a,o.channel);if(Object(P.a)()){var X=Object(Z.b)(a);ne(Q)?e(Object(I.a)({id:N,teamId:Q})):Object($.b)()?re(e,t,X,Q,N):se(e,t,X,Q,N)}else e(Object(w.a)({teamId:Q,channelId:N}))}else if(o.channel&&Object(T.Ub)(a,o.channel)){var J=o.channel.team_id,ee=o.channel.id;Object(P.a)()?e(Object(I.a)({id:ee,teamId:J})):e(Object(w.a)({teamId:J,channelId:ee}))}else if("Vapp_space"===o.id){var te=Object(q.m)(t(),"feature_m11n_apps_browser"),ae=Object(V.a)(t());te?ae?(e(Object(D.a)()),e(Object(m.a)({eventId:"APP_LAUNCHER_OPEN_FROM_SEARCH"}))):e(Object(R.a)()):Object(x.a)()}else{var ie;Object(z.a)(o.id)&&(ie=Object(Y.l)(a,o.id)),e(Object(O.a)({id:ie||o.id}))}var oe=o.channel||o.member||{id:o.id},ce=Object(l.d)(a);e(Object(M.c)({id:oe.id,text:ce}))}e(Object(_.a)({textyString:""})),e(Object(y.a)()),e(Object(r.a)())}else if(o.is_type_action&&Object(G.a)(a)){if(o.is_type_app_action){var le=o.app_action,de=Object(l.d)(a);e(Object(K.a)({actionId:le.id,appId:le.app_id,referrer:"quickswitcher"})),e(Object(M.c)({id:le.id,text:de}))}Object(C.a)({getState:t}).action("Executed action",o),e(Object(_.a)({textyString:""})),e(Object(y.a)()),e(Object(r.a)())}});function ne(e){var t=Object(Q.getStateForClientStore)();return!(!Object(te.getWorkspacesMeta)(t)[e]||Object(te.isWorkspaceExpired)(t,e))}function re(e,t,a,n,r){return Object(N.zb)(a,n)?Object(Q.dispatchForClientStore)(Object(ee.fetchAuthAndSetFocusedWorkspace)({teamId:n,channelId:r})):(Object(X.d)(!1),e(Object(J.b)({teamId:n})).catch(e=>{if(!e.data||"user_already_team_member"!==e.data.error)throw e}).then(()=>Object(Q.dispatchForClientStore)(Object(ee.fetchAuthAndSetFocusedWorkspace)({teamId:n,channelId:r}))).catch(e=>{Object(C.a)({getState:t}).error("Unable to join team ".concat(n,": ").concat(e)),Object(X.d)(!0)}))}function se(e,t,a,n,r){return Object(N.zb)(a,n)?Promise.resolve(ie(e,n,r)):(Object(X.d)(!1),e(Object(J.b)({teamId:n})).catch(e=>{if(!e.data||"user_already_team_member"!==e.data.error)throw e}).then(()=>{ie(e,n,r)}).catch(e=>{Object(C.a)({getState:t}).error("Unable to join team ".concat(n,": ").concat(e))}).finally(()=>Object(X.d)(!0)))}function ie(e,t,a){a?e(Object(I.a)({id:a,teamId:t})):Object(B.g)(U.a,{teamId:t},{reason:"omniswitcher:searchAutocompleteSuggestionAccept"})}ae.meta={name:"searchAutocompleteSuggestionAccept",key:"actionsUniversalSearchSearchAutocompleteSuggestionAcceptSearchAutocompleteSuggestionAccept",description:"Accept the selected (or 0th) search autocomplete suggestion"},ae.propTypes={}},FXxD:function(e,t,a){},FeTz:function(e,t,a){},FsNM:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("cD5Y");a("5oz1");t.a=(()=>r.a.createElement("div",{className:"p-flexpane__loader_item"},r.a.createElement(s.a,{noMargin:!0,size:"medium"})))},Fsvi:function(e,t,a){},G4Tr:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=new(a("nNoG").b)("a11y");function r(){var{channelName:e,previousChannelName:t,workspaceName:a,orgName:r,isOrgGlobalSharedPublicOrPrivateChannel:s,isOrgSharedPublicOrPrivateChannel:i,isExternallySharedChannel:o,isArchived:c,isCurrent:l,hasUnreads:d,hasNotifications:p,isPrivate:u,isNotMember:h,isMuted:m,isStarred:b,hasDraft:_}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=(()=>o&&a?n.t("shared with {workspaceName}",{workspaceName:a}):s&&r?n.t("shared across all {orgName} workspaces",{orgName:r}):i?n.t("shared channel"):"")(),f=(()=>c?n.t("archived channel"):l&&d&&p&&u&&h&&m&&b&&_?n.t("current channel, has unread messages and notifications, private, not a member, muted, starred, has a draft message"):!l&&d&&p&&u&&h&&m&&b&&_?n.t("has unread messages and notifications, private, not a member, muted, starred, has a draft message"):l&&!d&&p&&u&&h&&m&&b&&_?n.t("current channel, has notifications, private, not a member, muted, starred, has a draft message"):!l&&!d&&p&&u&&h&&m&&b&&_?n.t("has notifications, private, not a member, muted, starred, has a draft message"):l&&d&&!p&&u&&h&&m&&b&&_?n.t("current channel, has unread messages, private, not a member, muted, starred, has a draft message"):!l&&d&&!p&&u&&h&&m&&b&&_?n.t("has unread messages, private, not a member, muted, starred, has a draft message"):l&&!d&&!p&&u&&h&&m&&b&&_?n.t("current channel, private, not a member, muted, starred, has a draft message"):!l&&!d&&!p&&u&&h&&m&&b&&_?n.t("private, not a member, muted, starred, has a draft message"):l&&d&&p&&!u&&h&&m&&b&&_?n.t("current channel, has unread messages and notifications, not a member, muted, starred, has a draft message"):!l&&d&&p&&!u&&h&&m&&b&&_?n.t("has unread messages and notifications, not a member, muted, starred, has a draft message"):l&&!d&&p&&!u&&h&&m&&b&&_?n.t("current channel, has notifications, not a member, muted, starred, has a draft message"):!l&&!d&&p&&!u&&h&&m&&b&&_?n.t("has notifications, not a member, muted, starred, has a draft message"):l&&d&&!p&&!u&&h&&m&&b&&_?n.t("current channel, has unread messages, not a member, muted, starred, has a draft message"):!l&&d&&!p&&!u&&h&&m&&b&&_?n.t("has unread messages, not a member, muted, starred, has a draft message"):l&&!d&&!p&&!u&&h&&m&&b&&_?n.t("current channel, not a member, muted, starred, has a draft message"):!l&&!d&&!p&&!u&&h&&m&&b&&_?n.t("not a member, muted, starred, has a draft message"):l&&d&&p&&u&&!h&&m&&b&&_?n.t("current channel, has unread messages and notifications, private, muted, starred, has a draft message"):!l&&d&&p&&u&&!h&&m&&b&&_?n.t("has unread messages and notifications, private, muted, starred, has a draft message"):l&&!d&&p&&u&&!h&&m&&b&&_?n.t("current channel, has notifications, private, muted, starred, has a draft message"):!l&&!d&&p&&u&&!h&&m&&b&&_?n.t("has notifications, private, muted, starred, has a draft message"):l&&d&&!p&&u&&!h&&m&&b&&_?n.t("current channel, has unread messages, private, muted, starred, has a draft message"):!l&&d&&!p&&u&&!h&&m&&b&&_?n.t("has unread messages, private, muted, starred, has a draft message"):l&&!d&&!p&&u&&!h&&m&&b&&_?n.t("current channel, private, muted, starred, has a draft message"):!l&&!d&&!p&&u&&!h&&m&&b&&_?n.t("private, muted, starred, has a draft message"):l&&d&&p&&!u&&!h&&m&&b&&_?n.t("current channel, has unread messages and notifications, muted, starred, has a draft message"):!l&&d&&p&&!u&&!h&&m&&b&&_?n.t("has unread messages and notifications, muted, starred, has a draft message"):l&&!d&&p&&!u&&!h&&m&&b&&_?n.t("current channel, has notifications, muted, starred, has a draft message"):!l&&!d&&p&&!u&&!h&&m&&b&&_?n.t("has notifications, muted, starred, has a draft message"):l&&d&&!p&&!u&&!h&&m&&b&&_?n.t("current channel, has unread messages, muted, starred, has a draft message"):!l&&d&&!p&&!u&&!h&&m&&b&&_?n.t("has unread messages, muted, starred, has a draft message"):l&&!d&&!p&&!u&&!h&&m&&b&&_?n.t("current channel, muted, starred, has a draft message"):l||d||p||u||h||!m||!b||!_?l&&d&&p&&u&&h&&!m&&b&&_?n.t("current channel, has unread messages and notifications, private, not a member, starred, has a draft message"):!l&&d&&p&&u&&h&&!m&&b&&_?n.t("has unread messages and notifications, private, not a member, starred, has a draft message"):l&&!d&&p&&u&&h&&!m&&b&&_?n.t("current channel, has notifications, private, not a member, starred, has a draft message"):!l&&!d&&p&&u&&h&&!m&&b&&_?n.t("has notifications, private, not a member, starred, has a draft message"):l&&d&&!p&&u&&h&&!m&&b&&_?n.t("current channel, has unread messages, private, not a member, starred, has a draft message"):!l&&d&&!p&&u&&h&&!m&&b&&_?n.t("has unread messages, private, not a member, starred, has a draft message"):l&&!d&&!p&&u&&h&&!m&&b&&_?n.t("current channel, private, not a member, starred, has a draft message"):!l&&!d&&!p&&u&&h&&!m&&b&&_?n.t("private, not a member, starred, has a draft message"):l&&d&&p&&!u&&h&&!m&&b&&_?n.t("current channel, has unread messages and notifications, not a member, starred, has a draft message"):!l&&d&&p&&!u&&h&&!m&&b&&_?n.t("has unread messages and notifications, not a member, starred, has a draft message"):l&&!d&&p&&!u&&h&&!m&&b&&_?n.t("current channel, has notifications, not a member, starred, has a draft message"):!l&&!d&&p&&!u&&h&&!m&&b&&_?n.t("has notifications, not a member, starred, has a draft message"):l&&d&&!p&&!u&&h&&!m&&b&&_?n.t("current channel, has unread messages, not a member, starred, has a draft message"):!l&&d&&!p&&!u&&h&&!m&&b&&_?n.t("has unread messages, not a member, starred, has a draft message"):l&&!d&&!p&&!u&&h&&!m&&b&&_?n.t("current channel, not a member, starred, has a draft message"):l||d||p||u||!h||m||!b||!_?l&&d&&p&&u&&!h&&!m&&b&&_?n.t("current channel, has unread messages and notifications, private, starred, has a draft message"):!l&&d&&p&&u&&!h&&!m&&b&&_?n.t("has unread messages and notifications, private, starred, has a draft message"):l&&!d&&p&&u&&!h&&!m&&b&&_?n.t("current channel, has notifications, private, starred, has a draft message"):!l&&!d&&p&&u&&!h&&!m&&b&&_?n.t("has notifications, private, starred, has a draft message"):l&&d&&!p&&u&&!h&&!m&&b&&_?n.t("current channel, has unread messages, private, starred, has a draft message"):!l&&d&&!p&&u&&!h&&!m&&b&&_?n.t("has unread messages, private, starred, has a draft message"):l&&!d&&!p&&u&&!h&&!m&&b&&_?n.t("current channel, private, starred, has a draft message"):l||d||p||!u||h||m||!b||!_?l&&d&&p&&!u&&!h&&!m&&b&&_?n.t("current channel, has unread messages and notifications, starred, has a draft message"):!l&&d&&p&&!u&&!h&&!m&&b&&_?n.t("has unread messages and notifications, starred, has a draft message"):l&&!d&&p&&!u&&!h&&!m&&b&&_?n.t("current channel, has notifications, starred, has a draft message"):l||d||!p||u||h||m||!b||!_?l&&d&&!p&&!u&&!h&&!m&&b&&_?n.t("current channel, has unread messages, starred, has a draft message"):l||!d||p||u||h||m||!b||!_?!l||d||p||u||h||m||!b||!_?l||d||p||u||h||m||!b||!_?l&&d&&p&&u&&h&&m&&!b&&_?n.t("current channel, has unread messages and notifications, private, not a member, muted, has a draft message"):!l&&d&&p&&u&&h&&m&&!b&&_?n.t("has unread messages and notifications, private, not a member, muted, has a draft message"):l&&!d&&p&&u&&h&&m&&!b&&_?n.t("current channel, has notifications, private, not a member, muted, has a draft message"):!l&&!d&&p&&u&&h&&m&&!b&&_?n.t("has notifications, private, not a member, muted, has a draft message"):l&&d&&!p&&u&&h&&m&&!b&&_?n.t("current channel, has unread messages, private, not a member, muted, has a draft message"):!l&&d&&!p&&u&&h&&m&&!b&&_?n.t("has unread messages, private, not a member, muted, has a draft message"):l&&!d&&!p&&u&&h&&m&&!b&&_?n.t("current channel, private, not a member, muted, has a draft message"):!l&&!d&&!p&&u&&h&&m&&!b&&_?n.t("private, not a member, muted, has a draft message"):l&&d&&p&&!u&&h&&m&&!b&&_?n.t("current channel, has unread messages and notifications, not a member, muted, has a draft message"):!l&&d&&p&&!u&&h&&m&&!b&&_?n.t("has unread messages and notifications, not a member, muted, has a draft message"):l&&!d&&p&&!u&&h&&m&&!b&&_?n.t("current channel, has notifications, not a member, muted, has a draft message"):!l&&!d&&p&&!u&&h&&m&&!b&&_?n.t("has notifications, not a member, muted, has a draft message"):l&&d&&!p&&!u&&h&&m&&!b&&_?n.t("current channel, has unread messages, not a member, muted, has a draft message"):!l&&d&&!p&&!u&&h&&m&&!b&&_?n.t("has unread messages, not a member, muted, has a draft message"):l&&!d&&!p&&!u&&h&&m&&!b&&_?n.t("current channel, not a member, muted, has a draft message"):l||d||p||u||!h||!m||b||!_?l&&d&&p&&u&&!h&&m&&!b&&_?n.t("current channel, has unread messages and notifications, private, muted, has a draft message"):!l&&d&&p&&u&&!h&&m&&!b&&_?n.t("has unread messages and notifications, private, muted, has a draft message"):l&&!d&&p&&u&&!h&&m&&!b&&_?n.t("current channel, has notifications, private, muted, has a draft message"):!l&&!d&&p&&u&&!h&&m&&!b&&_?n.t("has notifications, private, muted, has a draft message"):l&&d&&!p&&u&&!h&&m&&!b&&_?n.t("current channel, has unread messages, private, muted, has a draft message"):!l&&d&&!p&&u&&!h&&m&&!b&&_?n.t("has unread messages, private, muted, has a draft message"):l&&!d&&!p&&u&&!h&&m&&!b&&_?n.t("current channel, private, muted, has a draft message"):l||d||p||!u||h||!m||b||!_?l&&d&&p&&!u&&!h&&m&&!b&&_?n.t("current channel, has unread messages and notifications, muted, has a draft message"):!l&&d&&p&&!u&&!h&&m&&!b&&_?n.t("has unread messages and notifications, muted, has a draft message"):l&&!d&&p&&!u&&!h&&m&&!b&&_?n.t("current channel, has notifications, muted, has a draft message"):l||d||!p||u||h||!m||b||!_?l&&d&&!p&&!u&&!h&&m&&!b&&_?n.t("current channel, has unread messages, muted, has a draft message"):l||!d||p||u||h||!m||b||!_?!l||d||p||u||h||!m||b||!_?l||d||p||u||h||!m||b||!_?l&&d&&p&&u&&h&&!m&&!b&&_?n.t("current channel, has unread messages and notifications, private, not a member, has a draft message"):!l&&d&&p&&u&&h&&!m&&!b&&_?n.t("has unread messages and notifications, private, not a member, has a draft message"):l&&!d&&p&&u&&h&&!m&&!b&&_?n.t("current channel, has notifications, private, not a member, has a draft message"):!l&&!d&&p&&u&&h&&!m&&!b&&_?n.t("has notifications, private, not a member, has a draft message"):l&&d&&!p&&u&&h&&!m&&!b&&_?n.t("current channel, has unread messages, private, not a member, has a draft message"):!l&&d&&!p&&u&&h&&!m&&!b&&_?n.t("has unread messages, private, not a member, has a draft message"):l&&!d&&!p&&u&&h&&!m&&!b&&_?n.t("current channel, private, not a member, has a draft message"):l||d||p||!u||!h||m||b||!_?l&&d&&p&&!u&&h&&!m&&!b&&_?n.t("current channel, has unread messages and notifications, not a member, has a draft message"):!l&&d&&p&&!u&&h&&!m&&!b&&_?n.t("has unread messages and notifications, not a member, has a draft message"):l&&!d&&p&&!u&&h&&!m&&!b&&_?n.t("current channel, has notifications, not a member, has a draft message"):l||d||!p||u||!h||m||b||!_?l&&d&&!p&&!u&&h&&!m&&!b&&_?n.t("current channel, has unread messages, not a member, has a draft message"):l||!d||p||u||!h||m||b||!_?!l||d||p||u||!h||m||b||!_?l||d||p||u||!h||m||b||!_?l&&d&&p&&u&&!h&&!m&&!b&&_?n.t("current channel, has unread messages and notifications, private, has a draft message"):!l&&d&&p&&u&&!h&&!m&&!b&&_?n.t("has unread messages and notifications, private, has a draft message"):l&&!d&&p&&u&&!h&&!m&&!b&&_?n.t("current channel, has notifications, private, has a draft message"):l||d||!p||!u||h||m||b||!_?l&&d&&!p&&u&&!h&&!m&&!b&&_?n.t("current channel, has unread messages, private, has a draft message"):l||!d||p||!u||h||m||b||!_?!l||d||p||!u||h||m||b||!_?l||d||p||!u||h||m||b||!_?l&&d&&p&&!u&&!h&&!m&&!b&&_?n.t("current channel, has unread messages and notifications, has a draft message"):l||!d||!p||u||h||m||b||!_?!l||d||!p||u||h||m||b||!_?l||d||!p||u||h||m||b||!_?!l||!d||p||u||h||m||b||!_?l||!d||p||u||h||m||b||!_?!l||d||p||u||h||m||b||!_?l||d||p||u||h||m||b||!_?l&&d&&p&&u&&h&&m&&b&&!_?n.t("current channel, has unread messages and notifications, private, not a member, muted, starred"):!l&&d&&p&&u&&h&&m&&b&&!_?n.t("has unread messages and notifications, private, not a member, muted, starred"):l&&!d&&p&&u&&h&&m&&b&&!_?n.t("current channel, has notifications, private, not a member, muted, starred"):!l&&!d&&p&&u&&h&&m&&b&&!_?n.t("has notifications, private, not a member, muted, starred"):l&&d&&!p&&u&&h&&m&&b&&!_?n.t("current channel, has unread messages, private, not a member, muted, starred"):!l&&d&&!p&&u&&h&&m&&b&&!_?n.t("has unread messages, private, not a member, muted, starred"):l&&!d&&!p&&u&&h&&m&&b&&!_?n.t("current channel, private, not a member, muted, starred"):!l&&!d&&!p&&u&&h&&m&&b&&!_?n.t("private, not a member, muted, starred"):l&&d&&p&&!u&&h&&m&&b&&!_?n.t("current channel, has unread messages and notifications, not a member, muted, starred"):!l&&d&&p&&!u&&h&&m&&b&&!_?n.t("has unread messages and notifications, not a member, muted, starred"):l&&!d&&p&&!u&&h&&m&&b&&!_?n.t("current channel, has notifications, not a member, muted, starred"):!l&&!d&&p&&!u&&h&&m&&b&&!_?n.t("has notifications, not a member, muted, starred"):l&&d&&!p&&!u&&h&&m&&b&&!_?n.t("current channel, has unread messages, not a member, muted, starred"):!l&&d&&!p&&!u&&h&&m&&b&&!_?n.t("has unread messages, not a member, muted, starred"):l&&!d&&!p&&!u&&h&&m&&b&&!_?n.t("current channel, not a member, muted, starred"):l||d||p||u||!h||!m||!b||_?l&&d&&p&&u&&!h&&m&&b&&!_?n.t("current channel, has unread messages and notifications, private, muted, starred"):!l&&d&&p&&u&&!h&&m&&b&&!_?n.t("has unread messages and notifications, private, muted, starred"):l&&!d&&p&&u&&!h&&m&&b&&!_?n.t("current channel, has notifications, private, muted, starred"):!l&&!d&&p&&u&&!h&&m&&b&&!_?n.t("has notifications, private, muted, starred"):l&&d&&!p&&u&&!h&&m&&b&&!_?n.t("current channel, has unread messages, private, muted, starred"):!l&&d&&!p&&u&&!h&&m&&b&&!_?n.t("has unread messages, private, muted, starred"):l&&!d&&!p&&u&&!h&&m&&b&&!_?n.t("current channel, private, muted, starred"):l||d||p||!u||h||!m||!b||_?l&&d&&p&&!u&&!h&&m&&b&&!_?n.t("current channel, has unread messages and notifications, muted, starred"):!l&&d&&p&&!u&&!h&&m&&b&&!_?n.t("has unread messages and notifications, muted, starred"):l&&!d&&p&&!u&&!h&&m&&b&&!_?n.t("current channel, has notifications, muted, starred"):l||d||!p||u||h||!m||!b||_?l&&d&&!p&&!u&&!h&&m&&b&&!_?n.t("current channel, has unread messages, muted, starred"):l||!d||p||u||h||!m||!b||_?!l||d||p||u||h||!m||!b||_?l||d||p||u||h||!m||!b||_?l&&d&&p&&u&&h&&!m&&b&&!_?n.t("current channel, has unread messages and notifications, private, not a member, starred"):!l&&d&&p&&u&&h&&!m&&b&&!_?n.t("has unread messages and notifications, private, not a member, starred"):l&&!d&&p&&u&&h&&!m&&b&&!_?n.t("current channel, has notifications, private, not a member, starred"):!l&&!d&&p&&u&&h&&!m&&b&&!_?n.t("has notifications, private, not a member, starred"):l&&d&&!p&&u&&h&&!m&&b&&!_?n.t("current channel, has unread messages, private, not a member, starred"):!l&&d&&!p&&u&&h&&!m&&b&&!_?n.t("has unread messages, private, not a member, starred"):l&&!d&&!p&&u&&h&&!m&&b&&!_?n.t("current channel, private, not a member, starred"):l||d||p||!u||!h||m||!b||_?l&&d&&p&&!u&&h&&!m&&b&&!_?n.t("current channel, has unread messages and notifications, not a member, starred"):!l&&d&&p&&!u&&h&&!m&&b&&!_?n.t("has unread messages and notifications, not a member, starred"):l&&!d&&p&&!u&&h&&!m&&b&&!_?n.t("current channel, has notifications, not a member, starred"):l||d||!p||u||!h||m||!b||_?l&&d&&!p&&!u&&h&&!m&&b&&!_?n.t("current channel, has unread messages, not a member, starred"):l||!d||p||u||!h||m||!b||_?!l||d||p||u||!h||m||!b||_?l||d||p||u||!h||m||!b||_?l&&d&&p&&u&&!h&&!m&&b&&!_?n.t("current channel, has unread messages and notifications, private, starred"):!l&&d&&p&&u&&!h&&!m&&b&&!_?n.t("has unread messages and notifications, private, starred"):l&&!d&&p&&u&&!h&&!m&&b&&!_?n.t("current channel, has notifications, private, starred"):l||d||!p||!u||h||m||!b||_?l&&d&&!p&&u&&!h&&!m&&b&&!_?n.t("current channel, has unread messages, private, starred"):l||!d||p||!u||h||m||!b||_?!l||d||p||!u||h||m||!b||_?l||d||p||!u||h||m||!b||_?l&&d&&p&&!u&&!h&&!m&&b&&!_?n.t("current channel, has unread messages and notifications, starred"):l||!d||!p||u||h||m||!b||_?!l||d||!p||u||h||m||!b||_?l||d||!p||u||h||m||!b||_?!l||!d||p||u||h||m||!b||_?l||!d||p||u||h||m||!b||_?!l||d||p||u||h||m||!b||_?l||d||p||u||h||m||!b||_?l&&d&&p&&u&&h&&m&&!b&&!_?n.t("current channel, has unread messages and notifications, private, not a member, muted"):!l&&d&&p&&u&&h&&m&&!b&&!_?n.t("has unread messages and notifications, private, not a member, muted"):l&&!d&&p&&u&&h&&m&&!b&&!_?n.t("current channel, has notifications, private, not a member, muted"):!l&&!d&&p&&u&&h&&m&&!b&&!_?n.t("has notifications, private, not a member, muted"):l&&d&&!p&&u&&h&&m&&!b&&!_?n.t("current channel, has unread messages, private, not a member, muted"):!l&&d&&!p&&u&&h&&m&&!b&&!_?n.t("has unread messages, private, not a member, muted"):l&&!d&&!p&&u&&h&&m&&!b&&!_?n.t("current channel, private, not a member, muted"):l||d||p||!u||!h||!m||b||_?l&&d&&p&&!u&&h&&m&&!b&&!_?n.t("current channel, has unread messages and notifications, not a member, muted"):!l&&d&&p&&!u&&h&&m&&!b&&!_?n.t("has unread messages and notifications, not a member, muted"):l&&!d&&p&&!u&&h&&m&&!b&&!_?n.t("current channel, has notifications, not a member, muted"):l||d||!p||u||!h||!m||b||_?l&&d&&!p&&!u&&h&&m&&!b&&!_?n.t("current channel, has unread messages, not a member, muted"):l||!d||p||u||!h||!m||b||_?!l||d||p||u||!h||!m||b||_?l||d||p||u||!h||!m||b||_?l&&d&&p&&u&&!h&&m&&!b&&!_?n.t("current channel, has unread messages and notifications, private, muted"):!l&&d&&p&&u&&!h&&m&&!b&&!_?n.t("has unread messages and notifications, private, muted"):l&&!d&&p&&u&&!h&&m&&!b&&!_?n.t("current channel, has notifications, private, muted"):l||d||!p||!u||h||!m||b||_?l&&d&&!p&&u&&!h&&m&&!b&&!_?n.t("current channel, has unread messages, private, muted"):l||!d||p||!u||h||!m||b||_?!l||d||p||!u||h||!m||b||_?l||d||p||!u||h||!m||b||_?l&&d&&p&&!u&&!h&&m&&!b&&!_?n.t("current channel, has unread messages and notifications, muted"):l||!d||!p||u||h||!m||b||_?!l||d||!p||u||h||!m||b||_?l||d||!p||u||h||!m||b||_?!l||!d||p||u||h||!m||b||_?l||!d||p||u||h||!m||b||_?!l||d||p||u||h||!m||b||_?l||d||p||u||h||!m||b||_?l&&d&&p&&u&&h&&!m&&!b&&!_?n.t("current channel, has unread messages and notifications, private, not a member"):!l&&d&&p&&u&&h&&!m&&!b&&!_?n.t("has unread messages and notifications, private, not a member"):l&&!d&&p&&u&&h&&!m&&!b&&!_?n.t("current channel, has notifications, private, not a member"):l||d||!p||!u||!h||m||b||_?l&&d&&!p&&u&&h&&!m&&!b&&!_?n.t("current channel, has unread messages, private, not a member"):l||!d||p||!u||!h||m||b||_?!l||d||p||!u||!h||m||b||_?l||d||p||!u||!h||m||b||_?l&&d&&p&&!u&&h&&!m&&!b&&!_?n.t("current channel, has unread messages and notifications, not a member"):l||!d||!p||u||!h||m||b||_?!l||d||!p||u||!h||m||b||_?l||d||!p||u||!h||m||b||_?!l||!d||p||u||!h||m||b||_?l||!d||p||u||!h||m||b||_?!l||d||p||u||!h||m||b||_?l||d||p||u||!h||m||b||_?!(l&&d&&p&&u)||h||m||b||_?l||!d||!p||!u||h||m||b||_?!l||d||!p||!u||h||m||b||_?l||d||!p||!u||h||m||b||_?!l||!d||p||!u||h||m||b||_?l||!d||p||!u||h||m||b||_?!l||d||p||!u||h||m||b||_?l||d||p||!u||h||m||b||_?!(l&&d&&p)||u||h||m||b||_?l||!d||!p||u||h||m||b||_?!l||d||!p||u||h||m||b||_?l||d||!p||u||h||m||b||_?!l||!d||p||u||h||m||b||_?l||!d||p||u||h||m||b||_?!l||d||p||u||h||m||b||_?"":n.t("current channel"):n.t("has unread messages"):n.t("current channel, has unread messages"):n.t("has notifications"):n.t("current channel, has notifications"):n.t("has unread messages and notifications"):n.t("current channel, has unread messages and notifications"):n.t("private"):n.t("current channel, private"):n.t("has unread messages, private"):n.t("current channel, has unread messages, private"):n.t("has notifications, private"):n.t("current channel, has notifications, private"):n.t("has unread messages and notifications, private"):n.t("current channel, has unread messages and notifications, private"):n.t("not a member"):n.t("current channel, not a member"):n.t("has unread messages, not a member"):n.t("current channel, has unread messages, not a member"):n.t("has notifications, not a member"):n.t("current channel, has notifications, not a member"):n.t("has unread messages and notifications, not a member"):n.t("private, not a member"):n.t("current channel, private, not a member"):n.t("has unread messages, private, not a member"):n.t("has notifications, private, not a member"):n.t("muted"):n.t("current channel, muted"):n.t("has unread messages, muted"):n.t("current channel, has unread messages, muted"):n.t("has notifications, muted"):n.t("current channel, has notifications, muted"):n.t("has unread messages and notifications, muted"):n.t("private, muted"):n.t("current channel, private, muted"):n.t("has unread messages, private, muted"):n.t("has notifications, private, muted"):n.t("not a member, muted"):n.t("current channel, not a member, muted"):n.t("has unread messages, not a member, muted"):n.t("has notifications, not a member, muted"):n.t("private, not a member, muted"):n.t("starred"):n.t("current channel, starred"):n.t("has unread messages, starred"):n.t("current channel, has unread messages, starred"):n.t("has notifications, starred"):n.t("current channel, has notifications, starred"):n.t("has unread messages and notifications, starred"):n.t("private, starred"):n.t("current channel, private, starred"):n.t("has unread messages, private, starred"):n.t("has notifications, private, starred"):n.t("not a member, starred"):n.t("current channel, not a member, starred"):n.t("has unread messages, not a member, starred"):n.t("has notifications, not a member, starred"):n.t("private, not a member, starred"):n.t("muted, starred"):n.t("current channel, muted, starred"):n.t("has unread messages, muted, starred"):n.t("has notifications, muted, starred"):n.t("private, muted, starred"):n.t("not a member, muted, starred"):n.t("has a draft message"):n.t("current channel, has a draft message"):n.t("has unread messages, has a draft message"):n.t("current channel, has unread messages, has a draft message"):n.t("has notifications, has a draft message"):n.t("current channel, has notifications, has a draft message"):n.t("has unread messages and notifications, has a draft message"):n.t("private, has a draft message"):n.t("current channel, private, has a draft message"):n.t("has unread messages, private, has a draft message"):n.t("has notifications, private, has a draft message"):n.t("not a member, has a draft message"):n.t("current channel, not a member, has a draft message"):n.t("has unread messages, not a member, has a draft message"):n.t("has notifications, not a member, has a draft message"):n.t("private, not a member, has a draft message"):n.t("muted, has a draft message"):n.t("current channel, muted, has a draft message"):n.t("has unread messages, muted, has a draft message"):n.t("has notifications, muted, has a draft message"):n.t("private, muted, has a draft message"):n.t("not a member, muted, has a draft message"):n.t("starred, has a draft message"):n.t("current channel, starred, has a draft message"):n.t("has unread messages, starred, has a draft message"):n.t("has notifications, starred, has a draft message"):n.t("private, starred, has a draft message"):n.t("not a member, starred, has a draft message"):n.t("muted, starred, has a draft message"))();return!t||g||f?t||g||!f?t&&!g&&f?n.t("{channelName}, previously {previousChannelName} ({context})",{channelName:e,previousChannelName:t,context:f}):t||!g||f?t&&g&&!f?n.t("{channelName}, previously {previousChannelName}, {workspaceDescription}",{channelName:e,workspaceDescription:g,previousChannelName:t}):!t&&g&&f?n.t("{channelName}, {workspaceDescription} ({context})",{channelName:e,workspaceDescription:g,context:f}):t&&g&&f?n.t("{channelName}, previously {previousChannelName}, {workspaceDescription} ({context})",{channelName:e,workspaceDescription:g,previousChannelName:t,context:f}):e||"":n.t("{channelName}, {workspaceDescription}",{channelName:e,workspaceDescription:g}):n.t("{channelName} ({context})",{channelName:e,context:f}):n.t("{channelName}, previously {previousChannelName}",{channelName:e,previousChannelName:t})}},G4eq:function(e,t,a){},G59f:function(e,t,a){},G7w5:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=a("XHGt"),o=(a("aK/h"),a("nNoG")),c=a("DOXe"),l=a("Fdc0"),d=a("h9PG"),p=a("t85p"),u=a("KD8n"),h=a("0f2Y"),m=a("lwWk"),b=a("Atrf"),_=a("llxT"),g=a("6avh"),f=a("RAhH"),v=a("XLFM"),O=a("rePB"),y=a("fujP"),C=a("5mKg");function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function E(e,t){var a=Object(C.m)(t);if(Object(y.a)(a))return[];var n=Object(l.J)(e);if(Object(y.a)(n))return[];var r=[];return a.forEach(e=>{if(!e.is_hidden){var t=n[e.id];t&&t.value&&r.push(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach(function(t){Object(O.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{alt:t.alt,value:t.value}))}}),r}var k=a("guIn");var S=a("ICFZ"),I=a("/m+M"),w=a("0rID"),T=a("TSYQ"),N=a.n(T),P=a("Rjct"),A=(a("LCkN"),{children:void 0,value:void 0,className:void 0});function M(e){var{children:t,label:a,value:n,className:i}=e,o=Object(r.useContext)(P.a);return a?s.a.createElement("div",{className:N()("p-member_profile_field",{"p-member_profile_field--keyboard":o},i)},s.a.createElement("div",{className:"p-member_profile_field__primary"},s.a.createElement("div",{className:"p-member_profile_field__label"},a),s.a.createElement("div",{className:"p-member_profile_field__value"},n)),t&&s.a.createElement("div",{className:"p-member_profile_field__secondary"},t)):null}M.defaultProps=A;var x=M,R=new o.b("member_profile"),D={member:void 0};function F(e){var t,a,{member:n}=e,[r,i]=Object(w.a)(!1,2e3),{featureModernProfileFlexpane:o}=Object(I.a)();if(!o)return null;r?(a="success",t=R.t("Copied!")):t=R.t("Copy");var c=Object(l.v)(n);return s.a.createElement(x,{label:R.t("Email address"),value:s.a.createElement(h.a,{href:"mailto:".concat(c)},c)},Object(S.a)()&&s.a.createElement(f.c,{status:a,tip:t,zIndex:"above_fs"},s.a.createElement(v.d,{"aria-label":R.t("Copy Email Address"),onClick:()=>{Object(S.c)(c),i(!0)},icon:"all-files",type:"outline"})))}F.defaultProps=D;var L=F,U=a("2olY"),B=a("2Inn"),H=a("od5y"),W=a("ENxx"),q=a("rGr5"),G=(a("QSlP"),new o.b("member_profile")),K={member:void 0,memberPhoneNumber:void 0,onClick:n.a,isCallMenuEnabled:!1,startCall:n.a};function V(e){var{memberPhoneNumber:t,onClick:a,isCallMenuEnabled:n,startCall:i,member:o}=e,[c,l]=Object(r.useState)(!1),d=Object(r.useCallback)(()=>l(!1),[]),p=Object(r.useCallback)(()=>l(!0),[]),u=Object(r.useCallback)(e=>{var{appId:t}=e;a(),i({appId:t})},[i,a]),h=n?t:s.a.createElement(m.a,{href:"tel:".concat(t),onClick:a},t);return s.a.createElement(x,{key:"phone",label:G.t("Phone number"),value:h,className:c&&"p-member_phone_field__menu_open"},n&&s.a.createElement(q.a,{onCloseMenuCallback:d,onMenuItemSelected:u,onRenderMenuCallback:p,member:o},s.a.createElement(v.d,{type:"outline",size:"medium",className:"p-member_phone_field__calls_button"},s.a.createElement("div",{className:"display_flex"},s.a.createElement(H.b,{type:"phone",className:"p-classic_nav__model__button__icon"}),s.a.createElement(H.b,{"data-qa":"call_icon_chevron_down",className:"p-classic_nav__model__button--chevron",type:"chevron_down",inline:!0})))))}V.defaultProps=K;var z=Object(i.b)((e,t)=>{var{member:a}=t,n=Object(W.d)(e),r=Object(U.b)(e),s=Object(l.D)(a);return{isCallMenuEnabled:Object(W.e)(r,n,s),memberPhoneNumber:s,member:a}},e=>({startCall:function(){e(Object(B.d)(...arguments))}}))(V),Y=a("M+5u"),Q=a("XL7r"),X=a("NYp8"),J=new o.b("member_profile");var Z={member:void 0,time24:!1};function $(e){var{member:t,time24:a}=e,[n,i]=Object(r.useState)();return Object(X.a)(()=>{i(function(e,t){return Object(Y.a)(Date.now(),{timeZone:Object(l.Q)(e),timeZoneOffset:Object(l.R)(e),do24hrTime:t})}(t,a))}),s.a.createElement(x,{label:J.t("Local time"),value:n})}$.defaultProps=Z;var ee=Object(i.b)(function(e){return{time24:Object(Q.k)(e,"time24")}})($),te=a("CPJ1"),ae=a("cD5Y"),ne=a("zmn3"),re=a("Z0Cl"),se=a("1zbP"),ie=a("B/i4"),oe=a("4M+g"),ce=a("vPEJ"),le=new o.b("member_profile"),de={channels:void 0};function pe(e){var{channels:t}=e,{featureModernProfileFlexpane:a}=Object(I.a)();if(!a)return null;var n=Object(re.a)(t,se.b);return Object(y.a)(n)?le.t("None"):s.a.createElement("ul",{className:"p-member_profile_field__list"},n.map(e=>s.a.createElement("li",{key:e.id,className:"p-member_profile_field__list_item"},s.a.createElement(h.a,{href:Object(ie.a)({channelId:e.id})},s.a.createElement(ce.a,{channelId:e.id,className:"cursor_pointer",iconProps:{inherit:!0}})))))}pe.defaultProps=de;var ue=Object(i.b)(function(e,t){var{channelIds:a}=t;return{channels:Object(ne.a)(a,t=>Object(oe.e)(e,t))}})(pe);function he(e){var{fetchMemberProfileExtras:t,member:a}=e,[n,s]=Object(r.useState)(!1),[i,o]=Object(r.useState)([]);return Object(r.useEffect)(()=>{var e;Object(l.Gb)(a)?e=["channels"]:Object(l.tb)(a)&&(e=["shared_channels"]),e&&(s(!0),t({keys:e,userId:a.id,reason:"useProfileExtras"}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(e.channels||e.shared_channels)}).finally(()=>{s(!1)}))},[t,a]),{extras:i,isLoading:n}}var me=new o.b("member_profile"),be={fetchMemberProfileExtras:n.a,member:void 0};function _e(e){var{fetchMemberProfileExtras:t,member:a}=e,{extras:n,isLoading:r}=he(t),{featureModernProfileFlexpane:i}=Object(I.a)();return i?s.a.createElement(x,{label:me.t("Shared Channels"),value:r?s.a.createElement(ae.a,{size:"small",inline:!0}):s.a.createElement(ue,{channelIds:n})}):null}_e.defaultProps=be;var ge={fetchMemberProfileExtras:function(){return Object(te.e)(...arguments)}},fe=Object(i.b)(null,ge)(_e),ve=a("UF3u"),Oe=a("9soY"),ye=a("G4ux"),Ce=a("1hAG"),je=new o.b("member_profile"),Ee={teams:void 0};function ke(e){var{teams:t}=e,{featureModernProfileFlexpane:a}=Object(I.a)();if(!a)return null;var n=Object(re.a)(t,se.b);return Object(y.a)(n)?je.t("None"):s.a.createElement("ul",{className:"p-member_profile_field__list"},n.map(e=>s.a.createElement("li",{key:e.id,className:"p-member_profile_field__list_item"},Object(C.e)(e))))}ke.defaultProps=Ee;var Se=Object(i.b)(function(e,t){var{teamIds:a}=t;return{teams:Object(ne.a)(a,t=>Object(Ce.i)(e,t))}})(ke),Ie=new o.b("member_profile");var we={fetchAndUpsertTeamsFromAPI:n.a,sharedTeamIds:void 0};function Te(e){var{fetchAndUpsertTeamsFromAPI:t,sharedTeamIds:a}=e,{isLoading:n}=function(e,t){var[a,n]=Object(r.useState)(!1);return Object(r.useEffect)(()=>{Object(y.a)(t)||(n(!0),e({ids:t,reason:"MemberSharedWorkspacesField"}).finally(()=>n(!1)))},[e,t]),{isLoading:a}}(t,a),{featureModernProfileFlexpane:i}=Object(I.a)();if(!i)return null;var o=n?s.a.createElement(ae.a,{size:"small",inline:!0}):s.a.createElement(Se,{teamIds:a});return s.a.createElement(x,{label:Ie.t("Shared Workspaces"),value:o})}Te.defaultProps=we;var Ne=s.a.memo(Te,(e,t)=>Object(ve.a)(t,e,2));var Pe={fetchAndUpsertTeamsFromAPI:function(){return Object(Oe.b)(...arguments)}},Ae=Object(i.b)(function(e,t){var{member:a}=t,n=Object(ye.b)(e);return{sharedTeamIds:Object(l.U)(a,n)}},Pe)(Ne),Me=new o.b("member_profile"),xe={member:void 0};function Re(e){var{member:t}=e,{featureModernProfileFlexpane:a}=Object(I.a)();if(!a)return null;var n=Object(l.x)(t);return n?s.a.createElement(x,{key:"invited_by",label:Me.t("Invited By"),value:s.a.createElement(b.a,{id:n})}):null}Re.defaultProps=xe;var De=Re,Fe=a("WhMD"),Le=a("rsVu"),Ue=new o.b("member_profile"),Be={member:void 0};function He(e){var{member:t}=e,{featureModernProfileFlexpane:a}=Object(I.a)();if(!a)return null;var n=Object(l.w)(t);return n?s.a.createElement(x,{label:Ue.t("Member Until"),value:Ue.t("{date} at {time}",{date:Object(Fe.a)(n),time:Object(Le.a)(n)})}):null}He.defaultProps=Be;var We=He,qe=new o.b("member_profile"),Ge={currentMemberIsAdmin:!1,fetchMemberProfileExtras:n.a,member:void 0,team:void 0};function Ke(e){var{currentMemberIsAdmin:t,fetchMemberProfileExtras:a,member:n,team:r}=e,{extras:i,isLoading:o}=he({fetchMemberProfileExtras:a,member:n}),{featureModernProfileFlexpane:c}=Object(I.a)();if(!c)return null;var d=o?s.a.createElement(ae.a,{size:"small",inline:!0}):s.a.createElement(ue,{channelIds:i});return s.a.createElement(x,{key:"channels",label:qe.t("Channels"),value:d},Object(l.Gb)(n)&&t&&s.a.createElement(f.c,{tip:qe.t("Manage")},s.a.createElement(v.d,{"aria-label":qe.t("Manage Guest Channels"),href:"".concat(Object(C.n)(r),"admin?#restricted"),icon:"filters",type:"outline"})))}Ke.defaultProps=Ge;var Ve={fetchMemberProfileExtras:function(){return Object(te.e)(...arguments)}},ze=Object(i.b)(function(e){return{currentMemberIsAdmin:Object(l.eb)(e,Object(ye.b)(e))}},Ve)(Ke);a.d(t,"a",function(){return Ye});var Ye={CUSTOM:"custom",EMAIL:"email",PHONE:"phone",STATUS:"status",TIME:"time",NAME:"name",CHANNELS:"channels",SHARED_WORKSPACES:"shared_workspaces",GUEST:"guest"},Qe=new o.b("member_profile"),Xe={hasStatus:!1,isEnterprise:!1,member:void 0,onClick:n.a,openCustomStatusDialog:n.a,prefDisplayEmailAddresses:!1,team:void 0};class member_profile_fields_MemberProfileFields extends r.Component{getProfileLinkHTML(e,t){return s.a.createElement(m.a,{href:e,onClick:this.props.onClick,target:"_blank",title:e},t||e)}getProfileUserFieldHTML(e){var t=e.split(/\s*,\s*/).map(e=>s.a.createElement(b.a,{id:e}));return Object(o.k)(t,{noConj:!0,react:!0})}getVisibleTeamProfileFieldsForMember(){var{member:e,team:t}=this.props;return E(e,t).map(e=>{var t,a;if("date"===e.type)t=Object(c.a)(e.value),a=e.value;else if("user"===e.type)a=this.getProfileUserFieldHTML(e.value);else if("link"===e.type)a=this.getProfileLinkHTML(e.value,e.alt||e.label);else if(function(e){return e&&"text"===e.type&&"skype"===e.label.toLowerCase()}(e)){var n="skype:".concat(e.value,"?call");a=this.getProfileLinkHTML(n,e.value)}else t=e.alt,a=e.value;return{alt:t,id:e.id,label:e.label,value:a}})}render(){var{featureModernProfileFlexpane:e,hasStatus:t,isEnterprise:a,member:n,onClick:r,prefDisplayEmailAddresses:i,team:o,types:c}=this.props;if(!e)return null;var d=[];return c.forEach(e=>{if(e===Ye.EMAIL&&(i||Object(l.Hb)(n))){var c=Object(l.v)(n);Object(k.a)(c)&&d.push(s.a.createElement(L,{key:"email",member:n}))}else if(e===Ye.PHONE){var p=Object(l.D)(n);Object(k.a)(p)&&d.push(s.a.createElement(z,{key:"phone",member:n,onClick:r}))}else if(e===Ye.STATUS){var u;if(t){var m=s.a.createElement(g.b,{animated:!0,className:"p-member_profile_field__status",memberId:n.id,tooltip:!1});u=Object(l.Hb)(n)?s.a.createElement(f.c,{tip:Qe.t("Edit")},s.a.createElement(_.a,{onClick:()=>{r(),this.props.openCustomStatusDialog()},tabIndex:-1},m,s.a.createElement(g.a,{className:"p-member_profile_field__status_expiration",memberId:n.id}))):m}else Object(l.Hb)(n)&&(u=s.a.createElement(h.a,{className:"p-member_profile_field__interactable",onClick:()=>{r(),this.props.openCustomStatusDialog()}},Qe.t("Set a status")));u&&d.push(s.a.createElement(x,{key:"status",label:Qe.t("Status"),value:u},Object(l.Hb)(n)&&t&&s.a.createElement(f.c,{tip:Qe.t("Edit"),zIndex:"above_fs"},s.a.createElement(v.d,{"aria-label":Qe.t("Edit Custom Status"),onClick:()=>{r(),this.props.openCustomStatusDialog()},icon:"pencil",type:"outline"}))))}else if(e!==Ye.TIME||Object(l.Ib)(n))if(e===Ye.NAME){var b=Object(l.F)(n);Object(k.a)(b)&&d.push(s.a.createElement(x,{key:"name",label:Qe.t("Display name"),value:b}))}else if(e===Ye.CUSTOM){this.getVisibleTeamProfileFieldsForMember().forEach(e=>{Object(k.a)(e.value)&&d.push(s.a.createElement(x,{key:e.id,label:e.label,value:e.alt||e.value}))})}else e===Ye.SHARED_CHANNELS?Object(l.tb)(n)&&d.push(s.a.createElement(fe,{key:Ye.SHARED_CHANNELS,member:n})):e===Ye.SHARED_WORKSPACES?a&&d.push(s.a.createElement(Ae,{key:Ye.SHARED_WORKSPACES,member:n})):e===Ye.GUEST&&Object(l.Gb)(n)&&d.push(s.a.createElement(De,{key:"guest-invited",member:n}),s.a.createElement(We,{key:"guest-until",member:n}),s.a.createElement(ze,{key:"guest-channels",member:n,team:o}));else d.push(s.a.createElement(ee,{key:"time",member:n}))}),s.a.createElement("div",null,d)}}member_profile_fields_MemberProfileFields.defaultProps=Xe;var Je={openCustomStatusDialog:function(){return Object(u.a)(...arguments)}};t.b=Object(i.b)(function(e,t){var{member:a}=t;return{hasStatus:Object(l.ab)(a),isEnterprise:Object(p.q)(e),prefDisplayEmailAddresses:Object(d.a)(e,"display_email_addresses"),featureModernProfileFlexpane:Object(p.m)(e,"feature_modern_profile_flexpane")}},Je)(member_profile_fields_MemberProfileFields)},GXNc:function(e,t,a){},GZud:function(e,t,a){},GdkL:function(e,t,a){},GhVE:function(e,t,a){},Gmrf:function(e,t,a){"use strict";a.d(t,"b",function(){return d});var n=a("aK/h"),r=a("EzZj"),s=a("MNvw"),i=a("lhZz"),o=a("Z7Ay"),c=Object(r.b)("Stores an Error object");c.meta={name:"setLastError",key:"appSonicReduxErrorStoreSetLastError",description:"Stores an Error object"},c.propTypes=n.default.string;var l=Object(s.b)({[c]:(e,t)=>({lastError:t})},{lastError:null},{storeKey:"error",persistenceEnabled:!1});l.meta={name:"error",key:"appSonicReduxErrorStoreError"},l.propTypes={lastError:n.default.object};var d=e=>e&&e.error&&e.error.lastError;t.a=l,Object(o.a)("setLastError",(e,t)=>{Object(i.dispatchForTeamId)(e,c(t))})},GoIT:function(e,t,a){},H3xq:function(e,t,a){"use strict";var n=a("rePB"),r=a("F294"),s=a("XHGt"),i=a("kOzZ"),o=a("yHhI"),c=a("jLdI"),l=a("NuWb"),d=a("fYfO"),p=a("qnZ7"),u=a("0wDQ"),h=a("AUAP"),m=a("G4ux"),b=a("brL+"),_=a("1hAG"),g=a("4M+g"),f=a("uvIC"),v=a("XL7r"),O=a("Uk1S"),y=a("pfyZ"),C=a("ULIY"),j=a("h0LD"),E=a("0sSB"),k=a("IxGy"),S=a("t85p"),I=a("BUzq"),w=a("6kok"),T=a("hOQf"),N=a("Q+UV"),P=a("Bekf"),A=a("mVkb"),M=a("Smdl"),x=a("wx14"),R=a("fujP"),D=a("x91h"),F=a("qAkX"),L=a("S1sa"),U=a("Z0Cl"),B=a("CpTu"),H=a("ifKl"),W=a("zmn3"),q=(a("aK/h"),a("q1tI")),G=a.n(q),K=a("TSYQ"),V=a.n(K),z=a("8dKT"),Y=a("HHn2"),Q=a("Jnln"),X=a("YmYS"),J=a("C9/x"),Z=(a("yPgC"),a("aLpA")),$=a("vSXf"),ee=a("lfjV"),te=a("t3QL"),ae=a("VymY"),ne=a("rsVu"),re=a("tqVr"),se=a("UF3u"),ie=a("nNoG"),oe=a("HOOb"),ce=a("uQ8d"),le=a("EHyS"),de=a("s19S"),pe=a("gtcZ"),ue=a("ubOb"),he=a("XLFM"),me=a("lV3N"),be=a("3dqR"),_e=a("oqAd"),ge=a("lek6"),fe=a("RAhH"),ve=a("FXaq"),Oe=a("VwYs"),ye=a("m36V"),Ce=a("cAy8"),je=a("od5y"),Ee=a("3fyd"),ke=a("CaXY"),Se=a("Aeia"),Ie=a("y7mK"),we=a("qYtJ"),Te=a("NvKv"),Ne=a("y/l/"),Pe=a("Wzrj"),Ae=a("yk+1"),Me=a("RjVJ"),xe=a("ALaB"),Re=a("0gKA"),De=a("Y6eO"),Fe=a("xUg9"),Le=a("HvGc"),Ue=a("kcos"),Be=a("2ojh"),He=a("tMdt"),We=a("Atrf"),qe=new ie.b("message"),Ge={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled"},Ke={isVisible:!1,isPinned:!1,isStarred:!1,isEphemeral:!1,isCustomResponse:!1,isSliHighlight:!1,isSelfIm:!1,isSlackbotIm:!1,primaryType:void 0,sliHighlight:void 0,isHovered:!1,channelId:void 0,ts:void 0,currentUserId:void 0,pinnedByMemberId:void 0,showStarredItemsList:H.a,isIAP1Enabled:!1};class message_label_MessageLabel extends q.PureComponent{static getDerivedStateFromProps(e,t){var{currentUserId:a,pinnedByMemberId:n,isPinned:r,isStarred:s,featureContextualMessageShortcuts:i,isIAP1Enabled:o}=e;if(!i)return null;if(n===a){if(!t.isPinnedByCurrentUser&&r)return{isPinnedByCurrentUser:!0,ariaLiveMessage:qe.t("Added to the pinned items",{note:"Used to confirm the pin action for customers using screen readers. Not visible on screen."})};if(t.isPinnedByCurrentUser&&!r)return{isPinnedByCurrentUser:!1,ariaLiveMessage:qe.t("Removed from the pinned items",{note:"Used to confirm the remove pin action for customers using screen readers. Not visible on screen."})}}return!t.isStarred&&s?{isStarred:!0,ariaLiveMessage:o?"Added to your saved items":qe.t("Added to your starred items",{note:"Used to confirm the star action for customers using screen readers. Not visible on screen."})}:t.isStarred&&!s?{isStarred:!1,ariaLiveMessage:o?"Removed from your saved items":qe.t("Removed from your starred items",{note:"Used to confirm the remove star action for customers using screen readers. Not visible on screen."})}:null}constructor(e){super(e),this.renderHighlight=this.renderHighlight.bind(this),this.renderStarButton=this.renderStarButton.bind(this),this.state={isPinnedByCurrentUser:!1,isStarred:!1,ariaLiveMessage:void 0}}componentDidUpdate(){this.eventuallyRemoveAriaLiveMessage()}componentWillUnmount(){this.timerId&&clearTimeout(this.timerId)}eventuallyRemoveAriaLiveMessage(){this.state.ariaLiveMessage&&(this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.setState(()=>({ariaLiveMessage:void 0})),this.timerId=null},3e3))}renderHighlight(){var{sliHighlight:e,channelId:t,ts:a,isHovered:n}=this.props;return Object(y.i)(e)?G.a.createElement(He.a,{channelId:t,ts:a,isHovered:n,sliHighlight:e}):null}renderPinnedBy(e){return G.a.createElement(We.a,{id:e,className:"c-message__label_link"})}renderStarButton(e){var{text:t}=e;return G.a.createElement(he.c,{onClick:this.props.showStarredItemsList,className:"c-message__label_button"},t)}renderGutter(){var{primaryType:e,featureSonicInputs:t,isIAP1Enabled:a}=this.props,n=Ge[e];a&&"starred"===e&&(n="bookmark-filled");var r=V()("c-message__label__gutter",{"c-message__label__gutter--feature_sonic_inputs":t});return G.a.createElement("div",{className:r},n&&G.a.createElement(je.b,{type:n,className:"c-message__label__icon",size:"inherit",inline:!0}))}render(){var{isPinned:e,isStarred:t,isEphemeral:a,isCustomResponse:n,isSliHighlight:r,isSelfIm:s,isSlackbotIm:i,isVisible:o,currentUserId:c,pinnedByMemberId:l,isIAP1Enabled:d}=this.props,p=Object(Be.a)({isPinned:e,isStarred:t,isEphemeral:a,isCustomResponse:n,isSliHighlight:r,isSelfIm:s,isSlackbotIm:i,isIAP1Enabled:d,currentUserId:c,pinnedBy:l,renderHighlight:this.renderHighlight,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton}),u=o&&p?G.a.createElement("div",{className:"c-message__label"},this.renderGutter(),G.a.createElement("div",{className:"c-message__label__text"},p)):void 0;return G.a.createElement(G.a.Fragment,null,u,G.a.createElement("div",{className:"c-message__visually_hidden_label","aria-live":"assertive"},this.state.ariaLiveMessage))}}message_label_MessageLabel.defaultProps=Ke;var Ve=Object(s.b)(e=>({featureSonicInputs:Object(S.m)(e,"feature_sonic_inputs"),featureContextualMessageShortcuts:Object(S.m)(e,"feature_contextual_message_shortcuts"),isIAP1Enabled:Object(Ue.d)(e)}),e=>({showStarredItemsList:function(){return e(Object(Le.k)(...arguments))}}))(message_label_MessageLabel);a("67Ky");function ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ze(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Qe=new ie.b("message"),Xe=200,Je=20,Ze=10,$e="theme_install_button",et={quote:!0,pre:!0},tt={logger:{info:H.a,warn:H.a,error:H.a},message:null,ts:null,messageNotFound:!1,channelId:void 0,text:null,noSpecials:!1,alertType:null,subtype:null,theme:"light",userId:null,botId:null,appId:null,username:null,hasAdHocSender:!1,reactionKey:null,reactionKeyForInitialFileComment:null,replies:[],replyCount:0,replyUsers:[],replyUsersCount:0,latestReply:null,threadsEverythingPref:null,expandInlineImgsPref:!1,expandNonMediaAttachmentsPref:!1,threadTs:null,attachments:[],fileId:null,fileIds:null,comment:null,isUpload:!1,showUser:!0,isFileFollowup:!1,isEditing:!1,isHovered:!1,maybeStartEditingMessage:H.a,edited:null,isLast:!1,latestMessageTsWithReactions:null,rollup:null,logMessage:H.a,setUnreadPoint:H.a,isStarred:!1,isStandalone:!1,isPinned:!1,currentUserId:void 0,pinnedByMemberId:void 0,sliHighlight:null,isEphemeral:!1,isRichTextMessage:!1,shouldRenderBlocks:!1,isDeleting:!1,icons:null,botProfile:null,slackbotFeels:null,fadeAwayHighlight:!1,doneHighlighting:H.a,isUnprocessed:!1,showResend:!1,showCancel:!1,sourceTeamId:"",resendMsg:H.a,removeMsg:H.a,shouldJumpToTimestamp:!1,isSelfIm:!1,isSlackbotIm:!1,isTombstonedMessage:!1,isUnknown:!1,isEKMError:!1,featureAttachmentsV2:!1,teamDomain:void 0,channelSessionId:null,previousMessageIsPinned:void 0,previousMessageIsEphemeral:void 0,previousMessageIsStarred:void 0,previousMessageSubtype:void 0,previousMessageSliHighlight:void 0,previousMessagePinnedByMemberId:void 0,renderActions:!1,renderActionsOffscreen:!1,messageContainerType:void 0,ariaAssertive:void 0,blocks:void 0,serviceTeamId:void 0,featureSonicInputs:!1,clogMessageClick:H.a,clogUserClick:H.a,isThreadExpanded:!1,threadListId:void 0,showThreadIfThreadable:H.a,blocksContainerContext:ke.a.message,hasKeyboardFocusWithin:!1,onFocus:H.a,onBlur:H.a,parentId:void 0};class message_Message extends q.PureComponent{constructor(e){super(e),this.setRef=this.setRef.bind(this),this.onContainerClick=this.onContainerClick.bind(this),this.onTimestampClick=this.onTimestampClick.bind(this),this.startEditing=this.startEditing.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onMenuToggle=this.onMenuToggle.bind(this),this.startHighlightingTimer=this.startHighlightingTimer.bind(this),this.onDoneHighlighting=this.onDoneHighlighting.bind(this),this.onDeleteAnimationTick=this.onDeleteAnimationTick.bind(this),this.onDeleteAnimationEnd=this.onDeleteAnimationEnd.bind(this),this.resendMsg=this.resendMsg.bind(this),this.removeMsg=this.removeMsg.bind(this),this.formatInlineAttachmentMaybe=this.formatInlineAttachmentMaybe.bind(this),this.formatThemeInstallButton=this.formatThemeInstallButton.bind(this),this.customFormatHandler=this.customFormatHandler.bind(this),this.customContentHandler=this.customContentHandler.bind(this),this.clogLinkClick=this.clogLinkClick.bind(this),this.clogUserClick=this.clogUserClick.bind(this),this.shouldShowAttachment=this.shouldShowAttachment.bind(this),this.messageRef=null,this.deleteAnimation=null,this.hasDisplayedContent=!0,this.inlineAttachmentsKey=0,this.setAttachmentsSorted(),this.state={isHovered:e.isHovered,actionsMenuOpen:!1,height:null}}componentDidMount(){this.props.fadeAwayHighlight&&this.startHighlightingTimer(),this.isDeleting()&&this.onDeleteAnimationEnd()}componentWillUnmount(){this.highlightTimer&&(clearTimeout(this.highlightTimer),this.onDoneHighlighting()),this.deleteAnimation&&(this.deleteAnimation.cancel(),this.onDeleteAnimationEnd())}onContainerClick(e){if(e.shiftKey&&Object(le.a)(e)&&!Object(oe.a)(e.target))return e.stopPropagation(),void this.props.logMessage({channelId:this.props.channelId,ts:this.props.ts});e.altKey&&(e.preventDefault(),this.props.setUnreadPoint({channelId:this.props.channelId,unreadTs:this.props.ts}))}onDeleteAnimationEnd(){this.removeMsg(),this.deleteAnimation=null}onDeleteAnimationTick(e){var{value:t,nextTick:a}=e;this.messageRef&&this.setState(()=>({height:t}),a)}onDoneHighlighting(){this.props.doneHighlighting(),this.highlightTimer=null}onMenuToggle(e){e?this.setState(()=>({actionsMenuOpen:e})):setTimeout(()=>{this.setState(()=>({actionsMenuOpen:!1}))},100)}onMouseEnter(){this.setState(()=>({isHovered:!0}))}onMouseLeave(){this.setState(()=>({isHovered:!1}))}onTimestampClick(e){e.preventDefault(),this.props.shouldJumpToTimestamp&&Object(de.q)(this.props.channelId,this.props.ts,this.props.threadTs)}getResendText(){var{isEKMError:e}=this.props;return e?Qe.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel."):Qe.t("Slack couldn\u2019t send this message")}getTextWithThemes(){if(!this.props.text)return this.props.text;return this.props.text.replace(/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){7})(#[A-Fa-f0-9]{6})(\b)/g,e=>"".concat(e," <").concat($e,"|").concat(e,">"))}setAttachmentsSorted(){var{attachments:e,text:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,[a,n]=Object(L.a)(Object(W.a)(Object(U.a)(e,this.shouldShowAttachment),te.b),e=>this.isInlineImage(e,t));this.attachmentsInline&&a&&!Object(se.a)(this.attachmentsInline,a,2)&&(this.inlineAttachmentsKey+=1),this.attachmentsInline=a,this.attachmentsBelow=n}setRef(e){this.messageRef=e}UNSAFE_componentWillReceiveProps(e){var{fadeAwayHighlight:t}=this.props;e.fadeAwayHighlight&&!t&&this.startHighlightingTimer(),this.isDeleting(e)&&!this.isDeleting()&&this.startDeleteAnimation(),this.setAttachmentsSorted(e),this.setState(()=>({isHovered:e.isHovered}))}clogLinkClick(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{ts:t,channelId:a,userId:n,botId:r}=this.props,s={ts:t,user:n,channel:a,bot_id:r},i=Ye({},e,{request_id:null});"user_link"===e.type?this.props.clogUserClick({msg:s,payload:i}):this.props.clogMessageClick({msg:s,payload:i})}clogUserClick(e){this.clogLinkClick(Ye({type:"user_link"},e))}componentDidCatch(e){this.setState(()=>({caughtError:!0}));var t=e?e.message:"",a=e?e.stack:"",n=this.props||{},r=n.channel&&n.channelId,s=n.logger;s.error("Message componentDidCatch: ".concat(n.subtype," ").concat(n.ts," in ").concat(r,", ").concat(t)),a&&s.error(a)}customContentHandler(e){var{edited:t}=this.props;if(t){var a=Object(F.a)(e)||{};e.push({type:"custom_edited_label",omitWhitespace:!!et[a.type]})}return this.hasDisplayedContent=!!e.length,e}customFormatHandler(e){var t,{item:a,getDefaultOutput:n}=e;return"link"===a.type?t=a.url===$e?this.formatThemeInstallButton(e):this.formatInlineAttachmentMaybe(e):"custom_edited_label"===a.type&&(t=this.renderEditedLabel({omitWhitespace:a.omitWhitespace})),t||n()}focusFirst(e){this.focusNode(Object(ae.b)(e))}focusLast(e){this.focusNode(Object(ae.c)(e))}focusNode(e){e&&document.activeElement!==e&&(e.focus(),e.classList.add("focus-ring"))}formatInlineAttachmentMaybe(e){var{item:t,getDefaultOutput:a}=e,{ts:n,channelId:r,sourceTeamId:s}=this.props,{url:i}=t,o=Object(B.a)(this.attachmentsInline,{fromUrl:Object(D.a)(i)});return o?G.a.createElement(q.Fragment,null,a(),G.a.createElement(me.a,Object(x.a)({},o,{messageTs:n,activeChannelId:r,sourceTeamId:s,clogLinkClick:this.clogLinkClick,botProfile:this.props.botProfile,isInline:!0}))):a()}formatThemeInstallButton(e){var{item:t}=e,a=t.contents[0].text.replace(/\s/g,"").split(",");return G.a.createElement("div",{className:"c-message__theme_button_container"},G.a.createElement(Fe.a,{colors:a,clogLinkClick:this.clogLinkClick}))}isDeleting(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,{isDeleting:t,isStandalone:a}=e;return t&&!a}isInlineImage(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.text;return t&&-1!==Object(D.a)(t).indexOf(e.fromUrl)&&Object(ve.l)(e)}isThreadRootTombstone(){return"tombstone"===this.props.subtype}removeMsg(){var{ts:e,channelId:t,messageContainerType:a,subtype:n}=this.props,r="thread_broadcast"===n&&a===Z.I.THREADS_FLEXPANE;this.props.removeMsg({channelId:t,ts:e,broadcastDelete:r})}resendMsg(){var{ts:e,channelId:t}=this.props;this.props.resendMsg(t,e)}shouldShowAttachment(e){var{text:t,blocks:a,subtype:n,isStandalone:r,expandInlineImgsPref:s,expandNonMediaAttachmentsPref:i,isRichTextMessage:o}=this.props;return Object(Q.g)({attachment:e,messageText:t,messageBlocks:a,messageSubtype:n,messageIsStandalone:r,expandInlineImgsPref:s,expandNonMediaAttachmentsPref:i,isRichTextMessage:o})}shouldShowMessageLabel(e){var{labelTypes:t}=e,{showUser:a,isFileFollowup:n,pinnedByMemberId:r,previousMessageIsStarred:s,previousMessageIsPinned:i,previousMessageIsEphemeral:o,previousMessageSubtype:c,previousMessageSliHighlight:l,previousMessagePinnedByMemberId:d}=this.props;if(Object(R.a)(t))return!1;if(t.sliHighlight)return!0;if(!a||n){var p=Object(J.a)({isStarred:s,isPinned:i,isEphemeral:o,subtype:c,sliHighlight:l});if(Object(se.a)(t,p))return t.isPinned&&p.isPinned&&d!==r}return!0}shouldShowResendControls(){var{showResend:e,showCancel:t}=this.props;return e||t}startDeleteAnimation(){if(this.messageRef){var e=this.messageRef.clientHeight;this.deleteAnimation=Object(ee.a)({fromValue:e,toValue:0,duration:Xe,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}}startEditing(){var{maybeStartEditingMessage:e,channelId:t,ts:a}=this.props;e({channelId:t,ts:a,scroll:!0})}startHighlightingTimer(){this.highlightTimer||(this.highlightTimer=setTimeout(this.onDoneHighlighting,4500))}renderActions(){var{ts:e,reactionKey:t,fileId:a,fileIds:n,comment:r,replies:s,replyCount:i,rollup:o,threadsEverythingPref:c,threadTs:l,channelId:d,subtype:p,isStarred:u,isPinned:h,isEphemeral:m,isDeleting:b,isStandalone:_,isUnknown:g,setUnreadPoint:f,theme:v,renderActions:O,renderActionsOffscreen:y,messageContainerType:C,hasKeyboardFocusWithin:j,parentId:E}=this.props,{actionsMenuOpen:k,isHovered:S}=this.state;if(!e||!d)return null;var I=y&&!j&&!S&&!O;return k||S||j||I||O?b||_||g?null:G.a.createElement(Re.a,{reactionKey:t,fileId:a,fileIds:n,comment:r&&r.id,replies:s,replyCount:i,rollup:o,ts:e,threadsEverythingPref:c,threadTs:l,channelId:d,subtype:p,isStarred:u,isPinned:h,isEphemeral:m,editHandler:this.startEditing,unreadHandler:f,onMenuOpen:()=>this.onMenuToggle(!0),onMenuClose:()=>this.onMenuToggle(!1),onEmojiPickerOpen:()=>this.onMenuToggle(!0),onEmojiPickerClose:()=>this.onMenuToggle(!1),theme:v,renderOffscreen:I,messageContainerType:C,parentId:E}):null}renderAttachments(){var{ts:e,channelId:t,blocks:a,text:n,blocksContainerContext:r,sourceTeamId:s}=this.props,{attachmentsBelow:i}=this;if(!i||!i.length)return null;var o=Je,c=Object(W.a)(i,(i,c)=>{var l=i.id||c+1,d=i.botId||this.props.botId;return i.blocks&&(o=Ze),G.a.createElement(me.a,Object(x.a)({},i,{service:d,messageTs:e,activeChannelId:t,sourceTeamId:s,key:l,clogLinkClick:this.clogLinkClick,botProfile:this.props.botProfile,isOnlyMessageContent:!this.hasDisplayedContent||!a&&!n,blocksContainerContext:r}))}),l=c.splice(o);return G.a.createElement("div",{className:"c-message__attachments"},c,this.renderAttachmentsOverLimitMaybe(l,o))}renderAttachmentsOverLimitMaybe(e,t){if(!e.length)return null;var{featureAllyBugbash:a}=this.props,n={useAttachmentRules:!1,shouldBeExpandedByDefault:!1,expandableKey:Object(Y.a)("attachmentsOverLimit",this.props.ts,{limit:t})},r=e.length-t,s=a?{"aria-label":Qe.t("{remainingAttachments, plural, =1 {Toggle attachment} other {Toggle additional {remainingAttachments} attachments}}",{remainingAttachments:r,note:"the label for the button that expands/collapses addtional message attachments, describes the button for customers using screen readers"})}:{};return G.a.createElement("div",null,G.a.createElement(Oe.a,Object(x.a)({},n,s),e),G.a.createElement(ye.a,Object(x.a)({},n,{render:(t,a)=>G.a.createElement(Ce.a,{isExpanded:t.isExpanded,onClick:a,attachmentsOverLimitCount:e.length})})))}renderAutomatedSubtype(){return G.a.createElement(Ae.a,{subtype:this.props.subtype,channelId:this.props.channelId,timestamp:this.props.ts})}renderAvatar(){if(this.isThreadRootTombstone())return G.a.createElement("div",{className:"c-message__tombstone_icon"},G.a.createElement(je.a,{type:"trash",align:"top"}));var{userId:e,hasAdHocSender:t,botId:a,botProfile:n,isStandalone:r,icons:s,slackbotFeels:i,isTombstonedMessage:o,isUnknown:c}=this.props;return G.a.createElement(be.c,{className:"c-message__avatar",userId:e,isAdHocMember:t,botId:a,botProfile:n,slackbotFeels:i,size:36,icons:s,isInteractive:!o&&!r,isUnknown:c,showCard:!0,showTooltip:!0,clogLinkClick:this.clogUserClick,ariaHidden:"true",tabIndex:"-1"})}renderBody(){var{ts:e,fileId:t,subtype:a,rollup:n,userId:r,edited:s,noSpecials:i,ariaAssertive:o,attachments:c,blocks:l,shouldRenderBlocks:d,isTombstonedMessage:p,isUnknown:u,sourceTeamId:h,message:m,blocksContainerContext:b,isRichTextMessage:_,theme:g}=this.props;if(this.isThreadRootTombstone())return G.a.createElement("span",{className:"c-message__body c-message__body--tombstone"},Qe.t("This message was deleted."));if(u)return G.a.createElement("span",{className:"c-message__body c-message__body--unknown"},"\xa0");if(t||"file_comment"===a||"file_mention"===a)return null;if(n)return this.renderRollup();if(Object(z.a)(a))return this.renderAutomatedSubtype();var f=V()("c-message__body",{"c-message__body--me":"me_message"===a,"c-message__body--automated":p});if(l&&d)return G.a.createElement(Ee.a,{blocksContainerContext:b,msg:m,clogLinkClick:this.clogLinkClick,inline:_&&"dense"===g});var v=parseInt(e,10)>Z.a;return G.a.createElement(ge.a,{"data-qa":"message-text",className:f,text:this.getTextWithThemes(),memberId:r,customFormatHandler:this.customFormatHandler,customContentHandler:this.customContentHandler,key:this.inlineAttachmentsKey,doSlackActionLinks:!0,clogLinkClick:this.clogLinkClick,noSpecials:i,ariaAssertive:o,ignoredPropEdited:s,ignoredPropAttachments:c,addDirectionAttr:v,sourceTeamId:h})}renderContent(){var{showUser:e,theme:t,isStandalone:a,reactionKey:n,reactionKeyForInitialFileComment:r}=this.props,s=V()("c-message__content",{"c-message__content--feature_sonic_inputs":this.props.featureSonicInputs});return G.a.createElement("div",{className:s,"data-qa":"message_content"},e&&this.renderContentHeader(),"light"===t&&this.renderThreadBroadcastPreamble(),this.renderBody(),this.renderFile(),this.renderFiles(),this.renderAttachments(),!a&&!this.isThreadRootTombstone()&&this.renderReactions(n),!a&&!this.isThreadRootTombstone()&&this.renderReactions(r),!a&&this.renderReplyBar(),this.renderThreadBroadcastFooter(),this.shouldShowResendControls()&&this.renderResendControls())}renderContentHeader(){var{userId:e,botId:t,username:a,theme:n,isUpload:r,isStandalone:s,isTombstonedMessage:i,botProfile:o}=this.props;if(this.isThreadRootTombstone())return null;var c=i?Object(ce.a)({upload:r}):void 0;return G.a.createElement("div",{className:"c-message__content_header"},G.a.createElement(Ie.a,{overrideNameText:c,userId:e,botId:t,username:a,isInteractive:!s&&!i,botProfile:o,clogLinkClick:this.clogUserClick})," ","light"===n&&this.renderTimestamp(),"dense"===n&&G.a.createElement("span",{className:"c-message__dense_copy_timestamp copy_only"},this.renderTimestamp(),G.a.createElement("br",null)),"dense"===n&&"\xa0","dense"===n&&this.renderThreadBroadcastPreamble())}renderEdit(){var{channelId:e,ts:t,messageContainerType:a}=this.props;return t&&e?G.a.createElement("div",{className:"c-message__content"},G.a.createElement(De.a,{channelId:e,ts:t,messageContainerType:a})):null}renderEditedLabel(){var{omitWhitespace:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{edited:t}=this.props,{ts:a}=t,n=G.a.createElement("span",{key:"edited",className:"c-message__edited_label",dir:"ltr"},!e&&"\xa0",Qe.t("(edited)"),!e&&"\xa0");if(a){var r=Qe.t("{date} at {time}",{date:Object(re.a)(a,{shortenMonth:!0}),time:Object(ne.a)(a)});return G.a.createElement(fe.c,{key:"edited",delay:fe.a,tip:r},n)}return n}renderError(){if(!this.props.featureTinyspeck)return null;var{ts:e,channelId:t}=this.props;return G.a.createElement("div",{style:{background:"#FFCFCF",padding:"24px"}},G.a.createElement("strong",null,"TS-ONLY: Message ",e," in ",t," failed to render.")," ","Please go to #escal-messages and read up to see if this was already reported. If not, please make a report including a link to the message before this one (if in a public channel.)")}renderFile(){var{fileId:e,comment:t,subtype:a}=this.props;return e&&t&&"file_comment"===a?this.renderFileComment():null}renderFileComment(){var{fileId:e,comment:t,isFileFollowup:a,theme:n,subtype:r,userId:s}=this.props;return e&&t?["file_comment"===r&&(!a||"dense"===n)&&G.a.createElement(Ne.a,{fileId:e,comment:t,followup:a,key:"".concat(t.id,"-meta")})||null,G.a.createElement(ge.a,{text:t.comment,memberId:s,className:"c-message__comment c-message__body",key:"".concat(t.id,"-body"),clogLinkClick:this.clogLinkClick})]:null}renderFiles(){var{fileIds:e,channelId:t,subtype:a,text:n}=this.props;if(!e||!e.length||!t)return null;if("file_comment"===a)return null;var r=G.a.createElement(Se.b,{msg:this.props.message}),s=V()("c-message__files","c-message__files--file_threads_meta_data","c-message__files--pillow",{"c-message__files--empty_body":!n});return G.a.createElement("div",{className:s},r)}renderGutter(){var e=V()("c-message__gutter",{"c-message__gutter--feature_sonic_inputs":this.props.featureSonicInputs});if("light"===this.props.theme){if(this.props.isFileFollowup)return G.a.createElement("div",{className:V()(e,"c-message__gutter--empty")});if(this.props.isEditing||this.props.showUser)return G.a.createElement("div",{className:e},this.renderAvatar())}return G.a.createElement("div",{className:e},this.renderTimestamp({isHiddenFromCopy:"dense"===this.props.theme}))}renderMessageLabel(e){var{labelTypes:t,primaryLabelType:a}=e,{sliHighlight:n,isSlackbotIm:r,isSelfIm:s,channelId:i,ts:o,currentUserId:c,pinnedByMemberId:l,sourceTeamId:d}=this.props,{isHovered:p}=this.state;return G.a.createElement(Ve,Object(x.a)({},t,{isVisible:this.shouldShowMessageLabel({labelTypes:t}),primaryType:a,channelId:i,ts:o,isHovered:p,isSlackbotIm:r,isSelfIm:s,sliHighlight:n,currentUserId:c,pinnedByMemberId:l,sourceTeamId:d}))}renderReactions(e){var{ts:t,latestMessageTsWithReactions:a}=this.props;if("file_comment"===this.props.subtype)return null;if(!e)return null;var n=t===a;return G.a.createElement(_e.a,{reactionKey:e,isLatestReactionInChannel:n})}renderReplyBar(){var{replies:e,replyCount:t,replyUsers:a,replyUsersCount:n,latestReply:r,channelId:s,threadTs:i,isThreadExpanded:o,threadListId:c,showThreadIfThreadable:l}=this.props;return s&&t?G.a.createElement(we.a,{channelId:s,threadTs:i,replies:e,replyCount:t,replyUsers:a,replyUsersCount:n,latestReply:r,isThreadExpanded:o,threadListId:c,showThreadIfThreadable:l}):null}renderResendControls(){var{isEKMError:e,showResend:t,showCancel:a}=this.props,n=null;t&&(n=G.a.createElement(he.c,{className:"c-message__resend",onClick:this.resendMsg},Qe.t("Try again")));var r=null;a&&(r=G.a.createElement(he.c,{className:"c-message__cancel",onClick:this.removeMsg},e?Qe.t("Clear"):Qe.t("Cancel")));var s=null;return t&&a&&(s=" | "),G.a.createElement("div",{className:"c-message__resend_controls"},G.a.createElement("div",{className:"c-message__resend_column"}),this.getResendText(),n,s,r)}renderRollup(){var{rollup:e,channelId:t,userId:a}=this.props;return e&&t?G.a.createElement(Pe.a,{rollup:e,channelId:t,user:a}):null}renderThreadBroadcastFooter(){var{ts:e,threadTs:t,channelId:a,subtype:n,isStandalone:r}=this.props;return e&&a&&t&&!r&&"thread_broadcast"===n?G.a.createElement(xe.a,{ts:e,threadTs:t,channelId:a}):null}renderThreadBroadcastPreamble(){var{ts:e,threadTs:t,channelId:a,subtype:n,isStandalone:r}=this.props;return e&&a&&!r&&"thread_broadcast"===n?G.a.createElement(Me.a,{ts:e,threadTs:t,channelId:a}):null}renderTimestamp(){var e,t,{isHiddenFromCopy:a=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{teamDomain:n,channelId:r,ts:s,threadTs:i,isStandalone:o,isTombstonedMessage:c}=this.props;if(!s||!r||c)return null;o||(e=Object(T.u)({teamDomain:n,channelId:r,ts:s,threadTs:i}),t=this.onTimestampClick);var l={};return a&&(l["data-stringify-text"]=""),G.a.createElement(Te.b,Object(x.a)({timestamp:s,relative:!1,full:!1,link:e,onClick:t},l))}render(){if(this.state.caughtError)return this.renderError();if(this.props.messageNotFound)return null;var{theme:e,isEditing:t,showUser:a,alertType:n,fadeAwayHighlight:r,isLast:s,isStandalone:i,isUnprocessed:o,subtype:c,rollup:l,sliHighlight:d,ts:p,isPinned:u,isEphemeral:h,isStarred:m,isTombstonedMessage:b,isEKMError:_,hasKeyboardFocusWithin:g}=this.props,{isHovered:f,actionsMenuOpen:v,height:O}=this.state,C=Object(J.a)({isPinned:u,isEphemeral:h,isStarred:m,subtype:c,sliHighlight:d}),j=Object(X.a)(C),E=V()("c-message",{["c-message--".concat(e)]:e,"c-message--hover":f||v,"c-message--focus-within":g,"c-message--adjacent":!t&&!a&&!i,"c-message--thread_broadcast":"thread_broadcast"===c,"c-message--highlight_yellow_bg":"shared_channel_join"===n,"c-message--highlight":!i&&t,"c-message--fade_highlight":r&&!j,"c-message--last":s,"c-message--rollup":l,"c-message--standalone":i,"c-message--unprocessed":o,"c-message--resend":this.shouldShowResendControls(),"c-message--deleting":this.isDeleting(),"c-message--editing":t,"c-message--sli_highlight_negative":Object(y.f)(d),["c-message--".concat(j)]:j}),k={};return null!==O&&(k={height:O}),G.a.createElement("div",{ref:this.setRef,className:E,onClick:this.onContainerClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseEnter,onFocus:this.props.onFocus,onBlur:this.props.onBlur,style:k,role:"document","data-qa":"message_container","data-qa-hover":"true","data-qa-placeholder":Object(T.tb)(p),"data-qa-label":j},this.renderMessageLabel({labelTypes:C,primaryLabelType:j}),this.renderGutter(),!i&&t&&this.renderEdit(),(i||!t)&&this.renderContent(),!b&&!_&&!i&&!t&&this.renderActions())}}message_Message.defaultProps=tt;var at=Object($.a)("feature_ally_bugbash")(Object(ue.a)(Object(pe.a)(message_Message)));function nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var rt={logMessage:function(){return Object(j.a)(...arguments)},clogMessageClick:function(){return Object(c.a)(...arguments)},clogUserClick:function(){return Object(l.a)(...arguments)},maybeStartEditingMessage:function(){return Object(k.g)(...arguments)},removeMsg:function(){return Object(u.a)(...arguments)},resendMsg:function(){return Object(p.a)(...arguments)}};t.a=Object(s.b)((e,t)=>{var{ts:a,channelId:s,previousMessageTs:c}=t,l=Object(d.a)(e,s,a),p=Object(O.a)(e),u=Object(v.k)(e,"threads_everything"),j=Object(v.k)(e,"expand_inline_imgs"),x=Object(v.k)(e,"expand_non_media_attachments"),R=Object(g.e)(e,s),D=Object(S.m)(e,"feature_attachments_v2"),F=Object(S.m)(e,"feature_sonic_inputs"),L=Object(S.m)(e,"feature_tinyspeck"),U=Object(i.a)({state:e}),B=Object(o.a)({state:e});if(!l)return{channelId:s,clogger:U,logger:B,featureTinyspeck:L,messageNotFound:!0};var H=Object(b.b)(e);a&&Object(C.d)(H,s,a),c&&Object(C.d)(H,s,c);var W,q=l.files,G=Object(f.c)(e,Object(r.a)(q)),K=Object(T.cb)(l)?G&&G.id:void 0,V=Object(d.a)(e,s,c,!1),z=!Object(T.W)(e,l,V),Y=Object(A.a)(l,V),Q=Object(N.b)(l),X=Object(T.R)(e,l),J=X.botId&&Object(h.d)(e,l),Z=J?J.app_id:null,$=l.slackbot_feels||null,ee=l.comment&&G&&Object(f.d)(e,G.id,l.comment.id)||l.comment,{isDeleting:te,sliHighlight:ae}=Object(y.e)(e,{channelId:s,ts:a}),ne=!!Object(k.e)(e,{channelId:s,ts:a}),re=Object(T.K)(l),se=re?re.pinnedBy:null;if(V){var ie=Object(T.K)(V),oe=ie?ie.pinnedBy:null;W={previousMessageIsStarred:Object(T.rb)(V),previousMessageIsPinned:Object(I.j)(e,{channelId:s,ts:c}),previousMessageIsEphemeral:Object(T.bb)(V),previousMessageSubtype:V.subtype,previousMessageSliHighlight:V.sliHighlight,previousMessagePinnedByMemberId:oe}}var ce,le=l.thread_ts;le&&(ce={replyCount:l.reply_count},Object(M.a)()?l.reply_users?(ce.replyUsers=l.reply_users,ce.replyUsersCount=l.reply_users_count,ce.latestReply=l.latest_reply):l.replies&&(ce.replies=l.replies):l.replies?ce.replies=l.replies:(ce.replyUsers=l.reply_users,ce.replyUsersCount=l.reply_users_count,ce.latestReply=l.latest_reply));var de,pe=Object(S.d)(e),ue=Object(_.d)(e),he=ue&&ue.domain;if(J){var me=Object(m.d)(e,l.user);de=Object(E.c)({bot:J,botProfile:l.bot_profile,member:me,teamId:H})}return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({message:l,channelId:s,clogger:U,logger:B,blocks:l.blocks,alertType:l.alert_type,subtype:l.subtype,text:l.text,noSpecials:!1===l.mrkdwn,theme:p},X,{appId:Z,hasAdHocSender:Object(P.a)(l)},ce,{threadTs:le,threadsEverythingPref:u,expandInlineImgsPref:j,expandNonMediaAttachmentsPref:x,attachments:l.attachments,fileId:K,fileIds:q,comment:ee,isUpload:l.upload,reactionKey:Q,showUser:z,isFileFollowup:Y,edited:l.edited,isStarred:Object(T.rb)(l,G,"file_comment"===l.subtype&&ee),isPinned:Object(I.j)(e,{channelId:s,ts:a}),currentUserId:pe,pinnedByMemberId:se,sliHighlight:ae,botProfile:l.bot_profile,slackbotFeels:$,icons:l.icons,isEditing:ne,isUnprocessed:Object(T.sb)(l)&&!Object(T.bb)(l),isEphemeral:Object(T.bb)(l),isDeleting:te,showResend:l.showResend,showCancel:l.showCancel,isSlackbotIm:Object(w.Hb)(R),isRichTextMessage:Object(T.mb)(l),shouldRenderBlocks:Object(T.Cb)(e,l),sourceTeamId:Object(T.V)(l)||Object(b.b)(e),isSelfIm:Object(w.Tb)(pe,R),isTombstonedMessage:Object(T.ab)(l)||Object(T.Y)(l),isUnknown:Object(T.jb)(l),isEKMError:l.isEKMError,teamDomain:he},W,{featureTinyspeck:L,featureAttachmentsV2:D,ariaAssertive:Object(T.Z)(l),serviceTeamId:de,featureSonicInputs:F})},rt)(at)},"HAG/":function(e,t,a){},HOOb:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a("yZHI");function r(e){return Object(n.a)(e,e=>"A"===e.nodeName)}},HQme:function(e,t,a){},HSEu:function(e,t,a){"use strict";var n=a("wx14"),r=a("rePB"),s=a("Vfgr"),i=a("ifKl"),o=a("hbEN"),c=a("tn36"),l=a("aLpA"),d=a("aK/h"),p=a("q1tI"),u=a.n(p),h=a("TSYQ"),m=a.n(h),b=a("XHGt"),_=a("mM05"),g=a.n(_),f=a("brL+"),v=a("4M+g"),O=a("t85p"),y=a("oKz6"),C=a("dxEi"),j=a("quKg"),E=a("rZal"),k=a("XL7r"),S=a("Lev8"),I=a("7ob2"),w=a("ns4K"),T=a("dhvi"),N=a("HOkk"),P=a("YPPF"),A=a("g+Y+"),M=a("XfeM"),x=a("/Q0P"),R=a("Smdl"),D=a("Ggy7");function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var U=u.a.lazy(()=>Promise.resolve().then(a.bind(null,"6EwF"))),B=Object(M.b)("Opens the snippet dialog",(e,t,a)=>{var n=a.initialText.replace(/\u2018|\u2019/g,"'").replace(/\u201c|\u201d/g,'"');Object(R.a)()?e(Object(x.a)({element:u.a.createElement(U,L({},a,{initialSnippetText:n,initialText:"",resetSnippetText:n,resetChannelId:a.initialChannelId}))})):Object(D.a)(n,a.fromPrompt)});B.meta={name:"openSnippetDialog",key:"actionsOpenSnippetDialogOpenSnippetDialog",description:"Opens the snippet dialog"},B.propTypes={initialText:d.default.string,initialChannelId:d.default.string.isRequired,threadTs:d.default.string,viewContext:d.default.string};var H=B,W=a("Ymwh"),q=a("hOGb"),G=a("qafc"),K=a("nNoG"),V=a("ynxK"),z=a("HvGc"),Y=a("rWF5"),Q=a("kOzZ"),X=a("negh"),J=new K.b("message_navigation_shortcuts"),Z={showKeyboardShortcuts:i.a,featureMessageNavigationShortcuts:!1};class message_navigation_educational_toast_MessageNavigationEducationalToast extends p.PureComponent{constructor(){super(),this.openShortcutsFlexpane=this.openShortcutsFlexpane.bind(this)}componentDidMount(){this.props.clogger.track(X.EventId.CLIENT_KEYBOARD_SHORTCUTS,{contexts:{[X.ClientEventKeys.ui_context]:{[X.UiContextKeys.action]:X.UiAction.KEYDOWN,[X.UiContextKeys.step]:X.UiStep.NAVIGATION_SHORTCUTS_EDUCATION,[X.UiContextKeys.ui_properties]:{[X.UiPropertiesKeys.element_type]:X.ElementType.TOAST,[X.UiPropertiesKeys.key]:"up"}}}})}openShortcutsFlexpane(e){this.props.showKeyboardShortcuts({focusKey:e&&"keydown"===e.type?"keyboard_shortcuts":null})}render(){if(!this.props.featureMessageNavigationShortcuts)return null;var e=J.rt("Press {cmd_key} {up_key} to edit your last message, and use {up_key} to browse all messages and quickly act on them using <shortcuts>one of the many shortcuts</shortcuts>",{cmd_key:u.a.createElement(q.a,{label:Object(Y.q)()?"Cmd":"Ctrl",slim:!0}),up_key:u.a.createElement(q.a,{label:"\u2191",slim:!0})},e=>{var{text:t,key:a}=e;return u.a.createElement(V.a,{key:a,onClick:this.openShortcutsFlexpane},t)});return u.a.createElement(G.b,{fadeDelay:1e4},u.a.createElement("span",null,e))}}message_navigation_educational_toast_MessageNavigationEducationalToast.defaultProps=Z;var $=Object(b.b)(e=>({featureMessageNavigationShortcuts:Object(O.m)(e,"feature_message_navigation_shortcuts"),clogger:Object(Q.a)({state:e})}),e=>({showKeyboardShortcuts:function(){return e(Object(z.h)(...arguments))}}))(message_navigation_educational_toast_MessageNavigationEducationalToast),ee=a("7dYf"),te=Object(M.b)("Show contextual shortcuts navigation toast",(e,t)=>{var a=t(),n=Object(O.m)(a,"feature_message_navigation_shortcuts"),r=Object(k.k)(a,"message_navigation_toast_was_seen");n&&!r&&(e(Object(w.c)({element:u.a.createElement($)})),e(Object(ee.f)({pref:"message_navigation_toast_was_seen",value:!0})))});te.meta={name:"maybeShowMessageNavigationEducationalToast",key:"actionsMaybeShowMessageNavigationEducationalToastMaybeShowMessageNavigationEducationalToast",description:"Show contextual shortcuts navigation toast"};var ae=te,ne=a("ksEP"),re=a("+uGN"),se=a("2HDu"),ie=a("FghR"),oe=new K.b("coachmarks"),ce={anchorElement:d.default.instanceOf(Element),setTractorFilesCoachmarkVisibility:d.default.func},le={anchorElement:null,setTractorFilesCoachmarkVisibility:i.a};class tractor_share_files_coachmark_TractorShareFilesCoachmark extends ie.a{render(){var{setTractorFilesCoachmarkVisibility:e,anchorElement:t}=this.props;return u.a.createElement("div",{className:"position_relative"},u.a.createElement(ie.a,{anchorElement:t,"data-qa":"coachmark",isOpen:!0,arrowPosition:80,orientation:"right",offsetY:-40,closeCoachmark:()=>e(!1),coachmarkClassNames:"c-message-pane__c-coachmark"},u.a.createElement("h3",null,oe.t("Share a file in the channel")),u.a.createElement("p",null,oe.rt('Click the <i class="c-icon c-icon--paperclip"></i> paperclip icon next to the message input box to <strong>add a file from your computer</strong>.'))))}}tractor_share_files_coachmark_TractorShareFilesCoachmark.propTypes=ce,tractor_share_files_coachmark_TractorShareFilesCoachmark.defaultProps=le;var de=a("eglI"),pe=a("9PC1"),ue=a("oxKW"),he=a("pWPO"),me=a("yHhI"),be=a("a+Oh"),_e=a("icQl"),ge=a("NAkb"),fe=a("cnLP"),ve=a("NcDR"),Oe=a("Ff2n"),ye=a("18Pa"),Ce=a("yzQ7"),je=a("Z1bu"),Ee=a("3pFD"),ke=a("RAhH"),Se=a("/m+M"),Ie=a("cMxN"),we=a("guiv"),Te=a("uG0r"),Ne=a("Py5X"),Pe=a("KPXh"),Ae=a("RB1+"),Me=a("6kok"),xe=a("Fuyg"),Re=a("9tyN");function De(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=(e=>(e||"").split(/\s+/)[0])(t),n=(e=>((e||"").split(/[^\S\n\r]+/g)||[]).length>1)(t),s=Object(xe.a)(t),i=["/","\uff0f"].includes(t.charAt(0));return e.reduce((e,o)=>{var c=o.options.filter(e=>{if(i&&"OPTION_SLASH_COMMAND"!==e.type)return!1;var r=Object(xe.a)(e.label),o=Object(xe.a)(e.description)||"",c=Object(xe.a)(e.appName)||"";if("OPTION_SLASH_COMMAND"===e.type){if("last-used"===e.command.type)return""===t||"/"===t||"\uff0f"===t;var l=Object(Re.a)(e.command,a,{allowPartialMatches:!0}),d=Object(Re.a)(e.command,a,{allowPartialMatches:!1});if(i)return n?d:l;if(l)return!0;if(o.includes(s))return!0;if(c.includes(s))return!0}if("OPTION_CHANNEL_ACTION"===e.type){if(r.includes(s))return!0;if(o.includes(s))return!0;if(c.includes(s))return!0}return!1});if(c.length>0){var l=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?De(Object(a),!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):De(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},o,{options:c});return e.concat(l)}return e},[])},Le=a("od5y"),Ue=a("AE1P"),Be=a("zZZw"),He=a("X5Eo"),We=a("hXpn"),qe=(a("Dw1/"),e=>{var{children:t}=e,a=Object(Oe.a)(e,["children"]);return u.a.createElement("span",Object(n.a)({},a,{className:"p-app_action_picker_item__text p-app_action_picker_item__text--primary"}),t)});qe.defaultProps={children:null};var Ge=e=>{var{children:t}=e,a=Object(Oe.a)(e,["children"]);return u.a.createElement("span",Object(n.a)({},a,{className:"p-app_action_picker_item__text p-app_action_picker_item__text--secondary"}),t)};Ge.defaultProps={children:null};var Ke=Object(p.memo)(e=>{var{multiline:t,primaryContent:a,secondaryContent:n,tertiaryContent:r,isActive:s,className:i}=e;return u.a.createElement(We.a,{size:"small",className:m()("p-app_action_picker_item",i,{"p-app_action_picker_item--active":s}),primaryContent:t?u.a.createElement(He.a,{size:"medium",text:a,subtext:n}):a,secondaryContent:t?r:n})});Ke.propTypes={multiline:d.default.bool,primaryContent:d.default.node,secondaryContent:d.default.node,tertiaryContent:d.default.node,isActive:d.default.bool,className:d.default.string},Ke.defaultProps={multiline:!1,primaryContent:null,secondaryContent:null,tertiaryContent:null,className:null,isActive:!1};var Ve=Ke,ze=new Ee.b("app_action_picker"),Ye=e=>{var t,{command:a,app:r,appName:s,teamId:i,isActive:o}=e,c=Object(Oe.a)(e,["command","app","appName","teamId","isActive"]),{featureIaPlatformTranslations:l}=Object(Se.a)(),d=Object(Pe.g)(a),h=Object(Pe.i)(a),m=Object(Pe.e)(a),b=Object(Pe.b)(a);b&&b.length>0&&(t=l?ze.t("or {aliases}",{aliases:Object(Be.a)(b,{noConj:!0}).join("")}):"");var _=u.a.createElement(qe,null,u.a.createElement("b",null,d),b&&u.a.createElement(p.Fragment,null," (",t,")"),h&&u.a.createElement(p.Fragment,null," ",h)),g=u.a.createElement(Ge,null,m),f=u.a.createElement(Ge,null,s);return u.a.createElement(Ve,Object(n.a)({},c,{multiline:!0,isActive:o,primaryContent:_,secondaryContent:g,tertiaryContent:f}))};Ye.defaultProps={isActive:!1,appName:"",app:null,teamId:""};var Qe=Object(b.b)((e,t)=>{var{command:{app:a}}=t;return{app:Object(Ue.e)(e,a)||null,teamId:Object(f.b)(e)}})(Ye),Xe=e=>{var{action:t,app:a,appName:r}=e,s=Object(Oe.a)(e,["action","app","appName"]),i=u.a.createElement(qe,null,t.name),o=u.a.createElement(Ge,null,r);return u.a.createElement(Ve,Object(n.a)({},s,{primaryContent:i,secondaryContent:o}))};Xe.defaultProps={app:null,appName:""};var Je=Object(b.b)((e,t)=>{var{action:{appId:a}}=t;return{app:Object(Ue.e)(e,a)||null}})(Xe),Ze=(a("sI2V"),e=>{var{option:t,channelId:a,isActive:n}=e;return"heading"===t.type?u.a.createElement("div",{className:"p-app_action_picker_option--heading"},t.icon&&u.a.createElement(Le.b,{type:t.icon,className:"margin_right_75"}),t.label):"OPTION_CHANNEL_ACTION"===t.type?u.a.createElement(Je,{key:t.key,action:t.action,channelId:a,isActive:n,appName:t.appName}):u.a.createElement(Qe,{key:t.key,command:t.command,channelId:a,isActive:n,appName:t.appName})});Ze.defaultProps={isActive:!1};var $e=Ze,et=a("0f2Y"),tt=a("53Ys"),at=new K.b("app_action_picker"),nt=Object(b.b)(void 0,e=>({openAppsBrowserModal:()=>e(Object(tt.a)())}))(e=>{var{filterQuery:t,onSelected:a,openAppsBrowserModal:n}=e,{featureIaPlatformTranslations:r}=Object(Se.a)();return u.a.createElement("div",{className:"p-app_action_picker__empty"},r?at.rt('No commands found for "{query}"',{query:u.a.createElement("strong",null,t)}):"",u.a.createElement("br",null),r?at.rt("Try a different command or <a>add an app</a>.",null,e=>{var{text:t}=e;return u.a.createElement(et.a,{onClick:()=>{a(),n()}},t)}):"")}),rt=a("yIs4"),st=a("plEq"),it=a("e4Fz"),ot=(a("SSpe"),new K.b("app_action_picker")),ct=e=>{var{filterQuery:t,isExpanded:a,selectId:n,activeRowIndex:r,onChange:s}=e,{featureIaPlatformTranslations:i}=Object(Se.a)(),o=a&&Object(rt.a)(r)?Object(it.a)(n,"option_".concat(r)):null;return a?u.a.createElement("div",{className:"p-app_action_picker_search_input_wrapper"},u.a.createElement(st.a,{className:"p-app_action_picker_search_input",focusOnMount:!0,value:t,onChange:s,role:"combobox","aria-activedescendant":o,"aria-autocomplete":"list","aria-expanded":a,"aria-owns":Object(it.a)(n,"listbox"),autoComplete:"off",placeholder:i?ot.t("Search quick actions"):"",id:n,icon:"search-medium",name:n})):null};ct.defaultProps={isExpanded:!1,activeRowIndex:null,filterQuery:""};var lt=ct;a("SKMV");function dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function pt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(a),!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ut=new Ee.b("app_action_picker"),ht=Object(p.memo)(e=>{var{channelActions:t,channelId:a,channelName:n,commands:r,initialFilterValue:s,onSelected:i,runChannelAction:o,threadTs:c,viewContext:l}=e,{featureIaPlatformTranslations:d}=Object(Se.a)(),[h,m]=Object(p.useState)({selectedOption:null,activeRowIndex:null,filterQuery:s,isExpanded:!0}),b=d?ut.t("Added by your team in {channelName}",{channelName:Object(K.q)(n)}):"",_=d?ut.t("Slash commands"):"",f=Object(p.useMemo)(()=>((e,t)=>({label:t,icon:"bolt",options:(e||[]).map(e=>({value:e.id,label:e.name,description:e.description,type:"OPTION_CHANNEL_ACTION",appName:"Workflow",height:34,action:e}))}))(t,b),[b,t]),v=Object(p.useMemo)(()=>((e,t)=>({label:t,icon:"input-integration",options:e.map(e=>({value:Object(Pe.d)(e),label:Object(Pe.g)(e),description:Object(Pe.e)(e),type:"OPTION_SLASH_COMMAND",appName:e.appName,command:e}))}))(r,_),[r,_]),O=Object(p.useMemo)(()=>Fe([f,v],h.filterQuery),[f,v,h.filterQuery]),y=Object(p.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=e();m(e=>pt({},e,{},a)),t&&t()},[]),C=Object(p.useCallback)(e=>{m(t=>pt({},t,{filterQuery:e}))},[]),j=Object(p.useCallback)(e=>{var t=Object(Pe.g)(e),n=Object(Ae.a)({viewContext:l,channelId:a,threadTs:c});n.prependContents({contents:(new g.a).insert("".concat(t," ")).ops}),n.setCursorAtEnd()},[a,c,l]),E=Object(p.useCallback)(e=>{if("OPTION_SLASH_COMMAND"===e.type)i(),j(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&e.command?"last-used"===e.command.type?e.command.originalCommand:e.command:null}(e));else if("OPTION_CHANNEL_ACTION"===e.type){var{action:t}=e;o({appId:t.appId,actionId:t.id,actionName:t.name,channelId:a}),i()}},[a,i,j,o]),k=Object(p.useCallback)((e,t)=>{var{isActive:n}=t;return u.a.createElement($e,{channelId:a,option:e,isActive:n})},[a]),S=Object(p.useCallback)(e=>u.a.createElement(nt,{filterQuery:e,onSelected:i}),[i]);return u.a.createElement("div",{className:"p-app_action_picker"},u.a.createElement(lt,{filterQuery:h.filterQuery,onChange:C,selectId:"app_action_picker_select",activeRowIndex:h.activeRowIndex,isExpanded:h.isExpanded}),h.isExpanded&&u.a.createElement(Ne.a,{maxListHeight:353,onOptionSelected:E,optionsRowHeight:60,headingRowHeight:36,renderOption:k,selectState:pt({},h,{options:O,selectId:"app_action_picker_select",isRequired:!0}),emptyStateMessage:S,setSelectState:y,width:542,shouldIncludeActiveOption:!0}))});ht.defaultProps={commands:[],channelActions:[],onSelected:i.a,threadTs:null,initialFilterValue:""};var mt=Object(b.b)((e,t)=>{var{channelId:a,threadTs:n}=t,r=Object(we.a)(e,a,n&&n.length>0),s=Object(we.c)(e),i=n?null:Object(Ce.a)(e,a),o=Object(v.e)(e,a);return{cacheTs:s,channelId:a,channelName:Object(Me.w)(e,o),commands:r,channelActions:i}},e=>({runChannelAction:t=>e(Object(Te.a)(t))}),null,{areStatePropsEqual:(e,t)=>e.cacheTs===t.cacheTs&&e.channelId===t.channelId&&e.channelName===t.channelName&&e.channelActions===t.channelActions})(ht),bt=new K.b("app_action_picker"),_t={channelId:null,offsetX:-1,offsetY:-8,position:"top-right",onClick:i.a,onClose:i.a,onOpen:i.a,forceOpen:!1,featureChannelActionsClient:!1,initialFilterValue:"",threadTs:null,containerRef:null},gt=e=>{var{channelId:t,children:a,containerRef:r,forceOpen:s,initialFilterValue:i,offsetX:o,offsetY:c,onClick:l,onClose:d,onOpen:p,position:h,threadTs:m,viewContext:b}=e,_=Object(Oe.a)(e,["channelId","children","containerRef","forceOpen","initialFilterValue","offsetX","offsetY","onClick","onClose","onOpen","position","threadTs","viewContext"]),{featureIaPlatformTranslations:g}=Object(Se.a)();return u.a.createElement(Ie.b,Object(n.a)({},_,{ariaHasPopup:!0,onClick:l,onClose:d,forceOpen:s,renderPopover:e=>u.a.createElement(Ie.a,Object(n.a)({shouldFade:!1,allowanceX:15,allowanceY:15,position:h,offsetX:o,offsetY:c,ariaLabel:g?bt.t("Quick actions"):"",ariaRole:"dialog",onOpen:p},e),u.a.createElement(mt,{channelId:t,onSelected:e.onClose,initialFilterValue:i,threadTs:m,viewContext:b,containerRef:r}))}),a)};gt.defaultProps=_t;var ft=gt,vt=(a("dMq1"),new Ee.b("app_action_picker")),Ot=Object(p.forwardRef)((e,t)=>{var{teamId:a,channelId:r,channelActionsCount:s,viewContext:i,tabIndex:o}=e,c=Object(Oe.a)(e,["teamId","channelId","channelActionsCount","viewContext","tabIndex"]),{featureIaPlatformTranslations:l}=Object(Se.a)(),d=s&&s>0;return Object(p.useEffect)(()=>{d&&Object(je.b)(a,r)},[a,r,d]),u.a.createElement(ft,Object(n.a)({position:"top-left",channelId:r,viewContext:i},c),u.a.createElement(ke.c,{tip:l?vt.t("Take a quick action"):"",position:"top-left"},u.a.createElement(ye.a,{"aria-label":l?vt.t("Quick actions"):"",ref:t,className:"p-app_action_picker_trigger_button",icon:"bolt",size:"small",tabIndex:o})))});Ot.defaultProps={channelActionsCount:null,tabIndex:void 0},Ot.displayName="AppActionPickerTriggerButton";var yt=Object(b.b)((e,t)=>{var{channelId:a,threadTs:n}=t;return{channelActionsCount:n?0:Object(Ce.c)(e,a),teamId:Object(f.b)(e)}})(Ot),Ct=a("kcos"),jt=a("yACA"),Et=a("Pe1S");function kt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function St(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(a),!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var It=new K.b("offline_mode"),wt=new K.b("msg_input"),Tt=e=>{if(!e)return"";var t=document.createElement("span");return t.innerHTML=e,t.textContent.trim()},Nt={channelId:void 0,teamId:void 0,legacyChannel:void 0,threadTs:void 0,viewContext:void 0,placeholder:void 0,sendMessage:()=>Promise.resolve(),className:void 0,autocompleteProps:void 0,enableEmojiButton:!1,enableFileButton:!0,shouldShowActionsButton:!1,enableSnippetCreation:!0,enableMentionButton:!1,enableComposerButton:!1,enableSendButton:!1,enableBroadcastKeywords:!0,enableJumbomoji:!1,enableExpandButton:!1,arrowHistory:!1,useSendButton:!1,isDisabled:!1,isSendingDisabled:!1,isExpanded:!1,maxLines:void 0,useLegacyCreate:!1,useLegacyDrafts:!1,focusOnMount:!1,focusOnPaste:!1,draft:void 0,draftDelay:1e3,setChannelDraft:i.a,clearChannelDraft:i.a,editLastMessage:i.a,openSnippetDialog:i.a,featureOfflineMode:!1,featureSonicInputs:!1,clientToolBar:!1,featureWysiwygComposer:!1,wasRecentlyOnline:!1,isClientOnline:!1,onTextChange:i.a,onSelectionChange:i.a,onExpand:i.a,onDraftUpdate:i.a,onFocus:i.a,onBlur:i.a,enqueueToast:i.a,openModal:i.a,maxLength:void 0,showFocusOutline:!1,additionalDraftContent:void 0,onDraftRestore:i.a,onSendError:i.a,triggerNavigateBack:i.a,triggerNavigateForward:i.a,shouldShowTractorFilesCoachmark:!1,setTractorFilesCoachmarkVisibility:i.a,ariaDescribedBy:void 0,clientTheme:"light",isComposerPage:!1,composerDraft:void 0,onUpArrow:i.a,onDownArrowWhenEmpty:i.a,featureMessageNavigationShortcuts:!1,featureWysiwygAnchorText:!1,maybeShowMessageNavigationEducationalToast:i.a,hasKeyboardFocus:!1,uploadDraftFiles:i.a,pendingFileIds:[]};class message_input_MessageInput extends p.Component{constructor(e){super(e),Object(c.a)(this,["onEnter","onFileMenuClose","onFileMenuOpen","onLeftWhenEmpty","onPlusMenuShortcut","onCmdLeftWhenEmpty","onCmdRightWhenEmpty","onPasteLimit","onTextChange","onSelectionChange","onUpArrow","onFilesSelected","openSnippetDialog","renderInput","renderModernAutocomplete","renderFileButton","renderActionButton"]),this.isFlushingDraftFromChannelSwitch=!1,this.state={isPlusMenuOpen:!1,forcePlusMenuOpen:!1},this.getComputedModules=Object(_e.a)((e,t,a,n,r)=>{return a||n?St({},e,{composer:St({},Object(Et.a)({featureWysiwygComposer:n,featureWysiwygAnchorText:r}),{teamId:t}),slacklink:n&&{convertImages:!1,disableLinksWithLabels:!r},slackmarkdown:n&&{convertHeaders:!1,convertHorizontalRule:!1}}):e})}componentDidMount(){this.handlePropChanges({isMount:!0}),this.maybeFocusInput()}componentDidUpdate(e){this.handlePropChanges({prevProps:e}),this.maybeFocusInput(e)}componentWillUnmount(){this.updateDraftThrottled&&this.updateDraftThrottled.flush()}onEnter(e){var{metaKey:t,ctrlKey:a,shiftKey:n}=e,{sendMessage:r,useLegacyDrafts:s,featureOfflineMode:i,featureSonicInputs:o,wasRecentlyOnline:c,enableSnippetCreation:l,isSendingDisabled:d,onSendError:p}=this.props,h=this.getInputRef();if(!h)return!1;if(h.isEmpty()&&!n)return!1;if(s||this.updateDraftThrottled.cancel(),i&&!c){var m=It;return this.props.enqueueToast({element:u.a.createElement(G.b,{ariaAssertive:!0,position:"top-right",icon:"cloud-offline-small"},u.a.createElement("span",null,u.a.createElement("strong",null,m.rt("No connection."))," ",m.rt("You\u2019ll be able to send messages as soon as you\u2019re back online.")))}),!1}return o&&l&&(Object(Y.q)()&&t&&n||!Object(Y.q)()&&a&&n)?(this.openSnippetDialog(),!1):d?(p({reason:"send_disabled"}),!1):(r({fromKeyboardShortcut:!0}),!1)}onUpArrow(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{arrowHistory:t,featureOfflineMode:a,isClientOnline:n,featureMessageNavigationShortcuts:r,hasKeyboardFocus:s}=this.props;if(Object(R.a)()||!t||e){var i=this.getInputRef();if(i&&i.isEmpty()){e?this.trackNavigationShortcut("cmd+up"):this.trackNavigationShortcut("up");var o=e?"cmd+up":"up";if(!r||r&&e){if(a&&!n)return;this.props.editLastMessage({keyboardShortcut:o,hasKeyboardFocus:s})}else r&&this.props.maybeShowMessageNavigationEducationalToast(),this.props.onUpArrow(e)}}}onLeftWhenEmpty(){this.setState(()=>({isPlusMenuOpen:!0,forcePlusMenuOpen:!0}))}onPlusMenuShortcut(){this.setState(()=>({isPlusMenuOpen:!0,forcePlusMenuOpen:!0}))}onCmdLeftWhenEmpty(){this.props.logger.info("MESSAGE-INPUT","onCmdLeftWhenEmpty"),this.props.triggerNavigateBack({fromKeyboardShortcut:!0})}onCmdRightWhenEmpty(){this.props.logger.info("MESSAGE-INPUT","onCmdRightWhenEmpty"),this.props.triggerNavigateForward({fromKeyboardShortcut:!0})}onTextChange(){var{onTextChange:e,useLegacyDrafts:t,featureWysiwygComposer:a}=this.props,n=this.getInputRef();t||this.updateOrClearDraft({inputRef:n}),e(n.value(),a?n.getContents().contents:[])}onSelectionChange(e){var{onSelectionChange:t}=this.props;t(e)}onDraftUpdate(){var{onDraftUpdate:e}=this.props,t=this.getInputRef();e({ops:t.getContents().contents,range:t.getSelection()})}onFileMenuOpen(){this.setState(()=>({isPlusMenuOpen:!0}));var{clogger:e}=this.props;e.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_button"}}})}onFileMenuClose(){this.setState(()=>({isPlusMenuOpen:!1,forcePlusMenuOpen:!1}))}onFilesSelected(e){var{pendingFileIds:t,composerDraft:a}=this.props,n=Object(re.d)(a),r=Object(re.h)(a).length+t.length,s=l.z-r;this.props.uploadDraftFiles({draftId:n,files:e.slice(0,s)})}onPasteLimit(e,t){this.props.openModal({element:this.renderPasteLimitDialog(t),isStackable:!0})}getInputRef(){var{forwardedRef:e}=this.props;return e.current.getWrappedInstance?e.current.getWrappedInstance():e.current}setCursor(){this.getInputRef().setCursor(...arguments)}setCursorAtEnd(){this.getInputRef().setCursorAtEnd(...arguments)}trackNavigationShortcut(e){var{clogger:t,viewContext:a}=this.props;t.track(X.EventId.CLIENT_KEYBOARD_SHORTCUTS,{contexts:{[X.ClientEventKeys.ui_context]:{[X.UiContextKeys.action]:X.UiAction.KEYDOWN,[X.UiContextKeys.ui_properties]:{[X.UiPropertiesKeys.key]:e,[X.UiPropertiesKeys.view_context]:a}}}})}handlePropChanges(e){var{prevProps:t={},isMount:a}=e,{channelId:n,threadTs:r,composerDraft:s,draft:i,draftDelay:c,logger:l,useLegacyDrafts:d,onDraftRestore:p,additionalDraftContent:u}=this.props;if(!d){if(t.draftDelay!==c&&(this.updateDraftThrottled=Object(o.a)(this.updateDraft,c)),!a&&!d&&t.additionalDraftContent!==u){var h=this.getInputRef();this.updateOrClearDraft({inputRef:h})}if(s&&s.id&&(!t.composerDraft||t.composerDraft.id!==s.id)){this.updateDraftThrottled.flush();var m=this.getInputRef();m.value({contents:s.ops}),m.clearHistory()}if(!s&&(t.channelId!==n||t.threadTs!==r)){this.isFlushingDraftFromChannelSwitch=!0,this.updateDraftThrottled.flush(),this.isFlushingDraftFromChannelSwitch=!1;var b=this.getInputRef();n&&(i?(l.debug("DRAFT","Restoring draft to ".concat(n)),i.ops&&b.value({contents:i.ops}),i.range&&b.setCursor(i.range.index,i.range.length),p(i)):(l.debug("DRAFT","No draft, clearing input for ".concat(n)),b.clear())),b.clearHistory()}}}focus(){var{logger:e}=this.props,t=this.getInputRef();try{t.focus()}catch(a){e.error("MESSAGE-INPUT","maybeFocusInput caught error: ".concat(a&&a.message)),a.stack&&e.error("MESSAGE-INPUT",a.stack)}}maybeFocusInput(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{channelId:t,threadTs:a,focusOnMount:n}=this.props;n&&((n!==e.focusOnMount||t&&!a&&e.channelId!==t||a&&e.threadTs!==a)&&this.focus())}openSnippetDialog(e){var t,a,{channelId:n,threadTs:r,viewContext:s,featureWysiwygComposer:i}=this.props,o=this.getInputRef();return e&&e.ops?(a={contents:e.ops},t=Object(he.a)(a)):(t=o?o.displayValue():"",a=i&&o?o.getContents():void 0),this.props.openSnippetDialog({initialText:t,initialContents:a,initialChannelId:n,threadTs:r,viewContext:s}),e||o.value(""),!1}updateOrClearDraft(e){var{inputRef:t}=e,{channelId:a,threadTs:n,logger:r,useLegacyDrafts:i,isComposerPage:o}=this.props;if(o)this.updateDraftThrottled();else if(a&&t&&!i){var c=t.getContents();if(t.getLength()&&Object(s.a)(Object(pe.p)(c.contents,{embedReplacement:"a"})).length){var l=new g.a(c.contents);r.debug("DRAFT","Updating draft in ".concat(a)),this.updateDraftThrottled({channelId:a,threadTs:n,delta:l})}else r.debug("DRAFT","Clearing draft for ".concat(a)),this.updateDraftThrottled({channelId:a,threadTs:n})}}updateDraft(){var{channelId:e,threadTs:t,delta:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{additionalDraftContent:n,isComposerPage:r}=this.props;if(r)this.onDraftUpdate();else if(a){var s=this.getInputRef();this.props.setChannelDraft(St({channelId:e,threadTs:t,delta:a,range:s.getSelection(),shouldWithold:!this.isFlushingDraftFromChannelSwitch},n))}else this.props.clearChannelDraft({channelId:e,threadTs:t})}renderPasteLimitDialog(e){var t=wt;return u.a.createElement(N.a,{title:t.t("That\u2019s a bit too long to paste"),cancelText:t.t("Create a snippet"),goButtonText:t.t("OK"),onCancel:()=>this.openSnippetDialog(e),showCancelButton:!0},t.rt("To keep things running smoothly, there\u2019s a limit on the number of characters you can paste into Slack. If you\u2019d like you could <b>create a snippet</b> instead."))}renderInput(e){var{modules:t,isOpen:a,legacyTextyClassName:n}=e,{placeholder:r,channelId:s,enableEmojiButton:i,enableMentionButton:o,enableComposerButton:c,enableSendButton:l,enableBroadcastKeywords:d,enableExpandButton:p,useLegacyCreate:h,onFocus:m,onBlur:b,onExpand:_,forwardedRef:g,enableJumbomoji:f,isDisabled:v,isSendingDisabled:O,isExpanded:y,maxLines:C,threadTs:j,viewContext:E,maxLength:k,clientToolBar:S,featureWysiwygComposer:I,featureWysiwygAnchorText:w,teamId:T,focusOnPaste:N,ariaDescribedBy:P,useSendButton:A,sendMessage:M}=this.props,x=Tt(r),D=this.getComputedModules(t,T,S,I,w);return u.a.createElement(de.default,{legacyTextyClassName:n,channelId:s,className:"p-message_input_field",ariaLabel:x,ariaDescribedBy:P,focusOnPaste:N,placeholder:r,onEnter:this.onEnter,onUpArrow:this.onUpArrow,onDownArrowWhenEmpty:this.props.onDownArrowWhenEmpty,onLeftWhenEmpty:this.onLeftWhenEmpty,onPlusMenuShortcut:this.onPlusMenuShortcut,onCmdLeftWhenEmpty:Object(R.a)()?this.onCmdLeftWhenEmpty:null,onCmdRightWhenEmpty:Object(R.a)()?this.onCmdRightWhenEmpty:null,onExpand:_,"data-qa":"message_input","data-message-input":!0,"data-channel-id":s,"data-thread-ts":j,"data-thread-key":j?Object(se.c)(s,j):null,"data-view-context":E,ref:g,useLegacyCreate:h,maxLines:C,modules:D,isAutocompleteOpen:a,isDisabled:v,isSendingDisabled:O,isExpanded:y,enableEmojiButton:i,enableMentionButton:o,enableComposerButton:c,enableSendButton:l,enableBroadcastKeywords:d,enableJumbomoji:f,enableExpandButton:p,onTextChange:this.onTextChange,onSelectionChange:this.onSelectionChange,onFocus:m,onBlur:b,onPasteLimit:this.onPasteLimit,sendMessage:M,maxLength:k,useFocusRing:!1,useSendButton:A})}renderLegacyAutocomplete(){var{legacyChannel:e,threadTs:t,forwardedRef:a}=this.props,n={tabcomplete:{searchOptions:{model_ob:e,in_thread:!!t},positionMenu:e=>{var t=a.current.getWrappedInstance?a.current.getWrappedInstance():a.current;e.style.width="".concat(t.container.offsetWidth,"px"),Object(ge.a)(e,t.container)}}};return this.renderInput({modules:n,legacyTextyClassName:"c-texty_input"})}renderModernAutocomplete(){var e=this,{autocompleteProps:t}=this.props;return u.a.createElement(ue.a,Object(n.a)({completeOnMembers:!0,completeOnChannels:!0,completeOnCommands:!0,completeOnEmoji:!0,channelId:this.props.channelId,threadTs:this.props.threadTs,renderInput:function(){return e.renderInput(...arguments)},shouldCompleteOnTab:!this.props.useSendButton},t))}renderActionButton(){var{viewContext:e,shouldShowActionsButton:t,channelId:a,threadTs:n}=this.props,{forcePlusMenuOpen:r}=this.state;return t?u.a.createElement(yt,{channelId:a,threadTs:n,viewContext:e,forceOpen:r,onOpen:this.onFileMenuOpen,onClose:this.onFileMenuClose}):null}renderFileButton(){var{channelId:e,threadTs:t,viewContext:a,enableFileButton:n,shouldShowActionsButton:r,isComposerPage:s,shouldShowTractorFilesCoachmark:i,setTractorFilesCoachmarkVisibility:o,useLegacyCreate:c,composerDraft:l}=this.props;if(r||!n)return null;var d=Object(re.d)(l),p=n&&u.a.createElement(Ir,{draftId:d,channelId:e,threadTs:t,viewContext:a,isComposerPage:s,isOpen:this.state.isPlusMenuOpen,forceOpen:this.state.forcePlusMenuOpen,onFileMenuOpen:this.onFileMenuOpen,onFileMenuClose:this.onFileMenuClose,useLegacyCreate:c,onFilesSelected:this.onFilesSelected});return i?u.a.createElement(fe.a,{orientation:"right",coachmarkElement:u.a.createElement(tractor_share_files_coachmark_TractorShareFilesCoachmark,{setTractorFilesCoachmarkVisibility:o}),style:{position:"absolute",bottom:4,height:34,width:34}},p):p}render(){var{className:e,useLegacyCreate:t,showFocusOutline:a,clientTheme:n}=this.props,r=m()(e,"p-message_input",{"p-message_input--focus-visible":a,["p-message_input--".concat(n)]:"light"!==n});return u.a.createElement("div",{className:r},t?this.renderLegacyAutocomplete():this.renderModernAutocomplete(),this.renderFileButton(),this.renderActionButton())}}message_input_MessageInput.defaultProps=Nt;var Pt={setChannelDraft:function(){return Object(P.e)(...arguments)},clearChannelDraft:function(){return Object(P.b)(...arguments)},enqueueToast:function(){return Object(w.c)(...arguments)},openModal:function(){return Object(T.e)(...arguments)},openSnippetDialog:function(){return H(...arguments)},triggerNavigateBack:e=>Object(W.a)(e),triggerNavigateForward:e=>Object(W.b)(e),setTractorFilesCoachmarkVisibility:function(){return Object(I.f)(...arguments)},maybeShowMessageNavigationEducationalToast:function(){return ae(...arguments)},uploadDraftFiles:function(){return Object(ne.a)(...arguments)}},At=Object(b.b)(function(e,t){var{channelId:a,threadTs:n,composerDraft:r}=t,s=Object(re.d)(r),i=Object(jt.a)(e,{draftId:s});return{legacyChannel:Object(R.a)()?null:Object(v.e)(e,a),enableJumbomoji:Object(E.a)(e),arrowHistory:Object(k.k)(e,"arrow_history"),draft:Object(A.b)(e,{channelId:a,threadTs:n}),featureOfflineMode:Object(O.m)(e,"feature_offline_mode"),featureSonicInputs:Object(O.m)(e,"feature_sonic_inputs"),clientToolBar:"composer_toolbar"===Object(j.c)(e,"composer_toolbar"),featureWysiwygComposer:Object(be.a)(e),wasRecentlyOnline:Object(C.h)(e),isClientOnline:Object(C.c)(e),logger:Object(me.a)({state:e}),clogger:Object(Q.a)({state:e}),teamId:Object(f.b)(e),shouldShowTractorFilesCoachmark:Object(y.b)(e),clientTheme:Object(S.c)(e),featureMessageNavigationShortcuts:Object(O.m)(e,"feature_message_navigation_shortcuts"),featureWysiwygAnchorText:Object(O.m)(e,"feature_wysiwyg_anchor_text"),shouldShowActionsButton:Object(Ct.e)(e),pendingFileIds:i}},Pt)(Object(ve.a)(message_input_MessageInput)),Mt=u.a.forwardRef((e,t)=>u.a.createElement(At,Object(n.a)({},e,{forwardedRef:t||u.a.createRef()}))),xt=a("fujP"),Rt=a("XLFM"),Dt=a("MREy"),Ft=a("Z0Cl"),Lt=a("zmn3"),Ut=a("h9PG"),Bt=a("M4HD"),Ht=a("SZMM"),Wt=a("1hAG"),qt=a("5mKg"),Gt=a("iZHp"),Kt=a("YB81"),Vt=a("PJXc"),zt=new K.b("sonic_pilot");function Yt(){return Object(R.a)()?"c-menu_item--sonic-placeholder":void 0}var Qt=Object(b.b)(e=>({featureSonicPlaceholderLabels:Object(O.m)(e,"feature_sonic_placeholder_labels")}))(function(e){var{featureSonicPlaceholderLabels:t}=e;return Object(R.a)()&&t?u.a.createElement("div",{className:"c-menu_item__placeholder"},zt.t("Coming soon")):null}),Xt=a("ROZo"),Jt=(Object(Xt.b)("TS.client.ui.files.backButtonOnClick"),Object(Xt.b)("TS.client.ui.files.chooseFile")),Zt=a("AFNo"),$t=a("+1yX"),ea=a("vmJv"),ta=Object(Zt.f)("Opens the docs Gantry app in a new window",(e,t)=>{var a=t(),n=Object(ea.a)(a),r=Object(Wt.d)(a),s=Object(qt.i)(r),i=Object(f.a)(a);if(Object($t.a)(n)){var o={origin_team:i||s,origin_channel:n};e(Object(Ht.f)({pathname:"/docs/".concat(s),queryStringParams:o,windowOptions:{frame:!0,center:!0,height:600,width:800,titleBarStyle:"default"}}))}});ta.meta={name:"createPost",key:"actionsDocsCreatePostCreatePost",description:"Opens the docs Gantry app in a new window"},ta.propTypes=d.default.object;var aa=a("n3t6"),na=a("h9dl"),ra=a("AzV5"),sa=a("sJy+"),ia=a("O0RF"),oa=a("Rszm"),ca=a("S3eg"),la=a("E6HO"),da=a("N0/W"),pa=a("KP4j"),ua=new K.b("menu_file"),ha={success:d.default.bool,response:d.default.object,wasShared:d.default.bool,channel:d.default.string,threadTs:d.default.string},ma=Object(M.b)("On Gdrive Creation Complete",function(e,t){var{success:a,response:n,wasShared:r,channel:s,threadTs:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t(),c=Object(pa.b)(o);a&&n&&n.data&&n.data.url&&!r&&c&&e(Object(la.c)({ephemeralType:"created_google_drive_document",message:{channel:s,thread_ts:i,slackbot_feels:"sad_surprise",text:ua.t("It looks like your browser is blocking popups so here\u2019s a link to your <{url}|document>",{url:n.data.url})}}))});ma.meta={name:"onGDriveCreateComplete",key:"actionsOnGdriveCompleteOnGDriveCreateComplete",description:"On Gdrive Creation Complete"},ma.propTypes=ha;var ba=ma,_a=a("OqoL"),ga=new K.b("files"),fa={type:d.default.string.isRequired,title:d.default.string,comment:d.default.string,blocks:d.default.array,broadcast:d.default.bool,shareFile:d.default.bool,channel:d.default.string,threadTs:d.default.string,reason:d.default.string},va=Object(M.b)("Create a Gdrive File",function(e,t){var{type:a,title:n,comment:r,blocks:s,broadcast:i,shareFile:o,channel:c,threadTs:l,reason:d}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=t(),u=Object(me.a)({state:p});o&&c&&e(Object(ca.a)({id:c}));var h=Object(ea.a)(p);return e(Object(da.b)({serviceStub:"gdrive",mimeType:"".concat("application/vnd.google-apps",".").concat(a),filename:n||"",reason:d||"create-gdrive-file"})).then(a=>{var p=Object(Ht.g)(a.url);p&&!p.closed||e(Object(pa.c)(!0)),o?e(Object(da.t)({channels:c,threadTs:l,title:n||"",initialComment:Object(_a.b)(t(),r),blocks:s,broadcast:i,link:a.url,reason:d||"create-gdrive-file"})).then(()=>e(ba({success:!0,response:a,wasShared:o,channel:h,threadTs:l}))).catch(t=>{u.error("CREATE_GOOGLE_DRIVE_FILE",t),e(Object(la.c)({ephemeralType:la.a.gdriveShareFileError,message:{channel:h,thread_ts:l,slackbot_feels:"sad_surprise",text:ga.t("Oh no! I couldn\u2019t import your newly created file")}}))}):e(ba({success:!0,response:a,wasShared:o,channel:h,threadTs:l}))}).catch(t=>{e(ba({success:!1}));var a=ga.t("Darn, that didn\u2019t work. Try again or <https://my.slack.com/help/requests/new|contact us> if it\u2019s still not working.");t&&t.data&&"filename_too_long"===t.data.error&&(a=ga.t("Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename.")),u.error("CREATE_GOOGLE_DRIVE_FILE",t),e(Object(la.c)({ephemeralType:la.a.unhandledGdriveCreate,message:{channel:h,thread_ts:l,slackbot_feels:"sad_surprise",text:a}}))})});va.meta={name:"createGdriveFile",key:"actionsCreateGdriveFileCreateGdriveFile",description:"Create a Gdrive File"},va.propTypes=fa;var Oa=va,ya=a("IyaR"),Ca=a("Y6FH"),ja=a("Hvpu"),Ea=a("Zwlx"),ka=a("iJ4v"),Sa=a("r6UO");a("T/b3");function Ia(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function wa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(a),!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ia(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ta=new K.b("create-gdoc-dialog"),Na={type:void 0,closeModal:i.a,getShareableChannelId:i.a,createGdriveFile:i.a,onGDriveCreateComplete:i.a,threadTs:void 0,msgText:"",setMsgText:i.a,msgOps:void 0,setMsgOps:i.a,converMsgOpsToRichTextMessage:i.a,featureWysiwygComposer:!1,selectedChannelId:void 0,setSelectedChannel:i.a,disallowedKeywordInMsgText:void 0,canPostInSelectedChannel:!1,canThread:!1,channelType:null};class create_gdoc_dialog_CreateGDocDialog extends p.Component{constructor(e){super(e),Object(c.a)(this,["onTextChange","onShareChannelChange","onGo","onCancel","onBroadcastChange","onTitleInputChange","onShareWithChange","setTitleInputRef"]),this.titleInput=null,this._isMounted=!1,this.state={overMsgLengthLimit:!1,titleInputValue:"",submitting:!1,shareWith:!0,broadcast:!1}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}onTextChange(e){var{text:t,msgOps:a,overLimit:n}=e,{featureWysiwygComposer:r}=this.props;r?this.props.setMsgOps(a):this.props.setMsgText(t),this.setState(()=>({overMsgLengthLimit:n}))}onShareChannelChange(e){this.props.setSelectedChannel(e)}onGo(){this.isGoButtonDisabled()||this.createGDocOnGo()}onCancel(){this.props.onGDriveCreateComplete(!1)}onTitleInputChange(e){this.setState(()=>({titleInputValue:e}))}onShareWithChange(e){var t=e.target.checked;this.setState(()=>({shareWith:!!t}))}onBroadcastChange(e){this.setState(()=>({broadcast:e}))}getCleanMsgText(){var{featureWysiwygComposer:e}=this.props;if(e)return null;var t=Object(aa.a)(this.props.msgText);return Object(s.a)(t)}getDialogTitle(){var{type:e}=this.props;switch(e){case"document":return Ta.t("Create a Google Document");case"presentation":return Ta.t("Create a Google Presentation");case"spreadsheet":return Ta.t("Create a Google Spreadsheet");default:return Ta.t("Create a Google file")}}setTitleInputRef(e){e&&(this.titleInput=e,this.focusTitleInput())}focusTitleInput(){this.titleInput&&this.titleInput.focus()}isGoButtonDisabled(){var{disallowedKeywordInMsgText:e,canPostInSelectedChannel:t,threadTs:a,canThread:n}=this.props,{overMsgLengthLimit:r,shareWith:s,titleInputValue:i,submitting:o}=this.state,c=i&&i.length>l.y;return s&&!t&&!a||s&&a&&!n||!!e||r||c||o}createGDocOnGo(){var{selectedChannelId:e,getShareableChannelId:t,type:a,threadTs:n,msgOps:r,featureWysiwygComposer:s}=this.props,{titleInputValue:i,shareWith:o,broadcast:c}=this.state;e&&(t({channelOrMemberId:e}).then(e=>{var t,l=this.getCleanMsgText(),d=i||Ta.t("Untitled",{fallbackHash:"621521f9a8788695ec292cbec54d2792cfdf0a7d",fallbackHashNs:"space"});s&&(t=this.props.converMsgOpsToRichTextMessage({msgOps:r,channelId:e,inThread:!!n})),this.props.createGdriveFile({type:a,title:d,comment:l,blocks:t,broadcast:c,shareFile:o,channel:e,threadTs:n,reason:"create-gdrive-file"}).then(()=>{this._isMounted&&this.setState(()=>({submitting:!1})),this.props.closeModal()})}),this.setState(()=>({submitting:!0})))}maybeRenderBroadcast(){var{threadTs:e,canPostInSelectedChannel:t,channelType:a,selectedChannelName:n}=this.props,{broadcast:r}=this.state;return e&&t?u.a.createElement("div",{className:"p-create_gdoc_dialog__broadcast_section"},u.a.createElement(Sa.a,{channelType:a,selectedChannelName:n,value:r,onChange:this.onBroadcastChange})):null}renderChannelPicker(){var{selectedChannelId:e}=this.props,{shareWith:t}=this.state;return u.a.createElement(Ca.a,{onChange:this.onShareChannelChange,initialChannelId:e,isDisabled:!t,dialogType:"create_gdoc_dialog"})}renderShareAlert(){var{shareWith:e}=this.state;if(!e)return null;var t=Object(Ea.a)(wa({},this.props));return t?u.a.createElement("div",{className:"p-share_dialog__section"},u.a.createElement(sa.d,{type:"inline",level:"warning",className:"margin_bottom_100"},t)):null}renderShareWith(){var{shareWith:e}=this.state;return u.a.createElement(ia.a,{text:Ta.t("Share with:"),htmlFor:"create-gdoc-share-with",type:"inline"},u.a.createElement(oa.a,{id:"create-gdoc-share-with",defaultChecked:e,onChange:this.onShareWithChange,"data-qa":"share_with"}))}renderTitleInput(){var{titleInputValue:e}=this.state,t="p-create_gdoc_dialog__title";return u.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__section_bottom_padding"},u.a.createElement(ia.a,{htmlFor:t,text:Ta.t("Title"),optional:!0},u.a.createElement(st.a,{id:t,name:t,maxCharacterLimit:l.y,counterMinimumCharacters:l.K,onChange:this.onTitleInputChange,value:e,ref:this.setTitleInputRef,"data-qa":"create_gdoc_title"})))}renderShareWithPicker(){var{selectedChannelId:e,threadTs:t}=this.props;return t?u.a.createElement(ka.a,{channelId:e,threadTs:t}):u.a.createElement("div",{className:"p-create_gdoc_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}renderMessageInput(){var{msgText:e}=this.props,{shareWith:t}=this.state;if(!t)return null;var a=Ta.t("Add a message, if you\u2019d like."),n=m()("p-share_dialog__section","p-share_dialog__create_gdoc_message_input");return u.a.createElement("div",{className:n},u.a.createElement(ya.a,{text:e,onTextChange:this.onTextChange,placeholder:a,ariaLabel:a,onEnter:this.onGo}),this.maybeRenderBroadcast())}render(){return u.a.createElement(N.a,{className:"p-create_gdoc_dialog",title:this.getDialogTitle(),useSlackScrollbarWithPadding:!0,goButtonText:Ta.t("Create"),onGo:this.onGo,onClose:this.onCancel,showCancelButton:!1,footerText:this.renderShareWithPicker(),goButtonIsDisabled:this.isGoButtonDisabled()},this.renderTitleInput(),this.renderShareAlert(),this.renderMessageInput())}}create_gdoc_dialog_CreateGDocDialog.defaultProps=Na;var Pa=Object(b.b)(function(e,t){var{selectedChannelId:a}=t;return wa({},Object(ja.b)(e,t),{selectedChannel:Object(v.e)(e,a)||Object(v.k)(e,a)})},e=>({closeModal:function(){return e(Object(T.a)(...arguments))},getShareableChannelId:function(){return e(Object(na.a)(...arguments))},createGdriveFile:function(){return e(Oa(...arguments))},onGDriveCreateComplete:function(){return e(ba(...arguments))},converMsgOpsToRichTextMessage:function(){return e(Object(ra.a)(...arguments))}}))(create_gdoc_dialog_CreateGDocDialog),Aa=Object(ja.a)(Pa),Ma=Object(M.b)("Opens the create gdoc file dialog",(e,t,a)=>{e(Object(T.e)({element:u.a.createElement(Aa,a)}))});Ma.meta={name:"openCreateGDocDialog",key:"actionsOpenCreateGdocDialogOpenCreateGDocDialog",description:"Opens the create gdoc file dialog"},Ma.propTypes={type:d.default.string,displayType:d.default.string,initialChannelId:d.default.string};var xa=Ma,Ra=a("gSGL"),Da=a("6LIB"),Fa=a("syB0"),La=a("oT5T"),Ua=a("vSXf"),Ba=new K.b("file-upload"),Ha={SINGLE_LINK_MISSING:"single",MULTIPLE_LINK_MISSING:"multiple",WEBLINK:"weblink"};function Wa(e){var{type:t,featureBoxContentPicker:a,proceedToNextDialog:n}=e,r=a?Ba.t("Your file can\u2019t be added"):"",s="";switch(t){case Ha.SINGLE_LINK_MISSING:s=a?Ba.t("Your Box file is missing a shared link, which we\u2019ll need to add it to Slack."):"";break;case Ha.MULTIPLE_LINK_MISSING:s=a?Ba.t("One or more of your Box files is missing a shared link, which we\u2019ll need to add it to Slack."):"";break;case Ha.WEBLINK:s=a?Ba.t("Apologies! Links from Box can\u2019t be added this way yet."):"";break;default:return null}var o=n!==i.a?()=>{Object(Fa.a)(()=>{n()})}:i.a;return u.a.createElement(La.a,{title:r,onGo:o},u.a.createElement("p",null,s))}Wa.defaultProps={type:Ha.SINGLE,proceedToNextDialog:i.a,featureBoxContentPicker:!1};var qa=Object(Ua.a)("feature_box_content_picker")(Wa),Ga=Object(Zt.f)("Display Box Link Alert error",(e,t,a)=>e(Object(T.e)({element:u.a.createElement(qa,a)})));Ga.meta={name:"openBoxLinkAlert",key:"componentsShareDialogsBoxLinkAlertOpenBoxLinkAlert",description:"Display Box Link Alert error"},Ga.propTypes={};var Ka=Ga,Va=a("yJbr"),za=a("hqEo"),Ya=a("TwEf"),Qa=a("fp5s"),Xa=a("g5qt"),Ja=a("zaOK");function Za(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var $a={url:d.default.string.isRequired,windowFeatures:d.default.object,hidden:d.default.bool,processEvent:d.default.func},en={width:590,height:520},tn=Object(M.b)("Open third-party file picker window and handle callback",function(e,t){var{hidden:a,url:n,windowFeatures:s,processEvent:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=Object(me.a)({getState:t,label:"REMOTE-FILE-PICKER"}),l=t(),d=Object(f.b)(l),p=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(a),!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Za(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},en,{},s,{parentTeamId:d});Object(Y.v)()&&(Ja.a.canOpenURLInWindow(l,n)||c.error("REMOTE-FILE-PICKER","Trying to open remote file picker URL in SSB but URL is not whitelisted: ".concat(n)));var u,h,m,b=Object(Qa.a)("fp_"),_="".concat(n).concat(n.includes("?")?"&":"?","source_id=").concat(b),g=()=>u.cancel();try{if(Object(Y.v)()&&!Object(Xa.V)()?(h=a?Object(Ht.g)(_,{show:!1,skipTaskbar:!0,frame:!1,opacity:0,transparent:!0,focusable:!1,parentTeamId:d}):Object(Ht.g)(_,p)).addListener("close",g):a?((m=document.createElement("iframe")).setAttribute("data-qa","picker-frame"),m.src=_,m.style.cssText="display:none",document.body.appendChild(m),h=m.contentWindow):(h=Object(Ht.g)(_,p))&&!Object(Xa.V)()&&h.addEventListener("beforeunload",g),!h)return Promise.reject(new Error("Unable to open window"))}catch(v){return Promise.reject(v)}return(u=(e=>new Promise((t,a,n)=>{var r,s=n=>{var s=e=>{a(e),r()};try{e(n,{resolve:e=>{t(e),r()},reject:s})}catch(v){s(v)}};n(r=(()=>window.removeEventListener("message",s))),window.addEventListener("message",s)}))(o||((e,t)=>(function(a){var{resolve:n,reject:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object(Y.v)()||Object(Xa.V)()){if(a.source!==e)return;if(a.origin!==window.location.origin)return}if(a.data&&a.data._sourceId===t){a.data.ok&&n(a.data);var s=new Error("Data not OK");s.data=a.data,r(s)}}))(h,b))).finally(()=>{m?m.remove():h&&h.close()}).catch(i.a),u});tn.meta={name:"openRemoteFilePicker",key:"actionsCloudFilePickersOpenRemoteFilePickerOpenRemoteFilePicker",description:"Open third-party file picker window and handle callback"},tn.propTypes=$a;var an=tn,nn=new K.b("files"),rn={channelId:d.default.string.isRequired,threadTs:d.default.string,metadata:d.default.shape({fileUploadAction:d.default.oneOfType([d.default.number,d.default.string]),fileUploadSrc:d.default.oneOfType([d.default.number,d.default.string])})},sn=e=>{var t=Y.l?"A06147X5W":"A0F82E57C",a=Object(Wt.d)(e);return Object(qt.n)(a,"/apps/".concat(t))},on=Object(M.b)("Open a window to pick a Box file",function(e,t){var{channelId:a,threadTs:n,metadata:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=t(),o=Object(f.b)(s),c=Object(O.m)(s,"feature_sonic_cloud_files_picker"),l=Object(O.m)(s,"feature_box_content_picker");if(!c||!l)return Object(Va.k)(a,n,r);var d=Object(Ut.a)(s,"box_app_installed"),p="".concat(location.origin,"/files/import/box?team=").concat(o).concat(Y.o?"&js_path=1":"");return e(an({url:p,windowFeatures:{height:675,width:925}})).then(function(){var{chosen_files:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=[],o=[],c=[];t.forEach(t=>{t&&((e=>!!(Object(Da.a)(e)&&"file"===e.type&&Object(Ra.a)(e.name)&&Object(Da.a)(e.shared_link)&&Object(Ra.a)(e.shared_link.url)))(t)?d?e(Object(Ya.a)({channel:a,thread_ts:n,text:t.shared_link.url})):s.push({name:t.name,link:t.shared_link.url,is_box:!0}):"web_link"===t.type?d?e(Object(Ya.a)({channel:a,thread_ts:n,text:t.url})):c.push({name:t.name,url:t.url}):o.push(t))});var l=s.length&&!d?()=>e(Object(za.a)({files:s,initialChannelId:a,threadTs:n,metadata:r})):i.a,p=c.length?()=>e(Ka({type:Ha.WEBLINK,proceedToNextDialog:l})):l;return o.length>0?e(Ka({type:t.length>1?Ha.MULTIPLE_LINK_MISSING:Ha.SINGLE_LINK_MISSING,proceedToNextDialog:p})):c.length?p():l()}).catch(r=>{if(r&&r.data&&r.data.error)switch(r.data.error){case"no_access_token":case"unauthorized":e(Object(la.c)({ephemeralType:la.a.boxFilePickerError,message:{channel:a,thread_ts:n,slackbot_feels:"sad_surprise",text:l?nn.t("Apologies, but you\u2019ll need to <{url}|reconnect Box to Slack> to continue. It only takes a click or two!",{url:sn(t())}):""}}))}throw r})});on.meta={name:"openBoxFilePicker",key:"actionsCloudFilePickersOpenBoxFilePickerOpenBoxFilePicker",description:"Open a window to pick a Box file"},on.propTypes=rn;var cn,ln=on,dn=a("/1FC"),pn=a("c8Bs"),un={channelId:d.default.string.isRequired,threadTs:d.default.string,metadata:d.default.shape({fileUploadAction:d.default.oneOfType([d.default.number,d.default.string]),fileUploadSrc:d.default.oneOfType([d.default.number,d.default.string])})},hn=e=>!(!e||"object"!=typeof e)&&("string"==typeof e.name&&("number"==typeof e.bytes&&("string"==typeof e.link&&(!e.icon||"string"==typeof e.icon)))),mn=function(e){var{resolve:t,reject:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("https://www.dropbox.com"===e.origin){var n;try{n="string"==typeof e.data?JSON.parse(e.data):e.data}catch(r){return}if(n&&"object"==typeof n)switch(n.method){case"files_selected":Object(dn.a)(n.params)&&Object(pn.a)(n.params,hn)&&t({chosen_files:n.params}),a(new Error("Invalid file(s) from Dropbox"));break;case"close_dialog":t({chosen_files:[]})}}},bn=Object(M.b)("Open a window to pick a Box file",function(e,t){var{channelId:a,threadTs:n,metadata:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Object(O.m)(t(),"feature_sonic_cloud_files_picker"))return Object(Va.l)(a,n,r);var s=t(),i=Object(f.b)(s);cn&&cn.isPending()&&cn.cancel();var o="".concat(location.origin,"/files/import/dropbox?team=").concat(i);return(cn=e(an({url:o,processEvent:mn,windowFeatures:{height:552,width:640}}))).then(function(){var{chosen_files:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t.map(e=>({name:e.name,size:e.bytes,link:e.link,icon:e.icon,is_dropbox:!0}));return s.length?e(Object(za.a)({files:s,initialChannelId:a,threadTs:n,metadata:r})):null})});bn.meta={name:"openDropbox",key:"actionsCloudFilePickersOpenDropboxFilePickerOpenDropbox",description:"Open a window to pick a Box file"},bn.propTypes=un;var _n=bn,gn=new K.b("files"),fn={channelId:d.default.string.isRequired,threadTs:d.default.string,metadata:d.default.shape({fileUploadAction:d.default.oneOfType([d.default.number,d.default.string]),fileUploadSrc:d.default.oneOfType([d.default.number,d.default.string])}),reason:d.default.string},vn="auth_required",On="filename_too_long",yn="unidentified_external_url",Cn="file_type_has_no_handler",jn=e=>{var t=Object(Wt.d)(e);return Object(qt.n)(t,"apps/".concat(Y.l?"A0BDLPR2L":"A6NL8MJ6Q"))},En=Object(M.b)("Open a window to pick a GDrive file",function(e,t){var{channelId:a,threadTs:n,metadata:r,reason:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Object(O.m)(t(),"feature_sonic_cloud_files_picker"))return Object(Va.i)(a,n,r);var i=t(),o=Object(f.b)(i),c="".concat(location.origin,"/files/import/gdrive?team=").concat(o);return fetch(c,{cache:"no-store",mode:"same-origin",credentials:"same-origin"}).then(function(){var{status:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(403===e)throw new Error(vn)}).then(()=>e(an({url:c,windowFeatures:{height:675}}))).then(function(){var{chosen_files:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=Date.now();return Promise.map(i,i=>e(Object(da.t)({channels:a,threadTs:n,link:i.url,reason:s||"open-gdrive-file-picker"})).then(()=>{Object(Q.a)({getState:t}).track(X.EventId.FILE_COMPLETE_UPLOAD_SUCCESS,{[X.CoreKeys.type]:X.FileUploadType.EXTERNAL,[X.CoreKeys.duration]:Date.now()-o,[X.CoreKeys.has_upload_message]:!1,[X.CoreKeys.file_count]:1,[X.CoreKeys.retry_count]:0,[X.CoreKeys.upload_size]:i.sizeBytes?i.sizeBytes:0,[X.CoreKeys.retry_reason]:"",[X.CoreKeys.did_disconnect_during_upload]:!1,[X.CoreKeys.file_upload_action]:r&&r.fileUploadAction,[X.CoreKeys.file_upload_src]:r&&r.fileUploadSrc})}))}).catch(r=>{var s=function(){var{text:t,ephemeralType:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(Object(la.c)({ephemeralType:r||la.a.gdriveShareFileError,message:{channel:a,thread_ts:n,slackbot_feels:"sad_surprise",text:t||gn.t("Hmm, something went wrong. Try again?",{fallbackHash:"83743049d08a764e93ca79d5621ee1e19f02bc75",fallbackHashNs:"app_management_modal"})}}))},i=r&&(r.data&&r.data.error||r.message);return i===On?s({text:"Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename."}):[Cn,yn].includes(i)&&r.args&&r.args.link?e(Object(Ya.a)({channel:a,thread_ts:n,text:r.args.link,unfurl_links:!1,unfurl_media:!1})).then(()=>s({ephemeralType:la.a.fileTypeHasNoHandler,text:gn.t("We don\u2019t currently support importing that type of Google Drive file, but we included the link so that others can access it.")})).catch(s):i===vn?s({text:gn.t("Looks like you\u2019re trying to add a Google Drive file \u2014 first you\u2019ll need to connect <{url}|Google Drive to Slack>.\n\n Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <{url}|Learn more about using Google Drive in Slack>.",{url:jn(t())})}):(Object(me.a)({getState:t}).error("GDRIVE_FILE_PICKER",r),s())})});En.meta={name:"openGdriveFilePicker",key:"actionsCloudFilePickersOpenGdriveFilePickerOpenGdriveFilePicker",description:"Open a window to pick a GDrive file"},En.propTypes=fn;var kn=En,Sn=a("XRnC"),In=a("lSe/"),wn=new K.b("files"),Tn={channelId:d.default.string.isRequired,threadTs:d.default.string,metadata:d.default.shape({fileUploadAction:d.default.oneOfType([d.default.number,d.default.string]),fileUploadSrc:d.default.oneOfType([d.default.number,d.default.string])}),reason:d.default.string},Nn="auth_required",Pn="onenote_not_supported",An="popupOpen",Mn="badResponse",xn=e=>{var t=Object(Wt.d)(e);return Object(qt.n)(t,Y.l?"apps/A061CBSP3":"apps/A53TM6XA9")},Rn=Object(M.b)("Open a window to pick a OneDrive file",function(e,t){var{channelId:a,threadTs:n,metadata:r,reason:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Object(O.m)(t(),"feature_sonic_cloud_files_picker"))return Object(Va.j)(a,n,r);var i=t(),o=Object(f.b)(i),c="".concat(location.origin,"/files/import/onedrive?team=").concat(o).concat(Y.o?"&js_path=1":"");if(Y.l&&Object(Ut.a)(i,"onedrive_app_installed")){var l=Object(Y.i)().envSubdomain;"dev"!==l&&"dev6"!==l&&Object(In.c)("The OneDrive picker for the OneDrive v2 app won't work in dev environments other than dev-main or dev6. If you are doing active development, please attach to dev6.")}return fetch(c,{cache:"no-store",mode:"same-origin",credentials:"same-origin"}).then(function(){var{status:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(403===e)throw new Error(Nn)}).then(()=>e(an({url:c,hidden:!0}))).then(function(){var{chosen_files:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=Date.now();return Promise.map(i,i=>e(function(){var{state:e,channelId:t,threadTs:a,reason:n,link:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Ut.a)(e,"onedrive_app_installed")?Object(Sn.a)({channelId:t,text:r,shouldBroadcast:!1}):Object(da.t)({channels:t,threadTs:a,link:r,reason:n||"open-onedrive-file-picker"})}({state:t(),channelId:a,threadTs:n,reason:s,link:i})).then(()=>{Object(Q.a)({getState:t}).track(X.EventId.FILE_COMPLETE_UPLOAD_SUCCESS,{[X.CoreKeys.type]:X.FileUploadType.EXTERNAL,[X.CoreKeys.duration]:Date.now()-o,[X.CoreKeys.has_upload_message]:!1,[X.CoreKeys.file_count]:1,[X.CoreKeys.retry_count]:0,[X.CoreKeys.upload_size]:0,[X.CoreKeys.retry_reason]:"",[X.CoreKeys.did_disconnect_during_upload]:!1,[X.CoreKeys.file_upload_action]:r&&r.fileUploadAction,[X.CoreKeys.file_upload_src]:r&&r.fileUploadSrc})}).catch(e=>{throw e.subtype="files.uploadExternal",e}))}).catch(r=>{var s=function(){var{text:t,ephemeralType:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(Object(la.c)({ephemeralType:r||la.a.onedriveSdkError,message:{channel:a,thread_ts:n,slackbot_feels:"sad_surprise",text:t||wn.t("Darn, that didn\u2019t work. Try again or <https://my.slack.com/help/requests/new|contact us> if it\u2019s still not working.")}}))},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.data?e.method&&"files.uploadExternal"===e.method&&e.data.error?e.data.error:e.data.method&&"onedrive_picker"===e.data.method&&e.data.error_code?e.data.error_code:e.message||"Data not OK":e.message||"Data not OK"}(r);if(i===Nn)return s({text:wn.t("Looks like you\u2019re trying to add a OneDrive file \u2014 first you\u2019ll need to connect <{url}|OneDrive to Slack>.\n\n Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <{url}|Learn more about using OneDrive in Slack>.",{url:xn(t())})});if(i===Pn)return s({text:wn.t("It seems like we\u2019re not able to import OneNote notebooks.")});if(i===An)return e(Object(pa.c)(!0));if(i===Mn){var o=r&&r.data&&r.data.error||i;return r.message=o,Object(me.a)({getState:t}).error("OneDrive_plus_button_import_failure",r),s({text:wn.t("Sorry, something went wrong. Please confirm that your OneDrive account has been fully set up and try again.\nIf the problem persists, please let us know by contacting <mailto:feedback@slack.com|feedback@slack.com>")})}return r.message=i,Object(me.a)({getState:t}).error("OneDrive_plus_button_import_failure",r,r.data&&r.data.error),s()})});Rn.meta={name:"openOneDriveFilePicker",key:"actionsCloudFilePickersOpenOnedriveFilePickerOpenOneDriveFilePicker",description:"Open a window to pick a OneDrive file"},Rn.propTypes=Tn;var Dn=Rn,Fn=a("uPpK"),Ln=a("bo4X"),Un=a("pmOY"),Bn=a("FdTv"),Hn=a("8W09"),Wn=a("CGJF"),qn=a("AjwY"),Gn=a("mIgp"),Kn=a("cD5Y"),Vn=a("eK0w"),zn=a("YLnb"),Yn=a("b7Ww"),Qn=a("1Uzj"),Xn=(a("GoIT"),a("fX3E"));function Jn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Zn=new K.b("menu_file"),$n=Object(Qn.a)(Yn.a),er={threadTs:void 0,viewContext:void 0,files:[],filetype:"",currentUser:"",user:!1,scrollmark:void 0,fetchFilesPre:i.a,fetchFilesPost:i.a,saveScrollmark:i.a,setFiletype:i.a,setUser:i.a,getRecentFilesForUser:i.a,closeModal:i.a,openShareDialog:i.a,isInEnforceFileLimitTreatment:!1,hiddenFileInputRef:void 0,showUpload:!1,isLoading:d.default.bool,setisLoading:d.default.func};class omnipicker_dialog_OmniPickerDialog extends p.PureComponent{constructor(e){super(e),Object(c.a)(this,["onFileClick","onScroll","fetchPre","fetchPost","fetchAround","renderRow","renderFile","clogPricingLinkClick","renderBody","isEmpty","onModalCancel","renderList","renderDynamicList","handleFileTypeChange","handleYourFilesClick","handleYourWorkspaceClick","fetchAllFiles","selectFileFromComputer"]),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.keys=null,this.requestAll=null,this.layout=new zn.a,this.list=u.a.createRef()}componentDidMount(){var{scrollmark:e,clogger:t,user:a}=this.props;if(e){var{key:n,offset:r}=e;this.layout.setAnchor(n,r),this.props.saveScrollmark(null)}if(a){var s={types:this.props.filetype};this.fetchAllFiles(s)}this.shouldShowStorageWarningBanner()&&t.track(X.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:X.UiAction.IMPRESSION,step:X.UiStep.FILE_PANE,ui_component:X.UiComponent.FILE_STORAGE_LIMIT_BANNER}}})}componentWillUnmount(){this.props.setFiletype(""),this.requestAll&&this.requestAll.cancel()}onFileClick(e){var{id:t}=e,a=this.list.current;if(a&&t){var{user:n,clogger:r}=this.props,s=n?X.EventId.OMNIPICKER_DIALOG_SHARE_YOUR_RECENT_FILE:X.EventId.OMNIPICKER_DIALOG_SHARE_WORKSPACE_FILE;this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-a.getScrollTop()}),this.props.openShareDialog({fileId:t,showFileType:!0}),r.track(s,{contexts:{ui_context:{action:X.UiAction.CLICK,step:X.UiStep.OMNIPICKER_DIALOG}}})}}onModalCancel(){var{clogger:e}=this.props;this.props.closeModal(),e.track(X.EventId.OMNIPICKER_DIALOG_CLOSE_DIALOG,{contexts:{ui_context:{action:X.UiAction.CLICK,step:X.UiStep.OMNIPICKER_DIALOG}}})}onScroll(){this.layout.anchor&&this.layout.setAnchor(!1)}UNSAFE_componentWillReceiveProps(e){var{filetype:t,user:a}=this.props;e.filetype===t&&e.user===a||(this.requestPre&&this.requestPre.cancel(),this.requestPost&&this.requestPost.cancel(),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.layout&&this.layout.setAnchor(!1))}clogPricingLinkClick(){this.props.clogger.track(X.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:X.UiAction.CLICK,step:X.UiStep.OMNIPICKER_DIALOG,ui_element:X.UiElement.PRICING_LINK,ui_component:X.UiComponent.FILE_STORAGE_LIMIT_BANNER}}})}fetchAllFiles(e){this.props.setisLoading(!0),this.requestAll=this.props.getRecentFilesForUser(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(a),!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jn(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({user:this.props.currentUser,reason:"get-recent-files",count:1e3},e))}fetchAround(){return(!this.requestPre||!this.requestPost)&&(this.reachedEnd?this.fetchPre():this.reachedStart?this.fetchPost():this.fetchPre())}fetchPost(){var e=this;if(this.requestPost)return!1;if(this.reachedEnd)return!1;var{filetype:t}=this.props,a={types:t};return this.requestPost=this.props.fetchFilesPost(a),this.requestPost.then(function(){var{paging:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{page:a,pages:n}=t;a>=n&&(e.reachedEnd=!0)}).finally(()=>{this.requestPost=null})}fetchPre(){var e=this;if(this.requestPre)return!1;if(this.reachedStart)return!1;var{filetype:t}=this.props,a={types:t};return this.requestPre=this.props.fetchFilesPre(a),this.reachedStart||this.props.setisLoading(!0),this.requestPre.then(function(){var{paging:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{page:a}=t;1===a&&(e.reachedStart=!0,e.props.setisLoading(!1))}).finally(()=>{this.requestPre=null})}handleFileTypeChange(e){if(this.props.setFiletype(e),this.props.user){var t={types:e};this.fetchAllFiles(t)}}handleYourFilesClick(){var{filetype:e,clogger:t}=this.props;this.props.setUser(!0);var a={types:e};this.fetchAllFiles(a),t.track(X.EventId.OMNIPICKER_DIALOG_VIEW_YOUR_FILES,{contexts:{ui_context:{action:X.UiAction.CLICK,step:X.UiStep.OMNIPICKER_DIALOG}}})}handleYourWorkspaceClick(){var{clogger:e}=this.props;this.props.setUser(!1),e.track(X.EventId.OMNIPICKER_DIALOG_VIEW_WORKSPACE_FILES,{contexts:{ui_context:{action:X.UiAction.CLICK,step:X.UiStep.OMNIPICKER_DIALOG}}})}isEmpty(){var{user:e}=this.props;return e?!this.props.files.length:!this.props.files.length&&this.reachedStart&&this.reachedEnd}selectFileFromComputer(){var{channelId:e,threadTs:t,viewContext:a,hiddenFileInputRef:n,clogger:r,logger:s}=this.props;n&&n.current?(n.current.click(),this.props.closeModal()):Object(R.a)()?s.error("MSG_INPUT_FILE_BTN","Missing hidden input"):Jt(e,t,a),r.track(X.EventId.OMNIPICKER_DIALOG_UPLOAD_FILE,{contexts:{ui_context:{action:X.UiAction.CLICK,step:X.UiStep.OMNIPICKER_DIALOG}}})}shouldShowStorageWarningBanner(){return this.props.isInEnforceFileLimitTreatment}renderBody(){var{user:e,files:t,isLoading:a}=this.props,n=t.map(e=>e.id);return this.keys=[...n],e||this.reachedEnd||this.keys.push("Loading".concat(this.keys.length)),this.isEmpty()&&this.keys.push("Placeholder"),a?u.a.createElement("div",{className:"p-omnipicker_dialog__loading_spinner"},u.a.createElement(Kn.a,{size:"jumbo"})):u.a.createElement("div",{className:"p-omnipicker_dialog__list_content","data-qa":"omnipicker_dialog_list"},u.a.createElement(u.a.Fragment,null,this.shouldShowStorageWarningBanner()&&this.renderStorageWarningBanner(),e?this.renderList():this.renderDynamicList()))}renderDynamicList(){return u.a.createElement(Fn.a,null,e=>{var{width:t,height:a}=e;return u.a.createElement(Vn.a,{height:a,width:t,keys:this.keys,layout:this.layout,rowRenderer:this.renderRow,onScroll:this.onScroll,ref:this.list,loadAround:this.fetchAround,loadPre:this.fetchPre,loadPost:this.fetchPost,onItemTabWithin:this.onItemTabWithin,onItemClick:this.onFileClick})})}renderFile(e){var t=this.props.files[e]&&this.props.files[e].id;if(!t)return null;var a=e===this.props.files.length-1,n=m()("p-omnipicker_dialog__file",{"p-omnipicker_dialog__file--last":a});return u.a.createElement($n,{fileId:t,className:n,showActions:!1,"data-qa":"test-file",fullWidth:!0})}renderList(){return u.a.createElement(Fn.a,null,e=>{var{width:t,height:a}=e;return u.a.createElement(Gn.b,{height:a,width:t,keys:this.keys,ref:this.list,layout:this.layout,onScroll:this.onScroll,rowRenderer:this.renderRow,onItemClick:this.onFileClick})})}renderRow(e){var t=this.keys[e];if(!t)return null;switch(t[0]){case"L":return u.a.createElement("div",{className:"p-omnipicker_dialog__list--loading"},Zn.t("Loading\u2026"));case"P":return u.a.createElement("div",{className:"p-omnipicker_dialog__list--empty"},Zn.t("No matching files were found."));default:return this.renderFile(e)}}renderStorageWarningBanner(){var e=new K.b("files");return u.a.createElement("div",{className:"p-omnipicker_dialog__storage-warning-container"},u.a.createElement("div",{className:"display_flex"},u.a.createElement(Le.b,{className:"p-message_limit_banner__graphic",type:"eye-closed"}),u.a.createElement("div",null,u.a.createElement("span",null,e.rt("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit. <a>See paid plans</a>",null,e=>{var{text:t}=e;return u.a.createElement(et.a,{href:Object(qn.j)({entryPoint:"omnipicker_dialog"}),onClick:this.clogPricingLinkClick,target:"new","data-qa":"file-flexpane__pricing-link"},t)})))))}render(){var{filetype:e,user:t,showUpload:a}=this.props,n=Zn.t("Your recent files"),r=Zn.t("Workspace files"),s=t?n:r;return u.a.createElement(Ln.a,{className:"p-omnipicker_dialog",fullscreen:!0,maxWidth:"950px",showCloseButton:!1,closeModal:this.props.closeModal},u.a.createElement(Un.a,{className:"p-omnipicker_dialog__header"},u.a.createElement(Bn.a,{id:"unshareConfirmPost__title-bar",title:"Browse","data-qa":"dialog_header"}),u.a.createElement("div",{className:"p-omnipicker_dialog__header--selector"},u.a.createElement("h3",null,s),u.a.createElement(Xn.a,{filetype:e,onChange:this.handleFileTypeChange}))),u.a.createElement("div",{className:"p-omnipicker_dialog__content"},u.a.createElement("div",{className:"p-omnipicker_dialog__menu"},u.a.createElement(Dt.f,null,u.a.createElement(Dt.b,{"data-qa":"view_your_files_menu_item",label:Zn.t("Your files"),disabled:t,className:t?"c-menu_item__button__selected":"",icon:u.a.createElement(Le.b,{type:"user"}),onSelected:this.handleYourFilesClick}),u.a.createElement(Dt.b,{"data-qa":"view_your_workspace_files_menu_item",label:Zn.t("Your workspace"),disabled:!t,className:t?"":"c-menu_item__button__selected",icon:u.a.createElement(Le.b,{type:"slack"}),onSelected:this.handleYourWorkspaceClick}),a&&u.a.createElement(Dt.b,{"data-qa":"add_file_from_computer_menu_item",label:Zn.t("Your computer"),icon:u.a.createElement(Le.b,{type:"laptop"}),onSelected:this.selectFileFromComputer}))),u.a.createElement("div",{className:"p-omnipicker_dialog__list"},this.renderBody())),u.a.createElement(Hn.a,{"data-qa":"dialog_footer"},u.a.createElement(Wn.a,null,u.a.createElement(Rt.d,{type:"outline",onClick:this.onModalCancel,"data-qa":"dialog_cancel"},"Cancel"))))}}omnipicker_dialog_OmniPickerDialog.defaultProps=er;var tr={fetchFilesPre:function(){return Object(Kt.c)(...arguments)},fetchFilesPost:function(){return Object(Kt.b)(...arguments)},saveScrollmark:function(){return Object(Kt.l)(...arguments)},setFiletype:function(){return Object(Kt.m)(...arguments)},closeModal:function(){return Object(T.a)(...arguments)},getRecentFilesForUser:function(){return Object(Kt.k)(...arguments)},openShareDialog:function(){return Object(Gt.a)(...arguments)},setUser:function(){return Object(Kt.n)(...arguments)},setisLoading:function(){return Object(Kt.p)(...arguments)}},ar=Object(b.b)(e=>({files:Object(Kt.d)(e),scrollmark:Object(Kt.h)(e),filetype:Object(Kt.e)(e),clogger:Object(Q.a)({state:e}),logger:Object(me.a)({state:e}),currentUser:Object(O.d)(e),user:Object(Kt.i)(e),isLoading:Object(Kt.j)(e)}),tr)(omnipicker_dialog_OmniPickerDialog),nr=Object(M.b)("Opens the omni-picker file dialog",(e,t,a)=>{e(Object(T.e)({element:u.a.createElement(ar,a)}))});nr.meta={name:"openOmniPickerDialog",key:"actionsOpenOmnipickerDialogOpenOmniPickerDialog",description:"Opens the omni-picker file dialog"},nr.propTypes={type:d.default.string,displayType:d.default.string,initialChannelId:d.default.string};var rr=nr,sr=a("EHyS"),ir=a("hjTk"),or=a("x4bP"),cr=a("cErB"),lr=Object(M.b)("Creates and opens a legacy Post",function(e,t){var{openInBrowser:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(or.a)()){var n=t(),r=Object(Wt.d)(n),s=Object(qt.n)(r,"/files/create/post".concat(location.search)),i=Object(f.a)(n);s=Object(cr.p)(s,"origin_team",i||r.id);var o=Object(ea.a)(n);s=Object(cr.p)(s,"origin_channel",Object($t.a)(o)?o:""),Object(ir.a)(s)}else Object(Va.b)(null,a)});lr.meta={name:"createAndOpenLegacyPost",key:"actionsCreateAndOpenLegacyPostCreateAndOpenLegacyPost",description:"Creates and opens a legacy Post"},lr.defaultProps={openInBrowser:!0},lr.propTypes={openInBrowser:d.default.bool};a("GdkL");var dr=new K.b("menu_file"),pr={channelId:void 0,threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,menuProps:{},featureDocs:!1,featureSonicInputs:!1,featureSonicSnippets:!1,featureRecentFilesOmnipicker:!1,featurePlusMenuAddAppsLink:!1,hiddenFileInputRef:void 0,createDocPost:i.a,showBoxMenuItem:!1,showDropboxMenuItem:!1,boxAppInstalled:!1,showGdriveMenuItem:!1,showOneDriveMenuItem:!1,openSnippetDialog:i.a,openCreateGDocDialog:i.a,openBoxFilePicker:i.a,openOnedriveFilePicker:i.a,openDropboxFilePicker:i.a,openGdriveFilePicker:i.a,getRecentFilesForUser:i.a,openShareDialog:i.a,featureBoxContentPicker:!1,featureSonicCloudFilesPicker:!1,currentUser:void 0,featureModernGdriveCreate:!1,recentFiles:[],openOmniPickerDialog:i.a,setUser:i.a,setfirstLoad:i.a,setisLoading:i.a,firstLoad:!1,isLoading:!1,isBoxAuthed:!1,currentTeam:void 0,draftId:void 0,isComposerPage:!1},ur="At06175UHW",hr="At0EFRCDPW",mr="A0F82E57C",br="A06147X5W";class new_file_menu_NewFileMenu extends p.Component{constructor(e){super(e),this.activeCloudServices=[],this.requestAll=null,Object(c.a)(this,["selectFileFromComputer","createDoc","createSnippet","createLegacyPost","createGDRiveDocument","createGDRiveSpreadsheet","createGDRivePresentation","renderCreateNewSubmenu","clogAddAppsClick","handleBoxFileProvider","handleDropboxFileProvider","handleGdriveFileProvider","handleOnedriveFileProvider","renderMultipleCloudServices","setRecentFiles","handleRecentFile","handleYourRecentFilesPicker","renderRecents","renderRecentsSection"])}componentDidMount(){var{featureRecentFilesOmnipicker:e}=this.props;e&&this.setRecentFiles()}componentWillUnmount(){this.requestAll&&this.requestAll.cancel()}setRecentFiles(){var{currentUser:e,firstLoad:t}=this.props;this.props.setUser(!0),t||this.props.setisLoading(!0),this.requestAll=this.props.getRecentFilesForUser({user:e,reason:"get-recent-files",forMenu:!0,count:1e3}).then(()=>{t||this.props.setfirstLoad(!0)})}selectFileFromComputer(){var{channelId:e,threadTs:t,viewContext:a,hiddenFileInputRef:n,clogger:r,logger:s}=this.props;n&&n.current?(n.current.click(),r.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_upload"}}})):Object(R.a)()?s.error("MSG_INPUT_FILE_BTN","Missing hidden input"):Jt(e,t,a)}createDoc(){this.props.createDocPost()}createSnippet(){var{clogger:e,channelId:t,viewContext:a,threadTs:n}=this.props;e.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_snippet"}}});var r=Object(Ae.a)({viewContext:a,channelId:t,threadTs:n});this.props.openSnippetDialog({initialText:r&&r.getDisplayValue?r.getDisplayValue():"",initialContents:r&&r.getContents?r.getContents():void 0,initialChannelId:t,threadTs:n,viewContext:a}),r&&r.clear()}createLegacyPost(e){var t=Object(sr.a)(e);this.props.createAndOpenLegacyPost({openInBrowser:t}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_space"}}})}createGDRiveDocument(){this.props.openCreateGDocDialog({type:"document",displayType:this.props.featureSonicInputs?dr.t("Document"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_document"}}})}createGDRiveSpreadsheet(){this.props.openCreateGDocDialog({type:"spreadsheet",displayType:this.props.featureSonicInputs?dr.t("Spreadsheet"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_spreadsheet"}}})}createGDRivePresentation(){this.props.openCreateGDocDialog({type:"presentation",displayType:this.props.featureSonicInputs?dr.t("Presentation"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_presentation"}}})}handleBoxFileProvider(){var{clogger:e,channelId:t,threadTs:a,isBoxAuthed:n,boxAppInstalled:r,currentTeam:s}=this.props,i={fileUploadAction:X.FileUploadAction.PLUS_MENU,fileUploadSrc:X.FileUploadSrc.BOX},o=Y.l?br:mr;return!n&&r?Object(Ht.g)(Object(qt.n)(s,"/apps/".concat(o))):(e.track(X.EventId.ATTACH_MENU,{contexts:{ui_context:{action:X.UiAction.CLICK,[X.UiContextKeys.ui_properties]:{[X.UiPropertiesKeys.element_value]:"box_opens"}}}}),this.props.openBoxFilePicker({channelId:t,threadTs:a,metadata:i}))}handleDropboxFileProvider(){var{clogger:e,channelId:t,threadTs:a}=this.props,n={fileUploadAction:X.FileUploadAction.PLUS_MENU,fileUploadSrc:X.FileUploadSrc.DROPBOX};return e.track(X.EventId.ATTACH_MENU,{contexts:{ui_context:{action:X.UiAction.CLICK,[X.UiContextKeys.ui_properties]:{[X.UiPropertiesKeys.element_value]:"dropbox_opens"}}}}),this.props.openDropboxFilePicker({channelId:t,threadTs:a,metadata:n})}handleGdriveFileProvider(){var{clogger:e,channelId:t,threadTs:a}=this.props,n={fileUploadAction:X.FileUploadAction.PLUS_MENU,fileUploadSrc:X.FileUploadSrc.GOOGLE_DRIVE};return e.track(X.EventId.ATTACH_MENU,{contexts:{ui_context:{action:X.UiAction.CLICK,[X.UiContextKeys.ui_properties]:{[X.UiPropertiesKeys.element_value]:"gdrive_opens"}}}}),this.props.openGdriveFilePicker({channelId:t,threadTs:a,metadata:n,reason:"cloud-files-menu/gdrive"})}handleOnedriveFileProvider(){var{clogger:e,channelId:t,threadTs:a}=this.props,n={fileUploadAction:X.FileUploadAction.PLUS_MENU,fileUploadSrc:X.FileUploadSrc.ONEDRIVE};return e.track(X.EventId.ATTACH_MENU,{contexts:{ui_context:{action:X.UiAction.CLICK,[X.UiContextKeys.ui_properties]:{[X.UiPropertiesKeys.element_value]:"onedrive_opens"}}}}),this.props.openOnedriveFilePicker({channelId:t,threadTs:a,metadata:n,reason:"cloud-files-menu/onedrive"})}handleRecentFile(e){var{clogger:t,viewContext:a,channelId:n,threadTs:r}=this.props,s=Object(Ae.a)({viewContext:a,channelId:n,threadTs:r});t.track(X.EventId.FILE_MENU_SHARE_YOUR_RECENT_FILE,{contexts:{ui_context:{action:X.UiAction.CLICK,step:X.UiStep.FILE_MENU}}}),this.props.openShareDialog({fileId:e.id,showFileType:!0,initialText:s&&s.getDisplayValue?s.getDisplayValue():"",initialContents:s&&s.getContents?s.getContents():void 0})}handleYourRecentFilesPicker(e,t){var{channelId:a,threadTs:n,viewContext:r,hiddenFileInputRef:s,disableFileUploadsPref:i,clogger:o}=this.props,c=t?X.EventId.FILE_MENU_BROWSE_YOUR_FILES:X.EventId.FILE_MENU_OPEN_WORKSPACE_FILES,l="disable_all"!==i;this.props.setUser(t),this.props.openOmniPickerDialog({channelId:a,threadTs:n,viewContext:r,hiddenFileInputRef:s,showUpload:l}),o.track(c,{contexts:{ui_context:{action:X.UiAction.CLICK,step:X.UiStep.FILE_MENU}}})}clogAddAppsClick(){var{clogger:e}=this.props;e.track(X.EventId.FILE_MENU_ADD_APPS,{contexts:{ui_context:{action:X.UiAction.CLICK,step:X.UiStep.FILE_MENU}}})}renderMultipleCloudServices(){var{featureSonicCloudFilesPicker:e,featureOfflineMode:t,isOffline:a,disableFileUploadsPref:n,showBoxMenuItem:r,showDropboxMenuItem:s,showGdriveMenuItem:i,showOneDriveMenuItem:o,featurePlusMenuAddAppsLink:c}=this.props,l="disable_all_except_images"===n,d=r||s||i||o?dr.t("Add from\u2026"):dr.t("Add an image from\u2026"),h="/apps/category/".concat(Y.l?ur:hr),m=c&&!this.activeCloudServices.length?dr.rt("Add a file from\u2026 <a>+ Add apps</a>",{},e=>{var{text:t,key:a}=e;return u.a.createElement(et.a,{key:a,className:"c-menu_item__addrow",href:h,onClick:this.clogAddAppsClick},t)}):dr.t("Add a file from\u2026"),b={};({showBoxMenuItem:b.box,showDropboxMenuItem:b.dropbox,showGdriveMenuItem:b.gdrive,showOneDriveMenuItem:b.onedrive}=this.props);var _=[{name:"box",props:{label:dr.t("Box"),icon:u.a.createElement(Le.b,{type:"box"}),onSelected:this.handleBoxFileProvider,enableForSonic:this.props.featureBoxContentPicker,dataQa:"box_picker_menu_item"}},{name:"dropbox",props:{label:dr.t("Dropbox"),icon:u.a.createElement(Le.b,{type:"dropbox"}),onSelected:this.handleDropboxFileProvider,enableForSonic:!0,dataQa:"dropbox_picker_menu_item"}},{name:"gdrive",props:{label:dr.t("Google Drive"),icon:u.a.createElement(Le.b,{type:"google-drive"}),onSelected:this.handleGdriveFileProvider,enableForSonic:!0,dataQa:"gdrive_picker_menu_item"}},{name:"onedrive",props:{label:dr.t("OneDrive"),icon:u.a.createElement(Le.b,{type:"onedrive"}),onSelected:this.handleOnedriveFileProvider,enableForSonic:!0,dataQa:"onedrive_picker_menu_item"}}];this.activeCloudServices=Object(Ft.a)(_,e=>b[e.name]?b[e.name]:null);var g=Object(Lt.a)(this.activeCloudServices,(n,r)=>u.a.createElement(Dt.b,{key:r,label:n.props.label,icon:n.props.icon,onSelected:n.props.onSelected,className:e&&n.props.enableForSonic?"":Yt(),disabled:t&&a,showOfflineIcon:t&&a,"data-qa":n.props.dataQa},e&&n.props.enableForSonic?null:u.a.createElement(Qt,null)));return u.a.createElement(p.Fragment,null,u.a.createElement(Dt.c,{label:l?d:m}),g)}renderCreateNewMenuItems(){var{featureDocs:e,featureSonicSnippets:t,showGdriveMenuItem:a,threadTs:n,featureOfflineMode:r,isOffline:s,featureModernGdriveCreate:i}=this.props,o=dr.t("Post"),c=!n&&u.a.createElement(Dt.b,{key:"create-new-post",label:o,icon:u.a.createElement(Le.b,{type:"create-post"}),onSelected:e?this.createDoc:this.createLegacyPost,disabled:r&&s,showOfflineIcon:r&&s,"data-qa":"create_new_doc"}),l=(t&&Object(R.a)()||!n)&&u.a.createElement(Dt.b,{key:"create-new-snippet",label:dr.t("Code or text snippet"),icon:u.a.createElement(Le.b,{type:"create-snippet"}),onSelected:this.createSnippet,className:t?void 0:Yt(),disabled:r&&s,showOfflineIcon:r&&s,"data-qa":"create_new_snippet"},t?null:u.a.createElement(Qt,null)),d=!a||n&&!Object(R.a)()?[]:[(l||c)&&u.a.createElement(Dt.d,{key:"gdrive-separator"}),u.a.createElement(Dt.c,{key:"gdrive-header",label:dr.t("Google Drive")}),u.a.createElement(Dt.b,{key:"gdrive_doc",label:dr.t("Document"),icon:u.a.createElement(Le.b,{type:"google-drive",className:"p-new_file_menu__gdoc_icon"}),onSelected:this.createGDRiveDocument,className:i?"undefined":Yt(),disabled:r&&!Yt()&&s,showOfflineIcon:r&&s,"data-qa":"google_doc_menu_item"},i?null:u.a.createElement(Qt,null)),u.a.createElement(Dt.b,{key:"gdrive_sheet",label:dr.t("Spreadsheet"),icon:u.a.createElement(Le.b,{type:"google-drive",className:"p-new_file_menu__gsheet_icon"}),onSelected:this.createGDRiveSpreadsheet,className:i?void 0:Yt(),disabled:r&&!Yt()&&s,showOfflineIcon:r&&s,"data-qa":"google_sheet_menu_item"},i?null:u.a.createElement(Qt,null)),u.a.createElement(Dt.b,{key:"gdrive_presentation",label:dr.t("Presentation"),icon:u.a.createElement(Le.b,{type:"google-drive",className:"p-new_file_menu__gpres_icon"}),onSelected:this.createGDRivePresentation,className:i?void 0:Yt(),disabled:r&&!Yt()&&s,showOfflineIcon:r&&s,"data-qa":"google_presentation_menu_item"},i?null:u.a.createElement(Qt,null))];return Object(Ft.a)([c,l,...d])}renderCreateNewSubmenu(e){var{menuProps:t}=this.props,a=this.renderCreateNewMenuItems();return u.a.createElement(Dt.f,Object(n.a)({},t,e,{"data-qa":"create_new_submenu"}),a)}renderCreateNew(){var{threadTs:e,showGdriveMenuItem:t}=this.props,a=this.renderCreateNewMenuItems();if(0===a.length)return null;var n=!e&&Object(R.a)()&&t?{top:-80}:void 0;return[1===a.length?a[0]:u.a.createElement(Vt.a,{key:"create-new-submenu",label:dr.t("Create new..."),icon:u.a.createElement(Le.b,{type:"plus-circle"}),renderSubmenu:this.renderCreateNewSubmenu,"data-qa":"create_new_submenu",forceLeft:!!e,submenuStyle:n}),u.a.createElement(Dt.d,{key:"create-new-separator"})]}renderRecents(){var{recentFiles:e,isLoading:t}=this.props;return[t?u.a.createElement(p.Fragment,{key:"recent-placeholders"},u.a.createElement(Dt.b,{key:"0",disabled:!0},u.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),u.a.createElement(Dt.b,{key:"1",disabled:!0},u.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),u.a.createElement(Dt.b,{key:"2",disabled:!0},u.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),u.a.createElement(Dt.b,{key:"3",disabled:!0},u.a.createElement("span",{className:"c-missing_menu_item__button--loading"}))):Object(Lt.a)(e.slice(0,4),e=>u.a.createElement(Dt.b,{key:e.id,label:e.title,icon:u.a.createElement(Le.b,{type:e.filetype,file:"tiny"}),onSelected:()=>this.handleRecentFile(e),"data-qa":"recent_file_menu_item"}))]}renderRecentsSection(){var{recentFiles:e,isLoading:t}=this.props;return u.a.createElement(p.Fragment,null,this.renderRecents(),!t&&e.length?u.a.createElement(p.Fragment,null,u.a.createElement(Dt.b,{className:"c-menu_item__browsefiles",key:"browse-files",onSelected:e=>{this.handleYourRecentFilesPicker(e,!0)}},u.a.createElement(et.a,{key:"browse-files-link",href:"/",onClick:e=>{e.preventDefault()}},dr.t("Browse files"))),u.a.createElement(Dt.d,{key:"create-new-separator"})):null)}render(){var{disableFileUploadsPref:e,menuProps:t,recentFiles:a,featureRecentFilesOmnipicker:r,isLoading:s,isComposerPage:i}=this.props,o="disable_all"!==e,c=dr.t("Add file",{fallbackHash:"4881d0113be00c1d361cb809405df63a3d923445",fallbackHashNs:"multi_file_upload"});return u.a.createElement(Dt.f,Object(n.a)({},t,{"aria-label":c}),!i&&u.a.createElement(u.a.Fragment,null,this.renderCreateNew(),r&&(s||a.length)?u.a.createElement(Dt.c,{label:dr.t("Your recent files")}):null,r&&this.renderRecentsSection(),this.renderMultipleCloudServices(this.props),r&&u.a.createElement(Dt.b,{"data-qa":"open_omnipicker_for_workspace_from_menu_item",label:dr.t("Your workspace"),icon:u.a.createElement(Le.b,{type:"slack"}),onSelected:e=>{this.handleYourRecentFilesPicker(e,!1)}})),o&&u.a.createElement(Dt.b,{"data-qa":"add_file_from_computer_menu_item",label:dr.t("Your computer"),icon:u.a.createElement(Le.b,{type:"laptop"}),onSelected:this.selectFileFromComputer}))}}new_file_menu_NewFileMenu.defaultProps=pr;var _r=Object(b.b)(function(e){var t=Object(Ut.a)(e,"dropbox_legacy_picker"),a=Object(k.k)(e,"dropbox_enabled"),n=Object(k.k)(e,"box_enabled"),r=Object(Ut.a)(e,"box_app_installed"),s=Y.l?Object(Ue.e)(e,br):Object(Ue.e)(e,mr),i=Object(Bt.e)(s),o=a||t,c=Object(Ut.a)(e,"onedrive_enabled_team"),l=Object(Ut.a)(e,"onedrive_app_installed"),d=c||l;return{disableFileUploadsPref:Object(Ut.a)(e,"disable_file_uploads"),featureSonicInputs:Object(O.m)(e,"feature_sonic_inputs"),featureSonicSnippets:Object(O.m)(e,"feature_sonic_snippets"),featurePlusMenuAddAppsLink:Object(O.m)(e,"feature_plus_menu_add_apps_link"),featureRecentFilesOmnipicker:Object(O.m)(e,"feature_recent_files_omnipicker"),featureDocs:Object(O.m)(e,"feature_docs"),featureBoxContentPicker:Object(O.m)(e,"feature_box_content_picker"),featureSonicCloudFilesPicker:Object(O.m)(e,"feature_sonic_cloud_files_picker"),featureModernGdriveCreate:Object(O.m)(e,"feature_modern_gdrive_create"),clogger:Object(Q.a)({state:e}),logger:Object(me.a)({state:e}),showBoxMenuItem:r||n&&i,showDropboxMenuItem:o,showGdriveMenuItem:Object(Ut.a)(e,"gdrive_enabled_team"),isBoxAuthed:n,boxAppInstalled:r,showOneDriveMenuItem:d,featureOfflineMode:Object(O.m)(e,"feature_offline_mode"),currentUser:Object(O.d)(e),isOffline:!Object(C.c)(e),recentFiles:Object(Kt.g)(e),firstLoad:Object(Kt.f)(e),isLoading:Object(Kt.j)(e),currentTeam:Object(Wt.d)(e)}},e=>({createDocPost:function(){return e(ta(...arguments))},createAndOpenLegacyPost:function(){return e(lr(...arguments))},openSnippetDialog:function(){return e(H(...arguments))},openCreateGDocDialog:function(){return e(xa(...arguments))},openBoxFilePicker:function(){return e(ln(...arguments))},openDropboxFilePicker:function(){return e(_n(...arguments))},openGdriveFilePicker:function(){return e(kn(...arguments))},openOnedriveFilePicker:function(){return e(Dn(...arguments))},getRecentFilesForUser:function(){return e(Object(Kt.k)(...arguments))},openShareDialog:function(){return e(Object(Gt.a)(...arguments))},openOmniPickerDialog:function(){return e(rr(...arguments))},setUser:function(){return e(Object(Kt.n)(...arguments))},setFiletype:function(){return e(Object(Kt.m)(...arguments))},setfirstLoad:function(){return e(Object(Kt.o)(...arguments))},setisLoading:function(){return e(Object(Kt.p)(...arguments))}}))(new_file_menu_NewFileMenu),gr=a("anFW"),fr=a("bmfP"),vr=a("auxT"),Or=a("DCka"),yr=a("0Qg5"),Cr=a("LWrH"),jr=new K.b("message_input_plus_button"),Er={channelId:void 0,threadTs:void 0,viewContext:void 0,featureOfflineMode:!1,isComposerPage:!1,isOpen:!1,onFileMenuOpen:i.a,onFileMenuClose:i.a,forceOpen:!1,useLegacyCreate:!1,keyboardLocale:void 0,draftId:void 0,onFilesSelected:i.a},kr="MSG_INPUT_FILE_BTN";class message_input_file_button_MessageInputFileButton extends p.Component{constructor(){super(),Object(c.a)(this,["renderMenu","renderTip","onFilesSelectedHandler"]),this.hiddenFileInputRef=u.a.createRef()}onFilesSelectedHandler(e){Object(xt.a)(e)||this.props.onFilesSelected(e)}renderMenu(e){var{channelId:t,threadTs:a,logger:n,viewContext:r,isComposerPage:s,draftId:i}=this.props;return t||s?u.a.createElement(Or.a,{subtype:kr},u.a.createElement(_r,{menuProps:e,channelId:t,threadTs:a,viewContext:r,hiddenFileInputRef:this.hiddenFileInputRef,isComposerPage:s,draftId:i})):(n.error(kr,"Missing channelId in ".concat(r)),null)}renderTip(){var{isOffline:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(yr.a)("Cmd",this.props.keyboardLocale),a=u.a.createElement("div",{className:"c-tooltip__tip_shortcut"},"".concat(t,"+U")),n=jr.rt("Attach file {keyboardShortcut}",{keyboardShortcut:a,fallbackHash:"0c431f4969959dd3463afd487244f98660be5ae0"});return e?u.a.createElement(vr.a,{tooltipLabel:n}):n}render(){var{channelId:e,threadTs:t,viewContext:a,featureOfflineMode:n,isComposerPage:r,isOpen:s,onFileMenuOpen:i,onFileMenuClose:o,forceOpen:c,useLegacyCreate:l}=this.props,d=m()("p-message_input_file_button",{"p-message_input_file_button--active":s}),h=u.a.createElement(Rt.c,{className:d,"aria-label":jr.t("File menu"),tabIndex:"-1","data-qa":"msg_input_file_btn"},u.a.createElement(Le.b,{className:"p-message_input_file_icon",type:l?"plus-thick":"paperclip"})),b=u.a.createElement(ke.c,{tip:this.renderTip(),position:"top",offsetY:-7,delay:500,zIndex:"above_fs"},h),_=u.a.createElement(Dt.e,{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:i,onClose:o,forceOpen:c},b);n&&(_=u.a.createElement(p.Fragment,null,u.a.createElement(fr.b,null,_),u.a.createElement(fr.a,null,u.a.createElement(Dt.e,{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:i,onClose:o},u.a.createElement(ke.c,{tip:this.renderTip({isOffline:!0})},h)))));var g=u.a.createElement(Dt.e,{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:i,onClose:o,forceOpen:c},b);return r?u.a.createElement(p.Fragment,null,g,u.a.createElement(gr.a,{ref:this.hiddenFileInputRef,channelId:e,threadTs:t,viewContext:a,onFilesSelectedHandler:this.onFilesSelectedHandler})):u.a.createElement(p.Fragment,null,_,u.a.createElement(gr.a,{ref:this.hiddenFileInputRef,channelId:e,threadTs:t,viewContext:a}))}}message_input_file_button_MessageInputFileButton.defaultProps=Er;var Sr=Object(b.b)(function(e){return{featureOfflineMode:Object(O.m)(e,"feature_offline_mode"),logger:Object(me.a)({state:e})}})(message_input_file_button_MessageInputFileButton),Ir=Object(Cr.a)(Sr),wr=new K.b("msg_input"),Tr=e=>{var t,{isDisabled:a,isOffline:n,className:r,sendMessage:s,featureOfflineMode:i,buttonSize:o,showTooltip:c}=e,l=wr.t("Send");c&&(t=Object(Y.q)()?wr.t("\u2318Enter"):wr.t("Ctrl+Enter"));var d="top",p=u.a.createElement(Rt.d,{className:r,pillarClassName:"p-message_input__send",disabled:a||n,onClick:s,size:o},l);return i&&n&&(p=u.a.createElement("div",{style:{marginLeft:"auto"}},p),d="top-right",t=u.a.createElement(vr.a,{tooltipLabel:l})),a&&!i?p:t?u.a.createElement(ke.c,{tip:t,position:d},p):p};Tr.defaultProps={isDisabled:!1,isOffline:!1,className:void 0,featureOfflineMode:!1,buttonSize:void 0,showTooltip:!1};var Nr=Object(b.b)(e=>({isOffline:!Object(C.c)(e),featureOfflineMode:Object(O.m)(e,"feature_offline_mode"),showTooltip:Object(k.k)(e,"msg_input_send_btn")}))(Tr);a.d(t,"a",function(){return Ir}),a.d(t,"b",function(){return Nr});t.c=Mt},HaAk:function(e,t,a){},HckQ:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("XHGt")),i=a("TSYQ"),o=a.n(i),c=a("CaXY"),l=a("kcos"),d=a("RhZ7"),p=a("TOh8"),u=a("0dpy"),h=a("8CL7"),m=a("Gq2+"),b=a("Aeia"),_=a("VrmM"),g=a("anIG"),f=a("KmK8"),v=a("lU/5"),O=a("Q3oM"),y=a("rUi3"),C=a("WOap"),j=a("gl+W"),E=a("BRQ/"),k=a("0gqo"),S=a("QB+X"),I=a("Q+UV"),w=a("hOQf");class starred_item_reaction_reply_bar_StarredItemReactionReplyBar extends r.a.PureComponent{render(){var{hasReactionOrReplies:e,msg:t}=this.props;return e?r.a.createElement("div",{className:"p-starred_item_message__reactions_and_replies","data-qa":"starred-item-reaction-reply-bar"},r.a.createElement(E.a,{msg:t}),r.a.createElement(k.a,{msg:t,flexOrigin:"starred_items"})):null}}starred_item_reaction_reply_bar_StarredItemReactionReplyBar.defaultProps={hasReactionOrReplies:!1};var T=Object(s.b)((e,t)=>{var{msg:a}=t,n=Object(I.b)(a),r=Object(S.e)(e,n);return{hasReactionOrReplies:!!(Object(w.S)(a)>0||r&&r.length)}})(starred_item_reaction_reply_bar_StarredItemReactionReplyBar),N=(a("2FVR"),{className:void 0,"data-qa":void 0,isIAP1Enabled:!1});class starred_item_message_StarredItemMessage extends n.Component{render(){var{msg:e,"data-qa":t}=this.props,a=o()("p-starred_item__message",this.props.className),n=r.a.createElement(O.a,{className:a,"data-qa":t},r.a.createElement(C.a,{msg:e,position:"inside",className:"p-starred_item__message_actions",showComment:!1,showShare:!1,showReact:!1,showJump:!0,showMoreActions:!1,jumpOrigin:"starred_items"},r.a.createElement(v.a,{msg:e},r.a.createElement(f.a,{light:r.a.createElement(d.a,{msg:e,size:36})},r.a.createElement(p.a,{msg:e}),"\xa0\xa0",r.a.createElement(u.a,{msg:e,full:!0}),r.a.createElement("br",null),r.a.createElement(h.a,{msg:e}),r.a.createElement(_.a,{msg:e,blocksContainerContext:c.a.starred_message}),r.a.createElement(m.a,{msg:e}),r.a.createElement(b.b,{msg:e}),r.a.createElement(g.a,{msg:e}),r.a.createElement(y.a,{flexOrigin:"starred_items",msg:e}),r.a.createElement(T,{msg:e})))));return this.props.isIAP1Enabled?r.a.createElement(j.a,{className:"p-starred_item__message__pillow"},n):n}}starred_item_message_StarredItemMessage.defaultProps=N;t.a=Object(s.b)(e=>({isIAP1Enabled:Object(l.d)(e)}))(starred_item_message_StarredItemMessage)},Ho8D:function(e,t,a){},HyiT:function(e,t,a){},Hza5:function(e,t,a){},IEWa:function(e,t,a){"use strict";a.d(t,"b",function(){return u}),a.d(t,"a",function(){return h}),a.d(t,"c",function(){return m});var n=a("0VPD"),r=a("7EGn"),s=a("G4ux"),i=a("1hAG"),o=a("Fdc0"),c=a("5mKg"),l=a("t85p"),d=a("h9PG"),p=a("oZ18"),u=e=>{var t=Object(s.b)(e),a=Object(o.Gb)(t),n=Object(l.m)(e,"feature_builder_can_access");return!a&&!!n},h=e=>{var t=Object(s.b)(e),a=Object(o.Gb)(t),u=Object(i.d)(e),h=Object(p.d)(e);if(!Object(l.m)(e,"feature_builder_can_access"))return!1;if(!Object(c.D)(u))return!1;if(Object(c.s)(u)&&!1===Object(d.a)(e,"workflow_builder_enabled"))return!1;var m=Object(d.a)(e,"who_can_create_workflows"),b=Object(r.a)(m,"type",[]),_=Object(r.a)(m,"subteam",[]),g=Object(r.a)(m,"user",[]);return!(!b.includes("regular")||a)||(!(!b.includes("admin")||!Object(o.eb)(e,t))||(!(!b.includes("owner")||!Object(o.Eb)(e,t))||(!!g.includes(t.id)||(Object(n.a)(_,h).length>0||0===b.length&&!a))))},m=e=>{var t=Object(l.m)(e,"feature_builder_webhook_trigger"),a=Object(d.a)(e,"workflows_webhook_trigger_enabled");return t&&a}},"Ik/9":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("nNoG"),r=a("NqlN"),s=new n.b("a11y");function i(){var{name:e,isGuest:t,isSelf:a,isAppOrBot:n,isDeleted:i,isPrescenceAway:o,isPrescenceDND:c,statusEmojiCode:l,statusText:d,isCurrent:p,hasNotifications:u,isStarred:h,isMuted:m,hasDraft:b}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=(()=>i?s.t("deactivated"):n?s.t("APP"):t&&!o&&c?s.t("guest, do not disturb"):t&&o&&!c?s.t("guest, away"):!t||o||c?a&&!o&&c?s.t("you, do not disturb"):!a||o||c?t||o||!c?t||!o||c?"":s.t("away"):s.t("do not disturb"):s.t("you"):s.t("guest"))(),g=l&&Object(r.a)(l),f=(()=>g&&!d?g:g&&d?s.t("{statusEmoji} {statusText}",{statusEmoji:g,statusText:d,fallbackHash:"ad5c47c4aa7f1e2be1e151ea075d02eff6e54376"}):!g&&d?d:"")(),v=(()=>p&&u&&m&&h&&b?s.t("current conversation, has notifications, muted, starred, has a draft message"):!p&&u&&m&&h&&b?s.t("has notifications, muted, starred, has a draft message"):p&&!u&&m&&h&&b?s.t("current conversation, muted, starred, has a draft message"):!p&&!u&&m&&h&&b?s.t("muted, starred, has a draft message"):p&&u&&!m&&h&&b?s.t("current conversation, has notifications, starred, has a draft message"):!p&&u&&!m&&h&&b?s.t("has notifications, starred, has a draft message"):p&&!u&&!m&&h&&b?s.t("current conversation, starred, has a draft message"):p||u||m||!h||!b?p&&u&&m&&!h&&b?s.t("current conversation, has notifications, muted, has a draft message"):!p&&u&&m&&!h&&b?s.t("has notifications, muted, has a draft message"):p&&!u&&m&&!h&&b?s.t("current conversation, muted, has a draft message"):p||u||!m||h||!b?p&&u&&!m&&!h&&b?s.t("current conversation, has notifications, has a draft message"):p||!u||m||h||!b?!p||u||m||h||!b?p||u||m||h||!b?p&&u&&m&&h&&!b?s.t("current conversation, has notifications, muted, starred"):!p&&u&&m&&h&&!b?s.t("has notifications, muted, starred"):p&&!u&&m&&h&&!b?s.t("current conversation, muted, starred"):p||u||!m||!h||b?p&&u&&!m&&h&&!b?s.t("current conversation, has notifications, starred"):p||!u||m||!h||b?!p||u||m||!h||b?p||u||m||!h||b?p&&u&&m&&!h&&!b?s.t("current conversation, has notifications, muted"):p||!u||!m||h||b?!p||u||!m||h||b?p||u||!m||h||b?!p||!u||m||h||b?p||!u||m||h||b?!p||u||m||h||b?"":s.t("current conversation"):s.t("has notifications"):s.t("current conversation, has notifications"):s.t("muted"):s.t("current conversation, muted"):s.t("has notifications, muted"):s.t("starred"):s.t("current conversation, starred"):s.t("has notifications, starred"):s.t("muted, starred"):s.t("has a draft message"):s.t("current conversation, has a draft message"):s.t("has notifications, has a draft message"):s.t("muted, has a draft message"):s.t("starred, has a draft message"))();return e&&_&&f&&v?s.t("{name} ({userInfo}), status: {status} ({context})",{name:e,userInfo:_,status:f,context:v}):e&&!_&&f&&v?s.t("{name}, status: {status} ({context})",{name:e,status:f,context:v}):e&&_&&!f&&v?s.t("{name} ({userInfo}) ({context})",{name:e,userInfo:_,context:v}):e&&!_&&!f&&v?s.t("{name} ({context})",{name:e,context:v}):e&&_&&f&&!v?s.t("{name} ({userInfo}), status: {status}",{name:e,userInfo:_,status:f}):e&&!_&&f&&!v?s.t("{name}, status: {status}",{name:e,status:f}):e&&_&&!f&&!v?s.t("{name} ({userInfo})",{name:e,userInfo:_}):e||""}},IpQt:function(e,t,a){},IqgZ:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=a("t85p"),o=(a("aK/h"),a("yHhI"));class MessageErrorBoundary extends n.Component{constructor(e){super(e),this.state={error:!1}}componentDidCatch(e,t){this.setState(()=>({error:!0}));var a=e?e.message:"",n=e?e.stack:"",{ts:r,channel:s,subtype:i}=this.props.msg;this.props.logger.error("Message Kit componentDidCatch: ".concat(i," ").concat(r," in ").concat(s,", ").concat(a)),n&&this.props.logger.error(n),t&&t.componentStack&&this.props.logger.error(t.componentStack)}render(){if(!this.state.error)return this.props.children;if(!this.props.featureTinyspeck)return null;var{ts:e,channel:t}=this.props.msg;return r.a.createElement("div",{className:"sk_raspberry_red_bg sk_inverted_foreground padding_100 padding_bottom_25"},r.a.createElement("p",null,r.a.createElement("strong",null,"Message ",e," in ",t," failed to render."," ")),r.a.createElement("p",null,"Please go to #escal-messages and,"," ",r.a.createElement("strong",null,"if it has not been reported yet"),", post a report including a screenshot and a link to the previous message if this is a public channel."),r.a.createElement("p",null,"This message is only displayed to workspaces in the Slack org."))}}MessageErrorBoundary.defaultProps={children:null,featureTinyspeck:!1};t.a=Object(s.b)(e=>({featureTinyspeck:Object(i.m)(e,"feature_tinyspeck"),logger:Object(o.a)({state:e})}))(MessageErrorBoundary)},"J0/G":function(e,t,a){},J19L:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=a("aK/h"),o=a("XHGt"),c=a("6kok"),l=a("nNoG"),d=a("4M+g"),p=a("/9ln"),u=a("HOkk"),h=a("H3xq"),m=new l.b("msg_edit"),b={channelType:void 0,removeMessage:n.a};class BaseRemoveBroadcastDialog extends r.PureComponent{constructor(){super(),this.onGo=this.onGo.bind(this)}onGo(){var{ts:e,channelId:t,removeMessage:a}=this.props;a({channelId:t,ts:e,broadcastDelete:!0}).catch(n.a)}render(){var e,t,{ts:a,channelId:n,channelType:r}=this.props;return"channel"===r?(e=m.t("Remove from channel"),t=m.t("Are you sure you want to remove this message from the channel?")):(e=m.t("Remove from conversation"),t=m.t("Are you sure you want to remove this message from the conversation?")),s.a.createElement(u.a,{title:e,goButtonText:m.t("Remove message"),onGo:this.onGo},s.a.createElement("div",{className:"margin_bottom_100"},t,m.t("The original reply will still be visible in its thread.")),s.a.createElement(h.a,{ts:a,channelId:n,isStandalone:!0}))}}BaseRemoveBroadcastDialog.defaultProps=b;var _={removeMessage:p.a},g=Object(o.b)((e,t)=>{var{channelId:a}=t,n=Object(d.e)(e,a);return{channelType:Object(c.u)(n)}},_)(BaseRemoveBroadcastDialog);g.propTypes={channelId:i.default.string.isRequired},t.a=g},J7VK:function(e,t,a){"use strict";a("aK/h");var n=a("q1tI"),r=a.n(n),s=a("MnCE"),i=a("TSYQ"),o=a.n(i),c=new(a("nNoG").b)("messages");function l(e){var{ghost:t}=e;return r.a.createElement("div",{className:o()({"c-message_list__unread_divider":!0,"c-message_list__unread_divider--ghost":t})},r.a.createElement("hr",{className:"c-message_list__unread_divider__separator","aria-hidden":"true"}),r.a.createElement("span",{className:"c-message_list__unread_divider__label"},c.t("new messages")))}l.defaultProps={ghost:!1},t.a=Object(s.a)(l)},J7ms:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("NFsq"),r=a("XL7r"),s=a("1hAG"),i=a("5mKg");function o(e){var t=Object(r.k)(e,"all_unreads_sort_order");return t&&Object(n.a)(["alphabetical","priority","oldest","newest"],t)?t:Object(i.D)(Object(s.d)(e))?"priority":"alphabetical"}},JHKc:function(e,t,a){},JlHJ:function(e,t,a){},Jm6a:function(e,t,a){},JvzI:function(e,t,a){"use strict";a.d(t,"a",function(){return _}),a.d(t,"b",function(){return f}),a.d(t,"d",function(){return v}),a.d(t,"c",function(){return O});a("rePB");var n=a("9oTK"),r=(a("xnu4"),a("nNoG")),s=a("XxnT"),i=a("4qCO"),o=a("TVjB"),c=(a("lhZz"),a("t85p"),a("XKj7")),l=a("x4bP"),d=a("XoJV"),p=a("GNdI"),u=a("yHhI"),h=a("DlLn"),m=a("IbTH"),b=a("Gogr");function _(){var{recalc:e=!1,teamId:t=Object(p.a)()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.s)({recalc:e,teamId:t})}var g={};function f(e){var{teamId:t,fn:a}=e;g[t]?Object(u.a)({teamId:t,label:"INFRA-I18N"}).error("Attempted to registerLocaleCallback for a registered team",t):g[t]=a}function v(e){var{teamId:t}=e;g[t]?delete g[t]:Object(u.a)({teamId:t,label:"INFRA-I18N"}).error("Attempted to unregisterLocaleCallback for an unregistered team",t)}function O(e,t){return y.apply(this,arguments)}function y(){return(y=Object(n.coroutine)(function*(e,t){var{shouldEnsureTranslationBundle:a=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Object(l.a)())return Object(c.e)({name:"locale",value:e});if(Object(b.d)(t,"user_locale")!==e&&Object(b.i)(t,"user_locale",e),Object(p.a)()!==t)return e;var n=Object(r.l)();if(!Object.keys(n).includes(e))return Object(h.e)();!0===a&&(yield Object(m.a)(e));var u="es-LA"===e?"es-419":e;return document.documentElement.lang=u,Object(s.b)(e),Object(i.c)(e),Object(r.s)({recalc:!0,teamId:t}),Object(d.i)(e)||Object(o.a)(),g[t]&&g[t]({locale:e}),e})).apply(this,arguments)}},K1NN:function(e,t,a){},K6R2:function(e,t,a){e.exports=a.p+"gsuite-01ee1e1.png"},KGMq:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("aK/h"),i=a("XfeM"),o=a("t85p"),c=a("dhvi"),l=a("wx14"),d=a("Ff2n"),p=a("rePB"),u=a("HI9p"),h=a("CpTu"),m=a("7EGn"),b=a("NOj5"),_=a("1myf"),g=a("F3Uw"),f=a("Z0Cl"),v=a("fujP"),O=a("ifKl"),y=a("wSSu"),C=a("TSYQ"),j=a.n(C),E=a("XHGt"),k=a("tn36"),S=a("uQWY"),I=a("rWF5"),w=a("1hAG"),T=a("G4ux"),N=a("Fdc0"),P=a("ns4K"),A=a("yHhI"),M=a("XL7r"),x=a("y+1o"),R=a("7dYf"),D=a("nNoG"),F=a("kOzZ"),L=a("kcos"),U=a("0nhw"),B=a("CPJ1"),H=a("Smdl"),W=a("KXvl"),q=a("UF3u"),G=a("od5y"),K=a("qafc"),V=a("c4EP"),z=a("0f2Y"),Y=a("cD5Y"),Q=a("vSXf"),X=a("3dqR"),J=a("derf"),Z=a("6GV3"),$=a("xoiQ"),ee=(a("y5qN"),{entityType:"member",onClick:O.a,customClasses:null,isInteractive:!0});class entity_icon_EntityIcon extends n.PureComponent{getImageKeyFromDimension(e,t){var a=Object(Z.a)(e,{member:[512,192,72,48,32,24],app:[1024,512,192,128,96,72,64,48,36,32],workspace:[230,132,102,88,68,44,34],org:[230,132,102,88,68,44,34]}[t]);return"image_".concat(a)}mapRawMemberDataToProps(e){var{rawMemberData:t,iconDimension:a,customClasses:n,clickHandler:r}=e,s=Object($.a)({size:a,teamId:Object(m.a)(t,"enterprise_id"),memberId:Object(m.a)(t,"id"),avatarHash:Object(m.a)(t,"profile.avatar_hash")});return{imageUrl:s.imageUrl,imageUrl2x:s.imageUrl2x,isExternal:t.is_external,isRestricted:t.is_restricted,isUltraRestricted:t.is_ultra_restricted,size:a,className:n,onClick:r}}mapRawWorkspaceOrOrgDataToProps(e){var{rawWorkspaceOrOrgData:t,iconDimension:a,customClasses:n}=e;return{size:a,icon:t.icon,showToolTip:!1,teamName:t.name,className:n}}render(){var{entityType:e,entityData:t,customClasses:a,dimension:n,isInteractive:s,onClick:i,featureReactMessages:o,featureReactMemberProfileCard:c}=this.props,d=j()(a,"p-ent_entity_icon");switch(e){case"member":var p={rawMemberData:t,iconDimension:n,customClasses:d,clickHandler:i},u=this.mapRawMemberDataToProps(p);return r.a.createElement(X.b,Object(l.a)({},u,{featureReactMessages:o,featureReactMemberProfileCard:c,isInteractive:s}));case"org":case"workspace":var h={rawWorkspaceOrOrgData:t,iconDimension:n,customClasses:d},m=this.mapRawWorkspaceOrOrgDataToProps(h);return r.a.createElement(J.a,m);default:return r.a.createElement(J.a,{teamName:"?",size:n})}}}entity_icon_EntityIcon.defaultProps=ee;var te=Object(Q.a)("feature_react_messages","feature_react_member_profile_card")(entity_icon_EntityIcon),ae=a("aolG"),ne=a("Vfgr"),re=a("bo4X"),se=a("NB3s"),ie=a("WD4z"),oe=a("O0RF"),ce=a("plEq"),le=a("P3Po"),de=new D.b("enterprise_workspaces"),pe={closeModal:O.a,requestCreateWorkspaceApi:O.a},ue=255,he=512,me={required:"required",nameTaken:"nameTaken",maxLength:"maxLength"};function be(e){var{closeModal:t,requestCreateWorkspaceApi:a}=e,[s,i]=Object(n.useState)(),[o,c]=Object(n.useState)(),[l,d]=Object(n.useState)(!1),[p,u]=Object(n.useState)(!1),[h,m]=Object(n.useState)(me.required),[b,_]=Object(n.useState)(me.required);function g(e,t){var{maxLength:a}=t,n=Object(ne.a)(e);return n?a&&n.length>a?me.maxLength:void 0:me.required}return r.a.createElement(re.a,{labelledby:"request_workspace__title-bar",centered:!0,closeModal:t},r.a.createElement(se.h,null,r.a.createElement(se.j,{id:"request_workspace__title-bar",title:de.t("Request creation of a new workspace")})),r.a.createElement(se.d,null,r.a.createElement(se.e,null,p&&r.a.createElement(ie.a,{level:"error",className:"margin_bottom_100"},de.t("Sorry! Something went wrong. Please try again.",{fallbackHash:"48faa2ac6ac6d273cd7dacbe15a5b6f7e1822087",fallbackHashNs:"edit_profile"})),r.a.createElement("p",null,de.t("To create a new workspace, you\u2019ll need to send a request to an organization administrator. Before sending this request, be sure to check the Find Workspaces list to see whether a similar workspace already exists.")),r.a.createElement(oe.a,{htmlFor:"p-request-workspace__name_input",id:"p-request-workspace__name_label",text:de.t("Workspace Name")},r.a.createElement(ce.a,{ariaDescribedby:"p-request-workspace__name_label",id:"p-request-workspace__name_input",name:"workspace_name",size:"large",useInlineAlert:!0,onChange:function(e){u(!1),i(e);var t=g(e,{maxLength:ue});m(t)},errorText:h===me.nameTaken?de.t("That workspace name is already taken.",{fallbackHash:"26cf402314e8bf926ba97077c467adcadb1c715e",fallbackHashNs:"enterprise_dashboard"}):void 0,value:s,isRequired:!0,minCharacterLimit:1,maxCharacterLimit:ue})),r.a.createElement(oe.a,{htmlFor:"p-request-workspace__message_input",id:"p-request-workspace__message_label",text:de.t("Message to administrators")},r.a.createElement(le.a,{ariaDescribedby:"p-request-workspace__message_label",id:"p-request-workspace__message_input",name:"workspace_message",size:"large",useInlineAlert:!0,onChange:function(e){u(!1),c(e);var t=g(e,{maxLength:he});_(t)},value:o,isRequired:!0,minCharacterLimit:1,maxCharacterLimit:he})))),r.a.createElement(se.f,null,r.a.createElement(se.g,null,r.a.createElement(se.c,{"data-qa":"request_workspace_dialog_cancel_button",type:"outline"},de.t("Cancel")),r.a.createElement(se.c,{"data-qa":"request_workspace_dialog_go_button",onClick:function(){u(!1),d(!0),a({workspaceName:s,workspaceMessage:o,reason:"workspace_directory_request_new_workspace"}).then(()=>t()).catch(e=>{var{data:t}=e;d(!1),"name_taken"===t.error?m(me.nameTaken):u(!0)})},loading:l,disabled:!!(b||h||p)},de.t("Send Request")))))}be.defaultProps=pe;var _e={closeModal:function(){return Object(c.a)(...arguments)},requestCreateWorkspaceApi:function(){return Object(U.j)(...arguments)}},ge=Object(E.b)(null,_e)(be),fe=a("yIs4"),ve=a("9/ob"),Oe=a("YB7p"),ye=a("XLFM"),Ce=a("hbEN"),je=a("mX9+"),Ee=a("TGBA"),ke=a("xWuZ"),Se=a("zmn3"),Ie=a("RMmo"),we=a("MjS2"),Te=a("3Hq1"),Ne=a("HiDb"),Pe=a("YH8F"),Ae=a("RbWr"),Me=a("e4Fz"),xe=a("sKU9"),Re=(a("MbVY"),{default:"default",short:"short"}),De=new D.b("form"),Fe={autoSelectFirstOption:s.default.bool,className:s.default.string,displayValue:s.default.string,id:s.default.string,isLoading:s.default.bool,labelId:s.default.string,membersOnly:s.default.bool,name:s.default.string,onChange:s.default.func,onClearButtonClick:s.default.func.isRequired,onClose:s.default.func,onFilterInputChange:s.default.func,onOptionHighlighted:s.default.func,onOutsideClick:s.default.func,onOpen:s.default.func,onScroll:s.default.func,optionClassName:s.default.string,optionGroups:s.default.array,options:s.default.array,optionsListOffsetBottom:s.default.number,optionsListOffsetTop:s.default.number,optionsListWidth:s.default.number,optionsRowHeight:s.default.number,pillarClassName:s.default.string,placeholder:s.default.string,selectedOption:s.default.object,selectedValueClassName:s.default.string,type:s.default.oneOf(Object(Ee.a)(Re)),useFullWidthOptions:s.default.bool,usePlaceholderOption:s.default.bool,wrapperClassName:s.default.string,value:s.default.string},Le={className:null,displayValue:void 0,id:"select-".concat(Object(Me.d)()),isLoading:!1,labelId:null,membersOnly:!0,name:null,onChange:O.a,onClose:O.a,onFilterInputChange:O.a,onOptionHighlighted:O.a,onOutsideClick:O.a,onOpen:O.a,optionClassName:void 0,optionGroups:void 0,options:void 0,optionsListOffsetBottom:0,optionsListOffsetTop:0,optionsListWidth:void 0,pillarClassName:void 0,placeholder:void 0,selectedOption:void 0,selectedValueClassName:void 0,type:Re.default,usePlaceholderOption:!0,wrapperClassName:null,value:""};class workspace_search_select_WorkspaceSearchSelect extends Ae.a{constructor(e){if(!e.optionGroups&&!e.options)throw new Error('WorkspaceSearchSelect requires an "optionGroups" or "options" prop.');super(e),this.preventFocusAndBlur=!1,this.state={filterQuery:"",isOpen:!1,selectedOptionValue:""},Object(k.a)(this,["getFilteredOptions","getFilteredOptionGroups","onBlurred","onClearInput","onClicked","onFilterInputChanged","onFocused","onKeyPressedEsc","onKeyPressedUpOrDown","onOptionSelected","onOutsideClicked","onWrapperMouseDownOrTouchStart","onWrapperMouseUpOrTouchEnd","setRef"])}componentDidMount(){this.initKeyCommands()}UNSAFE_componentWillReceiveProps(){this.setState(e=>({isOpen:e.isOpen}))}componentDidUpdate(e,t){var{onClose:a,onOpen:n,selectedOption:r}=this.props,{isOpen:s,selectedOptionValue:i}=this.state;if(r){var o=Object(we.h)(r)?Object(N.K)(r):Object(m.a)(r,"name");o!==i&&this.setSelectedOptionValue(o)}else i&&this.setSelectedOptionValue("");this.state.isOpen?(document.addEventListener("click",this.onOutsideClicked),t.isOpen||(this.filterInput&&this.filterInput.focus(),n(this.filterInput))):(document.removeEventListener("click",this.onOutsideClicked),t.isOpen&&a()),this.filterInput&&s&&this.filterInput.focus()}componentWillUnmount(){document.removeEventListener("click",this.onOutsideClicked),this.resetKeyCommads()}onBlurred(){this.preventFocusAndBlur||this.toggleOpenState(!1)}onClicked(e){e.target===this.filterInput?this.toggleOpenState(!0):this.toggleOpenState()}onClearInput(){var{onClearButtonClick:e}=this.props;this.filterInput&&(this.filterInput.value=""),this.setFilterQuery(""),this.setSelectedOptionValue(""),this.toggleOpenState(!1),e()}onFilterInputChanged(){if(this.filterInput){var e=this.filterInput.value;this.props.onFilterInputChange(e),this.setFilterQuery(e)}}onFocused(){this.preventFocusAndBlur||this.toggleOpenState(!0);var{displayValue:e}=this.props;e&&this.filterInput&&(this.filterInput.value=e)}onKeyPressedEsc(){this.state.isOpen&&(this.toggleOpenState(!1),this.focus())}onKeyPressedUpOrDown(e){this.state.isOpen||(this.toggleOpenState(!0),e.stopPropagation())}onOptionSelected(){var{value:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){var t=this.getSelectedOptionDisplayValue({value:e});this.setSelectedOptionValue(t),this.props.onChange(e),this.toggleOpenState(!1),this.filterInput&&this.filterInput.blur()}}onOutsideClicked(e){this.wrapper&&!this.wrapper.contains(e.target)&&(this.toggleOpenState(!1),this.props.onOutsideClick())}onWrapperMouseDownOrTouchStart(){this.preventFocusAndBlur=!0}onWrapperMouseUpOrTouchEnd(){this.preventFocusAndBlur=!1}onSearchAgainTriggered(){var{onClearButtonClick:e}=this.props;this.preventFocusAndBlur=!0,this.filterInput&&(this.filterInput.value=""),this.setFilterQuery(""),this.setSelectedOptionValue(""),e(),this.filterInput.focus(),this.toggleOpenState(),this.preventFocusAndBlur=!1}maybeShowOptions(){var{selectedOption:e,membersOnly:t}=this.props,a=this.getFilterQuery(),n=t?this.getFilteredOptions:this.getFilteredOptionGroups;return a.length>0||e?n():[]}getPlaceholder(){return this.props.placeholder||De.t("Choose an option\u2026")}getFilteredOptionGroups(){var{optionGroups:e,usePlaceholderOption:t}=this.props,a=this.getFilterQuery();return e?!a&&t?[this.getPlaceholderOptionGroup(),...e]:e:null}getFilteredOptions(){var{options:e,usePlaceholderOption:t}=this.props,a=this.getFilterQuery();return e?!a&&t?[this.getPlaceholderOption(),...e]:e:null}getFilterQuery(){return Object(m.a)(this,"filterInput.value","")}getOptionsListEmptyMessage(){return this.getFilterQuery().length>0?this.renderOptionsListEmptyMessage():this.renderOptionsListHintText()}getOptionsListTargetMeasurements(){var{optionsListOffsetBottom:e,optionsListOffsetTop:t,optionsListWidth:a}=this.props,n=this.select.getBoundingClientRect(),r=this.select.offsetTop-Object(Pe.a)(this.select,this.select.offsetParent),s=this.select.offsetLeft,i=this.select.offsetParent.clientHeight-r,o=r+n.height;return{bottom:n.bottom,offsetBottom:e,offsetTop:t,relativeBottom:o,relativeLeft:s,relativeTop:i,top:n.top,width:a||n.width}}getPlaceholderOption(){return{isPlaceholder:!0,label:this.getPlaceholder(),value:""}}getPlaceholderOptionGroup(){return{isPlaceholder:!0,options:[this.getPlaceholderOption()]}}getSelectedOptionDisplayValue(){var{value:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{optionGroups:t,options:a}=this.props,n=t?Object(Ne.a)(t,"options"):a,r=Object(h.a)(n,{value:e});return Object(m.a)(r,"displayValue")}setFilterQuery(e){this.setState(()=>({filterQuery:e}))}setSelectedOptionValue(e){this.setState(()=>({selectedOptionValue:e}))}setRef(e){return t=>{this[e]=t}}focus(){this.preventFocusAndBlur=!0,this.select.focus(),this.preventFocusAndBlur=!1}blur(){this.select.blur(),this.filterInput&&this.filterInput.blur()}filterOption(e){var t=e.label.toLowerCase(),a=this.getFilterQuery().toLowerCase();return-1!==t.indexOf(a)}initKeyCommands(){this.keyCommands=new Ie.a(this.select),this.keyCommands.bindAll([{keys:["esc"],handler:this.onKeyPressedEsc},{keys:["up","down"],handler:this.onKeyPressedUpOrDown}])}resetKeyCommads(){this.keyCommands&&this.keyCommands.reset()}toggleOpenState(e){this.setState(t=>{var a={isOpen:Object(Te.a)(e)?!t.isOpen:e};return a.isOpen||(a.filterQuery=""),a})}renderFilterInput(){var{filterQuery:e,selectedOptionValue:t}=this.state,{displayValue:a}=this.props,n={"aria-label":"Filter for option list",className:"c-input_select__filter_input p-workspace-search__select",onChange:this.onFilterInputChanged,placeholder:this.getPlaceholder(),ref:this.setRef("filterInput"),type:"text"};return n.value=t&&!e?t:t||!a||e?e:a,r.a.createElement("input",n)}renderOptionsListMaybe(){if(!this.state.isOpen)return null;var{autoSelectFirstOption:e,id:t,isLoading:a,membersOnly:n,optionClassName:s,optionsRowHeight:i,pillarClassName:o,useFullWidthOptions:c,value:l,onScroll:d,onOptionHighlighted:p}=this.props,u=n?240:400,h=Object(Me.a)(t,this.state.selectedOptionValue);return r.a.createElement(xe.a,{"aria-activedescendant":h,autoSelectFirstOption:e,emptyStateMessage:this.getOptionsListEmptyMessage(),isLoading:a,maxListHeight:u,onOptionSelected:this.onOptionSelected,optionClassName:s,onScroll:d,optionGroups:n?null:this.maybeShowOptions(),options:n?this.maybeShowOptions():null,optionsRowHeight:i,pillarClassName:o,targetMeasurements:this.getOptionsListTargetMeasurements(),useFullWidthOptions:c,value:l,onActiveOptionUpdated:p})}renderOptionsListEmptyMessage(){var e=this.getFilterQuery(),t=De.rt('No workspaces found matching <span class="sk_primary_foreground bold">{query}</span>.',{query:e}),a=De.t("Try searching for another workspace or searching for a teammate\u2019s workspaces.");return r.a.createElement("div",{className:"p-workspace_search__no-results-message"},r.a.createElement("p",{className:"margin_0"},t),r.a.createElement("p",{className:"margin_0"},a))}renderOptionsListHintText(){var{membersOnly:e}=this.props,t=e?De.rt('Enter a teammate\u2019s <span class="sk_primary_foreground bold">name</span> or <span class="sk_primary_foreground bold">email address</span>.'):De.rt('Enter a teammate\u2019s <span class="sk_primary_foreground bold">name</span> or <span class="sk_primary_foreground bold">email address</span>, or search for a <span class="sk_primary_foreground bold">specific workspace</span>.');return r.a.createElement("div",{className:"p-workspace_search__no-results-message"},r.a.createElement("p",{className:"margin_0"},t))}render(){var e=this.props,{autoSelectFirstOption:t,className:a,displayValue:n,isLoading:s,labelId:i,membersOnly:o,name:c,onChange:p,onClearButtonClick:u,onClose:h,onFilterInputChange:m,onOutsideClick:b,onOpen:_,onOptionHighlighted:g,onScroll:f,optionClassName:v,options:O,optionsListOffsetBottom:y,optionsListOffsetTop:C,optionsListWidth:E,optionsRowHeight:k,optionGroups:S,pillarClassName:I,placeholder:w,selectedOption:T,selectedValueClassName:N,type:P,useFullWidthOptions:A,usePlaceholderOption:M,wrapperClassName:x}=e,R=Object(d.a)(e,["autoSelectFirstOption","className","displayValue","isLoading","labelId","membersOnly","name","onChange","onClearButtonClick","onClose","onFilterInputChange","onOutsideClick","onOpen","onOptionHighlighted","onScroll","optionClassName","options","optionsListOffsetBottom","optionsListOffsetTop","optionsListWidth","optionsRowHeight","optionGroups","pillarClassName","placeholder","selectedOption","selectedValueClassName","type","useFullWidthOptions","usePlaceholderOption","wrapperClassName"]),{filterQuery:D}=this.state,F=j()("c-input_select__wrapper",x),L=j()("c-input_select",{"c-input_select--active":this.state.isOpen,"c-input_select--short":"short"===P},a),U=j()("p-workspace_search__clear-button",{hidden:!D&&!n});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:F,onMouseDown:this.onWrapperMouseDownOrTouchStart,onMouseUp:this.onWrapperMouseUpOrTouchEnd,onTouchStart:this.onWrapperMouseDownOrTouchStart,onTouchEnd:this.onWrapperMouseUpOrTouchEnd,ref:this.setRef("wrapper"),role:"group"},r.a.createElement("div",Object(l.a)({},R,{"aria-labelledby":i,className:L,"data-name":c,onBlur:this.onBlurred,onMouseDown:this.onClicked,onFocus:this.onFocused,ref:this.setRef("select")}),this.renderFilterInput()),this.renderOptionsListMaybe()),r.a.createElement(ye.c,{className:U,onClick:this.onClearInput,ref:this.setRef("closeButton")}))}}workspace_search_select_WorkspaceSearchSelect.propTypes=Fe,workspace_search_select_WorkspaceSearchSelect.defaultProps=Le;var Ue=workspace_search_select_WorkspaceSearchSelect;a("RQ+B");class workspace_search_options_list_item_WorkspaceSearchOptionsListItem extends n.PureComponent{constructor(e){super(e),Object(k.a)(this,["maybeRenderTitle","maybeRenderEmail"])}maybeRenderEmail(e){return e?r.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},e):null}maybeRenderTitle(e){return e?r.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},e):null}renderEntityIcon(e){var{item:t,type:a}=e,{featureReactMemberProfileCard:n,featureReactMessages:s}=this.props;return r.a.createElement(te,{entityType:a,dimension:36,entityData:t,customClasses:"p-workspace_search_options_list_item__avatar",featureReactMessages:s,featureReactMemberProfileCard:n})}renderItemAsMember(e){var{item:t,type:a}=e,n=Object(m.a)(t,"profile"),{real_name:s,email:i,title:o}=n;return r.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:t,type:a}),r.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},r.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},s),r.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},this.maybeRenderTitle(o),this.maybeRenderEmail(i))))}renderItemAsWorkspace(e){var{item:t,type:a}=e,{name:n,description:s}=t;return r.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:t,type:a}),r.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},r.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},n),r.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},s)))}render(){var{item:e,type:t}=this.props;return"member"===t?this.renderItemAsMember({item:e,type:t}):this.renderItemAsWorkspace({item:e,type:t})}}workspace_search_options_list_item_WorkspaceSearchOptionsListItem.defaultProps={item:{},type:"member"};a("pVvT");var Be=new D.b("workspace_directory"),He={className:"",containerIdSelector:"",membersOnly:!0,onClearInput:O.a,onOptionsListClosed:O.a,onOptionsListOpened:O.a,prepopulatedOption:void 0,triggerAction:O.a};class workspace_search_WorkspaceSearch extends n.Component{constructor(e){super(e),this.state={nextCursorMark:"*",totalResultsCount:null,memberResultsCount:null,workspaceResultsCount:null,currentOptionsData:[],currentSearchQuery:"",prepopulatedOptionData:void 0,selectedOptionData:void 0,value:void 0,loadingResults:!0,isAnOptionHighlighted:!1},Object(k.a)(this,["clearInput","formatMemberOptionData","formatOptionsDataArrayOrObject","getOptionsFetcher","fetchMemberData","fetchMemberAndWorkspaceData","onChange","onClearButtonClicked","onFilterInputChange","onOptionHighlighted","onScroll","renderMemberItemTemplate","setIsAnOptionHighlighted","setCurrentSearchQuery","setIsLoading","setValue","triggerActionWithValue","onClose","onKeyPressedEnter","onOpen","setSelectRef"]),this.select=null,this.debouncedOnFilterInputChange=Object(Ce.a)(this.onFilterInputChange,100)}componentDidMount(){var{prepopulatedOption:e,membersOnly:t}=this.props;Object(v.a)(e)||this.setPrepopulatedOptionData(e),this.getOptionsFetcher(),t||(this.keyCommands=this.initKeyCommands())}componentDidUpdate(e){var{prepopulatedOption:t}=this.props,{prepopulatedOption:a}=e;Object(v.a)(t)||t===a||this.setPrepopulatedOptionData(t)}componentWillUnmount(){this.keyCommands&&this.keyCommands.reset()}onChange(e){var t,a,n,{membersOnly:r}=this.props,{currentOptionsData:s,currentSearchQuery:i}=this.state;if(e===we.b)t={id:we.b,displayValue:i},n=s;else if(r)t=Object(h.a)(s,{id:e}),a=Object(N.K)(t),n=[t];else{t=Object(h.a)(Object(ke.a)(Object(Ee.a)(s)),{id:e});var o=Object(we.h)(t);a=o?Object(N.K)(t):Object(m.a)(t,"name"),n=o?{members:[t],workspaces:[]}:{members:[],workspaces:[t]}}this.setState(()=>{return{value:e,selectedOptionData:t,currentSearchQuery:e===we.b?i:a,nextCursorMark:"*",currentOptionsData:n}},this.triggerActionWithValue)}onClearButtonClicked(){var{onClearInput:e}=this.props;this.clearInput(),e()}onClose(){var{onOptionsListClosed:e}=this.props;this.setIsAnOptionHighlighted(!1),e()}onFilterInputChange(e){var{triggerAction:t,membersOnly:a}=this.props;this.setIsLoading(!0),this.setSelectedOptionData(null),this.setPrepopulatedOptionData(null),this.setValue(null),a&&t({selectedOptionData:null}),this.getOptionsFetcher(e)}onKeyPressedEnter(){if(!this.props.membersOnly){var{selectedOptionData:e,currentSearchQuery:t,isAnOptionHighlighted:a}=this.state;if(t&&!a){var n=Object(m.a)(this.select,"filterInput.value",t);e||(this.select.blur(),this.setState(()=>{return{selectedOptionData:{id:we.b,displayValue:n},currentSearchQuery:n,nextCursorMark:"*"}},this.triggerActionWithValue))}}}onOpen(){var{onOptionsListOpened:e}=this.props;e()}onOptionHighlighted(e){var t=!Object(v.a)(e);this.setIsAnOptionHighlighted(t)}onScroll(e){var{currentSearchQuery:t,currentOptionsData:a=[],totalResultsCount:n}=this.state,{clientHeight:r,scrollHeight:s,scrollTop:i}=e;s-(i+r)<200&&a.length<n&&this.getOptionsFetcher(t,{doFetchNextPage:!0})}onSearchAgainTriggered(){this.select.onSearchAgainTriggered()}getBoundingRect(e){return this._workspaceSearchBoundingContainer||(this._workspaceSearchBoundingContainer=document.getElementById(e)),this._workspaceSearchBoundingContainer?this._workspaceSearchBoundingContainer.getBoundingClientRect():{}}getOptionsFetcher(e){var{forceNewSearch:t=!1,doFetchNextPage:a=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{currentSearchQuery:n}=this.state,{membersOnly:r}=this.props,s=r?this.fetchMemberData:this.fetchMemberAndWorkspaceData,i={searchTerm:e};return a||e!==n||t?(i.nextCursorMark=n===e?this.state.nextCursorMark:"",this.setCurrentSearchQuery(e),s({args:i,forceNewSearch:t,newSearchQuery:e,stashedSearchQuery:n})):null}getPlaceHolderText(e){var t=Be.t("Search for a teammate"),a=Be.t("Search");return e?t:a}setCurrentOptionGroupsData(e){var t,{memberOptionData:a,workspaceOptionData:n,isNewSearch:r,totalResultsCount:s,memberResultsCount:i=0,workspaceResultsCount:o=0}=e,{currentOptionsData:c}=this.state,l=!i&&!o||s?s:i+o;t=r?{members:a,workspaces:n}:{members:Object(b.a)(Object(m.a)(c,"members"),a,"id"),workspaces:Object(b.a)(Object(m.a)(c,"workspaces"),n,"id")},this.setState(()=>({currentOptionsData:t,totalResultsCount:l,memberResultsCount:i,workspaceResultsCount:o})),this.setIsLoading(!1)}setCurrentOptionsData(e){var t,{optionData:a,isNewSearch:n,totalResultsCount:r}=e,{currentOptionsData:s}=this.state;t=n?a:Object(b.a)(s,a,"id"),this.setState(()=>({currentOptionsData:t,totalResultsCount:r})),this.setIsLoading(!1)}setCurrentSearchQuery(e){this.setState(()=>({currentSearchQuery:e}))}setIsAnOptionHighlighted(e){this.setState(()=>({isAnOptionHighlighted:e}))}setIsLoading(e){this.setState(()=>({loadingResults:e}))}setNextCursorMark(e){this.setState(()=>({nextCursorMark:e}))}setPrepopulatedOptionData(e){this.setState(()=>({prepopulatedOptionData:e}))}setSelectRef(e){this.select=e}setSelectedOptionData(e){this.setState(()=>({selectedOptionData:e}))}setValue(e){this.setState(()=>({value:e}))}blur(){this.select.blur()}clearInput(){var{triggerAction:e}=this.props;this.setSelectedOptionData(null),this.setCurrentSearchQuery(null),this.setPrepopulatedOptionData(null),this.setValue(null),this.getOptionsFetcher(),e({selectedOptionData:null,type:null}),this.select.toggleOpenState()}fetchMemberAndWorkspaceData(e){var{args:t,forceNewSearch:a,newSearchQuery:n,stashedSearchQuery:r}=e,{fetchMembers:s}=this.props,i=[s(t),this.props.fetchDirectoryWorkspaces(t)];return Promise.all(i).then(e=>{var t,{items:s=[],next_cursor_mark:i,num_found:o}=e[0],{items:c=[],next_cursor_mark:l,num_found:d}=e[1];(s.length||"*"===i||c.length||"*"===l)&&(s.length&&!c.length?this.setNextCursorMark(i):c.length&&!s.length&&this.setNextCursorMark(l),s.length&&!c.length?t=o:c.length&&!s.length&&(t=d),this.setCurrentOptionGroupsData({memberOptionData:s,workspaceOptionData:c,isNewSearch:a||r!==n,totalResultsCount:t,memberResultsCount:o,workspaceResultsCount:d}))})}fetchMemberData(e){var{args:t,forceNewSearch:a,newSearchQuery:n,stashedSearchQuery:r}=e,{fetchMembers:s}=this.props;return s(t).then(e=>{var{items:t=[],next_cursor_mark:s,num_found:i}=e;(t.length||"*"===s)&&(this.setNextCursorMark(s),this.setCurrentOptionsData({optionData:t,isNewSearch:a||r!==n,totalResultsCount:i}))})}focus(){this.select.focus()}formatMemberOptionData(e){var t=Object(N.K)(e),a=Object(m.a)(e,"id");return{label:this.renderMemberItemTemplate({item:e,type:"member"}),value:a,displayValue:t}}formatMemberOptionsGroupsHeader(){var{memberResultsCount:e,selectedOptionData:t}=this.state,a=t?1:e;return Be.t("Search by coworker ({num})",{num:a})}formatOptionsDataArrayOrObject(e){var{membersOnly:t}=this.props,a=[];if(t)a=Object(Se.a)(e,e=>this.formatMemberOptionData(e));else{var{members:n,workspaces:r}=e,s=Object(m.a)(n,"length",0),i=Object(m.a)(r,"length",0);if(s){var o={label:this.formatMemberOptionsGroupsHeader(),options:[]},c=i>0?Object(je.a)(n,0,4):n;o.options=Object(Se.a)(c,e=>this.formatMemberOptionData(e)),a.push(o)}if(i){var l={label:this.formatWorkspaceOptionsGroupsHeader(),options:[]};l.options=Object(Se.a)(r,e=>this.formatWorkspaceOptionData(e)),a.push(l)}}return a}formatWorkspaceOptionData(e){var t=Object(m.a)(e,"name"),a=Object(m.a)(e,"id");return{label:this.renderMemberItemTemplate({item:e,type:"workspace"}),value:a,displayValue:t}}formatWorkspaceOptionsGroupsHeader(){var{prepopulatedOption:e}=this.props,{currentSearchQuery:t,workspaceResultsCount:a,selectedOptionData:n}=this.state,r=Object(m.a)(e,"displayValue","")?Object(m.a)(e,"displayValue",""):t,s=n?1:a,i=Object(we.c)()?50:150,o=Object(m.a)(r,"length",0)>i?"".concat(r.slice(0,i),"..."):r;return Be.t("Workspaces matching \u201c{query}\u201d ({num})",{query:Object(D.q)(o),num:s})}initKeyCommands(){var e=new Ie.a;return e.bindAll([{keys:["enter"],handler:this.onKeyPressedEnter}]),e}triggerActionWithValue(){var{triggerAction:e}=this.props,{selectedOptionData:t}=this.state;e({selectedOptionData:t,type:Object(we.h)(t)?"member":"workspace"})}renderMemberItemTemplate(e){var{item:t,type:a}=e;return r.a.createElement(workspace_search_options_list_item_WorkspaceSearchOptionsListItem,{item:t,type:a,featureReactMessages:!0,featureReactMemberProfileCard:!0})}renderShowAllWorkspacesListItem(){var{currentSearchQuery:e}=this.state;return r.a.createElement("div",{className:"p-workspace_search_options_list_item"},r.a.createElement("div",{className:"p-workspace_search__search_icon_wrapper"},r.a.createElement(G.b,{type:"search"})),r.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_1"},r.a.createElement("div",{className:"p-workspace_search_options_list_item__alternate_content"},Be.rt('All workspace results for <span class="p-workspace_search_options_list_item__alternate_content--highlight">{query}</span>',{query:Object(D.q)(e)}))))}render(){var{containerIdSelector:e,membersOnly:t}=this.props,{value:a,currentOptionsData:n,loadingResults:s,currentSearchQuery:i,prepopulatedOptionData:o,selectedOptionData:c}=this.state,{bottom:d=0,top:p=0}=this.getBoundingRect(e),u={autoSelectFirstOption:!0,className:"p-workspace_search",displayValue:i,isLoading:s,membersOnly:t,onChange:this.onChange,onClearButtonClick:this.onClearButtonClicked,onClose:this.onClose,onFilterInputChange:this.debouncedOnFilterInputChange,onOpen:this.onOpen,onOptionHighlighted:this.onOptionHighlighted,onScroll:this.onScroll,optionsListOffsetBottom:window.innerHeight-d,optionsListOffsetTop:p,optionsRowHeight:48,placeholder:this.getPlaceHolderText(t),pillarClassName:"p-workspace_search",selectedOption:c,usePlaceholderOption:!1,useFullWidthOptions:!0,value:a,wrapperClassName:"p-workspace_search__wrapper"};if(t?u.options=this.formatOptionsDataArrayOrObject(n):u.optionGroups=this.formatOptionsDataArrayOrObject(n),o&&!a)if(Object(m.a)(o,"id")===we.b)u.selectedOption=o,u.displayValue=Object(m.a)(o,"displayValue");else{var h=Object(we.h)(o)?this.formatMemberOptionData(o):this.formatWorkspaceOptionData(o);u.selectedOption=o,u.displayValue=Object(m.a)(h,"displayValue")}return r.a.createElement("div",{className:"position_relative"},r.a.createElement(Ue,Object(l.a)({},u,{ref:this.setSelectRef})))}}workspace_search_WorkspaceSearch.defaultProps=He;var We={fetchMembers:U.k,fetchDirectoryWorkspaces:U.f},qe=Object(E.b)(null,We,null,{withRef:!0})(workspace_search_WorkspaceSearch),Ge=a("wR6u");function Ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(a),!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ke(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ze=new D.b("workspace_directory"),Ye={launch:"launch",join:"join",request:"request",request_sent:"request_sent",default:"default"},Qe={buttonContext:"largeCard",customClasses:"",onWorkspaceLaunch:O.a,onDefaultButtonClick:O.a,doLaunchInNewTab:!1,displayDirectoryInModal:!1,callJoinWorkspace:O.a,callRequestToJoinWorkspace:O.a,size:"large",onActionReject:O.a,onActionResolve:O.a,anchorPage:void 0,doUpsertJoin:!1,preventAppLaunch:!1},Xe=e=>{var{displayDirectoryInModal:t,preventAppLaunch:a}=e;return{text:a?ze.t("Join and Continue",{fallbackHash:"e6533ebcba1f476e42b0bc2d0890470600735435"}):t?ze.t("Join and Open"):ze.t("Join and Launch Slack"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":"join","data-qa":"join"}},Je=()=>{var e="request_to_join";return{text:ze.t("Request to Join"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":e,"data-qa":e}},Ze=()=>{var e="request_sent";return{text:ze.t("Request Sent"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":e,"data-qa":e,disabled:!0}},$e=e=>{var{displayDirectoryInModal:t,preventAppLaunch:a}=e;return{text:a?ze.t("Continue",{fallbackHash:"cf9b77061f7b3126b49d50a6fa68f7ca8c26b7a3"}):t?ze.t("Open"):ze.t("Launch in Slack"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":"launch","data-qa":"launch"}},et=()=>{var e="default";return{type:"outline",text:ze.t("View Details",{fallbackHash:"6319b15f86fee6c8e5aa4846437f377ec352787c"}),"data-qa-ws-directory-button-type":"outline","data-qa-ws-directory-button-text":e,"data-qa":e}};class workspace_directory_button_WorkspaceDirectoryButton extends n.Component{constructor(e){super(e),this.state={loading:!1},this.buttonType=null,this.onClick=this.onClick.bind(this),this.onKeyPress=this.onKeyPress.bind(this)}onClick(e){e.stopPropagation(),e.preventDefault(),this.handleButtonAction()}onKeyPress(e){e.stopPropagation(),e.preventDefault(),13===e.which&&this.handleButtonAction()}onWorkspaceJoin(){var{windowOpener:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{team:t,onActionReject:a,onActionResolve:n,anchorPage:s,doUpsertJoin:i}=this.props;return Object(H.a)()&&Object(Ge.d)(!1),this.props.callJoinWorkspace({teamId:t.id,anchorPage:s,doUpsertJoin:i}).then(()=>{var e={};i&&(e.workspace=Ve({},t,{is_member:!0})),n(e),Object(H.a)()&&!Object(W.b)()&&Object(Ge.d)(!0)}).then(()=>this.props.onWorkspaceLaunch(e)).catch(t=>{Object(H.a)()&&Object(Ge.d)(!0),e&&(this.setLoading(!1),e.close()),a({node:r.a.createElement("span",null,ze.rt("Workspace couldn\u2019t be joined. Please reload and try again.")),err:t})})}onWorkspaceRequestToJoin(){var{team:e,onActionReject:t,onActionResolve:a,anchorPage:n}=this.props;return this.props.callRequestToJoinWorkspace({teamId:e.id,anchorPage:n}).then(()=>{a({node:r.a.createElement("div",{className:"display_flex"},r.a.createElement(G.b,{type:"check-circle-o",className:"margin_right_50 sk_lilypad_green"}),r.a.createElement("span",null,ze.rt("<strong>Request sent!</strong> You\u2019ll be notified by email when a Workspace Admin grants access."))),workspace:Ve({},e,{date_requested_join:String(Math.floor(Date.now()))})})}).then(()=>{this.setLoading(!1)}).catch(e=>{t({node:r.a.createElement("span",null,ze.rt("Your request couldn\u2019t be sent. Please reload and try again.")),err:e})})}getButtonProps(e){var{displayDirectoryInModal:t,preventAppLaunch:a}=this.props;switch(e){case Ye.launch:return $e({displayDirectoryInModal:t,preventAppLaunch:a});case Ye.request:return Je();case Ye.join:return Xe({displayDirectoryInModal:t,preventAppLaunch:a});case Ye.request_sent:return Ze();case Ye.default:return et();default:return null}}setLoading(e){this.setState(()=>({loading:e}))}handleButtonAction(){var{doLaunchInNewTab:e}=this.props;if("default"===this.buttonType)return this.props.onDefaultButtonClick();if(this.setLoading(!0),"join"===this.buttonType){if(e){var t=window.open("","_blank");return this.onWorkspaceJoin({windowOpener:t})}return this.onWorkspaceJoin()}return"request"===this.buttonType?this.onWorkspaceRequestToJoin():("launch"===this.buttonType&&(this.props.onWorkspaceLaunch(),e&&this.setLoading(!1)),null)}render(){var{featureZeroWorkspaceOnboarding:e,team:t,buttonContext:a,customClasses:n,size:s}=this.props,{loading:i}=this.state,o=function(e,t){var{context:a=we.a.smallCard,featureZeroWorkspaceOnboarding:n=!0}=t;if(!n)return null;var{is_member:r,date_requested_join:s,is_assigned:i,discoverable:o}=e;if(r)return Ye.launch;if(a!==we.a.smallCard){if(i)return Ye.join;switch(o){case"open":return Ye.join;case"closed":if(!s)return Ye.request;if(a===we.a.largeCard)return Ye.request_sent}return null}return Ye.default}(t,{context:a,featureZeroWorkspaceOnboarding:e});this.buttonType=o;var c=this.getButtonProps(o);if(!o||Object(v.a)(c))return null;var{id:p}=t,{text:u}=c,h=Object(d.a)(c,["text"]),m=h.disabled||i;return r.a.createElement(ye.b,Object(l.a)({},h,{className:n,onClick:this.onClick,onKeyPress:this.onKeyPress,"data-workspace-id":p,"data-qa-ws-directory-button":!0,loading:i,disabled:m,size:s}),u)}}workspace_directory_button_WorkspaceDirectoryButton.defaultProps=Qe;var tt={callJoinWorkspace:U.b,callRequestToJoinWorkspace:U.d};var at=Object(E.b)((e,t)=>{var{team:a,onActionResolve:n,anchorPage:r,doLaunchInNewTab:s,channelRedirect:i,postLaunchAction:c,userIdFromURL:l}=t,d=Object(T.b)(e);return{featureZeroWorkspaceOnboarding:Object(o.m)(e,"feature_zero_workspace_onboarding"),displayDirectoryInModal:Object(o.l)(e),onWorkspaceLaunch:t=>Object(we.i)(e,{team:a,user:d,onActionResolve:n,anchorPage:r,doLaunchInNewTab:s,windowOpener:t,channelRedirect:i,postLaunchAction:c,userIdFromURL:l})}},tt)(workspace_directory_button_WorkspaceDirectoryButton),nt=(a("ah8n"),new D.b("workspace_directory")),rt={large:"large",small:"small"},st={large:64,small:48},it={size:rt.large,className:"",onActionResolve:O.a,onActionReject:O.a,anchorPage:"",openDialog:O.a,doLaunchInNewTab:!1,isFromSharedChannelInvite:!1};class workspace_directory_card_WorkspaceDirectoryCard extends n.Component{constructor(e){super(e),this.onCardClick=this.onCardClick.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.onResize=this.onResize.bind(this),this.openDialog=this.openDialog.bind(this),this.state={isMobileView:!1}}componentDidMount(){this.setIsMobileView(Object(we.c)()),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}onCardClick(e){e.stopPropagation(),e.preventDefault(),this.isSmallVariationCard()&&this.openDialog()}onKeyPress(e,t){if(e.preventDefault(),"Enter"===e.key)switch(t){case"openDialog":if(this.isSmallVariationCard())return this.openDialog()}return null}onResize(){this.setIsMobileView(Object(we.c)())}setIsMobileView(e){this.setState(()=>({isMobileView:e}))}isLargeVariationCard(){return this.props.size===rt.large}isSmallVariationCard(){return this.props.size===rt.small}openDialog(){var{team:e,openDialog:t}=this.props;t({team:e})}renderAvatar(){var{team:e}=this.props,t=this.isLargeVariationCard()&&!this.state.isMobileView?st[rt.large]:st[rt.small];return r.a.createElement("div",{className:"display_flex"},r.a.createElement(te,{entityType:"workspace",customClasses:this.isSmallVariationCard()?"cursor_pointer":"",dimension:t,entityData:e,featureReactMessages:!0,featureReactMemberProfileCard:!0}))}renderButton(){var{team:e,size:t,onActionReject:a,onActionResolve:n,anchorPage:s,doLaunchInNewTab:i,isFromSharedChannelInvite:o}=this.props,c=this.isLargeVariationCard()?"large":"medium";return r.a.createElement(at,{team:e,buttonContext:"".concat(t,"Card"),featureZeroWorkspaceOnboarding:!0,customClasses:"p-workspace_directory_card__button",onDefaultButtonClick:this.openDialog,onActionReject:a,onActionResolve:n,anchorPage:s,doLaunchInNewTab:i,size:c,preventAppLaunch:o})}renderWorkspaceDescription(){var{description:e}=this.props.team;return r.a.createElement("div",{className:"p-workspace_directory_card__description","data-qa-ws-directory-card-description":!0},e)}renderWorkspaceName(){var{name:e}=this.props.team;return r.a.createElement("span",{className:"p-workspace_directory_card__title","data-qa-ws-directory-card-title":!0,title:e},e)}renderWorkspaceStatus(){var{featureZeroWorkspaceOnboarding:e,team:t}=this.props;if(!e||this.isSmallVariationCard())return null;var a=Object(we.f)(t,{context:"largeCard",featureZeroWorkspaceOnboarding:e});return a?r.a.createElement("div",{className:"p-workspace_directory_card__status"},a):null}renderWorkspaceSubtitle(){var{featureZeroWorkspaceOnboarding:e,team:t}=this.props;if(!e)return null;var a,{isMobileView:n}=this.state,{date_requested_join:s,discoverable:i,domain:o,user_counts:{active_members:c=0}={}}=t,l=nt.t("{activeMembers} active members",{activeMembers:c?Object(D.o)(c):0});return a=this.isLargeVariationCard()&&!n?r.a.createElement("div",null,r.a.createElement("span",{className:"border_right padding_right_50 margin_right_50 float_left"},l),r.a.createElement("span",{className:"overflow_ellipsis"},"".concat(o,".slack.com"))):this.isSmallVariationCard()&&"closed"===i&&s?r.a.createElement("span",null,nt.t("Awaiting admin approval")):r.a.createElement("span",{className:"overflow_ellipsis"},l),r.a.createElement("div",{className:"p-workspace_directory_card__subtitle","data-qa-ws-directory-card-subtitle":!0},a)}render(){var{featureZeroWorkspaceOnboarding:e,size:t,className:a}=this.props;if(!e)return null;var{id:n}=this.props.team,s=j()("p-workspace_directory_card",a,{"p-workspace_directory_card--large":this.isLargeVariationCard(),"p-workspace_directory_card--small":this.isSmallVariationCard()});return r.a.createElement("div",{className:s,onClick:this.onCardClick,"data-workspace-id":n,"data-qa-ws-directory-card":!0,"data-qa-ws-directory-card-size":t,role:"presentation"},r.a.createElement("div",{className:"display_flex flex_direction_column"},r.a.createElement("div",{className:"display_flex align_self_start full_width"},this.renderAvatar(),r.a.createElement("div",{className:"p-workspace_directory_card__heading nudge_top_1"},this.renderWorkspaceName(),this.renderWorkspaceSubtitle())),this.renderWorkspaceStatus(),this.renderWorkspaceDescription()),this.renderButton())}}workspace_directory_card_WorkspaceDirectoryCard.defaultProps=it;var ot=Object(E.b)(e=>({featureZeroWorkspaceOnboarding:Object(o.m)(e,"feature_zero_workspace_onboarding")}))(workspace_directory_card_WorkspaceDirectoryCard),ct=a("mIgp");a("8XR2");function lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function dt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(a),!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var pt=new D.b("grid_onboarding"),ut={orgName:"",scrollElement:window,enqueueToast:O.a,onFooterClick:O.a},ht=24,mt=1200,bt=Object(A.b)();function _t(e){var{totalWorkspaces:t,onWorkspaces:a}=e;return!t&&a}function gt(e){var{totalWorkspaces:t,onWorkspaces:a}=e;return!t&&!a}var ft=e=>{var{workspaces:t,noAccessToWorkspaces:a,noWorkspaces:n,hasApiError:s,featureZeroWorkspaceOnboarding:i}=e;if(!i)return"";var o=function(e){return e?{oneJoinableWorkspace:pt.t("Join this workspace to start working with them on Slack."),moreThanOneJoinableWorkspaces:pt.t("Join the workspace that seems right for your role to get started."),noAccess:pt.t("Get in touch with them to be invited to a workspace they\u2019re in."),noWorkspaces:pt.t("Try searching for someone else on your team."),onApiError:pt.rt("You may want to try <a>reloading this page</a> and searching again, or try searching for someone else.",null,e=>{var{text:t,key:a,tag:n}=e;return"a"===n?r.a.createElement(z.a,{onClick:()=>Object(Oe.b)({reason:"Search failure, user initiated reload via link in error message",reasonKey:"search_results_failure",noCache:!0}),target:"_self",key:a},t):{text:t}})}:""}(i);if(s)return o.onApiError;var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(f.a)(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"open"===e.discoverable||"closed"===e.discoverable||"unlisted"===e.discoverable&&e.is_assigned})}(t).length;return 1===c?o.oneJoinableWorkspace:c>1?o.moreThanOneJoinableWorkspaces:a?o.noAccess:n?o.noWorkspaces:""},vt=e=>{var{noAccessToWorkspaces:t,noWorkspaces:a,memberRealName:n,totalWorkspaces:r,hasApiError:s,featureZeroWorkspaceOnboarding:i}=e;return i?s?pt.t("We ran into some trouble fetching {memberName}\u2019s workspaces",{memberName:Object(D.q)(n)}):t?pt.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:Object(D.q)(n)}):a?pt.t("{memberName} hasn\u2019t joined a workspace",{memberName:Object(D.q)(n)}):pt.t("{memberName} is in {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{memberName:Object(D.q)(n),numWorkspaces:r}):""};class search_results_screen_SearchResultsScreen extends n.Component{constructor(e){super(e),this.state={isMobileView:!1,loadingWorkspaces:!1,nextCursorMark:null,memberRealName:"",selectedMember:{},workspaces:[],totalWorkspaces:0,onWorkspaces:!1,hasApiError:!1},this.resultsList=null,this.searchBar=null,this.userHasNoAccessToWorkspaces=!1,this.memberHasNoWorkspaces=!1,this.noWorkspacesToDisplay=!1,this.doRenderSearchAgainButton=!1,Object(k.a)(this,["onFooterClick","onResize","onScroll","setListRef","setSearchBarRef","renderWorkspaceCard","getListKeys","onSearchAgainButtonClick","onSelectColleague","setWorkspaceFetchOptions","fetchWorkspaces","onButtonActionReject","onButtonActionResolve","setToastText","setLoadingWorkspaces"])}componentDidMount(){window.addEventListener("resize",this.onResize),this.clientHeight=window.innerHeight,this.setSelectedMember(this.props.selectedMember)}componentDidUpdate(e,t){this.maybeFetchNextPage(t),this.maybeTriggerNewSearch(t),this.maybeUpdateMemberRealName(t)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}onButtonActionReject(e){var{node:t}=e;t&&this.setToastText(t)}onButtonActionResolve(e){var{node:t,i:a,workspace:n}=e;Object(fe.a)(a)&&n&&this.setWorkspaceByIndex({index:a,workspace:n}),t&&this.setToastText(t)}onFooterClick(){this.props.onFooterClick()}onResize(){this.clientHeight=window.innerHeight;var e=Object(we.c)(),t=this.state.isMobileView!==e;(e||t)&&this.resultsList.invalidateRowHeights()}onScroll(e){var{scrollTop:t,scrollHeight:a}=e;this.doInfiniteScrollHandler({scrollTop:t,scrollHeight:a})}onSearchAgainButtonClick(e){e.preventDefault(),e.stopPropagation(),this.searchBar&&this.searchBar.getWrappedInstance&&this.searchBar.getWrappedInstance().onSearchAgainTriggered()}onSelectColleague(e){var{selectedOptionData:t}=e;t&&this.setSelectedMember(t)}getListKeys(){return this.state.workspaces?this.state.workspaces.map(e=>String(e.id)):[]}setHasApiError(e){this.setState(()=>({hasApiError:e}))}setListRef(e){this.resultsList=e}setLoadingWorkspaces(e){this.setState(()=>({loadingWorkspaces:e}))}setMemberRealName(e){this.setState(()=>({memberRealName:e}))}setSearchBarRef(e){this.searchBar=e}setSelectedMember(e){this.setState(()=>({selectedMember:e}))}setToastText(e){this.props.enqueueToast({element:r.a.createElement(K.b,{position:"bottom-right",offsetY:50},e)})}setWorkspaceByIndex(e){var{index:t,workspace:a}=e;this.setState(e=>{var n=[].concat(e.workspaces);return t>=n.length?(bt.warn("SearchResultsScreen: Out of bounds index ".concat(t," passed into setWorkspaceByIndex")),e):(n[t]=a,{workspaces:n})})}setWorkspaceFetchOptions(e){var{workspaces:t,totalWorkspaces:a,onWorkspaces:n,nextCursorMark:r}=e;this.setState(()=>({workspaces:t,totalWorkspaces:a,onWorkspaces:n,nextCursorMark:r}))}clearWorkspaceFetchOptions(){this.setWorkspaceFetchOptions({workspaces:[],totalWorkspaces:0,onWorkspaces:!1,nextCursorMark:null})}doInfiniteScrollHandler(e){var{scrollTop:t,scrollHeight:a}=e,n=this.hasScrolledWithinScrollThreshold({scrollTop:t,scrollHeight:a});n&&!this.hasFetchedAllWorkspaces()?this.setLoadingWorkspaces(!0):!n&&this.hasFetchedAllWorkspaces()&&this.setLoadingWorkspaces(!1)}fetchWorkspaces(){var{nextCursorMark:e,selectedMember:t}=this.state;return this.setHasApiError(!1),this.props.fetchDirectoryWorkspaces({nextCursorMark:e,id:Object(m.a)(t,"id"),type:"single_user"}).then(t=>{this.setLoadingWorkspaces(!1);var{num_found:a,on_workspaces:n,items:r}=t,s=r?[].concat(this.state.workspaces,r):[];this.setWorkspaceFetchOptions({workspaces:s,totalWorkspaces:a,onWorkspaces:n,nextCursorMark:t.next_cursor_mark}),e||Object(we.e)({anchorPage:"grid_onboarding",numSearchResults:Object(m.a)(t,"num_found",0),clogger:this.props.clogger})}).catch(e=>{this.setHasApiError(!0),this.setLoadingWorkspaces(!1),bt.error("SearchResultsScreen: Error in FetchWorkspaces -",e)})}hasFetchedAllWorkspaces(){return this.state.workspaces.length===this.state.totalWorkspaces}hasScrolledWithinScrollThreshold(e){var{scrollHeight:t,scrollTop:a}=e;return t-(a+this.clientHeight)<mt}maybeFetchNextPage(e){!e.loadingWorkspaces&&this.state.loadingWorkspaces&&this.fetchWorkspaces()}maybeTriggerNewSearch(e){e.selectedMember!==this.state.selectedMember&&(this.clearWorkspaceFetchOptions(),this.setLoadingWorkspaces(!0))}maybeUpdateMemberRealName(e){if(e.selectedMember!==this.state.selectedMember){var t=Object(N.K)(this.state.selectedMember);this.setMemberRealName(t)}}renderFooter(){var{orgName:e}=this.props,t=j()("p-grid_onboarding__footer","p-grid_onboarding__footer_link",{margin_top_250:!this.noWorkspacesToDisplay||!this.doRenderSearchAgainButton,margin_top_150:this.noWorkspacesToDisplay});return r.a.createElement(ve.a,{enabled:["feature_zero_workspace_onboarding"]},r.a.createElement(z.a,{onClick:this.onFooterClick,className:t},pt.t("View all {orgName} workspaces",{orgName:e}),r.a.createElement(G.a,{type:"chevron-right",key:"footer-chevron-icon",className:"p-grid_onboarding__footer_icon"})))}renderHeading(){var{featureZeroWorkspaceOnboarding:e}=this.props;if(!e)return null;var{totalWorkspaces:t,selectedMember:a,hasApiError:n}=this.state,s=Object(N.K)(a),i=vt({noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,totalWorkspaces:t,memberRealName:s,hasApiError:n,featureZeroWorkspaceOnboarding:e}),o=j()("p-grid_onboarding__results_heading_container",{align_center:this.noWorkspacesToDisplay});return r.a.createElement("div",{className:o},r.a.createElement("span",{className:"p-grid_onboarding__results_heading"},r.a.createElement(te,{entityType:"member",dimension:ht,entityData:a,featureReactMessages:!0,customClasses:"p-grid_onboarding_results__icon"}),i))}renderInfiniteSpinner(){return r.a.createElement("div",{className:"p-grid_onboarding__spinner"},r.a.createElement(Y.a,{size:"jumbo",className:"inline_block full_width margin_top_200"}))}renderResults(){var{loadingWorkspaces:e,selectedMember:t}=this.state;return e&&this.memberHasNoWorkspaces||!t?this.renderInfiniteSpinner():r.a.createElement(r.a.Fragment,null,this.renderHeading(),this.renderSubheading(),!this.noWorkspacesToDisplay&&this.renderWorkspaceList(),e&&this.renderInfiniteSpinner(),this.doRenderSearchAgainButton&&this.renderSearchAgainButton(),!e&&this.renderFooter())}renderSearchAgainButton(){return r.a.createElement(ve.a,{enabled:["feature_zero_workspace_onboarding"]},r.a.createElement("div",{className:"display_flex justify_content_center margin_top_150"},r.a.createElement(ye.d,{type:"outline",onClick:this.onSearchAgainButtonClick},pt.t("Search Again"))))}renderSearchBar(){return r.a.createElement("div",{className:"p-grid_onboarding_results__search"},r.a.createElement(qe,{triggerAction:this.onSelectColleague,containerIdSelector:"colleagueSearchResults",membersOnly:!0,className:"margin_bottom_200",prepopulatedOption:this.props.selectedMember,ref:this.setSearchBarRef}))}renderSubheading(){var{featureZeroWorkspaceOnboarding:e}=this.props;if(!e)return null;var{workspaces:t,hasApiError:a}=this.state,n=ft({workspaces:t,featureZeroWorkspaceOnboarding:e,noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,hasApiError:a}),s=j()("p-grid_onboarding__results_subheading",{align_center:this.noWorkspacesToDisplay});return r.a.createElement("div",{className:s},n)}renderWorkspaceCard(e){var{workspaces:t,totalWorkspaces:a}=this.state,n=j()("p-grid_onboarding_results__list_item",{margin_bottom_0:e===a-1});return r.a.createElement(ot,{team:t[e],size:"large",featureZeroWorkspaceOnboarding:!0,className:n,onActionResolve:t=>this.onButtonActionResolve(dt({},t,{i:e})),onActionReject:t=>this.onButtonActionReject(dt({},t,{i:e})),anchorPage:"grid_onboarding"})}renderWorkspaceList(){var{scrollElement:e}=this.props;return r.a.createElement(S.a,{scrollElement:e,onScroll:this.onScroll},t=>{var{height:a,isScrolling:n,onChildScroll:s,scrollTop:i,registerChild:o}=t;return r.a.createElement("div",{className:"p-grid_onboarding_results__list",ref:o},r.a.createElement(ct.a,{keys:this.getListKeys(),rowRenderer:this.renderWorkspaceCard,ref:this.setListRef,scrollElement:e,onScroll:s,height:a,isScrolling:n,scrollTop:i}))})}render(){var{totalWorkspaces:e,onWorkspaces:t,loadingWorkspaces:a,hasApiError:n}=this.state;return this.userHasNoAccessToWorkspaces=_t({totalWorkspaces:e,onWorkspaces:t}),this.memberHasNoWorkspaces=gt({totalWorkspaces:e,onWorkspaces:t}),this.noWorkspacesToDisplay=this.userHasNoAccessToWorkspaces||this.memberHasNoWorkspaces,this.doRenderSearchAgainButton=!a&&this.noWorkspacesToDisplay&&!n,r.a.createElement(ve.a,{enabled:["feature_zero_workspace_onboarding"]},r.a.createElement("div",{className:"p-grid_onboarding__results",id:"colleagueSearchResults"},this.renderSearchBar(),this.renderResults()))}}search_results_screen_SearchResultsScreen.defaultProps=ut;var Ot={enqueueToast:P.c,fetchDirectoryWorkspaces:U.f},yt=(Object(E.b)((e,t)=>{var{selectedMember:a,workspaces:n}=t;return{selectedMember:a,workspaces:n,orgName:Object(w.e)(e),clogger:Object(F.a)({state:e}),featureZeroWorkspaceOnboarding:Object(o.m)(e,"feature_zero_workspace_onboarding"),featureSingleUserWorkspacePagination:Object(o.m)(e,"feature_single_user_workspace_pagination")}},Ot)(search_results_screen_SearchResultsScreen),a("cW5R")),Ct=a("HOkk");a("zzVd");function jt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Et(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(a),!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var kt=new D.b("workspace_directory"),St={callLeaveWorkspace:O.a,onClose:O.a,onActionResolve:O.a,onActionReject:O.a,fetchEnterpriseTeamById:O.a,onLeaveReject:O.a,onLeaveResolve:O.a,onDone:O.a,fetchTeam:O.a,isGuest:!1,displayDirectoryInModal:!1,channelRedirect:null,postLaunchAction:null,userIdFromURL:null,isFromSharedChannelInvite:!1};class workspace_directory_dialog_WorkspaceDirectoryDialog extends n.Component{constructor(e){super(e),this.state={team:{},loading:!1},this.onWorkspaceLeave=this.onWorkspaceLeave.bind(this),this.setLoading=this.setLoading.bind(this)}componentDidMount(){var{team:e}=this.props;this.setWorkspace(e),this.fetchWorkspaceInfo()}onWorkspaceLeave(e){var{team:t,onLeaveReject:a,onLeaveResolve:n,onDone:s}=this.props;return e.preventDefault(),this.props.callLeaveWorkspace({teamId:t.id}).then(()=>n({workspace:Et({},t,{is_member:!1})})).then(()=>s()).catch(e=>a({node:r.a.createElement("span",null,kt.rt("Workspace couldn\u2019t be left. Please reload and try again.")),err:e}))}getTitleAria(){var{name:e=""}=this.state.team;return e||"Workspace Name"}setLoading(e){this.setState(()=>({loading:e}))}setWorkspace(e,t){this.setState(()=>({team:e}),t)}canLeaveWorkspace(){var{is_member:e,can_leave:t}=this.state.team,{isGuest:a}=this.props;return e&&t&&!a}fetchWorkspaceInfo(){var{id:e}=this.props.team;return this.setLoading(!0),this.props.fetchEnterpriseTeamById({teamId:e,additionalOptions:{include_admins:!0}}).then(e=>{this.setWorkspace(e,()=>this.setLoading(!1))})}listifyAdminRealNames(e){var t=Object(Se.a)(e,e=>Object(N.K)(e));return Object(D.k)(t,{noEscape:!0})}renderButton(){var{onActionReject:e,onActionResolve:t,isFromSharedChannelInvite:a}=this.props,{team:n,loading:s}=this.state;if(s)return null;var i=!(Object(I.v)()||Object(H.a)()&&Object(W.b)());return r.a.createElement(at,{team:n,customClasses:"margin_top_100",buttonContext:"dialog",featureZeroWorkspaceOnboarding:!0,onActionReject:e,onActionResolve:t,anchorPage:"workspace_directory",size:"medium",doLaunchInNewTab:i,channelRedirect:this.props.channelRedirect,postLaunchAction:this.props.postLaunchAction,userIdFromURL:this.props.userIdFromURL,doUpsertJoin:!0,preventAppLaunch:a})}renderDialogBody(){if(this.state.loading)return this.renderInfiniteSpinner();var{description:e,admins:t,user_counts:a}=this.state.team,n=[];e&&n.push({heading:kt.t("About"),text:e,key:"dialog-description"}),n.push({heading:kt.t("Active members"),text:kt.t("{activeMembers}",{activeMembers:Object(D.o)(Object(m.a)(a,"active_members",0))}),key:"dialog-active-members"},{heading:kt.t("Workspace admins"),text:this.listifyAdminRealNames(t),key:"dialog-admins"});return r.a.createElement("div",{className:"p-workspace_directory_dialog__body"},n.map(e=>(e=>r.a.createElement("div",{key:e.key},r.a.createElement("p",{className:"margin_bottom_25 bold"},e.heading),r.a.createElement("p",null,e.text)))(e)))}renderDialogFooter(){return r.a.createElement(ye.c,{className:"p-workspace_directory_dialog__leave",onClick:this.onWorkspaceLeave},kt.t("Leave this workspace"))}renderDialogHeader(e){var{team:t}=this.state,{name:a="",domain:n=""}=t,s=j()("p-workspace_directory_dialog__header",{"p-workspace_directory_dialog__header--mobile":Object(we.c)()});return r.a.createElement("div",{className:s},r.a.createElement(te,{entityType:"workspace",dimension:100,entityData:t,featureReactMessages:!0,featureReactMemberProfileCard:!0}),r.a.createElement("div",{className:"p-workspace_directory_dialog__name"},kt.t("{name}",{name:Object(D.q)(a)})),r.a.createElement("div",{className:"p-workspace_directory_dialog__domain"},kt.t("{domain}.slack.com",{domain:n})),this.renderDialogHeaderCaption(e),this.renderButton())}renderDialogHeaderCaption(e){var{loading:t}=this.state;return t?null:e?r.a.createElement("span",{className:"p-workspace_directory_dialog__caption"},r.a.createElement(G.b,{size:"inherit",type:"exclamation-circle",align:"baseline",className:"margin_right_25"}),e):null}renderDialogOnMobile(e){var t=this.canLeaveWorkspace();return r.a.createElement(ae.a,{showCancelButton:!1,showCloseButton:!1,showGoButton:!1,position:"fixed",modalBodyClasses:"p-workspace_directory_dialog--mobile"},this.renderDialogHeader(e),r.a.createElement("div",{className:"p-workspace_directory_dialog__contents--mobile"},this.renderDialogBody(),t&&this.renderDialogFooter()))}renderInfiniteSpinner(){return r.a.createElement("div",{className:"overflow_hidden margin_100"},r.a.createElement(Y.a,{size:"jumbo",className:"inline_block full_width"}))}render(){var{team:e}=this.state,t=Object(we.f)(e,{context:"dialog"});if(Object(we.c)())return this.renderDialogOnMobile(t);var{displayDirectoryInModal:a}=this.props,n={contentLabel:t,className:j()("p-workspace_directory_dialog",{"p-workspace_directory_dialog--focus_ring":!a}),showCloseButton:!0,showCancelButton:!1,showGoButton:!1,showHeader:!0,title:this.renderDialogHeader(t),titleAria:this.getTitleAria(),useSlackScrollbar:!1,showFooter:!1,shouldCloseOnOverlayClick:!0,invertCloseButton:!0};return this.canLeaveWorkspace()&&(n=Et({},n,{showFooter:!0,footerText:this.renderDialogFooter()})),r.a.createElement(Ct.a,n,this.renderDialogBody())}}workspace_directory_dialog_WorkspaceDirectoryDialog.defaultProps=St;var It={callLeaveWorkspace:U.c,fetchEnterpriseTeamById:U.g},wt=Object(E.b)(null,It)(workspace_directory_dialog_WorkspaceDirectoryDialog),Tt=a("XhtD"),Nt=(a("+BnW"),{scrollElement:window,onScroll:O.a,renderWorkspaceCard:O.a,topOffset:0});class workspace_grid_list_WorkspaceGridList extends n.PureComponent{static getUpdatedRowIndex(e){var{currentRow:t=0,prevColumns:a=0,updatedColumns:n=0}=e;if(!t)return 0;if(a===n)return t;var r=t*a;return Math.floor(r/n)}constructor(e){super(e),Object(k.a)(this,["onScroll","onResize","setListRef","getListKeys","renderRow","renderCell"]),this.state={columns:3},this.list=null,this.keys=[],this.rowsByIndex=[],this.currentRow=0}componentDidMount(){window.addEventListener("resize",this.onResize),this.calculateColumns()}componentDidUpdate(e,t){if(this.state.columns!==t.columns){var a=workspace_grid_list_WorkspaceGridList.getUpdatedRowIndex({currentRow:this.currentRow,prevColumns:t.columns,updatedColumns:this.state.columns});this.currentRow=a;var n=this.getKeyForRow(a);this.keys.length&&this.list.scrollToKey(n)}}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}onResize(){var{start:e}=this.list.getVisibleRange();this.currentRow=e||0,this.calculateColumns()}onScroll(e){return this.props.onScroll(e)}getContentHeight(){return this.list.getContentHeight()}getKeyForRow(e){return this.keys[e]}getListKeys(){return this.keys}getWorkspacesByRowIndex(e){var{columns:t}=this.state,{workspaces:a}=this.props,n=this.rowsByIndex[e],r=Math.min(n+t,a.length);return Object(Tt.a)(n,r)}setColumns(e){this.setState(()=>({columns:e}))}setListRef(e){this.list=e}calculateColumns(){var e=window.innerWidth,t=3;t=Object(we.c)(e)?1:Object(we.d)(e)?2:3,this.state.columns!==t&&this.setColumns(t)}renderCell(e){var{workspaces:t,renderWorkspaceCard:a}=this.props,n=t[e];return n?r.a.createElement("div",{className:"p-workspace_grid_list__cell",key:"grid_list_cell_".concat(e)},a(n)):null}renderRow(e){var t=this.getWorkspacesByRowIndex(e),a=j()("p-workspace_grid_list__row",{"p-workspace_grid_list__row--one_column":1===this.state.columns});return r.a.createElement("div",{className:a},t.map(e=>this.renderCell(e)))}render(){var e=this.props,{topOffset:t,scrollElement:a}=e,n=Object(d.a)(e,["topOffset","scrollElement"]);return this.rowsByIndex=Object(Tt.a)(0,this.props.workspaces.length,this.state.columns),this.keys=this.rowsByIndex.map(e=>e.toString()),r.a.createElement(ct.a,Object(l.a)({keys:this.getListKeys(),rowRenderer:this.renderRow,ref:this.setListRef,scrollElement:this.props.scrollElement,onScroll:this.onScroll,topOffset:this.props.topOffset},n))}}workspace_grid_list_WorkspaceGridList.defaultProps=Nt;var Pt=workspace_grid_list_WorkspaceGridList,At=a("um7Q"),Mt=a("MREy"),xt=a("lwWk"),Rt=(a("wb76"),{logoLink:null,logoAriaLabel:null,logoLinkProps:{},title:null,team:{},isEnterprise:null,renderRightContents:O.a,rightClassName:null,renderCenterContents:O.a,centerClassName:null});class navigation_bar_NavigationBar extends n.Component{renderRightContents(){var{rightClassName:e,renderRightContents:t}=this.props,a=j()("p-navigation_bar__right",e);return r.a.createElement("div",{className:a},t())}renderCenterContents(){var{centerClassName:e,renderCenterContents:t}=this.props,a=j()("p-navigation_bar__center",e);return r.a.createElement("div",{className:a},t())}renderTitle(){var{title:e,team:t,isEnterprise:a}=this.props;return r.a.createElement("div",{className:"p-navigation_bar__heading"},r.a.createElement(te,{entityType:a?"org":"workspace",dimension:28,entityData:t,customClasses:"flex_none",featureReactMessages:!0}),r.a.createElement("span",{className:"p-navigation_bar__title nudge_bottom_1"},e))}renderLogo(){var{logoLink:e,logoAriaLabel:t,logoLinkProps:a}=this.props,n=r.a.createElement("div",{className:"p-navigation_bar__logo","data-qa":"nav_bar_logo",alt:"Slack"});return e?r.a.createElement(xt.a,Object(l.a)({href:e,"aria-label":t,className:"flex_none"},a),n):n}render(){var{title:e}=this.props;return r.a.createElement("nav",{className:"p-navigation_bar"},r.a.createElement("div",{className:"p-navigation_bar__left"},this.renderLogo(),e&&this.renderTitle()),this.renderCenterContents(),this.renderRightContents())}}navigation_bar_NavigationBar.defaultProps=Rt;var Dt=navigation_bar_NavigationBar,Ft=(a("ABxf"),new D.b("workspace_directory")),Lt={isMobileView:!1,displayManageOrgButton:!1,displaySearchBar:!1,prefCompliantMemberName:"",organizationUrl:"",selectedSearchOption:{},onOptionSelected:O.a,onClearHeaderInput:O.a};class workspace_directory_header_WorkspaceDirectoryHeader extends n.Component{constructor(e){super(e),Object(k.a)(this,["maybeRenderSearchBar","onSelectOption","onMenuItemSelected","renderUserMenu","renderUserSettings"])}onMenuItemSelected(e){var t="".concat(window.location.origin,"/account/settings");switch(e){case"settings":window.open(t,"_self")}return null}onSelectOption(e){this.props.onOptionSelected(e)}maybeRenderManageOrganizationButton(){if(!this.props.displayManageOrgButton)return null;var e=Ft.t("Manage Organization",{fallbackHash:"35677e6e3c1751d4a193cc6db0f31a75016c019f"});return r.a.createElement(ye.d,{"data-qa":"ws_directory_manage_org_button",className:"p-workspace_directory_header__manage_org no_underline nudge_bottom_1",type:"outline",href:"/manage",target:"_blank"},e)}maybeRenderSearchBar(){var{selectedSearchOption:e}=this.props;return!this.props.displaySearchBar||this.props.isMobileView?null:r.a.createElement("div",{className:"p-workspace_directory_header__search","data-qa":"ws_directory_search_bar"},r.a.createElement(qe,{prepopulatedOption:e,featureZeroWorkspaceOnboarding:!0,membersOnly:!1,containerIdSelector:"directory_mount_point",triggerAction:this.onSelectOption,onClearInput:this.props.onClearHeaderInput}))}renderAvatar(){var{user:e}=this.props;return r.a.createElement(Mt.e,{"data-qa":"ws_directory_user_menu_trigger",renderMenu:this.renderUserMenu,position:"bottom-right",offsetX:0,offsetY:7.5},r.a.createElement(ye.c,{"aria-haspopup":!0,className:"p-workspace_directory_header__user_icon"},r.a.createElement(te,{entityType:"member",dimension:36,entityData:e,customClasses:"flex_none cursor_pointer",featureReactMessages:!0,isInteractive:!1})))}renderUserMenu(e){var{prefCompliantMemberName:t,enterprise:a,signoutUrl:n}=this.props;return r.a.createElement(Mt.f,Object(l.a)({},e,{menuClassNames:"p-workspace_directory_header__menu","data-qa":"ws_directory_user_menu"}),(()=>r.a.createElement(Mt.b,{key:"workspace_directory_user_menu_name",label:r.a.createElement("span",{className:"black"},t),description:Ft.t("Account settings",{fallbackHash:"e32707613d1f53b92e6162cc5ddb4a9bb58a2ec6"}),href:"/account/settings",onSelected:()=>this.onMenuItemSelected("settings"),className:"no_underline"}))(),r.a.createElement(Mt.d,null),(()=>r.a.createElement(Mt.b,{key:"workspace_directory_user_menu_sign_out",label:Ft.t("Sign out of {orgName}",{orgName:Object(D.q)(a.name)}),href:n,className:"no_underline",showLinkIndicatorIcon:!1,target:"_self",danger:!0}))())}renderUserSettings(){return r.a.createElement("div",{className:"p-workspace_directory_header__settings"},this.maybeRenderManageOrganizationButton(),this.renderAvatar())}render(){var{enterprise:e,isMobileView:t,organizationUrl:a}=this.props,n=t?Ft.t("Directory"):Ft.t("Workspace Directory");return r.a.createElement(Dt,{"data-qa":"ws_directory_header",title:n,team:e,isEnterprise:!0,logoAriaLabel:"Slack",logoLink:a,renderRightContents:this.renderUserSettings,renderCenterContents:this.maybeRenderSearchBar})}}workspace_directory_header_WorkspaceDirectoryHeader.defaultProps=Lt;var Ut=Object(E.b)((e,t)=>{var{user:a,enterprise:n={}}=t;return{signoutUrl:Object(o.f)(e,"signout_url"),prefCompliantMemberName:Object(N.V)(e,a),organizationUrl:Object(At.a)(e,n.domain)}})(workspace_directory_header_WorkspaceDirectoryHeader),Bt=(a("YL49"),{title:"",description:"",showCloseButton:!1,onClose:O.a,className:"",isHidden:!0});class workspace_directory_banner_WorkspaceDirectoryBanner extends n.PureComponent{constructor(e){super(e),this.onClose=this.onClose.bind(this),this.onKeyPress=this.onKeyPress.bind(this)}onClose(e){this.props.onClose(e)}onKeyPress(e){return e.preventDefault(),13===e.which?this.props.onClose(e):null}renderBannerText(){var{title:e,description:t}=this.props;return r.a.createElement("div",{className:"p-workspace_directory_banner__text"},r.a.createElement("div",{className:"p-workspace_directory_banner__title"},e),r.a.createElement("span",{className:"p-workspace_directory_banner__description"},t))}renderCloseButton(){var{isHidden:e}=this.props;return r.a.createElement(ye.c,{tabIndex:e?-1:0,className:"p-workspace_directory_banner__close_btn",onClick:this.onClose,onKeyPress:this.onKeyPress},r.a.createElement(G.b,{type:"times"}))}render(){var{showCloseButton:e,className:t}=this.props,a=j()("p-workspace_directory_banner",t);return r.a.createElement("div",{className:a},this.renderBannerText(),e&&this.renderCloseButton())}}workspace_directory_banner_WorkspaceDirectoryBanner.defaultProps=Bt;var Ht=workspace_directory_banner_WorkspaceDirectoryBanner;a("oE+f");function Wt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function qt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(a),!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Gt=new D.b("workspace_directory"),Kt={user:{},userIsAdminOrOwner:!1,enqueueToast:O.a,openModal:O.a,closeModal:O.a,allowWorkspaceRequest:!1,showRequestDialog:O.a,launchTeamId:null,displayDirectoryInModal:!0,onClose:O.a,hasSeenOnboardingBanner:!1,queryString:null,setUserPrefByApi:O.a,featureModernRequestWorkspaceDialog:!1,isIAPhase1Enabled:!1},Vt=300,zt=Object(A.b)();class workspace_directory_WorkspaceDirectory extends n.Component{static sortListByWorkspaceName(e){return Object(_.a)(e,e=>e.name)}constructor(e){super(e),this.state={isMobileView:!1,hasScrolledPastHeaderPane:!1,allWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},yourWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},dialogWorkspaceDetail:null,selectedOption:null,hideOnboardingBanner:!0,viewingHiddenWorkspace:!1},this.dialog=null,this.headerPaneHeight=null,this.clientHeight=null,this.page=null,this.pageSearch=null,this.listRefs={allWorkspaces:null,yourWorkspaces:null},this.windowScroller=null,this.onboardingBannerHeight=0,this.trackingCode="",Object(k.a)(this,["setPageRef","setPageSearchRef","setHeaderPaneRef","setOnboardingBannerRef","onScroll","onWindowScrollerScroll","onFullscreenModalClose","onResize","openWorkspaceRequestForm","openDialog","closeDialog","onOnboardingBannerDismiss","onWorkspaceLeave","onActionResolve","onActionReject","onSelectOption","onClearHeaderInput","setToastText","setListRef","setWindowScrollerRef","renderWorkspaceCard","fetchSingleMemberToPrepopulate"])}componentDidMount(){this.setIsMobileView(Object(we.c)()),window.addEventListener("resize",this.onResize),this.clientHeight=window.innerHeight,this.setLoadingWorkspaces("allWorkspaces",!0),this.setLoadingWorkspaces("yourWorkspaces",!0),this.props.launchTeamId&&(this.trackingCode="workspace_url",this.fetchTeam(this.props.launchTeamId));var{hasSeenOnboardingBanner:e}=this.props;this.setHideOnboardingBanner(e),Object(we.k)({trackingCode:this.trackingCode,clogger:this.props.clogger,isIAPhase1Enabled:this.props.isIAPhase1Enabled});var t=this.props.queryString&&Object(m.a)(this.props.queryString,"user",null);t&&this.fetchSingleMemberToPrepopulate(t)}componentDidUpdate(e,t){this.headerPane&&(this.headerPaneHeight=this.headerPane.clientHeight);var a=this.getListHeight("yourWorkspaces");a!==this.state.allWorkspaces.topOffset&&this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:a}),this.props.hasSeenOnboardingBanner||!this.onboardingBanner||this.onboardingBannerHeight||(this.onboardingBannerHeight=Object(y.findDOMNode)(this.onboardingBanner).clientHeight),!t.hideOnboardingBanner&&this.state.hideOnboardingBanner&&this.windowScroller.updatePosition(),t.selectedOption!==this.state.selectedOption&&this.fetchSearchResults(),this.maybeFetchNextPage(t)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}onActionReject(e){var{node:t,err:a}=e;t&&this.setToastText(t),zt.error("Error with Workspace Action in WorkspaceDirectory - ",a)}onActionResolve(){var{node:e,workspace:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t)if(t.member){if(this.onWorkspaceJoin({workspace:t}),this.props.displayDirectoryInModal)return this.onFullscreenModalClose()}else t.date_requested_join&&this.onWorkspaceRequested({workspace:t});return e&&this.setToastText(e),this.closeDialog()}onClearHeaderInput(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().clearInput()}onFullscreenModalClose(){this.dialog&&this.dialog.close(),this.props.onClose&&this.props.onClose()}onOnboardingBannerDismiss(){this.setHideOnboardingBanner(!0),this.props.setUserPrefByApi({pref:"seen_onboarding_banner",value:!0}).catch(e=>zt.error("Error setting seen_onboarding_banner user pref",e))}onResize(){this.clientHeight=window.innerHeight,this.setIsMobileView(Object(we.c)());var e=this.getListHeight("yourWorkspaces");this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:e})}onScroll(e){var t=e.currentTarget.scrollTop>=this.headerPaneHeight;t&&this.pageSearch.getWrappedInstance().blur(),t!==this.state.hasScrolledPastHeaderPane&&this.setHasScrolledPastHeaderPane(t)}onSearchAgainButtonClick(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().onSearchAgainTriggered()}onSelectOption(e){this.setSearchResultsOptions(e)}onWindowScrollerScroll(e){var{scrollTop:t}=e;this.doInfiniteScrollHandler({scrollTop:t})}onWorkspaceJoin(e){var{workspace:t}=e;this.setState(e=>{var a=this.maybeUpsertWorkspaceToSearchResults(e,t),n=e.yourWorkspaces.workspaces,r=Object(b.a)([t],n,"id"),s=e.yourWorkspaces.totalWorkspaces+1;return{yourWorkspaces:qt({},e.yourWorkspaces,{workspaces:workspace_directory_WorkspaceDirectory.sortListByWorkspaceName(r),totalWorkspaces:s}),searchResults:qt({},e.searchResults,{workspaces:workspace_directory_WorkspaceDirectory.sortListByWorkspaceName(a)})}})}onWorkspaceLeave(e){var{workspace:t}=e;this.setState(e=>{var a=this.maybeUpsertWorkspaceToSearchResults(e,t),{yourWorkspaces:{workspaces:n}}=e,r=Object(f.a)(n,e=>e.id!==t.id),s=e.yourWorkspaces.totalWorkspaces-1,i=e.allWorkspaces.workspaces,o=Object(b.a)([t],i,"id");return{yourWorkspaces:qt({},e.yourWorkspaces,{workspaces:r,totalWorkspaces:s}),allWorkspaces:qt({},e.allWorkspaces,{workspaces:workspace_directory_WorkspaceDirectory.sortListByWorkspaceName(o)}),searchResults:qt({},e.searchResults,{workspaces:workspace_directory_WorkspaceDirectory.sortListByWorkspaceName(a)})}},()=>{this.closeDialog()})}onWorkspaceRequested(e){var{workspace:t}=e;t&&this.setState(e=>{var a=[...e.allWorkspaces.workspaces],n=Object(u.a)(a,e=>e.id===t.id);return n<0?null:(a[n]=t,{allWorkspaces:qt({},e.allWorkspaces,{workspaces:a})})})}getListHeading(e){var{selectedOption:t}=this.state;if("allWorkspaces"===e){var{totalWorkspaces:a}=this.state.allWorkspaces,{totalWorkspaces:n}=this.state.yourWorkspaces;return Gt.t("Browse {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{numWorkspaces:Math.max(a-n,0)})}if("yourWorkspaces"===e)return Gt.t("Your Workspaces");if("searchResults"===e){var{loadingWorkspaces:s,totalWorkspaces:i}=this.state.searchResults,o=Object(m.a)(t,"selectedOptionData");if(s)return null;if("member"===Object(m.a)(t,"type")){var c=Object(N.K)(o),l=Gt.t("{memberName} is in {workspaceCount, plural, =1 {# workspace} other {# workspaces}}",{memberName:c,workspaceCount:i});return r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{entityType:"member",dimension:28,entityData:o,customClasses:"margin_right_75",featureReactMessages:!0,featureReactMemberProfileCard:!1}),l)}if("workspace"===Object(m.a)(t,"type")&&0===i)return Gt.t("No workspaces found matching \u201c{searchQuery}\u201d",{searchQuery:"SEARCH QUERY"});if((!Object(m.a)(t,"type")||o.id===we.b)&&i>0)return Gt.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{searchQuery}\u201d",{workspaceCount:i,searchQuery:Object(m.a)(o,"displayValue")});if("workspace"===Object(m.a)(t,"type")&&i>0)return Gt.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{workspaceName}\u201d",{workspaceCount:i,workspaceName:Object(m.a)(t,"selectedOptionData.name")})}return""}getListHeight(e){return this.listRefs[e]?this.listRefs[e].getContentHeight():0}getWorkspaceListTopOffset(e){return this.state[e]?this.state[e].topOffset:0}getWorkspacesForList(e){if("allWorkspaces"===e){var{workspaces:t}=this.state.allWorkspaces,{workspaces:a}=this.state.yourWorkspaces;return Object(g.a)(t,a,"id")}return"yourWorkspaces"===e?this.state.yourWorkspaces.workspaces:"searchResults"===e?this.state.searchResults.workspaces:[]}setDialogWorkspaceDetail(e,t){this.setState(()=>({dialogWorkspaceDetail:e}),t)}setHasApiError(e,t){this.setState(a=>({[e]:qt({},a[e],{hasApiError:t})}))}setHasScrolledPastHeaderPane(e){this.setState(()=>({hasScrolledPastHeaderPane:e}))}setHeaderPaneRef(e){this.headerPane=e}setHideOnboardingBanner(e){this.setState(()=>({hideOnboardingBanner:e}))}setIsMobileView(e){this.setState(()=>({isMobileView:e}))}setListRef(e){var{workspaceListKey:t,ref:a}=e;this.listRefs[t]=a}setListTopOffset(e){var{workspaceListKey:t,topOffset:a}=e;this.setState(e=>({[t]:qt({},e[t],{topOffset:a})}))}setLoadingWorkspaces(e,t){this.setState(a=>({[e]:qt({},a[e],{loadingWorkspaces:t})}))}setOnboardingBannerRef(e){this.onboardingBanner=e}setPageRef(e){this.page=e}setPageSearchRef(e){this.pageSearch=e}setSearchResultsOptions(e){this.setState(()=>({searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},selectedOption:e}))}setToastText(e){this.props.enqueueToast({element:r.a.createElement(K.b,{position:"bottom-right",offsetY:50},e)})}setViewingHiddenWorkspace(e){this.setState(()=>({viewingHiddenWorkspace:e}))}setWindowScrollerRef(e){this.windowScroller=e}setWorkspaceFetchOptions(e,t){var{workspaces:a=[],totalWorkspaces:n=0,onWorkspaces:r=!1,nextCursorMark:s=null}=t;this.setState(t=>({[e]:qt({},t[e],{workspaces:a,totalWorkspaces:n,onWorkspaces:r,nextCursorMark:s})}))}closeDialog(){this.props.displayDirectoryInModal||window.history.replaceState({},"","/")}doInfiniteScrollHandler(e){var{scrollTop:t}=e,a=this.hasFetchedAllWorkspaces("yourWorkspaces")?"allWorkspaces":"yourWorkspaces",n=this.getListHeight("yourWorkspaces");"allWorkspaces"===a&&(n+=this.getListHeight("allWorkspaces"));var r=this.hasScrolledWithinScrollThreshold({scrollTop:t,scrollHeight:n});r&&!this.hasFetchedAllWorkspaces(a)?this.setLoadingWorkspaces(a,!0):!r&&this.hasFetchedAllWorkspaces(a)&&this.setLoadingWorkspaces(a,!1)}fetchSearchResults(){var{selectedOptionData:e,type:t}=this.state.selectedOption,a={};e&&(this.setLoadingWorkspaces("searchResults",!0),Object(m.a)(e,"id")===we.b?a.searchTerm=e.displayValue:(a.id=e.id,a.type="member"===t?"single_user":"single_workspace"),Object(we.j)({searchType:t,clogger:this.props.clogger}),this.fetchWorkspacesWithArgs(a))}fetchSingleMemberToPrepopulate(e){this.props.fetchRawMembersFromAPI({ids:[e]}).then(e=>{var t={selectedOption:{selectedOptionData:e.members[0],type:"member"}};this.setState(t)})}fetchTeam(e){return this.props.fetchEnterpriseTeamById({teamId:e}).then(e=>{this.setSearchResultsOptions({selectedOptionData:e,type:"workspace"}),this.openDialog({team:e})}).catch(e=>{this.setViewingHiddenWorkspace(!0),zt.error("Error fetching workspace detail for launch_team_id -",e)})}fetchWorkspaces(){var{additionalOptions:e,workspaceListKey:t="allWorkspaces"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{nextCursorMark:a}=this.state[t];return this.setHasApiError(t,!1),this.props.fetchDirectoryWorkspaces(qt({nextCursorMark:a},e)).then(e=>{var{num_found:n,on_workspaces:r,items:s}=e,i=s;a&&(i=Object(b.a)(this.state[t].workspaces,i,"id")),this.setWorkspaceFetchOptions(t,{workspaces:i,totalWorkspaces:n,onWorkspaces:r,nextCursorMark:e.next_cursor_mark}),this.setLoadingWorkspaces(t,!1)}).catch(e=>{this.setHasApiError(t,!0),this.setLoadingWorkspaces(t,!1),zt.error("WorkspaceDirectory: Error in FetchWorkspaces -",e)})}fetchWorkspacesWithArgs(e){var{type:t,id:a,searchTerm:n}=e,{id:r}=this.props.user,{selectedOption:s}=this.state,i=Object(v.a)(s),o=a===r&&i?"yourWorkspaces":"searchResults";return this.fetchWorkspaces({workspaceListKey:o,additionalOptions:{type:t,id:a,searchTerm:n}})}hasFetchedAllWorkspaces(e){return this.state[e].workspaces.length>=this.state[e].totalWorkspaces}hasScrolledWithinScrollThreshold(e){var{scrollHeight:t,scrollTop:a}=e;return t-(a+this.clientHeight)<Vt}maybeFetchNextPage(e){!e.allWorkspaces.loadingWorkspaces&&this.state.allWorkspaces.loadingWorkspaces&&this.fetchWorkspaces(),!e.yourWorkspaces.loadingWorkspaces&&this.state.yourWorkspaces.loadingWorkspaces&&this.fetchWorkspacesWithArgs({id:this.props.user.id,type:"single_user"})}maybeUpsertWorkspaceToSearchResults(e,t){var a=Object(m.a)(e.searchResults,"workspaces",[]);return Object(h.a)(a,e=>t.id===e.id)?Object(b.a)([t],a,"id"):a}openDialog(e){var{team:t}=e;this.props.displayDirectoryInModal||window.history.replaceState({},"","/workspace/".concat(t.id)),Object(we.l)({teamId:t.id,trackingCode:this.trackingCode,clogger:this.props.clogger}),this.setDialogWorkspaceDetail(t,()=>{this.dialog=this.props.openModal({element:this.renderDialog(),isStackable:!0,name:"find-more-workspaces-info"})})}openWorkspaceRequestForm(){var{showRequestDialog:e,featureModernRequestWorkspaceDialog:t,openModal:a}=this.props;t?a({element:r.a.createElement(ge,null),isStackable:!0}):e({displayModernToast:e=>{var{type:t,errorType:a,teamName:n}=e,s=Object(we.g)({type:t,errorType:a,teamName:n});this.setToastText(r.a.createElement("div",{className:"display_flex"},"success"===t&&r.a.createElement(G.b,{type:"check-circle-o",className:"margin_right_50 sk_lilypad_green"}),r.a.createElement("span",null,s)))}})}isFromSharedChannelInvite(){var e=Object(yt.c)("post_signin"),t=!1;e&&(t="shared_channel_invite"===JSON.parse(e).context);return t}renderAllWorkspaces(e){return this.renderList({listProps:e,workspaceListKey:"allWorkspaces"})}renderDialog(){var{dialogWorkspaceDetail:e,displayDirectoryInModal:t}=this.state,{user:a}=this.props,n=Object(m.a)(this.props.queryString,"channel",null),s=Object(m.a)(this.props.queryString,"action",null),i=Object(m.a)(this.props.queryString,"user",null),o=Object(N.wb)(a),c=this.isFromSharedChannelInvite();return r.a.createElement(wt,{team:e,displayDirectoryInModal:t,onClose:this.closeDialog,featureZeroWorkspaceOnboarding:!0,onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,onLeaveResolve:this.onWorkspaceLeave,onLeaveReject:this.onActionReject,isGuest:o,channelRedirect:n,postLaunchAction:s,userIdFromURL:i,isFromSharedChannelInvite:c})}renderDirectoryInModal(){var{enterprise:e}=this.props,t=j()("p-workspace_directory__page","p-workspace_directory__page--modal_view");return r.a.createElement(ae.a,{onCancel:this.onFullscreenModalClose,showCancelButton:!1,showGoButton:!1,title:Gt.t("Workspaces at {orgName}",{orgName:e.name,__react:!0}),position:"fixed",modalBodyClasses:"p-workspace_directory__modal_body",modalClasses:"p-workspace_directory_modal",fullBleedModalBodyContent:!0,withHeader:!0},r.a.createElement("div",{className:t,onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()))}renderDirectoryLists(e){var{selectedOption:t}=this.state,{onChildScroll:a,registerChild:n}=e,s=Object(d.a)(e,["onChildScroll","registerChild"]),i=qt({onScroll:a,scrollElement:this.page},s);return!!Object(m.a)(t,"selectedOptionData")?r.a.createElement("div",{ref:n},this.renderSearchResults(i)):r.a.createElement("div",{ref:n},this.renderYourWorkspaces(i),this.renderAllWorkspaces(i))}renderDirectoryPage(){var{user:e}=this.props,{viewingHiddenWorkspace:t}=this.state,{workspaces:a,loadingWorkspaces:n}=this.state.allWorkspaces,{workspaces:s,loadingWorkspaces:i}=this.state.yourWorkspaces,o=!i&&Object(v.a)(s),c=!n&&Object(v.a)(a);return o&&Object(N.wb)(e)?this.renderEmptyState({isZeroWorkspaceGuest:!0}):c&&o?this.renderEmptyState({isZeroWorkspaceOrg:!0}):t?this.renderEmptyState({isHiddenWorkspace:!0}):r.a.createElement("div",{className:"p-workspace_directory",id:"workspace_directory"},this.renderWorkspaceDirectoryHeaderPane(),this.renderWorkspaceDirectoryBody())}renderEmptyState(e){var{enterprise:t}=this.props;return r.a.createElement("div",{className:"p-workspace_directory__empty_state_container"},r.a.createElement(Zt,Object(l.a)({enterprise:t},e)))}renderInfiniteSpinner(){var{renderFullPage:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=j()("p-workspace_directory__spinner",{"p-workspace_directory__spinner--fs":!!e});return r.a.createElement("div",{className:t},r.a.createElement(Y.a,{size:"jumbo",className:"inline_block full_width margin_top_200"}))}renderList(e){var{listProps:t,workspaceListKey:a}=e,n=this.getWorkspacesForList(a),{loadingWorkspaces:s}=this.state[a];if("searchResults"===a&&Object(v.a)(n)&&!s)return this.renderSearchEmptyState();if(Object(v.a)(n)&&!s)return null;var i=this.getWorkspaceListTopOffset(a),o=this.getListHeading(a);return r.a.createElement(r.a.Fragment,null,this.renderListHeading(o),r.a.createElement("div",{className:"p-workspace_directory__list"},r.a.createElement(Pt,Object(l.a)({scrollElement:this.page,workspaces:n,renderWorkspaceCard:this.renderWorkspaceCard,topOffset:i,ref:e=>this.setListRef({workspaceListKey:a,ref:e})},t))),s&&this.renderInfiniteSpinner())}renderListHeading(e){return r.a.createElement("p",{className:"p-workspace_directory__list_title"},e)}renderOnboardingBanner(){var{hasSeenOnboardingBanner:e}=this.props;if(e)return null;var{hideOnboardingBanner:t}=this.state,a=j()("p-workspace_directory__banner","p-workspace_directory__banner--onboarding",{"p-workspace_directory__banner--hidden":t}),n=Gt.t("Workspaces are where you and your teammates communicate and get work done. To get started, find your team\u2019s workspace.");return r.a.createElement(Ht,{title:Gt.t("What is a workspace?"),description:n,className:a,onClose:this.onOnboardingBannerDismiss,isHidden:t,showCloseButton:!0,ref:this.setOnboardingBannerRef})}renderSearchEmptyState(){var e,t,{searchResults:a,selectedOption:n}=this.state,s=Object(m.a)(n,"selectedOptionData");if(Object(we.h)(s)){var i=Object(m.a)(a,"totalWorkspaces"),o=Object(m.a)(a,"onWorkspaces"),c=Object(N.K)(s);return gt({totalWorkspaces:i,onWorkspaces:o})&&!_t({totalWorkspaces:i,onWorkspaces:o})&&(e=Gt.t("{memberName} hasn\u2019t joined any workspaces",{memberName:c}),t=Gt.rt("Try <a>searching for someone else</a> on your team, or for a specific workspace",null,e=>{var{text:t,key:a,tag:n}=e;return"a"===n?r.a.createElement(z.a,{onClick:()=>this.onSearchAgainButtonClick(),key:a},t):{text:t}})),_t({totalWorkspaces:i,onWorkspaces:o})&&(e=Gt.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:c}),t=Gt.rt("Get in touch with {memberName} to be invited to a workspace they\u2019re in, or try <a>searching for someone else</a> on your team.",{memberName:c},e=>{var{text:t,key:a,tag:n}=e;return"a"===n?r.a.createElement(z.a,{onClick:()=>this.onSearchAgainButtonClick(),key:a},t):{text:t}})),r.a.createElement("div",{className:"align_center"},r.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},r.a.createElement(te,{entityType:"member",dimension:28,entityData:s,customClasses:"margin_right_75",featureReactMessages:!0,featureReactMemberProfileCard:!1}),e),r.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},t))}return e=Gt.t("No workspaces found matching \u201c{searchTerm}\u201d",{searchTerm:Object(m.a)(s,"displayValue")}),t=Gt.rt("Try <a>searching for another workspace</a> or searching for a teammate\u2019s workspaces.",null,e=>{var{text:t,key:a,tag:n}=e;return"a"===n?r.a.createElement(z.a,{onClick:()=>this.onSearchAgainButtonClick(),key:a},t):{text:t}}),r.a.createElement("div",{className:"align_center"},r.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},e),r.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},t))}renderSearchResults(e){return this.renderList({listProps:e,workspaceListKey:"searchResults"})}renderTitle(){var{name:e}=this.props.enterprise;return r.a.createElement("div",{className:"p-workspace_directory__title"},Gt.t("Workspaces at {name}",{name:Object(D.q)(e)}))}renderWorkspaceCard(e){if(Object(v.a)(e))return null;var t=!(Object(I.v)()||Object(H.a)()&&Object(W.b)()),a=this.isFromSharedChannelInvite();return r.a.createElement(ot,{team:e,key:e.id,size:"small",onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,openDialog:this.openDialog,anchorPage:"workspace_directory",doLaunchInNewTab:t,doUpsertJoin:!0,isFromSharedChannelInvite:a})}renderWorkspaceDirectoryBody(){var{searchResults:e,hideOnboardingBanner:t}=this.state,a=j()("p-workspace_directory__body",{"p-workspace_directory__body--has_banner":!t}),n={};return this.onboardingBannerHeight&&!t&&(n.transform="translate3d(0, ".concat(this.onboardingBannerHeight,"px, 0)")),this.page?r.a.createElement(r.a.Fragment,null,this.renderOnboardingBanner(),r.a.createElement("div",{"data-js":"workspace_directory_body",className:a,style:n},r.a.createElement(S.a,{scrollElement:this.page,onScroll:this.onWindowScrollerScroll,ref:this.setWindowScrollerRef},e=>this.renderDirectoryLists(e)),!Object(m.a)(e,"loadingWorkspaces")&&this.renderWorkspaceRequestBanner())):null}renderWorkspaceDirectoryHeader(){var{user:e,userIsAdminOrOwner:t,enterprise:a}=this.props,{isMobileView:n,hasScrolledPastHeaderPane:s,selectedOption:i}=this.state;return r.a.createElement(Ut,{enterprise:a,displayManageOrgButton:t,displaySearchBar:this.headerPane&&s,"data-js":"workspace_directory_sticky_header",user:e,isMobileView:n,selectedSearchOption:Object(m.a)(i,"selectedOptionData"),onOptionSelected:this.onSelectOption,onClearHeaderInput:this.onClearHeaderInput})}renderWorkspaceDirectoryHeaderPane(){var{displayDirectoryInModal:e,user:t}=this.props,a=j()("p-workspace_directory__header_pane",{margin_top_75:e});return r.a.createElement("div",{className:a,"data-js":"workspace_directory_header_pane",ref:this.setHeaderPaneRef},!e&&this.renderTitle(),!Object(N.wb)(t)&&this.renderWorkspaceSearchInput())}renderWorkspaceRequestBanner(){var{allowWorkspaceRequest:e}=this.props;if(!e)return null;var t=Gt.rt("Your team might not be using Slack yet. You may ask your admins to <Link>create a new workspace</Link>.",null,e=>{var{text:t}=e;return r.a.createElement(z.a,{onClick:this.openWorkspaceRequestForm},t)});return r.a.createElement(Ht,{title:Gt.t("Can\u2019t find your workspace?"),description:t,className:"p-workspace_directory__banner p-workspace_directory__banner--workspace_request",onClose:O.a})}renderWorkspaceSearchInput(){var{selectedOption:e}=this.state;return r.a.createElement("div",{className:"p-workspace_directory__search"},r.a.createElement(qe,{containerIdSelector:"workspace_directory",ref:this.setPageSearchRef,membersOnly:!1,triggerAction:this.onSelectOption,prepopulatedOption:Object(m.a)(e,"selectedOptionData")}))}renderYourWorkspaces(e){return this.renderList({listProps:e,workspaceListKey:"yourWorkspaces"})}render(){var{displayDirectoryInModal:e}=this.props,{workspaces:t,loadingWorkspaces:a}=this.state.allWorkspaces,{workspaces:n,loadingWorkspaces:s}=this.state.yourWorkspaces,i=s&&Object(v.a)(n),o=a&&Object(v.a)(t),c=i||o;return e?this.renderDirectoryInModal():r.a.createElement("div",{className:"p-workspace_directory__wrapper"},this.renderWorkspaceDirectoryHeader(),c&&this.renderInfiniteSpinner({renderFullPage:!0}),r.a.createElement("div",{className:"p-workspace_directory__page",onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()),r.a.createElement(V.a,null))}}workspace_directory_WorkspaceDirectory.defaultProps=Kt;var Yt={enqueueToast:P.c,openModal:function(){return Object(c.e)(...arguments)},closeModal:c.a,fetchRawMembersFromAPI:B.g,setUserPrefByApi:R.f,fetchEnterpriseTeamById:U.g,fetchDirectoryWorkspaces:U.f},Qt=Object(E.b)((e,t)=>{var{userId:a}=t,n=Object(w.g)(e)||{},r=Object(T.d)(e,a),s=Object(x.b)(e,"enterprise_team_creation_request"),i=s&&s.is_enabled&&!Object(N.wb)(r),c=Object(o.l)(e),l=Object(M.k)(e,"seen_onboarding_banner"),d=Object(F.a)({state:e});return{enterprise:n,user:qt({id:a},r),userIsAdminOrOwner:Object(N.fb)(e,r),allowWorkspaceRequest:i,displayDirectoryInModal:c,hasSeenOnboardingBanner:l,clogger:d,isIAPhase1Enabled:Object(L.d)(e),featureModernRequestWorkspaceDialog:Object(o.m)(e,"feature_modern_request_workspace_dialog")}},Yt,null,{areStatePropsEqual:(e,t)=>Object(q.a)(e,t,2)})(workspace_directory_WorkspaceDirectory),Xt=new D.b("workspace_directory"),Jt={isZeroWorkspaceGuest:!1,isZeroWorkspaceOrg:!1,isHiddenWorkspace:!1,directoryUrl:void 0};class workspace_directory_empty_state_WorkspaceDirectoryEmptyState extends n.PureComponent{constructor(e){super(e),this.redirectToDirectory=this.redirectToDirectory.bind(this)}redirectToDirectory(){var{directoryUrl:e}=this.props;window.open("".concat(e,"/signin/find-workspaces"),"_self")}renderBody(){var{isZeroWorkspaceGuest:e,isZeroWorkspaceOrg:t,isHiddenWorkspace:a}=this.props;return e?this.renderZeroWorkspaceGuestBody():t?this.renderZeroWorkspaceOrgBody():a?this.renderHiddenWorkspaceBody():null}renderFooter(){var{enterprise:e}=this.props;return r.a.createElement(z.a,{onClick:this.redirectToDirectory,className:"p-workspace_directory_empty_state__footer"},Xt.t("View all {orgName} workspaces",{orgName:Object(D.q)(e.name)}),r.a.createElement(G.b,{type:"chevron-right",key:"footer-chevron-icon",inline:!0}))}renderHeading(){var{enterprise:e,isHiddenWorkspace:t}=this.props,a=t?Xt.t("No workspace found"):Xt.t("No available workspaces");return r.a.createElement("span",{className:"p-workspace_directory_empty_state__heading"},r.a.createElement("span",{className:"p-workspace_directory_empty_state__icon"},r.a.createElement(te,{entityType:"org",dimension:28,entityData:e,customClasses:"flex_none",featureReactMessages:!0})),a)}renderHiddenWorkspaceBody(){var{enterprise:e}=this.props;return r.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Xt.t("Either this workspace doesn\u2019t exist, or you do not have access to it. If you need to be added to a workspace, contact the {orgName} IT team.",{orgName:Object(D.q)(e.name)}))}renderZeroWorkspaceGuestBody(){var{enterprise:e}=this.props;return r.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Xt.t("You have a guest account with {orgName}, which means someone needs to invite you to join a workspace. You may want to get in touch with the person who helped you create an account.",{orgName:Object(D.q)(e.name)}))}renderZeroWorkspaceOrgBody(){var{enterprise:e}=this.props;return r.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Xt.t("{orgName} doesn\u2019t have any open workspaces that you can join. If you need to be added to a workspace, contact your manager or the {orgName} IT team.",{orgName:Object(D.q)(e.name)}))}render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"p-workspace_directory_empty_state"},this.renderHeading(),this.renderBody()),this.props.isHiddenWorkspace&&this.renderFooter())}}workspace_directory_empty_state_WorkspaceDirectoryEmptyState.defaultProps=Jt;var Zt=Object(E.b)((e,t)=>{var{enterprise:a}=t;return{directoryUrl:Object(At.a)(e,a.domain)}})(workspace_directory_empty_state_WorkspaceDirectoryEmptyState),$t=Qt,ea=Object(i.b)("Opens the Find More Workspaces modal.",(e,t,a)=>{Object(o.m)(t(),"feature_sonic_find_more_wksps")&&e(Object(c.e)({element:r.a.createElement($t,{userId:a}),name:"find-more-workspaces",isStackable:!0}))});ea.meta={name:"openFindMoreWorkspacesModal",key:"actionsOpenFindMoreWorkspacesModalOpenFindMoreWorkspacesModal",description:"Opens the Find More Workspaces modal."},ea.propTypes={userId:s.default.string.isRequired};t.a=ea},KU1P:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=(a("aK/h"),a("kOzZ")),o=a("oHBb");t.a=Object(s.b)(function(e){return{clogger:Object(i.a)({state:e})}})(function(e){var{children:t,clogger:a}=e;return r.a.createElement(o.a.Provider,{value:a},t)})},"Kdk+":function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a("U/ze"),r=Object(n.b)(e=>e&&e.flexpaneFocus&&e.flexpaneFocus.focusKey);r.meta={name:"getFocusKey",key:"flexpaneFocusStoreFlexpaneFocusSelectorsGetFocusKey"}},KrOh:function(e,t,a){},L0DF:function(e,t,a){},L5SX:function(e,t,a){},"LAi+":function(e,t,a){"use strict";var n,r=a("aLpA");t.a=(()=>{if(n)return n;var e=Object.keys(r.l).map(e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"));return n=new RegExp("(^|\\s)(".concat(e.join("|"),")(?=$|[\\s|\\?\\.,!])"),"g")})},LCkN:function(e,t,a){},LFzE:function(e,t,a){},LWrH:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),s=a("q1tI"),i=a.n(s),o=a("XHGt"),c=(a("aK/h"),a("g5qt")),l=a("Tc5z"),d=a("x3CK"),p=a("XL7r"),u=a("yHhI"),h={keyboardPref:void 0,keyboardLayout:void 0};class WithKeyboardLocale extends s.Component{constructor(e){if(super(e),void 0===e.keyboardLayout){var t=()=>{if(Object(c.fb)()){var e=Object(c.pb)().currentKeyboardLayout;return Object(d.d)(e)}return null};this.state={legacyKeyboardLayout:t()},Object(c.fb)()&&(this.desktopKeyboardLayoutDisposable=Object(c.xb)(()=>this.setState(()=>({legacyKeyboardLayout:t()}))))}}componentWillUnmount(){this.desktopKeyboardLayoutDisposable&&(this.desktopKeyboardLayoutDisposable.dispose?this.desktopKeyboardLayoutDisposable.dispose():this.props.logger.warn("WITH-KB-LOCALE","Cannot unsubscribe from keyboard layout changes"))}render(){var e=this.props,{keyboardLayout:t,WrappedComponent:a,keyboardPref:s,logger:o}=e,c=Object(r.a)(e,["keyboardLayout","WrappedComponent","keyboardPref","logger"]),l=(void 0!==t?t:this.state.legacyKeyboardLayout)||s;return"en-US"===l&&(l="us"),i.a.createElement(a,Object(n.a)({keyboardLocale:l},c))}}WithKeyboardLocale.defaultProps=h,t.a=function(e){return Object(o.b)(function(t){var a=Object(l.f)(t,"keyboardLayout");return{logger:Object(u.a)({state:t}),keyboardPref:Object(p.k)(t,"keyboard"),WrappedComponent:e,keyboardLayout:a&&Object(d.d)(a)}})(WithKeyboardLocale)}},Lpwv:function(e,t,a){},LsCE:function(e,t,a){},Lts7:function(e,t,a){"use strict";var n=a("XfeM"),r=a("aK/h"),s=a("brL+"),i=a("SZMM"),o=a("Zr7G"),c=a("IEWa"),l=a("yHhI"),d={},p=Object(n.b)("launch workflow builder",function(e,t){var{subPath:a="",source:n=""}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t();if(Object(c.b)(r)){var p=Object(s.b)(r),u=Object(o.c)({state:r}),h=Object(l.a)({label:"WORKFLOW-BUILDER",state:r}),m="/"===a.charAt(0)?a.slice(1):a,b=d[p];if(b&&b.focus&&b.isClosed&&!b.isClosed())try{return b.focus(),u.count(n?"workflow_builder_focused_from_client__".concat(n):"workflow_builder_focused_from_client"),void h.debug("Workflow Builder window focused")}catch(g){h.error("Unable to focus existing Workflow Builder window. Will try opening a new one.",g)}try{var _=e(Object(i.f)({pathname:"/workflow-builder/".concat(p,"/").concat(m),windowOptions:{height:700,width:1024}}));d[p]=_,u.count(n?"workflow_builder_launched_from_client__".concat(n):"workflow_builder_launched_from_client"),h.debug("Workflow Builder window opened")}catch(g){h.error("Unable to open new Workflow Builder window.",g)}}});p.meta={name:"launchWorkflowBuilder",key:"actionsLaunchWorkflowBuilderLaunchWorkflowBuilder",description:"launch workflow builder"},p.propTypes={subPath:r.default.string,source:r.default.string},t.a=p},LwCT:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=a("XHGt"),o=(a("aK/h"),a("TSYQ")),c=a.n(o),l=a("hOQf"),d=a("IxGy"),p=a("tbBR"),u=a("Y6eO"),h=a("Q/6m"),m=(a("rqkC"),{className:void 0,children:void 0,isEditing:!1,setBackground:n.a,viewContext:void 0});class MessageEdit extends r.PureComponent{componentDidMount(){this.setBackground()}componentDidUpdate(){this.setBackground()}setBackground(){var{isEditing:e,setBackground:t}=this.props;t({editing:e})}render(){var{msg:e,isEditing:t,children:a,viewContext:n}=this.props;if(!t)return a;var{channel:r,ts:i}=e,o=c()(this.props.className,"c-message_kit__edit");return s.a.createElement("div",{className:o},s.a.createElement(u.a,{channelId:r,ts:i,messageContainerType:n}))}}MessageEdit.defaultProps=m;t.a=Object(h.b)(Object(p.b)(Object(i.b)((e,t)=>{var{msg:a,viewContext:n}=t,r=Object(l.F)(a),s=Object(l.Q)(a);return{isEditing:!!Object(d.e)(e,{channelId:r,ts:s,viewContext:n})}})(MessageEdit)))},MIIS:function(e,t,a){"use strict";var n=a("TOkS");t.a=n.a},MYD1:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("XHGt")),i=a("/m+M"),o=a("BUzq"),c=a("9cNQ"),l=a("HOkk"),d=a("nNoG"),p=a("hQtm"),u=new d.b("channel_details"),h={unpinMessage:function(){return Object(o.q)(...arguments)},pinsRemove:function(){return Object(c.c)(...arguments)}};t.a=Object(s.b)(null,h)(e=>{var{pin:t,channelId:a,unpinMessage:s,pinsRemove:c}=e,d=Object(n.useCallback)(()=>{var e={channelId:a,reason:"pins-list-remove"};switch(t.type){case o.a.MESSAGE:e.ts=t.ts;break;case o.a.FILE:e.fileId=t.id;break;case o.a.FILE_COMMENT:e.fileCommentId=t.id}t.type===o.a.MESSAGE?s(e):c(e)},[t,a,s,c]),{featureM11nChannelDetails:h}=Object(i.a)();return h?r.a.createElement(l.a,{title:u.t("Remove pinned item"),goButtonText:u.t("Remove pinned item"),onGo:d},r.a.createElement("p",null,u.t("Are you sure you want to remove this pinned item?")),r.a.createElement(p.a,{pin:t})):null})},Mhgg:function(e,t,a){e.exports=a.p+"messages-be9654a.png"},MjS2:function(e,t,a){"use strict";a.d(t,"c",function(){return M}),a.d(t,"d",function(){return x}),a.d(t,"a",function(){return R}),a.d(t,"b",function(){return D}),a.d(t,"f",function(){return F}),a.d(t,"h",function(){return U}),a.d(t,"g",function(){return B}),a.d(t,"m",function(){return H}),a.d(t,"i",function(){return W}),a.d(t,"k",function(){return q}),a.d(t,"l",function(){return G}),a.d(t,"e",function(){return K}),a.d(t,"j",function(){return V});var n=a("wx14"),r=a("NFsq"),s=a("vFlG"),i=a("ifKl"),o=a("q1tI"),c=a.n(o),l=a("nNoG"),d=a("WhMD"),p=a("kOzZ"),u=a("t85p"),h=a("lhZz"),m=a("rWF5"),b=a("KXvl"),_=a("hjTk"),g=a("XKj7"),f=a("Smdl"),v=a("toaU"),O=a("kLJo"),y=a("sDWr"),C=a("g5qt"),j=a("brL+"),E=a("yHhI"),k=a("5mKg"),S=a("od5y"),I=a("IY6O"),w=a("s5Is"),T=new l.b("workspace_directory"),N="ENTERPRISE_DISCOVER_WORKSPACES",P="WORKSPACE_DIR",A=Object(E.b)(),M=()=>window.innerWidth<=480,x=()=>window.innerWidth<=1024,R={dialog:"dialog",largeCard:"largeCard",smallCard:"smallCard"},D="SHOW_ALL";function F(e,t){var{context:a=R.smallCard,featureZeroWorkspaceOnboarding:n=!0}=t;if(!n)return null;var r=function(e){if(!e)return{};var t=T.t("Requires an invite to join");return{requestCardLarge:T.t("Awaiting admin approval to join"),requestDialog:e=>T.t("Requested access on {requestDate}",{requestDate:Object(d.a)(e)}),inviteOnlyWithLockIcon:c.a.createElement("span",null,c.a.createElement(S.a,{type:"lock",key:"private-icon",className:"nudge_bottom_2"}),t),inviteOnly:t}}(n),{date_requested_join:s,discoverable:i,is_member:o}=e;return o?null:"closed"===i&&s?a===R.largeCard?r.requestCardLarge:r.requestDialog(s):"invite_only"===i?a===R.largeCard?r.inviteOnlyWithLockIcon:r.inviteOnly:null}function L(e,t){var a=document.createElement("a");a.href=t;var n="".concat(a.protocol,"//").concat(e.domain,".").concat(a.host,"/");return a=null,n}function U(e){return Object(s.a)(e,"profile")||Object(s.a)(e,"enterprise_user")}function B(e){var{type:t,teamName:a,errorType:n}=e;if("success"===t)return T.rt("Request to create <strong>{teamName}</strong> sent! You\u2019ll be notified once it\u2019s reviewed.",{teamName:Object(l.q)(a)});var r={name_taken:T.rt("Request failed: The name <strong>{teamName}</strong> is already taken by another workspace.",{teamName:Object(l.q)(a)}),name_is_empty:T.t("Request failed: A name is required."),name_too_long:T.t("Request failed: The name you provided is too long."),reason_too_long:T.t("Request failed: The reason you provided is too long."),unknown:T.rt("Request failed: The response error was <strong>{error}</strong>.",{error:n||"unknown"})};return r[n]||r.unknown}function H(e){if(e)if(Object(m.w)("2.8"))A.info(P,"switchToTeamById - Calling legacyDisplayTeamById('".concat(e,"') in the SSB.")),Object(C.kb)(e);else{A.info(P,"switchToTeamById - SSB < 2.8, fallback to using an iframe to open ".concat(e));var t=document.createElement("iframe"),a="slack://open?team=".concat(e);t.src=a,document.body.appendChild(t),setTimeout(()=>t.remove(),1e3)}}var W=(e,t)=>{var{user:a={},team:s={},anchorPage:o,doLaunchInNewTab:c=!1,onActionResolve:l=i.a,channelRedirect:d=null,postLaunchAction:E=null,userIdFromURL:S=null,windowOpener:T}=t;if(Object(f.a)())return((e,t,a,n)=>{var r=t&&"open_profile"===t&&a,s=r?y.o:v.a,i=r?{teamId:e.id,memberId:a}:{teamId:e.id};if(Object(b.b)()){var o=Object(h.getStateForClientStore)();Object(I.getWorkspacesMeta)(o)[e.id]?Object(O.g)(s,i,{reason:"find-more-workspaces"}):(A.info(P,"fetchAuthAndSetFocusedWorkspace - for team ".concat(e.id)),Object(h.dispatchForClientStore)(Object(w.fetchAuthAndSetFocusedWorkspace)({teamId:e.id,avoidRedirectLoops:!1})))}else{var c=Object(O.i)(s,i);n&&(n.location.href=c);var l=Object(b.a)(e.subdomain)||"_team_".concat(e.id);Object(_.a)(c,l)}})(s,E,S,T),l({workspace:s});var M=Object(u.f)(e,"signin_url"),x=Object(u.f)(e,"is_ssb_browser_signin"),R=Object(p.a)({state:e}),D="".concat(L(s,M),"messages");if(function(e){var{teamId:t,anchorPage:a,fromWhere:r="",clogger:s}=e,i={anchor_page:a,entity_key:"launch_workspace",target_team_id:t,tracking_code:r};s.track(N,Object(n.a)({},i,{contexts:{ui_context:{action:"click",action_status:1}}}))}({teamId:s.id,anchorPage:o,clogger:R}),x&&(D="".concat(L(s,M),"ssb/signin_redirect")),d&&(D="".concat(D,"/").concat(d)),E&&"open_profile"===E&&S&&(D="".concat(D,"/team/").concat(S)),Object(u.l)(e)&&Object(j.b)(e)===s.id)return A.info(P,"onWorkspaceLaunch - User has team ".concat(s.id," to launch currently open. Do nothing and resolve the action (which closes the modal).")),l({workspace:s});if(Object(m.v)()){A.info(P,"onWorkspaceLaunch - Detected that user is logged in via the SSB.");var F=Object(C.rb)();A.info(P,"onWorkspaceLaunch - Successfully called legacyGetSignedInTeamIds and returned ".concat(F));var U,B={name:a.name,id:a.id,team_id:s.id,team_name:Object(k.e)(s),team_url:D};if(Object(r.a)(F,s.id)){if(A.info(P,"onWorkspaceLaunch - User already signed into workspace '".concat(s.id,"'")),Object(r.a)(F,s.id))Object(m.w)("3.0")?(A.info(P,"onWorkspaceLaunch - SSB >= 3.0, attempting to determine if team ".concat(s.id," has a valid session.")),H(s.id),(U=Object(C.mb)())?U.hasValidSession?A.info(P,"onWorkspaceLaunch - currentTeam.hasValidSession for ".concat(s.id,". Work done.")):(A.info(P,"onWorkspaceLaunch - current session NOT valid. Signing into ".concat(s.id,".")),Object(C.j)(B)):(A.info(P,"onWorkspaceLaunch - currentTeam not found. Calling didSignIn() for ".concat(s.id,".")),Object(C.j)(B))):(A.info(P,"onWorkspaceLaunch - SSB < 3.0, cannot determine session state. Calling didSignIn() for ".concat(s.id,".")),Object(C.j)(B))}else A.info(P,"onWorkspaceLaunch - calling didSignIn on ".concat(JSON.stringify(B))),Object(C.j)(B),F=Object(C.rb)();l({workspace:s}),A.info(P,"onWorkspaceLaunch - Removing team from enterprise excluded team pref ".concat(s.id)),Object(g.g)(s.id)}else if(c){if(T)T.location.href=D;else window.open(D,"_blank");l({workspace:s})}else window.location=D;return null};function q(e){var{trackingCode:t="",clogger:a,isIAPhase1Enabled:r}=e,s={anchor_page:"workspace_directory",tracking_code:t,is_iap1:r};a.track(N,Object(n.a)({},s,{contexts:{ui_context:{action:"impression"}}}))}function G(e){var{teamId:t,trackingCode:a,clogger:r}=e,s={entity_key:"workspace_detail",anchor_page:"workspace_directory",target_team_id:t,tracking_code:a};r.track(N,Object(n.a)({},s,{contexts:{ui_context:{action:"impression",action_status:1}}}))}var K=e=>{var{anchorPage:t,numSearchResults:a,clogger:r}=e,s={},i={};s.action="impression",s.action_status=a?1:2,s.ui_element="SEARCH_BAR",i.entity_key="search_workspaces",i.anchor_page=t,i.num_search_results=a,r.track(N,Object(n.a)({},i,{contexts:{ui_context:s}}))},V=e=>{var{searchType:t="workspace",clogger:a}=e,r={action:"impression",ui_element:"workspace"===t?"DIRECTORY_SEARCH_FREE":"DIRECTORY_SEARCH_BY_COLLEAGUE"};a.track(N,Object(n.a)({},{anchor_page:"workspace_directory",entity_key:"search_workspaces"},{contexts:{ui_context:r}}))}},"Ms/R":function(e,t,a){},Mv5p:function(e,t,a){"use strict";var n=a("oTSI"),r=Object(n.a)(()=>{var e=document.createElement("div");e.id="__sb",e.style.overflow="scroll",e.style.width="40px",e.style.height="40px",e.style.position="absolute",e.style.left="-40px",e.innerHTML="&shy;<style>#__sb::-webkit-scrollbar {width:10px;}</style>",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth==10;return document.body.removeChild(e),t});t.a=r},MvLI:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return i});var n,r=a("lhZz");function s(e){n=e}function i(){return Object(r.getStoreInstanceByTeamId)(n)}},Mzw9:function(e,t,a){},"N/g+":function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return s});var n=a("ROZo"),r=(Object(n.b)("TS.ui.needToBlockAtChannelKeyword"),Object(n.b)("TS.ui.needToShowAtChannelWarning"),Object(n.b)("TS.ui.showVersionInfo")),s=Object(n.b)("TS.ui.teamSelectionChanged")},N391:function(e,t,a){},N5rH:function(e,t,a){},NPpR:function(e,t,a){"use strict";var n=a("cdPG"),r=a("hbEN"),s=a("ifKl"),i=a("nNoG"),o=(a("aK/h"),a("q1tI")),c=a.n(o),l=a("eglI"),d=a("XHGt"),p=a("tn36"),u=a("od5y"),h=a("XLFM"),m=a("Go8C"),b=a("YYb+"),_=a("7ARk"),g=a("Smdl"),f=a("x91h");var v=a("V18M"),O=(a("Tjgr"),a("RX/a")),y=new i.b("search"),C={autoFocus:!1,queryIsUserGenerated:!1,onBlur:s.a,onEnter:s.a,onEscape:s.a,onFocus:s.a,autocompleteSelectedIndex:void 0},j=null,E=0;class search_input_box_SearchInputBox extends o.Component{constructor(e){super(e),this.texty=null,Object(p.a)(this,["onClickClear","getTextyString","onEnter","onUserQueryChange","setTextyRef","updateDisplayQuery"]),this.queryHasChanged=!1,this.queryHasBeeenSubmitted=!1,this.onUserInput=Object(r.a)(this.onUserInput,100),this.placeholderCopy=this.lazyInitializeShuffledPlaceholderCopy()}componentDidMount(){var{autoFocus:e,usePrimarySearch:t,isSearchAutocompleteOpen:a}=this.props;if(e||t&&a){var n=window._searchAutocompleteCatch;if(n){delete window._searchAutocompleteCatch;var r=n.value;this.texty.value(this.texty.value()+r),n.parentNode.removeChild(n)}this.texty.setCursorAtEnd()}}shouldComponentUpdate(e){return this.props.usePrimarySearch&&e.isSearchAutocompleteOpen!==this.props.isSearchAutocompleteOpen||this.props.displayQuery!==e.displayQuery||this.props.autocompleteSelectedIndex!==e.autocompleteSelectedIndex}componentDidUpdate(e){this.texty&&this.props.usePrimarySearch&&!e.isSearchAutocompleteOpen&&this.props.isSearchAutocompleteOpen&&this.texty.focus(),this.props.queryIsUserGenerated||e.displayQuery===this.props.displayQuery||this.updateDisplayQuery()}onUserInput(){this.queryHasChanged?(this.queryHasChanged=!1,this.props.searchInputChanged({textyString:this.getTextyString()}).then(()=>{this.queryHasBeeenSubmitted&&(this.props.onEnter(),this.queryHasBeeenSubmitted=!1)})):this.queryHasBeeenSubmitted&&(this.props.onEnter(),this.queryHasBeeenSubmitted=!1)}onUserQueryChange(){this.queryHasChanged=!0,this.onUserInput()}onEnter(){null!==this.props.autocompleteSelectedIndex&&(this.queryHasBeeenSubmitted=!0,this.onUserInput())}onClickClear(){this.props.clearSearchInput(),this.texty&&this.texty.focus()}setTextyRef(e){var t=!(!e||!e.getWrappedInstance);this.texty=t?e.getWrappedInstance():e}getTextyString(){return this.texty?this.texty.value().replace(/<@([A-Z0-9a-z]+)\|([^>]+)>/g,(e,t,a)=>{var n=Object(f.a)(a);return"<@".concat(t,"|").concat(n,">")}):this.props.displayQuery}lazyInitializeShuffledPlaceholderCopy(){var e=[y.t("Search for comments, asides, eurekas, and more"),y.t("Search for messages, replies, or even insightful asides"),y.t("Search for files, facts, figures, and stats"),y.t("Search for files, for people, for half-remembered fragments of conversation"),y.t("Search for a missing link"),y.t("Search for whatever; let\u2019s find it together"),y.t("Search discussions, directories, data, and more"),y.t("Search messages, files, around corners, under rugs, etc."),y.t("Search all across Slack"),y.t("Search far and wide"),y.t("Search high and low"),y.t("Search the Log of All Conversation and Knowledge"),y.t("Search because it\u2019s faster than scrolling"),y.t("Type what you want to search for. Slack will do the rest."),y.t("What do you want to search for today?"),y.t("Surely that\u2019s around here somewhere\u2026"),y.t("You\u2019re digging in the right place"),y.t("We\u2019re all searching, in a way. You can search Slack, specifically, here."),y.t("Input search. Beep boop."),y.t("Search for something. Anything. You have the window open now anyway."),y.t("Delve into your archives, seize upon the answers. Rejoice.")];return null===j&&(j=Object(n.a)(e.map((e,t)=>t))),E=(E+1)%j.length,e[j[E]]}focusTexty(){this.texty&&this.texty.focus()}updateDisplayQuery(){this.texty&&this.props.displayQuery!==this.getTextyString()&&this.texty.value(this.props.displayQuery)}render(){var e,t=y.t("Search"),a=this.props.displayQuery?"c-search__input_box__clear":"c-search__input_box__clear c-search__input_box__clear__hidden",n={autocomplete:"list",owns:"c-search_autocomplete__suggestion_list",expanded:!0,activedescendant:"number"==typeof this.props.autocompleteSelectedIndex?Object(O.b)(this.props.autocompleteSelectedIndex):void 0};return e=this.placeholderCopy?this.placeholderCopy:y.t("Search messages, files, and channels",{fallbackHash:"2c741ca32c78642194b2b88f355b5ebb8d3ea849"}),c.a.createElement("div",{className:"c-search__input_box","data-qa":"search_input_box"},c.a.createElement(u.b,{type:"search-medium",className:"c-search__input_box__icon"}),c.a.createElement(l.default,{className:"c-search__input_box__input",modules:{tabcomplete:{completers:[]},keyboard:{useFormattingCommands:!1}},ref:this.setTextyRef,ariaLabel:t,ariaDescribedBy:"footer-instructions",unsafeAriaProps:n,initialText:this.props.displayQuery,placeholder:e,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onEnter:this.onEnter,onTextChange:this.onUserQueryChange,onEscape:this.props.onEscape,isSingleLine:!0,focusOnMount:this.props.autoFocus,useLegacyCreate:!this.props.isSonic,isJumbomojiEnabled:!1,showMentionTooltips:!1,enableBroadcastKeywords:!1,useFocusRing:!1,"data-qa":"focusable_search_input"}),c.a.createElement(h.c,{className:a,onClick:this.onClickClear,label:y.t("Clear"),"data-qa":"search_input_clear"},y.t("Clear")))}}search_input_box_SearchInputBox.defaultProps=C;var k={searchInputChanged:function(){return Object(m.f)(...arguments)},clearSearchInput:function(){return Object(_.a)(...arguments)}};t.a=Object(d.b)(e=>({usePrimarySearch:Object(v.a)(e),isSearchAutocompleteOpen:Object(b.e)(e),displayQuery:Object(m.b)(e),queryIsUserGenerated:Object(m.c)(e),autocompleteSelectedIndex:Object(b.c)(e),isSonic:Object(g.a)(e)}),k,null,{withRef:!0})(search_input_box_SearchInputBox)},NPry:function(e,t,a){},NYp8:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a("q1tI"),r=a("UF3u");function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=Object(n.useRef)(),s=Object(n.useRef)(),i=Object(n.useRef)();Object(r.a)(a.current,t)||(a.current=t,s.current=e,s.current()),Object(n.useEffect)(()=>{return function e(){var t=60-(new Date).getSeconds();t<5&&(t=5),i.current=setTimeout(()=>{s.current(),e()},1e3*t)}(),()=>{clearTimeout(i.current)}},[])}},NZTl:function(e,t,a){"use strict";var n=a("9oTK"),r=a("aK/h"),s=a("yHhI"),i=a("wCpp"),o=a("XfeM"),c=a("S3eg"),l=a("q1tI"),d=a.n(l),p=a("oLrU"),u=a("unce"),h=a("ns4K"),m=a("XHGt"),b=a("nNoG"),_=a("g+Y+"),g=a("qafc"),f=new b.b("drafts");function v(e){var{featureComposeFlow:t}=e;return t?d.a.createElement(g.b,null,f.t("You have reached the maximum number of drafts (Copy TBD)")):null}v.defaultProps={featureComposeFlow:!1};var O=Object(m.b)(function(e){return{featureComposeFlow:Object(_.g)(e)}})(v),y=a("YPPF"),C=Object(o.b)("Create a new composer draft",(e,t)=>{var a=t();if(Object(u.a)(a))return e(Object(h.c)({element:d.a.createElement(O)})),Object(s.a)({state:a}).info("Failed to create composer draft (max_num_drafts)"),Promise.reject(new Error("max_num_drafts"));var n=Object(p.a)();return e(Object(y.f)({id:n,is_from_composer:!0})),Promise.resolve(n)});C.meta={name:"createComposerDraft",key:"draftsStoreThunksCreateComposerDraftCreateComposerDraft",description:"Create a new composer draft"},C.propTypes=null;var j=C;a.d(t,"a",function(){return E});var E=Object(o.b)("Opens the composer page",function(){var e=Object(n.coroutine)(function*(e,t){var a,{draftId:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object(s.a)({getState:t,label:"COMPOSER"});if(n)a=n;else try{a=yield e(j()),r.info("Creating a new composer draft ".concat(a))}catch(o){return}r.info("Opening the composer page to the following draft ".concat(a)),e(Object(c.a)({id:"Pcomposer",routeParams:{draftId:Object(i.b)(a)}}))});return function(t,a){return e.apply(this,arguments)}}());E.meta={name:"openComposerPage",key:"actionsOpenComposerPageOpenComposerPage",description:"Opens the composer page"},E.propTypes={draftId:r.default.string}},Nc5J:function(e,t,a){"use strict";var n=a("XfeM"),r=a("S3eg"),s=a("vmJv"),i=a("zRJ2"),o=Object(n.b)("Switches to the All Unreads view",(e,t)=>{e("Punreads"===Object(s.a)(t())?Object(i.b)():Object(r.a)({id:"Punreads"}))});o.meta={name:"openUnreadsView",key:"actionsOpenUnreadsViewOpenUnreadsView",description:"Switches to the All Unreads view"},t.a=o},NrNc:function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"a",function(){return o});var n=a("F294"),r=a("uvIC"),s=a("P9LH"),i=(e,t)=>{var a=t.file||Object(n.a)(t.files),i=Object(r.c)(e,a);return"email"===Object(s.p)(i)?i:null},o=(e,t)=>!!i(e,t)},O6kw:function(e,t,a){"use strict";var n=a("c8Bs"),r=a("Z0Cl"),s=a("wBxZ"),i=a("gSGL"),o=a("q1tI"),c=a.n(o),l=a("aK/h"),d=a("XfeM"),p=a("dhvi"),u=a("h9PG"),h=a("8Duq"),m=a("P9LH"),b=a("aLpA"),_=a("syB0"),g=a("ifKl"),f=a("oT5T"),v=a("nNoG"),O=new v.b("files");function y(e){var{proceedToNextDialog:t,disableFileUploadsPref:a}=e,n=O.t("Uploads disabled"),r="";"disable_all"===a&&(r=O.t("At the request of your administrator, file uploads have been disabled on this workspace.")),"disable_all_except_images"===a&&(r=O.t("At the request of your administrator, only images can be uploaded to this workspace."));return c.a.createElement(f.a,{title:n,onGo:()=>Object(_.a)(()=>{t()})},c.a.createElement("p",null,r))}y.defaultProps={proceedToNextDialog:g.a,disableFileUploadsPref:""};var C=y,j=new v.b("file_upload");function E(e){var t,a,n,r,s,i,{proceedToNextDialog:o,excludedFiles:l,goodFiles:d}=e,p="",u=l.length+d.length;l.length&&([],r="",i="",t=l.map(e=>c.a.createElement("li",{key:e.name},c.a.createElement("strong",null,e.name))),l.length>1?(a=l.length===u?j.t("All files unsupported"):j.t("Some files unsupported"),s=j.t("Try uploading a .zip version of these files instead."),r=c.a.createElement("ul",null,t)):1===l.length&&(a=j.t("File unsupported"),s=j.t("Try uploading a .zip version of this file instead.")),d.length>1?i=j.t("(Don\u2019t worry, your other files are next.)"):1===d.length&&(i=j.t("(Don\u2019t worry, your other file is next.)")),n=1===l.length?j.rt("Sorry, {excluded_file} is a type of file not supported by Slack",{excluded_file:c.a.createElement("strong",null,l[0].name)}):l.length===u?j.t("Sorry, none of those file types are supported by Slack."):j.t("Sorry, some of those file types are not supported by Slack."),p=c.a.createElement("div",null,c.a.createElement("p",null,n),r,c.a.createElement("p",null,s),c.a.createElement("p",null,i)));return c.a.createElement(f.a,{title:a,onGo:()=>{Object(_.a)(()=>{o()})}},p)}E.defaultProps={proceedToNextDialog:g.a,goodFiles:[],excludedFiles:[]};var k=E,S=a("Lnf+"),I=new v.b("file-upload"),w={SINGLE:"single",MULTIPLE:"multiple",ALL:"all"};function T(e){var{type:t,proceedToNextDialog:a}=e,n=I.t("File too large"),r="";r=t===w.ALL?I.t("All of those files are too large and cannot be uploaded. The limit is {limit}.",{limit:Object(S.a)(b.ab)}):t===w.SINGLE?I.t("That file is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(S.a)(b.ab)}):I.t("We\u2019ll upload what we can, but one or more of those files is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(S.a)(b.ab)});var s=t===w.MULTIPLE?()=>{Object(_.a)(()=>{a()})}:g.a;return c.a.createElement(f.a,{title:n,onGo:s},c.a.createElement("p",null,r))}T.defaultProps={type:w.SINGLE,proceedToNextDialog:g.a};var N=T,P=a("ns4K"),A=a("qafc"),M=new v.b("multi_file_upload"),x=Object(d.b)("renders a toast with error message for uploading too many files",e=>{var t=M.t("You can only upload {count, plural, =1 {# file} other {# files}} at a time.",{count:b.z}),a=c.a.createElement(A.b,{icon:"warning",iconClassName:"sk_reddish_orange"},c.a.createElement("span",null,t));setTimeout(()=>e(Object(P.c)({element:a})),500)});x.meta={name:"renderFileLimitToast",key:"componentsMultiFileUploadUtilityRenderFileLimitToastRenderFileLimitToast",description:"renders a toast with error message for uploading too many files"};var R=x,D=Object(d.b)("filters invalid files before they can be uploaded",function(e,t){var{selectedFiles:a,channelId:o,threadTs:l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(){var{dispatch:e,getState:t,files:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a)return Promise.resolve();var s=Object(n.a)(a,e=>Object(m.F)(e));return new Promise(n=>{var i=Object(u.a)(t(),"disable_file_uploads");if("disable_all"!==i||s){if("disable_all_except_images"===i&&!s){var o=Object(r.a)(a,e=>Object(m.N)(e));if(o.length!==a.length)return void e(Object(p.e)({element:c.a.createElement(C,{disableFileUploadsPref:i,proceedToNextDialog:()=>n(o)}),isStackable:!0}))}n(a)}else e(Object(p.e)({element:c.a.createElement(C,{disableFileUploadsPref:i,proceedToNextDialog:()=>n()}),isStackable:!0}))})}({dispatch:e,getState:t,files:a}).then(t=>(function(){var{dispatch:e,files:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t?new Promise(a=>{Object(m.S)(t,t=>{t.excludedFiles.length?e(Object(p.e)({element:c.a.createElement(k,{goodFiles:t.goodFiles,excludedFiles:t.excludedFiles,proceedToNextDialog:()=>a(t.goodFiles)}),isStackable:!0})):a(t.goodFiles)})}):Promise.resolve()})({dispatch:e,files:t})).then(t=>(function(){var{dispatch:e,files:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t?new Promise(a=>{var n=t.filter(e=>Object(i.a)(e)||void 0===e.size||e.size<=b.ab);if(n.length<t.length)return 1===t.length?(e(Object(p.e)({element:c.a.createElement(N,{type:w.SINGLE}),isStackable:!0})),void a()):n.length?void e(Object(p.e)({element:c.a.createElement(N,{type:w.MULTIPLE,proceedToNextDialog:()=>a(n)}),isStackable:!0})):(e(Object(p.e)({element:c.a.createElement(N,{type:w.ALL}),isStackable:!0})),void a());a(n)}):Promise.resolve()})({dispatch:e,files:t})).then(a=>(function(){var{dispatch:e,getState:t,files:a,channelId:n,threadTs:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a)return Promise.resolve();var i=t(),o=Object(h.f)(i,{channelId:n,threadTs:r})||[];if(o.length+a.length>b.z){e(R());var c=b.z-o.length,l=Object(s.a)(a,c);return Promise.resolve(l)}return Promise.resolve(a)})({dispatch:e,getState:t,files:a,channelId:o,threadTs:l}))});D.meta={name:"filterFilesForUpload",key:"actionsFilterFilesForUploadFilterFilesForUpload",description:"filters invalid files before they can be uploaded"},D.propTypes={selectedFiles:l.default.array.isRequired,channelId:l.default.string,threadTs:l.default.string};t.a=D},O9e6:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=a("uPpK"),o=a("peh1"),c=a("TSYQ"),l=a.n(c),d=a("XHGt"),p=a("tn36"),u=a("nNoG"),h=a("aLpA"),m=a("aK/h"),b=a("eK0w"),_=a("ukTK"),g=a("YLnb"),f=a("FsNM"),v=a("Kdk+"),O=a("sIET"),y=a("fYfO"),C=a("TOh8"),j=a("0dpy"),E=a("8CL7"),k=a("RhZ7"),S=a("VrmM"),I=a("CaXY"),w=a("kcos"),T=a("fFZG"),N=a("rUi3"),P=a("Aeia"),A=a("KmK8"),M=a("lU/5"),x=a("Q3oM"),R=a("WOap"),D=a("Gq2+"),F=a("gl+W"),L=36,U={className:void 0,isIAP1Enabled:!1};function B(e){var{className:t,message:a,renderAvatar:n,renderBody:r,renderHeader:i,isIAP1Enabled:o}=e,c=s.a.createElement(x.a,{className:l()(t,"c-message_kit__message",!o&&"p-activity_flexpane__item")},s.a.createElement(M.a,{msg:a},s.a.createElement(R.a,{jumpOrigin:"activity",msg:a,position:"inside",showComment:!1,showJump:!0,showMoreActions:!1,showReact:!0,showShare:!1,showStar:!1},s.a.createElement(A.a,{className:"p-activity_flexpane__item_gutter",light:n({size:L})},i(),s.a.createElement("br",null),r(),s.a.createElement(D.a,{msg:a}),s.a.createElement(P.b,{msg:a}),s.a.createElement(T.a,{className:"p-activity_flexpane__item_reactions",msg:a}),s.a.createElement(N.a,{flexOrigin:"activity",msg:a})))));return o?s.a.createElement(F.a,{className:"p-activity_page__item"},c):c}B.defaultProps=U;var H=Object(d.b)(e=>({isIAP1Enabled:Object(w.d)(e)}))(B),W={className:void 0,message:void 0};function q(e){var{className:t,message:a}=e;return a?s.a.createElement(H,{className:t,message:a,renderAvatar:e=>{var{size:t}=e;return s.a.createElement(k.a,{msg:a,size:t})},renderBody:()=>s.a.createElement(s.a.Fragment,null,s.a.createElement(E.a,{msg:a}),s.a.createElement(S.a,{msg:a,blockLimit:1,blocksContainerContext:I.a.activity})),renderHeader:()=>s.a.createElement(s.a.Fragment,null,s.a.createElement(C.a,{msg:a}),"\xa0\xa0",s.a.createElement(j.a,{msg:a,clickable:!0,full:!1,relative:!0}))}):null}q.defaultProps=W;var G=Object(d.b)(function(e,t){var{channelId:a,messageTs:n}=t;return{message:Object(y.a)(e,a,n)}})(q);G.propTypes={channelId:m.default.string.isRequired,messageTs:m.default.string.isRequired};var K=G,V=a("OtLZ"),z=a("BeL+"),Y=a("fujP"),Q=a("HiDb"),X=a("t85p"),J=a("QB+X"),Z=a("Q+UV"),$=a("3dqR"),ee=a("VlZM"),te=a("y7mK"),ae=new u.b("mentions");function ne(e,t){var a=Object(z.a)(Object(Q.a)(e,"users"));return Object(V.a)(a,t)}var re={className:void 0,currentUserId:void 0,featureSonicActivity:!1,message:void 0,reactions:void 0};function se(e){var{className:t,currentUserId:a,featureSonicActivity:n,message:i,reactions:o}=e,c=Object(r.useCallback)(e=>{var{size:t}=e,n=ne(o,a);return 1===n.length?s.a.createElement($.c,{userId:n[0],size:t,showCard:!0}):s.a.createElement(ee.a,{primaryMemberId:n[0],secondaryMemberId:n[1]})},[a,o]),l=Object(r.useCallback)(()=>s.a.createElement(s.a.Fragment,null,s.a.createElement(E.a,{msg:i,className:"sk_foreground_max",isSingleLine:!0}),s.a.createElement(S.a,{msg:i,blockLimit:1,blocksContainerContext:I.a.activity})),[i]),d=Object(r.useCallback)(()=>{if(!n)return!1;var e=ne(o,a);if(e.length<=2){var t=e.map(e=>s.a.createElement(te.a,{className:"p-activity_flexpane__reaction_item_name",userId:e}));return ae.rt("{names} reacted to your message",{names:Object(u.k)(t,{react:!0})})}return ae.rt("<r1>Several people</r1> reacted to your message",null,e=>{var{text:t}=e;return s.a.createElement("span",{className:"black"},t)})},[a,n,o]);return!(!n||Object(Y.a)(o))&&s.a.createElement(H,{className:t,message:i,renderAvatar:c,renderBody:l,renderHeader:d})}se.defaultProps=re;var ie=Object(d.b)((e,t)=>{var{channelId:a,messageTs:n}=t,r=Object(y.a)(e,a,n),s=Object(Z.b)(r),i=Object(J.e)(e,s);return{currentUserId:Object(X.d)(e),featureSonicActivity:Object(X.m)(e,"feature_sonic_activity"),message:r,reactions:i}})(se);ie.propTypes={channelId:m.default.string.isRequired,messageTs:m.default.string.isRequired};var oe=ie,ce=new u.b("mentions"),le={fetchActivity:n.a,isLoading:!1,items:[],onItemTabWithin:n.a,makeMessageSummary:n.a,makeReactionsSummary:n.a,focusKey:null,setFocusKey:n.a};class activity_list_ActivityList extends r.PureComponent{constructor(e){super(e),Object(p.a)(this,["getAriaLabelForRow","isFocusableItem","renderListItem","focus","onFocusEnter","onFocusLeave"]);var t=new _.a({DEFAULT_HEIGHT:150});this.layout=new g.a({heightCache:t}),this.getItemKeys=Object(o.createSelector)(e=>{var{items:t}=e;return t},e=>{var{isLoading:t}=e;return t},(e,t)=>{var a=["top-anchor-hack"],n=e.map(e=>"".concat(e.type,"-").concat(e.ts,"-").concat(e.messageTs));return a.push(...n),t&&a.push("loader"),a}),this.state={hasKeyboardFocus:!1},this.list=s.a.createRef()}componentDidMount(){var{focusKey:e,items:t}=this.props;"activity"===e&&t.length&&this.setFocusOnFirstItem()}onFocusEnter(e){this.setState(()=>({hasKeyboardFocus:e.isKeyboardFocus}))}onFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}setFocusOnFirstItem(){var{isLoading:e,items:t}=this.props,a=this.getItemKeys({isLoading:e,items:t})[1],n=this.list.current;n&&n.focusOnKey(a),this.props.setFocusKey(null)}getAriaLabelForRow(e){var{index:t}=e,{isLoading:a,items:n}=this.props,{hasKeyboardFocus:r}=this.state,s=this.getItemKeys({isLoading:a,items:n})[t];if("top-anchor-hack"!==s&&"loader"!==s){var i=n[t-1];if(i)return"reaction"===i.type?{"aria-label":this.props.makeReactionsSummary({channelId:i.channelId,messageTs:i.messageTs,hasFocus:r,viewContext:h.I.ACTIVITY_FLEXPANE})}:{"aria-label":this.props.makeMessageSummary({channelId:i.channelId,ts:i.messageTs,hasFocus:r,viewContext:h.I.ACTIVITY_FLEXPANE})}}}focus(){var e=this.list.current;e&&e.focus()}isFocusableItem(e){var{index:t}=e,{isLoading:a,items:n}=this.props,r=this.getItemKeys({isLoading:a,items:n})[t];return r&&"top-anchor-hack"!==r&&"loader"!==r}renderListItem(e){var{isLoading:t,items:a}=this.props,n=this.getItemKeys({isLoading:t,items:a});if("top-anchor-hack"===n[e])return s.a.createElement("div",{className:"p-activity_flexpane__top_anchor_hack_item"});if("loader"===n[e])return s.a.createElement(f.a,null);var r=a[e-1];if(!r)return null;var i=r===a[a.length-1],o=l()({margin_bottom_0:i&&t});return"reaction"===r.type?s.a.createElement(oe,{key:r.ts,channelId:r.channelId,className:o,messageTs:r.messageTs}):s.a.createElement(K,{key:r.ts,channelId:r.channelId,className:o,messageTs:r.messageTs})}render(){var{fetchActivity:e,isLoading:t,items:a,onItemTabWithin:n}=this.props;return s.a.createElement(i.a,null,r=>{var{width:i,height:o}=r;return s.a.createElement(b.a,{ref:this.list,animateOnScroll:!1,height:o,isFocusableItem:this.isFocusableItem,"aria-label":ce.t("Activity"),getPropsForItem:this.getAriaLabelForRow,keys:this.getItemKeys({isLoading:t,items:a}),layout:this.layout,loadPost:e,rowRenderer:this.renderListItem,width:i,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onItemTabWithin:n})})}}t.a=Object(d.b)(e=>({focusKey:Object(v.a)(e)}),e=>({setFocusKey:t=>e(Object(O.a)(t))}),null,{withRef:!0})(activity_list_ActivityList);activity_list_ActivityList.defaultProps=le},OISv:function(e,t,a){"use strict";var n=a("wx14"),r=a("ifKl"),s=a("q1tI"),i=a.n(s),o=(a("aK/h"),a("TSYQ")),c=a.n(o),l=a("b7Ww"),d=a("1Uzj"),p=a("RhZ7"),u=a("TOh8"),h=a("0dpy"),m=a("BRQ/"),b=a("0gqo"),_=a("rUi3"),g=a("8CL7"),f=a("VrmM"),v=a("Aeia"),O=a("gl+W"),y=(a("XThT"),a("bj+V"),Object(d.a)(l.a)),C={className:void 0,showSender:!0,onFileClick:r.a,timestampClickable:!0,timestampFull:!0,timestampRelative:!1,flexOrigin:"activity",flexOriginId:void 0,blocksContainerContext:void 0};class CondensedMessage extends s.PureComponent{render(){var{className:e,msg:t,showSender:a,onFileClick:r,timestampClickable:s,timestampFull:o,timestampRelative:l,flexOrigin:d,flexOriginId:C,blocksContainerContext:j}=this.props,E=a&&i.a.createElement("div",{className:"c-message_kit__condensed_message_header"},i.a.createElement(p.a,{msg:t,size:16}),"\xa0",i.a.createElement(u.a,{msg:t,className:"c-message_kit__condensed_message_sender"}),i.a.createElement(h.a,{msg:t,clickable:s,full:o,relative:l}));return i.a.createElement(O.a,{className:c()("c-message_kit__message","c-message_kit__condensed_message",e)},E,i.a.createElement(g.a,{className:"c-message_kit__condensed_message_text",msg:t,isSingleLine:!0}),i.a.createElement(f.a,{msg:t,blockLimit:1,blocksContainerContext:j}),i.a.createElement(v.b,{msg:t,renderFile:e=>i.a.createElement(y,Object(n.a)({},e,{className:c()("c-message_kit__condensed_message_file",{"c-message_kit__condensed_message_file--isolated":!t.text}),onClick:r}))}),i.a.createElement("div",{className:"c-message_kit__condensed_message_meta"},i.a.createElement(m.a,{msg:t,className:"c-message_kit__condensed_message_reactions"}),i.a.createElement(b.a,{msg:t,flexOrigin:d,flexOriginId:C})),i.a.createElement(_.a,{msg:t,flexOrigin:d,flexOriginId:C}))}}CondensedMessage.defaultProps=C,t.a=CondensedMessage},OX5w:function(e,t,a){"use strict";a.d(t,"h",function(){return d}),a.d(t,"f",function(){return p}),a.d(t,"g",function(){return u}),a.d(t,"e",function(){return h}),a.d(t,"d",function(){return b}),a.d(t,"j",function(){return _}),a.d(t,"i",function(){return g}),a.d(t,"c",function(){return f}),a.d(t,"b",function(){return v});var n=a("wx14"),r=a("AFNo"),s=a("1YQg"),i=a("k55U"),o=a("rWF5"),c=a("RgZo"),l=a("+yrr"),d=Object(r.a)("Update part or all of the call");d.meta={name:"update",key:"appCallsReduxActiveCallStoreUpdate",description:"Update part or all of the call"};var p=Object(r.a)("Update the active call token");p.meta={name:"setServerToken",key:"appCallsReduxActiveCallStoreSetServerToken",description:"Update the active call token"};var u=Object(r.a)("Update the elapsed call time");u.meta={name:"tickCallTime",key:"appCallsReduxActiveCallStoreTickCallTime",description:"Update the elapsed call time"};var h=Object(r.a)("Store gleaned contextual information from the url");h.meta={name:"setInitialContext",key:"appCallsReduxActiveCallStoreSetInitialContext",description:"Store gleaned contextual information from the url"};var m=Object(r.d)({},{hasJoined:!1,hasSelfConnected:!1,hasRemotePeerConnected:!1,hasVideoBeenEnabled:!1,elapsedDisplayTime:Object(c.a)(0)},{storeKey:"activeCall",persistenceEnabled:!1}).on(h,(e,t)=>{var{callOrConversationId:a,inviterUserId:r}=t,i=Object(s.j)(a);return Object(n.a)(Object(n.a)({},e),{id:i?a:void 0,conversationId:i?void 0:a,incomingInviterUserId:r,incomingInviteResponse:Object(o.v)()?void 0:s.c.Accept})}).on(d,(e,t)=>Object(n.a)(Object(n.a)({},e),t)).on(u,e=>e.callStartedTimestamp?Object(n.a)(Object(n.a)({},e),{elapsedDisplayTime:Object(c.a)(Date.now()-1e3*e.callStartedTimestamp)}):e).on(p,(e,t)=>{var{token:a,tokenExpiry:r}=t;return e.server?Object(n.a)(Object(n.a)({},e),{server:Object(n.a)(Object(n.a)({},e.server),{token:a,tokenExpiry:r})}):(Object(i.f)("Cannot set server token without a server"),e)}).on(l.O,(e,t)=>Object(n.a)(Object(n.a)({},e),{hasVideoBeenEnabled:e.hasVideoBeenEnabled||!!(t.isCameraEnabled||Object(l.D)(t)&&t.isScreenshareEnabled),hasSelfConnected:e.hasSelfConnected||!(!Object(l.D)(t)||!t.isConnected)})).on(l.I,(e,t)=>Object(n.a)(Object(n.a)({},e),{hasRemotePeerConnected:e.hasRemotePeerConnected||!!t.isConnected})).on(l.J,(e,t)=>Object(n.a)(Object(n.a)({},e),{hasVideoBeenEnabled:e.hasVideoBeenEnabled||!!t.isScreenshareEnabled}));t.a=m;var b=e=>!!e.activeCall.incomingInviterUserId&&!e.activeCall.incomingInviteResponse,_=e=>!!e.activeCall.incomingInviterUserId,g=e=>!!e.activeCall.conversationId&&Object(s.m)(e.activeCall.conversationId),f=e=>e.activeCall.id,v=e=>e.activeCall.hasSelfConnected&&e.activeCall.hasRemotePeerConnected},OrkY:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"route",function(){return Qe.lc}),a.d(n,"error",function(){return Xe.a}),a.d(n,"accessibility",function(){return Qe.a}),a.d(n,"activity",function(){return Qe.b}),a.d(n,"adminInvites",function(){return Qe.c}),a.d(n,"allThreads",function(){return Qe.f}),a.d(n,"allUnreads",function(){return Qe.g}),a.d(n,"appsBrowser",function(){return Qe.s}),a.d(n,"appsInChannels",function(){return Qe.t}),a.d(n,"blockKit",function(){return Qe.u}),a.d(n,"bootData",function(){return Qe.x}),a.d(n,"browsers",function(){return Qe.z}),a.d(n,"canInteract",function(){return Qe.A}),a.d(n,"cfm",function(){return Qe.B}),a.d(n,"channelLoading",function(){return Qe.F}),a.d(n,"channelSidebar",function(){return Qe.I}),a.d(n,"channelSidebarFolders",function(){return Qe.J}),a.d(n,"channelSections",function(){return Qe.H}),a.d(n,"channelPrefixes",function(){return Qe.G}),a.d(n,"checkoutFlow",function(){return Qe.M}),a.d(n,"connectivity",function(){return Qe.Q}),a.d(n,"consistency",function(){return Qe.R}),a.d(n,"customEmoji",function(){return Qe.S}),a.d(n,"deletedMessages",function(){return Qe.U}),a.d(n,"desktop",function(){return Qe.V}),a.d(n,"dnd",function(){return Qe.Y}),a.d(n,"docs",function(){return Qe.Z}),a.d(n,"drafts",function(){return Qe.bb}),a.d(n,"draftsExpansion",function(){return Qe.cb}),a.d(n,"draftPendingFileIds",function(){return Qe.ab}),a.d(n,"ekmChanges",function(){return Qe.db}),a.d(n,"ephemeralMessages",function(){return Qe.ib}),a.d(n,"expandables",function(){return Qe.jb}),a.d(n,"experiments",function(){return Qe.kb}),a.d(n,"fileRefresh",function(){return Qe.ob}),a.d(n,"fileUpload",function(){return Qe.pb}),a.d(n,"filesFlexpane",function(){return Qe.rb}),a.d(n,"flannelUrl",function(){return Qe.sb}),a.d(n,"globalNav",function(){return Qe.ub}),a.d(n,"help",function(){return Qe.vb}),a.d(n,"imports",function(){return Qe.xb}),a.d(n,"inbox",function(){return Qe.yb}),a.d(n,"inlineFilePreviews",function(){return Qe.zb}),a.d(n,"emailRender",function(){return Qe.eb}),a.d(n,"invites",function(){return Qe.Ab}),a.d(n,"lastUsedSlashCommand",function(){return Qe.Cb}),a.d(n,"memberDirectoryFlexpane",function(){return Qe.Eb}),a.d(n,"messageEdit",function(){return Qe.Ib}),a.d(n,"messagePane",function(){return Qe.Kb}),a.d(n,"messagePaneBanner",function(){return Qe.Lb}),a.d(n,"teamMenuCTA",function(){return Qe.Ac}),a.d(n,"modal",function(){return Qe.Ob}),a.d(n,"noop",function(){return Qe.Pb}),a.d(n,"onboarding",function(){return Qe.Rb}),a.d(n,"openPopoversCount",function(){return Qe.Sb}),a.d(n,"appOrgAwareness",function(){return Qe.n}),a.d(n,"pendingFiles",function(){return Qe.Yb}),a.d(n,"pendingFileUploads",function(){return Qe.Xb}),a.d(n,"pendingOpenChannel",function(){return Qe.Zb}),a.d(n,"persistedApiCalls",function(){return Qe.ac}),a.d(n,"prefs",function(){return Qe.cc}),a.d(n,"presence",function(){return Qe.dc}),a.d(n,"pricingPlans",function(){return Qe.ec}),a.d(n,"reactionsToast",function(){return Qe.hc}),a.d(n,"roles",function(){return Qe.kc}),a.d(n,"searchAutocomplete",function(){return Qe.mc}),a.d(n,"searchChannelsUsers",function(){return Qe.nc}),a.d(n,"searchInputBox",function(){return Qe.pc}),a.d(n,"searchInProductEducation",function(){return Qe.oc}),a.d(n,"searchResults",function(){return Qe.qc}),a.d(n,"searchSession",function(){return Qe.rc}),a.d(n,"searchUi",function(){return Qe.sc}),a.d(n,"socket",function(){return Qe.wc}),a.d(n,"stars",function(){return Qe.xc}),a.d(n,"pins",function(){return Qe.bc}),a.d(n,"tabs",function(){return Qe.yc}),a.d(n,"teamCreation",function(){return Qe.zc}),a.d(n,"threadsFlexpane",function(){return Qe.Dc}),a.d(n,"threadSub",function(){return Qe.Cc}),a.d(n,"toast",function(){return Qe.Ec}),a.d(n,"topics",function(){return Qe.Fc}),a.d(n,"typing",function(){return Qe.Hc}),a.d(n,"uiSerialization",function(){return Qe.Ic}),a.d(n,"unfurls",function(){return Qe.Jc}),a.d(n,"unreadCounts",function(){return Qe.Kc}),a.d(n,"unreadsView",function(){return Qe.Lc}),a.d(n,"userGroupsFlexpane",function(){return Qe.Oc}),a.d(n,"usersCounts",function(){return Qe.Pc}),a.d(n,"workspace",function(){return Qe.Tc}),a.d(n,"welcomePlace",function(){return Qe.Qc}),a.d(n,"enablePopupsBanner",function(){return Qe.gb}),a.d(n,"whatsNew",function(){return Qe.Rc}),a.d(n,"composerToolbarUI",function(){return Qe.P}),a.d(n,"recentlySharedFilesPicker",function(){return Qe.jc}),a.d(n,"channelBrowser",function(){return Qe.D}),a.d(n,"dmBrowser",function(){return Qe.X}),a.d(n,"flexpaneFocus",function(){return Qe.tb}),a.d(n,"messageFocus",function(){return Qe.Jb}),a.d(n,"clientTheme",function(){return Qe.N}),a.d(n,"adminMembers",function(){return Qe.d}),a.d(n,"allCalls",function(){return Qe.e}),a.d(n,"appActions",function(){return Qe.h}),a.d(n,"appGlobalActions",function(){return Qe.k}),a.d(n,"channelActions",function(){return Qe.C}),a.d(n,"appHomes",function(){return Qe.l}),a.d(n,"appHomesV2",function(){return Qe.m}),a.d(n,"appPermissions",function(){return Qe.o}),a.d(n,"appProfiles",function(){return Qe.p}),a.d(n,"appViews",function(){return Qe.q}),a.d(n,"appCollaborators",function(){return Qe.i}),a.d(n,"blockKitModals",function(){return Qe.v}),a.d(n,"apps",function(){return Qe.r}),a.d(n,"blocks",function(){return Qe.w}),a.d(n,"bots",function(){return Qe.y}),a.d(n,"channelHistory",function(){return Qe.E}),a.d(n,"channels",function(){return Qe.K}),a.d(n,"channelsMeta",function(){return Qe.L}),a.d(n,"customizeEmoji",function(){return Qe.T}),a.d(n,"developerActions",function(){return Qe.W}),a.d(n,"emoji",function(){return Qe.fb}),a.d(n,"environment",function(){return Qe.hb}),a.d(n,"externalTeamIds",function(){return Qe.mb}),a.d(n,"externalTeamsChannels",function(){return Qe.nb}),a.d(n,"files",function(){return Qe.qb}),a.d(n,"idpGroups",function(){return Qe.wb}),a.d(n,"lastNetworkSend",function(){return Qe.Bb}),a.d(n,"memberCounts",function(){return Qe.Db}),a.d(n,"members",function(){return Qe.Fb}),a.d(n,"membership",function(){return Qe.Gb}),a.d(n,"membershipOrdered",function(){return Qe.Hb}),a.d(n,"messages",function(){return Qe.Mb}),a.d(n,"messagesMeta",function(){return Qe.Nb}),a.d(n,"notifications",function(){return Qe.Qb}),a.d(n,"paidFeatures",function(){return Qe.Wb}),a.d(n,"reactions",function(){return Qe.gc}),a.d(n,"recentConversations",function(){return Qe.ic}),a.d(n,"sharedChannelInvites",function(){return Qe.uc}),a.d(n,"slashCommand",function(){return Qe.vc}),a.d(n,"selfTeamIds",function(){return Qe.tc}),a.d(n,"teams",function(){return Qe.Bc}),a.d(n,"userGroups",function(){return Qe.Nc}),a.d(n,"userGroupMembership",function(){return Qe.Mc}),a.d(n,"window",function(){return Qe.Sc}),a.d(n,"appConfig",function(){return Qe.j}),a.d(n,"orgApps",function(){return Qe.Tb}),a.d(n,"orgUserGroups",function(){return Qe.Vb}),a.d(n,"commsImpact",function(){return Qe.O}),a.d(n,"promo",function(){return Qe.fc}),a.d(n,"externalDirectory",function(){return Qe.lb}),a.d(n,"orgAppsSearchWorkspace",function(){return Qe.Ub}),a.d(n,"tspEmailDelivery",function(){return Qe.Gc});var r=a("JgE6"),s=a.n(r),i=a("7Kh5"),o=a("qDv6"),c=a("8YMo"),l=a("fFfO"),d=a("oTSI"),p=a("YjHT"),u=a("yHhI"),h=a("quKg"),m=a("DlLn"),b=a("rePB"),_=a("cErB"),g=a("BNw7"),f=a("t85p"),v=a("Gogr");function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function y(){var e=Object(v.c)("teams");return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},Object(v.c)("prevTeams"),{},e)}var C=a("lhZz"),j=a("8Az7"),E=a("KXvl"),k=a("qe1s"),S=a("HuaI"),I=a("IY6O"),w=a("kLJo"),T=a("dhvi"),N=a("/Rx2"),P=a("BeG2"),A=a("rWF5"),M=a("Zr7G");function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function D(){var{avoidReloadIfPossible:e,comparison:t,returnToUrl:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object(M.a)();function r(){return n.count("safh_reload"),Object(_.j)(a),Object(g.a)()}n.count("safh_start");var s=Object(u.b)({label:"AUTH"}),i=Object(_.k)(a).pathname,o=Object(w.e)(i,{throwOnNoRoute:!1});if(!e||!function(e,t){var a=Object(C.getStateForClientStore)();if(!Object(I.didBootAllWorkspaces)(a))return!1;if(e.removed.length>0)return!1;if(!t)return!1;var n=Object(I.getFocusedWorkspace)(a),r=t.params.teamId;return!(!Object(E.b)()&&r&&r!==n||e.usersChanged||Object(A.y)()&&e.isNoOp&&r&&Object(I.isWorkspaceExpired)(Object(C.getStateForClientStore)(),r))}(t,o))return e?n.count("safh_reload_requested"):n.count("safh_cannot_handle"),s.info("Fetched auth but need to reload to handle the change; navigating to ".concat(a)),r();s.info("Fetched auth and processing changes without reloading...");try{Object(v.f)()}catch(l){return s.error("Encountered an error while ingesting auth payload: ".concat(l)),r()}var c=Object(E.b)()?function(e){var t=Object(u.b)({label:"AUTH"}),a=y(),n=e.map(e=>(Object(I.isWorkspaceExpired)(Object(C.getStateForClientStore)(),e)?(t.info("Re-adding expired workspace ".concat(e," / ").concat(a[e].url)),Object(C.dispatchForClientStore)(Object(S.updateWorkspaceMeta)({id:e,meta:R({},a[e],{isExpired:!1})}))):(t.info("Adding workspace ".concat(e," / ").concat(a[e].url)),Object(C.dispatchForClientStore)(Object(S.addWorkspace)({id:e,meta:a[e]}))),Object(k.a)({teamId:e,shouldSetFocus:!1})));return Promise.all(n)}(t.added):Promise.resolve();return function(e){var t=Object(u.b)({label:"AUTH"}),a=y();e.forEach(e=>{if(Object(C.getStoreInstanceByTeamId)(e)){t.info("Updating credentials for workspace ".concat(e," / ").concat(a[e].url));var n=Object(v.d)(e,"token"),r=Object(v.d)(e,"enterprise_api_token");Object(j.c)(n,e),Object(C.dispatchForClientStore)(Object(S.updateWorkspaceMeta)({id:e,meta:a[e]})),Object(C.dispatchForTeamId)(e,Object(P.l)(n)),Object(C.dispatchForTeamId)(e,Object(f.y)({apiToken:n,enterpriseApiToken:r}))}})}(t.changed),c.then(()=>(function(e){var t=Object(I.getFocusedWorkspace)(Object(C.getStateForClientStore)());if(e!==t&&!Object(N.b)(Object(C.getStateByTeamId)(t))){var a=Object(u.b)({label:"AUTH"});if(a.info("Not allowed to switch workspaces right now; seeing if closing a modal helps"),Object(C.dispatchForTeamId)(t,Object(T.a)()),!Object(N.b)(Object(C.getStateByTeamId)(t)))throw a.info("Still not allowed to switch workspaces right now despite having closed a modal"),new Error("Not allowed to switch workspaces; we should reload instead");a.info("Closing a modal helped")}}(o.params.teamId),Object(w.g)(o.routeName,o.params,{reason:"Sonic authFetchedHandler"}))).then(()=>{n.count("safh_ok"),t.added.length>0&&n.count("safh_added"),t.changed.length>0&&n.count("safh_changed"),t.isNoOp&&n.count("safh_noop"),s.info("Successfully processed auth changes without needing to reload")}).catch(e=>(s.error("Encountered an error while processing auth changes: ".concat(e)),n.count("safh_error"),r()))}var F=a("V5VI"),L=!1;function U(){var{payload:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(arguments.length>1&&arguments[1],arguments.length>2?arguments[2]:void 0);if(!L){var a=t();e||"incremental"===Object(h.c)(a,"sonic_incr_auth")&&(L=!0,Object(u.b)().info("AUTH","Installing incremental auth handler"),Object(m.j)(D))}}var B=a("g5qt"),H=a("bYMc"),W=a("1PKr"),q=a("XfeM"),G=a("brL+"),K=a("eK5+"),V="lastBootSonicValue",z="sonicDowngradeTs",Y=432e5,Q=Object(q.b)("Signal to the desktop that all delegates are ready",(e,t)=>{Object(B.i)(),function(e){if(!Object(f.m)(e(),"feature_desktop_force_production_channel"))return;Object(B.Zb)({name:"releaseChannel",value:"prod"})}(t),function(){try{if(!Object(A.E)())return;if(!Object(A.w)("3.2"))return;if(Object(A.w)("3.3"))return;if(Object(B.G)("isOpenExternalShellForced"))return;Object(B.Zb)({name:"isOpenExternalShellForced",value:!0})}catch(e){Object(u.b)().error("Tried to set isOpenExternalShellForced, but failed",e)}}(),function(e){try{if(!Object(f.m)(e(),"feature_desktop_notifications_2018"))return;if(!Object(A.w)("3.3"))return;Object(B.Zb)({name:"notificationTimeout",value:6e3}),Object(B.Zb)({name:"notificationAfterHoverTimeout",value:2e3}),Object(B.Zb)({name:"notificationMaxItems",value:8}),Object(B.Zb)({name:"notificationStyle",value:"2018"})}catch(t){Object(u.b)().error("Tried to set notification style for 2018, but failed",t)}}(t),function(e){try{if(!Object(f.m)(e(),"feature_tinyspeck"))return;if(!Object(A.w)("4.2.0"))return;var t=Object(B.G)("debugFeatures")||[];if(!t.includes("react-devtools"))return;Object(B.Zb)({name:"debugFeatures",value:t.filter(e=>"react-devtools"!==e)})}catch(a){Object(u.b)().error("Tried to enable debug features, but failed",a),Object(u.b)().error(a.message),Object(u.b)().error(a.stack)}}(t),function(e){setTimeout(()=>{var t=e();if(Object(f.m)(t,"feature_desktop_logs_upload")){var a=Object(f.f)(t,"api_token"),n=Object(G.b)(t);W.b.fetch({method:"api.features",args:{token:a,platform:"ssb"},teamId:n}).then(e=>{e&&e.features&&e.features.desktop_diagnostics_timestamp&&J(n)})}},6e4)}(t),function(e){if(!Object(B.eb)())return;if(!Object(A.w)("4.0.0"))return;var t=Object(B.C)("bootSonic"),a=localStorage.getItem(V);if(t===a)return;var n=e(),r=Object(M.c)({state:n}),s="beta"===Object(B.H)();Object(u.b)().info("Decision to boot Sonic changed since last session: '".concat(a,"' -> '").concat(t,"'"));try{localStorage.setItem(V,t)}catch(i){Object(u.b)().error("Unable to set '".concat(V,"'"),i)}switch(t){case"once":r.count(s?"sonic_rollout_upgrade_to_sonic_beta_3":"sonic_rollout_upgrade_to_sonic_3");break;case"never":r.count(s?"sonic_rollout_downgrade_to_legacy_beta_3":"sonic_rollout_downgrade_to_legacy_3");try{localStorage.setItem(z,Date.now())}catch(i){Object(u.b)().error("Unable to set '".concat(z,"'"),i)}!s&&Object(K.a)(5)&&J(Object(G.b)(n)).then(()=>{r.count("sonic_rollout_downgrade_to_legacy_logs_available_3")})}}(t),function(){if(!Object(B.eb)())return;if(!Object(A.w)("4.0.0"))return;var e=Object(B.C)("bootSonic");if("once"===e)Object(B.Xb)({name:"bootSonic",value:"always"});else if("never"===e){var t=localStorage.getItem(z);if(null===t)return;var a=Date.now()-t;a>Y&&Object(B.Xb)({name:"bootSonic",value:"once"})}}()});Q.meta={name:"onWebappBooted",key:"desktopOnWebappBootedOnWebappBooted",description:"Signal to the desktop that all delegates are ready"};var X=Q;function J(e){return Object(B.p)().then(t=>{var a=t&&t.length>0?t[0]:null;if(!a)return Promise.resolve();var n=a instanceof File?a:new File(a.buffer,a.name,a.options),r=Object(C.getStateByTeamId)(e),s=Object(f.f)(r,"api_token");return s?W.b.fetch({method:"profiling.addLogging",httpMethod:"POST",args:{token:s,platform:"ssb",log_file:n},teamId:e}):Promise.resolve()}).catch(t=>{Object(u.a)({teamId:e}).error("Unable to upload app logs: ".concat(t))})}var Z="DESKTOP-SIDE-EFFECT";function $(e){if(Object(I.getAllWorkspaces)(e).filter(t=>!Object(I.isWorkspaceExpired)(e,t)).length-Object(I.getBootedWorkspaces)(e).length-Object(I.getFailedToBootWorkspaces)(e).length==0){var t=Object(I.getFocusedWorkspace)(e);Object(u.a)({teamId:t}).info(Z,"Attempted boot for all workspaces, signaling desktop"),Object(C.dispatchForTeamId)(t,X())}}var ee=a("5v1V"),te=a("Ff2n"),ae=a("aK/h"),ne=a("om+M"),re=a("4zXV");function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var ie=Object(ne.a)("Fetch start data",(e,t,a)=>{var{reason:n}=a,r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(Object(a),!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({flannel_api_ver:4,only_self_subteams:1},Object(te.a)(a,["reason"]));return e(Object(re.b)({method:"client.boot",args:r,reason:n}))});ie.meta={name:"fetchStartData",key:"fetchersStartApiFetchStartData",description:"Fetch start data"},ie.propTypes={reason:ae.default.string.isRequired,only_self_subteams:ae.default.oneOf([0,1])};var oe=a("0QyR"),ce=a("wsMj"),le=a("9E9B"),de=a("+8mH"),pe=a("c6rO"),ue=a("gLeh"),he=a("2VxW"),me=a("okZA"),be=a("8MYE"),_e=a("X5aw"),ge=a("s0HP"),fe=a("aClT"),ve=a("oZ18"),Oe=a("1CNK"),ye=Object(q.b)("Set model data in Redux stores based on response from client.boot",function(e,t){var{appHomesData:a,channelsData:n,teamData:r,selfData:s,userPrefsData:o,teamPrefsData:c,userGroupMembershipData:l,enterpriseData:d,enterprisePrefsData:p,paidFeatures:u,emojiBootData:h,slashCommandsBootData:m}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(ue.c)(Object(B.ab)())),e(Object(le.bulkAddChannels)({channels:n})),e(Object(pe.c)({team:r})),e(Object(he.a)({members:[s]})),e(Object(ge.c)(o)),e(Object(de.f)(o&&o.muted_channels||"")),e(Object(fe.c)(c)),e(Object(ve.b)()),e(Object(ve.a)({userGroups:l,isMember:!0})),a&&e(Object(ce.b)(a)),d&&e(Object(me.l)({team:d})),p&&e(Object(Oe.c)(p)),e(Object(be.c)(u||[])),e(Object(i.c)({serverCacheTs:h.cacheTs})),e(Object(_e.c)({serverCacheTs:m.cacheTs}))});ye.meta={name:"setModelData",key:"appSonicReduxActionsSetModelDataSetModelData",description:"Set model data in Redux stores based on response from client.boot"},ye.propTypes={channelsData:ae.default.array,teamData:ae.default.object.isRequired,selfData:ae.default.object.isRequired,miscBootData:ae.default.object,userPrefsData:ae.default.object,teamPrefsData:ae.default.object,userGroupMembershipData:ae.default.array,enterpriseData:ae.default.object,paidFeatures:ae.default.arrayOf(ae.default.string)};var Ce=ye,je={};function Ee(e,t,a){var n=Object(G.b)(a());je[n]=(je[n]||0)+1;var r=je[n];return Object(ee.f)(a())?(t(Object(p.i)(!0)),t(ie({reason:"provisionally-connected"})).then(oe.b).then(e=>{var s=je[n];Object(ee.n)(a())&&s===r&&t(Object(P.f)()),t(Ce(e))}).finally(()=>t(Object(p.i)(!1)))):Promise.resolve(t(Object(P.f)()))}var ke=a("XL7r"),Se=a("7dYf");function Ie(){var{payload:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;if(Object(E.b)()){var n=a();if(!e&&Object(ee.l)(n)&&Object(G.a)(n)){var r=Object(G.b)(n);Object(v.e)().includes(r)&&Object(ke.c)(n).includes(r)&&(Object(u.a)({teamId:r}).info("Removing this team from the app exclusion list"),t(Object(Se.b)({teamId:r})))}}}var we=a("70KD"),Te=a("ocl4"),Ne=3e4;function Pe(e,t,a){Object(f.m)(a(),"feature_desync_resync")&&t(ie({reason:"resynced-topics"})).timeout(Ne).then(oe.b).then(e=>{t(Object(we.c)()),t(Ce(e))}).catch(()=>t(Object(we.c)())).finally(()=>t(Object(Te.b)()))}var Ae=Object(d.a)(()=>{Object(F.d)({actions:[p.i],sideEffect:U}),Object(F.a)({actions:[S.setWorkspaceBooted],sideEffect:(e,t,a)=>{if(B.W){var n=e.payload,r=a();Object(u.a)({teamId:n}).info(Z,"Team ".concat(n," booted, creating delegate")),Object(C.dispatchForTeamId)(n,Object(H.a)()),$(r)}}}),Object(F.a)({actions:[S.setWorkspaceFailedToBoot],sideEffect:(e,t,a)=>{B.W&&$(a())}}),Object(F.d)({actions:[ee.u],sideEffect:Ee}),Object(F.d)({actions:[Te.e],sideEffect:Pe}),Object(F.d)({actions:[ee.a],sideEffect:Ie})});function Me(){return Ae(),Object(l.a)(...arguments)}var xe=a("IEu+"),Re=a("OFWM"),De=a("2/vs"),Fe=a("CPJ1"),Le=a("G4ux"),Ue=a("5dgH"),Be=a("m2ga"),He=a("nNoG"),We=a("JvzI"),qe=a("TVjB"),Ge=a("s/0T"),Ke=a("0dCl"),Ve=a("iTOt"),ze=a("rb67"),Ye=a("rkcT"),Qe=a("5Fft"),Xe=a("Gmrf"),Je=a("s5Is"),Ze=a("9oTK"),$e=a("fujP"),et=a("Z7Ay"),tt=a("Z0v/"),at=a("pR3f"),nt=a("bhDD"),rt=a("JtEI"),st=a("M/q2"),it=a("kymL"),ot="3",ct="persist:slack-persistence-method-version";function lt(e){var t=Object(u.b)();if(!Object(st.a)("localStorage"))return t.info(tt.F,"Not checking persistence storage method version because localStorage doesn't appear to be supported"),Promise.resolve();var a="".concat(ct,"-").concat(e),n="".concat(ct,"-").concat(Object(rt.c)(),"-").concat(e),r=localStorage.getItem(n);if(!r){r=localStorage.getItem(a)||"0";try{localStorage.setItem(n,ot),localStorage.removeItem(a)}catch(i){t.error("Error persisting persistence method version for ".concat(e,": ").concat(i))}}if(r!==ot){try{localStorage.setItem(n,ot)}catch(i){t.error("Error persisting persistence method version for ".concat(e,": ").concat(i))}if("1"===r&&"2"===ot)t.info(tt.F,"(".concat(e,") Removing localStorage persistence data because it is now stored in IndexedDb")),localStorage.removeItem("persist:".concat(tt.I,"-").concat(e));else if("2"===r&&"3"===ot){t.info(tt.F,"(".concat(e,") Removing outdated persistence data because it is now stored key off of which gantry app you are using"));var s="persist:".concat(tt.I,"-").concat(e);return it.a.delete(s).catch(a=>{t.error('Error removing persisted data "persist:'.concat(tt.I,"-").concat(e,'"'),a)})}}return Promise.resolve()}var dt=Object(u.b)();var pt=a("UioL");function ut(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ht(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(a),!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ut(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var mt=Object(K.a)(10),bt="".concat(tt.h,"_process_stored_state_mark_").concat(tt.i);function _t(){return gt.apply(this,arguments)}function gt(){return(gt=Object(Ze.coroutine)(function*(){var{teamId:e,reducerConfig:t=Object(tt.u)(e),storedState:a={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object(M.a)(),r=Object(u.a)({teamId:e});r.info(tt.F,"Checking for persistence method changes"),yield lt(),r.info(tt.F,"Preparing state for hydration"),mt&&n.mark(bt);var s=function e(t){var{state:a,logger:n,teamId:r,reducerConfig:s={},storedPersistenceHashes:i={},currentPersistenceHashes:o={}}=t,c={};return Object.keys(a).forEach(t=>{var l=s[t];if(Object(tt.y)(l))c[t]=e({state:a[t],reducerConfig:Object(tt.q)(l),logger:n,teamId:r});else{var{persistenceEnabled:d=!1,persistImmediately:p=!1,afterReadTransform:u}=Object(tt.v)(l)||{};if(d&&!p){var h=i[t],m=o[t];m===h?c[t]=u?u(a[t],r):a[t]:n.info(tt.F,"".concat(t," store's shape has changed, throwing away persisted data for it. New hash ").concat(m," doesn't equal old hash ").concat(h))}}}),c}({state:a,teamId:e,logger:r,reducerConfig:t,storedPersistenceHashes:a.persistenceHashes,currentPersistenceHashes:Object(at.b)(ht({},t,{persistenceHashes:nt.a}))});return!s||Object($e.a)(s)?(r.info(tt.F,"No persisted state found"),mt&&n.clearMarks(bt),null):(r.info(tt.F,"State prepared for hydration"),mt&&n.measureAndClear(bt),r.info(tt.F,"Checking for required data"),function(){var{teamId:e,reducerConfig:t,state:a={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).some(n=>{var r=t[n],s=Object(tt.D)(r)&&(null===a[n]||void 0===a[n]);return s&&dt.info(tt.F,"(".concat(e,") Not using persisted model because ").concat(n," is required and empty")),s})}({teamId:e,reducerConfig:t,state:s})?(r.info(tt.F,"Missing some required data, throwing away persisted state"),n.count("".concat(tt.h,"_missing_required_reducers_").concat(tt.i)),null):s)})).apply(this,arguments)}Object(et.a)("persist.processStoredState",e=>{return _t({teamId:e,reducerConfig:Object(tt.u)(e),storedState:Object(pt.a)({teamId:e})})});var ft=a("lhpG"),vt=a("4ULK"),Ot=a("UXvI"),yt=!1,Ct=e=>{if(e){var t,a="",n=e.srcElement||e.target,r=u.b&&Object(u.b)();if(n&&n.nodeName)if("SCRIPT"===n.nodeName){var s=n.src,i=e.type||"error";a="[".concat(i,"] from script at ").concat(s," (failed to load?)")}else if("IMG"===n.nodeName){var o=n.src||n.currentSrc||"unknown";return void r.warn("<img> fired error with url = ".concat(o))}if(e.error&&e.error.stack&&(a+=" ".concat(e.error.stack)),e.filename){var c=e.filename,l=e.lineno,d=e.colno;a+=" from ".concat(c),l&&(a+=" @ line ".concat(l,", col ").concat(d))}if((t=e.error&&e.error.stack?a:"".concat(e.message||""," ").concat(a))&&t.replace&&(t=t.replace(/\s+/g," ").trim()),!t||!t.length)if(n){var p=n.nodeName||"unknown";t="error event from node of ".concat(p,", no message provided?")}else t="error event fired, no relevant message or node found";t="\ud83d\udc1e ".concat(t);!function(e){var{error:t,msg:a,subtype:n}=e,r={subtype:n};Object(u.b)().error(t,a,r)}({error:e.error||e,msg:t,subtype:"js_runtime_error"})}};var jt=()=>{if(!yt){var e=Object(Ot.a)(Ct,1e4);window.addEventListener("error",e,!0),yt=!0}},Et=!1,kt=()=>{var e=Object(M.a)(),t=Object(u.b)();e.count("".concat(Object(rt.c)(),"_beforeunload")),t.info("RELOAD","Page is about to unload. This might not be a reload, it could be a window close or navigation")},St=()=>{Et||(window.addEventListener("beforeunload",kt),Et=!0)},It=a("YB7p"),wt=a("rCFu"),Tt=a("IbTH"),Nt=a("xUyV");function Pt(){var{teamToken:e,teamId:t,reason:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=document.documentElement,r=!(!n||!n.dataset)&&n.dataset.versionTs;return r?Object(Tt.g)({token:e,teamId:t,versionTs:r,reason:a}).then(e=>{if(e&&e.should_reload){var{client_min_version:t}=e;Object(Nt.a)(t)&&Object(It.a)({reason:"Reloading due to a min version bump (rtm.shouldReload)",reasonKey:"min_version_bump"})}return Promise.resolve()}):Promise.resolve()}function At(){var{isWarmBooting:e,bootData:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=document.documentElement,n=!(!a||!a.dataset)&&a.dataset.versionTs;if(!n)return Promise.resolve(!1);var{should_reload:r,client_min_version:s}=t;if(e){var i=function(e){var{versionTs:t,clientMinVersion:a,shouldReload:n}=e;if(n)return Object(u.b)().warn("MIN-VERSION","We somehow managed to cache the should_reload => true value. We can safely ignore this as it\u2019s likely a programming error?"),!1;var r=document.documentElement,s=r&&r.dataset?r.dataset.minVersionSplaySeconds:0;if(!s)return!1;var i=parseInt(s,10),o=a+i;if(Date.now()/1e3>=o&&t<a&&Object(Nt.a)(a))return!0;return!1}({clientMinVersion:s,shouldReload:r,versionTs:n});return i&&Object(It.a)({reason:"Reloading because our assets (".concat(n,") are at least 3 hours older than the last min-version (").concat(s,")"),reasonKey:"min_version_bump"}),Promise.resolve(i)}if(r&&Object(Nt.a)(s)){Object(It.a)({reason:"Reloading due to a min version bump (client.boot)",reasonKey:"min_version_bump"});return Promise.resolve(!0)}return Promise.resolve(!1)}var Mt=a("ANjH"),xt=a("sINF"),Rt=a("Bw5p"),Dt=a("Xzpq"),Ft=a("YS90"),Lt=a("1hAG");function Ut(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Bt=["domain","enterprise_id","enterprise_name","id","icon","name","url"],Ht=Object(Ft.b)("Broadcast workspaces state to other stores",(e,t,a)=>{var n=e.getState(),r=t(a),s=e.getState(),i=Object(I.getBootedWorkspaces)(s),o=n&&Object(I.getBootedWorkspaces)(n),c=Object(I.getAllWorkspaces)(s),l=Object(I.getAllWorkspaces)(n),d=!l||c.some((e,t)=>e!==l[t]),p=Object(I.getRecentlyFocusedWorkspaces)(s),u=n&&Object(I.getRecentlyFocusedWorkspaces)(n);return o!==i||d?(!function(e,t){var a=e.reduce((e,a)=>{var n=Object(C.getStateByTeamId)(a);return e[a]=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(a),!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ut(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},Object(Rt.a)(Object(Lt.i)(n,a,!1),Bt),{order:t.indexOf(a)}),e},{});Object(B.wc)(a)}(i,c),Wt(i,p)):u!==p&&Wt(i,p),r});function Wt(e,t){var a=t[0];e.forEach(e=>{Object(C.dispatchForTeamId)(e,Object(Dt.f)(t))}),Object(B.Qb)(a)}Ht.meta={name:"broadcastWorkspacesMiddleware",key:"appSonicReduxMiddlewareBroadcastWorkspacesBroadcastWorkspacesMiddleware",description:"Broadcast workspaces state to other stores"};var qt=Ht,Gt=a("vWCh"),Kt=a("dxEi"),Vt=a("ifKl");var zt=function(){var{state:e,prevState:t,workspaces:a=[],broadcastSelector:n=Vt.a,broadcastAction:r=Vt.a,featureFlag:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n(e),o=n(t);i!==o&&a.forEach(e=>{var t=Object(C.getStateByTeamId)(e);s&&!Object(f.m)(t,s)||Object(C.dispatchForTeamId)(e,r(i))})},Yt=Object(Ft.b)("Broadcast connectivity state to other stores",(e,t,a)=>{var n=e.getState(),r=t(a),s=e.getState(),i=Object(I.getBootedWorkspaces)(s);return zt({state:s,prevState:n,workspaces:i,broadcastSelector:e=>Object(Kt.c)(e),broadcastAction:e=>Object(Gt.a)(e),featureFlag:"feature_connectivity_manager"}),zt({state:s,prevState:n,workspaces:i,broadcastSelector:e=>Object(Kt.e)(e),broadcastAction:e=>Object(Gt.b)(e),featureFlag:"feature_connectivity_manager"}),r});Yt.meta={name:"broadcastConnectivityMiddleware",key:"appSonicReduxMiddlewareBroadcastConnectivityBroadcastConnectivityMiddleware",description:"Broadcast connectivity state to other stores"};var Qt=Yt,Xt=a("OtLZ"),Jt=a("wBxZ"),Zt=a("0VPD"),$t=a("MNvw");function ea(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ta(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(a),!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ea(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var aa=16,na=Object($t.b)({[S.initialize]:(e,t)=>(function(e){var{focusedWorkspace:t,allWorkspaces:a,workspacesMeta:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.allWorkspaces)throw new Error("workspaces-store:initialize cannot be called more than once");if(!t)throw new Error("workspaces-store:initialize must be given a focusedWorkspace");if(!a)throw new Error("workspaces-store:initialize must be given an array of workspaces");if(a.indexOf(t)<0)throw new Error("workspaces-store:initialize ".concat(t," is not one of the valid workspaces: ").concat(a));return ta({},e,{focusedWorkspace:t,allWorkspaces:a,workspacesMeta:n,recentlyFocusedWorkspaces:[t]})})(e,t),[S.setDidBootAllWorkspaces]:e=>ta({},e,{didBootAllWorkspaces:!0}),[S.setWorkspaceOrder]:(e,t)=>(function(e,t){var a=e.allWorkspaces;if(Object(Zt.a)(a,t).length!==a.length)throw new Error("workspaces-store:setWorkspaceOrder can only re-order items in the array; additions or removals are not allowed");return Object(v.h)("orderedTeamIds",t),ta({},e,{allWorkspaces:t})})(e,t),[S.setWorkspaceBooted]:(e,t)=>(function(e,t){var a=e.bootedWorkspaces.includes(t)?e.bootedWorkspaces:[...e.bootedWorkspaces,t];return ta({},e,{bootedWorkspaces:a})})(e,t),[S.setWorkspaceFailedToBoot]:(e,t)=>(function(e,t){if(!t)return e;var a=e.failedToBootWorkspaces.includes(t)?e.failedToBootWorkspaces:[...e.failedToBootWorkspaces,t];return ta({},e,{failedToBootWorkspaces:a})})(e,t),[S.setWillNavigateToUnbootedWorkspaceId]:(e,t)=>ta({},e,{willNavigateToUnbootedWorkspaceId:t}),[S.setWorkspaceIsMigrating]:(e,t)=>(function(e,t){if(!t)return e;var a=e.migratingWorkspaces.includes(t)?e.migratingWorkspaces:[...e.migratingWorkspaces,t];return ta({},e,{migratingWorkspaces:a})})(e,t),[S.setWorkspaceMigrationIsComplete]:(e,t)=>(function(e,t){if(!t)return e;var a=e.completedMigrationWorkspaces.includes(t)?e.completedMigrationWorkspaces:[...e.completedMigrationWorkspaces,t];return ta({},e,{completedMigrationWorkspaces:a})})(e,t),[S.setWorkspaceIsAccessLimited]:(e,t)=>(function(e,t){if(!t)return e;var a=e.accessLimitedWorkspaces.includes(t)?e.accessLimitedWorkspaces:[...e.accessLimitedWorkspaces,t];return ta({},e,{accessLimitedWorkspaces:a})})(e,t),[S.addWorkspace]:function(e){var{id:t,meta:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!a)throw new Error("'id' and 'meta' are both required when adding a workspace");if(e.allWorkspaces.includes(t))return Object(u.b)({label:"WORKSPACES"}).warn("Cannot add workspace; it is already present: ".concat(t)),e;var{allWorkspaces:n,workspacesMeta:r}=e;return ta({},e,{allWorkspaces:[...n,t],workspacesMeta:ta({},r,{[t]:a})})},[S.updateWorkspaceMeta]:function(e){var{id:t,meta:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{workspacesMeta:n}=e;if(!n[t])throw new Error("Cannot update workspace meta for ".concat(t,"; no such team"));return ta({},e,{workspacesMeta:ta({},n,{[t]:a})})},[S.internalSetFocusedWorkspaceType]:(e,t)=>ta({},e,{focusedWorkspace:t,recentlyFocusedWorkspaces:sa(e.recentlyFocusedWorkspaces,t)}),[S.internalRemoveWorkspaceType]:(e,t)=>ta({},e,{allWorkspaces:Object(Xt.a)(e.allWorkspaces,t)})},{bootedWorkspaces:[],failedToBootWorkspaces:[],migratingWorkspaces:[],completedMigrationWorkspaces:[],accessLimitedWorkspaces:[],recentlyFocusedWorkspaces:[]},{storeKey:"workspaces",persistenceEnabled:!0});na.meta={name:"workspaces",key:"appSonicReduxWorkspacesStoreWorkspacesReducerWorkspaces"},na.propTypes={allWorkspaces:ae.default.arrayOf(ae.default.string),bootedWorkspaces:ae.default.arrayOf(ae.default.string),failedToBootWorkspaces:ae.default.arrayOf(ae.default.string),recentlyFocusedWorkspaces:ae.default.arrayOf(ae.default.string),focusedWorkspace:ae.default.string,workspacesMeta:ae.default.object};var ra=na;function sa(e,t){var a=[t,...e.filter(e=>e!==t)];return a.length>aa?Object(Jt.a)(a,aa):a}var ia=a("xIQt"),oa=a("Jsq1"),ca=a("Tc5z"),la=a("NZir"),da=a("fpvb"),pa=a("4GGS"),ua=a("8Cw3"),ha=a("Lev8"),ma=a("CF4u"),ba=Object(Ft.b)("Broadcast client theme state to other stores",(e,t,a)=>{var n=e.getState(),r=t(a),s=e.getState(),i=Object(I.getBootedWorkspaces)(s);return zt({state:s,prevState:n,workspaces:i,broadcastSelector:e=>Object(ha.c)(e),broadcastAction:e=>Object(ha.g)(e)}),zt({state:s,prevState:n,workspaces:i,broadcastSelector:e=>Object(ha.d)(e),broadcastAction:e=>Object(ha.i)(e)}),zt({state:s,prevState:n,workspaces:i,broadcastSelector:e=>Object(ha.e)(e),broadcastAction:e=>Object(ha.j)(e)}),r});ba.meta={name:"broadcastClientThemeMiddleware",key:"appSonicReduxMiddlewareClientThemeBroadcastClientThemeMiddleware",description:"Broadcast client theme state to other stores"};var _a=ba;function ga(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function fa(){var e=Object(C.getClientStoreInstance)();if(e)return Object(u.b)().warn("[CLIENT-STORE]","we\u2019ve called configureClientStore before and already have an instance. This is likely a programming error."),e;var t,a,n=(t=Object(la.a)({teamId:"client",middlewares:[da.b,xt.a,pa.a,qt,Qt,_a,ia.a],customEnhancers:[]}),a=Object(ua.a)({workspaces:ra,window:Re.a,telemetry:Ge.a,connectivity:oa.a,accessibility:ue.a,desktop:ca.c,clientTheme:ha.b,iaHistory:ma.a}),Object(Mt.e)(a,t));Object(C.setClientStoreInstance)(n),Object(et.a)("clientStore",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(a),!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ga(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},n,{setFocusedWorkspace:Je.setFocusedWorkspace})),Object(et.a)("clientStore",n),Object(et.b)("teamIds",()=>{var e=n.getState();return I.getAllWorkspaces(e)}),Object(et.b)("activeTeam",()=>{var e=n.getState(),t=I.getFocusedWorkspace(e);return window.slackDebug[t]}),Object(et.b)("activeTeamId",()=>{var e=n.getState();return I.getFocusedWorkspace(e)});var r={};return Object.keys(S).forEach(e=>{r[e]=function(){return n.dispatch(S[e](...arguments))}}),Object.keys(I).forEach(e=>{r[e]=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return I[e](n.getState(),...a)}}),Object(et.a)("clientStore.workspaces",r),n}var va=a("IxGy"),Oa=a("sDWr"),ya=a("2HDu"),Ca=a("aLpA");var ja=e=>{var{params:t={},prevTeamId:a,nextTeamId:n,routeName:r}=e;if(a!==n)return Promise.resolve();var s=Object(C.getStoreInstanceByTeamId)(a),i=s.getState(),o=Object(Ve.b)(i),c=Object(Ve.c)(i),l=Object(va.e)(i,{ignoreViewContext:!0});return function(e,t,a){return e&&(!e.viewContext||e.viewContext===Ca.I.MESSAGE_PANE)&&t===e.channelId&&a!==e.channelId}(l,c.entityId,t.entityId)||function(e,t,a,n,r){return e&&e.viewContext===Ca.I.THREADS_FLEXPANE&&t===Oa.k&&a===Object(ya.c)(e.channelId,e.threadTs)&&(n!==Oa.k||r!==Object(ya.c)(e.channelId,e.threadTs))}(l,o,c.threadId,r,t.threadId)?s.dispatch(Object(va.a)({cancelUnsavedEdits:!1,scroll:!0})):Promise.resolve()},Ea=a("4M+g"),ka=a("rgOt"),Sa=a("S3eg"),Ia=a("q1tI"),wa=a.n(Ia),Ta=a("ns4K"),Na=a("5mKg"),Pa=a("wx14"),Aa=a("qafc"),Ma=new He.b("unavailable_channel");var xa=class unavailable_member_toast_UnavailableMemberToast extends Ia.PureComponent{render(){var e=this.props,{teamName:t}=e,a=Object(te.a)(e,["teamName"]),n=Ma.t("{teamName} is making some changes to their workspace, so content and conversations shared with them are temporarily unavailable.",{teamName:t});return wa.a.createElement(Aa.b,Object(Pa.a)({fadeDelay:1e4,type:"error"},a),wa.a.createElement("span",null,n))}},Ra=Object(q.b)("Show unavailable member toast",function(e,t){var{teamId:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t(),r=Object(Lt.i)(n,a),s=Object(Na.e)(r);return e(Object(Ta.c)({element:wa.a.createElement(xa,{type:"error",teamName:s})}))});Ra.meta={name:"showUnavailableMemberToast",key:"actionsShowUnavailableMemberToastShowUnavailableMemberToast",description:"Show unavailable member toast"};var Da=Ra,Fa=a("Fdc0"),La=a("wfE8"),Ua=a("6kok"),Ba=a("FHcd"),Ha=function(){var{nextTeamId:e,params:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(C.getStoreInstanceByTeamId)(e);if(!a)return Promise.resolve(!0);var n=a.getState();if(!Object(Ba.a)(t.entityId))return Promise.resolve();var r=t.entityId,s=Object(Le.d)(n,r),i=Object(Fa.Nb)(n,s),o=Object(Ea.k)(n,r);return Object(Ua.sb)(o)?(a.dispatch(Object(Sa.a)({id:o.id})),Promise.resolve(!1)):i?(a.dispatch(Da({teamId:s.team_id})),Promise.resolve(!1)):a.dispatch(Object(La.v)({memberIds:[r],reason:"sonic/route-listeners/open-conversation-with-member"})).then(e=>(a.dispatch(Object(ka.a)({channel:e.channel})),a.dispatch(Object(Sa.a)({id:e.channel.id})),Promise.resolve(!1)))},Wa=a("+1yX"),qa=function(){var{nextTeamId:e,params:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(C.getStoreInstanceByTeamId)(e),n=a.getState(),r=t.entityId;if(!Object(Wa.a)(r))return Promise.resolve();var s=Object(Ea.e)(n,r);return Object(Ua.pb)(s)||Object(Ua.hb)(s)?Object(Ua.sb)(s)?Promise.resolve():a.dispatch(Object(La.v)({channel:r,reason:"sonic/route-listeners/open-conversation-with-ids"})):Promise.resolve()},Ga=function(){var{nextTeamId:e,params:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(C.getStoreInstanceByTeamId)(e),n=a.getState();if(!Object(Wa.a)(t.entityId))return Promise.resolve();var r=t.entityId,s=Object(Ea.e)(n,r,!1);return Object(Ua.Z)(s)?Object(Ua.cb)(s)?Promise.reject(new Error("tried to switch to a channel from another team")):Promise.resolve():a.dispatch(Object(La.f)({ids:[r],reason:"sonic/route-listeners/ensure-channel"})).then(function(){var{resolved:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!e||!e.includes(r))})},Ka=a("NYva"),Va=a("YSKj"),za=a("Fwh9"),Ya=function(){var{nextTeamId:e,params:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(C.getStoreInstanceByTeamId)(e),n=a.getState();return!Object(za.e)(n)||(!(t.tabId&&!Object(Va.a)(t.tabId,t.entityId,n))||(a.dispatch(Object(Ka.a)({channelId:t.entityId})),!1))},Qa=a("m8R6"),Xa=a("X4vX"),Ja=function(){var{prevTeamId:e,nextTeamId:t,routeName:a,reason:n,params:r={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=Object(C.getStoreInstanceByTeamId)(t),i=s.getState();if("clear_timestamp"!==n){var o=Object(Wa.a)(r.entityId)&&r.entityId,c=r.timestamp,l=Object(Ve.c)(i),d=Object(Wa.a)(l.entityId)&&l.entityId;(t!==e||d!==o||c)&&(s.dispatch(Object(Xa.a)({channelId:o,startTs:c})),c&&Object(w.g)(a,Object(Qa.a)(r,"timestamp"),{reason:"clear_timestamp",shouldReplaceState:!0}))}},Za=a("dz01"),$a=a("LzXF"),en=function(){var{prevTeamId:e,nextTeamId:t,params:a={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object(C.getStoreInstanceByTeamId)(t),r=n.getState(),s=Object(Wa.a)(a.entityId)&&a.entityId,i=Object(Ve.c)(r),o=Object(Wa.a)(i.entityId)&&i.entityId;!Object(Za.p)(r)||t===e&&o===s||n.dispatch(Object($a.g)(!1))},tn=a("miRO"),an=function(){var{nextTeamId:e,routeName:t,reason:a,params:n={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Object(C.getStoreInstanceByTeamId)(e),s=r.getState();if("clear_thread_timestamp"!==a){var i=Object(Ve.c)(s).threadId;n.replyTs?r.dispatch(Object(tn.i)(n.replyTs)):n.threadId!==i&&r.dispatch(Object(tn.b)()),n.replyTs&&Object(w.g)(t,Object(Qa.a)(n,"replyTs"),{reason:"clear_thread_timestamp",shouldReplaceState:!0})}},nn=a("zoXk");function rn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var sn=function(){var{prevTeamId:e,nextTeamId:t,params:a={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e===t){var n=Object(C.getStoreInstanceByTeamId)(t),r=n.getState(),s=Object(Ve.b)(r),i=Object(Ve.c)(r).entityId,o=a.entityId;if(i!==o){["channel_page","group_page","im_page"].includes(Object(nn.c)(r))&&n.dispatch(Object(Dt.b)({flexOrigin:null}));var c=Object(nn.f)(r);if(Object(Wa.a)(o)&&c&&s===Oa.a){n.dispatch(Object(Dt.c)({flexRestore:void 0}));var l=c.routeName,d=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(a),!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rn(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a,{},c.params);return void Object(w.g)(l,d,{reason:"flex-restore",shouldReplaceState:!0})}Object(Wa.a)(o)||s!==Oa.d||(n.dispatch(Object(Dt.c)({flexRestore:{routeName:Oa.d}})),Object(w.g)(Oa.a,a,{reason:"close-details",shouldReplaceState:!0}))}}},on=a("hjTk");function cn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var ln=e=>{var{prevTeamId:t,nextTeamId:a,routeName:n,params:r}=e;if(Object(E.b)()||t===a)return!0;var s=Object(w.i)(n,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(a),!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cn(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},r,{teamId:a})),i=Object(C.getStateForClientStore)(),o=Object(I.getWorkspacesMeta)(i),c=o&&o[a]&&o[a].subdomain,l=Object(E.a)(c)||"_team_".concat(a);return Object(on.a)(s,l),!1},dn=a("eoGz"),pn=e=>{var{prevTeamId:t,nextTeamId:a}=e;if(!Object(E.b)()||t===a)return!0;var n=Object(C.getStateForClientStore)();return!Object(I.isWorkspaceExpired)(n,a)||(Object(dn.a)(a),!1)},un=a("3lVB"),hn=e=>{var{prevTeamId:t,nextTeamId:a}=e;return t!==a?Object(C.dispatchForClientStore)(Object(Ge.e)(!0)):Object(C.dispatchForClientStore)(Object(Ge.e)(!1))},mn=e=>{var{nextTeamId:t,routeName:a,params:n}=e,r={routeName:a,params:n};return Object(v.i)(t,"lastRoute",r),!0},bn=a("POHe");function _n(e){var{prevTeamId:t}=e,a=Object(C.getStoreInstanceByTeamId)(t);return Object(p.h)(a.getState())&&(a.dispatch(Object(Ve.d)(!0)),bn.a.delete("setNavigatedDuringWarmBoot")),Promise.resolve()}var gn=a("PXln"),fn=e=>{var t=Object(C.getStoreInstanceByTeamId)(e.nextTeamId);return"SlackHistoryEvent"!==e.reason||"learning-slack"!==e.params.entityId&&"Pwelcome"!==e.params.entityId||t.dispatch(Object(gn.f)("history")),!0},vn=a("YPPF"),On=a("OZf9"),yn=a("+uGN"),Cn=a("g+Y+"),jn=Object(q.b)("Delete composer drafts without text or destination",function(e,t){var{ignoredDraftId:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t(),r=Object(Cn.e)(n);if(!Object($e.a)(r)){var s=[];Object(On.a)(r,(e,t)=>{Object(yn.r)(e)&&t!==a&&s.push(t)}),Object($e.a)(s)||e(Object(vn.a)({ids:s}))}});jn.meta={name:"deleteEmptyDrafts",key:"draftsStoreThunksDeleteEmptyDraftsDeleteEmptyDrafts",description:"Delete composer drafts without text or destination"},jn.propTypes={ignoredDraftId:ae.default.string};var En=jn,kn=a("KCFn"),Sn=a("wCpp");function In(e){var{nextTeamId:t,prevTeamId:a,params:n={}}=e,{dispatch:r,getState:s}=Object(C.getStoreInstanceByTeamId)(t),i=s(),o=Object(nn.j)(i),c=Object(Cn.f)(i),{entityId:l,threadId:d}=n,{threadTs:p}=Object(kn.b)(d);if(t===a){var u=Object(Sn.a)(n.draftId);r(En({ignoredDraftId:u}))}var h=c.filter(e=>{var{channelId:t,threadTs:a}=Object(kn.b)(e);return a?"thread"!==o||!p||p!==a:l!==t});return Object($e.a)(h)||r(Object(vn.c)({draftIds:h})),!0}var wn=a("obnc"),Tn=a("MlY5"),Nn=function(){var{prevTeamId:e,nextTeamId:t,params:a={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e===t){var n=Object(C.getStoreInstanceByTeamId)(t),r=n.getState(),s=Object(Ve.c)(r).entityId,i=a.entityId;s!==i&&i in Tn.c&&n.dispatch(Object(wn.b)({entity:Tn.c[i]}))}},Pn=a("toaU");function An(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Mn(e){var{nextTeamId:t,routeName:a,params:n}=e;Object(C.dispatchForClientStore)(Object(Je.setFocusedWorkspace)({teamId:t,routeName:a,params:n})),Object(C.getStoreInstanceByTeamId)(t)&&Object(C.dispatchForTeamId)(t,Object(Ve.e)({routeName:a,params:n}))}function xn(e){return Rn.apply(this,arguments)}function Rn(){return(Rn=Object(Ze.coroutine)(function*(e){var{prevTeamId:t,nextTeamId:a,navigationTimestamp:n}=e,r=Object(C.getStateForClientStore)();if(Object(I.hasWorkspaceFailedToBoot)(r,a)||Object(I.isWorkspaceExpired)(r,a))return!0;var s=Object(C.getStoreInstanceByTeamId)(a).getState(),i=Object(Ve.c)(s),o=Object(Ve.b)(s)||Oa.a,c=!t;return yield Object(w.g)(o,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?An(Object(a),!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):An(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},i,{teamId:a}),{reason:"navigateToLastSavedRoute",shouldReplaceState:c,navigationTimestamp:n}),!1})).apply(this,arguments)}function Dn(e){var{prevTeamId:t,nextTeamId:a}=e;if(!t||!a||t===a)return null;var n=window.location.search.match(/[&?]locale=([a-zA-Z-]*)/),r=n?n[1]:Object(v.d)(a,"user_locale");return Object(We.c)(r,a)}function Fn(){bn.a.set("maybeOpenOtherTeamInBrowser",Object(w.c)(ln)),bn.a.set("maybeRedirectToSignin",Object(w.c)(pn)),bn.a.set("startTeamSwitchTiming",Object(w.c)(un.a)),bn.a.set("navigateToLastSavedRoute",Object(w.c)(xn,[Pn.a])),bn.a.set("attemptToStopEditingInChannel",Object(w.c)(ja,[])),bn.a.set("openConversationWithMember",Object(w.c)(Ha,[])),bn.a.set("openConversationWithIds",Object(w.c)(qa,[])),bn.a.set("ensureChannel",Object(w.c)(Ga,[])),bn.a.set("validateChannelTab",Object(w.c)(Ya)),bn.a.set("syncMessagePane",Object(w.b)(Ja,[])),bn.a.set("closeAppSpace",Object(w.b)(en,[])),bn.a.set("syncThreadFlexpane",Object(w.b)(an,[Oa.k])),bn.a.set("syncFlexpane",Object(w.b)(sn,[])),bn.a.set("setNavigatedDuringWarmBoot",Object(w.b)(_n)),bn.a.set("draftsListener",Object(w.b)(In)),bn.a.set("syncActiveBrowserEntity",Object(w.b)(Nn)),bn.a.set("syncRouteStoreWithUrl",Object(w.b)(Mn)),bn.a.set("ensureCorrectLocaleForTeam",Object(w.b)(Dn)),bn.a.set("setShouldLogTeamSwitchMetrics",Object(w.b)(hn)),bn.a.set("setLocalConfigForTeamWithKey",Object(w.b)(mn)),bn.a.set("setWelcomePlacePageEntryPoint",Object(w.b)(fn))}Object(et.a)("router.listeners",()=>[...bn.a.entries()]);var Ln=a("lKeU"),Un=a("8sNt"),Bn=a("aaWX"),Hn=a("qOjI"),Wn=a("Fsnq"),qn=a("owWc"),Gn=a("HDs8"),Kn=a("kiPk"),Vn=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],zn=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Yn=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(0===e)return 0;if(t===a)return parseFloat(e.toFixed(n));var s=r?1024:1e3,i=r?Vn:zn,o=i.findIndex(e=>e.toLowerCase()===t.toLowerCase()),c=i.findIndex(e=>e.toLowerCase()===a.toLowerCase());if(-1===o)throw new Error("Unknown currentType '".concat(t,"' passed to convertToSize"));if(-1===c)throw new Error("Unknown desiredType '".concat(a,"' passed to convertToSize"));return o<c?parseFloat((e/s**(c-o)).toFixed(n)):parseFloat((e*s**(o-c)).toFixed(n))},Qn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Yn(e,"B","MB",t,!1)},Xn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Yn(e,"KB","MB",t,!1)},Jn=a("Smdl"),Zn=Object(u.b)(),$n=e=>{if(!Object(B.gb)())return Promise.resolve(null);var t=Object(B.D)(),a=Object(B.r)(),n=Object(B.q)()||Promise.resolve();return Promise.all([t,a,n]).then(t=>{var[a,r,s]=t,i={};if(navigator&&navigator.hardwareConcurrency){var o=Object(Kn.a)(r,e=>e.cpu.percentCPUUsage*navigator.hardwareConcurrency);i["cpu_v4_app_".concat(e,"_teams")]=o.toFixed(2)}if(Object(A.m)("4.0.0"))if(s){a&&(i.memory_v4_mb_full_client=Math.ceil(Xn(a.private)));var c=Object(Kn.a)(s,e=>e.memory.private),l=c+Object(Kn.a)(s,e=>e.memory.shared),d=Math.ceil(Xn(c)),p=Math.ceil(Xn(l));i["memory_v4_app_mb_".concat(e,"_teams")]=p,i["memory_v4_app_private_mb_".concat(e,"_teams")]=d}else Zn.error("STATS","No memory stats collected getAppMemoryUsage:".concat(B.q," appMemoryMetricsUsage:").concat(n),{subtype:"stats_no_memory"});else{a&&(i.memory_v4_mb_full_client=Math.ceil(Xn(a.privateBytes)));var u=Object(Kn.a)(r,e=>e.memory.privateBytes),h=Object(Kn.a)(r,e=>e.memory.workingSetSize),m=Math.ceil(Xn(u)),b=Math.ceil(Xn(h));i["memory_v4_app_mb_".concat(e,"_teams")]=b,i["memory_v4_app_private_mb_".concat(e,"_teams")]=m}return window.performance&&window.performance.memory&&(i["heap_v4_used_mb_".concat(e,"_teams")]=Qn(performance.memory.usedJSHeapSize),i["heap_v4_total_mb_".concat(e,"_teams")]=Qn(performance.memory.totalJSHeapSize)),i}).catch(e=>Zn.warn("metrics: Invalid data returned by desktop.stats",e.message))},er=()=>{if(!Object(B.gb)())return Promise.resolve(null);var e=Object(B.D)(),t=Object(B.r)(),a=Object(B.q)()||Promise.resolve();return Promise.all([e,t,a]).then(e=>{var[t,a,n]=e,r={},s=a.filter(e=>"Tab"===e.type).length-1;if(navigator&&navigator.hardwareConcurrency){var i=Object(Kn.a)(a,e=>e.cpu.percentCPUUsage*navigator.hardwareConcurrency);r["cpu_v3_app_".concat(s,"_teams")]=i.toFixed(2)}if(Object(A.m)("4.0.0")){if(n){t&&(r.memory_v3_team_mb_full_client=Math.ceil(Xn(t.private)));var o=Object(Kn.a)(n,e=>e.memory.private),c=o+Object(Kn.a)(n,e=>e.memory.shared),l=Math.ceil(Xn(o)),d=Math.ceil(Xn(c));r["memory_v3_app_mb_".concat(s,"_teams")]=d,r["memory_v3_app_private_mb_".concat(s,"_teams")]=l}}else{t&&(r.memory_v3_team_mb_full_client=Math.ceil(Xn(t.privateBytes)));var p=Object(Kn.a)(a,e=>e.memory.privateBytes),u=Object(Kn.a)(a,e=>e.memory.workingSetSize),h=Math.ceil(Xn(p)),m=Math.ceil(Xn(u));r["memory_v3_app_mb_".concat(s,"_teams")]=m,r["memory_v3_app_private_mb_".concat(s,"_teams")]=h}return r}).catch(e=>Zn.warn("metrics: Invalid data returned by desktop.stats",e.message))};Object(et.a)("ssbMetrics",{fetchMemoryStatsV3:er,fetchMemoryStatsV4:$n});var tr=18e4,ar=36e5,nr=6e5;function rr(){if(!Object(A.v)())return Promise.resolve();var e=Object(M.a)();function t(){var t=Object(C.getStateForClientStore)(),a=Object(I.getBootedWorkspaces)(t).length;return $n(a).then(t=>{return t?(Object.keys(t).forEach(a=>e.store(a,t[a])),t):null})}var a=ar+Math.floor(Math.random()*nr);return setInterval(()=>t(),a),setTimeout(()=>t(),tr),Promise.resolve()}function sr(){if(Object(K.a)(1)){var e="store_metrics_v3",t=ar+Math.floor(Math.random()*nr);setInterval(()=>(function(){var t=Object(C.getStateForClientStore)();Object(I.getBootedWorkspaces)(t).forEach(t=>{var a=Object(C.getStateByTeamId)(t);if(a){var n=Object(M.c)({state:a});n.mark("".concat(e,"_size_compute_time"));var r=Object(Wn.a)(a.files);n.count("".concat(e,"_count_files"),r);var s=Object(Wn.a)(a.members);n.count("".concat(e,"_count_members"),s);var i=Object(Wn.a)(a.channels);n.count("".concat(e,"_count_channels"),i);var o=Object(qn.a)(a.messages,(e,t)=>e+Object(Wn.a)(t),0);n.count("".concat(e,"_count_messages"),o),n.count("".concat(e,"_count_total"),r+s+i+o);var c=Object(h.c)(a,"redux_cache_eviction_schedule");c&&(n.count("".concat(e,"_count_files_schedule_").concat(c),r),n.count("".concat(e,"_count_members_schedule_").concat(c),s),n.count("".concat(e,"_count_channels_schedule_").concat(c),i),n.count("".concat(e,"_count_messages_schedule_").concat(c),o)),n.measureAndClear("".concat(e,"_size_compute_time"))}})})(),t)}}function ir(e){var t=new Gn.a,a=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(u.b)().info("SW-CACHE-API-QUEUE",...t)},{bootAssets:n,teamId:r,teamToken:s,userId:i}=e,{getWorkspacesMetaFromLocalConfig:o}=n,c=o(),l=Object(M.a)();Object(Tt.e)({bootQueue:t,infoLogger:a,shouldCache:!0,teamId:r,token:s,userId:i}).then(()=>{l.count("".concat("cached_api_fetch","_success_experiments"))}).catch(()=>{l.count("".concat("cached_api_fetch","_failure_experiments"))}),Object.keys(c).forEach(e=>{var{isExpired:n,token:r}=c[e];n||Object(Tt.f)({bootQueue:t,infoLogger:a,teamId:e,token:r,shouldCache:!0}).then(()=>{l.count("".concat("cached_api_fetch","_success_features"))}).catch(()=>{l.count("".concat("cached_api_fetch","_failure_features"))})})}function or(e){if(Object(K.a)(1)){var t=e.bootAssets.getGenericTelemeter();if(window.PerformanceObserver&&window.PerformanceLongTaskTiming)new PerformanceObserver(e=>{var a=e.getEntries();a&&a.forEach(e=>{"longtask"===e.entryType&&t.store("longtask_sonic",e.duration)})}).observe({entryTypes:["longtask"]})}}var cr=a("EKWK"),lr=a("/Bt+"),dr=a("AUAP"),pr=a("DO5Y"),ur=a("JHHQ"),hr=a("7ob2"),mr=a("kKpd"),br=a("7tsZ"),_r=a("zBEu"),gr=a("ayyL"),fr=a("bDqM"),vr=a("GlmH"),Or=a("FP5A"),yr=a("7EGn"),Cr=a("K2Qr"),jr=a("vmJv"),Er=Object(q.b)("Starts the Joiner Landing Place onboarding experience",function(){var e=Object(Ze.coroutine)(function*(e,t){var a=t(),n=Object(jr.a)(a);if(Object(Wa.a)(n)){var r=e(Object(Cr.g)({channelId:n})),s=yield r.promise||Promise.resolve(r);Object(yr.a)(s,"counts.member_count",26)<=25&&e(Object(hr.c)(!0))}return e(Object(Or.a)())});return function(t,a){return e.apply(this,arguments)}}());Er.meta={name:"startJoinerLandingPlace",key:"onboardingStoreThunksStartJoinerLandingPlaceStartJoinerLandingPlace",description:"Starts the Joiner Landing Place onboarding experience"};var kr=Object(q.b)("Starts joiner onboarding",function(){var e=Object(Ze.coroutine)(function*(e,t){var a=t();return Object(Jn.a)()?(e(Object(hr.b)(!0)),Object(gr.s)(a)?(e(Object(Or.a)()),Promise.resolve()):e(Er())):Object(gr.s)(a)?(e(Object(hr.b)(!0)),e(Object(Or.a)()),Object(gr.t)(a)&&!Object(vr.a)(a)?(e(Object(fr.d)()),e(Object(Sa.a)({id:"Pwelcome",fromHistory:!1,replaceHistoryState:!1}))):Promise.resolve()):Object(_r.f)()});return function(t,a){return e.apply(this,arguments)}}());kr.meta={name:"startJoinerOnboarding",key:"onboardingStoreThunksStartJoinerOnboardingStartJoinerOnboarding",description:"Starts joiner onboarding"};var Sr=a("t3J7"),Ir=a("7nxQ"),wr=Object(ne.a)("Trigger Slackbot channel suggestions (if any available)",e=>e(Object(re.a)({method:"channels.suggestions",args:{},reason:"channels-suggestions"})));wr.meta={name:"channelsSuggestions",key:"fetchersChannelsSuggestionsApiChannelsSuggestions",description:"Trigger Slackbot channel suggestions (if any available)"};var Tr=a("9svP"),Nr=Object(q.b)("Trigger Slackbot channel suggestions (if any available)",(e,t)=>{var a=Object(Tr.a)(75,-.6,.6);setTimeout(()=>{var a=t();Object(Jn.a)()&&!Object(nn.k)(a)||e(wr())},1e3*a)});Nr.meta={name:"maybeSendChannelsSuggestions",key:"actionsMaybeSendChannelsSuggestionsMaybeSendChannelsSuggestions",description:"Trigger Slackbot channel suggestions (if any available)"};var Pr=Nr;function Ar(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Mr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(a),!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ar(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function xr(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},{teamData:s,viewData:i,featureFlagData:o,experimentsData:c,miscBootData:l}=t,d=Object(Pa.a)({},o,n);Object(u.b)().info("BOOT","(".concat(s.id,") Dispatching boot data")),e.dispatch(Object(f.s)(Mr({},d,{},l))),e.dispatch(Object(h.a)(c)),r&&r.all&&e.dispatch(Object(h.d)(r.all)),r&&r[s.id]&&e.dispatch(Object(h.d)(r[s.id])),e.dispatch(Ce(t)),l.welcomePlaceOnboardingData&&e.dispatch(Object(gn.h)(Mr({},l.welcomePlaceOnboardingData,{lastUsedLocale:Object(Ir.f)()})));var p="";if(l.shouldStartJoinerOnboarding&&(l.welcomePlaceOnboardingData?p="learning-slack":s.onboarding_channel_id&&(p=s.onboarding_channel_id)),p){var m=a&&a.params||{};e.dispatch(Object(Ve.e)({routeName:Oa.a,params:Mr({},m,{entityId:p})}))}else if(i&&i.messagesData){var{messagesData:b,membersData:_,botsData:g}=i,v=b.channelId,O=Mr({},b,{msgs:e.dispatch(Object(pr.a)({imsgs:b.msgs,channelId:v}))});if(e.dispatch(Object(he.a)({members:_})),e.dispatch(Object(dr.a)({bots:g})),e.dispatch(Object(ur.a)(O)),_&&_.length&&e.dispatch(Object(Fe.f)({ids:_.map(e=>e.id),fetchConditionally:!1})).then(function(){var{members:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.dispatch(Object(he.a)({members:t}))}),d.feature_channel_actions_client&&i.channelActionsData&&e.dispatch(Object(br.d)(i.channelActionsData)),!Object(Ve.f)(e.getState())){var y=a&&a.routeName,C=a&&a.params||{};e.dispatch(Object(Ve.e)({routeName:a&&y!==Pn.a?y:Oa.a,params:Mr({},C,{entityId:b.channelId})}))}}else e.dispatch(Object(Ve.e)({routeName:a.routeName,params:a.params}));return l.teamCreationWorkflow&&e.dispatch(Object(mr.F)(l.teamCreationWorkflow)),l.shouldStartCreatorOnboarding?e.dispatch(Object(hr.a)(!0)):l.shouldStartJoinerOnboarding&&(l.welcomePlaceOnboardingData&&e.dispatch(Object(gn.b)()),e.dispatch(Object(hr.e)(s.onboarding_channel_id)),e.dispatch(kr())),Object(za.e)(e.getState())&&t.channelsPrefsData&&e.dispatch(Object(Sr.a)(t.channelsPrefsData)),e.dispatch(Pr()),e}var Rr=a("SZMM");function Dr(e){Object(et.c)(e,"openGantryApp",function(){return Object(C.dispatchForTeamId)(e,Object(Rr.f)(...arguments))})}a.d(t,"middlewares",function(){return Fr}),a.d(t,"getTracer",function(){return lr.b}),a.d(t,"startWorkspaceSignIn",function(){return Je.startWorkspaceSignIn}),a.d(t,"configureStore",function(){return Me}),a.d(t,"dispatchBootData",function(){return xr}),a.d(t,"getClientStoreInstance",function(){return C.getClientStoreInstance}),a.d(t,"getStoreInstanceByTeamId",function(){return C.getStoreInstanceByTeamId}),a.d(t,"processStoredState",function(){return _t}),a.d(t,"getImmediatelyPersistedState",function(){return ft.c}),a.d(t,"checkForPersistenceMethodChanges",function(){return lt}),a.d(t,"getWindow",function(){return Re.c}),a.d(t,"loadAppActions",function(){return De.a}),a.d(t,"maybeReloadEmoji",function(){return i.c}),a.d(t,"maybeReloadSlashCommands",function(){return _e.c}),a.d(t,"fetchAndUpsertWhatsNewUpdates",function(){return Ue.b}),a.d(t,"localesEnabled",function(){return He.l}),a.d(t,"getLocaleFeatureFlags",function(){return f.g}),a.d(t,"resetCredentials",function(){return v.g}),a.d(t,"queryStringParse",function(){return _.m}),a.d(t,"removeUrlQueryStringValue",function(){return _.n}),a.d(t,"populateTeamDebugger",function(){return Dr}),a.d(t,"purgeStoredModel",function(){return vt.a}),a.d(t,"reducers",function(){return n}),a.d(t,"setLocalConfigForTeamWithKey",function(){return v.i}),a.d(t,"setWindow",function(){return Re.k}),a.d(t,"setWorkspaceBooted",function(){return S.setWorkspaceBooted}),a.d(t,"setWillNavigateToUnbootedWorkspaceId",function(){return S.setWillNavigateToUnbootedWorkspaceId}),a.d(t,"getWillNavigateToUnbootedWorkspaceId",function(){return I.getWillNavigateToUnbootedWorkspaceId}),a.d(t,"hasWorkspaceFailedToBoot",function(){return I.hasWorkspaceFailedToBoot}),a.d(t,"isWorkspaceMigrating",function(){return I.isWorkspaceMigrating}),a.d(t,"setWorkspaceFailedToBoot",function(){return S.setWorkspaceFailedToBoot}),a.d(t,"setWorkspaceIsMigrating",function(){return S.setWorkspaceIsMigrating}),a.d(t,"setWorkspaceIsAccessLimited",function(){return S.setWorkspaceIsAccessLimited}),a.d(t,"start",function(){return P.j}),a.d(t,"initPersistenceForTeam",function(){return xe.b}),a.d(t,"upsertMembers",function(){return he.a}),a.d(t,"fetchRawMembersById",function(){return Fe.f}),a.d(t,"getMembersById",function(){return Le.g}),a.d(t,"setBootType",function(){return Re.i}),a.d(t,"getTelemeter",function(){return M.c}),a.d(t,"isJsPath",function(){return A.o}),a.d(t,"mountClient",function(){return Ke.a}),a.d(t,"maybeCountServiceWorkerNetworkStackFailureRefresh",function(){return Be.b}),a.d(t,"maybeReloadForMinVersionBumpFromApi",function(){return Pt}),a.d(t,"maybeReloadForMinVersionBumpFromBootData",function(){return At}),a.d(t,"getRouteName",function(){return Ve.b}),a.d(t,"getRouteParams",function(){return Ve.c}),a.d(t,"updateCurrentRoute",function(){return Ve.e}),a.d(t,"navigateToRoute",function(){return w.g}),a.d(t,"getCurrentRouteInfo",function(){return w.e}),a.d(t,"createDesktopDelegate",function(){return H.a}),a.d(t,"registerServiceWorker",function(){return ze.d}),a.d(t,"overrideExperimentAssignments",function(){return h.d}),a.d(t,"initializeWorkspacesStore",function(){return S.initialize}),a.d(t,"configureClientStore",function(){return fa}),a.d(t,"registerRouteListeners",function(){return Fn}),a.d(t,"getAllWorkspacesFromLocalConfig",function(){return Ln.a}),a.d(t,"getWorkspacesMetaFromLocalConfig",function(){return y}),a.d(t,"getLocale",function(){return We.a}),a.d(t,"setLocale",function(){return We.c}),a.d(t,"loadEmojiTranslations",function(){return qe.a}),a.d(t,"saveColorsToLocalConfig",function(){return Un.a}),a.d(t,"connectSocket",function(){return Ye.b}),a.d(t,"isReload",function(){return A.u}),a.d(t,"createInstanceForTeam",function(){return Bn.a}),a.d(t,"isQa",function(){return A.t}),a.d(t,"isDev",function(){return A.l}),a.d(t,"isProduction",function(){return A.s}),a.d(t,"getDesktopPreloadTime",function(){return wt.d}),a.d(t,"storeSSBMemoryStatsOnAnInterval",function(){return rr}),a.d(t,"storeReduxStoreStatsOnAnInterval",function(){return sr}),a.d(t,"registerGlobalErrorHandler",function(){return jt}),a.d(t,"registerGlobalBeforeunloadHandler",function(){return St}),a.d(t,"registerNetworkConnectivityListener",function(){return Hn.a}),a.d(t,"forceColdBoot",function(){return It.a}),a.d(t,"clearAllPersistedDataExceptForTeamIds",function(){return cr.a}),a.d(t,"setShouldLogTTUMetrics",function(){return Ge.c}),a.d(t,"setShouldLogAppBootMetrics",function(){return Ge.b}),a.d(t,"isServiceWorkerAvailable",function(){return A.x}),a.d(t,"fetchApiCallsForCaching",function(){return ir}),a.d(t,"ttiPolyfill",function(){return s.a}),a.d(t,"listenForLongTasks",function(){return or}),a.d(t,"getGenericTelemeter",function(){return M.a});var Fr=Object(o.a)(c.a)},Oxmb:function(e,t,a){},P1uz:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n={CHANNEL:0,DM:1,MPDM:2,THREAD:3,ALL_UNREAD:4,ALL_THREADS:5,SEARCH:6}},P5pr:function(e,t,a){},PIS5:function(e,t,a){},PQ52:function(e,t,a){},PRpv:function(e,t,a){},PhaV:function(e,t,a){},Pl1I:function(e,t,a){"use strict";var n=a("ifKl"),r=(a("aK/h"),a("q1tI")),s=a.n(r),i=a("MnCE"),o=a("nNoG"),c=a("s19S"),l=a("Atrf"),d=new o.b("app_card"),p={appType:void 0,memberId:void 0,appHomeTeamDisplayName:void 0,appName:"this app",installerIsYou:!1,onMemberClick:n.a,featureAddAppHomeTeamName:!1};function u(e){var t,{appType:a,memberId:n,appName:r,isError:i,installerIsYou:o,onMemberClick:p,appHomeTeamDisplayName:u,featureAddAppHomeTeamName:h}=e;if(o)t=d.rt("You added {appName} to this workspace.",{appName:r});else{var m=s.a.createElement(l.a,{id:n,onClick:e=>{e.preventDefault(),Object(c.i)(n),p()}});t=u&&h?d.rt("{appName} is installed on {appHomeTeamDisplayName}.",{appHomeTeamDisplayName:u,appName:r}):"custom_integration"===a?d.rt("{installer} added this custom integration to this workspace.",{installer:m,appName:r}):"slack"===a?d.rt("{installer} configured {appName} to post in this channel.",{installer:m,appName:r}):d.rt("{installer} added {appName} to this workspace.",{installer:m,appName:r})}return i?null:s.a.createElement("div",{className:"p-app_profile_card__installation_summary","data-qa":"app_card_installation_summary"},s.a.createElement("span",{"data-qa-app-profile-card-installation-summary":!0},t))}u.defaultProps=p,t.a=Object(i.a)(u)},"Q/6m":function(e,t,a){"use strict";a.d(t,"b",function(){return E});var n=a("wx14"),r=a("rePB"),s=a("ifKl"),i=a("q1tI"),o=a.n(i),c=a("aK/h"),l=a("XHGt"),d=a("TSYQ"),p=a.n(d),u=a("h0LD"),h=a("0wDQ"),m=a("pfyZ"),b=a("hOQf"),_=a("lfjV"),g=a("EHyS"),f=a("HOOb");a("TJrU");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var O=Object(i.createContext)(s.a),y=3e3,C=200,j={msg:void 0,className:void 0,hover:!0,onClick:s.a,highlight:void 0,clearHighlight:s.a,children:void 0,isDeleting:void 0,removeMessageAndTimestamp:s.a,logMessage:c.default.func};class MessageBackground extends i.PureComponent{constructor(e){super(e),this.setBackground=this.setBackground.bind(this),this.onClick=this.onClick.bind(this),this.onDeleteAnimationEnd=this.onDeleteAnimationEnd.bind(this),this.onDeleteAnimationTick=this.onDeleteAnimationTick.bind(this),this.highlightTimer=null,this.state={},this.ref=o.a.createRef()}componentDidMount(){this.props.highlight&&this.startHighlightTimer(),this.props.isDeleting&&this.onDeleteAnimationEnd()}componentDidUpdate(e){!e.highlight&&this.props.highlight&&this.startHighlightTimer(),!e.isDeleting&&this.props.isDeleting&&this.startDeleteAnimation()}componentWillUnmount(){this.highlightTimer&&(clearTimeout(this.highlightTimer),this.props.clearHighlight()),this.deleteAnimation&&(this.deleteAnimation.cancel(),this.onDeleteAnimationEnd())}onClick(e){var{msg:t}=this.props;e.shiftKey&&Object(g.a)(e)&&!Object(f.a)(e.target)&&(e.preventDefault(),this.props.logMessage({channelId:t.channel,ts:t.ts})),this.props.onClick(e)}onDeleteAnimationEnd(){var{msg:e}=this.props;this.props.removeMessageAndTimestamp({channelId:e.channel,ts:e.ts}),this.deleteAnimation=null}onDeleteAnimationTick(e){var{value:t,nextTick:a}=e;this.setState(()=>({height:t}),a)}setBackground(e){this.setState(t=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({},t,{},e))}startDeleteAnimation(){var e=this.ref.current&&this.ref.current.clientHeight||0;this.deleteAnimation=Object(_.a)({fromValue:e,toValue:0,duration:C,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}startHighlightTimer(){this.highlightTimer&&clearTimeout(this.highlightTimer),this.highlightTimer=setTimeout(()=>{this.highlightTimer=null,this.props.clearHighlight()},y)}render(){var{height:e}=this.state,t="number"==typeof e?{height:e}:null,a=p()("c-message_kit__background",{"c-message_kit__background--hovered":this.props.hover&&this.state.hover,"c-message_kit__background--labels":this.state.labels,["c-message_kit__background--labels--".concat(this.state.labels)]:this.state.labels,"c-message_kit__background--editing":this.state.editing,"c-message_kit__background--highlight":this.props.highlight,"c-message_kit__background--deleting":this.props.isDeleting},this.props.className);return o.a.createElement(O.Provider,{value:this.setBackground},o.a.createElement("div",{role:"document",className:a,ref:this.ref,style:t,onClick:this.onClick,"data-qa":"message_container","data-qa-unprocessed":Object(b.xb)(this.props.msg),"data-qa-placeholder":this.props.msg&&Object(b.tb)(this.props.msg.ts),"data-qa-label":this.state.labels},this.props.children))}}MessageBackground.defaultProps=j;function E(e){return function(t){return o.a.createElement(O.Consumer,null,a=>o.a.createElement(e,Object(n.a)({},t,{setBackground:a})))}}t.a=Object(l.b)(function(e,t){var{msg:a}=t,n=!1;return a&&(n=Object(m.e)(e,{channelId:a.channel,ts:a.ts}).isDeleting),{isDeleting:n}},e=>({removeMessageAndTimestamp:t=>e(Object(h.a)(t)),logMessage:t=>e(Object(u.a)(t))}))(MessageBackground)},Q2Pv:function(e,t,a){},Q3H4:function(e,t,a){},Q3oM:function(e,t,a){"use strict";a.d(t,"b",function(){return h});var n=a("wx14"),r=a("ifKl"),s=a("q1tI"),i=a.n(s),o=(a("aK/h"),a("TSYQ")),c=a.n(o),l=a("ubOb"),d=a("Q/6m"),p=Object(s.createContext)({hover:!1,setHover:r.a}),u={className:null,children:void 0,hovered:!1,setBackground:r.a,"data-qa":void 0,hasKeyboardFocus:!1,hasKeyboardFocusWithin:!1,onFocus:r.a,onBlur:r.a};class MessageHover extends s.PureComponent{constructor(e){super(e),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMutation=this.onMutation.bind(this),this.setHover=this.setHover.bind(this),this.hoveredElement=null,this.mutationObserver=null,this.state={hoverCount:0,hover:!1}}componentDidMount(){this.setBackground()}componentDidUpdate(){this.setBackground()}componentWillUnmount(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}onMouseOver(e){var{target:t,currentTarget:a,relatedTarget:n}=e;a.contains(t)&&(a.contains(n)||(this.setHover(!0),this.mutationObserver||(this.mutationObserver=new MutationObserver(this.onMutation),this.mutationObserver.observe(a,{childList:!0,subtree:!0}))),this.hoveredElement=t)}onMouseOut(e){var{target:t,currentTarget:a,relatedTarget:n}=e;a.contains(t)&&this.hoveredElement&&(a.contains(n)||(this.setHover(!1),this.hoveredElement=null,this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)))}onMutation(e){e.some(e=>Array.from(e.removedNodes).some(e=>e.contains(this.hoveredElement)))&&(this.hoveredElement=null,this.setHover(!1))}setHover(e){this.setState(t=>{var a=Math.max(0,t.hoverCount+(e?1:-1));return{hoverCount:a,hover:a>0}})}setBackground(){this.props.setBackground({hover:this.isHovered()})}isHovered(){var e=this.props.hovered||this.state.hover,t=this.props.hasKeyboardFocus||this.props.hasKeyboardFocusWithin;return e||t}render(){var e=this.isHovered(),t=c()("c-message_kit__hover",{"c-message_kit__hover--hovered":e},this.props.className),{"data-qa":a}=this.props;return i.a.createElement(p.Provider,{value:{hover:e,setHover:this.setHover}},i.a.createElement("div",{role:"document",className:t,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onFocus:this.props.onFocus,onBlur:this.props.onBlur,"data-qa":a,"data-qa-hover":"true"},this.props.children))}}function h(e){return function(t){return i.a.createElement(p.Consumer,null,a=>{var{hover:r,setHover:s}=a;return i.a.createElement(e,Object(n.a)({},t,{hover:r,setHover:s}))})}}MessageHover.defaultProps=u,t.a=Object(d.b)(Object(l.a)(MessageHover))},QSlP:function(e,t,a){},QkOX:function(e,t,a){"use strict";var n=a("wx14"),r=a("hbEN"),s=a("ifKl"),i=a("q1tI"),o=a.n(i),c=a("XHGt"),l=a("ANjH"),d=(a("aK/h"),a("nNoG")),p=a("kOzZ"),u=a("za+y"),h=a("O5cs"),m=a("qPro"),b=new d.b("apps_browser"),_={isAppLauncher:!1,forwardedRef:void 0,searchAppsIfNeeded:s.a,setSearchInput:s.a,isLoading:!1,searchInput:"",className:""};class AppsBrowserFilter extends i.Component{constructor(e){super(e),this.handleSearchInputChange=this.handleSearchInputChange.bind(this),this.searchApps=this.searchApps.bind(this),this.debouncedSearchApps=Object(r.a)(this.searchApps,300)}handleSearchInputChange(e){var t="";e.target.value&&(t=e.target.value),""===t.trim()&&(t=t.trim()),t!==this.props.searchInput&&(this.props.setSearchInput({searchInput:t}),this.debouncedSearchApps(t))}searchApps(e){var{clogger:t,isAppLauncher:a}=this.props;e.length>0&&t.track("APP_INDEX_SEARCH"),this.props.searchAppsIfNeeded({isAppLauncher:a,searchInput:e})}render(){var{isLoading:e,searchInput:t,forwardedRef:a,className:n}=this.props;return o.a.createElement(m.a,{ref:a,className:n,placeholder:b.t("Search by name or category (e.g. productivity, sales)"),icon:"search",autoFocus:!0,isLoading:e,onChange:this.handleSearchInputChange,value:t,"data-qa":"apps_browser__filter_input",inputAriaLabel:b.t("Search apps by name or category (e.g. productivity, sales)",{fallbackHash:"34fa4221db1bf66f5b9f47b2cb2e449c97fc453d"})})}}AppsBrowserFilter.defaultProps=_;var g=Object(c.b)(e=>({clogger:Object(p.a)({state:e}),isLoading:Object(h.m)(e),searchInput:Object(h.s)(e)}),e=>Object(l.b)({searchAppsIfNeeded:u.i,setSearchInput:u.v},e))(AppsBrowserFilter);t.a=o.a.forwardRef((e,t)=>o.a.createElement(g,Object(n.a)({},e,{forwardedRef:t})))},Qsz7:function(e,t,a){},Qv4Q:function(e,t,a){"use strict";var n,r=a("W3KZ"),s=a("X6iR"),i=a("OZf9"),o=a("IzLi"),c=a("gSGL"),l=a("fujP"),d=a("rWF5"),p=e=>{var t={},a={},n=Object(d.q)()?"apple":"google";Object(i.a)(e,(e,r)=>{var i;r&&(Object(s.a)(e,"alias:")?t[r]=e.slice("alias:".length):(Object(c.a)(e)?i=e:Object(o.a)(e)&&(i=e[n]),i&&(a[r]=i)))});var r={};return Object(l.a)(a)||(r.emojis=a),Object(l.a)(t)||(r.aliases=t),r},u=a("eK75"),h=a("LAi+"),m=()=>{if(n)return n;var e=Object(u.a)().source;return n=new RegExp("^(\\+|\uff0b|-|\uff0d) {0,1}(".concat(e,")\\s*$"))},b=a("WVKS"),_=a("aLpA"),g=/[-[\]{}()*+?.,\\^$|#\s]/g,f=/\n?(6\)|7\))/,v=e=>{var t=0,a=[],n=e.replace(Object(h.a)(),(n,r,s,i)=>{var o=t;t=i+n.length;var c=-1!==s.indexOf("("),l=-1!==s.indexOf(")");if((c||l)&&-1===a.indexOf(s)&&a.push(s),l&&!c){var d=e.substring(o,i);if(-1!==d.indexOf("(")&&-1===d.indexOf(")"))return n}if("\n8)"===n){var p=e.substring(0,i);if(f.test(p))return n}return _.l[s]?"".concat(r,":").concat(_.l[s],":"):n});if(a.length){var r=a.map(e=>e.replace(g,"\\$&")),s=new RegExp("(\\(.+)(".concat(r.join("|"),")(.+\\))"),"g");n=n.replace(s,(e,t,a,n)=>_.l[a]?"".concat(t,":").concat(_.l[a],":").concat(n):e)}return n},O=a("yHhI"),y=e=>{if(!Object(c.a)(e))return null;try{var t=e.split("-").map(e=>"0x".concat(e));return String.fromCodePoint(...t)}catch(a){Object(O.b)().info("Error converting unicode sequence to native emoji: ",a)}return null},C=a("nKoU"),j=a("bPB8"),E=e=>{if(!Object(c.a)(e))return null;var t=[...e].map(e=>{var t=e.codePointAt(0);if(!t)return null;var a=t.toString("16");return Object(C.a)(a,4,"0")});return Object(j.a)(t).join("-")};a.d(t,"g",function(){return r.a}),a.d(t,"i",function(){return p}),a.d(t,"c",function(){return u.a}),a.d(t,"d",function(){return h.a}),a.d(t,"f",function(){return m}),a.d(t,"e",function(){return b.a}),a.d(t,"h",function(){return v}),a.d(t,"b",function(){return y}),a.d(t,"a",function(){return E})},Qwh8:function(e,t,a){},"R//h":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("XHGt")),i=a("/Rx2"),o=a("RQI5"),c=e=>r.a.createElement(o.a.Provider,{value:e.userAttentionIsOnChat},e.children);c.defaultProps={userAttentionIsOnChat:!0};t.a=Object(s.b)(e=>({userAttentionIsOnChat:Object(i.e)(e)}))(c)},RHBl:function(e,t,a){},RJyz:function(e,t,a){},"RQ+B":function(e,t,a){},RQI5:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n);t.a=r.a.createContext(!0)},"RX/a":function(e,t,a){"use strict";var n=a("ifKl"),r=a("aK/h"),s=a("q1tI"),i=a.n(s),o=a("tn36"),c=a("TSYQ"),l=a.n(c),d=a("wx14"),p=a("XHGt"),u=a("M4HD"),h=a("MMa9"),m=a("1zbP"),b=a("AE1P"),_=a("7ajy"),g=a("V/As"),f=a("Rrdp"),v=a("ukeO"),O=a("/3PZ"),y=a("A+cF"),C=a("od5y"),j=a("kd6D"),E=(a("yPgC"),a("KrOh"),j.a.small),k={className:void 0,isDeactivated:!1,invert:!1};function S(e){var t,a,{className:n,app:r,action:s,isDeactivated:o,invert:c}=e,l=c&&!o,p=Object(m.b)(s)?Object(h.a)(s):null;if(Object(m.b)(r)&&Object(m.b)(s)){t=Object(u.b)(r);var b=Object(g.b)(r,E);a=(e=>i.a.createElement(v.a,Object(d.a)({},e,{classes:e.className,image:b,ariaHidden:!0})))}else t=i.a.createElement(f.a,{type:Object(m.d)(r)?"unknown":"non-existent",invert:l}),a=(e=>i.a.createElement(O.a,Object(d.a)({},e,{isNonExistent:Object(m.c)(r),size:E,subtler:o,invert:l})));var _=o&&!c?j.c.dim:null;return i.a.createElement(y.d,{avatar:e=>i.a.createElement("span",{className:"c-app_action_entity__avatar_container"},a(e),i.a.createElement(C.b,{type:"bolt-filled",className:"c-app_action_entity__bolt_icon",size:"inherit"})),className:n,size:"small",style:_,text:i.a.createElement("span",null,i.a.createElement("span",{className:"c-app_action_entity__app_label","data-qa":"action_entity_app_label"},t),p?i.a.createElement("span",{className:"c-app_action_entity__action_label","data-qa":"action_entity_action_label"},p):null)})}S.defaultProps=k;var I=Object(p.b)((e,t)=>{var{app:a,appId:n,action:r,actionId:s}=t;return{app:a||Object(b.e)(e,n),action:r||Object(_.b)(e,{appId:n,actionId:s})}})(S),w=(r.default.string.isRequired,r.default.number.isRequired,r.default.object.isRequired,r.default.bool.isRequired,r.default.func,r.default.func.isRequired,r.default.func.isRequired,{onDelete:n.a}),T=i.a.forwardRef((e,t)=>{var{id:a,index:n,isSelected:r,suggestion:s,onMouseUp:o,onMouseMove:c}=e,{suggestion_replacement:d,exact_string:p,featureVector:u}=s,h=e.suggestion.app_action;return i.a.createElement("li",{ref:t,"data-index":n,"data-type":s.type,"data-replacement":d,"data-exact-string":p,"data-feature-vector":u,"data-is-action":!0,"data-id":h.id,id:a,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:c,onClick:o,className:l()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},i.a.createElement(I,{actionId:h.id,appId:h.app_id,className:"c-search_autocomplete__app_action",isActive:r}))});T.defaultProps=w;var N=T,P=a("vPEJ"),A=a("6kok"),M=a("Fdc0"),x={unreadCount:void 0};class unread_count_UnreadCount extends s.PureComponent{render(){var{unreadCount:e}=this.props;if(!e)return null;var t=e<10?e:"9+";return i.a.createElement("span",{className:"c-search_autocomplete__unread_count"},t)}}unread_count_UnreadCount.defaultProps=x;var R=Object(p.b)(function(e,t){var{model:a}=t;return{unreadCount:Object(M.yb)(a)?Object(M.s)(e,a):Object(A.o)(a)}})(unread_count_UnreadCount),D=a("nNoG"),F=a("oiAH"),L=new D.b("jumper"),U=i.a.forwardRef((e,t)=>{var{id:a,index:n,isSelected:r,suggestion:s,onMouseUp:o,onMouseMove:c,hasChannelNameCollision:d}=e,{suggestion_replacement:p,exact_string:u,featureVector:h}=s,m=s.channel||s.mpim,b=e.suggestion.channel&&e.suggestion.channel._jumper_previous_name_match,_=Object(A.nb)(s.channel),g=s.channel&&!_&&!Object(A.X)(m),f=Object(A.pb)(m),v=f&&Object(A.X)(m),O=e.suggestion.display_context&&e.suggestion.display_context.subqueryScoresByMember;return i.a.createElement("li",{ref:t,"data-index":n,"data-type":s.type,"data-replacement":p,"data-exact-string":u,"data-feature-vector":h,"data-is-navigational":!0,"data-id":m.id,id:a,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:c,onClick:o,className:l()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},f?i.a.createElement(F.a,{id:m.id,isActive:r,isDeactivated:v,matchData:O,useCarpeMPDM:!0}):i.a.createElement(P.a,{className:"c-search_autocomplete__channel",channel:m,channelId:m.id,showDraftIcon:_,inline:!0,showTeamIconForXwsChannels:!0,showTeamIconForLocalChannels:d,showArchived:!0,previousName:b}),g&&i.a.createElement("span",{className:"c-search_autocomplete__channel-membership"},L.t("Not a member",{fallbackHash:"28de8887932845dddf7c04d15831c5780b353820"})),i.a.createElement(R,{model:m}))});U.defaultProps=w;var B=U,H=a("lek6"),W=i.a.forwardRef((e,t)=>{var{id:a,index:n,isSelected:r,suggestion:s,onMouseUp:o,onMouseMove:c}=e,{suggestion_replacement:d,exact_string:p,featureVector:u,file:h}=s;return i.a.createElement("li",{ref:t,"data-index":n,"data-type":s.type,"data-replacement":d,"data-exact-string":p,"data-feature-vector":u,"data-id":h.id,"data-is-navigational":!0,key:h.id,id:a,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:c,onClick:o,className:l()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},i.a.createElement(C.b,{file:"tiny",type:e.suggestion.type,className:"c-search_autocomplete__icon  c-search_autocomplete__icon--file"}),i.a.createElement("div",{className:"c-search_autocomplete__filetype_title"},i.a.createElement(H.a,{text:h.title,noLinking:!0,noSpecials:!0,doInlineImages:!1,noJumbomoji:!0,noHighlights:!0,noHexColors:!0,noCode:!0,noQuotes:!0})),i.a.createElement("div",{className:"c-search_autocomplete__filetype_description"},e.suggestion.fileTypeDescription))});W.defaultProps=w;var q=W,G=a("rePB"),K=a("xWuZ"),V=a("OqoL"),z=a("5mKg"),Y=a("1hAG"),Q=a("Lev8"),X=a("XLFM"),J=a("Rjjz"),Z=a("hPzE"),$=new D.b("search"),ee={onDelete:n.a};class delete_Delete extends s.PureComponent{constructor(e){super(e),Object(o.a)(this,["onClick"])}onClick(e){e.stopPropagation(),this.props.searchDelete({hash:this.props.queryHash,searchSessionId:this.props.searchSessionId,querySessionId:this.props.querySessionId}).then(()=>{this.props.onDelete()})}render(){return i.a.createElement("div",{className:"c-search_autocomplete__suggestion_action"},i.a.createElement(X.c,{className:"c-search_autocomplete__suggestion_delete",onClick:this.onClick,label:$.t("delete history result")},i.a.createElement(C.b,{type:"times_small",inline:!0})))}}delete_Delete.defaultProps=ee;var te=Object(p.b)(null,e=>({searchDelete:function(){return e(Object(J.q)(...arguments))},querySessionId:e(Object(Z.f)()),searchSessionId:e(Object(Z.g)())}))(delete_Delete),ae=a("rWF5"),ne=new D.b("search");class suggestion_query_user_filter_SuggestionQueryUserFilterBase extends s.PureComponent{render(){var e,{user:t,fullNameOrDisplayName:a,filter:n}=this.props,r=Object(M.Gb)(t),s=Object(M.tb)(t),o=Object(M.mb)(t),c=Object(M.kb)(t),d=Object(ae.n)();e="from"===n?"".concat(ne.t("from"),":"):"to"===n?"".concat(ne.t("to"),":"):null;var p={backgroundImage:"url(".concat(d?t.profile.image_48:t.profile.image_24,")")};return i.a.createElement("span",{className:l()("token","member_token",{ra:r,external_member:s,deleted:o}),"data-member-id":t.id},i.a.createElement("span",{className:l()({bot:c,member_preview_link:!c},"member_image","thumb_24"),"data-member-id":t.id,"data-thumb-size":"24",style:p,"aria-hidden":"true"})," ",i.a.createElement("span",{className:"token_label"},e,i.a.createElement("b",null,"@",a)))}}suggestion_query_user_filter_SuggestionQueryUserFilterBase.defaultProps={filter:void 0};var re=Object(p.b)((e,t)=>{var{user:a}=t;return{fullNameOrDisplayName:Object(M.V)(e,a)}})(suggestion_query_user_filter_SuggestionQueryUserFilterBase),se=a("hCvz"),ie=a("G4ux"),oe=a("4M+g"),ce=new D.b("search");class suggestion_query_in_filter_SuggestionQueryInFilterBase extends s.PureComponent{render(){var{channel:e,displayName:t,fallbackName:a,isUnknown:n,isNonExistent:r}=this.props,o=ce.t("in:");return n?i.a.createElement(se.b,{size:"random"}):i.a.createElement("span",{className:"token channel_token"},i.a.createElement("span",{className:"token_label"},r&&"".concat(o).concat(a),!r&&!t&&"".concat(o).concat(a),!r&&t&&i.a.createElement(s.Fragment,null,o,Object(A.Bb)(e)&&i.a.createElement(C.b,{type:"lock",size:"inherit"}),Object(A.Cb)(e)&&i.a.createElement(C.b,{type:"channel",size:"inherit"}),i.a.createElement("b",null,t),Object(A.ab)(e)&&!Object(A.yb)(e)&&i.a.createElement(C.b,{type:"shared-channels-baseline",size:"inherit",className:"token_label_icon--suffix"}),Object(A.ab)(e)&&Object(A.yb)(e)&&i.a.createElement(C.b,{type:"shared-channels-baseline-pending",size:"inherit",className:"token_label_icon--suffix"}),Object(A.vb)(e)&&i.a.createElement(C.b,{type:"shared-channel",size:"inherit",className:"token_label_icon--suffix"}))))}}suggestion_query_in_filter_SuggestionQueryInFilterBase.defaultProps={fallbackName:"",displayName:void 0,channel:void 0,isUnknown:!1,isNonExistent:!1};var le=Object(p.b)((e,t)=>{var{member:a,channel:n,fallbackName:r}=t,s="",i=!1,o=!1;if(a){var c=Object(ie.d)(e,a.id);i=Object(M.Ob)(c),o=Object(M.Bb)(c),s=i||o?"":"@".concat(Object(M.V)(e,c))}else if(n){var l=Object(oe.e)(e,n.id);i=Object(A.Mb)(l),o=Object(A.rb)(l),s=i||o?"":Object(A.w)(e,l,{publicChannelIncludeHashSign:!1})}return{fallbackName:r,displayName:s,isUnknown:i,isNonExistent:o}})(suggestion_query_in_filter_SuggestionQueryInFilterBase);le.propTypes={member:r.default.object,fallbackName:r.default.string},le.defaultProps={member:void 0,fallbackName:""};var de=le,pe=a("n3t6"),ue=new D.b("search"),he=e=>{var{theAttribute:t}=e;return i.a.createElement("span",{className:"token has_token"},i.a.createElement("span",{className:"token_label"},ue.t("has"),":",i.a.createElement("b",null,i.a.createElement(H.a,{text:Object(pe.a)(t),noLinking:!0,noSpecials:!0,doInlineImages:!1,noJumbomoji:!0,noHighlights:!0,noHexColors:!0,noCode:!0,noQuotes:!0}))))},me=new D.b("search"),be=e=>{var{fileType:t}=e;return i.a.createElement("span",{className:"token type_token"},i.a.createElement("span",{className:"token_label"},me.t("type"),":",i.a.createElement("b",null,t)))},_e=a("uwE/"),ge=e=>{var{modifierName:t,dateString:a}=e;return i.a.createElement("span",{className:"token date_token"},i.a.createElement("span",{className:"token_label"},Object(_e.f)()[t],": ",a))};function fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var ve=new D.b("search");var Oe=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(a),!0).forEach(function(t){Object(G.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fe(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},w,{orgName:"",teamName:"",clientTheme:"light"}),ye=i.a.forwardRef((e,t)=>{var{id:a,index:n,isSelected:r,suggestion:s,onDelete:o,onMouseUp:c,onMouseMove:d,teamName:p,orgName:u,clientTheme:h}=e,{suggestion_replacement:m,exact_string:b,hash:_,token_list:g,featureVector:f,isCustomDateFilter:v,deletable:O}=s;return i.a.createElement("li",{ref:t,"data-index":n,"data-type":s.type,"data-replacement":m,"data-exact-string":b,"data-feature-vector":f,"data-is-custom-date-filter":v,"data-is-replacement-full":!0,id:a,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:d,onClick:c,className:l()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},i.a.createElement(C.b,{type:"search-medium",className:"c-search_autocomplete__icon c-search_autocomplete__icon--query"}),i.a.createElement("div",{className:"c-search_autocomplete__query_wrapper"},i.a.createElement("span",{className:l()("c-search_autocomplete__query_parts",{["c-search_autocomplete__query_parts--".concat(h)]:"light"!==h})},function(e,t){return Object(K.a)(e.map(e=>[t,e])).slice(1)}(g.map((t,a)=>{switch(!0){case t.is_type_string:return i.a.createElement(H.a,{key:a,text:e.getClnMessage(t.string),noLinking:!0,noSpecials:!0,doInlineImages:!1,noJumbomoji:!0,noHighlights:!0,noHexColors:!0,noCode:!0,noQuotes:!0});case t.is_type_phrase:return"\u201c".concat(t.phrase,"\u201d");case t.is_type_member_filter&&t.is_type_from_filter:return i.a.createElement(re,{key:a,filter:"from",user:t.user});case t.is_type_member_filter&&t.is_type_to_filter:return i.a.createElement(re,{key:a,filter:"to",user:t.user});case t.is_type_member:return i.a.createElement(re,{key:a,user:t.user});case t.is_type_in_filter:return i.a.createElement(de,{key:a,member:t.user,channel:t.channel,fallbackName:t.fallbackName});case t.is_type_has_filter:return i.a.createElement(he,{key:a,theAttribute:t.thing});case t.is_type_type_filter:return i.a.createElement(be,{key:a,fileType:t.file_type});case t.is_type_date_filter:return i.a.createElement(ge,{key:a,modifierName:t.modifier,dateString:t.date_string_normalized});default:return null}})," "))),i.a.createElement("span",{className:"c-search_autocomplete__omniswitcher_hint"},"\u2014"," ",ve.rt("Search {teamName}",{teamName:u||p||""})," "),O&&i.a.createElement(te,{queryHash:_,onDelete:o}))});ye.defaultProps=Oe;var Ce=Object(p.b)(e=>({getClnMessage:t=>Object(V.b)(e,t,{isInternalMessage:!1}),orgName:Object(Y.e)(e)||"",teamName:Object(z.e)(Object(Y.d)(e)),clientTheme:Object(Q.c)(e)}),null,null,{withRef:!0})(ye),je=a("AncD"),Ee=i.a.forwardRef((e,t)=>{var{id:a,index:n,isSelected:r,suggestion:s,onMouseUp:o,onMouseMove:c}=e,{suggestion_replacement:d,exact_string:p,featureVector:u,user:h}=s,m=h&&h.profile&&h.profile.bot_id,b=Object(M.mb)(h);return i.a.createElement("li",{ref:t,"data-index":n,"data-type":s.type,"data-replacement":d,"data-exact-string":p,"data-feature-vector":u,"data-bot-id":m,"data-id":h.id,"data-is-navigational":!0,id:a,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:c,onClick:o,className:l()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},i.a.createElement("span",{className:l()("c-search_autocomplete__member",{"c-search_autocomplete__member--deleted":b})},i.a.createElement(je.a,{id:h.id,size:"small",showPresence:!b,newPresence:!0,showAvatar:!0,isDraftContext:!0,showDeactivatedAnnotation:b})),i.a.createElement(R,{model:h}))});Ee.defaultProps=w;var ke=Ee,Se=a("ndUn"),Ie=i.a.forwardRef((e,t)=>{var{id:a,index:n,isSelected:r,suggestion:s,onMouseUp:o,onMouseMove:c}=e,{suggestion_replacement:d,exact_string:p,featureVector:u}=s,h=e.suggestion.team;return i.a.createElement("li",{ref:t,"data-index":n,"data-type":s.type,"data-replacement":d,"data-exact-string":p,"data-feature-vector":u,"data-is-navigational":!0,"data-id":h.id,id:a,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:c,onClick:o,className:l()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},i.a.createElement(Se.a,{className:"c-search_autocomplete__team",team:h,id:h.id}))});Ie.defaultProps=w;var we=Ie,Te=a("hXpn"),Ne=a("fujP"),Pe=a("ceeJ"),Ae=a("5tH5"),Me=(a("UYtA"),{className:void 0,isDisabled:!1});function xe(e){var{className:t,id:a,isDisabled:n}=e,r=Object(Ae.c)(a)||Object(Pe.a)(a);if(Object(Ne.a)(r))return null;var s=n?j.c.dim:void 0,o="list";return"Vall_threads"===a?o="small-reply":"Vapp_space"===a?o="gn-menu":r.sidebar&&r.sidebar.icon&&(o=r.sidebar.icon),i.a.createElement(y.d,{size:"small",className:l()("c-page_view_entity",t),style:s,avatar:()=>i.a.createElement(C.b,{className:"c-page_view_entity__icon",type:o}),text:i.a.createElement("span",{className:"c-page_view_entity__text"},r.label&&r.label()||r.name)})}xe.defaultProps=Me;var Re=xe,De={className:void 0,isActive:!1,isDisabled:!1,secondaryContent:void 0};function Fe(e){var t,{className:a,id:n,isActive:r,isDisabled:s,secondaryContent:o}=e;return r?t=s?j.c.highlightDim:j.c.highlightDark:s&&(t=j.c.dim),i.a.createElement(Te.a,{size:"small",style:t,className:a,primaryContent:i.a.createElement(Re,{id:n,isDisabled:s}),secondaryContent:o})}Fe.defaultProps=De;var Le=Fe,Ue=i.a.forwardRef((e,t)=>{var{id:a,index:n,isSelected:r,suggestion:s,onMouseUp:o,onMouseMove:c}=e,{suggestion_replacement:d,exact_string:p,featureVector:u}=s,h=e.suggestion.view;return i.a.createElement("li",{ref:t,"data-index":n,"data-type":s.type,"data-replacement":d,"data-exact-string":p,"data-feature-vector":u,"data-is-navigational":!0,"data-id":h.id,id:a,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:c,onClick:o,className:l()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},i.a.createElement(Le,{id:h.id,className:"c-search_autocomplete__view"}))});Ue.defaultProps=w;var Be=Ue;a.d(t,"b",function(){return We});var He={onAccept:n.a,onSelected:n.a,onDelete:n.a,hasChannelNameCollision:!1,listItemRef:void 0},We=e=>"c-search_autcomplete__suggestion_".concat(e);class suggestion_Suggestion extends s.PureComponent{constructor(e){super(e),Object(o.a)(this,["onMouseUp","onMouseMove","onDelete"])}onMouseUp(e){0!==e.button||e.ctrlKey||this.props.onAccept()}onMouseMove(){this.props.isSelected||this.props.onSelected(this.props.index,!0)}onDelete(){this.props.onDelete(this.props.suggestion)}componentClassForSuggestion(e){return e.is_type_query_completion?Ce:e.is_type_user?ke:e.is_type_channel||e.is_type_mpim?B:e.is_type_file?q:e.is_type_view?Be:e.is_type_team?we:e.is_type_app_action?N:null}render(){var e=We(this.props.index),t=this.componentClassForSuggestion(this.props.suggestion);return i.a.createElement(t,{ref:this.props.listItemRef,id:e,index:this.props.index,isSelected:this.props.isSelected,suggestion:this.props.suggestion,onDelete:this.onDelete,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,hasChannelNameCollision:this.props.hasChannelNameCollision})}}suggestion_Suggestion.defaultProps=He;t.a=suggestion_Suggestion},RZqJ:function(e,t,a){},RjVJ:function(e,t,a){"use strict";var n=a("F294"),r=a("XHGt"),s=a("Uk1S"),i=a("fYfO"),o=a("uvIC"),c=a("brL+"),l=a("1hAG"),d=a("hOQf"),p=a("5mKg"),u=a("HvGc"),h=a("a+Oh"),m=a("ifKl"),b=a("TSYQ"),_=a.n(b),g=(a("aK/h"),a("q1tI")),f=a.n(g),v=a("nNoG"),O=a("lek6"),y=a("lwWk"),C=a("u97G"),j=a("2WV3"),E=new v.b("threads"),k={className:null,theme:"light",showThread:m.a,rootFile:void 0,featureRichTextRendering:!1};class thread_broadcast_preamble_ThreadBroadcastPreamble extends g.PureComponent{constructor(e){super(e),this.openThread=this.openThread.bind(this)}openThread(e){var{showThread:t,channelId:a,threadTs:n,ts:r}=this.props;e.preventDefault(),t({channelId:a,threadTs:n,highlightTs:r})}renderRootText(){var{rootMsg:e,rootFile:t,featureRichTextRendering:a}=this.props;if("tombstone"===Object(d.N)(e))return null;if(a&&Object(d.mb)(e)&&!Object(d.pb)(e,a))return f.a.createElement(j.a,{richTextBlock:e.blocks[0]});var n=Object(d.M)(e,t);return n?f.a.createElement(O.a,{text:n,noHighlights:!0,noHexColors:!0,noJumbomoji:!0,noLinking:!0,noCode:!0,noQuotes:!0,customLineEnding:"\u2026",maxNewlines:1}):null}render(){var{rootMsg:e,teamDomain:t,channelId:a,ts:n,threadTs:r,theme:s}=this.props;if(!e)return null;var i,o=Object(d.u)({teamDomain:t,channelId:a,ts:n,threadTs:r}),c=_()("c-message__broadcast_preamble",this.props.className),l=!(!(e&&e.blocks&&e.blocks.length)||Object(d.mb)(e))?null:this.renderRootText();if(l)i=f.a.createElement("div",{className:c},f.a.createElement("span",{"data-qa":"thread-broadcast-preamble-with-text",className:"c-message__broadcast_preamble_meta"},Object(C.a)()),f.a.createElement(y.a,{className:"c-message__broadcast_preamble_link",href:o,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread,dir:"auto"},l));else{var p=E.rt("replied to <a>a thread</a>",null,e=>{var{key:t,text:a}=e;return f.a.createElement(y.a,{className:"c-message__broadcast_preamble_link",key:t,href:o,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread},a)});i=f.a.createElement("div",{className:c},p)}return"light"===s?f.a.createElement("div",{className:"c-message__broadcast_preamble_outer"},i):i}}thread_broadcast_preamble_ThreadBroadcastPreamble.defaultProps=k;var S=thread_broadcast_preamble_ThreadBroadcastPreamble;var I={showThread:u.l};t.a=Object(r.b)(function(e,t){var a,{threadTs:r,channelId:u}=t,m=Object(i.a)(e,u,r);if(!m)return{};if(m.files&&m.files.length){var b=Object(n.a)(m.files);a=Object(o.c)(e,b)}var _=Object(d.V)(m)||Object(c.b)(e),g=Object(l.i)(e,_);return{rootMsg:m,rootFile:a,teamDomain:Object(p.f)(g),theme:Object(s.a)(e),featureRichTextRendering:Object(h.b)(e)}},I)(S)},Rmar:function(e,t,a){},RoDk:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("nNoG")),i=a("z+SX"),o=a("/m+M"),c=new s.b("team"),l={member:void 0};function d(e){var{member:t}=e,{featureModernProfileFlexpane:a}=Object(o.a)();if(!a)return null;var n=c.t("To interact with a person from another organization, you need to be in at least one channel together.");return r.a.createElement("div",{className:"p-member_profile_card__special_text"},r.a.createElement("strong",null,c.rt("You don\u2019t share any channels with {memberName}.",{memberName:r.a.createElement(i.a,{id:t.id})}))," ",n)}d.defaultProps=l,t.a=d},RwR8:function(e,t,a){e.exports=a.p+"messages@2x-8481913.png"},"Rx/r":function(e,t,a){},SAUz:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=(a("aK/h"),a("XHGt")),o=a("TSYQ"),c=a.n(o),l=a("zoXk"),d=a("HvGc"),p=a("UUlk"),u=a("uFGw"),h=a("18Pa"),m={flexName:void 0,flexParams:void 0,flexOrigin:void 0,flexOriginId:void 0,previewFile:n.a,showUserGroupList:n.a,toggleActivityFlexpane:n.a,showMemberDirectory:n.a,showDetails:n.a,showStarredItemsList:n.a,showMemberProfile:n.a,showFileList:n.a,size:"large",className:void 0};class FlexBack extends r.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.getOrigin=this.getOrigin.bind(this),this.openOrigin=this.openOrigin.bind(this)}onClick(){var{flexOrigin:e,flexName:t}=this.props;if(e)return this.openOrigin();switch(t){case"files":return this.props.showFileList();case"team":return this.props.showMemberDirectory();case"groups":case"user_groups":return this.props.showUserGroupList();default:return null}}getOrigin(){var{flexOrigin:e,flexName:t,flexParams:a}=this.props,n=a&&a[0];if(e)return e;switch(t){case"files":return Object(p.a)(n)?"files":null;case"team":case"groups":return Object(u.a)(n)?"groups":null;case"user_groups":return Object(u.a)(n)?"user_groups":null;default:return null}}openOrigin(){var{flexOrigin:e,flexOriginId:t}=this.props;switch(e){case"member_preview":return this.props.showMemberProfile({memberId:t});case"directory":return this.props.showMemberDirectory();case"starred_items":return this.props.showStarredItemsList("stars");case"details":case"channel_page":case"group_page":case"im_page":return this.props.showDetails({sectionId:t});case"activity":case"mentions":return this.props.toggleActivityFlexpane();case"file_details":return Object(p.a)(t)?this.props.previewFile({fileId:t}):this.props.showFileList();case"files":return this.props.showFileList();default:return null}}render(){if(!this.getOrigin())return null;var{size:e,className:t}=this.props,a="chevron-".concat(e,"-left");return s.a.createElement(h.a,{className:c()("p-global_nav__flex_btn","p-global_nav__flex_btn--back",t),icon:a,onClick:this.onClick})}}FlexBack.defaultProps=m;var b={previewFile:d.c,showUserGroupList:d.o,toggleActivityFlexpane:d.q,showMemberDirectory:d.i,showDetails:d.e,showStarredItemsList:d.k,showMemberProfile:d.j,showFileList:d.g};t.a=Object(i.b)((e,t)=>{var{flexOrigin:a}=t;return{flexName:Object(l.j)(e),flexParams:Object(l.e)(e),flexOrigin:a||Object(l.c)(e),flexOriginId:Object(l.d)(e)}},b)(FlexBack)},SHa9:function(e,t,a){"use strict";a.d(t,"a",function(){return MessageList});var n=a("qAkX"),r=a("F294"),s=a("ifKl"),i=a("q1tI"),o=(a("aK/h"),a("YLnb")),c=a("LxWA"),l=250,d={oldest:void 0,latest:void 0,startTs:!1,startTsOffset:0,highlightKey:void 0,requestHistory:s.a,reachedStart:!0,reachedEnd:!0,layout:void 0,isFileExpanding:!1,onVisibleRowsChanged:s.a};class MessageList extends i.PureComponent{constructor(e){super(e),this.onScroll=this.onScroll.bind(this),this.setListRef=this.setListRef.bind(this),this.loadAround=this.loadAround.bind(this),this.loadPre=this.loadPre.bind(this),this.loadPost=this.loadPost.bind(this),this.focus=this.focus.bind(this),this.onListScrolled=this.onListScrolled.bind(this),this.debouncedOnListScrolled=Object(c.a)(this.onListScrolled,150),this.list=null,this.layout=e.layout||new o.a,this.layout.setAnchor(e.startTs),e.startTsOffset&&(this.layout.anchorOffset=e.startTsOffset),this.layout.setStickToBottom(e.reachedEnd),this.state={isLoading:!1}}componentDidUpdate(e){!e.reachedEnd&&this.props.reachedEnd&&this.layout.setAnchor(!1),!!e.isFileExpanding&&!this.props.isFileExpanding?this.layout.setStickToBottom(!1):this.layout.setStickToBottom(this.props.reachedEnd),this.updateVisibleRows()}onListScrolled(){this.updateVisibleRows()}onScroll(){this.layout.setAnchor(!1),this.debouncedOnListScrolled()}getScrollmark(){if(!this.list)return null;var e=this.list.getScrollTop(),t=this.layout.shouldStickToBottom(e),a=this.props.timestamps,n=this.layout.findAnchor(a,a,e);return{mark:n,offset:this.layout.getTop(n)-e,stickToBottom:t}}setListRef(e){this.list=e}UNSAFE_componentWillReceiveProps(e){if(!this.list)throw new Error("MessageList needs a ref to List");(e.startTs!==this.props.startTs||e.highlightKey&&e.highlightKey!==this.props.highlightKey)&&(e.timestamps===this.props.timestamps?this.list.scrollToKey(e.startTs,{lazy:!0}):this.layout.setAnchor(e.startTs))}focus(){this.list&&this.list.focus()}loadAround(){if(this.state.isLoading)return!1;var{oldest:e,latest:t,reachedStart:a,reachedEnd:s,timestamps:i,startTs:o}=this.props;if(s)return this.loadPre();if(a)return this.loadPost();var c=t||Object(r.a)(i)||o,d=e||Object(n.a)(i)||o,p=this.props.requestHistory({latest:c,oldest:d});return p&&(p.finally(()=>Promise.delay(l)).then(()=>this.setState(()=>({isLoading:!1}))),this.setState(()=>({isLoading:"around"}))),p}loadPost(){if(this.state.isLoading)return!1;var{latest:e,reachedEnd:t,timestamps:a,startTs:r}=this.props;if(t)return!1;this.isLoading=!0;var s=e||Object(n.a)(a)||r,i=this.props.requestHistory({oldest:s});return i&&(i.finally(()=>Promise.delay(l)).then(()=>this.setState(()=>({isLoading:!1}))),this.setState(()=>({isLoading:"pre"}))),i}loadPre(){if(this.state.isLoading)return!1;var{oldest:e,reachedStart:t,timestamps:a,startTs:n}=this.props;if(t)return!1;var s=e||Object(r.a)(a)||n,i=this.props.requestHistory({latest:s});return i&&(i.finally(()=>Promise.delay(l)).then(()=>this.setState(()=>({isLoading:!1}))),this.setState(()=>({isLoading:"pre"}))),i}updateVisibleRows(){if(this.list){var{start:e,end:t}=this.list.getVisibleRange(void 0,!1),{start:a,end:n}=this.list.getVisibleRange(void 0,!0);this.props.onVisibleRowsChanged(this.props.timestamps.slice(e,t),this.props.timestamps.slice(a,n))}}render(){var{reachedStart:e,reachedEnd:t,timestamps:a}=this.props;return this.props.listRenderer({reachedStart:e,reachedEnd:t,keys:a,layout:this.layout,onScroll:this.onScroll,loadAround:this.loadAround,loadPre:this.loadPre,loadPost:this.loadPost,ref:this.setListRef})}}MessageList.defaultProps=d},SIr3:function(e,t,a){"use strict";a.d(t,"a",function(){return h}),a.d(t,"b",function(){return m});var n=a("Ff2n"),r=(a("aK/h"),a("q1tI")),s=a.n(r),i=a("MnCE"),o=a("TSYQ"),c=a.n(o),l=a("JoAr"),d=a("J7VK");function p(e){var{isUnread:t}=e,a=Object(n.a)(e,["isUnread"]),r=t?s.a.createElement(d.a,{ghost:a.ghost}):s.a.createElement("hr",{className:"c-message_list__day_divider__line"});return s.a.createElement("div",{className:"c-message_list__day_divider"},r)}function u(e){var{date:t,sticky:a}=e,n=t/1e3,r=Object(l.a)(n,"{day_divider_pretty}"),i=c()("c-message_list__day_divider__label",{"c-message_list__day_divider__label--non_sticky":!a});return s.a.createElement("div",{className:i},s.a.createElement("div",{className:"c-message_list__day_divider__label__pill"},r))}p.defaultProps={isUnread:!1,ghost:!1},u.defaultProps={sticky:!0};var h=Object(i.a)(p),m=Object(i.a)(u)},SKMV:function(e,t,a){},SNtu:function(e,t,a){"use strict";function n(e){var{prevUserAttentionIsOnChat:t,prevComposerVisible:a,currentUserAttentionIsOnChat:n,currentComposerVisible:r}=e;return!(n||!t)||!(a||!r)}a.d(t,"a",function(){return n})},SSpe:function(e,t,a){},SaAd:function(e,t,a){},Sh2I:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("9oTK"),r=a("XfeM"),s=a("7dYf"),i=a("7ob2"),o=Object(r.b)("Completes joiner onboarding",function(){var e=Object(n.coroutine)(function*(e){e(Object(i.b)(!1)),e(Object(i.c)(!1)),e(Object(s.e)({onboarding_complete:!0,seen_welcome_2:!0}))});return function(t){return e.apply(this,arguments)}}());o.meta={name:"completeJoinerOnboarding",key:"onboardingStoreThunksCompleteJoinerOnboardingCompleteJoinerOnboarding",description:"Completes joiner onboarding"}},Sqd7:function(e,t,a){},SwU4:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),s=a("ZBlo"),i=a("fujP"),o=a("hbEN"),c=a("ifKl"),l=a("q1tI"),d=a.n(l),p=a("aK/h"),u=a("XHGt"),h=a("tn36"),m=a("l4bA"),b=a("XfeM"),_=a("CPJ1"),g=a("k2C/"),f=a("7nxQ"),v=a("XL7r"),O=a("eJ6O"),y=a("h9PG"),C=a("Fdc0"),j=a("Fuyg"),E=a("nyjr"),k=Object(b.b)("Fetch and upsert membersIds displayed in member directory flexpane",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{isNonExactMatchMembersSearch:n=!1}=a,s=Object(r.a)(a,["isNonExactMatchMembersSearch"]),i=t(),o=Object(O.a)(i)&&Object(y.a)(i,"display_email_addresses"),c=s.searchQuery||"",l=c.indexOf("@")>0||c.indexOf("\uff20")>0,d=function(){var{searchQuery:e="",marker:t="",index:a="",filter:n=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Object(g.a)(n)||Object(g.b)(n),s={count:e?100:10,index:a,locale:Object(f.f)(),external_team:r?n:void 0,filter:r?"people":n};return e?(s.query=e,s.search_profile_fields=!0):s.marker=t,s}(s);return e(Object(_.d)({query:d})).then(t=>{var{members:a=[],next_marker:r}=t,i=a;if("deactivated"===s.filter&&(i=a.filter(e=>e&&!e.is_bot)),o&&l){var d=Object(j.a)(c);i=a.filter(e=>Object(j.a)(Object(C.v)(e)).startsWith(d))}var p=i.map(e=>e.id);return e(n?Object(m.b)(p):Object(m.a)(p)),r&&e(Object(m.e)(r)),{members:a,nextMarker:r}})});k.meta={name:"listAndUpsertMembers",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneThunksListAndUpsertMembers",description:"Fetch and upsert membersIds displayed in member directory flexpane"},k.propTypes={searchQuery:p.default.string,marker:p.default.string,index:p.default.string,filter:p.default.string,isNonExactMatchMembersSearch:p.default.bool};var S=Object(b.b)("Fetch and upsert members",function(e,t){var{isNonExactMatchMembersSearch:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t(),r=Object(E.f)(n),s=Object(E.d)(n),i=a?"people":Object(E.a)(n),o=Object(v.l)(n)?"users_by_realname":"users_by_display_name";return e(k({searchQuery:r,marker:s,index:o,filter:i,isNonExactMatchMembersSearch:a}))});S.meta={name:"fetchMembersPost",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneThunksFetchMembersPost",description:"Fetch and upsert members"},S.propTypes={isNonExactMatchMembersSearch:p.default.bool};var I=a("1hAG"),w=a("G4ux"),T=a("t85p"),N=a("AjwY"),P=a("iH/p"),A=a("5mKg"),M=a("zbZx"),x=a("nNoG"),R=a("kOzZ"),D=a("VBRD"),F=a("eK0w"),L=a("YLnb"),U=a("Xuqh"),B=a("AgpX"),H=a("HvGc"),W=a("IF1j"),q=a("z+SX"),G=a("/6yw"),K=a("llxT"),V=e=>{var{memberId:t,member:a,width:n,dispatch:r}=e,s=Object(l.useCallback)(()=>{r(Object(H.j)({memberId:t}))},[r,t]);return d.a.createElement("div",{className:"p-directory_page__member",role:"presentation",onClick:s,style:{width:n}},d.a.createElement(W.c,{userId:t,size:n,isInteractive:!1,showBadge:!1}),d.a.createElement("div",{className:"p-directory_page__member__info"},d.a.createElement(K.a,{className:"p-directory_page__member__name"},d.a.createElement(q.a,{id:t}),d.a.createElement(G.a,{memberId:t})),d.a.createElement("div",{className:"p-directory_page__member__title"},Object(C.S)(a))))};V.defaultProps={member:void 0};var z=Object(u.b)((e,t)=>{var{memberId:a}=t;return{member:Object(w.d)(e,a)}})(V),Y=a("P+mv"),Q=a("FQfs"),X={showMemberProfile:c.a,saveScrollmarkForKey:c.a,featureFantailNurture:!1};class searchable_member_list_member_SearchableMemberListMember extends l.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){var{id:e,member:t,searchQuery:a,featureFantailNurture:n,clogger:r}=this.props;this.props.showMemberProfile({memberId:e}),this.props.saveScrollmarkForKey(e);var s=new Y.a({query:a,options:{entities:{members:{matchEmailField:n}},sort:{preferExactMatch:!0}}}),{scoreDetails:i}=s.scoreMember(t),o=s.isMemberExactMatch(t),c=s.getMemberExactMatchDetails(t);r.track("ORGANIZATION_DIRECTORY_CLICK",{organization_directory_query_length:a.length,organization_directory_results_length:this.props.numResults,organization_directory_selected_position:this.props.index,organization_directory_selected_id:t.id,organization_directory_selected_match_details:{is_exact_match:o,exact_match_details:c,score_details:i}})}render(){var{id:e}=this.props;return d.a.createElement("div",{className:"p-member_directory__member_row","data-qa":"member_directory_show_profile","data-qa-member":e,role:"presentation",onClick:this.onClick},d.a.createElement(Q.a,{id:e}))}}searchable_member_list_member_SearchableMemberListMember.defaultProps=X;var J={showMemberProfile:function(){return Object(H.j)(...arguments)},saveScrollmark:function(){return Object(m.c)(...arguments)}},Z=Object(u.b)((e,t)=>{var{id:a}=t;return{clogger:Object(R.a)({state:e}),member:Object(w.d)(e,a),searchQuery:Object(E.f)(e),featureFantailNurture:Object(O.a)(e)}},J)(searchable_member_list_member_SearchableMemberListMember),$=(a("GhVE"),new x.b("member_directory")),ee={memberIds:[],scrollmark:void 0,searchQuery:void 0,setSearchQuery:c.a,filter:"people",setFilter:c.a,fetchMembersPost:c.a,saveScrollmark:c.a,nonExactMatchMemberIds:[],isEnterprise:!1,isFreeTeamAdmin:!1,"aria-label":void 0,openFromOrgDirectory:c.a,featureSonicMemberDirectory:!1,featureFantailNurture:!1,onItemTabWithin:c.a,displayEmailAddresses:!1,isIAP1Enabled:!1},te=100,ae="SearchInProductEducation";class searchable_member_list_SearchableMemberList extends l.PureComponent{constructor(e){super(e),Object(h.a)(this,["onScroll","onClearSearch","onClickSearchInProductEducation","onViewMatchesClick","onPricingClick","saveScrollmarkForKey","fetchPost","fetchAround","fetchMembers","fetchNonExactMatchMembers","renderRow","getListKeys","shouldFetchNonExactMembers","isFocusableItem","focus"]),this.requestPost=null,this.requestNonExactMatchMembers=null,this.keys=null,this.list=d.a.createRef(),this.layout=new L.a,this.layout.heightCache.DEFAULT_HEIGHT=60,this.width=0,this.state={reachedEnd:!1,columns:3},this.debouncedFetchPost=Object(o.a)(this.fetchPost,te),this.debouncedResize=Object(o.a)(this.onResize,20)}componentDidMount(){if(this.props.scrollmark){var{key:e,offset:t}=this.props.scrollmark;this.layout.setAnchor(e,t),this.props.saveScrollmark(null)}}componentDidUpdate(e){var{searchQuery:t,filter:a,clogger:n}=this.props;e.searchQuery===t&&e.filter===a||(this.requestPost&&this.requestPost.cancel(),this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel(),this.requestPost=null,this.requestNonExactMatchMembers=null,this.layout&&this.layout.setAnchor(!1),this.setReachedEnd(!1,this.fetchAround),e.searchQuery!==t&&n.track("ORGANIZATION_DIRECTORY_KEYPRESS",{}),e.filter!==a&&n.track("ORGANIZATION_DIRECTORY_FILTER",{organization_directory_filter:a}))}componentWillUnmount(){this.requestPost&&this.requestPost.cancel(),this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel()}onScroll(){this.layout.anchor&&this.layout.setAnchor(!1)}onClearSearch(){this.props.setSearchQuery(""),this.props.setFilter("people")}onClickSearchInProductEducation(){this.props.openFromOrgDirectory({query:this.props.searchQuery})}onViewMatchesClick(){this.props.setFilter("people")}onPricingClick(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{ui_element:"pricing_link",step:"team_directory",action:"click"}}})}onResize(e){this.props.isIAP1Enabled&&e!==this.width&&(this.width=e,this.setState(()=>({columns:this.getIAColumns()})))}setReachedEnd(e,t){this.setState(()=>({reachedEnd:e}),t)}getIAColumns(){return Math.floor(this.width/200)}getListKeys(){var e=this.props.memberIds.filter(e=>"L"!==e[0]);return this.rows=this.props.isIAP1Enabled&&Object(s.a)(e,this.state.columns),this.props.isIAP1Enabled?this.rows.map(e=>e[0]):e}getNonExactMatchEmptyStateLabel(){if(!this.props.featureSonicMemberDirectory)return null;var{filter:e,isEnterprise:t,searchQuery:a}=this.props,n={query:d.a.createElement("strong",null,a)};switch(e){case"admins":return t?$.rt("No workspace admins match {query}, but there are other members who do.",n):$.rt("No admins match {query}, but there are other members who do.",n);case"bots":return $.rt("No bots match {query}, but there are other members who do.",n);case"org_members":return $.rt("No members match {query}, but there are other members who do.",n);case"org_admins":return $.rt("No org admins match {query}, but there are other members who do.",n);case"guests":return $.rt("No guests match {query}, but there are other members who do.",n);case"deactivated":return $.rt("No deactivated members match {query}, but there are other members who do.",n);default:return $.rt("No members match {query}, but there are other members who do.",n)}}focus(){var e=this.list.current;e&&e.focus()}saveScrollmarkForKey(e){var t=this.list.current;t&&e&&this.props.saveScrollmark({key:e,offset:this.layout.getOffsetForKey(e)-t.getScrollTop()})}fetchPost(){return!this.requestPost&&(!this.state.reachedEnd&&(this.requestPost=this.fetchMembers(),this.requestPost.finally(()=>{this.requestPost=null})))}shouldFetchNonExactMembers(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{filter:t,searchQuery:a}=this.props;return!Object(i.a)(a)&&"people"!==t&&0===e.length}fetchMembers(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.props.fetchMembersPost({isNonExactMatchMembersSearch:t}).then(function(){var{nextMarker:t,members:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!e.props.searchQuery&&t||e.setReachedEnd(!0),e.shouldFetchNonExactMembers(a)&&e.fetchNonExactMatchMembers()})}fetchAround(){return!this.requestPost&&!this.state.reachedEnd&&this.debouncedFetchPost()}fetchNonExactMatchMembers(){if(this.requestNonExactMatchMembers)return!1;return this.requestNonExactMatchMembers=this.fetchMembers(!0),this.requestNonExactMatchMembers.finally(()=>{this.requestNonExactMatchMembers=null})}isFocusableItem(e){var{key:t}=e;return t!==this.loadingIndicatorKey&&t!==ae}renderRow(e){if(!this.props.featureSonicMemberDirectory)return null;var t=this.keys[e];if(!t)return null;if(t===this.loadingIndicatorKey)return d.a.createElement("div",{className:"p-member-directory__loading"},$.t("Loading\u2026"));if(t===ae)return this.renderSearchInProductEducation();if(this.props.isIAP1Enabled){var a=this.rows[e].map(e=>d.a.createElement(z,{memberId:e,key:e,width:Math.floor((this.width-20)/this.state.columns-20)}));return d.a.createElement("div",{className:"p-directory_page__row",key:t},a)}return this.renderMember({id:t,index:e})}renderSearchInProductEducation(){var e=this.props.searchQuery.indexOf("@")>0;return this.props.featureFantailNurture&&!this.props.displayEmailAddresses&&e?d.a.createElement(U.a,{"data-qa":"workspace-directory-search-email-hint",className:"p-member-directory__empty_list",description:$.t("Searching for people by email has been disabled in this workspace. Questions? Contact a Workspace Admin.",{ns:"search"})}):d.a.createElement(U.a,{"data-qa":"workspace-directory-search-in-product-education",className:"p-member-directory__empty_list",description:$.t("No luck? You can also search for people based on the topics they talk about.",{ns:"search"}),primaryActionText:$.t("Search by Topic",{ns:"search"}),onClickPrimaryAction:this.onClickSearchInProductEducation})}renderMember(e){var{id:t,index:a}=e;return d.a.createElement(Z,{key:t,id:t,index:a,numResults:this.keys.length,saveScrollmarkForKey:this.saveScrollmarkForKey})}renderEmptyListView(){if(!this.props.featureSonicMemberDirectory)return null;var{searchQuery:e,nonExactMatchMemberIds:t,filter:a,isFreeTeamAdmin:n,clogger:r}=this.props,s=$.t("Clear Search"),i=$.t("View Matches");if(t.length)return d.a.createElement(U.a,{className:"p-member-directory__empty_list",description:this.getNonExactMatchEmptyStateLabel(),primaryActionText:i,onClickPrimaryAction:this.onViewMatchesClick,secondaryActionText:s,onClickSecondaryAction:this.onClearSearch});if(!e&&"guests"===a&&n){var o=$.rt("Workspaces on paid plans can invite guests, like contractors, vendors, or clients. <a>See pricing plans</a>",null,e=>{var{key:t,text:a}=e;return d.a.createElement(B.a,{key:t,href:Object(N.j)({entryPoint:"flexpane_search_members"}),class:"no_underline",target:"_blank",onClick:this.onPricingClick},a)});return r.track("GROWTH_PRICING",{contexts:{ui_context:{step:"team_directory",action:"impression"}}}),d.a.createElement(U.a,{className:"p-member-directory__empty_list",description:o,primaryActionText:s,onClickPrimaryAction:this.onClearSearch})}return this.renderSearchInProductEducation()}render(){return this.keys=this.getListKeys(),!this.keys.length&&this.state.reachedEnd?this.renderEmptyListView():(this.state.reachedEnd?this.keys.push(ae):(this.loadingIndicatorKey="Loading".concat(this.keys.length),this.keys.push(this.loadingIndicatorKey)),d.a.createElement(D.a,null,e=>{var{measureRef:t,width:a,height:n}=e;return this.debouncedResize(a),d.a.createElement("div",{className:"p-member_directory__member_list",ref:t},d.a.createElement(F.a,{width:a,height:n,keys:this.keys,layout:this.layout,rowRenderer:this.renderRow,onScroll:this.onScroll,ref:this.list,loadAround:this.fetchAround,loadPost:this.debouncedFetchPost,isFocusableItem:this.isFocusableItem,onItemTabWithin:this.props.onItemTabWithin,"aria-label":this.props["aria-label"]}))}))}}searchable_member_list_SearchableMemberList.defaultProps=ee;var ne={fetchMembersPost:S,saveScrollmark:m.c,setSearchQuery:m.f,setFilter:m.d,openFromOrgDirectory:P.h},re=Object(u.b)(e=>({scrollmark:Object(E.e)(e),searchQuery:Object(E.f)(e),filter:Object(E.a)(e),memberIds:Object(E.b)(e),nonExactMatchMemberIds:Object(E.c)(e),isEnterprise:Object(M.d)(e),isFreeTeamAdmin:!Object(A.D)(Object(I.d)(e))&&Object(C.eb)(e,Object(w.b)(e)),clogger:Object(R.a)({state:e}),featureSonicMemberDirectory:Object(T.m)(e,"feature_sonic_member_directory"),featureFantailNurture:Object(O.a)(e),displayEmailAddresses:Object(y.a)(e,"display_email_addresses")}),ne)(e=>{var{forwardedRef:t}=e,a=Object(r.a)(e,["forwardedRef"]);return d.a.createElement(searchable_member_list_SearchableMemberList,Object(n.a)({ref:t},a))});t.a=d.a.forwardRef((e,t)=>d.a.createElement(re,Object(n.a)({forwardedRef:t},e)))},Sxi2:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=a("nNoG"),o=a("kOzZ"),c=a("XLFM"),l=a("ayyL"),d=a("Fdc0"),p=a("negh"),u=(a("F5ou"),new i.b("welcome_place")),h=e=>{var{inviterUsername:t,hasMessagesInChannel:a,isDm:n}=e;return[{id:"JUST_ARRIVED",buttonText:u.t("\ud83d\udc83 Just arrived!"),isVisible:!!a||!!n},{id:"ROLL_CALL",buttonText:u.t("\ud83d\ude4b Roll call! Who else is here?"),isVisible:!a&&!n},{id:"IM_HERE",buttonText:u.t("\ud83d\udc4b I\u2019m here! What\u2019d I miss?"),isVisible:!t&&!n},{id:"THANKS_FOR_THE_INVITE",buttonText:u.rt("\ud83d\udc4b Thanks for the invite, <a>{username}</a>!",{username:t}),prefillText:u.t("\ud83d\udc4b Thanks for the invite, {username}!",{username:t}),isVisible:!!t&&!n},{id:"THANKS_FOR_THE_INVITE_DM",buttonText:u.t("\ud83d\udc4b Thanks for the invite!"),isVisible:!!n}].filter(e=>e.isVisible)};t.a=Object(s.b)(e=>{var t=Object(l.c)(e);return{inviterUsername:t?Object(d.W)(e,t,!1,!0):void 0,clogger:Object(o.a)({state:e}),pageViewingSessionId:Object(l.i)(e)}})(class MessageSuggestions extends n.Component{constructor(){super(...arguments),this.onMessageSuggestionClicked=(e=>{var{clogger:t,pageViewingSessionId:a,prefillMessageInput:n}=this.props;n(e.prefillText||e.buttonText),t.track("WELCOME_PLACE",{contexts:{ui_context:{action:p.UiAction.CLICK,ui_element:p.UiElement.WELCOME_PLACE_ACTION_SEND_MESSAGE,ui_properties:{element_type:p.ElementType.BUTTON,element_name:e.id}},welcome_place:{welcome_session_id:a}}})})}render(){var{hasMessagesToRender:e,inviterUsername:t,isDm:a}=this.props;return h({hasMessagesInChannel:e,inviterUsername:t,isDm:a}).map(e=>r.a.createElement(c.d,{className:"message-suggestion-button margin_right_50 margin_top_50",size:"small",key:e.id,onClick:()=>this.onMessageSuggestionClicked(e)},e.buttonText))}})},T00V:function(e,t,a){"use strict";var n=a("TSYQ"),r=a.n(n),s=a("q1tI"),i=a.n(s),o=a("XHGt"),c=(a("aK/h"),a("1zbP")),l=a("1hAG"),d=a("5mKg"),p=a("/3PZ"),u=a("6GV3"),h=[230,132,102,88,68,44,34],m={className:void 0,invert:!1,team:void 0};function b(e){var{className:t,id:a,invert:n,size:s,team:o}=e,l=Object(c.c)(o),m=Object(c.d)(o);if(l||m)return i.a.createElement(p.a,{className:r()(t,"c-team_entity__icon"),isNonExistent:l,size:s,invert:n,"data-team-id":a});var b=function(e){var{size:t,team:a}=e,n=Object(d.h)(a);if(!n||n.image_default)return null;var r=2*t,s=Object(u.a)(r,h);return n["image_".concat(s)]||[...Object.values(a.icon)].pop()}({size:s,team:o}),_=!b&&function(e){var t=Object(d.e)(e);return Object(d.j)(t,{limit:2})}(o);return i.a.createElement("span",{"aria-hidden":"true",className:r()(t,"c-team_entity__icon",{"c-team_entity__icon--default":!b}),style:{backgroundImage:b&&"url(".concat(b,")"),fontSize:"".concat(Math.round(s/1.8),"px"),height:s,lineHeight:"".concat(s,"px"),width:s},"data-team-id":a},_)}b.defaultProps=m;t.a=Object(o.b)((e,t)=>{var a=t.team||Object(l.i)(e,t.id);return{team:a,id:a.id}})(b)},T4si:function(e,t,a){},TBaU:function(e,t,a){},TDTp:function(e,t,a){"use strict";var n=a("rePB"),r=a("XfeM"),s=a("aK/h"),i=a("yPgC"),o=a("qrk6"),c=a("2TYC"),l=a("IxGy"),d=a("t85p"),p=a("gLeh"),u=a("9RFl");function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var m=Object(r.b)("build message summary for aria labels",function(e,t){var{channelId:a,ts:r,isFirstUnreadMsg:s,isFirstMsgForDay:i,isLastMsgForDay:m,previousMessageTs:b,day:_,rollup:g,hasFocus:f,viewContext:v}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},O=t(),y=Object(p.b)(O);if(!!!Object(l.e)(O,{channelId:a,ts:r})&&(y||f)){var C=Object(c.a)(O,{channelId:a,ts:r,previousMessageTs:b,rollup:g,hasFocus:f}),j=_||{ts:parseInt(Object(u.a)(r),10),isFirstDay:!1,isLastDay:!1};return Object(o.a)(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},C,{featureA11yMessageSummary:Object(d.m)(O,"feature_a11y_message_summary"),viewContext:v,isFirstUnreadMsg:s,isFirstMsgForDay:i,isLastMsgForDay:m,day:j}))}});m.meta={name:"makeMessageSummary",key:"actionsMakeMessageSummaryMakeMessageSummary",description:"build message summary for aria labels"},m.propTypes={channelId:s.default.string.isRequired,ts:s.default.string.isRequired,isFirstUnreadMsg:s.default.bool,isFirstMsgForDay:s.default.bool,isLastMsgForDay:s.default.bool,previousMessageTs:s.default.string,day:s.default.object,rollup:i.a.Rollup(),hasFocus:s.default.bool,viewContext:s.default.string},t.a=m},TJrU:function(e,t,a){},TM4O:function(e,t,a){"use strict";t.a=(()=>document.documentElement&&document.documentElement.dataset&&"calls"===document.documentElement.dataset.app)},TOkS:function(e,t,a){"use strict";var n=a("q1tI"),r=(a("aK/h"),a("yHhI"));t.a=class ConnectImmediate extends n.PureComponent{static getDerivedStateFromProps(){var{store:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.getState()}constructor(e){super(e);var{store:t}=e;this.state=t.getState(),this.logger=Object(r.a)({getState:t.getState,label:"CONNECT-IMMEDIATE"}),this.unsubscribe=null,this.update=this.update.bind(this)}componentDidMount(){this.subscribeToStore()}componentDidUpdate(e){this.props.store!==e.store&&(this.unsubscribeFromStore(),this.subscribeToStore())}componentWillUnmount(){this.unsubscribeFromStore()}subscribeToStore(){var{store:e}=this.props,t=e.subscribeImmediate;t||(this.logger.warn("subscribeImmediate not found on store"),t=e.subscribe),this.unsubscribe=t(this.update)}unsubscribeFromStore(){this.unsubscribe&&this.unsubscribe()}update(){this.setState(()=>this.props.store.getState())}render(){return this.props.render(this.state)}}},TVjB:function(e,t,a){"use strict";var n=a("aK/h"),r=a("piHQ"),s=a("NrkL"),i=a("XoJV"),o=a("nNoG"),c=a("3pFD"),l=a("yHhI"),d=a("Z7Ay"),p=()=>{var e=Object(l.b)({label:"EMOJI_TRANSLATION"}),t=Object(o.s)(),a=Object(s.a)();if(Object(o.g)())return e.info("Emoji translations not needed for default locale, only adding keywords"),void Object(i.a)({locale:t,localizedKeywordMap:a});if(Object(c.c)(t))if(Object(i.i)(t))e.info("Emoji translations already loaded for ".concat(t));else{var n=Object(r.a)();n?(Object(i.b)({locale:t,canonicalToLocalized:n}),Object(i.a)({locale:t,localizedKeywordMap:a}),e.info("Emoji translations and keywords loaded for ".concat(t))):e.info("Emoji translation map is null")}else e.info("Emoji translations not yet loaded for locale")};p.propTypes=n.default.string,t.a=p,Object(d.a)("loadEmojiTranslations",p)},TY84:function(e,t,a){"use strict";var n=a("tjIJ"),r=a("q1tI"),s=a.n(r),i=a("XHGt"),o=a("aK/h"),c=a("wx14"),l=a("Ff2n"),d=a("ifKl"),p=a("vJtL"),u=a("TSYQ"),h=a.n(u),m=a("mM05"),b=a.n(m),_=a("nNoG"),g=a("kOzZ"),f=a("tbBR"),v=a("1zbP"),O=a("UF3u"),y=a("AE1P"),C=a("EOYu"),j=a("1hAG"),E=a("G4ux"),k=a("eR+M"),S=a("Fdc0"),I=a("KPXh"),w=a("Qrgz"),T=a("+1yX"),N=a("vmJv"),P=a("zoXk"),A=a("2HDu"),M=a("aLpA");function x(e,t){if([M.I.MESSAGE_PANE,M.I.CHANNEL_DETAILS_FLEXPANE].includes(t)||!t){var a=Object(N.a)(e);if(Object(T.a)(a))return{channelId:a}}else if(t===M.I.THREADS_FLEXPANE){var n=Object(P.e)(e);return Object(A.a)(n[0])}return{}}var R=a("MREy"),D=a("XLFM"),F=a("RMmo"),L=a("6FZx"),U=(a("boyP"),{highlighted:!1,disabled:!1,className:"",onMouseEnter:d.a,onSelected:d.a,menuCallback:d.a,menuCallbackId:null,"data-qa":"menu_item_action_button",activeMenuId:void 0});class menu_item_action_button_MenuItemActionButton extends r.PureComponent{constructor(e){super(e),this.disableHighlightedState=!1,this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleSelected=this.handleSelected.bind(this)}componentDidMount(){this.bindKeyCommands()}componentDidUpdate(){this.props.highlighted||(this.disableHighlightedState=!1)}componentWillUnmount(){this.keyCommands&&this.keyCommands.reset()}handleMouseEnter(e){this.disableHighlightedState=!0,this.props.onMouseEnter(e)}handleSelected(e){this.props.onSelected(e),this.props.menuCallback(this.props.menuCallbackId,e)}handleReturnKey(e){this.props.highlighted&&(this.handleSelected(e),e&&e.preventDefault&&e.preventDefault())}bindKeyCommands(){var e=[{keys:["return"],handler:this.handleReturnKey.bind(this)}];this.keyCommands||(this.keyCommands=new F.a),this.keyCommands.bindAll(e)}render(){var e=this.props,{disabled:t,highlighted:a,className:n,onMouseEnter:r,onSelected:i,menuCallback:o,menuCallbackId:d,activeMenuId:p}=e,u=Object(l.a)(e,["disabled","highlighted","className","onMouseEnter","onSelected","menuCallback","menuCallbackId","activeMenuId"]),m=h()("c-menu_item_action_button",n,{"c-menu_item_action_button--highlighted":a&&!t&&!this.disableHighlightedState}),b=this.props.activeMenuId;return s.a.createElement("div",{className:"c-menu_item_action_button__container",onMouseEnter:this.handleMouseEnter,"data-qa":"".concat(this.props["data-qa"],"-wrapper")},s.a.createElement(D.d,Object(c.a)({id:b,className:m,disabled:t,onClick:this.handleSelected,role:"menuitem",tabIndex:"-1",type:"outline"},u)))}}menu_item_action_button_MenuItemActionButton.defaultProps=U;var B=Object(L.b)(menu_item_action_button_MenuItemActionButton),H=a("cD5Y"),W=(a("guKx"),a("t85p")),q=a("uksu"),G=a("9E9B"),K=a("V/As"),V=a("zwKj"),z=a("RB1+"),Y=a("u2vH"),Q=a("M4HD"),X=a("7EGn"),J=a("0f2Y"),Z=a("O/xh"),$=a("dhvi"),ee=a("HOkk"),te=a("02hs"),ae=(a("5SxQ"),new _.b("workflow_builder")),ne=Object(i.b)(null,e=>({closeModal:()=>e(Object($.a)())}))(e=>{var{closeModal:t,collaborators:a,appName:n}=e,i=Object(r.useCallback)(()=>a.map(e=>s.a.createElement(Z.a,{key:e,userId:e,position:"left-bottom",includeRemoveFromChannelAction:!0},s.a.createElement(te.a,{id:e,className:"p-members_dialog__member_list_btn","data-qa":"collaborator_row_btn"}))),[a]);return s.a.createElement(ee.a,{title:ae.rt("{usernameCount} collaborators on {appName}",{usernameCount:a.length,appName:n}),overlayClassName:"p-collaborators_dialog__overlay",onClose:t,showGoButton:!1,cancelText:ae.t("Close")},i())}),re=a("Lts7"),se=a("kMAi"),ie=(a("Ms/R"),new _.b("app_card")),oe=e=>{var{id:t}=e;return s.a.createElement(Z.a,{userId:t,position:"left-bottom"},s.a.createElement(J.a,null,s.a.createElement(se.a,{id:t})))},ce=Object(i.b)(null,e=>({openModal:function(){return e(Object($.e)(...arguments))}}))(e=>{var{collaborators:t,openModal:a,appName:n}=e,r=t[0],i=t[1];switch(t.length){case 0:return"";case 1:return ie.rt("{username} created this workflow. ",{username:s.a.createElement(oe,{id:r})});case 2:return ie.rt("{firstUser} and {secondUser} are collaborators on this workflow.",{firstUser:s.a.createElement(oe,{id:r}),secondUser:s.a.createElement(oe,{id:i})});default:return ie.rt("{firstUser}, {secondUser} and {userCount} other people are <a>collaborators on this workflow</a>.",{firstUser:s.a.createElement(oe,{id:r}),secondUser:s.a.createElement(oe,{id:i}),userCount:t.length-2},e=>{var{text:r}=e;return s.a.createElement("span",{"data-collaborators-count":!0},s.a.createElement(J.a,{onClick:()=>a({element:s.a.createElement(ne,{collaborators:t,appName:n})})},r))})}}),le=e=>{var{app:t,cardHeader:a,launchWorkflowBuilder:n,currentUserId:i,disabledMessage:o}=e,c=Object(X.a)(t,"legacy_app.owner_ids",[]),l=c.some(e=>e===i);return s.a.createElement("div",{className:"p-app_profile_card__container","data-qa":"app_profile_card_container"},s.a.createElement(R.f,{width:320,noMargin:!0},a,s.a.createElement(r.Fragment,null,s.a.createElement(R.d,{noPaddingAbove:!0}),o&&o,!o&&c.length>0&&s.a.createElement("div",{className:"p-workflow_profile_card--body"},s.a.createElement("div",null,s.a.createElement(ce,{collaborators:c,appName:t.profile.name})))),!l&&s.a.createElement(r.Fragment,null,s.a.createElement(R.d,{noPaddingAbove:!0}),s.a.createElement("div",{"data-workflow-profile-card-non-installer":!0,className:"p-workflow_profile_card--body"},ie.rt("Created with <a>Workflow Builder</a>.",null,e=>{var{text:t}=e;return s.a.createElement("span",{className:"margin_left_25"},s.a.createElement(J.a,{onClick:n},t))}))),l&&s.a.createElement("div",{"data-workflow-profile-card-installer":!0},s.a.createElement(R.d,{noPaddingAbove:!0}),s.a.createElement(B,{onClick:()=>n({subPath:"slack-apps/".concat(t.app_id),source:"workflow_profile_card"}),className:"margin_bottom_100"},ie.t("Open in Workflow Builder")))))};le.defaultProps={cardHeader:null,currentUserId:null,disabledMessage:null};var de=Object(i.b)(null,e=>({launchWorkflowBuilder:function(){return e(Object(re.a)(...arguments))}}))(le),pe=a("MnCE"),ue=a("VMwU"),he=a("e9ZU"),me=a("yluG"),be={colorHex:"#2C2D30",isError:!1,externalTeam:void 0};function _e(e){var{colorHex:t,imageUrl:a,name:n,isError:r,externalTeam:i}=e,o=Object(ue.f)(t)||[],c={background:"\n\t\t\tlinear-gradient(\n\t\t\t\t136.53deg,\n\t\t\t\trgba(255, 255, 255, 0.05) 0%,\n\t\t\t\trgba(255, 255, 255, 0.2) 100%\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t312.01deg,\n\t\t\t\t".concat(t," 0%,\n\t\t\t\trgba(").concat(o.join(","),", 0.75) 100%\n\t\t\t)\n\t\t"),backgroundColor:t},l=h()("full_width",{"p-app_profile_card__header--external":i,"p-app_profile_card__header":!i});return r?null:s.a.createElement("div",{className:l,style:c,"data-qa":"app_card_header"},s.a.createElement(me.a,{externalTeam:i}),s.a.createElement("img",{className:"p-app_profile_card__avatar",src:a,alt:n,"data-qa":"app_header_icon"}),s.a.createElement("div",{className:"padding_left_100"},s.a.createElement("div",{className:"padding_bottom_25"},s.a.createElement("strong",{"data-qa":"app_header_name"},n),s.a.createElement("span",{className:"margin_left_50"},s.a.createElement(he.a,{inverse:!0,"data-qa":"app_header_app_label",isWorkflow:!0})))))}_e.defaultProps=be;var ge=Object(pe.a)(_e),fe={colorHex:"#2C2D30",isError:!1,externalTeam:void 0};function ve(e){var{colorHex:t,imageUrl:a,name:n,onClick:r,isError:i,externalTeam:o,tagline:c}=e,l=Object(ue.f)(t)||[],p={background:"\n\t\t\tlinear-gradient(\n\t\t\t\t136.53deg,\n\t\t\t\trgba(255, 255, 255, 0.05) 0%,\n\t\t\t\trgba(255, 255, 255, 0.2) 100%\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t312.01deg,\n\t\t\t\t".concat(t," 0%,\n\t\t\t\trgba(").concat(l.join(","),", 0.75) 100%\n\t\t\t)\n\t\t"),backgroundColor:t},u=h()("full_width",{"p-app_profile_card__header--external":o,"p-app_profile_card__header":!o,cursor_pointer:r!==d.a});return i?null:s.a.createElement(D.c,{className:u,onClick:r,style:p,"data-qa":"app_card_header"},s.a.createElement(me.a,{externalTeam:o}),s.a.createElement("img",{className:"p-app_profile_card__avatar",src:a,alt:n,"data-qa":"app_header_icon"}),s.a.createElement("div",{className:"p-app_profile_card__title"},s.a.createElement("div",{className:"display_flex align_items_center padding_bottom_25"},s.a.createElement("strong",{className:"overflow_ellipsis","data-qa":"app_header_name"},n),s.a.createElement("span",{className:"margin_left_50"},s.a.createElement(he.a,{inverse:!0,"data-qa":"app_header_app_label"}))),s.a.createElement("div",{className:"p-app_profile_card__description","data-qa":"app_header_description"},c)))}ve.defaultProps=fe;var Oe=Object(pe.a)(ve),ye=a("Pl1I"),Ce=a("rePB"),je=a("pxG+"),Ee=a("tBeP"),ke=a("vZqh"),Se=a("SOCr"),Ie=a("vPEJ"),we=a("lhZz"),Te=a("5mKg"),Ne=a("negh"),Pe=a("xrsA");function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(a),!0).forEach(function(t){Object(Ce.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var xe=new _.b("app_card"),Re="USER_CARD_CLICK";var De=function(e){var{appId:t,appUser:a,channelIdToRemoveFrom:n,dispatch:r,homeWorkspaceId:i,isActive:o,isExternal:c,isMemberRestricted:l,isMemberUltraRestricted:d,isXoxaApp:p,memberId:u,serviceId:h,showAppSettings:m,showAppDirectoryLink:b,currentTeamId:_,currentUserId:f,locale:v,currentEnterpriseId:O,featureM11nChannelDetails:y}=e,C=Object(g.a)({userId:f,teamId:_,locale:v,enterpriseId:O}),E=Object(j.d)(Object(we.getStateByTeamId)(_)),k={app_id:t,bot_id:h},S=()=>C.track(Re,k);return[{key:"about_app",label:xe.t("About this app"),click:()=>{S(),C.track("APP_CLICK_LINK_APP_ABOUT_IN_USER_CARD",Me({},k,{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_about"}}})),r(Object(q.a)({memberId:u,serviceId:h,homeWorkspaceId:i}))},show:!0,dataQa:"app_card_view_details"},{key:"app_directory_link",label:xe.t("View in app directory"),href:Object(Te.n)(E,"/apps/".concat(t,"?utm_source=in-prod&utm_medium=inprod-link_app_directory-user_card-click")),click:()=>{S(),C.track("APP_CLICK_LINK_APP_DIRECTORY_IN_USER_CARD",Me({},k,{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_directory"}}}))},show:b,dataQa:"app_card_view_app_directory"},{key:"settings",label:xe.t("Settings"),href:p?void 0:"".concat(Object(je.a)(Object(Te.n)(E),"/"),"/services/").concat(h,"?utm_source=in-prod&utm_medium=inprod-link_app_settings-user_card-click"),click:()=>{S(),C.track("APP_CLICK_LINK_APP_SETTINGS_IN_USER_CARD",{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_settings"}}}),p&&r(Object(Ee.a)({serviceId:h,referringEventId:Re}))},show:m,dataQa:"app_card_edit_settings"},{key:"channel_invite",label:xe.t("Add this app to a channel ..."),click:()=>{S(),r(Object(Pe.a)({memberId:a.id}))},show:a&&o&&(p?!l:!d),dataQa:"app_card_invite_to_channel"},{key:"channel_remove",dataQa:"app_card_remove",click:()=>{if(y){var e={[Ne.UiContextKeys.action]:Ne.UiAction.CLICK,[Ne.UiContextKeys.ui_element]:Ne.UiElement.BTN_REMOVE_APP};C.track(Re,{contexts:{[Ne.ClientEventKeys.ui_context]:e,[Ne.ClientEventKeys.core]:{[Ne.CoreKeys.app_id]:t,[Ne.CoreKeys.bot_id]:h,[Ne.CoreKeys.channel_id]:n}}}),r(p?Object(Se.a)({appUserId:a.id,channelId:n,referringEventId:Re,referringUiContext:e}):Object(ke.a)({memberId:a.id,channelId:n}))}},label:y?xe.rt("Remove this app from {channelName} ...",{channelName:s.a.createElement("strong",null,s.a.createElement(Ie.a,{className:"cursor_pointer",inline:!0,channelId:n,iconProps:{inherit:!0,align:"baseline"}}))}):void 0,show:y&&!!n&&!c}].filter(e=>e.show)},Fe=a("tn36"),Le=a("DCka"),Ue=a("oIqc"),Be=a("NAkb"),He=a("J47P"),We=a("k0G2"),qe=s.a.lazy(()=>Promise.resolve().then(a.bind(null,"eglI"))),Ge=new _.b("team"),Ke={kbNavActive:!1,onSubmit:d.a,returnKBNav:d.a,stealKBNav:d.a};class app_profile_card_message_input_AppProfileCardMessageInput extends r.PureComponent{constructor(e){super(e),this.texty=null,this.textyModules={tabcomplete:{positionMenu:e=>{e.style.width="".concat(this.texty.container.offsetWidth,"px"),Object(Be.a)(e,this.texty.container)},completers:["channels","emoji","members"]}},Object(Fe.a)(this,["setTextyRef","onSubmit","onDocKeyDown","onFocus","onBlur"])}componentDidMount(){document.addEventListener("keydown",this.onDocKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.onDocKeyDown)}onDocKeyDown(e){var{which:t,metaKey:a,ctrlKey:n,altKey:r}=e,{kbNavActive:s}=this.props;s||r||n||a||[We.f,We.e,We.k,We.l,We.c,We.h,We.i].indexOf(t)>-1||this.texty&&this.texty.focus()}onFocus(){var{kbNavActive:e,stealKBNav:t}=this.props;e||t()}onBlur(){var{kbNavActive:e,returnKBNav:t}=this.props;e&&t()}onSubmit(){var{clogger:e}=this.props;this.texty&&this.texty.value()&&(e.track("USER_CARD_DM",{}),Object(Ue.e)(this.props.userId,!1,this.texty.value()),this.props.onSubmit())}setTextyRef(e){this.texty=e&&e.getWrappedInstance?e.getWrappedInstance():e}render(){var e=Ge.t("Message {username}",{username:this.props.username});return s.a.createElement("div",{className:"p-app_profile_card__footer"},s.a.createElement(Le.a,null,s.a.createElement(r.Suspense,{fallback:null},s.a.createElement(qe,{"data-qa":"app_card_message_input",ref:this.setTextyRef,className:"p-app_profile_card__message_input",modules:this.textyModules,ariaLabel:e,placeholder:e,onEnter:this.onSubmit,onFocus:this.onFocus,onBlur:this.onBlur,useLegacyCreate:!0,isSingleLine:!0,useFocusRing:!1}))))}}app_profile_card_message_input_AppProfileCardMessageInput.defaultProps=Ke;var Ve=Object(i.b)(e=>({clogger:Object(g.a)({state:e})}))(app_profile_card_message_input_AppProfileCardMessageInput),ze=Object(He.a)(Ve),Ye=(a("1c4n"),new _.b("app_card")),Qe={app:void 0,appUser:void 0,installedByMember:void 0,isError:!1,menuProps:{},memberId:void 0,installerIsYou:!1,externalTeam:{},isAppSpaceEnabled:!0,currentEnterpriseId:void 0,currentUserId:void 0,appHomeTeamDisplayName:void 0,viewContext:M.I.MESSAGE_PANE,channelId:void 0,threadTs:void 0,isMemberRestricted:!1,isMemberUltraRestricted:!1,isActive:!1,isExternal:!1,isOrgShared:!1,showAppSettings:!1,showAppDirectoryLink:!1,showSlashCommands:!1,canBeRemovedFromChannel:!1,commands:[]};class app_profile_card_AppProfileCard extends r.Component{constructor(e){super(e),this.onHeaderClick=this.onHeaderClick.bind(this),this.autoFillSlashCommand=this.autoFillSlashCommand.bind(this)}shouldComponentUpdate(e){var t=this.props,{commands:a}=t,n=Object(l.a)(t,["commands"]),{commands:r}=e,s=Object(l.a)(e,["commands"]);return!Object(O.a)(n,s)||!Object(O.a)(a,r)}onHeaderClick(){var{app:e,memberId:t,menuProps:{onTriggerClose:a},serviceId:n,clogger:r,dispatch:s}=this.props,{app_id:i,home_workspace_id:o}=e;r.track("USER_CARD_CLICK",{app_id:i,bot_id:n}),s(Object(q.a)({memberId:t,serviceId:n,homeWorkspaceId:o})),a&&a()}autoFillSlashCommand(e){if(this.props.featureSonicInputs){var t=Object(z.a)({viewContext:this.props.viewContext,channelId:this.props.channelId,threadTs:this.props.threadTs});if(!t)return;t.prependContents({contents:(new b.a).insert("".concat(e," ")).ops}),t.focus()}else Object(V.b)(e)}render(){var{app:e,appUser:t,commands:a,defaultAppIcon:n,menuProps:i,installedByMember:o,installerIsYou:l,isError:u,dispatch:m,serviceId:b,currentTeam:g,externalTeam:f,featureReactMemberProfileCard:O,currentUserId:y,currentEnterpriseId:C,appHomeTeamDisplayName:j,featureAddAppHomeTeamName:E,isMemberRestricted:k,isMemberUltraRestricted:S,isActive:I,isExternal:w,isOrgShared:T,showAppSettings:N,showAppDirectoryLink:P,showSlashCommands:A,channelId:M,canBeRemovedFromChannel:x,featureM11nChannelDetails:D}=this.props;if(Object(v.d)(e))return s.a.createElement("div",{className:"p-app_profile_card__container"},s.a.createElement(R.f,{menuClassNames:"p-app_profile_card p-app_profile_card--loading",width:320},s.a.createElement(H.a,null)));if(!Object(v.b)(e))return null;var F=Object(p.a)(i.onTriggerClose)?i.onTriggerClose:d.a,L=Object(K.b)(e.profile,192,n),U=s.a.createElement(Oe,{colorHex:e.profile.color,imageUrl:L,name:e.profile.name,onClick:!I||w?d.a:this.onHeaderClick,tagline:e.profile.tagline,isError:u,externalTeam:f}),W=I||T||w||k?null:s.a.createElement("div",{className:"c-menu_item__li p-app_profile_card__disabled_message","data-qa":"app_card_app_disabled"},Object(Q.g)(e)?Ye.t("This workflow has been disabled"):Ye.t("This app has been disabled")),q=De({appId:e.app_id,appUser:t,channelIdToRemoveFrom:x&&M,dispatch:m,featureM11nChannelDetails:D,featureReactMemberProfileCard:O,homeWorkspaceId:e.home_workspace_id,isActive:I,isMemberRestricted:k,isMemberUltraRestricted:S,isXoxaApp:"xoxa"===e.app_type,isExternal:w,showAppSettings:N,showAppDirectoryLink:P,legacyApp:e.legacy_app,serviceId:b,currentTeamId:g.id,currentUserId:y,locale:Object(_.s)(),currentEnterpriseId:C}).map(e=>"separator"===e.type?s.a.createElement(R.d,{key:e.key}):s.a.createElement(R.b,{key:e.key,label:e.label,onSelected:e.click,href:e.href,"data-qa":e.dataQa}));if(Object(Q.g)(e))return s.a.createElement(de,{app:e,cardHeader:s.a.createElement(ge,{colorHex:e.profile.color,imageUrl:L,name:e.profile.name,isError:u,externalTeam:f}),currentUserId:y,disabledMessage:W});var V,z=a.slice(0,3),Y=A&&z.length?z.map(e=>s.a.createElement(R.b,{key:e.name,onSelected:()=>this.autoFillSlashCommand(e.name),"data-qa":"app_card_slash_command"},s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"block overflow_ellipsis"},s.a.createElement("strong",{className:"margin_right_25"},e.name),e.usage),s.a.createElement("div",{className:"p-app_profile_card__command_desc c-menu_item__description"},e.description)))):null;(I&&e.installation&&e.installation.installer_user_id||j&&E)&&(V=s.a.createElement(ye.a,{appType:e.app_type,memberId:o&&o.id,appName:e.profile.name,isError:u,onMemberClick:F,appHomeTeamDisplayName:j,featureAddAppHomeTeamName:E,installerIsYou:l}));var X=null,J=I&&e.app_user;w&&(J=e.app_user&&"xoxp"===e.app_type),T&&(J=!!e.app_user),J&&(X=O?s.a.createElement(B,{className:"p-app_profile_card__direct_message_button",onSelected:()=>m(Object(G.startImByMemberId)({memberId:t.id}))},Ye.t("Go to App")):s.a.createElement(ze,{onSubmit:F,userId:e.app_user.id,username:e.app_user.username}));var Z=h()("p-app_profile_card",{"p-app_profile_card--has_footer":J&&!O});return s.a.createElement("div",{className:"p-app_profile_card__container","data-qa":"app_profile_card_container"},s.a.createElement(R.f,Object(c.a)({},i,{width:320,noMargin:!0,menuClassNames:Z}),U,s.a.createElement(R.d,{noPaddingAbove:!0}),W,q,Y&&s.a.createElement(R.d,null),Y,V&&s.a.createElement(R.d,null),V,X))}}app_profile_card_AppProfileCard.defaultProps=Qe;var Xe=Object(f.b)(Object(i.b)((e,t)=>{var{serviceId:a,homeWorkspaceId:n,memberId:r,viewContext:s}=t,i=Object(C.c)(e,{serviceId:a,homeWorkspaceId:n,memberId:r}),o=Object(j.d)(e),c=Object(Y.E)(e,i),l=Object(Y.u)(e,i),d=Object(W.q)(e)?Object(j.g)(e).id:void 0,p=Object(E.b)(e),u=i&&Object(E.d)(e,Object(Y.v)(i)),h=Object(Y.i)(e,i),{channelId:m,threadTs:b}=x(e,s),_=Object(E.d)(e,r||i&&i.app_user&&i.app_user.id),f=m&&Object(k.f)(e,m,r),v=m&&f.isKnown&&f.isMember&&Object(w.r)(e,m,_),O=[];return m&&i.commands&&(O=i.commands.filter(t=>Object(I.k)(e,t,{channelId:m,isThread:!!b}).isEnabled)),{app:i,appUser:_,channelId:m,threadTs:b,commands:O,defaultAppIcon:Object(y.f)(e),installedByMember:u,installerIsYou:Object(Y.w)(e,i),isAppSpaceEnabled:Object(y.g)(e),isActive:Object(Y.B)(i),isExternal:c,isOrgShared:Object(Y.F)(e,i),showAppSettings:Object(Y.L)(e,i),showAppDirectoryLink:Object(Y.K)(e,i),showSlashCommands:Object(Y.M)(e,i),featureReactMemberProfileCard:Object(W.m)(e,"feature_react_member_profile_card"),featureAddAppHomeTeamName:Object(W.m)(e,"feature_add_app_home_team_name"),featureSonicInputs:Object(W.m)(e,"feature_sonic_inputs"),homeWorkspaceId:Object(Y.j)(i)||n,currentTeam:o,externalTeam:l,clogger:Object(g.a)({state:e}),currentEnterpriseId:d,currentUserId:p.id,appHomeTeamDisplayName:h,isMemberRestricted:Object(S.Gb)(p),isMemberUltraRestricted:Object(S.Mb)(p),canBeRemovedFromChannel:v,featureM11nChannelDetails:Object(W.m)(e,"feature_m11n_channel_details")}})(app_profile_card_AppProfileCard)),Je=a("1cj1"),Ze=a("HvGc"),$e=a("/m+M"),et=a("OYPW"),tt=a("llxT"),at=a("3JmS"),nt=a("kyN7"),rt=a("Ect7"),st=a("YcId"),it=a("RoDk"),ot=a("bkaq"),ct=a("G7w5"),lt=(a("NqlN"),new _.b("member_profile")),dt=new _.b("team");function pt(e){var{fullName:t,memberType:a}=e;return a?lt.t("Profile image for {fullName}. {memberType}. Hit enter to view profile",{fullName:t,memberType:a}):lt.t("Profile image for {fullName}. Hit enter to view profile",{fullName:t})}function ut(e,t){var a=Object(we.getStateByTeamId)(e),n=Object(S.P)(t),r=Object(j.i)(a,n);return Object(S.tb)(t)?Object(Te.e)(r):Object(S.mb)(t)?dt.t("Deactivated account",{fallbackHash:"d57fa5164165105a1507c830ae06f7af8307870a",fallbackHashNs:"team"}):Object(S.Mb)(t)?Object(S.xb)(t)?dt.t("Invited Guest"):dt.t("Single-Channel Guest"):Object(S.Gb)(t)?Object(S.xb)(t)?dt.t("Invited Guest"):dt.t("Multi-Channel Guest"):Object(S.Eb)(a,t)?dt.t("Owner of {teamName}",{teamName:Object(_.q)(Object(Te.e)(r))}):Object(S.eb)(a,t)?dt.t("Workspace Admin"):Object(S.xb)(t)?dt.t("Invited Member"):null}a("kVk7");var ht=a("ynxK"),mt=new _.b("member_profile"),bt={onMenuItemSelected:d.a,canRemoveFromChannel:!1,channelId:void 0,featureModernProfileFlexpane:!1};function _t(e){var{memberId:t,onMenuItemSelected:a,canRemoveFromChannel:n,channelId:r,dispatchOpenRemoveMemberDialog:i,featureModernProfileFlexpane:o}=e;if(n&&r){var c=s.a.createElement("strong",null,s.a.createElement(Ie.a,{className:"p-member_profile_card__context_action_channel_name",inline:!0,channelId:r,iconProps:{inherit:!0,align:"baseline"}})),l=o?mt.rt("Remove from {channelName}",{channelName:c}):"";return s.a.createElement("div",{className:"p-member_profile_card__context_action_container"},s.a.createElement(ht.a,{className:"p-member_profile_card__context_action","data-qa":"member_profile_card_remove_from_channel",onClick:()=>{i({memberId:t,channelId:r}),a()}},l))}return null}_t.defaultProps=bt;var gt={dispatchOpenRemoveMemberDialog:function(){return Object(ke.a)(...arguments)}},ft=Object(f.b)(Object(i.b)(function(e,t){var{memberId:a,viewContext:n}=t,{channelId:r}=x(e,n),s=r&&Object(k.f)(e,r,a);return{canRemoveFromChannel:!(Object(W.d)(e)===a)&&s&&s.isKnown&&s.isMember&&Object(w.g)(e,r)&&Object(S.i)(e,a),channelId:r,featureModernProfileFlexpane:Object(W.m)(e,"feature_modern_profile_flexpane")}},gt)(_t)),vt=new _.b("member_profile"),Ot={currentMember:void 0,member:void 0,memberTeam:void 0,onClose:d.a,showMemberProfile:d.a,team:void 0,includeRemoveFromChannelAction:!1,canInteract:!0,clogger:{track:d.a},onMessageClick:d.a,onCallClick:d.a};function yt(e){var{currentMember:t,member:a,memberTeam:n,onClose:i,showMemberProfile:o,team:c,includeRemoveFromChannelAction:l,canInteract:d,clogger:p,onMessageClick:u,onCallClick:h}=e,m=Object(et.a)(()=>{var e=[ct.a.STATUS];return t!==a&&e.push(ct.a.TIME),e},[t,a]),{featureModernProfileFlexpane:b}=Object($e.a)(),_=Object(r.useCallback)(()=>{p.track(Ne.EventId.USER_CARD_CLICK),i()},[p,i]);if(Object(r.useEffect)(()=>{var e=document.getElementById("member_profile_card_photo");e&&e.focus()},[]),!b)return null;var g=s.a.createElement(at.a,{className:"p-member_profile_card__picture",member:a}),f=s.a.createElement(rt.a,{className:"p-member_profile_card__restriction",member:a,team:n}),v=s.a.createElement(ot.a,{className:"p-member_profile_card__name",member:a});return Object(Te.K)(n)?s.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},s.a.createElement("div",{className:"p-member_profile_card__header"},g,f),v,s.a.createElement(st.a,{memberTeam:n})):d?s.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},s.a.createElement("div",{className:"p-member_profile_card__header"},s.a.createElement(tt.a,{id:"member_profile_card_photo",className:"p-member_profile_card__picture_trigger","data-qa":"member_profile_card_photo",onClick:()=>{o({memberId:a.id}),_()},"aria-label":pt({fullName:Object(S.K)(a),memberType:ut(c.id,a)})},s.a.createElement("span",{className:"p-member_profile_card__picture_hint"},vt.t("Click to view profile")),g),f),s.a.createElement(ot.a,{className:"p-member_profile_card__name",member:a,onClick:_,onShowMemberProfile:()=>{o({memberId:a.id})},clogger:p}),s.a.createElement(ct.b,{member:a,onClick:_,team:c,types:m}),s.a.createElement(nt.a,{className:"p-member_profile_card__buttons",member:a,onClick:_,showCallButton:!0,clogger:p,onCallClick:h,onMessageClick:u}),l?s.a.createElement(ft,{memberId:a.id,onMenuItemSelected:_}):null):s.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},s.a.createElement("div",{className:"p-member_profile_card__header"},g,f),v,s.a.createElement(it.a,{member:a}))}yt.defaultProps=Ot;var Ct={showMemberProfile:function(){return Object(Ze.j)(...arguments)}},jt=Object(i.b)(function(e,t){var{memberId:a}=t,n=Object(E.d)(e,a);if(!n)return{};var r=Object(W.m)(e,"feature_stranger_danger")?Object(Je.a)(e,a):!Object(S.Jb)(n);return{currentMember:Object(E.b)(e),member:n,memberTeam:Object(j.i)(e,Object(S.P)(n)),team:Object(j.d)(e),canInteract:r,clogger:Object(g.a)({state:e})}},Ct)(yt),Et=a("AUAP"),kt=a("brL+"),St=a("0sSB"),It={serviceId:void 0,memberId:void 0,homeWorkspaceId:void 0,menuProps:void 0,memberIsHuman:!1,includeRemoveFromChannelAction:!1};function wt(e){var{serviceId:t,memberId:a,homeWorkspaceId:n,menuProps:r,memberIsHuman:i,includeRemoveFromChannelAction:o}=e;if(t&&!i)return s.a.createElement(Xe,{serviceId:t,memberId:a,homeWorkspaceId:n,menuProps:r});if(a&&i){var{onClose:c,onCallClick:l,onMessageClick:d}=r||{};return s.a.createElement(jt,{memberId:a,onClose:c,onCallClick:l,onMessageClick:d,includeRemoveFromChannelAction:o})}return null}wt.defaultProps=It;var Tt={userId:o.default.string,botId:o.default.string,botProfile:o.default.object},Nt=Object(i.b)((e,t)=>{var{userId:a,botId:n,botProfile:r}=t,{member:s,bot:i,memberIsHuman:o}=Object(Et.g)(e,{userId:a,botId:n,botProfile:r}),c=Object(kt.b)(e),l=Object(St.c)({member:s,bot:i,botProfile:r,currentTeamId:c});return{serviceId:i&&i.id,memberId:s&&s.id,homeWorkspaceId:l,memberIsHuman:o}})(wt);Nt.propTypes=Tt;var Pt=a("X6iR"),At=a("h9PG"),Mt=a("B/i4"),xt=a("cErB"),Rt=a("EHyS"),Dt=a("Smdl"),Ft=new Set(["/apps","/services","/account","/admin","/customize","/pricing","/stats","/help","/plans","/interop"]);function Lt(e,t,a,n){if(!e)return!1;var r=e,s=Object(Te.n)(t);e.startsWith(s)&&(r=r.slice(s.length-1));var i=r;i.startsWith("/")||(i="/".concat(i));var o=i.indexOf("/",1);o>-1&&(i=i.slice(0,o));var c=i.indexOf("?");return c>-1&&(i=i.slice(0,c)),!!Ft.has(i)&&(a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),Object(Te.P)(t,r,n),!0)}var Ut=a("6kok"),Bt=a("4M+g"),Ht=a("NV6F"),Wt=a("LrgL"),qt={children:void 0,onClick:void 0,className:void 0,disabled:!1,invert:!1,redirDomain:void 0,clogLinkClick:d.a,hideReferersPref:!0,permalinkContainsUnknownChannel:!1,onMouseDown:void 0,onMouseEnter:void 0,onMouseLeave:void 0,onCopy:void 0,openPermalink:d.a,forwardedRef:void 0,currentTeam:void 0,target:void 0};class connected_external_link_ExternalLink extends r.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){var{onClick:t,href:a,target:n,currentTeam:r}=this.props;if(t)return t(e),void(e.defaultPrevented||Lt(a,r,e,n));Lt(a,r,e,n)||Object(Rt.a)(e)||1!==e.button&&this.props.openPermalink({permalink:a})&&(e.preventDefault(),e.stopPropagation())}render(){return s.a.createElement(Wt.a,Object(c.a)({ref:this.props.forwardedRef},this.props,{onClick:this.onClick}))}}connected_external_link_ExternalLink.defaultProps=qt,connected_external_link_ExternalLink.displayName="ExternalLink";var Gt=s.a.forwardRef((e,t)=>s.a.createElement(connected_external_link_ExternalLink,Object(c.a)({},e,{forwardedRef:t}))),Kt={openPermalink:function(){return Object(Ht.b)(...arguments)}},Vt=Object(i.b)((e,t)=>{var{href:a}=t,n=Object(kt.b)(e),r=Object(j.i)(e,n),s=Object(N.a)(e);Object(Dt.a)()&&a.startsWith("/")&&(a=Object(Te.n)(r,a));var i=Object(Mt.b)(a),o=!1;if(i&&Object(T.a)(i)){var c=Object(Bt.e)(e,i);o=Object(Ut.Mb)(c)}var l=Object(xt.k)(a),d=l&&l.pathname,p=l&&l.hostname;return(Object(xt.h)(p)&&Object(Pt.a)(d,"/files/")||Object(xt.g)(a)&&Object(Pt.a)(d,"/docs/"))&&(a=Object(xt.p)(a,"origin_team",n),s&&(a=Object(xt.p)(a,"origin_channel",s))),{href:a,currentTeam:r,redirDomain:Object(W.f)(e,"redir_domain"),hideReferersPref:Object(At.a)(e,"hide_referers"),permalinkContainsUnknownChannel:o}},Kt)(connected_external_link_ExternalLink),zt=s.a.forwardRef((e,t)=>s.a.createElement(Vt,Object(c.a)({},e,{forwardedRef:t})));Gt.propTypes={href:o.default.string.isRequired};var Yt=zt;Ht.b.register(n.a),Ht.c.register(e=>s.a.createElement(Nt,e)),Ht.a.register(()=>Yt)},Ta79:function(e,t,a){e.exports=a.p+"shared_channels@2x-ce2e8d3.png"},TepT:function(e,t,a){},Tjgr:function(e,t,a){},U5UL:function(e,t,a){},UCMe:function(e,t,a){},UJZI:function(e,t,a){},UYtA:function(e,t,a){},UceB:function(e,t,a){"use strict";var n=a("ifKl"),r=(a("aK/h"),a("q1tI")),s=a.n(r),i=a("XHGt"),o=a("TSYQ"),c=a.n(o),l=a("t85p"),d=a("XLFM"),p=a("od5y"),u=a("18Pa"),h=a("RAhH"),m=(a("h2AX"),{className:"",onClick:n.a,iconType:null,tooltipPosition:"top",ariaHasPopup:!0,"data-qa":void 0,btnRef:null,shortcutKey:null,ariaLabel:null,"aria-pressed":void 0,featureMessageActionsRefresh:!1});class MessageActionButton extends r.PureComponent{constructor(){super(),this.onKeyDown=this.onKeyDown.bind(this)}onKeyDown(e){e&&e.key===this.props.shortcutKey&&(e.stopPropagation(),e.preventDefault(),this.props.onClick(e))}render(){var{ariaLabel:e,featureMessageActionsRefresh:t,label:a}=this.props,n=c()("c-message_actions__button",this.props.className);return s.a.createElement(h.c,{tip:this.props.label,position:this.props.tooltipPosition,delay:h.b},t?s.a.createElement(u.a,{className:n,onClick:this.props.onClick,"aria-label":e||a,"aria-haspopup":this.props.ariaHasPopup,"data-qa":this.props["data-qa"],ref:this.props.btnRef,onKeyDown:this.props.shortcutKey?this.onKeyDown:null,"aria-pressed":this.props["aria-pressed"],icon:this.props.iconType,size:"small"}):s.a.createElement(d.c,{className:n,onClick:this.props.onClick,"aria-label":e||a,"aria-haspopup":this.props.ariaHasPopup,"data-qa":this.props["data-qa"],ref:this.props.btnRef,onKeyDown:this.props.shortcutKey?this.onKeyDown:null,"aria-pressed":this.props["aria-pressed"]},s.a.createElement(p.b,{type:this.props.iconType})))}}MessageActionButton.defaultProps=m,t.a=Object(i.b)(function(e){return{featureMessageActionsRefresh:Object(l.m)(e,"feature_message_actions_refresh")}})(MessageActionButton)},Usoh:function(e,t,a){},UvJ4:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),s=a("q1tI"),i=a.n(s),o=(a("aK/h"),a("hOQf")),c=a("VrmM");t.a=function(e){var{msg:t}=e,a=Object(r.a)(e,["msg"]);return i.a.createElement(c.a,Object(n.a)({msg:t},a,{inline:Object(o.mb)(t)}))}},VGdo:function(e,t,a){},VJ6R:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("ifKl"),r=a("q1tI"),s=a("UF3u");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=Object(r.useRef)();Object(r.useEffect)(()=>{Object(s.a)(a.current,t)||(a.current=t,e())})}},VQnp:function(e,t,a){e.exports=a.p+"apps@2x-4eec854.png"},VTc2:function(e,t,a){},VmKF:function(e,t,a){},VwqH:function(e,t,a){"use strict";var n=a("7EGn"),r=a("q1tI"),s=a.n(r),i=a("XHGt"),o=a("nNoG"),c=a("G4ux"),l=a("1hAG"),d=a("Fdc0"),p=a("5mKg"),u=a("xoiQ"),h=a("derf"),m=a("XLFM"),b=a("od5y"),_=a("k55U"),g=a("vFlG");var f=a("7Ztl"),v=a("jUSB"),O=a("pJ2S"),y=(a("m0k8"),new o.b("incoming_call_window"));function C(e,t){if(function(e){return!!Object(g.a)(e,"activeCall")}(e))return e.activeCall.incomingInviterUserId;var a=Object(f.b)(e,t).incomingInvite;if(a)return a.userId;Object(_.f)("No incoming invite")}t.a=Object(i.b)((e,t)=>{var a=C(e,t.callId);if(!a)throw new Error("No inviter user id for callId: ".concat(t.callId));var r=Object(c.d)(e,a),s=Object(d.P)(r),i=Object(l.i)(e,s),o=Object(d.tb)(r),h=Object(d.V)(e,r),m=Object(p.e)(i),b=Object(n.a)(r,"profile.avatar_hash");return{avatarUrls:Object(u.a)({size:200,teamId:s,memberId:a,avatarHash:b}),prefCompliantMemberName:h,memberTeamId:s,externalTeamName:m,isRestricted:Object(d.Gb)(r),isUltraRestricted:Object(d.Mb)(r),isExternal:o}})(class incoming_call_IncomingCall extends r.PureComponent{componentDidMount(){Object(v.a)(O.g,{loop:!0})}componentWillUnmount(){Object(v.b)(O.g)}getSrcSetAttribute(e){return e?"".concat(e," 2x"):""}maybeRenderGuestBadge(){return this.props.isUltraRestricted?s.a.createElement(b.b,{type:"single-channel-guest",inline:!0}):this.props.isRestricted?s.a.createElement(b.b,{type:"restricted-user",inline:!0}):null}renderUserImage(){var{imageUrl:e,imageUrl2x:t}=this.props.avatarUrls;return e||t?s.a.createElement("img",{className:"p-incoming_call__member_image",src:e||t,srcSet:this.getSrcSetAttribute(t),alt:""}):null}renderExternalTeamLabel(){return s.a.createElement("div",{className:"p-incoming_call__external_team_banner"},s.a.createElement("span",{className:"p-incoming_call__external_team_name"},this.props.externalTeamName),s.a.createElement(h.b,{className:"p-incoming_call__external_team_icon",id:this.props.memberTeamId,size:18}))}renderUserName(){return s.a.createElement("div",{className:"p-incoming_call__member_name_wrapper"},s.a.createElement("span",{className:"p-incoming_call__member_name"},this.props.prefCompliantMemberName),this.maybeRenderGuestBadge())}renderCaptionText(){var e=y.t("is calling you");return s.a.createElement("div",{className:"p-incoming_call__user_caption"},e)}renderCallButtons(){return s.a.createElement("div",{className:"p-incoming_call__button_container"},s.a.createElement(m.d,{type:"danger",size:"medium",onClick:()=>this.props.onRejectCall(this.props.callId),className:"p-incoming_call__button","aria-label":"Decline"},s.a.createElement(b.b,{type:"times"})),s.a.createElement(m.d,{type:"primary",size:"medium",onClick:()=>this.props.onAcceptCall(this.props.callId),className:"p-incoming_call__button","aria-label":"Accept"},s.a.createElement(b.b,{type:"phone"})))}render(){return s.a.createElement("div",{className:"p-incoming_call"},this.props.isExternal&&this.renderExternalTeamLabel(),this.renderUserImage(),s.a.createElement("div",{className:"p-incoming_call__info"},this.renderUserName(),this.renderCaptionText(),this.renderCallButtons()))}})},W3KZ:function(e,t,a){"use strict";var n=/::[^:]+-([2-6])$/;t.a=(e=>{if(!e)return null;var t,a=e.toLowerCase().replace(/(^:|:$)/g,""),r=a.match(n),s=a.replace(n,"");return s?-1!==s.indexOf(":")?null:r&&((t=parseInt(r[1],10))<2||t>6)?null:{name:s,skinTone:t}:null})},W3Yc:function(e,t,a){},"W5K+":function(e,t,a){},W90I:function(e,t,a){},WI3T:function(e,t,a){},WJwm:function(e,t,a){},WOap:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=a("XHGt"),o=(a("aK/h"),a("TSYQ")),c=a.n(o),l=a("IxGy"),d=a("BUzq"),p=a("Q+UV"),u=a("hOQf"),h=(a("aLpA"),a("tbBR")),m=a("0gKA"),b=a("Q3oM"),_=(a("qMiJ"),{className:void 0,children:void 0,position:"default",parentId:void 0,show:void 0,showComment:!0,showShare:!0,showReact:!0,showJump:!1,showStar:!0,showMoreActions:!0,jumpOrigin:void 0,messageContainerType:void 0,viewContext:void 0,hover:!1,setHover:n.a,isEditing:!1,maybeStartEditingMessage:n.a,isPinned:!1,renderOffscreen:!1,clogLinkClick:n.a,clogThreadEvent:n.a});class MessageActions extends r.PureComponent{constructor(e){super(e),this.onMenuOpen=this.onMenuOpen.bind(this),this.onMenuClose=this.onMenuClose.bind(this),this.startEditing=this.startEditing.bind(this),this.renderActions=this.renderActions.bind(this)}onMenuOpen(){this.props.setHover(!0)}onMenuClose(){this.props.setHover(!1)}startEditing(){var{msg:e,viewContext:t}=this.props;this.props.maybeStartEditingMessage({channelId:Object(u.F)(e),ts:Object(u.Q)(e),viewContext:t,scroll:!0})}renderActions(){var{msg:e,hover:t,show:a,showComment:n,showShare:r,showReact:i,showJump:o,showStar:c,showMoreActions:l,jumpOrigin:d,messageContainerType:h,isEditing:b,renderOffscreen:_,clogLinkClick:g,clogThreadEvent:f,parentId:v,isPinned:O}=this.props;if(!1===a)return null;if(void 0===a&&!t&&!_)return null;if(b)return null;if(Object(u.ab)(e)||Object(u.Y)(e))return null;if(Object(u.jb)(e))return null;if(e.isEKMError)return null;var{ts:y,thread_ts:C,channel:j,file:E,comment:k,subtype:S}=e;return s.a.createElement(m.a,{ts:y,threadTs:C,channelId:j,reactionKey:Object(p.b)(e),isStarred:Object(u.rb)(e,E,k),isReply:Object(u.lb)(e),isEphemeral:Object(u.bb)(e),isPinned:O,subtype:S,replyCount:Object(u.S)(e),comment:e.comment&&e.comment.id,fileIds:e.files,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,onEmojiPickerOpen:this.onMenuOpen,onEmojiPickerClose:this.onMenuClose,showComment:n,showShare:r,showReact:i,showJump:o,showStar:c,showMoreActions:l,jumpOrigin:d,editHandler:this.startEditing,messageContainerType:h,renderOffscreen:_&&!t&&!a,clogLinkClick:g,clogThreadEvent:f,parentId:v})}render(){var{children:e,position:t}=this.props,a=c()("c-message_kit__actions","c-message_kit__actions--".concat(t),this.props.className);return s.a.createElement("div",{className:a,style:{position:"relative"}},e,this.renderActions())}}MessageActions.defaultProps=_;var g={maybeStartEditingMessage:function(){return Object(l.g)(...arguments)}};t.a=Object(h.b)(Object(b.b)(Object(i.b)((e,t)=>{var{msg:a,viewContext:n}=t,r=Object(u.F)(a),s=Object(u.Q)(a);return{isEditing:!!Object(l.e)(e,{channelId:r,ts:s,viewContext:n}),isPinned:Object(d.j)(e,{channelId:r,ts:s})}},g)(MessageActions)))},WP4K:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=(a("aK/h"),a("XHGt")),o=a("TSYQ"),c=a.n(o),l=a("miRO"),d=a("qYtJ"),p=a("2HDu"),u=(a("dBrN"),{dispatchShowThreadIfThreadable:n.a,className:void 0,currentThreadKey:void 0});class ThreadReplies extends r.PureComponent{render(){var{msg:e,dispatchShowThreadIfThreadable:t,currentThreadKey:a}=this.props,n=c()("c-message_kit__thread_replies",this.props.className),r=e.channel,i=e.thread_ts,o=e.replies,l=e.reply_count,u=e.reply_users,h=e.reply_users_count,m=e.latest_reply;if(!r||!l)return null;var b=Object(p.c)(r,i),_=a&&b===a,g=_?Object(p.e)(a):void 0;return s.a.createElement(d.a,{channelId:r,threadTs:i,replies:o,replyCount:l,replyUsers:u,replyUsersCount:h,latestReply:m,showThreadIfThreadable:t,className:n,isThreadExpanded:_,threadListId:g})}}ThreadReplies.defaultProps=u;t.a=Object(i.b)(e=>({currentThreadKey:Object(p.b)(e)}),e=>({dispatchShowThreadIfThreadable:function(){return e(Object(l.m)(...arguments))}}))(ThreadReplies)},WVKS:function(e,t,a){"use strict";var n,r=a("pguY"),s=a("zmn3"),i=a("HiDb"),o=a("XI8A"),c=a("Qv4Q");t.a=(()=>{if(n)return n;var e=function(){var e=Object(i.a)(o,e=>{var t=Object(s.a)(e.skinVariations,"unicode");return[e.unicode,...t]});return Object(s.a)(e,c.b)}().sort((e,t)=>t.length-e.length),t=Object(s.a)(e,r.a);return n=new RegExp("(".concat(t.join("|"),")(\ud83c[\udffb-\udfff])?"),"g")})},We3W:function(e,t,a){},Wx4V:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=(a("aK/h"),a("nNoG")),o=a("XLFM"),c=a("qkTT"),l=(a("Qwh8"),new i.b("threads")),d={tryAgain:n.a,"data-qa":"message_container_error",children:null};function p(e){var{tryAgain:t,"data-qa":a,children:n}=e;return s.a.createElement("div",{className:"p-message_container_error","data-qa":a},s.a.createElement("div",{className:"p-message_container_error__contents"},s.a.createElement("div",{className:"p-message_container_error__emoji"},s.a.createElement(c.b,{text:":tropical_fish:",emojiSize:c.a.LARGE})),s.a.createElement("p",{className:"p-message_container_error__msg"},n),s.a.createElement(o.d,{type:"primary",onClick:t,"data-qa":"".concat(a,"_try_again")},l.t("Try Again"))))}p.defaultProps=d,t.a=p},X28p:function(e,t,a){"use strict";a("aK/h");var n=a("q1tI"),r=a.n(n),s=a("MnCE"),i=a("TSYQ"),o=a.n(i),c=(a("h2AX"),e=>{var{className:t,children:a,ariaLabel:n}=e;return r.a.createElement("div",{className:o()("c-message_actions__container",t),role:"group","aria-label":n},a)});c.defaultProps={children:null,className:null,ariaLabel:null},t.a=Object(s.a)(c)},XKj7:function(e,t,a){"use strict";a.d(t,"c",function(){return s}),a.d(t,"e",function(){return i}),a.d(t,"d",function(){return o}),a.d(t,"f",function(){return c}),a.d(t,"a",function(){return l}),a.d(t,"g",function(){return d}),a.d(t,"b",function(){return p});var n=a("ifKl"),r=a("ROZo"),s=(Object(r.b)("TS.prefs.setMultiPrefsByAPI",n.a),Object(r.b)("TS.prefs.setPrefByAPI",n.a),Object(r.b)("TS.prefs.legacyOnPrefChanged",n.a)),i=Object(r.b)("TS.prefs.onPrefChanged",n.a),o=Object(r.b)("TS.prefs.legacyOnTeamPrefChanged",n.a),c=Object(r.b)("TS.prefs.onTeamPrefChanged",n.a),l=Object(r.b)("TS.prefs.sidebar_theme_changed_sig.dispatch",n.a),d=Object(r.b)("TS.prefs.removeTeamFromEnterpriseExcludeTeamPref",n.a),p=Object(r.b)("TS.prefs.legacyOnMutedChannelsPrefChanged",n.a)},XThT:function(e,t,a){},XcDb:function(e,t,a){},XoBp:function(e,t,a){"use strict";var n=a("aK/h"),r=a("XHGt"),s=a("5v1V"),i={children:n.default.node,isDegradedMode:n.default.bool},o=e=>{var{isDegradedMode:t,children:a}=e;return t?a:null};o.propTypes=i,o.defaultProps={children:null,isDegradedMode:null};t.a=Object(r.b)(e=>({isDegradedMode:Object(s.m)(e)}))(o)},XoJV:function(e,t,a){"use strict";a.d(t,"b",function(){return m}),a.d(t,"a",function(){return b}),a.d(t,"g",function(){return v}),a.d(t,"f",function(){return O}),a.d(t,"e",function(){return y}),a.d(t,"d",function(){return C}),a.d(t,"c",function(){return j}),a.d(t,"h",function(){return E}),a.d(t,"i",function(){return k});var n=a("fujP"),r=a("gSGL"),s=a("OZf9"),i=a("aK/h"),o=a("Qv4Q"),c=a("nNoG"),l=a("P1FA"),d=a("Z7Ay"),p=new c.b("emoji"),u={},h={},m=function(){var{locale:e,canonicalToLocalized:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&!Object(n.a)(t)){var a={};Object(s.a)(t,(e,t)=>{a[e]=t;var n=Object(l.a)(e);n!==e&&(a[n]=t)}),u[e]={canonicalToLocalized:t,localizedToCanonical:a}}};m.propTypes={locale:i.default.string.isRequired,canonicalToLocalized:i.default.object.isRequired};var b=function(){var{locale:e,localizedKeywordMap:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&!Object(n.a)(t)&&(h[e]=t)};b.propTypes={locale:i.default.string.isRequired,keywordMap:i.default.object.isRequired};var _=Object(o.c)(),g=/(^:)\S+(:$)/;function f(e,t){if(!Object(r.a)(e))return null;if(!t)return e;var a=g.test(e),[n,s]=e.replace(/^:|:$/g,"").toLowerCase().split("::"),i=t[n];if(!i)return e;if(s){var o=t[s];if(!o)return e;i="".concat(i,"::").concat(o)}return a?":".concat(i,":"):i}var v=function(){var{locale:e,name:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&t?u[e]?f(t,u[e].canonicalToLocalized):t:null},O=e=>{if(!e||!e.name)return null;var t;switch(e.name){case"Smileys & People":t=p.t("Smileys & People",{fallbackHash:"b37554f695b15005fd23907b9488e0a8ad4bca5f",fallbackHashNs:"emoji"});break;case"Animals & Nature":t=p.t("Animals & Nature",{fallbackHash:"bddc7adb1204fed1e94206edb0213ced81f348d4",fallbackHashNs:"emoji"});break;case"Food & Drink":t=p.t("Food & Drink",{fallbackHash:"a9704a2ad9afea5f9d4d1504458f91e253557264",fallbackHashNs:"client"});break;case"Activities":t=p.t("Activities",{fallbackHash:"81c0d915fa6d82fd30661c5e66e204cea52bb2b5",fallbackHashNs:"emoji"});break;case"Travel & Places":t=p.t("Travel & Places",{fallbackHash:"4cea7e0a28a73fafbe052e8132f1c86cd07a68ed",fallbackHashNs:"emoji"});break;case"Objects":t=p.t("Objects",{fallbackHash:"72a83add2c5ede877c10d23f302d3e17accbadab",fallbackHashNs:"emoji"});break;case"Symbols":t=p.t("Symbols",{fallbackHash:"22ad664e9eb98b75a73333b2b2395fc4b52e6fc9",fallbackHashNs:"emoji"});break;case"Flags":t=p.t("Flags",{fallbackHash:"5d728758adcdd5154d3be55552c1c061ef1489b2",fallbackHashNs:"emoji"});break;default:t=""}return t},y=function(){var{locale:e,name:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&t?u[e]?f(t,u[e].localizedToCanonical):t:null},C=function(){var{locale:e,text:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&t?t.replace(_,t=>v({locale:e,name:t})):null},j=function(){var{locale:e,text:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&t?t.replace(_,t=>y({locale:e,name:t})):null},E=e=>h[e],k=e=>e&&!Object(n.a)(u)&&!Object(n.a)(u[e])&&!Object(n.a)(h)&&!Object(n.a)(h[e]);Object(d.a)("emojiTranslation",{getLocalizedEmojiName:v,getCanonicalEmojiName:y,convertEmojiInStringToLocalized:C,convertEmojiInStringToCanonical:j,translationMaps:u,keywordMaps:h})},XwvF:function(e,t,a){},Y6eO:function(e,t,a){"use strict";var n=a("rePB"),r=a("fujP"),s=a("yIs4"),i=a("+Xah"),o=a("ifKl"),c=a("aK/h"),l=a("q1tI"),d=a.n(l),p=a("XHGt"),u=a("mM05"),h=a.n(u),m=a("t85p"),b=a("brL+"),_=a("dhvi"),g=a("quKg"),f=a("fYfO"),v=a("4M+g"),O=a("h9PG"),y=a("rZal"),C=a("XL7r"),j=a("G4ux"),E=a("IxGy"),k=a("QOH6"),S=a("J19L"),I=a("1yga"),w=a("qk+D"),T=a("aLpA"),N=a("mLe0"),P=a("XfeM"),A=a("XRnC"),M=Object(P.b)("Count the number of characters over the message length limit",function(e,t){var{channelId:a,text:n,delta:r,featureWysiwygComposer:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{rawText:i,processedDelta:o}=Object(A.b)(t(),{channelId:a,text:n,delta:r,featureWysiwygComposer:s});return s?Math.max(0,Object(N.a)(o)-T.C):Math.max(0,i.length-T.B)});M.meta={name:"countCharsOverLimit",key:"actionsCountCharsOverMessageLimitCountCharsOverLimit",description:"Count the number of characters over the message length limit"},M.propTypes={channelId:c.default.string,text:c.default.string};var x=M,R=a("6kok"),D=a("Fdc0"),F=a("hOQf"),L=a("XLFM"),U=a("lwWk"),B=a("od5y"),H=a("eglI"),W=a("oxKW"),q=a("nNoG"),G=a("NAkb"),K=a("A/mR"),V=a("OF9j"),z=a("X/Nq");function Y(e,t){return Object(z.a)(new h.a(e),new h.a(t))}var Q=a("u8wn"),X=a("a+Oh"),J=a("icQl"),Z=a("PM8X"),$=a("oT5T"),ee=a("tbBR"),te=a("Pe1S");function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var re=60,se=1e3,ie=new q.b("message"),oe={saveMessageEdit:o.a,channelId:null,teamId:void 0,viewContext:T.I.MESSAGE_PANE,isSelfIm:!1,setDidRequestToStopEditing:o.a,updateEditState:o.a,stopEditingMessage:o.a,updateHasUnsavedChanges:o.a,canDelete:!0,canUnbroadcast:!1,initialEditOps:void 0,initialContents:void 0,didRequestToStopEditing:!1,editWindowMin:-1,isAdminUser:!1,useJumbomoji:!1,messageContainerType:void 0,openModal:o.a,countCharsOverMessageLimit:i.a,featureSonicInputs:!1,clientToolBar:!1,featureWysiwygComposer:!1,completedMessageAction:o.a,featureContextualMessageShortcuts:!1,featureWysiwygAnchorText:!1,featureMsgEditWarnModal:!1},ce="message_pane_edit_input";function le(e){Object(Z.a)({e:e,input_to_fill:"#".concat(ce),offset_y:-8})}class edit_message_BaseEditMessage extends l.PureComponent{constructor(e){super(e),this.setTextyRef=this.setTextyRef.bind(this),this.maybeSave=this.maybeSave.bind(this),this.onTimerInterval=this.onTimerInterval.bind(this),this.renderTimeoutErrorDialog=this.renderTimeoutErrorDialog.bind(this),this.renderLengthErrorDialog=this.renderLengthErrorDialog.bind(this),this.renderUnknownErrorDialog=this.renderUnknownErrorDialog.bind(this),this.stopEditingMessage=this.stopEditingMessage.bind(this),this.handleSaveEditError=this.handleSaveEditError.bind(this),this.onEnter=this.onEnter.bind(this),this.onTextChange=this.onTextChange.bind(this),this.renderInput=this.renderInput.bind(this),this.texty=null,this.syncEditStateOnUnmount=!0,this.editWindowTimeout=null,this.componentDidUnmount=!1,this.enableBroadcastKeywords=!(this.props.messageContainerType===T.I.THREADS_FLEXPANE||this.props.messageContainerType===T.I.THREADS_VIEW),this.textyModules={tabcomplete:{searchOptions:{},positionMenu:e=>{e.style.width="".concat(this.texty.container.offsetWidth,"px"),Object(G.a)(e,this.texty.container)},completers:["channels","emoji","members"]}},this.state={editSecondsRemaining:this.countRemainingSeconds(),numCharsOverLimit:this.props.countCharsOverMessageLimit({channelId:this.props.channelId,text:this.getEditContentsAsString(),delta:this.props.featureWysiwygComposer?new h.a(this.props.originalMessageContents.contents):null,featureWysiwygComposer:this.props.featureWysiwygComposer})},this.getComputedModules=Object(J.a)((e,t,a,n,r,s)=>{return a||n?ne({},e,{composer:ne({},Object(te.a)({featureWysiwygComposer:n,featureWysiwygAnchorText:s}),{teamId:t,zIndexOverride:r?null:200}),slacklink:n&&{convertImages:!1,disableLinksWithLabels:!s},slackmarkdown:n&&{convertHeaders:!1,convertHorizontalRule:!1}}):e})}componentDidMount(){var{isSelfIm:e,editWindowMin:t}=this.props;t>=0&&!e&&(this.editWindowTimeout=setInterval(this.onTimerInterval,se))}componentWillUnmount(){if(this.syncEditStateOnUnmount){var e=this.texty.getContents(),t=this.hasUnsavedChanges();this.props.updateEditState({editOps:e.contents,hasUnsavedChanges:t})}this.editWindowTimeout&&clearInterval(this.editWindowTimeout),this.componentDidUnmount=!0}onEnter(){return this.maybeSave(),!1}onTextChange(){var{didRequestToStopEditing:e,channelId:t}=this.props,{numCharsOverLimit:a}=this.state,n=this.props.countCharsOverMessageLimit({channelId:t,text:this.getEditContentsAsString(),delta:this.props.featureWysiwygComposer?new h.a(this.getEditContents().contents):null,featureWysiwygComposer:this.props.featureWysiwygComposer});(n>0||a>0)&&this.setState(()=>({numCharsOverLimit:n})),this.props.updateHasUnsavedChanges(this.hasUnsavedChanges()),e&&!this.hasUnsavedChanges()&&this.props.setDidRequestToStopEditing(!1)}onTimerInterval(){this.setState(()=>({editSecondsRemaining:this.countRemainingSeconds()}))}getEditContents(){var{initialEditOps:e}=this.props;return this.texty?this.texty.getContents():e?{contents:e}:{contents:[]}}getEditContentsAsString(){var{featureWysiwygComposer:e}=this.props;return e?"":Object(V.a)(this.getEditContents())}setTextyRef(e){this.texty=e&&e.getWrappedInstance?e.getWrappedInstance():e}UNSAFE_componentWillReceiveProps(e){e.didRequestToStopEditing&&!this.hasUnsavedChanges()&&this.stopEditingMessage()}UNSAFE_componentWillUpdate(e,t){var{editSecondsRemaining:a}=t;a<=0&&clearInterval(this.editWindowTimeout)}countRemainingSeconds(){var{isSelfIm:e,editWindowMin:t,ts:a}=this.props;if(t<0||e)return null;var n=60*t*1e3,r=Object(K.l)(a).getTime()+n;return Math.round((r-Date.now())/1e3)}handleSaveEditError(e){var{message:t}=e;switch(t){case"edit_window_closed":this.renderTimeoutErrorDialog();break;case"msg_too_long":this.renderLengthErrorDialog();break;default:this.renderUnknownErrorDialog()}}hasUnsavedChanges(){var{initialEditOps:e,originalMessageContents:t}=this.props;return this.texty?!Y(this.texty.getContents.contents,t.contents):!e||!(e&&Y(e,t.contents))}isSavingDisabled(){var{editSecondsRemaining:e}=this.state;return Object(s.a)(e)&&e<=0||this.shouldShowLengthWarning()}maybeSave(){var{channelId:e,ts:t,viewContext:a,featureWysiwygComposer:n}=this.props,{editSecondsRemaining:r,numCharsOverLimit:i}=this.state;return!(i>0)&&(!(Object(s.a)(r)&&r<=0)&&(this.texty.isEmpty({doIgnoreWhitespace:!0})?(this.startDelete(),!1):(this.props.saveMessageEdit({channelId:e,text:this.getEditContentsAsString(),delta:n?new h.a(this.getEditContents().contents):null,viewContext:a,ts:t}).catch(this.handleSaveEditError),!0)))}shouldShowLengthWarning(){var{numCharsOverLimit:e}=this.state;return e>0}shouldShowTimeoutWarning(){var{editSecondsRemaining:e}=this.state;return Object(s.a)(e)&&e<re}shouldShowUnsavedWarning(){var{didRequestToStopEditing:e}=this.props;return e&&this.hasUnsavedChanges()}startDelete(){var{channelId:e,originalMessageTextUsedForDeletionOnly:t,originalMessageContents:a,canDelete:n,canUnbroadcast:r,ts:s,viewContext:i,featureWysiwygComposer:o}=this.props;if(n)this.props.openModal({element:d.a.createElement(I.a,{channelId:e,ts:s})});else if(r)this.props.openModal({element:d.a.createElement(S.a,{channelId:e,ts:s})});else if(o){var c=new h.a(a.contents),l=c.compose((new h.a).retain(c.length(),{strike:!0}));this.props.saveMessageEdit({channelId:e,delta:l,viewContext:i,ts:s}).catch(this.handleSaveEditError)}else{var p=t.replace(/~/g,""),u="~".concat(p,"~");this.props.saveMessageEdit({channelId:e,text:u,viewContext:i,ts:s}).catch(this.handleSaveEditError)}}stopEditingMessage(){var{channelId:e,ts:t,viewContext:a,featureContextualMessageShortcuts:n,completedMessageAction:r}=this.props;this.syncEditStateOnUnmount=!1,this.props.stopEditingMessage({viewContext:a,channelId:e,ts:t}),n&&r({viewContext:a,channelId:e,ts:t,focusOnInput:!0})}renderInput(){var{initialContents:e,messageHasText:t,useJumbomoji:a,channelId:n,featureSonicInputs:r,clientToolBar:s,featureWysiwygComposer:i,featureWysiwygAnchorText:o,teamId:c}=this.props,l=t?ie.t("Edit message"):ie.t("Add message"),p=s&&!r?"c-message__editor__input--legacy c-message__editor__input--client_toolbar":"c-message__editor__input--legacy";if(!r){var u=this.getComputedModules(this.textyModules,c,s,i,r,o);return d.a.createElement(d.a.Fragment,null,d.a.createElement(H.default,{id:ce,ref:this.setTextyRef,className:p,modules:u,ariaLabel:l,placeholder:l,initialText:e,onEnter:this.onEnter,onEscape:this.stopEditingMessage,onTextChange:this.onTextChange,enableJumbomoji:a,focusOnMount:!0,useLegacyCreate:!0,channelId:n,enableBroadcastKeywords:this.enableBroadcastKeywords,useFocusRing:!1}),d.a.createElement(L.c,{onClick:le,className:"c-message__editor__emoji_menu","aria-label":"Emoji menu"},d.a.createElement(B.a,{className:"c-message__editor__emoji_circle_icon",type:"circle-fill"}),d.a.createElement(B.a,{className:"c-message__editor__emoji_smile_icon",type:"smile-o"}),d.a.createElement(B.a,{className:"c-message__editor__emoji_happy_icon",type:"happy-smile"})))}return d.a.createElement(W.a,{completeOnChannels:!0,completeOnEmoji:!0,completeOnMembers:!0,shouldCompleteOnTab:!0,channelId:this.props.channelId,renderInput:t=>{var{isOpen:p,modules:u}=t,h=this.getComputedModules(u,c,s,i,r,o);return d.a.createElement(H.default,{ref:this.setTextyRef,className:"c-message__editor__input",modules:h,ariaLabel:l,placeholder:l,initialText:e,onEnter:this.onEnter,onEscape:this.stopEditingMessage,onTextChange:this.onTextChange,enableJumbomoji:a,isAutocompleteOpen:p,focusOnMount:!0,channelId:n,enableBroadcastKeywords:this.enableBroadcastKeywords,enableEmojiButton:!0,enableComposerButton:i,enableSendButton:!1,useFocusRing:!1})}})}renderLengthErrorDialog(){var e=ie.t("Message editing failed"),t=ie.t("Sorry, your message is too long. Please shorten it and try again.");this.props.openModal({element:d.a.createElement($.a,{title:e},t)})}renderLengthWarning(){var e=ie.t("text is too long!");return d.a.createElement("span",{className:"c-message__editor__warning","data-js":"length_warning"},e)}renderTimeoutErrorDialog(){var e,{editWindowMin:t,isAdminUser:a}=this.props,n=Object(K.p)(t,{units:"minutes"}),r=ie.t("Message editing failed"),s=ie.rt("Sorry, but messages can only be edited for {duration} after posting.",{duration:d.a.createElement("b",null,n)});a&&(e=ie.rt("(To adjust the message editing window, visit <a>Workspace Settings</a>)",null,e=>{var{text:t}=e;return d.a.createElement(U.a,{href:"/admin/settings#message_editing",target:"_new"},t)})),this.props.openModal({element:d.a.createElement($.a,{title:r},d.a.createElement("p",null,s),e)})}renderTimeoutWarning(){var e,{editSecondsRemaining:t}=this.state;return t<=0?e=ie.t("(your time to edit ran out)"):t<=re&&(e=ie.rt("(you have <b>{seconds, number}</b> {seconds, plural, =1{second}other{seconds}})",{seconds:t})),d.a.createElement("span",{className:"c-message__editor__warning","data-js":"timeout_warning"},e)}renderUnknownErrorDialog(){var e=ie.t("Message editing failed"),t=ie.t("Sorry, something went wrong with editing your message. Try again in a moment.");this.props.openModal({element:d.a.createElement($.a,{title:e},t)})}renderUnsavedWarning(){var e=ie.rt("Finish editing this message first! Or press <b>escape</b> if you\u2019ve changed your mind.");return d.a.createElement("span",{className:"c-message__editor__info","data-js":"unsaved_warning"},e)}renderWarningMessages(){var e=!this.props.featureMsgEditWarnModal&&this.shouldShowUnsavedWarning()&&this.renderUnsavedWarning(),t=this.shouldShowTimeoutWarning()&&this.renderTimeoutWarning(),a=this.shouldShowLengthWarning()&&this.renderLengthWarning();return e||t||a?d.a.createElement("div",{role:"alert",className:"c-message__editor__messages"},e,t,a):null}render(){return d.a.createElement("div",{className:"c-message__editor","data-qa":"message_editor"},d.a.createElement("div",{className:"c-message__editor__input_container"},this.renderInput()),d.a.createElement("div",{className:"c-message__editor__footer"},d.a.createElement(L.d,{type:"outline",size:"small",onClick:this.stopEditingMessage},ie.t("Cancel")),d.a.createElement(L.d,{size:"small",className:"c-message__editor__save",onClick:this.maybeSave,disabled:this.isSavingDisabled()},d.a.createElement(B.a,{type:"enter",className:"margin_right_50"}),ie.t("Save Changes")),this.renderWarningMessages()))}}edit_message_BaseEditMessage.defaultProps=oe;var de={saveMessageEdit:w.a,setDidRequestToStopEditing:E.h,updateEditState:E.k,stopEditingMessage:E.b,updateHasUnsavedChanges:E.l,openModal:_.e,countCharsOverMessageLimit:x,completedMessageAction:k.a},pe=Object(ee.b)(Object(p.b)(function(e,t){var{ts:a,channelId:n,viewContext:s,messageContainerType:i}=t,o=Object(f.a)(e,n,a);if(!o)return{};var c,l=Object(X.a)(e),d=Object(v.e)(e,n),p=Object(O.a)(e,"msg_edit_window_mins"),u=Object(j.b)(e),h=Object(y.a)(e),_=Object(F.k)(e,{message:o,channel:d,messageContainerType:i}),k=Object(F.p)(e,{message:o,channel:d,messageContainerType:i}),{editOps:S,didRequestToStopEditing:I}=Object(E.e)(e,{viewContext:s,channelId:n,ts:a})||{},w=Object(m.m)(e,"feature_plain_text_mode")&&Object(C.k)(e,"plain_text_mode"),T={contents:Object(Q.a)(e,o,{featureWysiwygComposer:l,usePlainTextMode:w}).ops};return c=S?{contents:S}:T,{channelId:d.id,teamId:Object(b.b)(e),isSelfIm:Object(R.Tb)(u.id,d),canDelete:_,canUnbroadcast:k,originalMessageContents:T,initialEditOps:S,initialContents:c,ts:a,originalMessageTextUsedForDeletionOnly:o.text||"",messageHasText:l?!(!o.text&&Object(r.a)(o.blocks)):!!o.text,editWindowMin:p,isAdminUser:Object(D.eb)(e,u),didRequestToStopEditing:I,useJumbomoji:h,featureSonicInputs:Object(m.m)(e,"feature_sonic_inputs"),clientToolBar:"composer_toolbar"===Object(g.c)(e,"composer_toolbar"),featureWysiwygComposer:l,featureContextualMessageShortcuts:Object(m.m)(e,"feature_contextual_message_shortcuts"),featureWysiwygAnchorText:Object(m.m)(e,"feature_wysiwyg_anchor_text"),featureMsgEditWarnModal:Object(m.m)(e,"feature_msg_edit_warn_modal")}},de)(edit_message_BaseEditMessage));pe.propTypes={ts:c.default.string.isRequired,channelId:c.default.string.isRequired};t.a=pe},YDA8:function(e,t,a){"use strict";var n=a("wx14"),r=a("UXvI"),s=a("lCmp"),i=a("ifKl"),o=a("qAkX"),c=a("Z0Cl"),l=(a("aK/h"),a("q1tI")),d=a.n(l),p=a("tn36"),u=a("XHGt"),h=a("3zPy"),m=a("nNoG"),b=a("Go8C"),_=a("YYb+"),g=a("Rjjz"),f=a("yU6Y"),v=a.n(f),O=a("rWF5"),y=a("t85p"),C=a("HXD8"),j=a("uwE/"),E=a("uxhc"),k=a("brL+"),S=a("Zr7G"),I=a("Smdl"),w=a("dxEi"),T=a("RX/a"),N=a("bmfP"),P=a("od5y"),A=a("wljo"),M=new m.b("search"),x=e=>{var{shouldShowOfflineNotice:t,shouldShowFeedbackLink:a,onFeedbackClick:n}=e;return(t||a)&&d.a.createElement("footer",null,d.a.createElement(N.a,null,d.a.createElement("span",{className:"c-search_autocomplete__footer_offline_notice",id:"footer-instructions"},M.rt("{iconOffline} <strong>No connection.</strong> Search is not available while offline, and navigating to conversations may be limited.",{iconOffline:d.a.createElement(P.b,{type:"cloud-offline",size:"inherit",className:"c-icon--inline"})}))),d.a.createElement(A.a,{className:"c-search_autocomplete__footer_feedback",onClick:n}))};x.defaultProps={shouldShowOfflineNotice:!1,shouldShowFeedbackLink:!1};var R=x,D=(a("L0DF"),new m.b("search")),F=new m.b("view"),L={selectedIndex:null,onAccept:i.a,onDelete:i.a,onSelectedIndexChange:i.a,displayQuery:null,userQuery:null,telemeter:S.d},U=(e,t)=>(e%t+t)%t;class autocomplete_SearchAutocomplete extends l.Component{constructor(e){super(e),Object(p.a)(this,["onKeydown","onUserQueryChange","onSuggestionAccept","onSuggestionDelete","onSuggestionSelected","onMouseLeaveList","onFeedbackClick"]),this.searchAutocompleteSuggestionsPromise=void 0,this.markAutocompleteRenderStart=Object(r.a)(C.b.bind(null,e.telemeter),2e3,{leading:!0}),this.populateChannelNameCounts(),this.listRef=d.a.createRef(),this.listItemRefs={}}componentDidMount(){document.body.addEventListener("keydown",this.onKeydown),this.onUserQueryChange(),Object(E.e)(this.props.teamId);var e=Object(I.a)()?"omniswitcher-open-sonic":"omniswitcher-open-legacy";this.props.telemeter.measureAndClear("omniswitcher-open-mark",e)}shouldComponentUpdate(e){return e.selectedIndex!==this.props.selectedIndex||e.suggestions!==this.props.suggestions||e.shouldShowOfflineNotice!==this.props.shouldShowOfflineNotice}componentDidUpdate(e){e.userQuery!==this.props.userQuery&&this.onUserQueryChange(),this.populateChannelNameCounts()}componentWillUnmount(){document.body.removeEventListener("keydown",this.onKeydown)}onFeedbackClick(){this.props.openSearchFeedbackDialog({query:this.props.userQuery})}onKeydown(e){var t=()=>(e.preventDefault(),e.stopPropagation(),!1),a=e.shiftKey,n=e.which,{up:r,tab:s,down:i}=h.codes;return!a&&n===r||a&&n===s?(this.decrementSelectedIndex(),t()):!(!a&&n===i||n===s)||(this.incrementSelectedIndex(),t())}onUserQueryChange(){Object(C.a)(this.props.telemeter)}onSuggestionDelete(e){this.props.setSearchAutocompleteSuggestions({suggestions:Object(c.a)(this.props.suggestions,t=>e.key!==t.key)}),this.props.onDelete()}onSuggestionSelected(e,t){this.props.setSearchAutocompleteSelection({selectedIndex:e,setText:!t})}onMouseLeaveList(){this.props.setSearchAutocompleteSelection({selectedIndex:null,setText:!1})}onSuggestionAccept(){this.props.onAccept()}getListItemRef(e){return this.listItemRefs[e]||(this.listItemRefs[e]=d.a.createRef()),this.listItemRefs[e]}scrollToListItemIndex(e){if(this.listRef&&this.listRef.current&&this.listItemRefs[e]&&this.listItemRefs[e].current){var t=this.listRef.current;if(0!==e){var a=this.listItemRefs[e].current.getWrappedInstance?this.listItemRefs[e].current.getWrappedInstance():this.listItemRefs[e].current,n=a.offsetTop-t.offsetTop,r=n+a.offsetHeight;n<t.scrollTop&&(t.scrollTop=n),r>t.scrollTop+t.clientHeight&&(t.scrollTop=r-t.clientHeight)}else t.scrollTop=0}}populateChannelNameCounts(){this.channelNameCounts={},this.props.suggestions.forEach(e=>{e.is_type_channel&&(this.channelNameCounts[e.channel.name]=(this.channelNameCounts[e.channel.name]||0)+1)})}incrementSelectedIndex(){var e=this.props.suggestions&&this.props.suggestions[this.props.selectedIndex||0];if(e&&e.type===j.b.QUERY&&e.suggestion_replacement!==this.props.displayQuery)this.props.setSearchAutocompleteSelection({selectedIndex:this.props.selectedIndex,setText:!0});else{var t=U((null===this.props.selectedIndex?-1:this.props.selectedIndex)+1,this.props.suggestions.length);this.props.setSearchAutocompleteSelection({selectedIndex:t,setText:!0}),this.scrollToListItemIndex(t)}}decrementSelectedIndex(){var e=U(this.props.selectedIndex-1,this.props.suggestions.length);this.props.setSearchAutocompleteSelection({selectedIndex:e,setText:!0}),this.scrollToListItemIndex(e)}propsForSuggestion(e,t){var a=t.is_type_channel&&this.channelNameCounts[t.channel.name]>1;return{index:e,suggestion:t,key:t.key,isSelected:e===this.props.selectedIndex,onSelected:this.onSuggestionSelected,onAccept:this.onSuggestionAccept,onDelete:this.onSuggestionDelete,hasChannelNameCollision:a}}renderScreenReaderWorkaround(){if(!(v.a.chrome&&v.a.version<67&&Object(O.v)()))return null;var e=this.props.selectedIndex,t=Object(o.a)(this.props.suggestions.map((t,a)=>(t.is_type_navigational||t.is_type_action)&&a===e?d.a.createElement(T.a,this.propsForSuggestion(a,t)):null).filter(e=>e));return d.a.createElement("div",{"aria-live":"polite",className:"offscreen"},t)}renderBlankSlate(){var{shouldShowOfflineNotice:e,featureTinyspeck:t}=this.props,a=Object(s.a)(this.props.suggestions,e=>e.is_type_query_history),r=d.a.createElement("header",null,d.a.createElement("span",{className:"c-search_autocomplete__header_label"},d.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},D.t("Recent searches")))),i=this.props.suggestions.map((e,t)=>e.is_type_query_history&&d.a.createElement(T.a,Object(n.a)({listItemRef:this.getListItemRef(t)},this.propsForSuggestion(t,e)))),o=Object(s.a)(this.props.suggestions,e=>e.is_type_navigational),c=d.a.createElement("header",null,d.a.createElement("span",{className:"c-search_autocomplete__header_label"},d.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},F.t("Unreads & drafts",{fallbackHash:"95ed8c1c63175388741df85c038e3dc99d8ac375"})))),p=this.props.suggestions.map((e,t)=>e.is_type_navigational&&d.a.createElement(T.a,Object(n.a)({listItemRef:this.getListItemRef(t)},this.propsForSuggestion(t,e)))),u=this.renderScreenReaderWorkaround(),h=d.a.createElement(l.Fragment,null,o&&d.a.createElement("li",{role:"presentation"},c),p),m=d.a.createElement(l.Fragment,null,a&&d.a.createElement("li",{role:"presentation"},r),i);return d.a.createElement("div",{className:"c-search_autocomplete"},u,d.a.createElement("ol",{ref:this.listRef,className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list",onMouseLeave:this.onMouseLeaveList},h,m),d.a.createElement(R,{shouldShowFeedbackLink:t,shouldShowOfflineNotice:e,onFeedbackClick:this.onFeedbackClick}))}render(){var{shouldShowOfflineNotice:e,featureTinyspeck:t}=this.props;if(!this.props.userQuery)return this.renderBlankSlate();this.markAutocompleteRenderStart();var a=this.renderScreenReaderWorkaround();return d.a.createElement("div",{className:"c-search_autocomplete"},a,d.a.createElement("ol",{ref:this.listRef,className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list",onMouseLeave:this.onMouseLeaveList},this.props.suggestions.map((e,t)=>d.a.createElement(T.a,Object(n.a)({listItemRef:this.getListItemRef(t)},this.propsForSuggestion(t,e))))),d.a.createElement(R,{shouldShowOfflineNotice:e,shouldShowFeedbackLink:t,onFeedbackClick:this.onFeedbackClick}))}}autocomplete_SearchAutocomplete.defaultProps=L;var B={setSearchAutocompleteSelection:function(){return Object(_.i)(...arguments)},setSearchAutocompleteSuggestions:function(){return Object(_.j)(...arguments)},fetchSearchAutocompleteSuggestions:function(){return Object(g.b)(...arguments)},openSearchFeedbackDialog:function(){return Object(g.l)(...arguments)}};t.a=Object(u.b)(e=>({suggestions:Object(_.d)(e),selectedIndex:Object(_.c)(e),userQuery:Object(b.d)(e),displayQuery:Object(b.b)(e),teamId:Object(k.b)(e),telemeter:Object(S.c)({state:e}),shouldShowOfflineNotice:Object(y.m)(e,"feature_offline_mode")&&!Object(w.c)(e),featureTinyspeck:Object(y.m)(e,"feature_tinyspeck")}),B)(autocomplete_SearchAutocomplete)},YL49:function(e,t,a){},YcId:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("nNoG")),i=a("5mKg"),o=(a("UCMe"),new s.b("unavailable_channel")),c={memberTeam:void 0};function l(e){var{memberTeam:t}=e;return r.a.createElement("div",{className:"p-member_profile_card__special_text"},o.rt("{teamName} is making some changes to their workspace, so content and conversations shared with them are temporarily unavailable.",{teamName:r.a.createElement("strong",null,Object(i.e)(t))}))}l.defaultProps=c,t.a=l},YjF7:function(e,t,a){},YlHk:function(e,t,a){},YmYS:function(e,t,a){"use strict";function n(){var{isPinned:e,isStarred:t,isEphemeral:a,isBroadcast:n,isCustomResponse:r,isSliHighlight:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n?"broadcast":e?"pinned":t?"starred":a?"ephemeral":r?"custom_response":s?"sli_highlight":void 0}a.d(t,"a",function(){return n})},Ymwh:function(e,t,a){"use strict";a.d(t,"a",function(){return p}),a.d(t,"b",function(){return u});var n=a("aK/h"),r=a("XfeM"),s=a("yHhI"),i=a("kOzZ"),o=a("negh"),c=a("Dpde"),l=a("i6Ao"),d=function(e){var{fromKeyboardShortcut:t,elementName:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)({state:e}).track(o.EventId.HISTORY_NAVIGATION,{contexts:{ui_context:{action:t?o.UiAction.KEYDOWN:o.UiAction.CLICK,ui_properties:{element_type:o.ElementType.BUTTON,element_name:a}}}})},p=Object(r.b)("Go back in history",function(e,t){var{event:a,fromKeyboardShortcut:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a&&a.preventDefault();var r=t(),i=Object(s.a)({state:r,label:"HISTORY-NAVIGATION"});if(Object(c.b)(r)){if(Object(l.a)())return void i.debug("This is the beginning of the history stack \u2b05\ufe0f");i.debug("Moving back in history"),window.history.back(),Object(l.d)(),d(r,{fromKeyboardShortcut:n,elementName:"back"})}else i.debug("Moving back in history"),window.history.back(),d(r,{fromKeyboardShortcut:n,elementName:"back"})});p.meta={name:"triggerNavigateBack",key:"actionsKeyCommandsTriggerHistoryNavigationTriggerNavigateBack",description:"Go back in history"},p.propTypes={event:n.default.object,fromKeyboardShortcut:n.default.bool};var u=Object(r.b)("Go forward in history",function(e,t){var{event:a,fromKeyboardShortcut:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a&&a.preventDefault();var r=t(),i=Object(s.a)({state:r,label:"HISTORY-NAVIGATION"});if(Object(c.b)(r)){if(Object(l.b)())return void i.debug("This is the end of the history stack \u27a1\ufe0f");i.debug("Moving forward in history"),window.history.forward(),Object(l.e)(),d(r,{fromKeyboardShortcut:n,elementName:"forward"})}else i.debug("Moving forward in history"),window.history.forward(),d(r,{fromKeyboardShortcut:n,elementName:"forward"})});u.meta={name:"triggerNavigateForward",key:"actionsKeyCommandsTriggerHistoryNavigationTriggerNavigateForward",description:"Go forward in history"},u.propTypes={event:n.default.object,fromKeyboardShortcut:n.default.bool}},YyUD:function(e,t,a){},Z1bu:function(e,t,a){"use strict";a.d(t,"a",function(){return b}),a.d(t,"b",function(){return _});var n=a("7EGn"),r=a("oTSI"),s=a("aK/h"),i=a("btvA"),o=a("lhZz"),c=a("XfeM"),l=a("brL+"),d=a("vhAc"),p=a("yHhI"),u=a("7tsZ"),h=(e,t)=>((e,t)=>(Object(p.a)({teamId:e}).info("PLATFORM-CHANNEL-ACTIONS","fetching channel actions for channel ".concat(t)),Object(o.dispatchForTeamId)(e,Object(d.b)({resourceType:"channel",resourceId:t})).then(e=>e.map(e=>({appId:Object(n.a)(e,"app.app_id"),id:Object(n.a)(e,"action_id"),name:Object(n.a)(e,"name"),description:Object(n.a)(e,"description"),type:Object(n.a)(e,"type"),app:Object(n.a)(e,"app"),channelId:t})))))(e,t).then(a=>{m().markObjectsAsFresh(e,[t]),Object(o.dispatchForTeamId)(e,Object(u.a)({channelId:t,actions:a}))}),m=Object(r.a)(()=>new i.b({fetch:(e,t)=>Promise.map(t,t=>h(e,t)),isEnabled:()=>!0})),b=Object(c.b)("Mark actions for channelIds as stale",(e,t,a)=>{var n=m(),r=t(),s=Object(l.b)(r);n.markObjectsAsStale(s,a)});b.meta={name:"markChannelActionsAsStaleForChannels",key:"channelActionsStoreConditionalFetchingMarkChannelActionsAsStaleForChannels",description:"Mark actions for channelIds as stale"},b.propTypes=s.default.arrayOf(s.default.string).isRequired;var _=(e,t)=>{m().maybeRefetch(e,t)}},Z6RV:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=a("g5qt"),o=(a("aK/h"),a("GxtX")),c=a("bPB8"),l=a("UXvI"),d=a("XfeM"),p=a("brL+"),u=a("lhZz"),h=a("9E9B"),m=a("DTfP"),b=a("zoXk"),_=a("BwAi"),g=a("mmRP"),f=a("Smdl"),v=a("yHhI"),O=Object(l.a)(e=>{var t=Object(u.getStateByTeamId)(e);return Object(f.a)()&&!Object(b.k)(t)?Promise.resolve():Object(u.dispatchForTeamId)(e,Object(_.a)({reason:"requestOfflineCounts"})).tap(()=>Object(u.dispatchForTeamId)(e,Object(m.k)())).tap(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.dispatchForTeamId)(e,Object(g.a)(t))}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(c.a)(Object(o.a)(t.channels,t.groups));Object(u.dispatchForTeamId)(e,Object(h.reconcileChannelAccess)({channels:a}))}).catch(a=>{Object(v.a)({state:t}).error("Failed to fetch offline users counts for ".concat(e,": ").concat(a))})},6e4,{trailing:!1}),y=Object(d.b)("Request offline users counts",(e,t)=>O(Object(p.b)(t())));y.meta={name:"requestOfflineCounts",key:"actionsRequestOfflineCountsRequestOfflineCounts",description:"Request offline users counts"},y.propTypes={};var C=y,j=a("Cbpi"),E=a("vmJv"),k=a("BeG2"),S=a("2HDu"),I=a("0f2Y"),w=a("A/mR"),T=a("rWF5"),N=a("nNoG"),P=a("+1yX"),A=a("4v0o"),M=(a("yqYT"),new N.b("ms")),x=6e4,R=1e4,D={currentThreadKey:void 0};function F(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{currentThreadKey:a,primaryView:s,reconnectImmediately:o,requestOfflineCounts:c,requestOfflineHistory:l}=t,d=Object(n.useRef)(),p=Object(n.useRef)(),[u,h]=Object(n.useState)(),[m,b]=Object(n.useState)(!1);function _(){d.current=Date.now()}function g(){h(Object(w.o)(d.current/1e3))}function v(e){e&&e.preventDefault&&e.preventDefault(),b(!0),p.current=setTimeout(()=>{b(!1)},R),function(){var e=[];if((Object(P.a)(s)||s===A.a.allThreads)&&e.push(l({channelId:s})),a){var{channelId:t,threadTs:n}=Object(S.a)(a);e.push(l({channelId:t,threadTs:n}))}return e.push(c()),o(),Promise.all(e)}().then(()=>{_(),h()})}function O(e){var{tag:t,text:a}=e;return"a"===t?r.a.createElement(I.a,{className:"p-message_pane__degraded_banner__reload_cta",onClick:v,"data-qa":"connecting_banner_cta"},a):r.a.createElement("div",{className:"p-message_pane__degraded_banner__banner_text"},a)}return Object(n.useEffect)(()=>{_();var e=setInterval(g,x);return()=>{clearInterval(e),clearTimeout(p.current)}},[]),!Object(f.a)()||m?null:(e=u?M.rt("<div>Last updated {timeAgo}\u2026</div><a>Load new messages</a>",{timeAgo:u},O):M.rt("<div>Last updated less than a minute ago\u2026</div><a>Load new messages</a>",null,O),r.a.createElement("div",{className:"p-message_pane__degraded_banner p-message_pane__banner"},e,r.a.createElement("div",{"aria-live":"assertive",className:"offscreen"},i.W?u?M.t("Last updated {timeAgo}\u2026 Press F6 to navigate to the status banner and click load new messages",{timeAgo:u}):M.t("Last updated less than a minute ago\u2026 Press F6 to navigate to the status banner and click load new messages"):Object(T.q)()?u?M.t("Last updated {timeAgo}\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages",{timeAgo:u}):M.t("Last updated less than a minute ago\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages"):u?M.t("Last updated {timeAgo}\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages",{timeAgo:u}):M.t("Last updated less than a minute ago\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages"))))}F.defaultProps=D;t.a=Object(s.b)(e=>({currentThreadKey:Object(S.b)(e),primaryView:Object(E.a)(e)}),e=>({reconnectImmediately:function(){return e(Object(k.h)(...arguments))},requestOfflineCounts:function(){return e(C(...arguments))},requestOfflineHistory:function(){return e(Object(j.a)(...arguments))}}))(F)},Z7NI:function(e,t,a){"use strict";a.d(t,"a",function(){return p});var n=a("wx14"),r=a("Ff2n"),s=a("q1tI"),i=a.n(s),o=a("TSYQ"),c=a.n(o),l=(a("aK/h"),a("llxT")),d={disabled:!1,listEntityProps:{}};function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};class ListEntityButton extends s.PureComponent{constructor(e){super(e),this.state={isActive:!1},this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this)}handleMouseEnter(){this.setState(()=>({isActive:!0}))}handleMouseLeave(){this.setState(()=>({isActive:!1}))}render(){var a=this.props,{id:s,listEntityProps:o}=a,d=Object(r.a)(a,["id","listEntityProps"]),{isActive:p}=this.state,u=c()(o.className,t.className);return i.a.createElement(l.a,Object(n.a)({onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},d),i.a.createElement(e,Object(n.a)({id:s,isActive:p&&!this.props.disabled,isDisabled:this.props.disabled},t,o,{className:u})))}}return ListEntityButton.defaultProps=d,ListEntityButton}},ZSbO:function(e,t,a){"use strict";a("aK/h");var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=a("XL7r"),o=a("VMwU"),c=a("W+QA"),l=a("yHhI"),d=a("t85p"),p=a("Dpde"),u=a("Lev8"),h=e=>{var t=Object(c.e)(Object(c.c)(e.theme,e.custom,{clientTheme:e.clientTheme}));if(!t)return e.logger.error("SIDEBAR_THEME",'Theme: could not identify theme "'.concat(e.theme,'" (').concat(e.custom,")")),null;var a=Object(o.d)(t,{featureClassicNav:e.featureClassicNav}),n=t.text_color,s=Object(o.c)(t.column_bg,25),i=Object(o.c)(t.column_bg,35),l=e.historyNavigationEnabled?Object(o.m)(n,.15):s,d=e.historyNavigationEnabled?Object(o.m)(n,.2):i,p=Object(o.b)(n,Object(o.m)(n,.3)),u="\n\t\t.p-channel_sidebar {\n\t\t\tbackground: ".concat(t.column_bg,";\n\t\t\tcolor: ").concat(a,';\n\t\t}\n\n\t\t/* Cover up "p-channel_sidebar__icon" when the close button is focused */\n\t\t.p-channel_sidebar__close:focus {\n\t\t\tbackground: ').concat(t.column_bg,";\n\t\t}\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close:focus {\n\t\t\tbackground: ").concat(t.active_item,";\n\t\t}\n\n\t\t.p-channel_sidebar__channel,\n\t\t.p-channel_sidebar__link,\n\t\t.p-channel_sidebar__channel:link,\n\t\t.p-channel_sidebar__link:link,\n\t\t.p-channel_sidebar__channel:visited,\n\t\t.p-channel_sidebar__link:visited,\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover {\n\t\t\tcolor: ").concat(a,";\n\t\t}\n\t\t.p-channel_sidebar__section_heading--selected,\n\t\t.p-channel_sidebar__section_heading--selected:hover,\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__channel--selected:link,\n\t\t.p-channel_sidebar__link--selected:link,\n\t\t.p-channel_sidebar__channel--selected:visited,\n\t\t.p-channel_sidebar__link--selected:visited,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected:hover,\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close,\n\t\t.p-channel_sidebar__link--selected + .p-channel_sidebar__close {\n\t\t\tcolor: ").concat(t.active_item_text,";\n\t\t}\n\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover,\n\t\t.p-channel_sidebar__close_container:hover {\n\t\t\tbackground: ").concat(t.hover_item,";\n\t\t}\n\n\t\t.p-channel_sidebar__header {\n\t\t\tcolor: ").concat(a,';\n\t\t}\n\n\t\t/* Folders */\n\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename {\n\t\t\tbackground: ').concat(s,";\n\t\t\tcolor: ").concat(a,';\n\t\t}\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename:hover {\n\t\t\tbackground: ').concat(i,";\n\t\t\tcolor: ").concat(a,";\n\t\t}\n\n\t\t/* Override presence icons */\n\t\t.p-channel_sidebar__presence_icon.c-presence--active,\n\t\t.p-channel_sidebar__channel_icon_prefix--im-slackbot {\n\t\t\tcolor: ").concat(t.active_presence,";\n\t\t}\n\t\t.p-channel_sidebar__channel--selected .p-channel_sidebar__presence_icon.c-presence,\n\t\t.p-channel_sidebar__channel--selected .p-channel_sidebar__channel_icon_prefix--im-slackbot {\n\t\t\tcolor: ").concat(t.active_item_text,";\n\t\t}\n\t\t.p-channel_sidebar__presence_icon.c-presence--away {\n\t\t\tcolor: ").concat(a,";\n\t\t}\n\n\t\t.p-channel_sidebar__section_heading--selected,\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__link--selected:hover {\n\t\t\tbackground: ").concat(t.active_item,";\n\t\t}\n\n\t\t.p-channel_sidebar__section_heading--selected:hover .p-channel_sidebar__section_heading_label,\n\t\t.p-channel_sidebar__channel--selected .p-channel_sidebar__channel_icon_prefix,\n\t\t.p-channel_sidebar__channel--selected:hover .p-channel_sidebar__channel_icon_prefix,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__channel--selected:after,\n\t\t.p-channel_sidebar__channel--selected:hover:after,\n\t\t.p-channel_sidebar__link--selected:after,\n\t\t.p-channel_sidebar__link--selected:after {\n\t\t\tcolor: ").concat(t.active_item_text,";\n\t\t}\n\n\t\t.p-channel_sidebar__badge:not(.c-mention_badge--transparent),\n\t\t.p-channel_sidebar__banner--mentions {\n\t\t\tbackground: ").concat(t.badge,";\n\t\t}\n\n\t\t.p-channel_sidebar .c-custom_scrollbar__thumb_vertical,\n\t\t.p-channel_sidebar .c-scrollbar__bar {\n\t\t\tbackground: ").concat(Object(o.m)(n,.45),";\n\t\t}\n\n\t\t.client_channels_list_container.focusablesection:focus .sectionfocusindicator,\n\t\t.client_channels_list_container .focus-ring,\n\t\t.p-channel_sidebar.focusablesection:focus .sectionfocusindicator,\n\t\t#team_menu.focusablesection:focus .sectionfocusindicator {\n\t\t\tbox-shadow: ").concat(p,";\n\t\t}\n\n\t\t.client_channels_list_container a:not(.c-link--focus-visible).focus-ring,\n\t\t.client_channels_list_container button:not(.c-button--focus-visible).focus-ring,\n\t\t.p-channel_sidebar__jumper.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__history_button.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_label--clickable.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_plus.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__channel.c-link--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.c-button--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.c-link--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__close.c-button--focus-visible:focus {\n\t\t\tbox-shadow: ").concat(p,";\n\t\t}\n\n\t\t/** `opacity: 1` color overrides */\n\t\t.p-channel_sidebar__channel--unread:not(.p-channel_sidebar__channel--muted):not(.p-channel_sidebar__channel--suggested):not(.p-channel_sidebar__channel--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--unread:not(.p-channel_sidebar__link--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--invites:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--add-channel:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--add-apps:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__section_heading:not(.p-channel_sidebar__section_heading--selected) .p-channel_sidebar__section_heading_label--clickable:hover,\n\t\t.p-channel_sidebar__section_heading:not(.p-channel_sidebar__section_heading--selected) .p-channel_sidebar__section_heading_label--unreads,\n\t\t.p-channel_sidebar__quickswitcher:hover {\n\t\t\tcolor: ").concat(n,";\n\t\t}\n\n\t\t/** Navigation Bar **/\n\t\t.p-channel_sidebar__jumper {\n\t\t\tbackground: ").concat(l,";\n\t\t}\n\t\t.p-channel_sidebar__jumper:hover {\n\t\t\tbackground: ").concat(d,";\n\t\t}\n\t\t.p-channel_sidebar__history_button {\n\t\t\tbackground: ").concat(l,";\n\t\t}\n\t\t.p-channel_sidebar__history_button:hover {\n\t\t\tbackground: ").concat(d,";\n\t\t}\n\t\t.p-channel_sidebar__history_button--disabled:hover {\n\t\t\tbackground: ").concat(l,";\n\t\t}\n\n\t\t/** Compose Button **/\n\t\t.p-channel_sidebar__compose_button,\n\t\t.p-ia__big_search_compose {\n\t\t\tbackground: ").concat(n,";\n\t\t\tcolor: ").concat(t.column_bg,";\n\t\t}\n\t\t.p-channel_sidebar__compose_button--disabled {\n\t\t\tbackground: ").concat(a,";\n\t\t}\n\n\t\t/** Classic Nav **/\n\t\t.p-classic_nav__team_header {\n\t\t\tbackground: ").concat(t.column_bg,";\n\t\t\tcolor: ").concat(n,";\n\t\t}\n\t\t.p-classic_nav__team_header:hover {\n\t\t\tbackground: ").concat(t.menu_bg,";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--active {\n\t\t\tcolor: ").concat(t.active_presence,";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--away {\n\t\t\tcolor: ").concat(a,";\n\t\t}\n\t\t.p-classic_nav__team_header .c-link--focus-visible:focus,\n\t\t.p-classic_nav__team_header .c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__static_list__item.c-virtual_list__item--focus:focus:after,\n\t\tdiv[aria-selected=true].p-channel_sidebar__static_list__item:focus:after {\n\t\t\tbox-shadow: ").concat(p,";\n\t\t}\n\n\t\t/** Organization mode **/\n\t\t.p-channel_sidebar__organize_mode_menu {\n\t\t\tborder-color: ").concat(Object(o.m)(n,.11),";\n\t\t}\n\t\t.p-channel_sidebar__organize_action {\n\t\t\tcolor: ").concat(n,";\n\t\t\tbackground-color: ").concat(Object(o.m)(n,.11),";\n\t\t}\n\t\t.p-channel_sidebar__organize_action:hover,\n\t\t.p-channel_sidebar__organize_action:active,\n\t\t.p-channel_sidebar__organize_action:focus {\n\t\t\tbackground-color: ").concat(Object(o.m)(n,.2),";\n\t\t}\n\t\t.p-channel_sidebar__organize_action--primary {\n\t\t\tcolor: ").concat(t.column_bg,";\n\t\t\tbackground-color: ").concat(n,";\n\t\t}\n\t\t.p-channel_sidebar__organize_action--primary:hover,\n\t\t.p-channel_sidebar__organize_action--primary:active,\n\t\t.p-channel_sidebar__organize_action--primary:focus {\n\t\t\tbackground-color: ").concat(Object(o.m)(n,.89),";\n\t\t}\n\n\t\t/** IA experiment (feature_iap1) **/\n\t\t.p-ia__sidebar_header {\n\t\t\tbackground: ").concat(t.column_bg,";\n\t\t\tcolor: ").concat(n,";\n\t\t}\n\t\t.p-ia__omniswitcher_button {\n\t\t\tcolor: ").concat(n,";\n\t\t\tborder: 1px solid ").concat(Object(o.j)(n,t.column_bg,.12),";\n\t\t}\n\t\t.p-ia__omniswitcher_button:hover {\n\t\t\tborder-color: ").concat(Object(o.j)(n,t.column_bg,.2),";\n\t\t}\n\t\t.p-ia__sidebar_header__button,\n\t\t.p-ia__sidebar_header__mode {\n\t\t\tbackground-color: ").concat(Object(o.j)(n,t.column_bg,.07),";\n\t\t}\n\t\t.p-ia__sidebar_header--top-nav .p-ia__sidebar_header__button,\n\t\t.p-ia__sidebar_header--top-nav .p-ia__sidebar_header__mode {\n\t\t\tbackground-color: initial;\n\t\t\tborder-color: ").concat(Object(o.j)(n,t.column_bg,.07),";\n\t\t}\n\t\t.p-ia__sidebar_header__button:hover,\n\t\t.p-ia__sidebar_header__button.active,\n\t\t.p-ia__sidebar_header__mode:hover {\n\t\t\tbackground-color: ").concat(Object(o.j)(n,t.column_bg,.1),";\n\t\t}\n\t\t.p-ia__sidebar_header--top-nav .p-ia__sidebar_header__button:hover,\n\t\t.p-ia__sidebar_header--top-nav .p-ia__sidebar_header__button.active,\n\t\t.p-ia__sidebar_header--top-nav .p-ia__sidebar_header__mode:hover {\n\t\t\tbackground-color: ").concat(t.menu_bg,";\n\t\t}\n\t\t.p-ia__nav__user__presence.c-presence--active,\n\t\t.p-ia__sidebar_header__user__presence.c-presence--active {\n\t\t\tcolor: ").concat(t.active_presence,";\n\t\t}\n\t\t.p-ia__sidebar_header__user__presence.c-presence--away {\n\t\t\tcolor: ").concat(a,";\n\t\t}\n\t\t.p-channel_sidebar--iap1 .p-channel_sidebar__list:after {\n\t\t\tbackground: linear-gradient(to bottom, ").concat(t.column_bg,", ").concat(Object(o.m)(t.column_bg,0),");\n\t\t}\n\t\t.p-channel_sidebar--iap1.p-channel_sidebar--top_banner_showing .p-channel_sidebar__list:after {\n\t\t\tbackground: ").concat(t.column_bg,";\n\t\t}\n\t\t.p-channel_sidebar--iap1 .p-channel_sidebar__section_heading_plus:hover,\n\t\t.p-channel_sidebar--iap1 .p-channel_sidebar__section_heading_ellipsis:hover {\n\t\t\tbackground: ").concat(Object(o.m)(n,.1),";\n\t\t}\n\t");return r.a.createElement("style",{className:"p-channel_sidebar__theme--".concat(e.theme)},u)};h.defaultProps={theme:"default_theme",custom:void 0,featureClassicNav:!1,historyNavigationEnabled:!1,clientTheme:"light"};t.a=Object(s.b)(e=>{return{theme:Object(i.k)(e,"sidebar_theme"),custom:Object(i.d)(e),featureClassicNav:Object(d.m)(e,"feature_classic_nav"),historyNavigationEnabled:Object(p.a)(e),clientTheme:Object(u.c)(e),logger:Object(l.a)({state:e})}})(h)},ZYU7:function(e,t,a){},a001:function(e,t,a){},"a6/V":function(e,t,a){"use strict";t.a=(e=>!!e&&(!e.metaKey&&!e.ctrlKey&&(e.key&&1===e.key.length)))},a9fl:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("XHGt")),i=a("TSYQ"),o=a.n(i),c=a("7dYf"),l=a("1hAG"),d=a("5mKg"),p=a("J7ms"),u=a("nNoG"),h=a("Smdl"),m=a("od5y"),b=a("MREy"),_=a("llxT"),g=a("ifKl"),f=a("gmRt"),v=a("zRJ2"),O=a("XLFM"),y=new u.b("all_unreads"),C={newUnreadMsgCount:0,incrementRefreshId:g.a};class refresh_unread_messages_button_RefreshUnreadMessagesButton extends n.Component{constructor(e){super(e),this.refreshMessages=this.refreshMessages.bind(this)}refreshMessages(){this.props.incrementRefreshId()}render(){var{newUnreadMsgCount:e}=this.props;if(e<1)return null;var t=y.t("{newUnreadMsgCount, plural, =1 {# new message} other {# new messages}}",{newUnreadMsgCount:e});return r.a.createElement("div",{className:"p-classic_nav__channel_header__refresh_button"},r.a.createElement(O.d,{type:"outline",onClick:this.refreshMessages},r.a.createElement(m.b,{inline:!0,size:"inherit",type:"sync",className:"p-classic_nav__channel_header__refresh_button_icon"}),t))}}refresh_unread_messages_button_RefreshUnreadMessagesButton.defaultProps=C;var j={incrementRefreshId:function(){return Object(v.a)(...arguments)}},E=Object(s.b)(e=>({newUnreadMsgCount:Object(f.b)(e)}),j)(refresh_unread_messages_button_RefreshUnreadMessagesButton),k=a("wumb"),S=(a("tFl5"),new u.b("all_unreads")),I={className:void 0};class all_unreads_header_AllUnreadsHeader extends n.Component{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this)}onSortSelected(e){this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:e})}renderMenu(e){var{teamIsPaid:t}=this.props,a=(e,a)=>t||"priority"!==e?r.a.createElement(b.b,{key:e,label:a,onSelected:()=>this.onSortSelected(e)}):null,n=[{value:"alphabetical",label:S.t("Alphabetically")},{value:"priority",label:S.t("Scientifically")},{value:"newest",label:S.t("Newest")},{value:"oldest",label:S.t("Oldest")}],s=S.t("Sort...");return r.a.createElement(b.f,e,r.a.createElement(b.c,{label:s}),n.map(e=>{var{value:t,label:n}=e;return a(t,n)}))}renderSortingMenuTrigger(){var{allUnreadsSortOrder:e}=this.props,t="";return t="alphabetical"===e?S.t("Sorted alphabetically"):"priority"===e?S.t("Sorted scientifically"):"newest"===e?S.t("Sorted by newest channel"):S.t("Sorted by oldest channel"),r.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},r.a.createElement(b.e,{renderMenu:this.renderMenu,position:"bottom-left"},r.a.createElement(_.a,null,r.a.createElement("span",null,t),r.a.createElement(m.b,{type:"chevron-down",className:"align_top"}))))}render(){var{className:e}=this.props,t=o()("p-classic_nav__channel_header__title","p-classic_nav__no_drag"),a=o()(e,{"p-classic_nav__channel_header__all_unreads_wrapper":!Object(h.a)()}),n=S.t("All Unreads options",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c",note:"Label for the Channel Header as a section. Not visible on screen as it is only for customers using screen readers."});return r.a.createElement("div",{className:a,role:"group","aria-label":n},r.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},r.a.createElement("div",{"aria-hidden":"true",className:t},S.t("All Unreads")),this.renderSortingMenuTrigger()),r.a.createElement(k.a,{flex:!0,regionId:"main"}),r.a.createElement(E,null))}}all_unreads_header_AllUnreadsHeader.defaultProps=I;var w={setUserPrefByApi:function(){return Object(c.f)(...arguments)}};t.a=Object(s.b)(e=>({allUnreadsSortOrder:Object(p.a)(e),teamIsPaid:Object(d.D)(Object(l.d)(e))}),w)(all_unreads_header_AllUnreadsHeader)},aQya:function(e,t,a){},aXcn:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("XHGt")),i=a("8vJI"),o=a("g5qt"),c=a("l+8s"),l=a("llxT"),d=a("c8iJ"),p=a("hW7Y"),u=a("vuMC"),h=a("g9Y9"),m=a("1hAG"),b=a("Go8C"),_=a("iH/p"),g=a("7ARk"),f=a("5mKg"),v=a("XLFM"),O=a("fdJE"),y={query:void 0,plainTextQuery:void 0};class search_Search extends n.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.onClearClick=this.onClearClick.bind(this)}onClick(){this.props.openFromClick()}onClearClick(){this.props.clearSearchInput()}render(){var{teamName:e,query:t,plainTextQuery:a}=this.props;return t?r.a.createElement("div",{className:"p-top_nav__search__container"},r.a.createElement(v.c,{onClick:this.onClick,className:"p-top_nav__search"},r.a.createElement(d.a,{type:"search-medium",size:"inherit",className:"p-top_nav__search__icon"})," ",r.a.createElement("span",{className:"p-top_nav__search__text"},"Search: ",a)),r.a.createElement(v.c,{onClick:this.onClearClick,className:"p-top_nav__search__clear"},r.a.createElement(d.a,{type:"times-medium"}))):r.a.createElement(v.c,{onClick:this.onClick,className:"p-top_nav__search"},r.a.createElement(d.a,{type:"search-medium",size:"inherit",className:"p-top_nav__search__icon"})," ",r.a.createElement("span",{className:"p-top_nav__search__text"},"Search ",e))}}search_Search.defaultProps=y;var C=Object(s.b)(e=>{var t=Object(b.b)(e),a=Object(m.d)(e);return{query:t,teamName:Object(f.s)(a)?Object(m.e)(e):Object(f.e)(a),plainTextQuery:t?Object(O.a)(e,t):void 0}},e=>({openFromClick:function(){return e(Object(_.c)(...arguments))},clearSearchInput:function(){return e(Object(g.a)(...arguments))}}))(search_Search);a("wUmu"),t.a=Object(s.b)(null)(e=>{var{dispatch:t}=e,a=Object(n.useCallback)(e=>r.a.createElement(h.a,{menuProps:e}),[]),s=Object(n.useCallback)(()=>t(Object(i.a)()),[t]),m=o.W&&r.a.createElement(u.a,{isIAP1Enabled:!0});return r.a.createElement("div",{className:"p-top_nav"},r.a.createElement("div",{className:"p-top_nav__sidebar"},m,r.a.createElement(c.a,{position:"bottom-left",renderMenu:a},r.a.createElement(p.c,{tip:"History",position:"bottom"},r.a.createElement(l.a,{className:"p-top_nav__button"},r.a.createElement(d.a,{type:"clock-o"}))))),r.a.createElement(C,null),r.a.createElement(p.c,{tip:"Help",position:"bottom-right"},r.a.createElement(l.a,{className:"p-top_nav__button p-top_nav__help",onClick:s},r.a.createElement(d.a,{type:"question-circle"}))))})},ab6v:function(e,t,a){},aerA:function(e,t,a){"use strict";var n,r=a("negh");!function(e){e.Empty="empty-step",e.Email="email",e.ConfirmEmail="confirmemail",e.TeamName="teamname",e.ChannelName="channelname",e.Invites="invites",e.Role="role",e.Tada="tada",e.ClaimDomain="claim_domain",e.Error="error",e.TeamType="teamtype",e.Values="values",e.Plan="plan"}(n||(n={})),a.d(t,"b",function(){return o}),a.d(t,"a",function(){return d});var s,i,o="NEWXP_TEAM_CREATE";!function(e){e.CustomerSupport="customer_support",e.Engineering="engineering",e.HumanResources="human_resources",e.IT="it",e.Marketing="marketing",e.ProjectManagement="project_management",e.Sales="sales",e.Other="other"}(s||(s={})),function(e){e.Asana="AA16LBCH2",e.DealbotByPipedriveCRM="A2VG0CJAE",e.Drift="A0K07JA1H",e.Dropbox="AES7B2V7D",e.Giphy="A0F827J2C",e.GitHub="A8GBNUWU8",e.GoogleCalendar="ADZ494LHY",e.GoogleDrive="A6NL8MJ6Q",e.Greenhouse="A0J6STP1A",e.HelloSign="A08Q84QDV",e.Hubspot="A9RRCCG73",e.Intercom="A40CLA0DP",e.JenkinsCI="A0F7VRFKN",e.JiraCloud="A2RPP3NFR",e.Lattice="A0HUMK35J",e.MicrosoftOneDrive="AJBCW09GU",e.Salesforce="A2DAS7NNR",e.Sentry="A99FD3DJ5",e.ServiceNow="AB9E0V3KL",e.SimplePoll="A0HFW7MR6",e.Smartsheet="A9AESRU12",e.TettraWiki="A0H4VM9FG",e.Translate="A0ZJS6Z7E",e.Trello="A074YH40Z",e.Twitter="A0F7XDW93",e.Typeform="AD6SC3RT6",e.Zendesk="A9WFQ3M0B"}(i||(i={}));var c,l,d,p;i.GoogleDrive,i.MicrosoftOneDrive,i.Twitter,i.Salesforce,i.Zendesk,i.Hubspot,i.Sentry,i.JiraCloud,i.GitHub,i.JenkinsCI,i.Typeform,i.Greenhouse,i.HelloSign,i.Lattice,i.ServiceNow,i.Zendesk,i.JiraCloud,i.TettraWiki,i.Hubspot,i.Translate,i.Typeform,i.Drift,i.SimplePoll,i.Twitter,i.GoogleCalendar,i.Giphy,i.Smartsheet,i.Trello,i.Asana,i.JiraCloud,i.Salesforce,i.Hubspot,i.DealbotByPipedriveCRM,i.Intercom;!function(e){e.Business="business",e.Government="government",e.Education="education",e.Other="other"}(c||(c={})),function(e){e.TrackInfo="trackinfo",e.CommsWithinOrg="comms_in_org",e.Organizing="organizing",e.CommsWithCompanies="comms_with_companies",e.Apps="apps_tools",e.FocusedConvos="focused_convos"}(l||(l={})),function(e){e.Free="free",e.Standard="standard",e.Plus="plus"}(d||(d={})),function(e){e.BRAZIL="brazil",e.INDIA="india",e.EDUCATION="general",e.NONE="none"}(p||(p={}));n.TeamType,n.Values,n.Role,n.Plan,n.Tada,r.UiStep.UNKNOWN,r.UiStep.EMAIL,r.UiStep.CONFIRM_EMAIL,r.UiStep.TEAMNAME,r.UiStep.CHANNELNAME,r.UiStep.INVITES,r.UiStep.ROLE,r.UiStep.TADA,r.UiStep.CLAIMDOMAIN,r.UiStep.ERROR,r.UiStep.SELECT_TEAM_DESCRIPTION,r.UiStep.SELECT_TEAM_GOALS,r.UiStep.SELECT_PLAN,r.UiStep.SELECT_TEAM_DESCRIPTION,r.UiStep.SELECT_TEAM_GOALS,r.UiStep.SELECT_PLAN},ah8n:function(e,t,a){},al7r:function(e,t,a){},anFW:function(e,t,a){"use strict";var n=a("wx14"),r=a("zmn3"),s=a("ifKl"),i=a("q1tI"),o=a.n(i),c=(a("aK/h"),a("XHGt")),l=a("hqEo"),d=a("h9PG"),p=a("RB1+"),u=a("negh"),h=(a("BuFM"),{channelId:void 0,threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,forwardedRef:void 0,openFileUploadDialog:s.a,onFilesSelectedHandler:null,multiple:!0,accept:void 0});class HiddenFileInput extends i.Component{constructor(e){super(e),this.onFilesSelected=this.onFilesSelected.bind(this)}onFilesSelected(){var{channelId:e,threadTs:t,viewContext:a,forwardedRef:n,onFilesSelectedHandler:s}=this.props,i={fileUploadAction:u.FileUploadAction.PLUS_MENU,fileUploadSrc:u.FileUploadSrc.LOCAL},o=n.current.files,c=Object(r.a)(o);if(s)s(c);else{var l=Object(p.a)({viewContext:a,channelId:e,threadTs:t});this.props.openFileUploadDialog({files:c,initialChannelId:e,threadTs:t,inputProxy:l,metadata:i})}n.current.value=""}render(){var{disableFileUploadsPref:e,forwardedRef:t,multiple:a,accept:r}=this.props,s={accept:r};return"disable_all_except_images"===e&&(s.accept="image/*"),o.a.createElement("input",Object(n.a)({type:"file",className:"p-hidden_file_input",multiple:a,"aria-hidden":"true","data-qa":"file_upload",tabIndex:"-1"},s,{ref:t,onClick:this.onClick,onChange:this.onFilesSelected}))}}HiddenFileInput.defaultProps=h;var m=Object(c.b)(function(e){return{disableFileUploadsPref:Object(d.a)(e,"disable_file_uploads")}},function(e){return{openFileUploadDialog:function(){return e(Object(l.a)(...arguments))}}})(HiddenFileInput);t.a=o.a.forwardRef((e,t)=>o.a.createElement(m,Object(n.a)({},e,{forwardedRef:t})))},anIG:function(e,t,a){"use strict";var n=a("wx14"),r=a("zmn3"),s=a("q1tI"),i=a.n(s),o=(a("aK/h"),a("XHGt")),c=a("TSYQ"),l=a.n(c),d=a("XL7r"),p=a("HHn2"),u=a("Jnln"),h=a("VwYs"),m=a("m36V"),b=a("cAy8"),_=a("t85p"),g=a("tbBR"),f=a("CaXY"),v=a("a+Oh"),O=a("nNoG"),y=a("lrhk"),C=new O.b("attachments"),j=20,E=10,k={className:void 0,expandInlineImgsPref:!1,expandNonMediaAttachmentsPref:!1,featureRichTextRendering:!1,viewContext:void 0,blocksContainerContext:f.a.message_attachment};class MessageKitAttachments extends s.PureComponent{renderAttachmentsOverLimitMaybe(e,t){if(!e.length)return null;var{viewContext:a,featureAllyBugbash:r}=this.props,s={useAttachmentRules:!1,shouldBeExpandedByDefault:!1,expandableKey:Object(p.a)("attachmentsOverLimit",this.props.msg.ts,{limit:t,viewContext:a})},o=e.length-t,c=r?{"aria-label":C.t("{remainingAttachments, plural, =1 {Toggle attachment} other {Toggle additional {remainingAttachments} attachments}}",{remainingAttachments:o,note:"the label for the button that expands/collapses additional attachments, describes the button for customers using screen readers"})}:{};return i.a.createElement("div",null,i.a.createElement(h.a,Object(n.a)({},c,s),e),i.a.createElement(m.a,Object(n.a)({},s,{render:(t,a)=>i.a.createElement(b.a,{isExpanded:t.isExpanded,onClick:a,attachmentsOverLimitCount:e.length})})))}render(){var{msg:e,expandInlineImgsPref:t,expandNonMediaAttachmentsPref:a,blocksContainerContext:n,featureRichTextRendering:s}=this.props,o=Object(u.c)(e,t,a,!1,s);if(!e||!o||!o.length)return null;var c=j,d=Object(r.a)(o,(t,a)=>{var r=t.id||a+1;return t.blocks&&(c=E),i.a.createElement(y.a,{msg:e,attachment:t,key:r,blocksContainerContext:n})}),p=d.splice(c),h=l()("c-message_kit__attachments",this.props.className);return i.a.createElement("div",{className:h},d,this.renderAttachmentsOverLimitMaybe(p,c))}}MessageKitAttachments.defaultProps=k;t.a=Object(g.b)(Object(o.b)(e=>({expandInlineImgsPref:Object(d.k)(e,"expand_inline_imgs"),expandNonMediaAttachmentsPref:Object(d.k)(e,"expand_non_media_attachments"),featureRichTextRendering:Object(v.b)(e),featureAllyBugbash:Object(_.m)(e,"feature_ally_bugbash")}))(MessageKitAttachments))},avbl:function(e,t,a){},b7Ww:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=(a("aK/h"),a("TSYQ")),o=a.n(i),c=(a("yPgC"),a("RfGh")),l=a("9gIX"),d=a("MAit"),p={clogLinkClick:n.a,className:null,fullWidth:!1,onClick:n.a,showActions:!0,useRowAction:!1,includeRootDownloadAction:!0,includeRootStarAction:!1,"data-qa":void 0};class ContextualFile extends r.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){e.preventDefault(),this.props.onClick(e,this.props.file)}render(){var{file:e,clogLinkClick:t,fullWidth:a,showActions:n,includeRootDownloadAction:r,includeRootStarAction:i,useRowAction:p,"data-qa":u}=this.props,h=o()("p-contextual_file",this.props.className);return s.a.createElement(c.a,{file:e,className:h,fullWidth:a,clogLinkClick:t,showActions:n,useRowAction:p,includeRootDownloadAction:r,includeRootStarAction:i,"data-qa":u},s.a.createElement(l.a,{file:e,onClick:this.onClick},s.a.createElement(d.a,{file:e})))}}ContextualFile.defaultProps=p,t.a=ContextualFile},"bA/L":function(e,t,a){"use strict";var n=a("wx14"),r=a("rePB"),s=a("kiPk"),i=a("1myf"),o=a("wBxZ"),c=a("zmn3"),l=a("ifKl"),d=a("tn36"),p=a("q1tI"),u=a.n(p),h=(a("aK/h"),a("TSYQ")),m=a.n(h),b=a("XHGt"),_=a("jLdI"),g=a("GTwG"),f=(a("yPgC"),a("t3QL")),v=a("FXaq"),O=a("yywf"),y=a("nNoG"),C=a("ICFZ"),j=a("G+bj"),E=a("hOQf"),k=a("lek6"),S=a("3dqR"),I=a("NvKv"),w=a("lV3N"),T=a("OkQS"),N=a("+mjO"),P=a("XC2b"),A=a("qkTT"),M=a("vP1t"),x=a("y7mK"),R=a("X28p"),D=a("UceB"),F=a("3fyd"),L=a("CaXY"),U=a("od5y"),B=a("RAhH"),H=a("llxT"),W=(a("hr+X"),a("kyuO"));function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var K=new y.b("search"),V="IMPROVED_SEARCH",z={teamDomain:"",index:null,username:null,theme:"light",botId:null,botProfile:null,subtype:"",expanded:!1,onClick:l.a,onFileClick:l.a,onRepliesClick:l.a,files:[],attachments:[],reactions:[],extracts:[],onExpandHoverStart:l.a,onExpandHoverEnd:l.a,reply_count:0,onLinkClick:l.a,icons:null,blocks:null,blocks_extracts:null,wysiwygSearchHighlightingEnabled:!1,clogMessageClick:l.a,clogFileClick:l.a,clogSearchMessageClick:l.a};class SearchResult extends p.PureComponent{constructor(e){super(e),Object(d.a)(this,["expand","onClick","onFileClick","onRepliesClick","onCopyLink","onExpandHoverStart","onExpandHoverEnd","onMouseMove","onLinkClick","onAvatarLinkClick","onProfileMessageClick","onProfileCallClick","onMrkdwnLinkClick","onSenderLinkClick","onTimestampClick"]),this.dragging=!1,this.dragStartX=null,this.dragStartY=null}onClick(e){if(!e.target.dataset.memberId&&"BUTTON"!==e.target.tagName&&"BUTTON"!==e.target.parentNode.tagName)if(e.target.dataset.channelId||e.target.dataset.messageSender||("A"===e.target.tagName&&"_blank"===e.target.target||"A"===e.target.parentNode.tagName&&"_blank"===e.target.parentNode.target)&&!e.defaultPrevented)this.onLinkClick(e);else{var t=!1;if(this.dragging)t=(e.clientX-this.dragStartX)**2+(e.clientY-this.dragStartY)**2>16,this.dragging=!1;t||e.shiftKey||this.props.onClick({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}}onFileClick(e,t){var{file:a}=t;e.preventDefault(),this.props.onFileClick(e,{file:a,iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}onRepliesClick(e){e.preventDefault(),this.props.onRepliesClick({iid:this.props.iid,permalink:this.props.permalinkToMessageThread,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}onCopyLink(e){e.preventDefault(),e.stopPropagation();var{channel:t,ts:a,botId:n,user:r,teamDomain:s,isCrossWorkspace:i,iid:o}=this.props,c=this.props.permalink;c||(i?this.props.logger.error(V,"Missing permalink for cross workspace message result. channel: ".concat(t," ts: ").concat(a)):c=Object(E.u)({teamDomain:s,channelId:t.id,ts:a})),c&&Object(C.c)(c),this.props.clogMessageClick({msg:{channel:t.id,bot_id:n,user:r,ts:a},payload:{subtype:"copy_link"}}),this.props.clogSearchMessageClick({iid:o,ts:a,channelId:t.id,botId:n,userId:r,type:W.b.copyLink,position:this.props.index})}onExpandHoverStart(){this.props.onExpandHoverStart()}onExpandHoverEnd(){this.props.onExpandHoverEnd()}onMouseMove(e){1!==e.button&&1!==e.buttons||this.dragging||(this.dragging=!0,this.dragStartX=e.clientX,this.dragStartY=e.clientY)}onAvatarLinkClick(){this.props.onLinkClick({iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user,type:W.b.avatar})}onProfileMessageClick(){this.props.onLinkClick({iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user,type:W.b.profileMessage})}onProfileCallClick(){this.props.onLinkClick({iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user,type:W.b.profileCall})}onMrkdwnLinkClick(e){var t={iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user};"user"===e.link_type?t.type=W.b.user:"channel"===e.link_type?t.type=W.b.channel:"external"===e.link_type&&(t.type=W.b.link),t.type&&this.props.onLinkClick(t)}onSenderLinkClick(){this.props.onLinkClick({iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user,type:W.b.sender})}onLinkClick(e){var t={iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user};e.target.dataset.channelId?t.type=W.b.channel:e.target.dataset.messageSender?t.type=W.b.sender:("A"===e.target.tagName&&"_blank"===e.target.target||"A"===e.target.parentNode.tagName&&"_blank"===e.target.parentNode.target)&&!e.defaultPrevented&&(t.type=W.b.link),t.type&&this.props.onLinkClick(t)}onTimestampClick(e){e.preventDefault()}expand(e){e.preventDefault(),e.stopPropagation(),this.props.onExpand({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}renderEllipsisButton(e){var t={leading:"expand-head",trailing:"expand-tail"}[e],a=K.t("Show more");return u.a.createElement(B.c,{tip:a},u.a.createElement(H.a,{"aria-label":a,"data-qa":t,onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand","aria-expanded":this.props.expanded},u.a.createElement("span",{className:"c-search__expand_ellipsis"},"...")))}renderExpandButton(){return u.a.createElement(H.a,{"data-qa":"expand-end",onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand","aria-expanded":this.props.expanded},u.a.createElement("span",{className:"c-search__expand_ellipsis"},"... ",K.t("Show more")))}renderText(){var{text:e,blocks:t,extracts:a,expanded:n,canBeTruncated:r}=this.props;return e.length||a.length||t?n||!r?u.a.createElement("div",{className:"c-search_message__body","data-qa":"search_message_body"},u.a.createElement(k.a,{text:e,clogLinkClick:this.onMrkdwnLinkClick})):a.length?u.a.createElement("div",{className:"c-search_message__body"},u.a.createElement(p.Fragment,null,a.map((e,t)=>{var n=0===t&&e.truncated_head,s=e.truncated_tail,i=t===a.length-1;return u.a.createElement(p.Fragment,{key:t},n?this.renderEllipsisButton("leading"):null,u.a.createElement(k.a,{text:e.text,clogLinkClick:this.onMrkdwnLinkClick}),!s||r&&i?null:this.renderEllipsisButton("trailing"),r&&i?this.renderExpandButton():null)}))):u.a.createElement("div",{className:"c-search_message__body"},u.a.createElement(k.a,{text:e,clogLinkClick:this.onMrkdwnLinkClick})):null}renderBlocks(){var{ts:e,blocks:t,blocks_extracts:a,channel:n,botId:r,user:s,wysiwygSearchHighlightingEnabled:i}=this.props;return Object(j.a)(t)?i&&a?u.a.createElement(F.a,{msg:{channel:n.id,bot_id:r,user:s,ts:e,blocks:a},blocksContainerContext:L.a.search}):this.renderText():u.a.createElement(F.a,{msg:{channel:n.id,bot_id:r,user:s,ts:e,blocks:t},blocksContainerContext:L.a.search})}renderAvatar(){var{user:e,hasAdHocSender:t,botId:a,botProfile:r,icons:s}=this.props,i={};a&&(i=G({},i,{botId:a}));var o=s||r&&r.icons;if(o){var c=o.image_36||o.image_48,l=o.image_64||o.image_72,d=o.emoji;c&&(i=G({},i,{imageUrl:c})),l&&(i=G({},i,{imageUrl2x:l})),d&&(i=G({},i,{emoji:d}))}return e&&(i=G({},i,{userId:e})),u.a.createElement(S.c,Object(n.a)({className:"c-search_message__avatar",ariaHidden:"true",isAdHocMember:t,size:36,isInteractive:!0,showCard:!0,showTooltip:!0,tabIndex:"-1",clogLinkClick:this.onAvatarLinkClick,clogProfileMessageClick:this.onProfileMessageClick,clogProfileCallClick:this.onProfileCallClick},i))}renderTimestamp(){var{ts:e,permalink:t}=this.props;return u.a.createElement(I.b,{onClick:this.onTimestampClick,timestamp:e,relative:!1,full:!1,link:t})}renderGutter(){return"light"===this.props.theme?u.a.createElement("div",{className:"c-search_message__gutter"},this.renderAvatar()):u.a.createElement("div",{className:"c-search_message__gutter"},this.renderTimestamp())}renderContentHeader(){var{user:e,botId:t,botProfile:a,username:n,theme:r,channelName:s}=this.props;return u.a.createElement("div",{className:"c-search_message__content_header","data-qa":"search_message_header"},u.a.createElement(x.a,{userId:e,botId:t,botProfile:a,username:n,channelName:s,clogLinkClick:this.onSenderLinkClick,clogProfileMessageClick:this.onProfileMessageClick,clogProfileCallClick:this.onProfileCallClick,isInteractive:!0})," ","light"===r&&this.renderTimestamp())}renderAttachments(){var{attachments:e,expanded:t,canBeTruncated:a}=this.props;if(!e.length)return null;if(t||!a)return Object(c.a)(e,(e,t)=>this.renderFullAttachment(e,t));var n=Object(c.a)(e,(e,t)=>{var a=Object(f.b)(e);return a.blocks?this.renderFullAttachment(a,t):this.renderTruncatedLegacyAttachment(a,t)});return u.a.createElement("div",{className:"c-search_message__attachments"},n)}renderFullAttachment(e,t){var{ts:a,channel:r,hasText:s,blocks:i}=this.props;return u.a.createElement(w.a,Object(n.a)({key:e.id||t+1},Object(f.b)(e),{isOnlyMessageContent:!(!s&&!i),messageTs:a,activeChannelId:r.id,showDelete:!1,blocksContainerContext:L.a.search}))}renderTruncatedLegacyAttachment(e,t){var{ts:a}=this.props,n=null;if(Object(v.e)(e)){var r=e.serviceIcon||e.authorIcon,s=e.serviceName||e.authorName,i=s===e.authorName?e.authorSubname:e.authorName;n=u.a.createElement("div",null,u.a.createElement(N.a,{icon:r,name:s,link:e.serviceUrl||e.authorLink,subname:i,subnameLink:e.authorLink}))}var{extracts:o}=e,l=null;o&&o.title&&(l=u.a.createElement("div",{"data-qa":"search-attachment-title",className:"c-search_message__attachment_title"},Object(c.a)(o.title,(e,t)=>{var a=0===t&&e.truncated_head,n=e.truncated_tail;return u.a.createElement(p.Fragment,{key:t}," ",a?"\u2026":null,function(e){return Object(O.a)(e,(e,t)=>u.a.createElement("span",{className:"c-search__match",key:t},e))}(e.text),n?"\u2026":null)})));var d=null;o&&o.pretext&&(d=Object(c.a)(o.pretext,(e,t)=>{var a=0===t&&e.truncated_head,n=e.truncated_tail;return u.a.createElement("span",{className:"c-message_attachment__pretext",key:t}," ",u.a.createElement(p.Fragment,null,a?this.renderEllipsisButton("leading"):null,u.a.createElement(k.a,{text:e.text,clogLinkClick:this.onMrkdwnLinkClick}),n?this.renderEllipsisButton("trailing"):null))}));var h=null;o&&o.text&&(h=Object(c.a)(o.text,(e,t)=>{var a=0===t&&e.truncated_head,n=e.truncated_tail;return u.a.createElement(p.Fragment,{key:t}," ",a?this.renderEllipsisButton("leading"):null,u.a.createElement(k.a,{text:e.text,clogLinkClick:this.onMrkdwnLinkClick}),n?this.renderEllipsisButton("trailing"):null)}));var m=null;return Object(v.h)(e)&&(m=u.a.createElement("div",null,u.a.createElement(P.a,{botId:e.botId,icon:e.footerIcon,isAppUnfurl:e.isAppUnfurl,text:e.footer,ts:a}))),n||l||d||h||m?u.a.createElement("div",{"data-qa":"search-message-attachment",className:"c-search_message__attachment",key:"".concat(this.props.iid,"-attachment-").concat(t)},u.a.createElement(T.a,{color:e.color}),u.a.createElement("div",{className:"c-search_message__attachment_body"},n,l,d,h,m)):null}renderReactionsAndReplies(){var{reactions:e}=this.props,t=this.props.reply_count;if(!e.length&&!t)return null;var a=Object(o.a)(Object(i.a)(e,e=>-e.count),2),n=Object(s.a)(e,"count"),r=null,l=null;if(n>0&&(r=u.a.createElement("span",{"data-qa":"search-reaction-count",className:"c-search_message__reactions_count"},K.t("{totalReactionCount, plural, =1 {# reaction} other {# reactions}}",{totalReactionCount:n}))),t>0){var d=K.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:t});l=u.a.createElement(H.a,{"data-qa":"search-replies",className:"c-search_message__replies_count",onClick:this.onRepliesClick},u.a.createElement(U.a,{type:"comment-alt"}),d)}return u.a.createElement("div",{"data-qa":"search-reactions",className:"c-search_message__reactions"},Object(c.a)(a,e=>u.a.createElement(A.b,{text:":".concat(e.name,":"),key:e.name,emojiSize:A.a.SMALL})),r,l)}renderFiles(){var{files:e}=this.props;return e&&e.length?e.map(e=>e&&u.a.createElement(M.a,{key:e.id,file:e,onClick:this.onFileClick,clogLinkClick:t=>{this.props.clogFileClick({file:e,payload:t})}})):null}renderActions(){var e=m()("c-search_message__actions","c-message_actions__container--search",{"c-search_message__actions--dense":"dense"===this.props.theme});return u.a.createElement(R.a,{className:e,ariaLabel:K.t("Message actions")},u.a.createElement(D.a,{"data-qa":"copy-link",iconType:"link",ariaHasPopup:!1,label:K.t("Copy link"),onClick:this.onCopyLink}))}render(){var{theme:e,canBeTruncated:t,expanded:a,blocks:n}=this.props,r=m()("c-search_message","c-search_message--".concat(e),{"c-search_message--collapsed":!a&&t});return u.a.createElement("div",{className:r,role:"presentation","data-qa":"search_result",onClick:this.onClick,onMouseMove:this.onMouseMove},this.renderGutter(),u.a.createElement("div",{className:"c-search_message__content"},this.renderContentHeader(),n?this.renderBlocks():this.renderText(),this.renderAttachments(),this.renderReactionsAndReplies(),this.renderFiles(),this.renderActions()))}}SearchResult.defaultProps=z;var Y={clogSearchMessageClick:function(){return Object(W.i)(...arguments)},clogMessageClick:function(){return Object(_.a)(...arguments)},clogFileClick:function(){return Object(g.a)(...arguments)}};t.a=Object(b.b)(null,Y)(SearchResult)},bKze:function(e,t,a){},bYMc:function(e,t,a){"use strict";a.d(t,"a",function(){return g});var n=a("rePB"),r=a("Ff2n"),s=a("g5qt"),i=a("zaOK"),o=a("zoXk"),c=a("XfeM"),l=a("brL+"),d=a("lhZz"),p=a("kOzZ"),u=a("PR8O"),h=a("Smdl"),m=a("VjCB");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}window.hasSetDesktopFocusedTeamDelegate=!1;var g=Object(c.b)("Create a delegate object for interop with the desktop app",(e,t)=>{if(Object(u.a)())if(s.W){if(function(e,t){var a=Object(l.b)(t()),n=f(e,t);Object(s.V)()?window.desktop.exposeWorkspaceDelegate(a,n):(window.desktop.delegates||(window.desktop.delegates={}),window.desktop.delegates[a]=n);window.desktopDelegates=window.desktopDelegates||{},window.desktopDelegates[a]=n}(e,t),!window.hasSetDesktopFocusedTeamDelegate){var a=f(e,t,{useFocusedTeam:!0});Object(s.V)()?window.desktop.setGlobalDelegate(a):window.desktop.delegate=a,window.desktopDelegate=a,window.hasSetDesktopFocusedTeamDelegate=!0}}else Object(p.a)({state:t()}).track("DESKTOP_SCRIPTS_MISSING")});function f(e,t){var{useFocusedTeam:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{accessibilitySupportChanged:n,canOpenURLInWindow:s,focusNextWorkspace:c,focusPreviousWorkspace:l,getCurrentUserId:p,getCurrentUserName:u,getEnterpriseId:b,getThemeValues:g,getTokenFromBootData:f,getUserPref:v,getWebappVersionUid:O,handleDeepLinkWithArgs:y,handleDeepLinkFromDesktop:C,maybeTickleMS:j,notificationActivated:E,notificationClicked:k,openDialog:S,openFromCmdF:I,recentMessagesFromCurrentChannel:w,replyToNotification:T,setCurrentMemberPresence:N,setFocusedWorkspace:P,teamSelectionChanged:A,updateState:M}=i.a,x=Object(r.a)(i.a,["accessibilitySupportChanged","canOpenURLInWindow","focusNextWorkspace","focusPreviousWorkspace","getCurrentUserId","getCurrentUserName","getEnterpriseId","getThemeValues","getTokenFromBootData","getUserPref","getWebappVersionUid","handleDeepLinkWithArgs","handleDeepLinkFromDesktop","maybeTickleMS","notificationActivated","notificationClicked","openDialog","openFromCmdF","recentMessagesFromCurrentChannel","replyToNotification","setCurrentMemberPresence","setFocusedWorkspace","teamSelectionChanged","updateState"]),R=()=>{var n=a&&Object(o.g)(t());return n?e=>Object(d.dispatchForTeamId)(n,e):e},D=()=>{var e=a&&Object(o.g)(t());return e?()=>Object(d.getStateByTeamId)(e):t},F=e=>(function(){return R()(e(...arguments))}),L=e=>(function(){return Object(d.dispatchForClientStore)(e(...arguments))}),U=t=>(function(){return Object(h.a)()?Object(d.dispatchForClientStore)(Object(m.a)(t(...arguments))):e(t(...arguments))}),B=e=>(function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e(R(),...a)}),H=e=>(function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e(D()(),...a)});return _({accessibilitySupportChanged:F(n),canOpenURLInWindow:H(s),focusNextWorkspace:L(c),focusPreviousWorkspace:L(l),getCurrentUserId:H(p),getCurrentUserName:H(u),getEnterpriseId:H(b),getThemeValues:H(g),getTokenFromBootData:H(f),getUserPref:H(v),getWebappVersionUid:H(O),handleDeepLinkWithArgs:Object(h.a)()?F(C):y,maybeTickleMS:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return U(j)(_({},e,{reason:"polling"}))},notificationActivated:B(E),notificationActivationHandler:e=>{var{channelId:t,messageTs:a,threadTs:n,teamId:r}=e;return Object(h.a)()?L(P)({teamId:r}).then(()=>F(k)({channelId:t,messageTs:a,threadTs:n})):F(k)({channelId:t,messageTs:a,threadTs:n})},openDialog:(e=>(function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e(R(),D()(),...a)}))(S),openFromCmdF:F(I),recentMessagesFromCurrentChannel:H(w),replyToNotification:F(T),setCurrentMemberPresence:F(N),setFocusedWorkspace:e=>L(P)({teamId:e}),startSearch:F(I),teamSelectionChanged:B(A),updateState:function(){return Object(h.a)()&&L(M)(...arguments),U(M)(...arguments)}},x)}g.meta={name:"createDesktopDelegate",key:"desktopCreateDelegateCreateDesktopDelegate",description:"Create a delegate object for interop with the desktop app"},g.propTypes=null},"bj+V":function(e,t,a){},bkaq:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=a("XHGt"),o=(a("aK/h"),a("nNoG")),c=a("Fdc0"),l=a("ZYn4"),d=a("0f2Y"),p=a("zo7m"),u=a("yZEV"),h=a("negh"),m=a("5OMq"),b=a("kcos"),_=a("guIn"),g=(a("8LWd"),new o.b("member_profile")),f={className:void 0,member:void 0,canInteract:!0,onClick:n.a,onOpenEditProfileModal:n.a,onShowMemberProfile:n.a,presence:!1,clogger:{track:n.a},isIAP1Enabled:!1};function v(e){var{className:t,member:a,canInteract:n,onClick:r,onOpenEditProfileModal:i,onShowMemberProfile:o,presence:p,clogger:u,isIAP1Enabled:b}=e,f=n&&!Object(c.mb)(a),v=Object(c.K)(a),O=s.a.createElement(s.a.Fragment,null,v,f&&s.a.createElement(l.a,{className:"p-member_profile_name__presence",memberId:a.id})),y=()=>{i(),r(),setTimeout(()=>{var e=document.getElementById("title-input");e&&e.focus()},150),u.track(h.EventId.USER_PROFILE_ADD_TITLE_CLICK)},C=Object(c.Ib)(a)?g.t("Friendly bot, part-time programmer, and Help Center assistant-in-training."):Object(c.S)(a),j=()=>Object(_.a)(C)?s.a.createElement("span",{className:"p-member_profile_name__subtitle"},C):Object(c.Hb)(a)?s.a.createElement(d.a,{className:"p-member_profile_field__interactable",onClick:y,"data-qa":"member_title_edit_btn"},g.t("Add a title")):null,E=s.a.createElement("div",{className:"p-member_profile_name__title"},o?s.a.createElement(d.a,{"aria-label":(()=>p?g.t("{name}, {presence}",{name:v,presence:p}):v)(),className:"p-member_profile_name__link",onClick:()=>{o(),r()}},O):O);return b?s.a.createElement("div",{className:t},s.a.createElement(m.a,{id:a.id},E),j()):s.a.createElement("div",{className:t},E,j())}v.defaultProps=f;var O={onOpenEditProfileModal:function(){return Object(p.a)(...arguments)}};t.a=Object(i.b)((e,t)=>{return{presence:Object(u.f)(e,t.member.id),isIAP1Enabled:Object(b.d)(e)}},O)(v)},bmfP:function(e,t,a){"use strict";var n=a("aK/h"),r=a("XHGt"),s=a("dxEi"),i={children:n.default.node,isOnline:n.default.bool},o=e=>{var{isOnline:t,children:a}=e;return t?a:null};o.propTypes=i,o.defaultProps={children:null,isOnline:null};var c=Object(r.b)(e=>({isOnline:Object(s.c)(e)}))(o),l={children:n.default.node,isOnline:n.default.bool},d=e=>{var{isOnline:t,children:a}=e;return t?null:a};d.propTypes=l,d.defaultProps={children:null,isOnline:null};var p=Object(r.b)(e=>({isOnline:Object(s.c)(e)}))(d);a("XoBp");a.d(t,"b",function(){return c}),a.d(t,"a",function(){return p})},"c+rX":function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=(a("aK/h"),a("XHGt")),o=a("peh1"),c=a("yHhI"),l=a("dhvi"),d={elements:null,logError:n.a};class modal_container_BaseModalContainer extends r.Component{componentDidCatch(e){var t=e?e.message:"";this.props.logError("MODAL-CONTAINER","componentDidCatch: ".concat(t))}render(){var{elements:e}=this.props;return s.a.createElement(r.Fragment,null,e)}}modal_container_BaseModalContainer.defaultProps=d;var p=Object(o.createSelector)([e=>Object(l.c)(e)],e=>e.map(e=>e.element)),u=Object(i.b)(e=>({error:Object(c.a)({state:e}).error,elements:p(e)}),{})(modal_container_BaseModalContainer);t.a=u},"c+ts":function(e,t,a){"use strict";var n=a("q1tI"),r=a("XHGt"),s=a("aK/h"),i=a("Tc5z"),o=a("aLpA"),c=(a("/PGu"),{isFrameless:s.default.bool.isRequired,isCustomTitlebarShown:s.default.bool.isRequired}),l=function(){var{isFrameless:e,isCustomTitlebarShown:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.useEffect)(()=>(e?document.body.classList.add(o.n):document.body.classList.remove(o.n),t?document.body.classList.add(o.j):document.body.classList.remove(o.j),()=>{document.body.classList.remove(o.n),document.body.classList.remove(o.j)}),[e,t]),null};l.propTypes=c;t.a=Object(r.b)(e=>({isCustomTitlebarShown:Object(i.k)(e),isFrameless:Object(i.l)(e)}))(l)},c48M:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n=[],r={}},c7HH:function(e,t,a){},cAy8:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=(a("aK/h"),a("MnCE")),o=a("nNoG"),c=a("9/ob"),l=a("XLFM"),d=a("OkQS"),p=new o.b("attachments"),u={isExpanded:!1,onClick:n.a,attachmentsOverLimitCount:0},h=e=>{var{isExpanded:t,onClick:a,attachmentsOverLimitCount:n}=e;return s.a.createElement(c.a,{enabled:["feature_react_messages"]},s.a.createElement("div",{className:"c-message_attachment"},s.a.createElement(d.a,null),s.a.createElement("div",{className:"c-message_attachment__body"},s.a.createElement(l.c,{className:"c-message_attachment__over_limit_button",onClick:a},s.a.createElement("p",{className:"c-message_attachment__over_limit"},(()=>s.a.createElement("b",null,t?p.t("Show fewer attachments",{fallbackHash:"82ec3619e636876bba549869a1e98fc21e6bee00"}):p.t("{count, plural, =1 {+ # more attachment} other {+ # more attachments}}",{count:n,fallbackHash:"61f00263e27b3ffe8a86b728c78ef71614ebe535"})))())))))};h.defaultProps=u,t.a=Object(i.a)(h)},cLBS:function(e,t,a){},cYut:function(e,t,a){},ceeJ:function(e,t,a){"use strict";var n=a("Wy5O"),r=a("q1tI"),s=a.n(r),i=a("t85p"),o=a("m4nM"),c=a("G3Sk"),l=a("+uGN"),d=a("2I0B"),p=a("7EGn"),u=a("TSYQ"),h=a.n(u),m=a("XHGt"),b=a("nNoG"),_=a("Smdl"),g=a("kOzZ"),f=a("ayyL"),v=a("bDqM"),O=a("PXln"),y=a("negh"),C=a("rWF5"),j=a("c8iJ"),E=a("Yd+W"),k=a("1zgd");function S(e,t){return"completed"===e.state?"completed"===t.state?0:1:"completed"===t.state?-1:0}a("+9CW");class welcome_row_WelcomeRow extends r.Component{render(){var{title:e,subtitle:t}=this.props,a=h()("welcome-row__title",{margin_bottom_50:!!t,margin_bottom_75:!t});return s.a.createElement("div",{className:"welcome-row margin_left_125 margin_right_125 margin_top_150 margin_bottom_200"},e?s.a.createElement("div",{className:a},s.a.createElement("h3",{className:"normal"},e)):null,t?s.a.createElement("div",{className:"margin_bottom_75"},s.a.createElement("p",null,t)):null,s.a.createElement("div",null,this.props.children))}}var I=a("QOdn"),w=a("4M+g"),T=a("XLFM"),N=a("zoXk"),P=(a("vv9w"),a("wx14")),A=s.a.createContext({});function M(){return e=>{class WithVisibilityLogger extends r.Component{constructor(){super(...arguments),this.renderWithConsumer=(t=>{var{addElementToVisibilityLogging:a,removeElementFromVisibilityLogging:n}=t;return s.a.createElement(e,Object(P.a)({addElementToVisibilityLogging:a,removeElementFromVisibilityLogging:n},this.props))})}render(){return s.a.createElement(A.Consumer,null,this.renderWithConsumer)}}return WithVisibilityLogger.displayName="WithVisibilityLogger(".concat(e.displayName||"Component",")"),WithVisibilityLogger}}var x=Object(m.b)(function(e){return{items:Object(f.g)(e),isFlexpaneOpen:Object(N.j)(e),clogger:Object(g.a)({state:e}),pageViewingSessionId:Object(f.i)(e),iteration:Object(f.d)(e)}})(M()(e=>{var{isFlexpaneOpen:t,clogger:a,pageViewingSessionId:n,iteration:i,addElementToVisibilityLogging:o,removeElementFromVisibilityLogging:c,workflowTask:{subtype:l,state:d},onButtonClicked:p,bodyCopy:u,buttonCopy:m,clogElementName:b,buttonQa:_,items:g,children:f}=e,v=function(e,t){return e.content.workflow.tasks.filter(k.a).sort(S).findIndex(e=>e.subtype===t)+1}(g.find(e=>"workflow"===e.type),l),O=Object(r.useRef)(null);Object(r.useEffect)(()=>(o({element:O.current,uiContext:{ui_element:y.UiElement["WELCOME_PLACE_ACTION_".concat(l.toUpperCase())],ui_properties:{element_value:d,element_type:y.ElementType.BUTTON,element_name:b},step_variant:i}}),()=>{c(O.current)}));var C="completed"===d,j=h()("c-workflow-item-card__number bold",{complete:C}),I=C?null:s.a.createElement(T.d,{disabled:C,type:"outline",size:"medium",onClick:()=>{d!==E.d.Completed&&(p(),a.track("WELCOME_PLACE",{contexts:{ui_context:{action:y.UiAction.CLICK,ui_element:y.UiElement["WELCOME_PLACE_ACTION_".concat(l.toUpperCase())],ui_properties:{element_value:d,element_type:y.ElementType.BUTTON,element_name:b}},welcome_place:{welcome_session_id:n}}}))},"data-qa":_},m),w=!!f,N=w?s.a.createElement("div",{className:"c-workflow-item-card__children"},f):s.a.createElement("div",{className:"c-workflow-item-card__section"},s.a.createElement("div",{className:"full_width"},I)),P=h()("c-workflow-item-card",{complete:C,flexpaneOpen:t,hasChildren:w});return s.a.createElement("div",{className:P,ref:O},s.a.createElement("div",{className:"c-workflow-item-card__section"},s.a.createElement("div",{className:j},C?s.a.createElement("i",{"aria-hidden":"true",className:"c-icon c-icon--check-small c-icon--inline"}):v),s.a.createElement("div",null,s.a.createElement("p",null,u))),N)})),R=(e,t,a)=>e[t][a],D=new b.b("welcome_place"),F={updateActionStateAndReload:v.h,openChannelBrowser:I.a};var L=Object(m.b)(function(e){return{userHasAvailableChannels:Object(w.q)(e).length>Object(w.r)(e).length}},F)(e=>{var{userHasAvailableChannels:t,workflowTask:a,workflowTask:{state:n,user_task_id:r}}=e,i={body:D.rt("<b>See what people are talking about</b> in your team\u2019s channels.",{note:"Incomplete state copy for fourth action step. Most important info should be bolded."}),button:D.rt("Join Channels",{note:"Button label for incomplete state of fourth step."}),tip:null},o={body:s.a.createElement("b",null,D.rt("Joined a channel",{note:"Completed state copy, bolded, no punctuation"})),button:D.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:D.rt("Tip: To find more channels later \u2014 or create new ones \u2014 click on <b>Channels</b> in the sidebar. ",{note:"Completed state body copy conveying a tip about how to return to the channel browser in the future; use bolding on the word \u201cChannels\u201d."})},c={[E.d.Pending]:i,[E.d.InProgress]:i,[E.d.Completed]:o},l=n===E.d.Completed||t?R(c,n,"button"):D.t("Browse Channels",{ns:"channel_browser",fallbackHash:"f3783ed57f3ec287bdc59897500c8d674a2f1ec8"}),d=R(c,n,"body");return s.a.createElement(x,{workflowTask:a,onButtonClicked:()=>{t?e.updateActionStateAndReload({userTaskId:r,state:E.d.InProgress}):e.updateActionStateAndReload({userTaskId:r,state:E.d.Completed}),e.openChannelBrowser()},buttonCopy:l,bodyCopy:d,buttonQa:"wp_join_channel_button"})}),U=a("ifKl"),B=a("1hAG"),H=new b.b("welcome_place"),W={updateActionStateAndReload:v.h};var q=Object(m.b)(function(e){return{currentTeam:Object(B.d)(e)||{name:""}}},W)(e=>{var{currentTeam:{name:t},workflowTask:a,workflowTask:{state:n,user_task_id:i}}=e;Object(r.useEffect)(()=>{n!==E.d.Completed&&e.updateActionStateAndReload({userTaskId:i,state:E.d.Completed})});var o={body:H.rt("<b>Joined {workspaceName},</b> your team\u2019s Slack workspace",{workspaceName:t,note:"Completed state copy for first action step. Should be personalized with their workspace name but also expose them to the term \u201cworkspace.\u201d Use bolding for the most important information. Note: No punctuation at the end."}),button:H.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null},c={body:H.rt("<b>Joined {workspaceName},</b> your team\u2019s Slack workspace",{workspaceName:t,note:"Completed state copy for first action step. Should be personalized with their workspace name but also expose them to the term \u201cworkspace.\u201d Use bolding for the most important information. Note: No punctuation at the end."}),button:H.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null},l={[E.d.Pending]:o,[E.d.InProgress]:o,[E.d.Completed]:c},d=R(l,n,"button"),p=R(l,n,"body");return s.a.createElement(x,{workflowTask:a,onButtonClicked:U.a,buttonCopy:d,bodyCopy:p,buttonQa:"wp_see_welcome_place_button"})}),G=a("r31G"),K=a("GaFD"),V=a("Evpj"),z=new b.b("welcome_place"),Y={updateActionStateAndReload:v.h,promptForPermissionAndSetPref:G.c};var Q=Object(m.b)(function(e){return{currentTeam:Object(B.d)(e)||{name:""}}},Y)(e=>{var{workflowTask:t,workflowTask:{state:a,user_task_id:n}}=e,i=Object(V.a)();Object(r.useEffect)(()=>{a!==E.d.Completed&&Object(K.e)()&&e.updateActionStateAndReload({userTaskId:n,state:E.d.Completed})});var o={body:z.rt("<b>Get notified</b> when a teammate sends you a message or mentions your name.",{note:"Incomplete state copy for third action step. Most important info should be bolded."}),button:z.rt("Turn On Notifications",{note:"Button label for incomplete state of third step. This should not convey customization, just enablement."}),tip:null},c={body:"denied"===i?z.rt("You've disallowed notifications in your browser. You'll need to open your browser preferences to change that.",{note:"Completed state copy, bolded, no punctuation",fallbackHash:"1a4db9df0870ea9d3249727659a462c79ca89790",fallbackHashNs:"prefs"}):s.a.createElement("b",null,z.rt("Turned on notifications",{note:"Completed state copy, bolded, no punctuation"})),button:z.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null},l={[E.d.Pending]:o,[E.d.InProgress]:o,[E.d.Completed]:c},d="default"===i,p=d?E.d.InProgress:a,u=R(l,p,"button"),h=R(l,p,"body");return"na"!==i?s.a.createElement(x,{workflowTask:Object(P.a)(Object(P.a)({},t),{state:d?E.d.InProgress:t.state}),onButtonClicked:()=>{e.updateActionStateAndReload({userTaskId:n,state:E.d.InProgress}),e.promptForPermissionAndSetPref().then(()=>{e.updateActionStateAndReload({userTaskId:n,state:E.d.Completed})})},buttonCopy:u,bodyCopy:h,buttonQa:"wp_enable_notif_button"}):null}),X=a("5mKg"),J=new b.b("welcome_place"),Z={[E.a.Gdrive]:{name:"Google Drive",appId:C.l?"A061CBSHF":"A6NL8MJ6Q"}},$=C.l?"/apps/category/At06175UHW-file-management":"/apps/category/At0EFRCDPW-file-management",ee="utm_medium=in-prod&utm_source=in-prod&utm_campaign=d_in-prod_in-prod_all__welcome",te={updateActionStateAndReload:v.h,openAuthenticatedUrlInBrowser:X.P};var ae=Object(m.b)(function(e){var t=Object(f.b)(e),a=t.auth_url||"",n=t.type||"",r=t.is_installed_on_team||!1;return{team:Object(B.d)(e),fileManagementAuthUrl:a,fileManagementType:n,isFileManagementAppInstalledOnTeam:r}},te)(e=>{var t,a,{workflowTask:n,workflowTask:{state:r,user_task_id:i},team:o,fileManagementType:c,fileManagementAuthUrl:l,isFileManagementAppInstalledOnTeam:d}=e,p=Z[c];if(p){var u=p.name;t={body:J.rt("<b>Connect to {fileManagementAppName}</b> to easily share and collaborate on files with your team.",{fileManagementAppName:u,note:"Incomplete state copy for file management step. Most important info should be bolded. fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive"}),button:J.rt("Connect to {fileManagementAppName}",{fileManagementAppName:u,note:"Button label for incomplete state of file management step. fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive."}),tip:null},a={body:s.a.createElement("b",null,J.rt("Connected to {fileManagementAppName}",{fileManagementAppName:u,note:"Completed state copy, bolded, no punctuation"})),button:J.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:J.rt("Tip: To share or collaborate on {fileManagementAppName} files without leaving Slack, click on the <b>paperclip icon</b> next to the message field.",{fileManagementAppName:u,note:'Completed state body copy conveying a tip about how to use the file management integration in Slack; use bolding on the words "paperclip icon". fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive.'})}}else t={body:J.rt("<b>Connect your file management tools</b> to easily share and collaborate on files with your team.",{note:"Incomplete state copy for file management step when user is not associated with a GSuite/Office 365 enterprise suite. Most important info should be bolded."}),button:J.rt("Browse Apps",{note:"Button label for incomplete state of file management step. Links to file management section of the App Directory."}),tip:null},a={body:s.a.createElement("b",null,J.rt("Browsed the App Directory",{note:"Completed state copy, bolded, no punctuation"})),button:J.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null};var h={[E.d.Pending]:t,[E.d.InProgress]:t,[E.d.Completed]:a},m=R(h,r,"button"),b=R(h,r,"body");return s.a.createElement(x,{workflowTask:n,onButtonClicked:()=>{p?(l&&d?window.open(l):e.openAuthenticatedUrlInBrowser(o,"apps/".concat(p.appId,"?").concat(ee)),e.updateActionStateAndReload({userTaskId:i,state:E.d.InProgress})):(e.openAuthenticatedUrlInBrowser(o,"".concat($,"?").concat(ee)),e.updateActionStateAndReload({userTaskId:i,state:E.d.Completed}))},buttonCopy:m,bodyCopy:b,clogElementName:c,buttonQa:"wp_file_management_button"})});function ne(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"!=typeof e)throw new Error("String required for capitalization; type ".concat(typeof e," given"));var a=e.slice(1);return t&&(a=a.toLowerCase()),"".concat(e.charAt(0).toUpperCase()).concat(a)}var re=new b.b("welcome_place"),se={updateActionStateAndReload:v.h};var ie=Object(m.b)(function(){return{}},se)(e=>{var{workflowTask:t,workflowTask:{state:a,user_task_id:n}}=e;Object(r.useEffect)(()=>{Object(C.v)()&&a!==E.d.Completed&&e.updateActionStateAndReload({userTaskId:n,state:E.d.Completed})});var i=Object(C.j)(),o={body:re.rt("<b>Download the desktop app</b> to get back to Slack swiftly",{note:"Completed state copy for first action step. Use bolding for the most important information. Note: No punctuation at the end."}),button:re.rt("Get Slack for {operatingSystem}",{note:"Button label for pending state of the desktop app download card. operatingSystem refers to the current operating system that the user is on (Mac, Windows, or Linux).",operatingSystem:ne(i)}),tip:null},c={body:re.rt("<b>Downloaded the desktop app</b>",{note:"Completed state copy for first action step. Use bolding for the most important information. Note: No punctuation at the end."}),button:re.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null},l={[E.d.Pending]:o,[E.d.InProgress]:o,[E.d.Completed]:c},d=R(l,a,"button"),p=R(l,a,"body");return s.a.createElement(x,{workflowTask:t,onButtonClicked:()=>{a===E.d.Pending&&e.updateActionStateAndReload({userTaskId:n,state:E.d.InProgress}),window.open("".concat("https://slack.com/get","?").concat("utm_medium=in-prod&utm_source=in-prod&utm_campaign=d_in-prod_in-prod_all__welcome"))},buttonCopy:d,bodyCopy:p,buttonQa:"wp_desktop_app_button"})}),oe=a("sk4h"),ce=a("d24p"),le=a("Fdc0"),de=a("0f2Y"),pe=a("O/xh"),ue=a("bcDH"),he=a("aXcD"),me=a("a+Oh"),be=a("OF9j"),_e=a("6kok"),ge=a("2TEj"),fe=a("eglI"),ve=a("Sxi2"),Oe=a("cD5Y"),ye=a("vmJv"),Ce=(a("XwvF"),a("gl+W")),je=a("lU/5"),Ee=a("KmK8"),ke=a("RhZ7"),Se=a("TOh8"),Ie=a("8CL7"),we=a("VrmM"),Te=a("Gq2+"),Ne=a("Aeia"),Pe=a("0dpy"),Ae=e=>{var{msg:t}=e;return s.a.createElement(Ce.a,{className:"welcome-message"},s.a.createElement(je.a,{msg:t},s.a.createElement(Ee.a,{light:s.a.createElement(ke.a,{msg:t})},s.a.createElement(Se.a,{msg:t}),"\xa0\xa0",s.a.createElement(Pe.a,{msg:t,clickable:!0}),s.a.createElement("br",null),s.a.createElement(Ie.a,{msg:t}),s.a.createElement(we.a,{msg:t}),s.a.createElement(Te.a,{msg:t}),s.a.createElement(Ne.b,{msg:t}))))},Me=(a("08gB"),new b.b("welcome_place"));var xe={joinAndSwitchToChannel:ue.a},Re=Object(m.b)(e=>{var t=Object(f.k)(e)||Object(ye.a)(e),a=Object(w.e)(e,t);return{channelId:t,channelName:Object(_e.w)(e,a),clogger:Object(g.a)({state:e}),pageViewingSessionId:Object(f.i)(e)}},xe)(class message_suggestions_header_MessageSuggestionsHeader extends r.Component{render(){var{channelName:e,isLoading:t,lastMessages:a,onChannelLinkClicked:n}=this.props,r=0!==a.length,i=h()("padding_left_150 padding_right_150 padding_top_100 padding_bottom_100",{border_bottom:!t&&!r}),o=Me.t("Say hi, post a GIF, go wild. The world (or at least this channel) is your oyster."),c=s.a.createElement("div",{className:"welcome-place-channel-preview padding_100 border_top border_bottom"},a.map(e=>s.a.createElement(Ae,{msg:e,key:e.ts})));return s.a.createElement("div",{className:"sk_primary_background welcome-place-send-message-header"},s.a.createElement("div",{className:i},s.a.createElement("div",{className:"display_flex justify_content_between"},s.a.createElement("span",null,s.a.createElement("strong",null,e)),s.a.createElement(de.a,{onClick:()=>n("view_channel")},Me.t("View channel"))),s.a.createElement("p",{className:"welcome-place-channel-description"},o)),t?s.a.createElement("div",{className:"display_flex align_items_center justify_content_center full_height padding_100 border_top border_bottom"},s.a.createElement(Oe.a,null)):r&&c)}}),De=a("HSEu"),Fe=a("8cl8"),Le=(a("HaAk"),new b.b("welcome_place")),Ue=Object(m.b)(e=>{var t,a=Object(f.k)(e);if(Object(f.p)(e)){var n=Object(w.k)(e,a);t=Object(_e.w)(e,n,{imIncludeAtSign:!1})}else{var r=Object(w.e)(e,a);t=Object(_e.w)(e,r)}return{channelName:t,featureWysiwygComposer:Object(me.a)(e),clogger:Object(g.a)({state:e}),pageViewingSessionId:Object(f.i)(e)}})(e=>{var{channelName:t,inputRef:a,sendMessage:n,onTextChange:r,featureWysiwygComposer:i}=e;return s.a.createElement("div",{className:"display_flex align_items_center margin_bottom_50"},s.a.createElement(De.c,{className:"welcome-place-message-input margin_right_100",enableEmojiButton:!0,enableFileButton:!1,enableMentionButton:!0,enableSendButton:!1,enableSnippetCreation:!1,enableJumbomoji:!1,placeholder:Object(Fe.a)({channelName:t,isSelfDm:!1}),ref:a,sendMessage:n,onTextChange:r,enableComposerButton:i}),s.a.createElement(T.d,{type:"primary",onClick:n,className:"align_self_start nudge_top_2"},Le.t("Send")))}),Be=new b.b("welcome_place"),He={sendWelcomePlaceInputMessage:v.g,fetchHistory:ge.a,joinAndSwitchToChannel:ue.a},We=Object(m.b)(e=>{var t=Object(f.k)(e),a=Object(w.e)(e,t),n=Object(_e.w)(e,a),{messages:r,slice:s}=Object(oe.b)(e,t,3),i=r.length>0;return{channelId:t,channelName:n,featureWysiwygComposer:Object(me.a)(e),isChannelNonEmpty:i,clogger:Object(g.a)({state:e}),pageViewingSessionId:Object(f.i)(e),lastMessages:r,needToRefetchMessages:!s||!s.reachedEnd}},He)(e=>{var{channelId:t,channelName:a,fetchHistory:n,sendWelcomePlaceInputMessage:i,featureWysiwygComposer:o,isChannelNonEmpty:c,joinAndSwitchToChannel:l,clogger:d,pageViewingSessionId:p,needToRefetchMessages:u,lastMessages:h}=e,[m,b]=Object(r.useState)(!0),[_,g]=Object(r.useState)(!1),[f,v]=Object(r.useState)(u);Object(r.useEffect)(()=>{u&&!_&&(g(!0),n({channelId:t,type:"channel"}).then(()=>{g(!1),v(!1)}))},[u,_,n,t]);var O=Object(r.useRef)(null),C=()=>O.current.getWrappedInstance(),j=e=>{l({channelId:t}),d.track("WELCOME_PLACE",{contexts:{ui_context:{action:y.UiAction.CLICK,ui_element:y.UiElement.WELCOME_PLACE_ACTION_SEND_MESSAGE,ui_properties:{element_type:y.ElementType.LINK,element_name:e}},welcome_place:{welcome_session_id:p}}})};return s.a.createElement("div",{className:"welcome-place-send-message-card"},s.a.createElement(Re,{isLoading:f,onChannelLinkClicked:j,lastMessages:h}),s.a.createElement("div",{className:"welcome-place-send-message-pane padding_left_150 padding_right_150 padding_top_100 padding_bottom_100"},s.a.createElement("p",{className:"welcome-place-send-message-card--header-subtitle"},Be.rt("Your message will be posted in {channelName}.",{channelName:s.a.createElement(de.a,{onClick:()=>j("channel_header")},a)})),s.a.createElement(Ue,{inputRef:O,sendMessage:()=>{if(!m){var e=C().getContents(),a=o?new fe.Delta(e.contents):null;i({text:Object(be.a)(e),channelOrMemberId:t,delta:a}),d.track("WELCOME_PLACE",{contexts:{ui_context:{action:y.UiAction.CLICK,ui_element:y.UiElement.WELCOME_PLACE_ACTION_SEND_MESSAGE,ui_properties:{element_type:y.ElementType.BUTTON,element_name:"send_channel_message"}},welcome_place:{welcome_session_id:p}}})}},onTextChange:e=>b(0===e.length)}),s.a.createElement(ve.a,{hasMessagesToRender:c,prefillMessageInput:e=>{var t=C();t.value(Object(he.b)(e)),t.setCursorAtEnd()}})))}),qe=a("G4ux"),Ge=a("3dqR"),Ke=new b.b("welcome_place"),Ve={sendWelcomePlaceInputMessage:v.g},ze=Object(m.b)(e=>{var t=Object(X.e)(Object(B.d)(e)),a=Object(i.d)(e),n=Object(qe.d)(e,a),r=Object(le.K)(n),s=Object(f.k)(e),o=Object(qe.d)(e,s);return{userId:a,username:r,inviterId:s,inviterDisplayName:Object(le.W)(e,s),inviterRealName:Object(le.K)(o),teamName:t,featureWysiwygComposer:Object(me.a)(e),clogger:Object(g.a)({state:e}),pageViewingSessionId:Object(f.i)(e)}},Ve)(e=>{var{userId:t,username:a,inviterId:n,inviterDisplayName:i,inviterRealName:o,teamName:c,sendWelcomePlaceInputMessage:l,featureWysiwygComposer:d,clogger:p,pageViewingSessionId:u}=e,[h,m]=Object(r.useState)(!0),b=Object(r.useRef)(null),_=()=>b.current.getWrappedInstance();return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"welcome-place-send-message-card welcome-place-send-message-card--caret_left margin_bottom_100 margin_right_600 sk_primary_background"},s.a.createElement("div",{className:"padding_top_75 padding_left_100 padding_bottom_100 padding_right_100 display_flex align_items_center"},s.a.createElement(Ge.c,{userId:n,size:36,isInteractive:!1,className:"margin_right_75"}),s.a.createElement("span",null,s.a.createElement("b",null,o)),s.a.createElement("span",{className:"welcome-place-send-message-card--header-subtitle"},"\xa0","| ".concat(Ke.t("Invited you to {workspaceName}",{workspaceName:c}))))),s.a.createElement("div",{className:"welcome-place-send-message-card welcome-place-send-message-card--caret_right margin_left_600 sk_primary_background"},s.a.createElement("div",{className:"padding_top_75 padding_left_100 padding_bottom_100 padding_right_100 display_flex align_items_center"},s.a.createElement(Ge.c,{userId:t,size:36,isInteractive:!1,className:"margin_right_75"}),s.a.createElement("span",null,Ke.rt("<b>{username}</b> (you)",{username:a})),s.a.createElement("span",{className:"welcome-place-send-message-card--header-subtitle"},"\xa0","| ".concat(Ke.t("Just joined")))),s.a.createElement("div",{className:"welcome-place-send-message-pane padding_left_150 padding_right_150 padding_top_100 padding_bottom_100"},s.a.createElement("p",{className:"welcome-place-send-message-card--header-subtitle"},Ke.rt("Direct message with {inviterUsername}",{inviterUsername:s.a.createElement(pe.a,{userId:n},s.a.createElement(de.a,null,"@".concat(i)))})),s.a.createElement(Ue,{inputRef:b,sendMessage:()=>{if(!h){var e=_().getContents(),t=d?new fe.Delta(e.contents):null;l({text:Object(be.a)(e),channelOrMemberId:n,delta:t}),p.track("WELCOME_PLACE",{contexts:{ui_context:{action:y.UiAction.CLICK,ui_element:y.UiElement.WELCOME_PLACE_ACTION_SEND_MESSAGE,ui_properties:{element_type:y.ElementType.BUTTON,element_name:"send_dm"}},welcome_place:{welcome_session_id:u}}})}},onTextChange:e=>m(0===e.length)}),s.a.createElement(ve.a,{hasMessagesToRender:!1,prefillMessageInput:e=>{var t=_();t.value(Object(he.b)(e)),t.setCursorAtEnd()},isDm:!0}))))}),Ye=new b.b("welcome_place");var Qe={openDmBrowserModal:ce.a},Xe=Object(m.b)(function(e){var t=Object(f.l)(e)||E.c.BROWSE,a={sendMessageTaskType:t};if(t===E.c.BROWSE)return a;var n=Object(f.k)(e);if(t===E.c.CHANNEL){var r=n;return Object(P.a)(Object(P.a)({},a),{isChannelNonEmpty:Object(oe.a)(e,r)})}if(t===E.c.DM){var s=n,i=Object(le.W)(e,s,!1,!0);return Object(P.a)(Object(P.a)({},a),{inviterId:s,inviterUsername:i})}return a},Qe)(e=>{var{workflowTask:t,sendMessageTaskType:a,isChannelNonEmpty:n,inviterUsername:r,inviterId:i,openDmBrowserModal:o}=e,c=null,l=null;if(a===E.c.BROWSE&&(c=Ye.rt("<b>Send a message</b> to a teammate and say hello."),l=Ye.t("Send a Message")),a===E.c.DM&&(c=Ye.rt("<b>Send a message</b> to let {inviterUsername} know you\u2019ve arrived.",{inviterUsername:s.a.createElement("span",{className:"inline_block"},s.a.createElement(pe.a,{userId:i},s.a.createElement(de.a,null,r)))})),a===E.c.CHANNEL){var d=Ye.rt("<b>Send a message</b> to get the conversation started."),p=Ye.rt("<b>Send a message</b> to let your team know you\u2019re here.");c=n?p:d}var u={body:c,button:l,tip:null},h={body:Ye.rt("<b>Sent a message</b>"),button:null,tip:null},m={[E.d.Pending]:u,[E.d.InProgress]:u,[E.d.Completed]:h},b=R(m,t.state,"button"),_=R(m,t.state,"body");if(t.state!==E.d.Completed){if(a===E.c.BROWSE)return s.a.createElement(x,{workflowTask:t,onButtonClicked:o,bodyCopy:_,buttonCopy:b});if(a===E.c.DM)return s.a.createElement(x,{workflowTask:t,onButtonClicked:U.a,bodyCopy:_,buttonCopy:b},s.a.createElement(ze,null));if(a===E.c.CHANNEL)return s.a.createElement(x,{workflowTask:t,onButtonClicked:U.a,buttonCopy:b,bodyCopy:_},s.a.createElement(We,null))}return s.a.createElement(x,{workflowTask:t,onButtonClicked:U.a,buttonCopy:b,bodyCopy:_})}),Je=new b.b("welcome_place");var Ze=Object(m.b)(function(e){return{progress:Object(f.n)(e)}})(class workflow_item_container_WorkflowItemContainer extends r.Component{render(){var{workflowItems:e,progress:t}=this.props,a=Je.rt("<b>Let\u2019s get you set up.</b> Follow the steps below to find your people, say hello, and get up and running."),n=e.slice().filter(k.a).sort(S);return s.a.createElement(welcome_row_WelcomeRow,{subtitle:a},s.a.createElement("div",{className:"border_bottom padding_bottom_100 caption"},Je.rt("<span>{completedStepsCount} of {totalStepsCount}</span> complete",{completedStepsCount:t.completed,totalStepsCount:t.total},e=>{var{text:t}=e;return s.a.createElement("span",{className:"bold"},t)})),s.a.createElement("div",{className:"c-workflow-item-container"},n.map(e=>{var{subtype:t}=e,a=null;return t===E.e.SeeWelcomePlace?a=s.a.createElement(q,{key:"workflow_item_card_".concat(t),workflowTask:e}):t===E.e.JoinChannel?a=s.a.createElement(L,{key:"workflow_item_card_".concat(t),workflowTask:e}):t===E.e.SendMessage?a=s.a.createElement(Xe,{key:"workflow_item_card_".concat(t),workflowTask:e}):t===E.e.EnableNotifications?a=s.a.createElement(Q,{key:"workflow_item_card_".concat(t),workflowTask:e}):t===E.e.AddAppFileManagement?a=s.a.createElement(ae,{key:"workflow_item_card_".concat(t),workflowTask:e}):t===E.e.DownloadDesktopApp&&(a=s.a.createElement(ie,{key:"workflow_item_card_".concat(t),workflowTask:e})),a})))}});a("plp+");class welcome_card_WelcomeCard extends r.Component{render(){var{className:e,hasNoPadding:t,hasNoBorder:a,hasNoBackground:n}=this.props,r=h()("welcome-card extra-rounded overflow_hidden",e,{padding_125:!t,bordered:!a,sk_white_bg:!n});return s.a.createElement("div",{className:r},this.props.children)}}a("gBrz");var $e=new b.b("welcome_place");var et=Object(m.b)(function(e){return{clogger:Object(g.a)({state:e}),pageViewingSessionId:Object(f.i)(e),isFlexpaneOpen:Object(N.j)(e)}},{})(M()(class video_card_VideoCard extends r.Component{constructor(e){super(e),this.showPlayer=(()=>{var{showPlayer:e}=this.state,{clogger:t,pageViewingSessionId:a}=this.props;this.setState(()=>({showPlayer:!e})),t.track("WELCOME_PLACE",{contexts:{ui_context:{action:y.UiAction.CLICK,ui_element:y.UiElement.WELCOME_PLACE_VIDEO,ui_properties:{element_value:"start",element_type:y.ElementType.VIDEO,element_name:"Team Chat & Channels | Slack Features"}},welcome_place:{welcome_session_id:a}}})}),this.containerRef=s.a.createRef(),this.state={showPlayer:!1}}componentDidMount(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:y.UiElement.WELCOME_PLACE_VIDEO}})}componentWillUnmount(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}render(){var{showPlayer:e}=this.state,{youtubeEmbedUrl:t,className:a,isFlexpaneOpen:n}=this.props,i=h()("video-player__title-card video-player__content",{"player-is-active":e}),o=h()("video-player__iframe__container video-player__content",{"player-is-active":e}),c=h()("video-player",{flexpaneOpen:n}),l="".concat(t,"&modestbranding=1&rel=0"),d=s.a.createElement(r.Fragment,null,s.a.createElement("h1",{className:"sk_white_always margin_bottom_50"},$e.rt("Welcome to Slack!")),s.a.createElement("p",{className:"sk_white_always margin_bottom_75"},$e.t("Slack helps your team communicate, connect, and do your best work together.")),s.a.createElement(T.d,{onClick:this.showPlayer},$e.t("Watch Video",{note:"Button copy for call-to-action on video module.",fallbackHash:"5ccd18c8a398d9f789a385b18ecb4678bd622f21"})));return s.a.createElement(welcome_card_WelcomeCard,{className:a,hasNoPadding:!0,hasNoBorder:!0,hasNoBackground:!0},s.a.createElement("link",{rel:"preload",href:"".concat(l,"&autoplay=1"),as:"document"}),s.a.createElement("div",{className:c,ref:this.containerRef},s.a.createElement("div",{className:"video-player__container"},s.a.createElement("div",{className:i,role:"region"},d),s.a.createElement("div",{className:o},s.a.createElement("iframe",{className:"full_height",style:{height:"100%",width:"100%"},src:"".concat(l).concat(e?"&autoplay=1":""),frameBorder:"0",allowFullScreen:!0,title:$e.t("Team Chat & Channels | Slack Features",{note:"A video by Slack, on Youtube, that explains Slack features."})})))))}})),tt=a("xWuZ"),at=a("ZBlo"),nt=a("od5y"),rt=a("HvGc"),st=a("9E9B"),it=a("kDop"),ot=a("RAhH"),ct=a("bkaq"),lt=new b.b("welcome_place");var dt={startImByMemberId:st.startImByMemberId},pt=Object(m.b)(function(e,t){var{id:a}=t,n=Object(qe.d)(e,a);return{teamDomain:Object(X.f)(Object(B.i)(e,n.team_id)),member:n,clogger:Object(g.a)({state:e}),pageViewingSessionId:Object(f.i)(e)}},dt)(class member_card_MemberCard extends r.Component{constructor(){super(...arguments),this.startIm=(()=>{var{member:e,clogger:t,idx:a,pageViewingSessionId:n}=this.props;this.props.startImByMemberId({memberId:e.id}),t.track("WELCOME_PLACE",{contexts:{ui_context:{action:y.UiAction.CLICK,ui_element:y.UiElement.WELCOME_PLACE_PROFILE_CARD,ui_properties:{element_value:e.id,element_index:a,element_type:y.ElementType.BUTTON}},welcome_place:{welcome_session_id:n}}})})}render(){var{member:e,type:t,channels:a,teamDomain:n}=this.props,{profile:i}=e,o=t?s.a.createElement("p",{className:"member-card__content"},lt.t("Invited you to Slack",{fallbackHash:"9064cf8eb6c496f261172fb4d28eb5e38c796b7e"})):null,c=1===a.length?lt.t("A channel they're in: ",{fallbackHash:"0b353ec7cd241b45e73b94a056984793bedee7a4"}):lt.t("A few channels they're in: ",{fallbackHash:"0b353ec7cd241b45e73b94a056984793bedee7a4"}),l=a.map((e,t)=>{var i=Object(_e.n)({channelId:e,teamDomain:n});return s.a.createElement(r.Fragment,{key:"fragment-".concat(e)},s.a.createElement(de.a,{key:"link-".concat(e),href:i,className:"no_wrap"},s.a.createElement(it.a,{key:"entity-".concat(e),channelId:e})),t+1===a.length?".":", ")});return s.a.createElement(welcome_card_WelcomeCard,{className:"member-card-container flex_one",hasNoPadding:!0},s.a.createElement("div",{className:"member-card"},s.a.createElement(ot.c,{tip:lt.rt("Message {name}",{name:i.real_name}),position:"top"},s.a.createElement(de.a,{onClick:this.startIm,className:"member-card__top-link"},s.a.createElement("div",{className:"member-card__top"},s.a.createElement(Ge.b,{size:56,isInteractive:!1,imageUrl:i.image_72,imageUrl2x:i.image_192,className:"member-card__avatar"}),s.a.createElement("div",{className:"flex_one"},s.a.createElement(ct.a,{member:e,className:"member-card__name"}),o)))),s.a.createElement("div",{className:"member-card__bottom"},s.a.createElement("p",{className:"member-card__content"},c,l))))}}),ut=(a("iJ13"),new b.b("welcome_place"));var ht=Object(m.b)(function(e){return{clogger:Object(g.a)({state:e}),pageViewingSessionId:Object(f.i)(e)}},function(e){return{showMemberDirectory:()=>{e(Object(rt.i)())}}})(M()(class member_row_MemberRow extends r.Component{constructor(e){super(e),this.showMoreUsers=(()=>{var{clogger:e,pageViewingSessionId:t}=this.props;this.setState(()=>({showMore:!0})),e.track("WELCOME_PLACE",{contexts:{ui_context:{action:y.UiAction.CLICK,ui_element:y.UiElement.WELCOME_PLACE_MEMBERS_SHOW_ALL,ui_properties:{element_type:y.ElementType.LINK}},welcome_place:{welcome_session_id:t}}})}),this.showMemberDirectory=(()=>{var{clogger:e,pageViewingSessionId:t}=this.props;e.track("WELCOME_PLACE",{contexts:{ui_context:{action:y.UiAction.CLICK,ui_element:y.UiElement.WELCOME_PLACE_MEMBERS_SHOW_MEMBER_DIRECTORY,ui_properties:{element_type:y.ElementType.LINK}},welcome_place:{welcome_session_id:t}}}),this.props.showMemberDirectory()}),this.containerRef=s.a.createRef(),this.state={showMore:!1,initialUsersCards:[],additionalUserCards:[],suggestOrgChart:!1}}static getDerivedStateFromProps(e){var t=Object(at.a)(e.userCards,6),a=t.shift()||[],n=[];return t.length&&(n=Object(at.a)(Object(tt.a)(t),12)),{initialUsersCards:a,additionalUserCards:n.shift()||[],suggestOrgChart:!!n.length}}componentDidMount(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:y.UiElement.WELCOME_PLACE_MEMBERS_BLOCK},visibilityRatio:.33})}componentWillUnmount(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}render(){var{className:e}=this.props,{initialUsersCards:t,additionalUserCards:a,suggestOrgChart:n,showMore:i}=this.state;return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:h()("member-card-grid",e,{"member-card-grid-1":1===t.length,"member-card-grid-2":2===t.length}),ref:this.containerRef},t.map((e,t)=>s.a.createElement(pt,{id:e.id,idx:t,key:e.id,type:e.type,channels:e.channels})),i&&a.map((e,a)=>s.a.createElement(pt,{id:e.id,idx:a+t.length,key:e.id,channels:e.channels}))),(()=>{var e=i&&n?ut.t("View directory"):ut.t("Show more");if(a.length){var t=this.showMoreUsers;return i&&!n?null:(i&&n&&(t=this.showMemberDirectory),s.a.createElement("div",{className:"align_center margin_top_100 member-card__show-more-link"},s.a.createElement(de.a,{onClick:t},e),s.a.createElement(nt.b,{type:"chevron-down"})))}return null})())}})),mt=a("ftfc"),bt=a("7nxQ");var _t=Object(m.b)(function(e){return{clogger:Object(g.a)({state:e}),pageViewingSessionId:Object(f.i)(e)}})(M()(class help_search_card_HelpSearchCard extends r.Component{constructor(e){super(e),this.clogLinkClick=(e=>{var{url:t,index:a,query:n,articleId:r}=e;this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:y.UiAction.CLICK,ui_element:y.UiElement.WELCOME_PLACE_HELP_LINK,ui_properties:{element_type:y.ElementType.LINK,element_value:r.toString(),element_index:a},article_url:t,search_terms:n,locale:Object(bt.a)()},welcome_place:{welcome_session_id:this.props.pageViewingSessionId}}})}),this.containerRef=s.a.createRef()}componentDidMount(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:y.UiElement.WELCOME_PLACE_HELP_BLOCK},visibilityRatio:.5})}componentWillUnmount(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}render(){var{defaultArticlesData:e}=this.props;return s.a.createElement("div",{ref:this.containerRef,className:"welcome-place__search_container"},s.a.createElement(mt.a,{defaultArticlesData:e,onOpenLink:this.clogLinkClick,noTopMargin:!0}))}})),gt=(a("3rHJ"),a("HI9p")),ft=a("hbEN"),vt=.8;var Ot=Object(m.b)(e=>({clogger:Object(g.a)({state:e}),pageViewingSessionId:Object(f.i)(e)}))(class visibility_logger_provider_VisibilityLoggerProviderBase extends r.Component{constructor(e){super(e),this.elementsForLogging=[],this.addElementForLogging=(e=>{this.elementsForLogging.push(e),requestAnimationFrame(()=>{this.props.scrollContainerEl&&this.checkElementsForClogging(this.props.scrollContainerEl)})}),this.removeElementFromLogging=(e=>{if(e){var t=Object(gt.a)(this.elementsForLogging,t=>t.element===e);-1!==t&&this.elementsForLogging.splice(t,1)}}),this.onScrollListenerDebounced=Object(ft.a)(e=>{this.checkElementsForClogging(e.target)},1e3)}componentDidMount(){this.setupEventListeners()}componentDidUpdate(e){e.scrollContainerEl!==this.props.scrollContainerEl&&(e.scrollContainerEl&&e.scrollContainerEl.removeEventListener("scroll",this.onScrollListenerDebounced),this.setupEventListeners(),requestAnimationFrame(()=>{this.props.scrollContainerEl&&this.checkElementsForClogging(this.props.scrollContainerEl)}))}componentWillUnmount(){this.props.scrollContainerEl&&this.props.scrollContainerEl.removeEventListener("scroll",this.onScrollListenerDebounced)}checkElementsForClogging(e){var t=e.getClientRects()[0];t&&this.elementsForLogging.slice().forEach(e=>{var{element:a,uiContext:n,visibilityRatio:r}=e;if(a){var s=a.getClientRects()[0];if(s){var i=r||vt,o=s.top<t.top&&s.bottom>t.bottom,c=s.top>t.top&&s.bottom<t.bottom,l=0;o||c?l=1:s.top<t.top&&s.bottom>t.top&&s.bottom<t.bottom?l=(s.bottom-t.top)/(s.bottom-s.top):s.bottom>t.bottom&&s.top>t.top&&s.top<t.bottom&&(l=(t.bottom-s.top)/(s.bottom-s.top)),l>=i&&(this.removeElementFromLogging(a),this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:Object(P.a)(Object(P.a)({},n),{action:y.UiAction.IMPRESSION}),welcome_place:{welcome_session_id:this.props.pageViewingSessionId}}}))}}})}setupEventListeners(){this.props.scrollContainerEl&&this.props.scrollContainerEl.addEventListener("scroll",this.onScrollListenerDebounced)}render(){return s.a.createElement(A.Provider,{value:{scrollContainerEl:this.props.scrollContainerEl,addElementToVisibilityLogging:this.addElementForLogging,removeElementFromVisibilityLogging:this.removeElementFromLogging}},this.props.children)}});var yt=a("wd/R"),Ct=a.n(yt),jt=a("S3eg"),Et=a("aerA"),kt=a("WhMD"),St=a("yN0s"),It=(a("Q3H4"),new b.b("welcome_place"));var wt={setPrimaryView:jt.a};var Tt=Object(m.b)(function(e){return{clogger:Object(g.a)({state:e}),featureGgFromTheStart:Object(i.m)(e,"feature_gg_from_the_start"),pageViewingSessionId:Object(f.i)(e)}},wt)(M()(class welcome_place_trial_info_WelcomePlaceTrialInfo extends r.Component{constructor(e){super(e),this.navigateToBenefitsPage=(e=>{e.preventDefault(),this.props.clogger.track(Et.b,{contexts:{ui_context:{step:y.UiStep.TRACTOR_DIALOG_COMPLETED_STEP,step_variant:"std"===this.props.product?"standard_trial":"plus_trial",action:y.UiAction.CLICK,ui_properties:{element_type:y.ElementType.LINK,element_name:"learn_more_about_features"}}}}),this.props.setPrimaryView({id:"Ppaid-benefits"})}),this.containerRef=s.a.createRef()}componentDidMount(){"std"!==this.props.product&&"plus"!==this.props.product||this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:y.UiElement.WELCOME_PLACE_TRIAL_BLOCK},visibilityRatio:.33})}componentWillUnmount(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}render(){var e,{expiration:t,product:a,featureGgFromTheStart:n}=this.props;if("std"===a?e=Et.a.Standard:"plus"===a&&(e=Et.a.Plus),!e)return null;var r=Ct()(t,"YYYY-MM-DD");return s.a.createElement("div",{className:h()("welcome-trial-info"),ref:this.containerRef},s.a.createElement("div",{className:"welcome-trial-info__content",ref:this.containerRef},s.a.createElement(nt.b,{type:"slack",className:"margin_right_75 welcome-trial-info__icon",size:"inherit"}),s.a.createElement("div",null,s.a.createElement("div",{className:"bold"},n?It.rt("Your workspace is on a free trial of {selectedSlackPlan}",{selectedSlackPlan:Object(St.a)(e)}):""),s.a.createElement("div",null,n?It.rt("You can try out <a>all the features of {selectedSlackPlan}</a> for free until {trialEndDate}.",{selectedSlackPlan:Object(St.a)(e),trialEndDate:Object(kt.a)(r.valueOf(),{excludeYear:r.year()===Ct()().year()})},e=>{var{text:t}=e;return s.a.createElement(de.a,{onClick:this.navigateToBenefitsPage},t)}):""))))}})),Nt=new b.b("welcome_place");var Pt=Object(m.b)(function(e){return{items:Object(f.g)(e),clogger:Object(g.a)({state:e}),pageEntryPoint:Object(f.h)(e),pageViewingSessionId:Object(f.i)(e),firstClientLaunch:Object(f.q)(e)}},function(e){return{maybeRefreshWelcomePlaceData:()=>{e(Object(v.f)())},setPageEntryPoint:function(){e(Object(O.f)(...arguments))},regeneratePageViewingSessionId:()=>{e(Object(O.d)())},setAnimationState:t=>{e(Object(O.g)(t))}}})((e=>{class WithVisibilityLoggerProvider extends r.Component{constructor(e){super(e),this.state={scrollContainer:null}}render(){return s.a.createElement(Ot,{scrollContainerEl:this.state.scrollContainer},s.a.createElement(e,Object(P.a)({},this.props,{setScrollContainerElement:e=>{this.setState(()=>({scrollContainer:e}))}})))}}return WithVisibilityLoggerProvider.displayName="WithVisibilityLoggerProvider(".concat(e.displayName||"Component",")"),WithVisibilityLoggerProvider})(class welcome_place_WelcomePlace extends r.Component{constructor(e){super(e),this.onClickAnimationReloadIcon=(()=>{C.l&&(this.props.setAnimationState(!1),setTimeout(()=>{this.props.setAnimationState(!0)},100))}),this.containerRef=s.a.createRef()}componentDidMount(){var{pageEntryPoint:e,pageViewingSessionId:t,setScrollContainerElement:a}=this.props;this.props.maybeRefreshWelcomePlaceData(),this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:y.UiAction.IMPRESSION,ui_element:y.UiElement.WELCOME_PLACE_PAGE},welcome_place:{welcome_session_id:t,entry_point:e}}}),this.props.setPageEntryPoint(E.b.Unknown),a(this.containerRef.current)}componentWillUnmount(){var{pageViewingSessionId:e}=this.props;this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:y.UiAction.EXIT_VIEW,ui_element:y.UiElement.WELCOME_PLACE_PAGE},welcome_place:{welcome_session_id:e}}}),this.props.regeneratePageViewingSessionId()}render(){var{items:e}=this.props;return s.a.createElement("div",{ref:this.containerRef,className:h()("p-welcome-place overflow_x_scroll flex_one sk_off_white_bg",{"welcome-place-page-container--typography":!Object(_.a)(),"welcome-place-page-container--border-inset":!Object(_.a)(),"welcome-place-page-container--height-fix":Object(_.a)(),full_height:!Object(_.a)()}),"data-qa":"welcome-place-page-container"},s.a.createElement("div",{className:"welcome-place-header-gradient"},C.l||C.t?s.a.createElement(j.a,{type:"reload-small",className:"position_absolute",onClick:this.onClickAnimationReloadIcon}):null,s.a.createElement("h2",{className:"padding_top_200 padding_left_125"},Nt.rt("Welcome to Slack"))),e.map((e,t)=>{switch(e.type){case"video":return s.a.createElement(welcome_row_WelcomeRow,{key:"".concat(e.type).concat(t),title:Nt.t("Learn more about Slack",{note:"Title for the new section in the Get Started page that includes the intro to channels video and the Help Center search bar."})},s.a.createElement(et,{youtubeEmbedUrl:e.content.video.url}));case"workflow":return s.a.createElement(Ze,{key:"".concat(e.type).concat(t),workflowItems:e.content.workflow.tasks});case"user_cards":return s.a.createElement(welcome_row_WelcomeRow,{key:"".concat(e.type).concat(t),title:Nt.t("See who else is here"),subtitle:Nt.t("You can message people directly, or check out the channels they\u2019re in.",{note:"Subtitle for the teammates module that shares the two main ways to connect."})},s.a.createElement(ht,{userCards:e.content.user_cards}));case"help_center_search":return s.a.createElement(welcome_row_WelcomeRow,{key:"".concat(e.type).concat(t),title:Nt.t("Have a question? We\u2019re here to help.",{note:"Title for the Help Center search bar in the Get Started page."})},s.a.createElement(_t,{defaultArticlesData:Object(p.a)(e,"content.help_center_search.articles",null)}));case"trial":return s.a.createElement(Tt,{key:"".concat(e.type).concat(t),product:e.content.trial.level,expiration:e.content.trial.expiration_date});default:return null}}))}})),At=a("rePB"),Mt=a("fujP"),xt=a("zmn3"),Rt=a("DKof"),Dt=a("mkut"),Ft=a("tn36"),Lt=a("aK/h"),Ut=a("DTfP"),Bt=a("fYfO"),Ht=a("gmRt"),Wt=a("zRJ2"),qt=a("q4bl"),Gt=a("Lev8"),Kt=a("dxEi"),Vt=a("kcos"),zt=a("J7ms"),Yt=a("wuDf"),Qt=a("XoBp"),Xt=a("Z6RV"),Jt=a("q+7W"),Zt=a("Wx4V"),$t=a("tbBR"),ea=a("7v/h"),ta=a("Efcz"),aa=a("b89k"),na=a("yHhI"),ra=a("aLpA"),sa=a("JvzI"),ia=a("XL7r"),oa=a("brL+"),ca=a("K7CU"),la=a("/Rx2"),da=a("s19S"),pa=a("tRvn"),ua=a("ynxK"),ha=a("RMmo"),ma={default:{tada:cdn_url+"/80588/img/unread/empty/default/1f389.png",victory:{1:cdn_url+"/80588/img/unread/empty/default/270c-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/270c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/270c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/270c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/270c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/270c-1f3ff.png"},racecar:cdn_url+"/80588/img/unread/empty/default/1f3ce-fe0f.png",rocket:cdn_url+"/80588/img/unread/empty/default/1f680.png",octopus:cdn_url+"/80588/img/unread/empty/default/1f419.png",high5:{1:cdn_url+"/80588/img/unread/empty/default/1f64c.png",2:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3ff.png"},apple:cdn_url+"/80588/img/unread/empty/default/1f34f.png",sunglasses:cdn_url+"/80588/img/unread/empty/default/1f60e.png",thumbup:{1:cdn_url+"/80588/img/unread/empty/default/1f44d.png",2:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3ff.png"},boom:cdn_url+"/80588/img/unread/empty/default/1f4a5.png",bee:cdn_url+"/80588/img/unread/empty/default/1f41d.png",clap:{1:cdn_url+"/80588/img/unread/empty/default/1f44f.png",2:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3ff.png"},crystalball:cdn_url+"/80588/img/unread/empty/default/1f52e.png",tractor:cdn_url+"/80588/img/unread/empty/default/1f69c.png",pony:cdn_url+"/80588/img/unread/empty/default/1f434.png",chick:cdn_url+"/80588/img/unread/empty/default/1f423.png",growth:cdn_url+"/80588/img/unread/empty/default/1f331.png",sun:cdn_url+"/80588/img/unread/empty/default/2600-fe0f.png",balloon:cdn_url+"/80588/img/unread/empty/default/1f388.png",sweetpotato:cdn_url+"/80588/img/unread/empty/default/1f360.png",leafs:cdn_url+"/80588/img/unread/empty/default/1f343.png",owl:cdn_url+"/80588/img/unread/empty/default/1f989.png",books:cdn_url+"/80588/img/unread/empty/default/1f4da.png",island:cdn_url+"/80588/img/unread/empty/default/1f3dd-fe0f.png",coffee:cdn_url+"/80588/img/unread/empty/default/2615.png",footprints:cdn_url+"/80588/img/unread/empty/default/1f463.png",tea:cdn_url+"/80588/img/unread/empty/default/1f375.png",croissant:cdn_url+"/80588/img/unread/empty/default/1f950.png",art:cdn_url+"/80588/img/unread/empty/default/1f3a8.png",person_ball:{1:cdn_url+"/80588/img/unread/empty/default/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/80588/img/unread/empty/default/2708-fe0f.png",sailboat:cdn_url+"/80588/img/unread/empty/default/26f5.png",ship:cdn_url+"/80588/img/unread/empty/default/1f6a2.png",bulb:cdn_url+"/80588/img/unread/empty/default/1f4a1.png",hammer:cdn_url+"/80588/img/unread/empty/default/1f528.png",checkered_flag:cdn_url+"/80588/img/unread/empty/default/1f3c1.png",wrench:cdn_url+"/80588/img/unread/empty/default/1f527.png",metro:cdn_url+"/80588/img/unread/empty/default/1f687.png",soccer:cdn_url+"/80588/img/unread/empty/default/26bd.png",trophy:cdn_url+"/80588/img/unread/empty/default/1f3c6.png",cityscape:cdn_url+"/80588/img/unread/empty/default/1f3d9-fe0f.png",dog:cdn_url+"/80588/img/unread/empty/default/1f436.png",crossed_swords:cdn_url+"/80588/img/unread/empty/default/2694-fe0f.png",blush:cdn_url+"/80588/img/unread/empty/default/1f60a.png",candy:cdn_url+"/80588/img/unread/empty/default/1f36c.png",herb:cdn_url+"/80588/img/unread/empty/default/1f33f.png",sparkles:cdn_url+"/80588/img/unread/empty/default/2728.png",check_mark:cdn_url+"/80588/img/unread/empty/default/2705.png",confetti_ball:cdn_url+"/80588/img/unread/empty/default/1f38a.png",doughnut:cdn_url+"/80588/img/unread/empty/default/1f369.png",bookmark_tabs:cdn_url+"/80588/img/unread/empty/default/1f4d1.png",sleuth:{1:cdn_url+"/80588/img/unread/empty/default/1f575-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/80588/img/unread/empty/default/23f3.png",newspaper:cdn_url+"/80588/img/unread/empty/default/1f5de-fe0f.png",flex:{1:cdn_url+"/80588/img/unread/empty/default/1f4aa.png",2:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/80588/img/unread/empty/default/1f30e.png",chocolate_bar:cdn_url+"/80588/img/unread/empty/default/1f36b.png",wave:{1:cdn_url+"/80588/img/unread/empty/default/1f44b.png",2:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3ff.png"},relieved:cdn_url+"/80588/img/unread/empty/default/1f60c.png",walking:{1:cdn_url+"/80588/img/unread/empty/default/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/80588/img/unread/empty/default/1f6cb.png",unicorn_face:cdn_url+"/80588/img/unread/empty/default/1f984.png",zap:cdn_url+"/80588/img/unread/empty/default/26a1.png",star:cdn_url+"/80588/img/unread/empty/default/2b50.png"},google:{tada:cdn_url+"/80588/img/unread/empty/google/1f389.png",victory:{1:cdn_url+"/80588/img/unread/empty/google/270c-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/270c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/270c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/270c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/270c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/270c-1f3ff.png"},racecar:cdn_url+"/80588/img/unread/empty/google/1f3ce-fe0f.png",rocket:cdn_url+"/80588/img/unread/empty/google/1f680.png",octopus:cdn_url+"/80588/img/unread/empty/google/1f419.png",high5:{1:cdn_url+"/80588/img/unread/empty/google/1f64c.png",2:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3ff.png"},apple:cdn_url+"/80588/img/unread/empty/google/1f34f.png",sunglasses:cdn_url+"/80588/img/unread/empty/google/1f60e.png",thumbup:{1:cdn_url+"/80588/img/unread/empty/google/1f44d.png",2:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3ff.png"},boom:cdn_url+"/80588/img/unread/empty/google/1f4a5.png",bee:cdn_url+"/80588/img/unread/empty/google/1f41d.png",clap:{1:cdn_url+"/80588/img/unread/empty/google/1f44f.png",2:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3ff.png"},crystalball:cdn_url+"/80588/img/unread/empty/google/1f52e.png",tractor:cdn_url+"/80588/img/unread/empty/google/1f69c.png",pony:cdn_url+"/80588/img/unread/empty/google/1f434.png",chick:cdn_url+"/80588/img/unread/empty/google/1f423.png",growth:cdn_url+"/80588/img/unread/empty/google/1f331.png",sun:cdn_url+"/80588/img/unread/empty/google/2600-fe0f.png",balloon:cdn_url+"/80588/img/unread/empty/google/1f388.png",sweetpotato:cdn_url+"/80588/img/unread/empty/google/1f360.png",leafs:cdn_url+"/80588/img/unread/empty/google/1f343.png",owl:cdn_url+"/80588/img/unread/empty/google/1f989.png",books:cdn_url+"/80588/img/unread/empty/google/1f4da.png",island:cdn_url+"/80588/img/unread/empty/google/1f3dd-fe0f.png",coffee:cdn_url+"/80588/img/unread/empty/google/2615.png",footprints:cdn_url+"/80588/img/unread/empty/google/1f463.png",tea:cdn_url+"/80588/img/unread/empty/google/1f375.png",croissant:cdn_url+"/80588/img/unread/empty/google/1f950.png",art:cdn_url+"/80588/img/unread/empty/google/1f3a8.png",person_ball:{1:cdn_url+"/80588/img/unread/empty/google/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/80588/img/unread/empty/google/2708-fe0f.png",sailboat:cdn_url+"/80588/img/unread/empty/google/26f5.png",ship:cdn_url+"/80588/img/unread/empty/google/1f6a2.png",bulb:cdn_url+"/80588/img/unread/empty/google/1f4a1.png",hammer:cdn_url+"/80588/img/unread/empty/google/1f528.png",checkered_flag:cdn_url+"/80588/img/unread/empty/google/1f3c1.png",wrench:cdn_url+"/80588/img/unread/empty/google/1f527.png",metro:cdn_url+"/80588/img/unread/empty/google/1f687.png",soccer:cdn_url+"/80588/img/unread/empty/google/26bd.png",trophy:cdn_url+"/80588/img/unread/empty/google/1f3c6.png",cityscape:cdn_url+"/80588/img/unread/empty/google/1f3d9-fe0f.png",dog:cdn_url+"/80588/img/unread/empty/google/1f436.png",crossed_swords:cdn_url+"/80588/img/unread/empty/google/2694-fe0f.png",blush:cdn_url+"/80588/img/unread/empty/google/1f60a.png",candy:cdn_url+"/80588/img/unread/empty/google/1f36c.png",herb:cdn_url+"/80588/img/unread/empty/google/1f33f.png",sparkles:cdn_url+"/80588/img/unread/empty/google/2728.png",check_mark:cdn_url+"/80588/img/unread/empty/google/2705.png",confetti_ball:cdn_url+"/80588/img/unread/empty/google/1f38a.png",doughnut:cdn_url+"/80588/img/unread/empty/google/1f369.png",bookmark_tabs:cdn_url+"/80588/img/unread/empty/google/1f4d1.png",sleuth:{1:cdn_url+"/80588/img/unread/empty/google/1f575-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/80588/img/unread/empty/google/23f3.png",newspaper:cdn_url+"/80588/img/unread/empty/google/1f5de-fe0f.png",flex:{1:cdn_url+"/80588/img/unread/empty/google/1f4aa.png",2:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/80588/img/unread/empty/google/1f30e.png",chocolate_bar:cdn_url+"/80588/img/unread/empty/google/1f36b.png",wave:{1:cdn_url+"/80588/img/unread/empty/google/1f44b.png",2:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3ff.png"},relieved:cdn_url+"/80588/img/unread/empty/google/1f60c.png",walking:{1:cdn_url+"/80588/img/unread/empty/google/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/80588/img/unread/empty/google/1f6cb.png",unicorn_face:cdn_url+"/80588/img/unread/empty/google/1f984.png",zap:cdn_url+"/80588/img/unread/empty/google/26a1.png",star:cdn_url+"/80588/img/unread/empty/google/2b50.png"}},ba={"de-DE":[{emoji:"airplane",skintone:!1,lineOne:"Jetzt bist du startklar.",lineTwo:""},{emoji:"art",skintone:!1,lineOne:"Alles paletti!",lineTwo:""},{emoji:"bee",skintone:!1,lineOne:"Geschafft!",lineTwo:"Ganz sch\xf6n flei\xdfig."},{emoji:"books",skintone:!1,lineOne:"Alles gelesen.",lineTwo:"Wie es im Buche steht."},{emoji:"boom",skintone:!1,lineOne:"Du bist der Knaller!",lineTwo:""},{emoji:"bulb",skintone:!1,lineOne:"Heureka!",lineTwo:"Du hast ALLES gelesen!"},{emoji:"checkered_flag",skintone:!1,lineOne:"Du bist am Ziel angelangt!",lineTwo:"Du hast alles gelesen!"},{emoji:"clap",skintone:!0,lineOne:"Das war das T\xfcpfelchen auf dem i.",lineTwo:""},{emoji:"croissant",skintone:!1,lineOne:"Voil\xe0!",lineTwo:"Das war es auch schon."},{emoji:"crystalball",skintone:!1,lineOne:"Alles klar.",lineTwo:"Die Zukunft geh\xf6rt dir!"},{emoji:"footprints",skintone:!1,lineOne:"Gut gemacht.",lineTwo:"Jetzt liegt dir die Welt zu F\xfc\xdfen!"},{emoji:"hammer",skintone:!1,lineOne:"Du bist der Hammer!",lineTwo:"Alles gelesen!"},{emoji:"high5",skintone:!0,lineOne:"Geschafft!",lineTwo:"Das war alles."},{emoji:"metro",skintone:!1,lineOne:"Hier ist das Licht am Ende des Tunnels!",lineTwo:""},{emoji:"island",skintone:!1,lineOne:"Land in Sicht!",lineTwo:"Du hast alles gelesen!"},{emoji:"person_ball",skintone:!0,lineOne:"Immer am Ball bleiben!",lineTwo:""},{emoji:"rocket",skintone:!1,lineOne:"Du hast ein ganz sch\xf6nes Lesetempo drauf!",lineTwo:""},{emoji:"sailboat",skintone:!1,lineOne:"Alles im Lot auf dem Boot.",lineTwo:""},{emoji:"sailboat",skintone:!1,lineOne:"Alles in Butter auf dem Kutter!",lineTwo:""},{emoji:"ship",skintone:!1,lineOne:"Klar Schiff!",lineTwo:""},{emoji:"soccer",skintone:!1,lineOne:"Volltreffer! ",lineTwo:"Du hast alles gelesen!"},{emoji:"sun",skintone:!1,lineOne:"Alles heiter und klar!",lineTwo:""},{emoji:"sunglasses",skintone:!1,lineOne:"Alles klar!",lineTwo:""},{emoji:"tada",skintone:!1,lineOne:"Ta-da !",lineTwo:"Du bist jetzt ganz sch\xf6n belesen."},{emoji:"tea",skintone:!1,lineOne:"Du hast alles aufgeholt.",lineTwo:"Zeit f\xfcr eine kleine Pause."},{emoji:"thumbup",skintone:!0,lineOne:"Du bist ganz sch\xf6n auf Zack!",lineTwo:""},{emoji:"victory",skintone:!0,lineOne:"Alles erledigt!",lineTwo:"Das ist das A und O."},{emoji:"wrench",skintone:!1,lineOne:"Ganz sch\xf6n fix!",lineTwo:""}],"en-GB":[{emoji:"chocolate_bar",skintone:!1,lineOne:"You\u2019ve read everything you need to.",lineTwo:"Take a little break."},{emoji:"balloon",skintone:!1,lineOne:"There, all caught up.",lineTwo:"Turn your mind to something new."},{emoji:"bee",skintone:!1,lineOne:"You\u2019re up to date.",lineTwo:"Go on and do great things."},{emoji:"zap",skintone:!1,lineOne:"Boom!",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:!0,lineOne:"Everything unread has now been read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:!1,lineOne:"Everything\u2019s sorted.",lineTwo:"Let\u2019s do something else."},{emoji:"crystalball",skintone:!1,lineOne:"All that was unread has now been read.",lineTwo:"But what\u2019s next?"},{emoji:"high5",skintone:!0,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"check_mark",skintone:!1,lineOne:"Done and dusted.",lineTwo:""},{emoji:"octopus",skintone:!1,lineOne:"All sorted.",lineTwo:"The world is your oyster."},{emoji:"unicorn_face",skintone:!1,lineOne:"You\u2019ve read it all.",lineTwo:"Here\u2019s a unicorn."},{emoji:"racecar",skintone:!1,lineOne:"Right!",lineTwo:"All caught up."},{emoji:"rocket",skintone:!1,lineOne:"That\u2019s it.",lineTwo:"The future is yours."},{emoji:"sailboat",skintone:!1,lineOne:"You\u2019ve caught up on everything.",lineTwo:"Plain sailing from now on."},{emoji:"sunglasses",skintone:!1,lineOne:"All clear.",lineTwo:""},{emoji:"coffee",skintone:!1,lineOne:"You\u2019ve got through the lot!",lineTwo:"Pop the kettle on?"},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019re all up to date."},{emoji:"couch_and_lamp",skintone:!1,lineOne:"That\u2019s you sorted.",lineTwo:"Put your feet up."},{emoji:"tractor",skintone:!1,lineOne:"You\u2019ve read everything.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:!0,lineOne:"Caught up on everything.",lineTwo:"What\u2019s next?"}],[b.b.DEFAULT_LOCALE]:[{emoji:"apple",skintone:!1,lineOne:"You\u2019ve read all you needed.",lineTwo:"Take a moment."},{emoji:"balloon",skintone:!1,lineOne:"There! Caught up.",lineTwo:"Set your mind to something new."},{emoji:"bee",skintone:!1,lineOne:"You\u2019re up to date.",lineTwo:"Go forth and do great things."},{emoji:"boom",skintone:!1,lineOne:"Boom.",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:!0,lineOne:"Everything unread is now read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:!1,lineOne:"Everything\u2019s sorted!",lineTwo:"Let\u2019s start something new."},{emoji:"crystalball",skintone:!1,lineOne:"All that was unread is now read.",lineTwo:"What\u2019s next?"},{emoji:"high5",skintone:!0,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"leafs",skintone:!1,lineOne:"Done and done.",lineTwo:""},{emoji:"octopus",skintone:!1,lineOne:"All done.",lineTwo:"The world is your oyster."},{emoji:"pony",skintone:!1,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a pony."},{emoji:"racecar",skintone:!1,lineOne:"There.",lineTwo:"All caught up."},{emoji:"rocket",skintone:!1,lineOne:"All done.",lineTwo:"The future is yours."},{emoji:"sun",skintone:!1,lineOne:"You\u2019re all caught up!",lineTwo:"Clear screens ahead."},{emoji:"sunglasses",skintone:!1,lineOne:"All clear.",lineTwo:""},{emoji:"sweetpotato",skintone:!1,lineOne:"Sweet potato!",lineTwo:"You\u2019re all done."},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019re up to date."},{emoji:"thumbup",skintone:!0,lineOne:"That\u2019s that.",lineTwo:"You\u2019re good to go."},{emoji:"tractor",skintone:!1,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:!0,lineOne:"All caught up.",lineTwo:"What\u2019s next?"}],"es-ES":[{emoji:"boom",skintone:!1,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"chick",skintone:!1,lineOne:"Est\xe1s al d\xeda.",lineTwo:"Es hora de salir a hacer algo estupendo."},{emoji:"candy",skintone:!1,lineOne:"Has le\xeddo todo.",lineTwo:"Aqu\xed tienes un caramelo de regalo."},{emoji:"cityscape",skintone:!1,lineOne:"Has terminado de leer.",lineTwo:"Tienes el mundo a tus pies."},{emoji:"checkered_flag",skintone:!1,lineOne:"Has terminado de leer.",lineTwo:"\xbfY ahora qu\xe9 sigue?"},{emoji:"flex",skintone:!0,lineOne:"Has terminado de leer.",lineTwo:"\xa1Lo lograste!"},{emoji:"high5",skintone:!0,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"hourglass",skintone:!1,lineOne:"Has terminado de leer.",lineTwo:"El futuro es tuyo."},{emoji:"leafs",skintone:!1,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"newspaper",skintone:!1,lineOne:"Ya est\xe1s al d\xeda con tu lectura.",lineTwo:"Ahora puedes tomarte un descanso."},{emoji:"rocket",skintone:!1,lineOne:"\xa1Listo! Est\xe1s al tanto de todo.",lineTwo:"Ahora puedes proponerte algo nuevo."},{emoji:"sunglasses",skintone:!1,lineOne:"El pron\xf3stico se ve despejado.",lineTwo:""},{emoji:"sleuth",skintone:!0,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"sleuth",skintone:!0,lineOne:"Listo.",lineTwo:"Ya est\xe1s al tanto de todo."},{emoji:"tada",skintone:!1,lineOne:"\xa1Enhorabuena!",lineTwo:"Has le\xeddo todo lo que hab\xeda que leer."},{emoji:"trophy",skintone:!1,lineOne:"\xa1Al fin!",lineTwo:"Ya has terminado."}],"es-LA":[{emoji:"apple",skintone:!1,lineOne:"Est\xe1s al d\xeda con la lectura.",lineTwo:"T\xf3mate un descanso."},{emoji:"balloon",skintone:!1,lineOne:"\xa1Listo! Est\xe1s al d\xeda.",lineTwo:"Centra tu mente en algo nuevo."},{emoji:"bee",skintone:!1,lineOne:"Est\xe1s al d\xeda.",lineTwo:"\xa1Ve a conquistar el mundo!"},{emoji:"boom",skintone:!1,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"clap",skintone:!0,lineOne:"Terminaste de leer todo.",lineTwo:"\xa1Lo lograste!"},{emoji:"growth",skintone:!1,lineOne:"\xa1Todo resuelto!",lineTwo:"Empecemos algo nuevo."},{emoji:"crystalball",skintone:!1,lineOne:"Le\xedste todo lo que hab\xeda que leer.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"high5",skintone:!0,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"leafs",skintone:!1,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"octopus",skintone:!1,lineOne:"Todo listo.",lineTwo:"El mundo est\xe1 a tus pies."},{emoji:"pony",skintone:!1,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un poni."},{emoji:"racecar",skintone:!1,lineOne:"!Bien hecho!",lineTwo:"Est\xe1s al tanto de todo."},{emoji:"rocket",skintone:!1,lineOne:"Todo listo.",lineTwo:"El futuro es tuyo."},{emoji:"sun",skintone:!1,lineOne:"Ya est\xe1s al tanto de todo.",lineTwo:"\xa1Pantalla despejada!"},{emoji:"sunglasses",skintone:!1,lineOne:"\xa1Todo despejado!",lineTwo:""},{emoji:"sweetpotato",skintone:!1,lineOne:"\xa1Qu\xe9 belleza!",lineTwo:"Ya terminaste."},{emoji:"tada",skintone:!1,lineOne:"\xa1Felicidades!",lineTwo:"Le\xedste todo lo que hab\xeda que leer."},{emoji:"tada",skintone:!1,lineOne:"\xa1Felicidades!",lineTwo:"Est\xe1s al d\xeda."},{emoji:"thumbup",skintone:!0,lineOne:"Eso es todo.",lineTwo:"Puedes seguir con tus otras tareas."},{emoji:"tractor",skintone:!1,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un tractor."},{emoji:"victory",skintone:!0,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"}],"fr-FR":[{emoji:"balloon",skintone:!1,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On se sent d\xe9j\xe0 plus l\xe9ger."},{emoji:"bee",skintone:!1,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On d\xe9colle mieux face au vent, courage !"},{emoji:"books",skintone:!1,lineOne:"Lu et relu !",lineTwo:""},{emoji:"boom",skintone:!1,lineOne:"Boum !",lineTwo:"Vous \xeates \xe0 jour."},{emoji:"clap",skintone:!0,lineOne:"Bravo !",lineTwo:"Vous avez tout lu."},{emoji:"coffee",skintone:!1,lineOne:"Vous avez tout lu !",lineTwo:"Une pause s\u2019impose !"},{emoji:"crystalball",skintone:!1,lineOne:"Vous avez tout lu !",lineTwo:"Que vous r\xe9serve l\u2019avenir ?"},{emoji:"high5",skintone:!0,lineOne:"C\u2019est tout !",lineTwo:""},{emoji:"island",skintone:!1,lineOne:"Termin\xe9 !",lineTwo:"Vous pouvez vous la couler douce !"},{emoji:"owl",skintone:!1,lineOne:"Chouette !",lineTwo:"Vous avez termin\xe9."},{emoji:"racecar",skintone:!1,lineOne:"Voil\xe0 !",lineTwo:"Vous \xeates sur la bonne voie."},{emoji:"rocket",skintone:!1,lineOne:"Termin\xe9 !",lineTwo:"L\u2019avenir vous appartient."},{emoji:"sun",skintone:!1,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"L\u2019horizon est d\xe9gag\xe9."},{emoji:"sunglasses",skintone:!1,lineOne:"Tout est \xe0 jour.",lineTwo:""},{emoji:"tada",skintone:!1,lineOne:"Tadam !",lineTwo:"Vous avez tout lu."},{emoji:"thumbup",skintone:!0,lineOne:"\xc7a y est !",lineTwo:"Vous avez fini."},{emoji:"victory",skintone:!0,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"Quelle est la suite du programme ?"}],"ja-JP":[{emoji:"blush",skintone:!1,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u4ee5\u4e0a\u3067\u3059\u3002",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"bookmark_tabs",skintone:!1,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01\u6e96\u5099\u4e07\u7aef\uff01",lineTwo:"\u3055\u3042\u3001\u4f55\u304b\u3089\u3084\u308a\u307e\u3059\u304b\uff1f"},{emoji:"candy",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u306f\u3044\u3001\u30a2\u30e1\u3061\u3083\u3093\uff01"},{emoji:"check_mark",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3084\u308b\u3053\u3068\u30ea\u30b9\u30c8\u304b\u30891\u3064\u6d88\u3048\u307e\u3057\u305f\uff01"},{emoji:"cityscape",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u9060\u304f\u3092\u898b\u308b\u3068\u75b2\u308c\u76ee\u306b\u3044\u3044\u3089\u3057\u3044\u3067\u3059\u3088\uff1f"},{emoji:"coffee",skintone:!1,lineOne:"\u3059\u3079\u3066\u306e\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002",lineTwo:"\u3061\u3087\u3063\u3068\u4e00\u606f\u5165\u308c\u307e\u305b\u3093\u304b\uff1f"},{emoji:"confetti_ball",skintone:!1,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u8aad\u4e86\u3092\u9054\u6210\u3057\u307e\u3057\u305f\uff01",lineTwo:""},{emoji:"crossed_swords",skintone:!1,lineOne:"\u307f\u3069\u304f\u3000\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u3000\u3084\u3063\u3064\u3051\u305f\u3002",lineTwo:"\u304b\u3057\u3053\u3055\u304c\u3000\uff11\u30dd\u30a4\u30f3\u30c8\u3000\u3042\u304c\u3063\u305f\uff01"},{emoji:"dog",skintone:!1,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u30ef\u30f3\u3060\u3075\u308b\uff01"},{emoji:"doughnut",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3061\u3087\u3063\u3068\u4f11\u61a9\u3057\u3066\u3001\u75b2\u308c\u305f\u8133\u306b\u7cd6\u5206\u88dc\u7d66"},{emoji:"herb",skintone:!1,lineOne:"\u672a\u8aad\u30b9\u30c3\u30ad\u30ea\uff01\u6c17\u5206\u3082\u30b9\u30c3\u30ad\u30ea\uff01",lineTwo:""},{emoji:"leafs",skintone:!1,lineOne:"\u5168\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u65e2\u8aad\u306b\u306a\u308a\u307e\u3057\u305f\u3002",lineTwo:"\u305d\u308c\u306f\u305d\u308c\u3067\u3001\u3061\u3087\u3063\u3068\u5bc2\u3057\u3044\u2026\uff1f"},{emoji:"rocket",skintone:!1,lineOne:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01",lineTwo:"\u3053\u306e\u8abf\u5b50\u3067\u3069\u3093\u3069\u3093\u884c\u3063\u3061\u3083\u3044\u307e\u3057\u3087\u3046\uff01"},{emoji:"sparkles",skintone:!1,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3001\u305c\u3093\u3076\u30ad\u30ec\u30a4\u306b\u7247\u4ed8\u304d\u307e\u3057\u305f\u3002",lineTwo:""},{emoji:"tada",skintone:!1,lineOne:"\u3059\u3054\u3044\uff01",lineTwo:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01"},{emoji:"tea",skintone:!1,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"trophy",skintone:!1,lineOne:"\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01",lineTwo:"\u5168\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\u3067\u3059\uff01"},{emoji:"victory",skintone:!0,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:""},{emoji:"sleuth",skintone:!0,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092",lineTwo:"\u6f0f\u308c\u306a\u304f\u3059\u3079\u3066\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002"}],"pt-BR":[{emoji:"apple",skintone:!1,lineOne:"Voc\xea j\xe1 leu tudo.",lineTwo:"Agora fa\xe7a uma pausa."},{emoji:"balloon",skintone:!1,lineOne:"Pronto!",lineTwo:"Agora voc\xea j\xe1 pode partir para outra."},{emoji:"bee",skintone:!1,lineOne:"Tudo em dia.",lineTwo:"Voc\xea est\xe1 pronto para outra."},{emoji:"flex",skintone:!0,lineOne:"Feito!",lineTwo:"Voc\xea leu todas as suas mensagens."},{emoji:"clap",skintone:!0,lineOne:"Todas as n\xe3o lidas foram lidas.",lineTwo:"Parab\xe9ns!"},{emoji:"relieved",skintone:!1,lineOne:"Miss\xe3o cumprida!",lineTwo:"Pronto para algo novo."},{emoji:"crystalball",skintone:!1,lineOne:"Agora voc\xea est\xe1 por dentro de tudo.",lineTwo:"Pronto para o futuro?"},{emoji:"high5",skintone:!0,lineOne:"Isso \xe9 tudo!",lineTwo:""},{emoji:"high5",skintone:!0,lineOne:"Deu.",lineTwo:""},{emoji:"earth_americas",skintone:!1,lineOne:"Tudo pronto.",lineTwo:"Agora o mundo est\xe1 nas suas m\xe3os."},{emoji:"walking",skintone:!0,lineOne:"\xc9 isso.",lineTwo:"J\xe1 pode sair por a\xed."},{emoji:"check_mark",skintone:!1,lineOne:"Tudo em dia.",lineTwo:"O que vai fazer agora?"},{emoji:"rocket",skintone:!1,lineOne:"Dever cumprido.",lineTwo:"O futuro \xe9 seu."},{emoji:"sunglasses",skintone:!1,lineOne:"Tudo lido.",lineTwo:"Agora j\xe1 pode relaxar."},{emoji:"sunglasses",skintone:!1,lineOne:"Tudo pronto!",lineTwo:""},{emoji:"star",skintone:!1,lineOne:"Bom trabalho!",lineTwo:"Leitura conclu\xedda."},{emoji:"tada",skintone:!1,lineOne:"Surpresa!",lineTwo:"Voc\xea terminou."},{emoji:"tada",skintone:!1,lineOne:"Surpresa!",lineTwo:"Agora voc\xea est\xe1 atualizado."},{emoji:"thumbup",skintone:!0,lineOne:"Acabou!",lineTwo:"Miss\xe3o dada \xe9 miss\xe3o cumprida."},{emoji:"wave",skintone:!0,lineOne:"Era isso.",lineTwo:"Por hoje \xe9 s\xf3!"},{emoji:"victory",skintone:!0,lineOne:"Atualizado!",lineTwo:"E agora?"}]};var _a=a("2Zgd"),ga=a("+8mH");var fa=function(e){var t,a,n;return Object(i.m)(e,"feature_incremental_unread_counts")?(t=Object(c.c)(e),a=Object(Dt.a)(t),n=Object(c.h)(e)):(a=(a=Object(_a.g)()).filter(t=>!Object(ga.c)(e,t)),n=Object(_a.h)(),t={},a.forEach(a=>{var n=Object(w.e)(e,a);t[n.id]={unreadCnt:Object(_e.U)(n),unreadHighlightCnt:Object(_e.V)(n)}})),{countsPerChannel:t,unreadChannelIds:a,unreadChannelsAreKnown:n}},va=new b.b("all_unreads");var Oa=Object(m.b)(function(e){var{countsPerChannel:t}=fa(e),a=Object(Rt.a)(Object(xt.a)(t,"unreadCnt"));return{teamId:Object(oa.b)(e),preferredSkinTone:Object(ia.k)(e,"preferred_skin_tone")||"1",emojiMode:Object(ca.h)(e,{forceDisplay:!0}),totalUnreads:a,userAttentionIsOnChat:Object(la.e)(e)}})(class empty_state_EmptyState extends r.Component{constructor(e){super(e),this.onUndo=this.onUndo.bind(this),this.onRefresh=this.onRefresh.bind(this),this.onEnter=this.onEnter.bind(this),this.generateMessage(),this.state={allowRefreshButton:e.visible},this.containerRef=s.a.createRef()}componentDidMount(){this.keyCommands=new ha.a,this.keyCommands.bindAll([{keys:"enter",handler:this.onEnter}])}componentDidUpdate(e){e.visible&&!this.props.visible?this.generateMessage():!e.visible&&this.props.visible&&(this.buttonDelayTimer=setTimeout(()=>{this.setState(()=>({allowRefreshButton:!0}))},1e3))}componentWillUnmount(){clearTimeout(this.buttonDelayTimer),this.keyCommands&&this.keyCommands.reset()}onEnter(e){var{visible:t}=this.props,a=Object(_.a)()?this.props.userAttentionIsOnChat:Object(da.f)();if(t&&a&&this.shouldShowNewButton()){var n=e.target;if(!Object(pa.a)(n)){var r="BODY"===n.nodeName,s=this.containerRef.current&&this.containerRef.current.contains(n);(r||s)&&this.onRefresh()}}}onRefresh(){this.props.refreshAllUnreads(),this.setState(()=>({allowRefreshButton:!1}))}onUndo(){this.props.undoMarkAllRead(),this.setState(()=>({allowRefreshButton:!1}))}generateMessage(){var{teamId:e,preferredSkinTone:t,emojiMode:a}=this.props;this.message=function(e){var{locale:t=b.b.DEFAULT_LOCALE,preferredSkintone:a=1,emojiMode:n="default"}=e,r="apple"===n?"default":n,s=ba[t]||ba[b.b.DEFAULT_LOCALE],i=s[Math.floor(Math.random()*s.length)],o=i.skintone?ma[r][i.emoji][a]:ma[r][i.emoji];return i.emojiUrl=o,i}({locale:Object(sa.a)({teamId:e}),preferredSkinTone:t,emojiMode:a}),(new Image).src=this.message.emojiUrl}shouldShowNewButton(){var{allowRefreshButton:e}=this.state,{totalUnreads:t}=this.props;return e&&t>0}render(){var{visible:e,showUndo:t,totalUnreads:a}=this.props;if(!e)return null;var n=this.shouldShowNewButton(),r=h()("p-unreads_view__empty",{"p-unreads_view__empty--show_new":n}),i=e=>{var{tag:t,text:a}=e;return"enter-icon"===t?s.a.createElement(nt.b,{type:"enter",size:"inherit"}):s.a.createElement("b",null,a)};return s.a.createElement("div",{className:r,ref:this.containerRef},s.a.createElement("div",{className:"p-unreads_view__empty__message",role:"alert"},s.a.createElement("img",{className:"p-unreads_view__empty__image",src:this.message.emojiUrl,alt:""}),s.a.createElement("div",null,this.message.lineOne,s.a.createElement("br",null),this.message.lineTwo)),n&&s.a.createElement(s.a.Fragment,null,s.a.createElement(T.d,{onClick:this.onRefresh},va.t("{totalUnreads, plural, =1 {# New Message} other {# New Messages} }",{totalUnreads:a})),s.a.createElement("div",{className:"p-unreads_view__empty__button_caption"},Object(C.q)()?va.rt("<b>Return</b> <enter-icon></enter-icon> to show",null,i):va.rt("<b>Enter</b> <enter-icon></enter-icon> to show",null,i))),t&&s.a.createElement("div",{className:"p-unreads_view__empty__undo"},s.a.createElement("div",{className:"p-unreads_view__empty__undo_inner"},va.t("You marked all your channels read."),s.a.createElement(ua.a,{onClick:this.onUndo,className:"p-unreads_view__empty__undo_button"},va.t("Undo")))))}}),ya=a("lCmp"),Ca=a("X6iR"),ja=a("NFsq"),Ea=a("Z0Cl"),ka=a("CpTu"),Sa=a("qAkX"),Ia=a("uPpK"),wa=a("Uk1S"),Ta=a("miRO"),Na=a("TDTp"),Pa=a("JHHQ"),Aa=a("ZAxE"),Ma=a("OtLZ"),xa=a("om+M"),Ra=a("s0HP"),Da=a("4zXV"),Fa=Object(xa.a)("Expand a channel in All Unreads",(e,t,a)=>{var n=Object(ia.j)(t());if(n.includes(a)){var r=Object(Ma.a)(n,a);e(Object(Ra.b)({pref:"unread_collapsed_channels",value:r.join(",")})),e(Object(Da.b)({method:"unread.expand",args:{channel:a},reason:"all_unreads_expand"}))}});Fa.meta={name:"expandChannel",key:"fetchersUnreadsApiExpandChannel",description:"Expand a channel in All Unreads"},Fa.propTypes=Lt.default.string.isRequired;var La=Object(xa.a)("Collapse a channel in All Unreads",(e,t,a)=>{var n=Object(ia.j)(t());if(!n.includes(a)){var r=[...n,a];e(Object(Ra.b)({pref:"unread_collapsed_channels",value:r.join(",")})),e(Object(Da.b)({method:"unread.collapse",args:{channel:a},reason:"all_unreads_collapse"}))}});La.meta={name:"collapseChannel",key:"fetchersUnreadsApiCollapseChannel",description:"Collapse a channel in All Unreads"},La.propTypes=Lt.default.string.isRequired;var Ua=a("2HDu"),Ba=a("LxWA"),Ha=a("khjP"),Wa=a("P1uz"),qa=a("j6qi"),Ga=a("YLnb"),Ka=a("0d94"),Va=a("SIr3"),za=a("J7VK"),Ya=a("4EIq"),Qa=a("exfU"),Xa=a("2jER"),Ja=a("quKg"),Za=a("Srcy"),$a=a("peKf"),en=a("SNtu"),tn=a("OZf9"),an=a("hOQf"),nn=a("9RFl"),rn=a("rEgV"),sn=a("y8dB");var on=a("XfeM"),cn=new b.b("all_unreads"),ln=Object(on.b)("Build an aria-label for an All Unreads header row",function(e,t){var a,{channelId:n,messageCount:r,messageCountAfterLatest:s,markedMsgCount:i,messageCountIsExact:o,collapsed:c}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=t(),d=Object(_e.w)(l,Object(w.e)(l,n)),p=r>0,u=s>0;return a=p||!(i>0)||u?!p&&u||c?o?cn.t("{messageCount} new {messageCount, plural, =1 {message} other {messages}}",{messageCount:s+r}):cn.t("New messages"):o?cn.t("{messageCount, plural, =1 {# message} other {# messages}}",{messageCount:r}):cn.t("{messageCount, plural, =1 {#+ message} other {#+ messages}}",{messageCount:r}):cn.t("{messageCount, plural, =1 {# message} other {# messages}} marked read",{messageCount:i}),"".concat(d," (").concat(a,")")});ln.meta={name:"makeHeaderLabel",key:"componentsUnreadsViewUtilityMakeHeaderLabelMakeHeaderLabel",description:"Build an aria-label for an All Unreads header row"},ln.propTypes={channelId:Lt.default.string.isRequired,messageCount:Lt.default.number,messageCountAfterLatest:Lt.default.number,markedMsgCount:Lt.default.number,messageCountIsExact:Lt.default.bool,collapsed:Lt.default.bool};var dn=ln,pn=a("Bw5p"),un=a("vPEJ"),hn=a("18Pa"),mn=new b.b("all_unreads");class header_default_HeaderDefault extends r.PureComponent{getMessageCountText(){var{messageCountIsExact:e,messageCount:t}=this.props;return t?e?mn.t("{messageCount, plural, =1 {# message} other {# messages}}",{messageCount:t}):mn.t("{messageCount, plural, =1 {#+ message} other {#+ messages}}",{messageCount:t}):""}renderButton(e){return s.a.createElement(T.d,{onClick:this.props.markRead,type:"outline",size:"small",className:"p-unreads_view__header__mark_read_button","data-qa":"all_unreads_header_mark_read",key:"MARK-READ"},e)}renderContent(){var{selected:e}=this.props;if(e)return mn.rt('<span className="p-unreads_view__header__kb_instructions">Press <key>Esc</key> to </span><button>Mark as Read</button>',null,e=>{var{text:t,tag:a}=e;return"button"===a?this.renderButton(t):"key"===a?s.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},t):null});var t=mn.t("Mark as Read");return this.renderButton(t)}render(){var e=h()("p-unreads_view__header__kb_instructions_container");return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"p-unreads_view__header__message_count"},this.getMessageCountText()),s.a.createElement("span",{className:e},this.renderContent()))}}header_default_HeaderDefault.defaultProps={messageCount:0,messageCountIsExact:!0};var bn=header_default_HeaderDefault,_n=new b.b("all_unreads");class header_Header extends r.Component{constructor(e){super(e),Object(Ft.a)(this,["markRead","undoMarkRead","showNew","openChannel","toggleCollapse"])}markRead(){var e={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_READ",metadata:e}),this.props.markChannelLastRead(this.props.channelId,this.props.latest,this.props.messageCount)}undoMarkRead(){var e={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_UNREAD",metadata:e}),this.props.markChannelLastRead(this.props.channelId,this.props.initialLastRead)}showNew(){this.props.showNewerMessages(this.props.channelId,!0)}openChannel(){this.props.setPrimaryView({id:this.props.channelId})}toggleCollapse(){this.props.toggleCollapse(this.props.channelId)}renderUndo(){var e,{markedMsgCount:t}=this.props;return t&&(e=_n.t("{messageCount, plural, =1 {# message} other {# messages}} marked read",{messageCount:t})),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"p-unreads_view__header__message_count"},e),s.a.createElement(ua.a,{className:"p-unreads_view__header__undo_button",onClick:this.undoMarkRead,"data-qa":"all_unreads_header_undo"},_n.t("Undo")))}renderNewMsgs(e){var t,{messageCountAfterLatest:a,messageCountIsExact:n,messageCount:r}=this.props;return t=n?_n.t("{messageCount} new {messageCount, plural, =1 {message} other {messages}}",{messageCount:a+r}):_n.t("New messages"),s.a.createElement(ua.a,{onClick:e,className:"p-unreads_view__header__new_msgs_button","data-qa":"all_unreads_header_new_msgs"},t," ",s.a.createElement(nt.b,{inline:!0,size:"inherit",type:"circle-fill"}))}renderDefault(){var e=Object(pn.a)(this.props,["messageCount","messageCountIsExact","selected"]);return s.a.createElement(bn,Object(P.a)({},e,{markRead:this.markRead}))}render(){var{channelId:e,markedMsgCount:t,messageCount:a,messageCountAfterLatest:n,collapsed:r}=this.props,i=a>0,o=n>0,c=0,l=1,d=2,p=3,u=c;i||!(t>0)||o?!i&&o?u=p:r&&(u=l):u=d;var m=h()("p-unreads_view__header",{"p-unreads_view__header--was_marked":u===d||u===p,"p-unreads_view__header--collapsed":u===l}),b=r?"caret-right":"caret-down",_=u===c||u===l,g=u===c;return s.a.createElement("div",{className:m},s.a.createElement(ua.a,{onClick:this.openChannel,className:"p-unreads_view__header__channel_name_link","data-qa":"all_unreads_header_channel_name"},s.a.createElement(un.a,{channelId:e,className:"p-unreads_view__header__channel_name"})),_&&s.a.createElement(hn.a,{icon:b,className:"p-unreads_view__header__collapse","data-qa":"all_unreads_header_toggle",onClick:this.toggleCollapse,"aria-expanded":g}),u===d&&this.renderUndo(),u===p&&this.renderNewMsgs(this.showNew),u===l&&this.renderNewMsgs(this.toggleCollapse),u===c&&this.renderDefault())}}header_Header.defaultProps={messageCount:0,messageCountIsExact:!0,messageCountAfterLatest:0,markedMsgCount:0,totalUnreadCount:0};var gn={setPrimaryView:function(){return Object(jt.a)(...arguments)}},fn=Object(m.b)(null,gn)(header_Header),vn=(a("yPgC"),a("CaXY")),On=a("anIG"),yn=a("UvJ4"),Cn=a("fFZG"),jn=a("CZPb"),En=a("WP4K"),kn=a("IqgZ"),Sn=a("Q/6m"),In=a("Q3oM"),wn=a("WOap"),Tn=a("yuuz"),Nn=a("gK0X"),Pn=a("CsEc"),An=a("LwCT"),Mn=a("/FWe"),xn=new b.b("message_kit"),Rn={className:void 0,theme:"light",adjacent:!1,focused:!1,renderActionsOffscreen:!1,actionsPosition:void 0,onBackgroundClick:U.a,rollup:null,parentId:void 0};class message_Message extends r.PureComponent{constructor(e){super(e),this.handleBackgroundClick=this.handleBackgroundClick.bind(this)}getMessageBody(e){var{adjacent:t,rollup:a}=this.props;return s.a.createElement(s.a.Fragment,null,!t&&s.a.createElement(Tn.a,{msg:e},s.a.createElement(Se.a,{msg:e}),"\xa0\xa0",s.a.createElement(Pe.a,{msg:e,clickable:!0},xn.t("Open in channel")),s.a.createElement("br",null)),s.a.createElement(Ie.a,{msg:e,rollup:a}),s.a.createElement(we.a,{msg:e,blocksContainerContext:vn.a.all_unreads}),s.a.createElement(Ne.b,{msg:e}),s.a.createElement(On.a,{msg:e}),s.a.createElement(Cn.a,{msg:e}),s.a.createElement(En.a,{msg:e}),s.a.createElement(jn.a,{msg:e}))}getCompactMessageBody(e){var{adjacent:t,rollup:a}=this.props;return s.a.createElement(Mn.a,null,!t&&s.a.createElement(Tn.a,{msg:e},s.a.createElement(Se.a,{msg:e,className:"p-unreads_view_sender--compact"}),"\xa0"),s.a.createElement(Ie.a,{msg:e,rollup:a}),s.a.createElement(yn.a,{msg:e,blocksContainerContext:vn.a.all_unreads}),s.a.createElement(Ne.b,{msg:e}),s.a.createElement(On.a,{msg:e}),s.a.createElement(Cn.a,{msg:e}),s.a.createElement(En.a,{msg:e}),s.a.createElement(jn.a,{msg:e}))}getCompactGutter(){var{msg:e,theme:t,adjacent:a}=this.props,n="light"===t,r=h()("p-unreads_view_compact_timestamp",{"p-unreads_view_compact_timestamp--light":n,"p-unreads_view_compact_timestamp--adjacent":a});return s.a.createElement("div",{className:r},s.a.createElement(Pe.a,{msg:e,meridiem:!(a&&n),clickable:!0},xn.t("Open in channel")))}handleBackgroundClick(e){e.altKey&&(e.preventDefault(),this.props.onBackgroundClick(this.props.msg))}render(){var{msg:e,theme:t,adjacent:a,focused:n,renderActionsOffscreen:r,actionsPosition:i,parentId:o,className:c}=this.props,l="dense"===t,d=l?this.getCompactGutter():null,p=a?this.getCompactGutter():s.a.createElement(ke.a,{msg:e}),u=l?this.getCompactMessageBody(e):this.getMessageBody(e);return s.a.createElement(kn.a,{msg:e},s.a.createElement(Sn.a,{msg:e,className:h()(c,"p-unreads-view__message","c-message_kit__message"),onClick:this.handleBackgroundClick},s.a.createElement(In.a,{"data-qa":"unreads_view_message_hover",hovered:n},s.a.createElement(wn.a,{msg:e,showComment:!0,showShare:!0,messageContainerType:ra.I.UNREAD_VIEW,position:i||(l||a?"above":"default"),renderOffscreen:r,parentId:o},s.a.createElement(Pn.a,{msg:e,className:"p-unreads-view__message_label"},s.a.createElement(Ee.a,{light:p,compact:d},s.a.createElement(Nn.a,{msg:e,replyBar:s.a.createElement(En.a,{msg:e})},s.a.createElement(An.a,{msg:e},u))))))))}}message_Message.defaultProps=Rn;var Dn=new b.b("all_unreads");class show_newer_button_ShowNewerButton extends r.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){var{channelId:e,showNewerMessages:t}=this.props;t(e)}render(){var{count:e}=this.props,t=Dn.t("{count, plural, =1 {# new message} other {# new messages}}",{count:e});return s.a.createElement(ua.a,{className:"p-unreads_view__show_newer",onClick:this.onClick},t)}}var Fn=new b.b("all_unreads");var Ln=function(e){var{markAllRead:t}=e;return s.a.createElement("div",{className:"p-unreads_view__footer"},s.a.createElement(T.d,{onClick:t,type:"outline"},Fn.t("Mark All Messages Read")))},Un=new b.b("all_unreads");var Bn=function(){return s.a.createElement("div",{className:"p-unreads_view__loading_more"},Un.t("Loading more messages..."))};function Hn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Wn=new b.b("all_unreads"),qn="UNREADS-VIEW",Gn=Object(Ka.a)(message_Message),Kn={showNewerMessages:Lt.default.func.isRequired,markChannelLastRead:Lt.default.func.isRequired,markAllRead:Lt.default.func.isRequired,removeFrames:Lt.default.func.isRequired,totalUnreadCount:Lt.default.number.isRequired,frames:Lt.default.arrayOf(Lt.default.shape({channelId:Lt.default.string.isRequired,start:Lt.default.string.isRequired,end:Lt.default.string.isRequired,initialLastRead:Lt.default.string.isRequired,markedMsgCount:Lt.default.number.isRequired,channelType:Lt.default.string.isRequired,collapsed:Lt.default.bool.isRequired,lastRead:Lt.default.string.isRequired,latest:Lt.default.string.isRequired,timestamps:Lt.default.arrayOf(Lt.default.string).isRequired,reachedEnd:Lt.default.bool.isRequired,messages:Lt.default.object,isMember:Lt.default.bool})).isRequired,logger:Lt.default.object.isRequired,clogLinkClick:Lt.default.func.isRequired,theme:Lt.default.oneOf(["dense","light"]).isRequired,featureAriaApplicationMode:Lt.default.bool.isRequired,allUnreadsSortOrder:Lt.default.string.isRequired,focusRequestedThreadKey:Lt.default.string,userAttentionIsOnChat:Lt.default.bool.isRequired,featureOfflineMode:Lt.default.bool.isRequired,isOffline:Lt.default.bool.isRequired,teamId:Lt.default.string.isRequired,impressionLoggingWebGroup:Lt.default.string,fetchHistory:Lt.default.func.isRequired,addMessagesFromHistory:Lt.default.func.isRequired,setUnreadPoint:Lt.default.func.isRequired,expandChannel:Lt.default.func.isRequired,collapseChannel:Lt.default.func.isRequired,makeMessageSummary:Lt.default.func.isRequired,makeHeaderLabel:Lt.default.func.isRequired,showThreadIfThreadable:Lt.default.func.isRequired,setFocusRequestedThreadKey:Lt.default.func.isRequired,removeFromSectionNavigation:Lt.default.func,addToSectionNavigation:Lt.default.func,setInitialActiveSection:Lt.default.func},Vn={focusRequestedThreadKey:void 0,removeFromSectionNavigation:U.a,addToSectionNavigation:U.a,setInitialActiveSection:U.a,teamId:void 0,impressionLoggingWebGroup:"control"};class unreads_list_UnreadsList extends aa.a{constructor(e){super(e),Object(Ft.a)(this,["renderRow","fetchPost","showNewerMessages","markAllRead","markChannelLastRead","toggleCollapse","handleMessageBackgroundClick","isFocusableItem","onListScroll","onMarkReadKeyCommand","onMarkReadKeyCommandWithR","onLeftKeyCommand","onRightKeyCommand","onPreviousChannelKeyCommand","onNextChannelKeyCommand","onItemTabWithin","shouldIgnoreKeyEvent","shouldIgnoreFocusedKeyEvent","clogClick","isItemAriaExpanded","onFocusEnter","onFocusLeave","getAriaLabelForRow","getPropsForItem","focus"]),this.layout=new Ga.a({ANCHOR_OFFSET:72}),this.list=s.a.createRef(),this.rows=[],this.loading=!1,this.state={keyToFocus:null,hasKeyboardFocus:!1},this.onListScrolledDebounce=Object(Ba.a)(this.onListScroll,150),this.attachMessageImpressionLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger)}componentWillUnmount(){this.messageImpressionLogger.flushAllVisibleMessages()}componentDidUpdate(e){var t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object($a.a)(t)&&this.props.addToSectionNavigation(),Object(en.a)(t)&&this.props.removeFromSectionNavigation(),this.layout.anchor&&0===this.layout.anchorOffset&&this.layout.setAnchor(!1);var a=Object(xt.a)(this.props.frames.filter(e=>!e.isMember),"channelId"),n=Object(xt.a)(this.props.frames.filter(e=>e.reachedEnd&&(Object(Mt.a)(e.timestamps)||Object(Sa.a)(e.timestamps)<=e.initialLastRead)),"channelId"),r=[...a,...n];r.length&&(this.props.logger.info("removing frames (non-member, empty):",a,n),this.props.removeFrames(r)),e.teamId!==this.props.teamId&&this.attachMessageImpressionLogger(this.props.teamId,this.props.impressionLoggingWebGroup,this.props.clogger),this.maybeClearKeyToFocus()}attachMessageImpressionLogger(e,t,a){if(this.messageImpressionLogger)try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(n){this.props.logger.error("unreads_list_unable_log_message_impressions","Unreads List View unable to log message impressions",n)}this.messageImpressionLogger=new Ha.a({teamId:e,experimentGroup:t,clogger:a,messageViewLocation:Wa.a.ALL_UNREAD})}maybeClearKeyToFocus(){var e=this.list.current;if(e){var t=e.getActiveItem();t&&this.state.keyToFocus===t&&this.setState(()=>({keyToFocus:null}))}}determineKeyToFocus(e,t){var{keyToFocus:a}=this.state,{focusRequestedThreadKey:n}=this.props;if(n){var{channelId:r,threadTs:s}=Object(Ua.a)(n);return"message-".concat(r,"-").concat(s)}if(a)return a;var i=this.list.current&&this.list.current.getInitialActiveItem();if(Object(Ca.a)(i,"show-newer-")&&!Object(ja.a)(t,i)){var o=e.indexOf(i);if(-1===o)return null;var c=e[o-1],l=t.indexOf(c),d=t[l+1];if(d)return d}return null}showNewerMessages(e,t){var a=Object(ka.a)(this.props.frames,{channelId:e}),n=t&&a.lastRead;t&&this.maybeAnchorToHeader(e),this.props.showNewerMessages(e,a.latest,n)}markAllRead(){var e={};this.rows.filter(e=>"header"===e.type).forEach(t=>{t.messageCountIsExact&&!t.messageCount||(e[t.channelId]=t.end)}),this.props.markAllRead(e)}getRowAndFrame(e){var{logger:t,frames:a}=this.props,n=this.keys.indexOf(e),r=this.rows[n];if(!r||!r.channelId)return t.warn("No valid row"),null;var s=r.channelId,i=Object(ka.a)(a,{channelId:s});return i?{row:r,frame:i}:(t.warn("No frame for ".concat(s)),null)}getActiveRow(){var e=this.list.current&&this.list.current.getInitialActiveItem();return e?this.getRowAndFrame(e):null}getActiveRowForKeyboardMarking(){var e=this.getActiveRow();if(e)return e;var t=this.defaultActiveItemForKeyboardMarking||this.keys[0];return t?this.getRowAndFrame(t):null}onMarkReadKeyCommand(){var{logger:e,frames:t}=this.props;e.info("onMarkReadKeyCommand");var{row:a,frame:n}=this.getActiveRowForKeyboardMarking()||{};if(a&&n){var r=Object(Ea.a)(this.rows,{channelId:n.channelId,type:"message"}).length;if(!r)return a.markedMsgCount?void this.markChannelLastRead(n.channelId,n.initialLastRead):void e.warn("No messages to mark or to undo");if(this.markChannelLastRead(n.channelId,n.end,r),1!==t.filter(e=>e.start<e.end).length){var s=t[1+t.indexOf(n)],i="header-".concat(s?s.channelId:n.channelId);this.setState(()=>({keyToFocus:i})),this.defaultActiveItemForKeyboardMarking=i}}}onMarkReadKeyCommandWithR(){var{logger:e}=this.props;e.info("onMarkReadKeyCommandWithR");var{row:t,frame:a}=this.getActiveRowForKeyboardMarking()||{};t&&a&&("header"===t.type?this.onMarkReadKeyCommand():e.info("Header not selected: ".concat(t.type)))}onLeftKeyCommand(){var{logger:e}=this.props;e.info("onLeftKeyCommand");var{row:t,frame:a}=this.getActiveRow();t&&a&&("header"!==t.type||a.collapsed||(this.toggleCollapse(a.channelId),this.setState(()=>({keyToFocus:"header-".concat(a.channelId)}))))}onRightKeyCommand(){var{logger:e}=this.props;e.info("onRightKeyCommand");var{row:t,frame:a}=this.getActiveRow();if(t&&a){if("header"===t.type&&a.collapsed)return this.toggleCollapse(a.channelId),void this.setState(()=>({keyToFocus:"header-".concat(a.channelId)}));if("message"===t.type){var{ts:n,channelId:r}=t;this.props.showThreadIfThreadable({channelId:r,threadTs:n,requestFocus:!0}),this.blur()}}}onPreviousChannelKeyCommand(){var{logger:e,frames:t}=this.props;e.info("onPreviousChannelKeyCommand");var{row:a,frame:n}=this.getActiveRow()||{};if(a&&n){var r=n;"header"!==a.type||(r=t[t.indexOf(n)-1])?this.setState(()=>({keyToFocus:"header-".concat(r.channelId)})):e.info("No previous frame")}}onNextChannelKeyCommand(){var{logger:e,frames:t}=this.props;e.info("onNextChannelKeyCommand");var{row:a,frame:n}=this.getActiveRow()||{};if(a&&n){var r=t[t.indexOf(n)+1];r?this.setState(()=>({keyToFocus:"header-".concat(r.channelId)})):e.info("No next frame")}}onItemTabWithin(){this.props.setInitialActiveSection()}shouldIgnoreKeyEvent(e){return!!Object(pa.a)(e.target)||(!this.checkUserAttentionIsOnChat()||e.target!==document.body&&((!e.target||"Punreads"!==e.target.getAttribute("data-sidebar-link-id"))&&!this.state.hasKeyboardFocus))}shouldIgnoreFocusedKeyEvent(e){return!!Object(pa.a)(e.target)||(!this.checkUserAttentionIsOnChat()||!this.state.hasKeyboardFocus)}checkUserAttentionIsOnChat(){return Object(_.a)()?this.props.userAttentionIsOnChat:Object(da.f)()}maybeAnchorToHeader(e){if(this.list.current){var t="header-".concat(e);this.list.current.getTop(t)-this.list.current.getScrollTop()>0||this.layout.setAnchor(t,0)}}markChannelLastRead(e,t,a){this.maybeAnchorToHeader(e),this.props.markChannelLastRead(e,t,a)}clogClick(e,t){this.props.clogLinkClick({event:e,metadata:t})}toggleCollapse(e){var t=Object(ka.a)(this.props.frames,{channelId:e});if(t){var a={channel_id:e,channel_type:t.channelType};this.maybeAnchorToHeader(e),t.collapsed?(this.props.expandChannel(e),this.props.showNewerMessages(e,t.latest),this.clogClick("UNREADS_EXPAND_GROUP",a)):(this.props.collapseChannel(e),this.clogClick("UNREADS_COLLAPSE_GROUP",a))}}handleMessageBackgroundClick(e){var{channel:t,ts:a}=e;this.props.setUnreadPoint({channelId:t,unreadTs:a})}isFocusableItem(e){var{index:t}=e,a=this.rows[t];return["header","message","show-newer","footer"].includes(a.type)}isItemAriaExpanded(e,t){var a=this.rows[t];if(a&&"header"===a.type)return!a.collapsed}getPropsForItem(e){var{key:t,index:a}=e,n=this.rows[a];return n&&n.type?{"aria-label":this.getAriaLabelForRow(a),"aria-expanded":this.isItemAriaExpanded(t,a)}:void 0}scrollToTop(){this.list.current&&this.list.current.scrollToOffset(0)}focus(){var e=this.list.current;e&&e.focus()}blur(){var e=this.list.current;e&&e.blur()}onFocusEnter(){this.setState(()=>({hasKeyboardFocus:!0}),()=>{var{focusRequestedThreadKey:e}=this.props,t=this.list.current;if(t&&e){var a=t.getActiveItem();"message-".concat(e)===a&&this.props.setFocusRequestedThreadKey(null)}})}onFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}onListScroll(){if(this.list&&this.list.current){var{start:e,end:t}=this.list.current.getVisibleRange(void 0,!0),a=this.rows.slice(e,t).filter(e=>"message"===e.type).map(e=>({ts:e.ts,channel:e.channelId}));try{this.messageImpressionLogger.setCurrentlyVisibleMessages(a)}catch(n){this.props.logger.error("unreads_list_unable_log_message_impressions","Unreads List View unable to log message impressions",n)}}}getAriaLabelForRow(e){if(!this.props.makeMessageSummary)return null;var t=this.rows[e];if(!t||!t.type)return null;switch(t.type){case"message":var a=t.ts;return this.props.makeMessageSummary({channelId:t.channelId,ts:a,hasFocus:this.state.hasKeyboardFocus,day:{ts:a,isFirstDay:!1,isLastDay:!1},viewContext:ra.I.UNREAD_VIEW});case"header":return this.props.makeHeaderLabel({channelId:t.channelId,messageCount:t.messageCount,messageCountAfterLatest:t.messageCountAfterLatest,markedMsgCount:t.markedMsgCount,messageCountIsExact:t.messageCountIsExact,collapsed:t.collapsed});case"show-newer":return Wn.t("{count, plural, =1 {# new message} other {# new messages}}",{count:t.count});case"footer":return Wn.t("Mark All Messages Read");default:return null}}renderRow(e,t){var{hasFocus:a,itemId:n}=t,r=this.rows[e],i=this.list.current&&this.list.current.getInitialActiveItem();switch(r.type){case"header":return s.a.createElement(fn,{channelId:r.channelId,channelType:r.channelType,messageCount:r.messageCount,messageCountAfterLatest:r.messageCountAfterLatest,messageCountIsExact:r.messageCountIsExact,markedMsgCount:r.markedMsgCount,collapsed:r.collapsed,latest:r.end,initialLastRead:r.initialLastRead,totalUnreadCount:this.props.totalUnreadCount,markChannelLastRead:this.markChannelLastRead,showNewerMessages:this.showNewerMessages,toggleCollapse:this.toggleCollapse,selected:Object(ja.a)(i,r.channelId),clogLinkClick:this.props.clogLinkClick});case"message":return s.a.createElement(Gn,{channelId:r.channelId,ts:r.ts,prevTs:r.prevTs,actionsPosition:r.isFirstMessage?"default":void 0,onBackgroundClick:this.handleMessageBackgroundClick,focused:a,renderActionsOffscreen:this.state.hasKeyboardFocus,theme:this.props.theme,rollup:r.rollup,parentId:n});case"loading":return this.props.featureOfflineMode&&this.props.isOffline?s.a.createElement(Qa.a,null):s.a.createElement(Bn,null);case"day-divider":var o=+r.dayTs;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Va.b,{date:o}),s.a.createElement(Va.a,{date:o,isUnread:r.unread}));case"unread-divider":return s.a.createElement(za.a,null);case"show-newer":return s.a.createElement(show_newer_button_ShowNewerButton,{count:r.count,channelId:r.channelId,showNewerMessages:this.showNewerMessages});case"spacer":return s.a.createElement("div",{className:h()("p-unreads_view__spacer",{"p-unreads_view__spacer--bottom":!!r.isBottom})});case"footer":return s.a.createElement(Ln,{markAllRead:this.markAllRead});default:return this.props.logger.error("Unhandled row type:",r.type),r.type}}fetchPost(){var e=Object(Sa.a)(this.rows);if(e&&"loading"===e.type&&!this.loading){this.loading=!0;var{channelId:t,oldest:a}=e;this.props.logger.info("fetchPost",t,a),this.props.fetchHistory({channelId:t,oldest:a,reason:"unreads-view/fetchPost"}).then(e=>{var{msgs:n,hasMore:r,deleted:s}=e;this.props.addMessagesFromHistory({channelId:t,oldest:a,msgs:n,hasMore:r,deleted:s})}).finally(()=>{this.loading=!1})}}render(){var{allUnreadsSortOrder:e,frames:t,currentUserId:a,featureOfflineMode:n,isOffline:r}=this.props,{keys:i,rows:o,stickyItems:c}=function(e,t){var a=[],n=[],r=[],s=!0;return Object(tn.a)(e,e=>{var{channelId:i,channelType:o,start:c,end:l,timestamps:d,sliceEnd:p,reachedEnd:u,messages:h,lastRead:m,initialLastRead:b,markedMsgCount:_,collapsed:g}=e,f=d.filter(e=>{var a=h[e];return!(Object(an.fb)(a)||Object(an.ib)(a)&&!Object(an.hb)(a,t)||Object(an.sb)(a))}),v=f.filter(e=>e>c&&e<=l),O=f.filter(e=>e>l),y=v.length&&!g,C=v&&v[0]&&!Object(rn.a)(v[0]),j=m>c&&Object(ka.a)(v,e=>{var a=h[e];return Object(an.kb)(a,m,t)});if(a.push("header-".concat(i)),r.push({key:"header-".concat(i),index:n.length}),n.push({type:"header",channelId:i,channelType:o,end:l,initialLastRead:b,markedMsgCount:_,messageCount:v.length,messageCountAfterLatest:O.length,messageCountIsExact:u,collapsed:g}),y&&!C&&(a.push("spacer-top-".concat(i)),n.push({type:"spacer"})),y){var E=v.map(e=>h[e]),{rollups:k}=Object(sn.a)(E);v.forEach((e,t)=>{var r=v[t-1],s=e===j,o=r&&Object(nn.a)(r),c=Object(nn.a)(e);C&&o!==c?(a.push("day-divider-".concat(i,"-").concat(c)),n.push({type:"day-divider",dayTs:c,unread:s})):s&&(a.push("unread-divider-".concat(i)),n.push({type:"unread-divider"})),a.push("message-".concat(i,"-").concat(e)),n.push({type:"message",channelId:i,ts:e,prevTs:r,isFirstMessage:0===t,rollup:k[e]})})}if(!u&&!g){var S=p||c;return a.push("loading-".concat(i,"-").concat(S)),n.push({type:"loading",channelId:i,oldest:S}),s=!1,!1}return y&&(O.length?(a.push("show-newer-".concat(i)),n.push({type:"show-newer",channelId:i,count:O.length})):(a.push("spacer-bottom-".concat(i)),n.push({type:"spacer",isBottom:!0}))),!0}),s&&(a.push("footer"),n.push({type:"footer"})),{keys:a,rows:n,stickyItems:r}}(t,a),l=!Object(ya.a)(o,e=>"message"===e.type);if(n&&r&&l)return s.a.createElement(ta.a,null);var d=this.keys;this.rows=o,this.keys=i;var p,u=[{keys:["r"],handler:this.onMarkReadKeyCommandWithR,filter:this.shouldIgnoreKeyEvent},{keys:["esc"],handler:this.onMarkReadKeyCommand,filter:this.shouldIgnoreKeyEvent},{keys:["left"],handler:this.onLeftKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["right"],handler:this.onRightKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["shift+pageup"],handler:this.onPreviousChannelKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["shift+pagedown"],handler:this.onNextChannelKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent}];p="alphabetical"===e?Wn.t("All Unreads, sorted alphabetically"):"priority"===e?Wn.t("All Unreads, sorted scientifically"):"newest"===e?Wn.t("All Unreads, sorted by newest channel"):Wn.t("All Unreads, sorted by oldest channel");var h=this.determineKeyToFocus(d,this.keys),m=s.a.createElement(Ia.a,null,e=>{var{width:t,height:a}=e;return s.a.createElement(qa.a,{id:"unreads_view",ref:this.list,layout:this.layout,width:t,height:a,keys:i,rowRenderer:this.renderRow,isFocusableItem:this.isFocusableItem,loadAround:this.fetchPost,loadPost:this.fetchPost,stickyItems:c,stickyZIndex:202,keyCommands:u,activeItem:h,getPropsForItem:this.getPropsForItem,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,useAriaApplicationMode:this.props.featureAriaApplicationMode,"aria-label":p,onItemTabWithin:this.onItemTabWithin,onScroll:this.onListScrolledDebounce})});return Object(_.a)()?m:s.a.createElement(Ya.a,{component:this,order:.2},m)}}unreads_list_UnreadsList.propTypes=Kn,unreads_list_UnreadsList.defaultProps=Vn;var zn={fetchHistory:function(){return Object(Aa.b)(...arguments)},addMessagesFromHistory:function(){return Object(Pa.a)(...arguments)},setUnreadPoint:function(){return Object(st.setUnreadPoint)(...arguments)},expandChannel:function(){return Fa(...arguments)},collapseChannel:function(){return La(...arguments)},makeMessageSummary:function(){return Object(Na.a)(...arguments)},makeHeaderLabel:function(){return dn(...arguments)},showThreadIfThreadable:function(){return Object(Ta.m)(...arguments)},setFocusRequestedThreadKey:function(){return Object(Wt.c)(...arguments)}},Yn=Object(_.a)()?Object(Xa.a)(unreads_list_UnreadsList,"UnreadsList",{index:0}):unreads_list_UnreadsList,Qn=Object(m.b)(function(e,t){var a=Object(na.a)({label:qn,state:e}),n=Object(g.a)({state:e}),r=Object(wa.a)(e),s=Object(ia.j)(e),o=t.frames.map(t=>{var a=Object(w.e)(e,t.channelId),n=Object(_e.C)(a),r=Object(Ut.h)(e,a.id),i=Object(_e.E)(a,r.timestamps),o=Object(Ut.h)(e,a.id,t.start);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(a),!0).forEach(function(t){Object(At.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Hn(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t,{lastRead:n,latest:i,timestamps:o.timestamps,sliceEnd:o.end,reachedEnd:!!o.reachedEnd,messages:Object(Bt.b)(e,a.id),collapsed:s.includes(t.channelId),isMember:Object(_e.nb)(a)})});return{logger:a,clogger:n,teamId:Object(oa.b)(e),theme:r,frames:o,currentUserId:Object(i.d)(e),featureAriaApplicationMode:Object(i.m)(e,"feature_aria_application_mode"),allUnreadsSortOrder:Object(zt.a)(e),focusRequestedThreadKey:Object(Ht.a)(e),userAttentionIsOnChat:Object(la.e)(e),featureOfflineMode:Object(i.m)(e,"feature_offline_mode"),isOffline:!Object(Kt.c)(e),composerVisible:(Object(me.a)(e)||"composer_toolbar"===Object(Ja.c)(e,"composer_toolbar"))&&Object(Za.b)(e),impressionLoggingWebGroup:Object(Ja.c)(e,"impression_logging_web")}},zn,null,{withRef:!0})(Yn),Xn=a("oTSI"),Jn=a("Yk7g"),Zn=a("1myf"),$n=a("pHS2"),er=a("dYt1");function tr(e){var{publicChannels:t,privateChannels:a,ims:n,mpims:r}=ir(e);return function(e){var{hasMentions:t,noMentions:a}=function(e){var t=Object($n.a)(e,e=>e.unreadHighlightCnt>0),a=t.true||[],n=t.false||[];return{hasMentions:a,noMentions:n}}(e);return rr(t).concat(rr(a))}(t.concat(a)).concat(rr(n)).concat(rr(r))}function ar(e){var{publicChannels:t,privateChannels:a,ims:n,mpims:r}=ir(e),s=nr(t.concat(a)),i=nr(n),o=nr(r);return s.concat(i).concat(o)}function nr(e){return Object(er.a)(e).sort((e,t)=>Object(b.r)(e.displayName,t.displayName))}function rr(e){return Object(er.a)(e).sort((e,t)=>e.priority===t.priority?Object(b.r)(e.displayName,t.displayName):t.priority-e.priority)}function sr(e){var t=Object($n.a)(e,"isStarred");return{starred:t.true||[],notStarred:t.false||[]}}function ir(e){var t=Object($n.a)(e,"channelType");return{publicChannels:t.channel||[],privateChannels:t.private||[],ims:t.im||[],mpims:t.mpim||[]}}var or=function(e){var{channels:t,allUnreadsSortOrder:a,currentUserId:n}=e;return"oldest"===a?function(e,t){var a=Object(Xn.a)(e=>{var{lastRead:a,messages:n,oldestSliceTimestamps:r,createdTime:s}=e,i=!1,o=Object(ka.a)(r,e=>{if(e<=a)return!1;var r=n[e];return r?Object(an.kb)(r,a,t):(i=!0,!1)});return o&&!i?o:"0000000000.000000"===a?"".concat(s,".000000"):a});return Object(Zn.a)(e,a)}(t,n):"priority"===a?function(e){var{starred:t,notStarred:a}=sr(e);return tr(t).concat(tr(a))}(t):"newest"===a?function(e){return Object(Jn.a)(Object(Zn.a)(e,"latest"))}(t):function(e){var{starred:t,notStarred:a}=sr(e);return ar(t).concat(ar(a))}(t)};var cr=Object(m.b)(function(e,t){var a=t.frames.map(e=>e.channelId),{countsPerChannel:n}=fa(e),r=Object(Ea.a)(n,(e,t)=>!a.includes(t));return{newUnreadMsgCount:Object(Rt.a)(Object(xt.a)(r,"unreadCnt"))}})(class new_messages_updater_NewMessagesUpdater extends r.Component{constructor(e){super(e),Object(Ft.a)(this,["refreshFromKeyPress"])}componentDidMount(){this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}componentDidUpdate(e){e.newUnreadMsgCount!==this.props.newUnreadMsgCount&&this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}componentWillUnmount(){this.props.setNewUnreadMsgCount(0)}refreshFromKeyPress(){this.props.newUnreadMsgCount>0&&this.props.refreshAllUnreads()}render(){return null}});a("oq3d");function lr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function dr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(a),!0).forEach(function(t){Object(At.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lr(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var pr=new b.b("all_unreads"),ur="UNREADS-VIEW",hr={channels:Lt.default.arrayOf(Lt.default.shape({id:Lt.default.string.isRequired,lastRead:Lt.default.string.isRequired,latest:Lt.default.string.isRequired,displayName:Lt.default.string.isRequired,channelType:Lt.default.string.isRequired,isStarred:Lt.default.bool.isRequired,priority:Lt.default.number.isRequired,unreadHighlightCnt:Lt.default.number.isRequired,messages:Lt.default.object.isRequired,oldestSliceTimestamps:Lt.default.arrayOf(Lt.default.string).isRequired,createdTime:Lt.default.number.isRequired})).isRequired,logger:Lt.default.object.isRequired,clogger:Lt.default.object,allUnreadsSortOrder:Lt.default.string.isRequired,currentUserId:Lt.default.string.isRequired,refreshId:Lt.default.number.isRequired,totalUnreadCount:Lt.default.number.isRequired,unreadChannelsAreKnown:Lt.default.bool.isRequired,featureOfflineMode:Lt.default.bool.isRequired,isOffline:Lt.default.bool.isRequired,isIAPhase1Enabled:Lt.default.bool.isRequired,clientTheme:Lt.default.oneOf(["light","dark"]),markLastRead:Lt.default.func.isRequired,setNewUnreadMsgCount:Lt.default.func.isRequired},mr={clogger:{track:U.a,error:U.a},clientTheme:"light"};class unreads_view_UnreadsView extends aa.a{constructor(e){super(e),Object(Ft.a)(this,["showNewerMessages","markChannelLastRead","markAllRead","undoMarkAllRead","refreshAllUnreads","removeFrames","clogUnreadsEvent"]),this.state=this.computeInitialState(),this.unreadsEventSeqId=0,this.initializedTime=Date.now(),this.listRef=s.a.createRef()}componentDidMount(){this.clogUnreadsEvent({event:"UNREADS_OPEN",metadata:{is_iap1:this.props.isIAPhase1Enabled}}),this.incrementTrackingSeqId()}componentDidUpdate(e){(e.allUnreadsSortOrder!==this.props.allUnreadsSortOrder||e.refreshId<this.props.refreshId||!e.unreadChannelsAreKnown&&this.props.unreadChannelsAreKnown)&&this.refreshAllUnreads()}componentDidCatch(e){this.setState(()=>({errored:!0})),this.props.logger.error("Unreads view componentDidCatch","unreads_view_did_catch",e)}componentWillUnmount(){var e={unreads_event_seq_id:this.unreadsEventSeqId,unreads_elapsed_time:Date.now()-this.initializedTime};this.clogUnreadsEvent({event:"UNREADS_CLOSE",metadata:e})}incrementTrackingSeqId(){this.unreadsEventSeqId+=1}clogUnreadsEvent(e){var{event:t,metadata:a}=e,{clogger:n}=this.props;n.track(t,dr({is_unreads_view:1},a))}computeInitialState(){var{channels:e,allUnreadsSortOrder:t,currentUserId:a}=this.props;return{frames:or({channels:e,allUnreadsSortOrder:t,currentUserId:a}).map(e=>{var{id:t,lastRead:a,latest:n,channelType:r}=e;return{channelId:t,start:a,end:n,initialLastRead:a,markedMsgCount:0,channelType:r||""}}),markedChannels:[],errored:!1}}showNewerMessages(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setState(n=>{return{frames:n.frames.map(n=>n.channelId!==e?n:dr({},n,{initialLastRead:a||n.initialLastRead,start:a||n.start,end:t}))}})}markChannelLastRead(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.props.logger.info("Marking ".concat(e," to ").concat(t)),this.props.markLastRead({id:e,ts:t,immediate:!0,reason:"unreads-view/markChannelLastRead"}),this.setState(n=>{return{frames:n.frames.map(n=>n.channelId!==e?n:dr({},n,{start:t,markedMsgCount:a})),markedChannels:[e]}})}markAllRead(e){this.props.logger.info("Marking all: ".concat(JSON.stringify(e))),this.props.markManyLastRead({markers:e,reason:"unreads-view/markAllRead"});var t={unread_count:this.props.totalUnreadCount};this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_READ",metadata:t}),this.setState(t=>{var a=t.frames.map(e=>dr({},e,{start:e.end}));return dr({},t,{frames:a,markedChannels:Object(Dt.a)(e)})})}undoMarkAllRead(){this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_UNREAD",metadata:{}}),this.setState((e,t)=>{var a=e.frames.map(t=>e.markedChannels.includes(t.channelId)?dr({},t,{start:t.initialLastRead}):t),n={};return a.forEach(t=>{e.markedChannels.includes(t.channelId)&&(t.initialLastRead>=t.end||(n[t.channelId]=t.initialLastRead))}),t.logger.info("Undoing mark all: ".concat(JSON.stringify(n))),t.markManyLastRead({markers:n,reason:"unreads-view/undoMarkAllRead"}),dr({},e,{frames:a,markedChannels:[]})})}refreshAllUnreads(){this.props.logger.info("Refreshing"),this.setState(()=>this.computeInitialState(),()=>{this.listRef&&this.listRef.current&&this.listRef.current.getWrappedInstance()&&this.listRef.current.getWrappedInstance().scrollToTop()}),this.props.setNewUnreadMsgCount(0)}removeFrames(e){this.setState(t=>dr({},t,{frames:t.frames.filter(t=>!e.includes(t.channelId))}))}renderTopBanners(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"p-unreads_view__top_banners"},s.a.createElement(Yt.a,null),s.a.createElement(Qt.a,null,s.a.createElement(Xt.a,null))),s.a.createElement(ea.a,null))}render(){if(!this.props.unreadChannelsAreKnown){var{featureOfflineMode:e,isOffline:t}=this.props;return s.a.createElement(s.a.Fragment,null,this.renderTopBanners(),e&&t?s.a.createElement(ta.a,null):s.a.createElement(Jt.a,{clientTheme:this.props.clientTheme}))}var{markedChannels:a,errored:n}=this.state;if(n)return s.a.createElement("div",{className:"p-unreads_view"},this.renderTopBanners(),s.a.createElement(Zt.a,{tryAgain:this.refreshAllUnreads,"data-qa":"unreads_view_error"},pr.t("Something\u2019s fishy! Slack can\u2019t seem to load your unread messages.")," ",s.a.createElement("br",null),pr.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,e=>{var{text:t}=e;return s.a.createElement(de.a,{href:"https://slack.com/help/contact"},t)})));var i=s.a.createElement(cr,{frames:this.state.frames,setNewUnreadMsgCount:this.props.setNewUnreadMsgCount,refreshAllUnreads:this.refreshAllUnreads}),o=!this.state.frames.some(e=>e.start<e.end),c=s.a.createElement(Oa,{visible:o,showUndo:!Object(Mt.a)(a),undoMarkAllRead:this.undoMarkAllRead,refreshAllUnreads:this.refreshAllUnreads}),l=s.a.createElement($t.a,{id:ra.I.UNREAD_VIEW},s.a.createElement("div",{className:"p-unreads_view"},s.a.createElement(Qn,{ref:this.listRef,frames:this.state.frames,showNewerMessages:this.showNewerMessages,markChannelLastRead:this.markChannelLastRead,markAllRead:this.markAllRead,removeFrames:this.removeFrames,totalUnreadCount:this.props.totalUnreadCount,clogLinkClick:this.clogUnreadsEvent})));return s.a.createElement(r.Fragment,null,this.renderTopBanners(),c,!o&&l,!o&&i)}}unreads_view_UnreadsView.propTypes=hr,unreads_view_UnreadsView.defaultProps=mr;var br={markLastRead:function(){return Object(qt.a)(...arguments)},markManyLastRead:function(){return Object(qt.b)(...arguments)},setNewUnreadMsgCount:function(){return Object(Wt.d)(...arguments)}},_r=Object(m.b)(function(e){var t=Object(na.a)({label:ur,state:e}),a=Object(g.a)({state:e}),{countsPerChannel:n,unreadChannelIds:r,unreadChannelsAreKnown:s}=fa(e),o=Object(Rt.a)(Object(xt.a)(n,"unreadCnt")),c=Object(Gt.c)(e);return{logger:t,clogger:a,channels:r.map(t=>Object(w.e)(e,t)).map(t=>{var a=Object(_e.C)(t),r=Object(Ut.h)(e,t.id),s=Object(_e.E)(t,r.timestamps);s&&"0000000000.000000"!==s||(s="".concat(Math.floor(Date.now()/1e3),".000000"));var i=Object(Ut.h)(e,t.id,a),o=Object(Bt.b)(e,t.id)||{};return{id:t.id,lastRead:a,latest:s,displayName:Object(_e.w)(e,t,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),channelType:Object(_e.u)(t),isStarred:Object(_e.Ib)(t)||!1,priority:Object(_e.P)(t)||0,unreadHighlightCnt:n[t.id].unreadHighlightCnt||0,messages:o,oldestSliceTimestamps:i&&i.timestamps||[],createdTime:Object(_e.p)(t)}}),clientTheme:c,allUnreadsSortOrder:Object(zt.a)(e),currentUserId:Object(i.d)(e),refreshId:Object(Ht.c)(e),totalUnreadCount:o,unreadChannelsAreKnown:s,featureOfflineMode:Object(i.m)(e,"feature_offline_mode"),isOffline:!Object(Kt.c)(e),isIAPhase1Enabled:Object(Vt.d)(e)}},br)(unreads_view_UnreadsView),gr=a("a9fl"),fr=a("Fsnq"),vr=a("NZTl"),Or=a("g+Y+"),yr=a("+6YQ"),Cr=new b.b("drafts"),jr={className:void 0,featureComposeFlow:!1,numDrafts:0,isIAP1Enabled:!1};class drafts_header_DraftsHeader extends r.Component{render(){var{className:e,featureComposeFlow:t,numDrafts:a,isIAP1Enabled:n}=this.props;return t?n?s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"p-ia__view_header__title"},Cr.t("Drafts"),s.a.createElement("div",{className:"p-ia__view_header__subtitle"},Cr.t("{count, plural, =0 {No drafts} =1 {# draft} other {# drafts}}",{count:a}))),s.a.createElement("div",{className:"p-ia__view_header__spacer"}),s.a.createElement(yr.b,{onClick:()=>this.props.openComposerPage()},"New message")):s.a.createElement("div",{className:e},s.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},s.a.createElement("div",{className:"p-classic_nav__channel_header__title p-classic_nav__no_drag"},Cr.t("Drafts"))),s.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},Cr.t("{count, plural, =0 {No drafts} =1 {# draft} other {# drafts}}",{count:a}))):null}}drafts_header_DraftsHeader.defaultProps=jr;var Er={openComposerPage:function(){return Object(vr.a)(...arguments)}},kr=Object(m.b)(function(e){var t=Object(d.a)(e,{includeAllTeams:!0});return{featureComposeFlow:Object(Or.g)(e),numDrafts:Object(fr.a)(t),isIAP1Enabled:Object(Vt.d)(e)}},Er)(drafts_header_DraftsHeader),Sr=new b.b("drafts"),Ir={className:void 0,featureComposeFlow:!1};function wr(e){var{className:t,featureComposeFlow:a}=e;return a?s.a.createElement("div",{className:t},s.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},s.a.createElement("div",{className:"p-classic_nav__channel_header__title p-classic_nav__no_drag"},Sr.t("New message"))),s.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle p-composer_page__header_subtitle",id:"p-composer_page__header_subtitle"})):null}wr.defaultProps=Ir;var Tr=Object(m.b)(function(e){return{featureComposeFlow:Object(Or.g)(e)}})(wr),Nr=a("dhvi"),Pr=a("1VmY"),Ar=a("GlmH"),Mr=(a("CSrb"),new b.b("welcome_place"));var xr={closeModal:Nr.a,dismissWelcomePlace:v.c},Rr=Object(m.b)(function(e){return{clogger:Object(g.a)({state:e}),pageViewingSessionId:Object(f.i)(e),isOnWelcomePlacePage:Object(Ar.a)(e)}},xr)(class dismiss_welcome_place_dialog_DismissWelcomePlaceDialog extends r.Component{constructor(){super(...arguments),this.isDismissClicked=!1,this.clickDismiss=(()=>{this.isDismissClicked=!0,this.props.dismissWelcomePlace(),this.props.closeModal(),this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:y.UiAction.CLICK,ui_element:y.UiElement.WELCOME_PLACE_DISMISS_MODAL_SUBMIT,ui_properties:{element_type:y.ElementType.BUTTON}},welcome_place:{welcome_session_id:this.getWelcomeSessionId()}}})}),this.hideModal=(()=>{this.props.closeModal(),this.isDismissClicked||this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:y.UiAction.CLICK,ui_element:y.UiElement.WELCOME_PLACE_DISMISS_MODAL_HIDE},welcome_place:{welcome_session_id:this.getWelcomeSessionId()}}})})}getWelcomeSessionId(){return this.props.isOnWelcomePlacePage?this.props.pageViewingSessionId:null}render(){return s.a.createElement(Pr.a,{title:Mr.t("Remove the Get Started page?"),submitButtonText:Mr.t("Remove",{note:"Primary call-to-action (button copy) on the \u201cRemove the Get Started page\u201d dialog. Implied direct object is the \u201cGet Started page.\u201d"}),cancelButtonText:Mr.t("Cancel",{note:"Secondary call-to-action (button copy) that allows the user to close the modal."}),submitButtonType:"primary",onSubmit:this.clickDismiss,onCancel:this.hideModal,onClose:this.props.closeModal},s.a.createElement("div",{className:"welcome-place-dismiss-dialog__body"},Mr.rt("If you're all set, you can remove this page permanently. If you need help later, head to our <a1>Help Center</a1>, or reach out to us at <a2>feedback@slack.com</a2>.",{note:"Body copy of the \u201cRemove the Get Started page\u201d dialog. Explains permanence of the primary action and provides alternate paths for help (Help Center link and clickable email address to support team)."},e=>{var{tag:t,text:a}=e;return"a1"===t?s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/".concat(Object(b.s)())},a):"a2"===t?s.a.createElement("a",{href:"mailto:feedback@slack.com"},a):null})))}}),Dr=(a("9pzU"),new b.b("welcome_place"));var Fr=Object(m.b)(function(){return{}})(class welcome_place_page_header_WelcomePlacePageHeader extends r.Component{render(){var{className:e}=this.props,t=Dr.t("Get Started",{note:"The label for the Welcome place, both for the title of the page in the header and for the sidebar affordance. Conveys the purpose of the page (a place with learning/action modules to help you start using Slack)."}),a=Dr.t("A few essential steps to help you get going with Slack",{note:"The subtitle for the page that lets the reader know the purpose and what to expect from the page contents. Note: there should be no punctuation at the end."});return s.a.createElement("div",{className:h()(e,"welcome-place-page-header")},s.a.createElement("div",{className:"p-classic_nav__channel_header__title"},t),s.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle overflow_ellipsis"},a))}}),Lr=a("Sh2I"),Ur=a("oKz6"),Br=(a("9Oym"),new b.b("welcome_place")),Hr=e=>{var t={[E.e.SendMessage]:Br.t("Send a message"),[E.e.JoinChannel]:Br.t("Join a few channels"),[E.e.EnableNotifications]:Br.t("Turn on notifications"),[E.e.DownloadDesktopApp]:Br.t("Get the Slack app"),[E.e.AddAppFileManagement]:Br.t("Connect your tools")};return e?t[e]:""};var Wr=Object(m.b)(function(e){return{progress:Object(f.n)(e),isAnimating:Object(f.a)(e),isOnboarding:!!Object(Ur.e)(e)}},function(e){return{startWorkflow:()=>e(Object(v.e)()),completeOnboarding:()=>{e(Object(Lr.a)())}}})(class sidebar_link_content_SidebarLinkContent extends r.Component{componentDidMount(){var{startWorkflow:e,isOnboarding:t,completeOnboarding:a}=this.props;e(),t&&a()}render(){var e,{name:t,progress:{total:a,completed:n,nextTaskType:r},isAnimating:i}=this.props,o=Math.round(n/a*100);e=0===n?Br.t("First:"):n===a-1?Br.t("Finally:"):Br.t("Next:");var c=Br.t("All done."),l=n===a?c:"".concat(e," ").concat(Hr(r)).trim();return s.a.createElement("div",{className:"display_flex flex_direction_column full_width p-welcome-place__sidebar_content"},s.a.createElement("div",{className:"margin_bottom_25 p-welcome-place__sidebar_content__title"},t),s.a.createElement("div",{className:"p-welcome-place__sidebar_content__link_progress"},s.a.createElement("div",{className:"p-welcome-place__sidebar_content__link_progress_inner",style:{width:"".concat(o,"%")}})),s.a.createElement("div",{title:l,className:"p-welcome-place__sidebar_content__link_caption overflow_ellipsis"},l||" "),s.a.createElement("div",{className:h()("p-welcome-place__sidebar_content__gradient",{"p-welcome-place__sidebar_content__gradient--animating":i})}))}}),qr=a("za+y"),Gr=a("D6w7"),Kr=a("KdfD"),Vr=a("AjwY"),zr=a("2cus"),Yr=Object(on.b)("Clogs paid-benefits page and corresponding sidebar link",function(e,t){var{action:a,step:n,elementType:r,elementName:s,isPrimaryCTA:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t(),c=Object(g.a)({state:o}),l=Object(zr.v)(o),d=Object(zr.m)(o)===Vr.f.standard.id,p="";switch(l){case zr.b.FREE_NO_TRIAL:p="free_no_trial";break;case zr.b.IN_TRIAL:p=d?"standard_trial":"plus_trial";break;case zr.b.FREE_EXPIRED_TRIAL:p=d?"standard_downgrade":"plus_downgrade";break;case zr.b.PAID:p=d?"standard_upgraded":"plus_upgraded"}c.track(y.EventId.UPGRDEXP_BENEFITS,{contexts:{ui_context:{step:n,step_variant:p,action:a,ui_properties:{element_type:r,element_name:s},is_primary_cta:i}}})});Yr.meta={name:"clogPaidBenefits",key:"actionsClogPaidBenefitsClogPaidBenefits",description:"Clogs paid-benefits page and corresponding sidebar link"},Yr.propTypes={action:Lt.default.number.isRequired,step:Lt.default.number.isRequired,elementType:Lt.default.number.isRequired,elementName:Lt.default.string.isRequired,isPrimaryCTA:Lt.default.bool};var Qr=Yr,Xr=Object(on.b)("Clogs a user click on the drafts sidebar item",(e,t)=>{var a=t();Object(g.a)({state:a}).track("DRAFTS_SIDEBAR_ITEM_CLICK",{is_iap1:Object(Vt.d)(a)})});Xr.meta={name:"clogDraftsSidebarItem",key:"actionsClogDraftsSidebarItemClogDraftsSidebarItem",description:"Clogs a user click on the drafts sidebar item"},Xr.propTypes=null;var Jr=Xr,Zr=a("wSSu"),$r=a.n(Zr),es=a("YPPF"),ts=a("HZFI"),as=a("U/ze"),ns=Object(as.b)(function(e){var{draftId:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!!(e&&e.draftsExpansion&&e.draftsExpansion[t])});ns.meta={name:"isDraftExpanded",key:"draftsExpansionStoreSelectorsIsDraftExpanded"},ns.propTypes={draftId:Lt.default.string.isRequired};var rs=a("wgy9"),ss=a("kLJo"),is=a("sDWr"),os=a("jHww"),cs=Object(on.b)("Navigate to the last known channel",function(e,t){var{reason:a,shouldReplaceState:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t(),s=Object(os.a)(r);Object(ss.g)(is.a,{entityId:s},{reason:a,shouldReplaceState:n})});cs.meta={name:"navigateToPrevChannel",key:"actionsNavigateToPrevChannelNavigateToPrevChannel",description:"Navigate to the last known channel"},cs.propTypes={reason:Lt.default.string.isRequired,shouldReplaceState:Lt.default.bool};var ls=cs,ds=a("VBRD"),ps=a("0rID"),us=a("lCOO"),hs=a("1Oqo");var ms=a("VJ6R");function bs(e,t){if(!Object(l.l)(t))return null;var a=Object(l.c)(t);if(a&&1===a.length)return a[0];var n=Object(l.j)(t);if(!Object(Mt.a)(n)){if(1===n.length)return Object(w.l)(e,n[0]);var r=Object(i.d)(e),s=Object(Ma.a)(n,r);if(1===s.length)return Object(w.l)(e,s[0]);var o=[...s,r],c=Object(w.n)(e,o);if(c)return c.id}return null}var _s=a("TGBA"),gs=a("1zbP"),fs=a("UHk2"),vs=a("ySrZ"),Os=a("SHa9"),ys=a("7p4D"),Cs=a("kSp4"),js=a("eK0w"),Es=a("7Xqt"),ks=a("o4sC"),Ss=a("l1Ba"),Is=a("fAc/"),ws=Object(on.b)("Request channel history for a given timespan",function(e,t){var{channelId:a,historyRateLimiter:n,oldestTs:r,latestTs:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.isRequestPending({oldest:r,latest:s}))return Promise.resolve();if(n.shouldPreventHistoryRequest({oldest:r,latest:s}))return Object(na.a)({getState:t}).error({channelId:a,latestTs:s,oldestTs:r},"composer_request_rate_limited"),Promise.resolve();var i=e(Object(ge.a)({oldest:r,latest:s,channelId:a,reason:"composer-context"}));return i?(n.logHistoryRequest({oldest:r,latest:s,promise:i}),i):Promise.resolve()});ws.meta={name:"fetchChannelHistory",key:"componentsComposerPageUtilityFetchChannelHistoryFetchChannelHistory",description:"Request channel history for a given timespan"},ws.propTypes={channelId:Lt.default.string.isRequired,historyRateLimiter:Lt.default.shape({isRequestPending:Lt.default.func.isRequired,logHistoryRequest:Lt.default.func.isRequired,shouldPreventHistoryRequest:Lt.default.func.isRequired}).isRequired,latestTs:Lt.default.string,oldestTs:Lt.default.string};var Ts=ws;var Ns=Object(Ka.a)(message_Message),Ps={channel:Lt.default.object,channelId:Lt.default.string,dispatch:Lt.default.func,isLoading:Lt.default.bool,messages:Lt.default.array,reachedEnd:Lt.default.bool,reachedStart:Lt.default.bool,theme:Lt.default.oneOf(["dense","light"]).isRequired,viewId:Lt.default.string.isRequired},As={channel:void 0,channelId:void 0,dispatch:U.a,isLoading:!1,messages:[],reachedStart:!1,reachedEnd:!1};class composer_context_ComposerContext extends fs.a{constructor(e){super(e),this.isFocusableItem=this.isFocusableItem.bind(this),this.requestHistory=this.requestHistory.bind(this),this.renderList=this.renderList.bind(this),this.renderRow=this.renderRow.bind(this),this.isDegradedList=Object(Ss.a)(),this.historyRateLimiter=new vs.a,this.layout=new ks.a({shouldExcludeFirstItemFromGravity:!1,stickToBottom:!0})}componentDidUpdate(e){var{channelId:t}=this.props;t!==e.channelId&&(this.historyRateLimiter.reset(),this.layout.heightCache&&this.layout.heightCache.invalidate&&this.layout.heightCache.invalidate())}isFocusableItem(e){var{index:t}=e,a=this.rows[t];return a&&"message"===a.type}requestHistory(e){var{oldest:t,latest:a}=e,{channel:n,channelId:r,dispatch:s}=this.props;Object(gs.e)(n)||Object(_e.cb)(n)||s(Ts({channelId:r,historyRateLimiter:this.historyRateLimiter,latestTs:a,oldestTs:t}))}renderRow(e){var{channelId:t,theme:a}=this.props,n=this.rows[e];if(!n)return null;var r=h()({"p-composer_page__context_item--top":0===e,"p-composer_page__context_item--bottom":e===this.rows.length-1});switch(n.type){case"message":return s.a.createElement(Ns,{channelId:t,className:r,ts:n.ts,prevTs:n.prevTs,theme:a,rollup:n.rollup});case"day_divider":return s.a.createElement("div",{className:h()(r,"p-composer_page__context_list_divider")},s.a.createElement(Va.b,{date:n.dayTs,sticky:!1}),s.a.createElement(Va.a,{date:n.dayTs}));case"loading_empty":return s.a.createElement(ys.a,null);case"loading_inline":return s.a.createElement(Cs.a,{className:r});default:return null}}renderList(e){var{isLoading:t,messages:a,reachedEnd:n,reachedStart:r,viewId:i}=this.props,{rows:o,keys:c}=function(){var{isLoading:e,messages:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=[],n=[],r=Object(Ea.a)(t,e=>!Object(an.fb)(e)&&!Object(an.sb)(e));if(Object(Mt.a)(r))e&&(a.push("loading_empty"),n.push({type:"loading_empty"}));else{if(e){var s=Object(an.Q)(r[0]);a.push("loading_inline-".concat(s)),n.push({type:"loading_inline"})}var{rollups:i,messages:o}=Object(sn.a)(r);o.forEach((e,t)=>{var r=Object(an.Q)(o[t-1]),s=Object(an.Q)(e),c=Object(nn.a)(r),l=Object(nn.a)(s);c!==l&&(a.push("day_divider-".concat(l,"-").concat(s)),n.push({type:"day_divider",dayTs:Number(l)})),a.push(s),n.push({type:"message",ts:s,prevTs:r,rollup:i[s]})})}return{rows:n,keys:a}}({isLoading:t,messages:a});this.rows=o,this.keys=c;var l=this.isDegradedList?Es.a:js.a;return s.a.createElement(ds.a,null,t=>{var{measureRef:a,width:o,height:d}=t;return s.a.createElement("div",{className:"p-composer_page__context_list_wrapper",ref:a},s.a.createElement(l,Object(P.a)({},e,{height:d,id:"".concat(i,"-list"),isFocusableItem:this.isFocusableItem,keys:c,reachedEnd:n,reachedStart:r,rowRenderer:this.renderRow,width:o})))})}render(){var{latest:e,messages:t,oldest:a,reachedEnd:n,reachedStart:r,viewId:i}=this.props;if(r&&n&&Object(Mt.a)(t))return null;var o=Object(xt.a)(t,an.Q);return s.a.createElement($t.a,{id:i},s.a.createElement("div",{className:"p-composer_page__context"},s.a.createElement(Os.a,{latest:e,layout:this.layout,listRenderer:this.renderList,oldest:a,reachedEnd:n,reachedStart:r,requestHistory:this.requestHistory,startTs:null,timestamps:o})))}}composer_context_ComposerContext.propTypes=Ps,composer_context_ComposerContext.defaultProps=As;var Ms=Object(m.b)(function(e,t){var{channelId:a}=t,{end:n,prevReachedEnd:r,reachedEnd:s,reachedStart:i,start:o,timestamps:c}=Object(Ut.f)(e,a)||{},l=Object(Bt.c)(e,a,c);return{channel:Object(w.e)(e,a),isLoading:Object(Is.d)(e,a),latest:n,messages:Object(_s.a)(l),oldest:o,prevReachedEnd:r,reachedEnd:s,reachedStart:i,theme:Object(wa.a)(e)}})(composer_context_ComposerContext),xs=a("llxT"),Rs=a("WD4z"),Ds=a("hUMe"),Fs=a("HiDb"),Ls=a("7/SY"),Us=a("Qrgz");function Bs(e,t){var a={};if(Object(Mt.a)(t)&&!Object(l.m)(e,t))a.missingDraft=!0;else{var n=Object(l.c)(t),r=Object(l.j)(t);if(Object(Mt.a)(n))if(Object(Mt.a)(r))a.missingDestination=!0;else{var s=Object(i.d)(e),o=Object(Ma.a)(r,s);o.length>ra.E&&(a.invalidMemberCount=!0);var c=o.filter(t=>{var a=Object(qe.d)(e,t);return Object(le.mb)(a)});c.length&&c.length===r.length&&(1===c.length?a.deactivatedMember=!0:a.deactivatedMembers=!0)}else if(n.length>1)a.invalidChannelCount=!0;else{var d=Object(w.e)(e,n[0]);(Object(_e.Nb)(d)||Object(_e.X)(d)||!Object(Us.p)(e,n[0]))&&(a.invalidChannel=!0)}var p=Object(me.a)(e);Object(Ls.a)({contents:t.ops},{featureWysiwygComposer:p})||Object(l.m)(e,t)||(a.invalidText=!0),Object(l.m)(e,t)&&(Object(l.s)(e,t)||(a.filesUnsendable=!0),Object(l.h)(t)&&Object(l.h)(t).length>ra.z&&(a.tooManyFiles=!0))}return{ok:Object(Mt.a)(a),reasons:a}}function Hs(e,t){return Bs(e,t).ok}var Ws=new b.b("drafts"),qs={alertData:void 0,alertType:void 0,featureComposeFlow:!1};function Gs(e){var t,a,{alertData:n,alertType:r,featureComposeFlow:i}=e;if(!i)return null;if(!r)return null;if("too_many_channels"===r)t="error",a=Ws.t("Too many channels");else if("invalid_channel"===r)t="error",a=Ws.t("Cannot send message to this channel");else if("too_many_members"===r)t="error",a=Ws.t("Direct messages can\u2019t have more than {maxMembers} people.",{maxMembers:ra.E});else if("deactivated_member"===r)t="error",a=Ws.t("This account has been deactivated.");else if("deactivated_members"===r)t="error",a=Ws.t("These accounts have been deactivated.");else if("max_members"===r)t="warning",a=Ws.t("Direct messages can\u2019t have more than {maxMembers} people.",{maxMembers:ra.E});else if("pending_shared_channels"===r){t="warning";var o=n.pendingSharedTeamIds.map(e=>s.a.createElement(Ds.a,{id:e}));a=Ws.rt("<strong>This channel will soon be shared with {teams}.</strong> Messages and files sent here will be seen by members of both organizations.",{teams:Object(b.k)(o,{react:!0})})}else if("shared_channels"===r){t="warning";var c=n.sharedTeamIds.map(e=>s.a.createElement(Ds.a,{id:e}));a=Ws.rt("<strong>This is a shared channel.</strong> Messages and files sent here will also be seen by members of {teams}.",{teams:Object(b.k)(c,{react:!0})})}else"unjoined_channels"===r&&(t="warning",a=Ws.t("You\u2019ll join this channel when you send this message."));return s.a.createElement(Rs.a,{className:"p-composer_page__destination_alert",level:t,type:"inline"},a)}Gs.defaultProps=qs;var Ks=Object(m.b)(function(e,t){var{draft:a}=t,n=function(e,t){var a=Bs(e,t);if(!a.ok){if(a.reasons.invalidChannelCount)return{type:"too_many_channels"};if(a.reasons.invalidChannel)return{type:"invalid_channel"};if(a.reasons.invalidMemberCount)return{type:"too_many_members"};if(a.reasons.deactivatedMember)return{type:"deactivated_member"};if(a.reasons.deactivatedMembers)return{type:"deactivated_members"}}var n=Object(l.j)(t),r=Object(i.d)(e),s=Object(Ma.a)(n,r);if(!Object(Mt.a)(s)&&s.length===ra.E)return{type:"max_members"};var o=[],c=[],d=[],p=Object(l.c)(t);if(Object(tn.a)(p,t=>{var a=Object(w.e)(e,t);Object(gs.b)(a)&&(Object(_e.yb)(a)?o.push(a):Object(_e.ab)(a)&&c.push(a),Object(_e.nb)(a)||d.push(a))}),o.length||c.length){var u=[].concat(o,c),h=Object(Fs.a)(u,t=>Object(_e.N)(e,t));return o.length?{type:"pending_shared_channels",data:{pendingSharedTeamIds:h}}:{type:"shared_channels",data:{sharedTeamIds:h}}}return d.length?{type:"unjoined_channels"}:{}}(e,a);return{alertData:n.data,alertType:n.type}})(Gs);Ks.propTypes={draft:Lt.default.object.isRequired};var Vs=Ks,zs=a("20gP"),Ys=a("+1yX"),Qs=a("FHcd"),Xs=Object(on.b)("Split destination ids into channels and members",(e,t,a)=>{var{ids:n}=a,r=t(),s=Object(i.d)(r),o=[],c=[];return Object(tn.a)(n,e=>{if(Object(Ys.a)(e)){var t=Object(w.e)(r,e);if(Object(_e.pb)(t)){var a=Object(_e.H)(t),n=Object(Ma.a)(a,s);c.push(...n)}else o.push(e)}else if(Object(Qs.a)(e))c.push(e);else{Object(na.a)({state:r}).warn("COMPOSER",'Unhandled selected id "'.concat(e,'"'))}}),Promise.resolve({channelIds:o,memberIds:c})});Xs.meta={name:"categorizeDestinationIds",key:"componentsComposerPageUtilityCategorizeDestinationIdsCategorizeDestinationIds",description:"Split destination ids into channels and members"},Xs.propTypes={ids:Lt.default.arrayOf(Lt.default.string.isRequired)};var Js=Xs;function Zs(e,t){var{reasons:a}=Bs(e,t);return!!(a.invalidChannelCount||a.invalidChannel||a.invalidMembers)}function $s(e){var{selectedExternalTeamId:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t&&Object(le.yb)(e.entity)&&Object(le.P)(e.entity)!==t)return!0;return!1}var ei=a("TegG"),ti=a("oiAH"),ai=a("Zhly"),ni=new b.b("drafts");function ri(e){var t,{entity:a,featureComposeFlow:n,isActive:r,isDisabled:i}=e;return Object(_e.pb)(a)?s.a.createElement(ti.a,{id:a.id,isActive:r}):Object(_e.Cb)(a)||Object(_e.Bb)(a)?s.a.createElement(ai.a,{channelId:a.id,isActive:r}):Object(le.yb)(a)?(n&&i&&(t=ni.t("From another organization")),s.a.createElement(ei.a,{id:a.id,isActive:r,isDisabled:i,secondaryContent:t})):null}ri.defaultProps={featureComposeFlow:!1,isActive:!1,isDisabled:!1};var si=ri;function ii(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var oi=new b.b("drafts"),ci={dispatch:U.a,featureComposeFlow:!1,forwardedRef:void 0,isInvalid:!1,onChange:U.a,onSelect:U.a,selectedExternalTeamId:void 0};function li(e){var{dispatch:t,draft:a,featureComposeFlow:n,forwardedRef:r,isInvalid:i,onChange:o,onSelect:c,selectedExternalTeamId:d}=e;if(!a||!n)return null;var p,u=Object(l.c)(a),h=Object(l.j)(a);Object(Mt.a)(h)?Object(Mt.a)(u)||(p=u):p=h;var m=Object(Mt.a)(h),b=Object(Mt.a)(u);return s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"p-composer_page__destination_select_icon"},oi.t("To:")),s.a.createElement(zs.c,{className:"p-composer_page__destination_select",classPrefix:"p-composer_page__destination",focusOnMount:!0,inputRef:r,isInvalid:i,maxHeight:130,onKeyDown:(e,t)=>{var{hasActiveRowIndex:a}=t;"Enter"!==e.key||a||Object(Mt.a)(p)||(e.preventDefault(),c())},onSelectedItemsChange:e=>{var a=Object(xt.a)(e,"value");t(Js({ids:a})).then(e=>{var t=Object(l.a)(e);o(t)})},optionsRowHeight:32,placeholderText:oi.t("Type the name of a person or channel"),processOptions:e=>Promise.resolve(e.map(e=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(a),!0).forEach(function(t){Object(At.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ii(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({},e,{isDisabled:$s(e,{selectedExternalTeamId:d})}))),renderOption:(e,t)=>s.a.createElement(si,{entity:e.entity,featureComposeFlow:n,id:e.value,isActive:t.isActive,isDisabled:e.isDisabled}),searcherOptions:{allowEmptyQuery:!0,entities:{channels:m&&{includeExternallyShared:!0,includeFromAnotherTeam:!0,includePublic:!0,includePrivate:!0,includeMpims:b,includeArchived:!1,onlyVisibleMpims:!0},members:b&&{includeSelf:Object(Mt.a)(h),includeSlackbot:!0,includeBots:!0,includeWorkflows:!1,includeExternal:!0,onlyLocalTeam:!1,onlyAdmins:!1,includeGuests:!0},userGroups:!1}},selectId:"composer_page__destination",selectedOptions:Object(xt.a)(p,e=>({label:e,value:e})),width:"100%"}))}li.defaultProps=ci;var di=Object(m.b)(function(e,t){var{draft:a}=t,n=Object(l.j)(a).map(t=>Object(qe.d)(e,t)),r=Object(ka.a)(n,e=>Object(le.tb)(e));return{featureComposeFlow:Object(Or.g)(e),isInvalid:Zs(e,a),selectedExternalTeamId:Object(le.P)(r)}})(li),pi=s.a.forwardRef((e,t)=>s.a.createElement(di,Object(P.a)({},e,{forwardedRef:t}))),ui=a("hCvz"),hi={featureComposeFlow:!1,destinationNames:void 0};function mi(e){var{destinationNames:t,featureComposeFlow:a}=e;if(!a)return null;var n=Object(xt.a)(t,e=>e||s.a.createElement(ui.b,{size:ui.a.SMALL}));return s.a.createElement("span",{className:"p-composer_page__destination_recipients"},Object(b.k)(n,{noConj:!0,react:!0}))}mi.defaultProps=hi;var bi=Object(m.b)(function(e,t){var{draft:a}=t;return{featureComposeFlow:Object(Or.g)(e),destinationNames:Object(l.g)(e,a)}})(mi);bi.propTypes={draft:Lt.default.object.isRequired};var _i=bi,gi=new b.b("drafts");function fi(e){var{draft:t,featureComposeFlow:a,isInvalid:n}=e;return a?s.a.createElement("div",{className:h()("p-composer_page__destination_text",{"p-composer_page__destination_text--invalid":n})},gi.rt("To: {names}",{names:s.a.createElement(_i,{draft:t})})):null}fi.defaultProps={featureComposeFlow:!1,isInvalid:!1};var vi=Object(m.b)(function(e,t){var{draft:a}=t;return{featureComposeFlow:Object(Or.g)(e),isInvalid:Zs(e,a)}})(fi),Oi={featureComposeFlow:!1,forwardedRef:void 0,isFocused:!1,onChange:U.a,onFocus:U.a,onSelect:U.a};function yi(e){var{draft:t,featureComposeFlow:a,forwardedRef:n,isFocused:r,onChange:i,onFocus:o,onSelect:c}=e;return s.a.createElement("div",{className:h()("p-composer_page__subheader",{"p-composer_page__subheader--focused":r})},r?s.a.createElement("div",{className:"p-composer_page__destination_input"},s.a.createElement(pi,{draft:t,onChange:i,onSelect:c,ref:n})):s.a.createElement(xs.a,{className:"p-composer_page__destination_recipients_wrapper",onClick:o},s.a.createElement(vi,{draft:t})),s.a.createElement(Vs,{draft:t,featureComposeFlow:a}))}yi.defaultProps=Oi;var Ci=Object(m.b)(function(e){return{featureComposeFlow:Object(Or.g)(e)}})(yi),ji=s.a.forwardRef((e,t)=>s.a.createElement(Ci,Object(P.a)({},e,{forwardedRef:t}))),Ei=a("yIs4"),ki=a("ns4K"),Si=a("9oTK"),Ii=a("mM05"),wi=a.n(Ii),Ti=a("RoYr"),Ni=a("AzV5"),Pi=a("N0/W"),Ai=a("RW8i"),Mi=a("K2Qr"),xi=a("eCgt"),Ri=Object(on.b)("Sends a composer message",function(){var e=Object(Si.coroutine)(function*(e,t){var{draft:a,fromKeyboardShortcut:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Hs(t(),a))return Promise.reject(new Error("Composer message is not sendable. This may be due to a missing destination, missing text, or posting restrictions"));var r,s=Object(me.a)(t()),o=Object(na.a)({getState:t,label:"COMPOSER"}),c=Object(g.a)({getState:t}),d=Object(l.c)(a),p=Object(l.j)(a),u=Object(l.d)(a),h=Object(l.k)(a);if(Object(Mt.a)(p)){r=d[0];var m=yield Promise.resolve(e(Object(Mi.g)({channelId:r})));m&&m.promise&&(yield m.promise)}else{var b;if(1===p.length)b=p;else{var _=Object(i.d)(t());b=Object(Ma.a)(p,_)}r=yield e(Object(st.startMpimByMemberIds)({memberIds:b,shouldNavigateToChannel:!1})).then(e=>e.id)}o.info("Preparing to send a composer message to ".concat(r)),c.track(y.EventId.COMPOSE_FLOW,{draft_id:u,contexts:{ui_context:{action:n?y.UiAction.KEYDOWN:y.UiAction.CLICK,step:y.UiStep.COMPOSE_FLOW_SEND}}});var f=Object(be.a)({contents:h});function v(){return O.apply(this,arguments)}function O(){return(O=Object(Si.coroutine)(function*(){var n;return yield e(Object(ue.a)({channelId:r})),Object(l.m)(t(),a)?(s&&(n=e(Object(Ni.a)({msgOps:h,channelId:r}))),e(Object(Pi.p)({fileIds:Object(l.h)(a),channelId:r,msgText:f,blocks:n,reason:"send_composer_message"})).then(C)):e(Object(xi.a)({channelId:r,text:f,delta:s?new wi.a(h):null})).then(C)})).apply(this,arguments)}function C(){o.info("Composer message successfuly sent. Removing the draft (".concat(u,")")),e(Object(es.a)({ids:[u]}))}var j=Object(Ti.a)({contents:h});return Object(_e.Xb)(t(),r,j)?(e(Object(Ai.a)({channelId:r,keywordsInUse:j,onSend:()=>v()})),Promise.reject(new Error("Shouty rooster in effect"))):v()});return function(t,a){return e.apply(this,arguments)}}());Ri.meta={name:"sendComposerMessage",key:"actionsSendMessageSendComposerMessageSendComposerMessage",description:"Sends a composer message"},Ri.propTypes={draft:Lt.default.object.isRequired};var Di=a("qafc"),Fi=a("CvCA");function Li(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ui(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Li(Object(a),!0).forEach(function(t){Object(At.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Li(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Bi=new b.b("drafts"),Hi={destinationNames:void 0,dispatch:U.a,featureComposeFlow:!1,featureWysiwygComposer:!1,isDraftValid:!1,isExpanded:!1,isFocused:!1,isSendButtonEnabledPref:!1,onChange:U.a,onExpand:U.a,onFocus:U.a};function Wi(e){var{destinationNames:t,dispatch:a,draft:n,featureComposeFlow:i,featureWysiwygComposer:o,isDraftValid:c,isExpanded:d,isFocused:p,isSendButtonEnabledPref:u,onChange:h,onExpand:m,onFocus:_}=e,g=Object(us.a)(),[f,v]=Object(r.useState)(""),[O,y]=Object(r.useState)(!1),[C,j]=Object(r.useState)(!1),E=Object(r.useRef)(),k=()=>E.current&&E.current.getWrappedInstance?E.current.getWrappedInstance():E.current;Object(r.useEffect)(()=>{var e=k();e&&p&&e.focus()},[p]);var S=Object(l.d)(n);if(Object(ms.a)(()=>{j(!1);var e=k();if(e){var t=Object(l.e)(n);Object(Ei.a)(t)?e.setCursor(t):e.setCursorAtEnd()}},[S]),!i)return null;var I=Object(l.c)(n)||[],w=Object(Mt.a)(t)?Bi.t("Start a new message"):Bi.t("Message {names}",{names:Object(b.k)(t,{noConj:!0}).join("")}),T=d||u;return s.a.createElement(s.a.Fragment,null,s.a.createElement(De.c,{autocompleteProps:{completeOnCommands:!1,position:d?"bottom":"top"},channelId:I[0],className:"p-composer_page__message_input",composerDraft:n,draftDelay:10,enableComposerButton:o,enableEmojiButton:!0,enableFileButton:!0,enableMentionButton:!0,enableSendButton:T,enableExpandButton:!0,enableSnippetCreation:!1,focusOnPaste:!0,isComposerPage:!0,isExpanded:d,isSendingDisabled:!c||C,maxLength:o?ra.C:ra.B,onDraftUpdate:h,onExpand:m,onFocus:_,onSelectionChange:()=>{var e=k();if(e){var t=e.getFormat(),a=!(!t||!t["code-block"]);y(a)}},onSendError:e=>{var{reason:t}=e;j(!1),"send_disabled"===t&&(Object(l.l)(n)||a(Object(ki.c)({element:s.a.createElement(Di.b,null,Bi.t("Select a channel or person to send message"))})))},onTextChange:e=>v(e),placeholder:w,ref:E,sendMessage:function(){var{fromKeyboardShortcut:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!C){j(!0);var t=k().getContents().contents;a(Ri({draft:Ui({},n,{ops:t}),fromKeyboardShortcut:e})).catch(e=>{g.error("COMPOSER","Failed to send message",e),j(!1)})}},useSendButton:T}),s.a.createElement(Fi.a,{cursorInCodeBlock:O,textLength:f?f.length:0,useSendButton:T}))}Wi.defaultProps=Hi;var qi=Object(m.b)(function(e,t){var{draft:a}=t;return{destinationNames:Object(l.g)(e,a),featureWysiwygComposer:Object(me.a)(e),featureComposeFlow:Object(Or.g)(e),isDraftValid:Hs(e,a),isSendButtonEnabledPref:Object(ia.k)(e,"msg_input_send_btn")}})(Wi),Gi=a("bPB8"),Ki=a("ksEP"),Vi=a("8Nus"),zi=a("yACA"),Yi=a("/SKd"),Qi=a("fQu5"),Xi=a("mZe+"),Ji=a("UF3u"),Zi={dispatch:U.a,featureComposeFlow:!1,pendingFiles:[],draftFiles:[]};function $i(e){var{dispatch:t,draft:a,featureComposeFlow:n,pendingFiles:r,draftFiles:i}=e,o=Object(us.a)();if(!n)return null;var c=Object(l.d)(a),d=i.filter(e=>!r.find(t=>t.persistedFileId===e.persistedFileId)),p=[...r,...d];return p.length?s.a.createElement("div",null,s.a.createElement(Xi.a,{files:p,isEagerUpload:!0,onFilesSelected:e=>{o.info("COMPOSER","Preparing to upload ".concat(e.length," files"));var n=ra.z-Object(l.h)(a).length;t(Object(Ki.a)({draftId:c,files:e.slice(0,n)}))},onRemoveFile:function(){var{pendingFileId:e,persistedFileId:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(Object(Vi.b)({draftId:c,pendingFileId:e,persistedFileId:a,shouldUpdateDraft:!0}))}})):null}$i.defaultProps=Zi;var eo=Object(m.b)((e,t)=>{var{draft:a}=t,n=Object(l.d)(a),r=Object(zi.a)(e,{draftId:n}),s=Object(Gi.a)(Object(xt.a)(r,t=>Object(Yi.a)(e,{pendingFileId:t}))),i=a.files.map(t=>Object(Qi.a)(e,t));return{pendingFiles:s,featureComposeFlow:Object(Or.g)(e),draftFiles:i}},null,null,{areStatePropsEqual:(e,t)=>Object(Ji.a)(e,t,3)})($i),to=a("tqVr"),ao=a("hwN2"),no=new b.b("drafts"),ro={draft:Lt.default.object,featureComposeFlow:Lt.default.bool,isSaved:Lt.default.bool,isSaving:Lt.default.bool},so={draft:void 0,featureComposeFlow:!1,isSaved:!1,isSaving:!1};function io(e){var{draft:t,featureComposeFlow:a,isSaved:n,isSaving:r}=e;if(!a)return null;if(r)return no.t("Saving message\u2026");if(n)return no.t("Draft saved");var s=Object(l.i)(t),i=Object(l.f)(t);if(s&&s!==i){var o=s/1e3,c=Object(rn.a)(o)?Object(ao.a)(o):Object(to.a)(o);return no.rt("Edited {lastEdited}",{lastEdited:c})}return null}io.propTypes=ro,io.defaultProps=so;var oo=io;a("oV5z");function co(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function lo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?co(Object(a),!0).forEach(function(t){Object(At.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):co(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var po={contextChannelId:void 0,dispatch:U.a,draft:{},featureComposeFlow:!1,isExpanded:!1};function uo(e){var{contextChannelId:t,dispatch:a,draft:n,featureComposeFlow:i,isExpanded:o}=e,[c,d]=Object(r.useState)(),p=Object(r.useRef)(),u=Object(us.a)(),m=Object(hs.a)(),b=Object(l.d)(n);Object(ms.a)(()=>{Object(l.l)(n)?d("body"):(d("dest"),p.current&&p.current.focus())},[b]);var _=Object(l.c)(n),g=Object(l.j)(n),f=Object(fr.a)(_)+Object(fr.a)(g);Object(r.useEffect)(()=>{m.track(y.EventId.COMPOSE_FLOW,{draft_id:b,draft_num_destinations:f,contexts:{ui_context:{step:y.UiStep.COMPOSE_FLOW_SET_DESTINATION}}})},[m,b,f]);var[v,O]=Object(ps.a)(!1,1500),[C,j]=Object(ps.a)(!1,3e3);if(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.a,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,n=Object(us.a)();e||n.warn("USE_EVENT_LISTENER",'Missing required "eventName"');var s=Object(r.useRef)();Object(r.useEffect)(()=>{s.current=t},[t]),Object(r.useEffect)(()=>{var t=e=>s.current(e);return a.addEventListener(e,t),()=>{a.removeEventListener(e,t)}},[e,a])}("keydown",e=>{"Escape"===e.key&&(Object(l.r)(n)&&a(Object(es.a)({ids:[b]})),m.track(y.EventId.COMPOSE_FLOW,{draft_id:b,draft_is_empty:Object(l.r)(n),contexts:{ui_context:{action:y.UiAction.KEYDOWN,step:y.UiStep.COMPOSE_FLOW_CLOSE}}}))}),!i)return null;if(Object(Mt.a)(n))return a(ls({reason:"composer_page_empty"})),null;function E(e){u.info("COMPOSER","Saving draft (id:".concat(b,")")),a(Object(es.f)(e)),O(!0),j(!0)}var k=t&&!o,S=document.getElementById("p-composer_page__header_subtitle");return s.a.createElement("div",{className:h()("p-composer_page",{"p-composer_page--noncontextual":!k,"p-composer_page--expanded":o})},s.a.createElement(ji,{draft:n,isFocused:!Object(l.l)(n)||"dest"===c,onChange:e=>E(lo({},n,{destinations:e})),onFocus:()=>d("dest"),onSelect:()=>d("body"),ref:p}),!o&&s.a.createElement("div",{className:"p-composer_page__body"},s.a.createElement(Ms,{channelId:t,draft:n,key:t,viewId:"composer_context"})),s.a.createElement(ds.a,null,e=>{var{height:t,measureRef:r}=e;return s.a.createElement("div",{className:"p-composer_page__footer",ref:r},s.a.createElement("div",{className:"p-composer_page__message_input_wrapper",style:{height:o?t:void 0}},s.a.createElement(qi,{draft:n,isExpanded:o,isFocused:"body"===c,onChange:e=>{var{ops:t,range:a={}}=e;return E(lo({},n,{ops:t,cursor_index:a.index}))},onExpand:e=>a(Object(ts.b)({draftId:b,isExpanded:e})),onFocus:()=>d("body")}),s.a.createElement(eo,{draft:n})))}),S&&$r.a.createPortal(s.a.createElement(oo,{draft:n,featureComposeFlow:i,isSaving:v,isSaved:C}),S))}uo.defaultProps=po;var ho=Object(m.b)(e=>{var t=Object(rs.a)(e),a=Object(Or.d)(e,t);return{contextChannelId:bs(e,a),draft:a,featureComposeFlow:Object(Or.g)(e),isExpanded:ns(e,{draftId:t})}})(uo),mo=a("ukTK"),bo=a("OYPW"),_o=a("rsVu"),go=a("hhak"),fo=a("j1Cd"),vo=a("4RH7"),Oo=a("A+cF"),yo=a("Ff2n");function Co(e,t){return e?"".concat(e,"__").concat(t):t}var jo=s.a.createContext({setIsMenuOpen:U.a}),Eo=(a("3Dhv"),{className:void 0,forwardedRef:void 0,tooltip:void 0});function ko(e){var{className:t,forwardedRef:a,icon:n,tooltip:i}=e,o=Object(yo.a)(e,["className","forwardedRef","icon","tooltip"]),{dataQaPrefix:c}=Object(r.useContext)(jo),l=s.a.createElement(hn.a,Object(P.a)({className:h()(t,"c-card_container__action"),"data-qa":Co(c,"card_action--".concat(n)),icon:n,ref:a,size:"small"},o));return i?s.a.createElement(ot.c,{tip:i},l):l}ko.defaultProps=Eo;var So=s.a.forwardRef((e,t)=>s.a.createElement(ko,Object(P.a)({forwardedRef:t},e))),Io=a("MREy"),wo=new b.b("message"),To={onClose:U.a,onOpen:U.a,position:"top-right"};function No(e){var{onClose:t,onOpen:a,position:n}=e,i=Object(yo.a)(e,["onClose","onOpen","position"]),{dataQaPrefix:o,onMenuClose:c,onMenuOpen:l}=Object(r.useContext)(jo);return s.a.createElement(Io.e,Object(P.a)({"data-qa":Co(o,"card_action_overflow"),onClose:function(){c(),t(...arguments)},onOpen:function(){l(),a(...arguments)},position:n},i),s.a.createElement(So,{icon:"vertical-ellipsis",tooltip:wo.t("More actions")}))}No.defaultProps=To;var Po=function(e){var{children:t,position:a}=e,{dataQaPrefix:n,isFocused:i,isHovered:o,isMenuOpen:c}=Object(r.useContext)(jo),l=i||o||c;return s.a.createElement("div",{className:h()("c-card_container__actions","c-card_container__actions--position_".concat(a),{"c-card_container__actions--visible":l}),"data-qa":Co(n,"card_actions"),"data-qa-position":a,"data-qa-visible":l},t)},Ao={className:void 0,dataQaPrefix:void 0,elevation:0,isFocused:!1,isHovered:!1};function Mo(e){var{children:t,className:a,dataQaPrefix:n,elevation:i,isFocused:o,isHovered:c,size:l}=e,d=Object(yo.a)(e,["children","className","dataQaPrefix","elevation","isFocused","isHovered","size"]),[p,u]=Object(r.useState)(!1),[m,b]=Object(r.useState)(!1),[_,g]=Object(r.useState)(!1),f=Object(r.useMemo)(()=>({dataQaPrefix:n,isFocused:o||m,isHovered:c||_,isMenuOpen:p,onMenuClose:()=>{u(!1),b(!1),g(!1)},onMenuOpen:()=>{u(!0)}}),[n,o,m,c,_,p]);return s.a.createElement("div",Object(P.a)({className:h()(a,"c-card_container","c-card_container--elevation_".concat(i),{["c-card_container--size_".concat(l)]:l}),"data-qa":Co(n,"card"),"data-qa-elevation":i,"data-qa-size":l,onBlur:()=>b(!1),onFocus:()=>b(!0),onMouseOut:()=>g(!1),onMouseOver:()=>g(!0)},d),s.a.createElement(jo.Provider,{value:f},t))}Mo.defaultProps=Ao;var xo=Mo,Ro=a("YaVv"),Do=a("forh"),Fo={draftBlocks:void 0};function Lo(e){var{draft:t,draftBlocks:a}=e;return Object(Mt.a)(a)?null:s.a.createElement(Do.a,{blocks:a.blocks,blocksContainerContext:vn.a.draft,containerId:Object(l.d)(t),disableHighlights:!0})}Lo.defaultProps=Fo;var Uo=Object(m.b)(function(e,t){var{draft:a}=t,n=new wi.a(a.ops);return{draftBlocks:Object(Ro.a)(e,n)}})(Lo),Bo=new b.b("drafts"),Ho={dispatch:U.a,draftTeamId:void 0,do24hrTime:!1,featureComposeFlow:!1,hasFocus:!1,hasFocusWithin:!1,replyUsers:void 0,replyUsersCount:void 0};function Wo(e){var{dispatch:t,do24hrTime:a,draft:n,draftTeamId:r,featureComposeFlow:i,hasFocus:o,hasFocusWithin:c,replyUsers:d,replyUsersCount:p}=e;if(!i)return null;function u(e){if(e.preventDefault(),e.stopPropagation(),Object(l.p)(n)){var a=Object(l.d)(n);t(Object(vr.a)({draftId:a}))}else{var{channelId:s,threadTs:i}=Object(l.b)(n)||{};t(i?Object(go.a)({channelId:s,teamId:r,threadTs:i}):Object(jt.a)({id:s,teamId:r}))}}var m=Object(l.i)(n),b=m/1e3;return s.a.createElement(xo,{className:h()("p-drafts_page__draft",{"p-drafts_page__draft--focused":o||c}),isFocused:o,onClick:u,role:"button",size:"medium",tabIndex:"-1"},s.a.createElement(Oo.d,{text:s.a.createElement("div",{className:"p-drafts_page__draft_header"},Object(l.l)(n)?s.a.createElement(vi,{draft:n}):Bo.t("No destination"),s.a.createElement("div",{className:"p-drafts_page__draft_meta"},m&&s.a.createElement("span",{className:"p-drafts_page__draft_timestamp"},Bo.t("{date} at {time}",{date:Object(to.a)(b,{shortenMonth:!0}),time:Object(_o.a)(b,{do24hrTime:a})})),s.a.createElement("div",{className:"p-drafts_page__draft_badge p-drafts_page__draft_badge--text"},Bo.t("Draft")),!Object(l.p)(n)&&s.a.createElement("div",{className:"p-drafts_page__draft_badge p-drafts_page__draft_badge--icon"},s.a.createElement(nt.b,{size:"inherit",type:"pencil"})))),subtext:s.a.createElement(s.a.Fragment,null,!Object(Mt.a)(d)&&s.a.createElement(vo.a,{className:"p-drafts_page__draft_thread_participants",replyUsers:d,replyUsersCount:p}),Object(l.n)(n)&&s.a.createElement("div",{className:"p-drafts_page__draft_body"},s.a.createElement(Uo,{draft:n}))),size:"medium"}),s.a.createElement(Po,{position:"floating"},s.a.createElement(So,{icon:"pencil",onClick:u,tooltip:Bo.t("Edit draft")}),s.a.createElement(So,{icon:"trash",onClick:function(e){if(e.preventDefault(),e.stopPropagation(),Object(l.p)(n)){var a=Object(l.d)(n);t(Object(fo.b)({draftId:a}))}else{var{channelId:r,threadTs:s}=Object(l.b)(n)||{};t(Object(fo.a)({channelId:r,threadTs:s}))}},tooltip:Bo.t("Delete draft")})))}Wo.defaultProps=Ho;var qo=Object(m.b)(function(e,t){var a,n,r,{draftId:s}=t,i=Object(Or.d)(e,s),{channelId:o,threadTs:c}=Object(l.b)(i)||{},d=Object(w.e)(e,o);if(Object(_e.cb)(d)&&(a=Object(_e.Zb)(e,d)),!Object(l.p)(i)){var p=Object(Bt.a)(e,o,c);n=Object(an.T)(p),r=Object(an.U)(p)}return{do24hrTime:Object(ia.k)(e,"time24"),draft:i,draftTeamId:a,featureComposeFlow:Object(Or.g)(e),replyUsers:n,replyUsersCount:r}})(Wo),Go=new b.b("drafts"),Ko={drafts:void 0,featureComposeFlow:!1};function Vo(e){var{drafts:t,featureComposeFlow:a}=e,n=Object(bo.a)(()=>{var e=new mo.a({DEFAULT_HEIGHT:80});return new Ga.a({heightCache:e})});if(!a)return null;var r=t.map(e=>Object(l.d)(e));function i(e){var{key:t}=e;return Object(ja.a)(r,t)}function o(e,t){var{hasFocus:a,hasFocusWithin:n,isHovered:i}=t,o=r[e];return s.a.createElement(qo,{draftId:o,hasFocus:a,hasFocusWithin:n,isHovered:i})}return s.a.createElement(Ia.a,null,e=>{var{width:t,height:a}=e;return s.a.createElement(js.a,{animateOnScroll:!1,height:a,isFocusableItem:i,"aria-label":Go.t("Drafts"),keys:r,layout:n,rowRenderer:o,width:t})})}Vo.defaultProps=Ko;var zo=Object(m.b)(function(e){return{featureComposeFlow:Object(Or.g)(e)}})(Vo),Yo=(a("/UDf"),{dispatch:U.a,visibleUnifiedDrafts:void 0});function Qo(e){var{visibleUnifiedDrafts:t,dispatch:a,showDraftsPageSidebar:n}=e;if(Object(Mt.a)(t)&&!n)return a(ls({reason:"drafts_page_empty"})),null;var r=Object(l.t)(t);return s.a.createElement("div",{className:"p-drafts_page"},s.a.createElement(zo,{drafts:r}))}Qo.defaultProps=Yo;var Xo=Object(m.b)(function(e){return{visibleUnifiedDrafts:Object(d.a)(e,{includeAllTeams:!0}),showDraftsPageSidebar:Object(Or.j)(e)}})(Qo),Jo=a("Cvbp"),Zo=a("cErB"),$o=a("zbZx"),ec=a("N1Yt"),tc=a("2WV3"),ac=a("kAFe"),nc=a("+Lv6"),rc=a("AgpX"),sc=a("iB/r"),ic=a("lek6"),oc=a("hW7Y"),cc={message:void 0,isInMutedChannel:!1};class inbox_item_InboxItem extends r.PureComponent{constructor(e){super(e),Object(Ft.a)(this,["onClickItem","onClickArchive","onClickMarkAsRead"]),this.state={focused:!1}}onClickItem(){var{item:e,isRead:t,message:a}=this.props,{focused:n}=this.state;t||n||this.props.markItemAsRead(e),a&&this.setState(()=>({focused:!n}))}onClickArchive(e){var{item:t,isArchived:a}=this.props;e.preventDefault(),e.stopPropagation(),a?this.props.unarchiveItem({id:"reminder"===t.type?t.reminderId:t.id,type:t.type}):this.props.archiveItem({id:"reminder"===t.type?t.reminderId:t.id,type:t.type,subtype:t.subtype||null,channelId:t.channelId||null})}onClickMarkAsRead(e){var{item:t,isRead:a}=this.props;e.preventDefault(),e.stopPropagation(),a?this.props.markItemAsUnread(t):this.props.markItemAsRead(t)}renderSharedActions(){var{isArchived:e,isRead:t}=this.props;return s.a.createElement(r.Fragment,null,s.a.createElement(oc.c,{tip:t?"Mark unread":"Mark as read",delay:0},s.a.createElement(sc.a,{icon:"emoji-objects",className:"p-inbox__item_actions--mark-as-read",onClick:this.onClickMarkAsRead})),s.a.createElement(oc.c,{tip:e?"Unarchive":"Archive",delay:0},s.a.createElement(sc.a,{icon:"circle-checkbox-checked-o",className:"p-inbox__item_actions--archive",onClick:this.onClickArchive})))}renderTruncatedMessage(){var{message:e}=this.props,t=e;return s.a.createElement(r.Fragment,null,s.a.createElement("span",{className:"p-inbox__item_sender"},s.a.createElement(Se.a,{msg:t})),s.a.createElement("span",{className:"p-inbox__item_content"},s.a.createElement(ec.a,{lines:1},Object(an.mb)(t)?s.a.createElement(tc.a,{richTextBlock:t.blocks[0]}):s.a.createElement(Ie.a,{msg:t}))))}renderMessage(){var{item:e,message:t,includeActions:a}=this.props,n=t,r=s.a.createElement(je.a,{msg:n},s.a.createElement(Ee.a,{light:s.a.createElement(ke.a,{msg:n})},s.a.createElement(Se.a,{msg:n}),"\xa0\xa0",s.a.createElement(Pe.a,{msg:n,clickable:!0,full:!0}),s.a.createElement("br",null),s.a.createElement(Ie.a,{msg:n}),s.a.createElement(we.a,{msg:n,blocksContainerContext:vn.a.all_unreads}),s.a.createElement(Ne.b,{msg:n}),s.a.createElement(On.a,{msg:n}),s.a.createElement(Cn.a,{msg:n}),s.a.createElement(En.a,{msg:n,className:"p-unreads_view__thread_replies"}),s.a.createElement(jn.a,{msg:n}))),i=s.a.createElement(In.a,null,s.a.createElement(wn.a,{msg:n,showComment:!0,showShare:!0,messageContainerType:ra.I.UNREAD_VIEW,position:"above"},r)),o=a?i:r;return s.a.createElement("div",{className:"p-inbox__item p-inbox__item--expanded"},s.a.createElement(T.c,{className:"p-inbox__item_header",onClick:this.onClickItem},s.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),s.a.createElement("span",{className:"p-inbox__item_source"},s.a.createElement(ua.a,{onClick:()=>this.props.setPrimaryView({id:e.channelId})},s.a.createElement(un.a,{channelId:e.channelId}))),s.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())),s.a.createElement("div",{className:"p-inbox__item_message"},o))}renderIconWithTooltip(){var e,t,{item:a}=this.props;return"mention"===a.type?(e="comment-alt",t="You were mentioned",a.subtype&&"cursor_mark"===a.subtype?(e="mark_unread",t="You marked this channel unread"):a.subtype&&"dm"===a.subtype&&(e="user",t="You received this direct message")):"star"===a.type?(e="star-o",t="You starred this item"):"reminder"===a.type&&(e="check-list",t="You set this reminder"),s.a.createElement(oc.c,{tip:t},s.a.createElement(nt.b,{type:e}))}renderMention(){var{item:e,isArchived:t,isRead:a,isInMutedChannel:n,message:i}=this.props;return!i||n?null:s.a.createElement(r.Fragment,null,this.state.focused?this.renderMessage():s.a.createElement(T.c,{className:h()("p-inbox__item",{"p-inbox__item--archived":t,"p-inbox__item--read":a}),onClick:this.onClickItem},s.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),s.a.createElement(oc.c,{tip:s.a.createElement(un.a,{channelId:e.channelId,className:"normal_wrap"})},s.a.createElement("span",{className:"p-inbox__item_source"},s.a.createElement(un.a,{channelId:e.channelId}))),this.renderTruncatedMessage(),s.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())))}renderStarredItem(){var{item:e,isArchived:t,isRead:a,message:n}=this.props;return n?s.a.createElement(r.Fragment,null,this.state.focused?this.renderMessage():s.a.createElement(T.c,{className:h()("p-inbox__item",{"p-inbox__item--archived":t,"p-inbox__item--read":a}),onClick:this.onClickItem},s.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),s.a.createElement(oc.c,{tip:s.a.createElement(un.a,{channelId:e.channelId,className:"normal_wrap"})},s.a.createElement("span",{className:"p-inbox__item_source"},s.a.createElement(un.a,{channelId:e.channelId}))),this.renderTruncatedMessage(),s.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions()))):null}renderReminder(){var{item:e,isArchived:t,isRead:a,message:n}=this.props,i=null,o=null;return n?i=n:o=Object(Zo.q)(e.text)?s.a.createElement(rc.a,{href:e.text}):s.a.createElement(ic.a,{text:e.text}),s.a.createElement(r.Fragment,null,this.state.focused&&i?this.renderMessage():s.a.createElement(T.c,{className:h()("p-inbox__item",{"p-inbox__item--archived":t,"p-inbox__item--read":a}),onClick:this.onClickItem},s.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),i?s.a.createElement(oc.c,{tip:s.a.createElement(un.a,{channelId:e.channelId,className:"normal_wrap"})},s.a.createElement("span",{className:"p-inbox__item_source"},s.a.createElement(un.a,{channelId:e.channelId}))):s.a.createElement(r.Fragment,null,s.a.createElement("span",{className:"p-inbox__item_source"},"Reminder"),s.a.createElement("span",{className:"p-inbox__item_sender"},"You")),i?this.renderTruncatedMessage():s.a.createElement("span",{className:"p-inbox__item_content"},s.a.createElement(ec.a,{lines:1},o)),s.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())))}render(){var{item:e,visible:t}=this.props;return t?s.a.createElement(nc.b,null,"mention"===e.type&&this.renderMention(),"star"===e.type&&this.renderStarredItem(),"reminder"===e.type&&this.renderReminder()):null}}inbox_item_InboxItem.defaultProps=cc;var lc={archiveItem:function(){return Object(ac.b)(...arguments)},unarchiveItem:function(){return Object(ac.h)(...arguments)},markItemAsRead:function(){return Object(ac.f)(...arguments)},markItemAsUnread:function(){return Object(ac.g)(...arguments)},setPrimaryView:function(){return Object(jt.a)(...arguments)}},dc=Object(m.b)((e,t)=>{var a=t.item,n=Object(Bt.a)(e,a.channelId,a.messageTs),r=Object(w.e)(e,a.channelId),s=Object(B.d)(e).id,i=Object(_e.A)(e,r)||[];return{item:a,message:n,includeActions:!Object($o.d)(e)||Object(_e.jb)(r)||Object(_e.xb)(r)||i.includes(s),isArchived:a.archived,isRead:a.read,isInMutedChannel:r&&Object(ga.c)(e,r.id)}},lc)(inbox_item_InboxItem);a("m2U7");var pc={refreshInbox:Jo.a},uc=Object(m.b)(e=>({items:Object(Gr.c)(e)}),pc)(class inbox_view_InboxView extends r.Component{constructor(e){super(e),Object(Ft.a)(this,["toggleArchives"]),this.state={includeArchives:!1}}componentDidMount(){this.props.refreshInbox()}toggleArchives(){var e=this.state.includeArchives;this.setState(()=>({includeArchives:!e}))}renderDay(e){var{includeArchives:t}=this.state,a=!1,n=Object.values(e).map(e=>(a=a||!!t||!e.archived,s.a.createElement(dc,{key:"reminder"===e.type?"".concat(e.type,"-").concat(e.reminderId):"".concat(e.type,"-").concat(e.id),item:e,visible:!!t||!e.archived})));return a?s.a.createElement(r.Fragment,null,s.a.createElement("h4",null,Object(to.a)(e[0].id)),s.a.createElement("div",{className:"p-inbox__day",key:e[0].id},n)):null}renderItems(){var{items:e}=this.props,t=[],a=e;return Object(tn.a)(a,e=>{t.push(this.renderDay(e))}),t}render(){return s.a.createElement("div",{className:"p-workspace__primary_view_body p-inbox"},s.a.createElement(T.c,{className:"float_right micro",onClick:this.toggleArchives},s.a.createElement(nt.b,{type:"archive",size:"inherit",className:"margin_right_25"}),this.state.includeArchives?"Hide archived items":"Include archived items"),this.renderItems())}});var hc={refreshInbox:Jo.a,markAllAsRead:ac.e,archiveAll:ac.a},mc=Object(m.b)(null,hc)(class inbox_header_InboxHeader extends r.PureComponent{constructor(e){super(e),Object(Ft.a)(this,["onClickRefresh","onClickMarkAllAsRead","onClickArchiveAll"])}onClickRefresh(){this.props.refreshInbox()}onClickMarkAllAsRead(){this.props.markAllAsRead()}onClickArchiveAll(){this.props.archiveAll()}render(){var{className:e}=this.props;return s.a.createElement("div",{className:e},s.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},s.a.createElement("div",{className:"p-classic_nav__channel_header__title p-classic_nav__no_drag"},"Home")),s.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},s.a.createElement(ua.a,{onClick:this.onClickRefresh},"Refresh")," |"," ",s.a.createElement(ua.a,{onClick:this.onClickMarkAllAsRead},"Mark all as read")," |"," ",s.a.createElement(ua.a,{onClick:this.onClickArchiveAll},"Archive all")))}}),bc=a("ANjH"),_c=a("1tsX"),gc=a("QkOX"),fc=a("O5cs"),vc=a("Uibu"),Oc=a("7dYf");function yc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Cc(){var{uiStep:e,uiElement:t,referringEventId:a,additionalPayload:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yc(Object(a),!0).forEach(function(t){Object(At.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yc(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},n,{[y.ClientEventKeys.ui_context]:{[y.UiContextKeys.action]:y.UiAction.CLICK,[y.UiContextKeys.ui_component]:y.UiComponent.APP_LAUNCHER_BANNER,[y.UiContextKeys.step]:e,[y.UiContextKeys.ui_element]:t},[y.ClientEventKeys.referring_event_id]:a})}function jc(e){return e.replace(/-/g,"_")}var Ec=Object(on.b)("Clog App Launcher Banner Impression",(e,t,a)=>{var n=t(),r=Object(g.a)({state:n}),s=Object(fc.q)(n),i=a?jc(a):"";r.track(y.EventId.APP_LAUNCHER,{[y.ClientEventKeys.ui_context]:{[y.UiContextKeys.action]:y.UiAction.IMPRESSION,[y.UiContextKeys.ui_component]:y.UiComponent.APP_LAUNCHER_BANNER,[y.UiContextKeys.step]:i},[y.ClientEventKeys.referring_event_id]:s})});Ec.meta={name:"clogImpression",key:"actionsAppLauncherBannerActionsClogImpression",description:"Clog App Launcher Banner Impression"},Ec.propTypes={bannerKey:Lt.default.string};var kc=Object(on.b)("Handle a click to the App Directory and clog",(e,t,a)=>{var n=t(),r=Object(oa.b)(n),s=Object(B.i)(n,r),i=Object(g.a)({state:n}),o=Object(fc.q)(n),c=Cc({uiStep:a?jc(a):"",uiElement:y.UiElement.LINK_APP_DIRECTORY,referringEventId:o});i.track(y.EventId.APP_LAUNCHER,c),Object(X.P)(s,"/apps")});kc.meta={name:"navigateToAppDirectory",key:"actionsAppLauncherBannerActionsNavigateToAppDirectory",description:"Handle a click to the App Directory and clog"},kc.propTypes={bannerKey:Lt.default.string};var Sc=Object(on.b)("Handle a click to the slack.com/apps/manage and clog",(e,t,a)=>{var n=t(),r=Object(oa.b)(n),s=Object(B.i)(n,r),i=Object(g.a)({state:n}),o=Object(fc.q)(n),c=Cc({uiStep:a?jc(a):"",uiElement:y.UiElement.LINK_MANAGE_APPS,referringEventId:o});i.track(y.EventId.APP_LAUNCHER,c),Object(X.P)(s,"/apps/manage")});Sc.meta={name:"navigateToManageApps",key:"actionsAppLauncherBannerActionsNavigateToManageApps",description:"Handle a click to the slack.com/apps/manage and clog"},Sc.propTypes={bannerKey:Lt.default.string};var Ic=Object(on.b)("Handle a click to the slack.com/pricing and clog",(e,t,a)=>{var n=t(),r=Object(oa.b)(n),s=Object(B.i)(n,r),i=Object(g.a)({state:n}),o=Object(fc.q)(n),c=Cc({uiStep:a?jc(a):"",uiElement:y.UiElement.LINK_PRICING,referringEventId:o});i.track(y.EventId.APP_LAUNCHER,c),Object(X.P)(s,Object(Vr.j)({entryPoint:"app_launcher_banner"}))});Ic.meta={name:"navigateToPricing",key:"actionsAppLauncherBannerActionsNavigateToPricing",description:"Handle a click to the slack.com/pricing and clog"},Ic.propTypes={bannerKey:Lt.default.string};var wc=Object(on.b)("Clog and set dismiss welcome banner pref",(e,t,a)=>{var n=t(),r=Object(g.a)({state:n}),s=Object(fc.q)(n),i=Cc({uiStep:a?jc(a):"",uiElement:y.UiElement.BTN_CLOSE,referringEventId:s});r.track(y.EventId.APP_LAUNCHER,i),e(Object(Oc.f)({pref:"dismissed_app_launcher_welcome",value:!0})),e(Object(qr.q)({isBannerDismissed:!0})),e(Object(qr.f)())});wc.meta={name:"setWelcomeDismissedPref",key:"actionsAppLauncherBannerActionsSetWelcomeDismissedPref",description:"Clog and set dismiss welcome banner pref"},wc.propTypes={bannerKey:Lt.default.string};var Tc=Object(on.b)("Clog and set dismiss limit banner pref",(e,t,a)=>{var n=t(),r=Object(g.a)({state:n}),s=Object(fc.q)(n),i=Cc({uiStep:a?jc(a):"",uiElement:y.UiElement.BTN_CLOSE,referringEventId:s});r.track(y.EventId.APP_LAUNCHER,i),e(Object(Oc.f)({pref:"dismissed_app_launcher_limit",value:!0})),e(Object(qr.q)({isBannerDismissed:!0})),e(Object(qr.f)())});Tc.meta={name:"setLimitDismissedPref",key:"actionsAppLauncherBannerActionsSetLimitDismissedPref",description:"Clog and set dismiss limit banner pref"},Tc.propTypes={bannerKey:Lt.default.string};var Nc=Object(on.b)("Clog and set dismiss limit banner pref and welcome dismissed pref",(e,t,a)=>{var n=t(),r=Object(g.a)({state:n}),s=Object(fc.q)(n),i=Cc({uiStep:a?jc(a):"",uiElement:y.UiElement.BTN_CLOSE,referringEventId:s});r.track(y.EventId.APP_LAUNCHER,i),e(Object(Oc.e)({dismissed_app_launcher_limit:!0,dismissed_app_launcher_welcome:!0})),e(Object(qr.q)({isBannerDismissed:!0})),e(Object(qr.f)())});Nc.meta={name:"setLimitAndWelcomeDismissedPref",key:"actionsAppLauncherBannerActionsSetLimitAndWelcomeDismissedPref",description:"Clog and set dismiss limit banner pref and welcome dismissed pref"},Nc.propTypes={bannerKey:Lt.default.string};var Pc=Object(on.b)("re-activate app limit banner",(e,t,a)=>{var n=t(),r=Object(g.a)({state:n}),s=Object(fc.q)(n),i=Cc({uiStep:a?jc(a):"",uiElement:y.UiElement.BTN_SHOW_ME,referringEventId:s});return r.track(y.EventId.APP_LAUNCHER,i),e(Object(qr.q)({isBannerDismissed:!1})),e(Object(Oc.f)({pref:"dismissed_app_launcher_limit",value:!1})).then(()=>{e(Object(qr.f)())})});Pc.meta={name:"restoreLimitBanner",key:"actionsAppLauncherBannerActionsRestoreLimitBanner",description:"re-activate app limit banner"},Pc.propTypes=null;var Ac=Object(on.b)("re-activate app limit and app welcome banner",(e,t,a)=>{var n=t(),r=Object(g.a)({state:n}),s=Object(fc.q)(n),i=Cc({uiStep:a?jc(a):"",uiElement:y.UiElement.BTN_SHOW_ME,referringEventId:s});return r.track(y.EventId.APP_LAUNCHER,i),e(Object(qr.q)({isBannerDismissed:!1})),e(Object(Oc.e)({dismissed_app_launcher_limit:!1,dismissed_app_launcher_welcome:!1})).then(()=>{e(Object(qr.f)())})});Ac.meta={name:"restoreLimitAndWelcomeBanner",key:"actionsAppLauncherBannerActionsRestoreLimitAndWelcomeBanner",description:"re-activate app limit and app welcome banner"},Ac.propTypes=null;var Mc=new b.b("app_launcher"),xc={restoreLimitBanner:U.a,restoreLimitAndWelcomeBanner:U.a,hasDismissedWelcomeBanner:!1,hasDismissedLimitBanner:!1,scrollToKey:U.a};class app_launcher_persistent_banner_AppsLauncherPersistentBanner extends r.Component{constructor(e){super(e),this.restorePrimaryBanner=this.restorePrimaryBanner.bind(this)}restorePrimaryBanner(){var{hasDismissedWelcomeBanner:e,hasDismissedLimitBanner:t}=this.props,a="";e&&t?(a="free-limit-welcome",this.props.restoreLimitAndWelcomeBanner(a).then(()=>{this.props.scrollToKey(a)})):t&&(a="free-limit",this.props.restoreLimitBanner(a).then(()=>{this.props.scrollToKey(a)}))}render(){return s.a.createElement("div",{className:"padding_left_125 padding_right_125 padding_top_75 padding_bottom_75 align_center caption sk_off_white_bg"},Mc.rt("Upgrade for unlimited apps. <Link>Learn more</Link>",null,e=>{var{key:t,text:a}=e;return s.a.createElement(de.a,{key:t,onClick:this.restorePrimaryBanner},a)}))}}app_launcher_persistent_banner_AppsLauncherPersistentBanner.defaultProps=xc;var Rc=Object(m.b)(e=>({hasDismissedWelcomeBanner:Object(vc.b)(e),hasDismissedLimitBanner:Object(vc.a)(e),isPrimaryBannerDismissed:Object(fc.k)(e)}),e=>Object(bc.b)({restoreLimitBanner:Pc,restoreLimitAndWelcomeBanner:Ac},e))(app_launcher_persistent_banner_AppsLauncherPersistentBanner),Dc=a("3zPy"),Fc=a.n(Dc),Lc=a("h9PG"),Uc=a("IRvZ"),Bc={featureAppLauncher:!1,categoryName:"",teamUrl:"",referringEventId:void 0,isAppLauncherFiltered:!1,selectAppLauncherFilter:U.a,featureAppLauncherFilters:!1},Hc=new b.b("app_launcher");function Wc(e){var{clogger:t,featureAppLauncher:a,categoryName:n,teamUrl:i,resultKey:o,referringEventId:c,isAppLauncherFiltered:l,selectAppLauncherFilter:d,featureAppLauncherFilters:p}=e,u=Object(r.useCallback)(()=>t.track(y.EventId.APP_INDEX_VIEW_APP_DIRECTORY_CLICK,{[y.ClientEventKeys.referring_event_id]:c}),[t,c]),m=Object(r.useCallback)(()=>d(Uc.a),[d]);if(!a)return null;var b=null,_=!1;return o===Uc.c||o===Uc.e?b=s.a.createElement(rc.a,{className:"p-app_launcher__category_header__link",href:"".concat(i,"apps?utm_source=in-prod&utm_medium=inprod-link_app_directory-index-click"),onClick:u,"data-qa":"app_launcher__category_header__app_directory_link"},Hc.t("See all apps in the App Directory")):o===Uc.f&&l&&p&&(_=!0,b=s.a.createElement(ua.a,{className:"p-app_launcher__category_header__clear_filter_link",onClick:m},Hc.t("Clear filter"))),s.a.createElement("div",{className:h()("p-app_launcher__category_header",{"p-app_launcher__category_header--filtered":_}),"data-category_header":"true","data-qa":"app_launcher__category_header_".concat(o),key:o},s.a.createElement("h3",{className:"p-app_launcher__category_header__title"},n),b)}Wc.defaultProps=Bc;var qc=Object(m.b)((e,t)=>{var{result:a={}}=t,n=Object(oa.b)(e),r=Object(B.i)(e,n);return{clogger:Object(g.a)({state:e}),featureAppLauncher:Object(_c.a)(e),categoryName:a.display_name,resultKey:a.key,isAppLauncherFiltered:Object(fc.h)(e)!==Uc.a,teamUrl:Object(X.n)(r),referringEventId:Object(fc.q)(e),featureAppLauncherFilters:Object(i.m)(e,"feature_app_launcher_filters")}},e=>({selectAppLauncherFilter:function(){return e(Object(qr.k)(...arguments))}}))(Wc),Gc=a("MnCE"),Kc=a("V/As"),Vc=a("yywf"),zc=new b.b("app_launcher"),Yc={app:void 0,handleClick:U.a};function Qc(e){var{app:t,handleClick:a,appKey:n}=e,[i,o]=Object(r.useState)(!1),c=Object(r.useCallback)(()=>{o(!0)},[o]),l=Object(r.useCallback)(()=>{a({appKey:n})},[a,n]);if(!t)return null;var d=i?Kc.a:Object(Kc.b)(t,72),p=t.is_installed,u=p?null:s.a.createElement("div",{className:"p-app_launcher__app_card__pseudobutton c-button c-button--medium c-button--outline","data-qa":"app_launcher__app_card__add"},zc.t("Add"));return s.a.createElement(xs.a,{className:"p-app_launcher__app_card",onClick:l,"data-qa":"app_launcher__app_card--".concat(p?"installed":"not_installed"),"data-app-id":t.app_id,role:p?null:"link"},s.a.createElement("div",{className:"p-app_launcher__app_card__container"},s.a.createElement("img",{className:"p-app_launcher__app_card__icon",src:d,alt:"",onError:c}),s.a.createElement("div",null,s.a.createElement("strong",{className:"p-app_launcher__app_card__title",style:{WebkitBoxOrient:"vertical"}},t.name),s.a.createElement("span",{className:"p-app_launcher__app_card__text",style:{WebkitBoxOrient:"vertical"},"aria-label":t.short_description||""},Object(Vc.a)(t.short_description||"",(e,t)=>s.a.createElement("strong",{key:t},e))))),u)}Qc.defaultProps=Yc;var Xc=Object(m.b)((e,t)=>{var{appKey:a}=t;return{app:(Object(fc.c)(e)||{})[a]}},e=>Object(bc.b)({handleClick:qr.d},e))(Qc);function Jc(e){var{chunk:t}=e;return s.a.createElement("div",{className:"p-app_launcher__grid",key:t.key,"data-qa":"app_launcher__result_row"},t.appKeys.map(e=>s.a.createElement(Xc,{appKey:e,key:e})))}Jc.defaultProps={chunk:{appKeys:[]}};var Zc=Object(Gc.a)(Jc),$c=(a("cLBS"),new b.b("app_launcher")),el={children:null,primaryButtonCTA:null,handlePrimaryButtonClick:U.a,secondaryButtonCTA:null,handleSecondaryButtonClick:U.a,imageUrl:null,imageUrl2x:null,postScriptText:null,isFocused:!1};function tl(e){var t,a,n,r,i,{title:o,primaryButtonCTA:c,handlePrimaryButtonClick:l,secondaryButtonCTA:d,children:p,handleClose:u,handleSecondaryButtonClick:m,imageUrl:b,imageUrl2x:_,postScriptText:g,isFocused:f}=e;c&&(t=s.a.createElement(T.d,{className:"p-app_launcher_banner__primary_cta",type:"primary",size:"medium",onClick:l,"data-qa":"app_launcher_banner__primary_cta"},c)),d&&(a=s.a.createElement(T.d,{type:"outline",size:"medium",onClick:m,"data-qa":"app_launcher_banner__secondary_cta"},d)),b&&_&&(i={srcSet:"".concat(b,", ").concat(_," 2x")}),b&&(n=s.a.createElement("img",Object(P.a)({},i,{src:b,className:"p-app_launcher_banner__image",alt:"","data-qa":"app_launcher_banner__image"}))),g&&(r=s.a.createElement("div",{className:"p-app_launcher_banner__post_script"},g));var v=h()("p-app_launcher_banner",{"p-app_launcher_banner--focused":f});return s.a.createElement("section",{className:v,"data-qa":"app_launcher_banner"},s.a.createElement("div",{className:"p-app_launcher_banner__container"},s.a.createElement("div",{className:"p-app_launcher_banner__body"},s.a.createElement("h3",{className:"p-app_launcher_banner__title"},o),p,s.a.createElement("div",{className:"p-app_launcher_banner__ctas"},t,a)),n),r,s.a.createElement(hn.a,{icon:"times","aria-label":$c.t("Close"),className:"p-app_launcher_banner__close",onClick:u,"data-qa":"app_launcher_banner_close"}))}tl.defaultProps=el;var al=tl,nl=new b.b("app_launcher"),rl={featureAppLauncherBanners:!1,bannerKey:"",navigateToAppDirectory:U.a,navigateToManageApps:U.a,navigateToPricing:U.a,setWelcomeDismissedPref:U.a,setLimitDismissedPref:U.a,setLimitAndWelcomeDismissedPref:U.a,clogImpression:U.a,isFocused:!1,showPostScript:!1};class app_launcher_connected_banner_AppLauncherConnectedBanner extends r.Component{constructor(e){super(e),this.closeBannerWithWelcomeDismissedPref=this.closeBannerWithWelcomeDismissedPref.bind(this),this.closeBannerWithLimitDismissedPref=this.closeBannerWithLimitDismissedPref.bind(this),this.closeBannerWithLimitAndWelcomeDismissedPref=this.closeBannerWithLimitAndWelcomeDismissedPref.bind(this),this.handleAppDirectoryClick=this.handleAppDirectoryClick.bind(this),this.handleManageAppsClick=this.handleManageAppsClick.bind(this),this.handlePricingClick=this.handlePricingClick.bind(this)}componentDidMount(){this.props.clogImpression(this.props.bannerKey)}closeBannerWithWelcomeDismissedPref(){this.props.setWelcomeDismissedPref(this.props.bannerKey)}closeBannerWithLimitDismissedPref(){this.props.setLimitDismissedPref(this.props.bannerKey)}closeBannerWithLimitAndWelcomeDismissedPref(){this.props.setLimitAndWelcomeDismissedPref(this.props.bannerKey)}handleAppDirectoryClick(){this.props.navigateToAppDirectory(this.props.bannerKey)}handleManageAppsClick(){this.props.navigateToManageApps(this.props.bannerKey)}handlePricingClick(){this.props.navigateToPricing(this.props.bannerKey)}maybeRenderPostScript(){return this.props.featureAppLauncherBanners&&this.props.showPostScript?nl.rt("<p>Your team is using additional apps that don\u2019t show up on this page.<br></br>Curious about more apps on Slack? <Link>Browse the App Directory</Link></p>",null,e=>{var{tag:t,key:a,text:n}=e;switch(t){case"Link":return s.a.createElement(de.a,{key:a,onClick:this.handleAppDirectoryClick},n);case"br":return s.a.createElement("br",null);default:return s.a.createElement("span",{key:a},n)}}):null}render(){switch(this.props.bannerKey){case Uc.d.FREE_WELCOME:return s.a.createElement(al,{title:nl.t("Bring all your tools into Slack"),primaryButtonCTA:nl.t("Browse App Directory"),handlePrimaryButtonClick:this.handleAppDirectoryClick,imageUrl:"/img/app-launcher/app_launcher_welcome.png",imageUrl2x:"/img/app-launcher/app_launcher_welcome@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},nl.rt("<p>On Slack, apps belong to you and your team. Install once and everyone can use them. Teams on the free version of Slack get a limited number of apps. <Link>Upgrade to a paid plan</Link> to get as many as you want.</p>",null,e=>{var{tag:t,key:a,text:n}=e;switch(t){case"Link":return s.a.createElement(de.a,{key:a,onClick:this.handlePricingClick},n);default:return s.a.createElement("p",{key:a},n)}}));case Uc.d.FREE_LIMIT:return s.a.createElement(al,{title:nl.t("Upgrade for unlimited apps"),primaryButtonCTA:nl.t("See Upgrade Options"),handlePrimaryButtonClick:this.handlePricingClick,secondaryButtonCTA:nl.t("Later"),handleSecondaryButtonClick:this.closeBannerWithLimitDismissedPref,imageUrl:"/img/app-launcher/app_launcher_upgrade.png",imageUrl2x:"/img/app-launcher/app_launcher_upgrade@2x.png",handleClose:this.closeBannerWithLimitDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},nl.rt("<p>Your team\u2019s already using the max you can use with the free version of Slack. Upgrade to a paid plan to add as many apps as you\u2019d like. <Link>Manage apps</Link></p>",null,e=>{var{tag:t,key:a,text:n}=e;switch(t){case"Link":return s.a.createElement(de.a,{key:a,onClick:this.handleManageAppsClick},n);default:return s.a.createElement("p",{key:a},n)}}));case Uc.d.FREE_LIMIT_WELCOME:return s.a.createElement(al,{title:nl.t("Bring all your tools into Slack"),primaryButtonCTA:nl.t("See Upgrade Options"),handlePrimaryButtonClick:this.handlePricingClick,secondaryButtonCTA:nl.t("Later"),handleSecondaryButtonClick:this.closeBannerWithLimitAndWelcomeDismissedPref,imageUrl:"/img/app-launcher/app_launcher_upgrade.png",imageUrl2x:"/img/app-launcher/app_launcher_upgrade@2x.png",handleClose:this.closeBannerWithLimitAndWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},nl.rt("<p>On Slack, apps belong to you and your team. Your team\u2019s already using the max you can use with the free version of Slack. <Link>Manage apps</Link></p>",null,e=>{var{tag:t,key:a,text:n}=e;switch(t){case"Link":return s.a.createElement(de.a,{key:a,onClick:this.handleManageAppsClick},n);default:return s.a.createElement("p",{key:a},n)}}));case Uc.d.PAID_WELCOME:return s.a.createElement(al,{title:nl.t("Bring all your tools into Slack"),primaryButtonCTA:nl.t("Browse App Directory"),handlePrimaryButtonClick:this.handleAppDirectoryClick,imageUrl:"/img/app-launcher/app_launcher_welcome.png",imageUrl2x:"/img/app-launcher/app_launcher_welcome@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},nl.rt("<p>On Slack, apps belong to you and your team. Install once and everyone can use them. They can help you streamline common tasks, sync your status with your calendar, and more.</p>"));case Uc.d.PAID_WELCOME_SMALL_CTA:return s.a.createElement(al,{title:nl.t("Bring all your tools into Slack"),imageUrl:"/img/app-launcher/app_launcher_welcome.png",imageUrl2x:"/img/app-launcher/app_launcher_welcome@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},nl.rt("<p>On Slack, apps belong to you and your team. Install once and everyone can use them. They can help you streamline common tasks, sync your status with your calendar, and more.</p><p>Looking for more apps? <Link>Browse App Directory</Link></p>",null,e=>{var{tag:t,key:a,text:n}=e;switch(t){case"Link":return s.a.createElement(de.a,{key:a,onClick:this.handleAppDirectoryClick},n);default:return s.a.createElement("p",{key:a},n)}}));case Uc.d.PAID_AAA_APP_REQUESTING_OFF:return s.a.createElement(al,{title:nl.t("Bring all your tools into Slack"),imageUrl:"/img/app-launcher/app_launcher_welcome.png",imageUrl2x:"/img/app-launcher/app_launcher_welcome@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},nl.rt("<p>On Slack, apps belong to you and your team. They can help you streamline common tasks, sync your status with your calendar, and more.</p><p>Your admin can install apps for your team to use. <Link>Learn more</Link></p>",{fallbackHash:"cce1379df5391b66f89dd00540bddd61da95d1f6"},e=>{var{tag:t,key:a,text:n}=e;switch(t){case"Link":return s.a.createElement(de.a,{key:a,href:"https://slack.com/help/articles/222386767-manage-apps-for-your-workspace"},n);default:return s.a.createElement("p",{key:a},n)}}));default:return s.a.createElement(r.Fragment,null)}}}app_launcher_connected_banner_AppLauncherConnectedBanner.defaultProps=rl;var sl=Object(m.b)(e=>({featureAppLauncherBanners:Object(i.m)(e,"feature_app_launcher_banners"),showPostScript:Object(vc.g)(e)}),e=>Object(bc.b)({setWelcomeDismissedPref:wc,setLimitDismissedPref:Tc,setLimitAndWelcomeDismissedPref:Nc,navigateToAppDirectory:kc,navigateToManageApps:Sc,navigateToPricing:Ic,clogImpression:Ec},e))(app_launcher_connected_banner_AppLauncherConnectedBanner),il=new b.b("app_launcher");function ol(e){var{featureAppLauncherFilters:t}=e;return t?s.a.createElement("div",{className:"p-app_launcher__filtered_no_results"},il.t("Your team hasn\u2019t installed any apps from this category yet. Some of the most popular ones on Slack are listed below. Give one a try!")):null}ol.defaultProps={featureAppLauncherFilters:!1};var cl=Object(m.b)(e=>({featureAppLauncherFilters:Object(i.m)(e,"feature_app_launcher_filters")}))(ol),ll=new b.b("app_launcher"),dl=Fc()("enter"),pl={featureAppLauncher:!1,nextCursor:void 0,referringEventId:void 0,isBannerDismissed:!1,loadMoreApps:U.a,handleAppLauncherCardClick:U.a,clientTheme:"light",width:0,height:0,seeAAAWhiteListWarning:!1};class app_launcher_search_results_AppLauncherSearchResults extends r.Component{static getDerivedStateFromProps(e,t){for(var{width:a}=e,n=1,r=1;r<=Uc.g;r++)a>=Uc.b*r&&(n=r);return n!==t.numOfColumns?{numOfColumns:n}:null}constructor(e){super(e),this.isPaginating=!1,this.renderRow=this.renderRow.bind(this),this.paginate=this.paginate.bind(this),this.isFocusableItem=this.isFocusableItem.bind(this),this.getCurrentResults=this.getCurrentResults.bind(this),this.handleKeydownOnItem=this.handleKeydownOnItem.bind(this),this.state={numOfColumns:Uc.g},this.listRef=s.a.createRef()}componentDidMount(){this.props.clogger.track(y.EventId.APP_INDEX_OPEN,{[y.ClientEventKeys.referring_event_id]:this.props.referringEventId}),this.props.registerListRef(this.listRef)}getCurrentResults(){return this.props.resultsMap[this.state.numOfColumns]||[]}isFocusableItem(e){var{index:t}=e,{type:a}=this.getCurrentResults()[t]||{};return a===Uc.h.APP_CHUNK||a===Uc.h.CATEGORY||a===Uc.h.EMPTY_STATE||a===Uc.h.APP_LAUNCHER_BANNER&&!this.props.isBannerDismissed}handleKeydownOnItem(e){e.keyCode===dl&&1===this.state.numOfColumns&&this.props.handleAppLauncherCardClick({appKey:e.id})}paginate(){this.shouldPaginate()&&this.loadMoreApps()}shouldPaginate(){return!!this.props.nextCursor&&!!this.props.isShowingDefaultAppCategories}loadMoreApps(){this.isPaginating||(this.isPaginating=!0,this.props.loadMoreApps({isAppLauncher:!0}).then(()=>{this.isPaginating=!1}))}showAAAWhitelistWarning(){return this.props.seeAAAWhiteListWarning?s.a.createElement("span",null,ll.rt("Also, your team admin must approve an app before it can be installed. <Link>Learn more</Link>",null,e=>{var{key:t,text:a}=e;return s.a.createElement(de.a,{href:"https://slack.com/help/articles/222386767-manage-apps-for-your-workspace",key:t},a)})):null}renderRow(e,t){var{hasFocus:a,hasFocusWithin:n}=t,i=this.getCurrentResults()[e];switch(i.type){case Uc.h.LOADING:return s.a.createElement("div",{style:{height:62},key:i.key},s.a.createElement(Oe.a,{size:"jumbo",loadingMessage:ll.t("Loading apps...")}));case Uc.h.CATEGORY:return s.a.createElement(qc,{result:i});case Uc.h.APP_CHUNK:return s.a.createElement(Zc,{chunk:i});case Uc.h.APP_LAUNCHER_BANNER:return s.a.createElement(sl,{listRef:this.listRef,bannerKey:i.key,isFocused:a||n});case Uc.h.FILTER_EMPTY_STATE:return s.a.createElement(cl,null);default:return s.a.createElement(r.Fragment,null)}}render(){var{featureAppLauncher:e,announcerSearchInput:t,isLoading:a,clientTheme:n,keysMap:r,width:i,height:o}=this.props;if(!e)return null;var{numOfColumns:c}=this.state,l=r[c]||[];if(!this.getCurrentResults().length&&t)return a?s.a.createElement(Oe.a,{size:"jumbo",loadingMessage:ll.t("Loading apps...")}):s.a.createElement("section",{key:"no-results",className:"p-app_launcher__no_results","data-qa":"app_launcher__no_results",role:"alert"},s.a.createElement("p",null,ll.rt("Slack couldn\u2019t find any apps matching your search. You may want to try\u2026")),s.a.createElement("ul",null,s.a.createElement("li",null,ll.t("Using different keywords.")),s.a.createElement("li",null,ll.t("Checking for typos."))),this.showAAAWhitelistWarning());var d=h()("p-app_launcher__list_container","p-app_launcher__list_container--".concat(c,"_column"),{"p-app_launcher__list_container--loading":0===l.length,["p-app_launcher__list_container--loading--".concat(n)]:0===l.length&&"light"!==n});return s.a.createElement("div",{className:d,"data-qa":"app_launcher__results_list"},s.a.createElement(js.a,{ref:this.listRef,width:i,height:Math.floor(o),keys:l,rowRenderer:this.renderRow,loadPost:this.paginate,loadAround:this.paginate,isFocusableItem:this.isFocusableItem,onItemClick:this.handleKeydownOnItem,hideHiddenStopTabs:!0}))}}app_launcher_search_results_AppLauncherSearchResults.defaultProps=pl;var ul=Object(m.b)(e=>({clogger:Object(g.a)({state:e}),announcerSearchInput:Object(fc.a)(e),resultsMap:Object(fc.g)(e),keysMap:Object(fc.e)(e),nextCursor:Object(fc.p)(e),isShowingDefaultAppCategories:Object(fc.n)(e),isBannerDismissed:Object(fc.k)(e),featureAppLauncher:Object(_c.a)(e),clientTheme:Object(Gt.c)(e),referringEventId:Object(fc.q)(e),isLoading:Object(fc.m)(e),seeAAAWhiteListWarning:!Object(qe.k)(e)&&Object(Lc.a)(e,"app_whitelist_enabled")}),e=>Object(bc.b)({loadMoreApps:qr.e,handleAppLauncherCardClick:qr.d},e))(app_launcher_search_results_AppLauncherSearchResults),hl=new b.b("app_launcher");var ml=Object(m.b)(e=>({clientTheme:Object(Gt.c)(e),announcerSearchInput:Object(fc.a)(e),isLoading:Object(fc.m)(e),featureAppLauncher:Object(_c.a)(e),keyLength:(Object(fc.e)(e)[1]||[]).length}))(function(e){var{featureAppLauncher:t,announcerSearchInput:a,isLoading:n,keyLength:i,registerListRef:o}=e;if(!t)return null;var c=i>1&&a&&!n?hl.t('App search results for "{searchTerm}" ready. To review results, press the tab key.',{searchTerm:a,fallbackHash:"d63e90397a6b47185b2e0b47d11478fa0dc1a153"}):null;return s.a.createElement(r.Fragment,null,s.a.createElement("span",{"aria-live":"polite",className:"offscreen"},c),s.a.createElement(ds.a,null,e=>{var{width:t,height:a,measureRef:n}=e;return s.a.createElement("div",{className:"p-app_launcher__measure_container","data-qa":"app_launcher__results_container",ref:n},s.a.createElement(ul,{width:t,height:a,registerListRef:o}))}))}),bl=(a("7SIE"),new b.b("app_launcher")),_l={small:120,medium:160,large:200},gl={featureAppLauncherFilters:!1,menuProps:void 0,selectedFilter:void 0,onMenuItemSelected:U.a,fetchAppLauncherFilters:U.a,isFetchingFilters:!1,nonCategoryFilters:[],categoryFilters:[]};function fl(e){var{featureAppLauncherFilters:t,menuProps:a,selectedFilter:n,onMenuItemSelected:i,isFetchingFilters:o,fetchAppLauncherFilters:c,nonCategoryFilters:l,categoryFilters:d}=e;Object(r.useEffect)(()=>{var e=c();return()=>{e&&e.cancel&&e.cancel()}},[c]);var p=Object(r.useCallback)(function(){var{label:e,id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=s.a.createElement(nt.b,{type:"check-small",className:"p-app_launcher_filter_menu--icon"});return s.a.createElement(Io.b,{"data-qa":"app_launcher_filter_menu_item--".concat(t),key:t,onSelected:()=>i(t),icon:n===t?a:null,className:n===t?"p-app_launcher_filter_menu--selected-item":""},e)},[n,i]),u=Object(bo.a)(()=>new Array(5).fill(null).map((e,t)=>s.a.createElement(Io.b,{key:"placeholder-".concat(t),"data-qa":"app_launcher_filter_menu__placeholder_item",disabled:!0},s.a.createElement(ui.b,{size:"random",sizes:_l}))),[]),h=Object(r.useMemo)(()=>o?u:[p({label:t?bl.t("All apps"):"",id:Uc.a}),...l.map(p),s.a.createElement(Io.d,{key:"separator"}),s.a.createElement(Io.c,{key:"category_header",label:t?bl.t("App Directory Categories"):""}),...d.map(p)],[p,d,t,u,l,o]);return t?s.a.createElement(Io.f,Object(P.a)({},a,{"data-qa":"app_launcher_filter_menu"}),h):null}fl.defaultProps=gl;var vl=Object(m.b)(e=>({featureAppLauncherFilters:Object(i.m)(e,"feature_app_launcher_filters"),isFetchingFilters:Object(fc.l)(e),nonCategoryFilters:Object(fc.f)(e),categoryFilters:Object(fc.d)(e)}),e=>Object(bc.b)({fetchAppLauncherFilters:qr.b},e))(fl),Ol=(a("RZqJ"),new b.b("app_launcher")),yl={featureAppLauncherFilters:!1,selectedFilter:Uc.a,selectAppLauncherFilter:U.a};function Cl(e){var{featureAppLauncherFilters:t,selectedFilter:a,selectAppLauncherFilter:n}=e,i=Object(r.useCallback)(e=>s.a.createElement(vl,{onMenuItemSelected:n,selectedFilter:a,menuProps:e}),[a,n]);if(!t)return null;var o=a!==Uc.a,c=o?Ol.t("Filter apps (filter active)"):Ol.t("Filter apps");return s.a.createElement(Io.e,{renderMenu:i,position:"bottom-left",offsetY:8},s.a.createElement(hn.a,{icon:"filters","data-qa":"app_launcher_filter_menu_trigger",className:"p-app_launcher_filter_trigger",showBadge:o,"aria-label":c}))}Cl.defaultProps=yl;var jl=Object(m.b)(e=>({featureAppLauncherFilters:Object(i.m)(e,"feature_app_launcher_filters"),selectedFilter:Object(fc.h)(e)}),e=>Object(bc.b)({selectAppLauncherFilter:qr.k},e))(Cl),El=(a("oFS/"),{featureAppLauncher:!1,teamId:null,fetchDefaultApps:U.a,resetSearch:U.a,userAttentionIsOnChat:!1,composerVisible:!1,removeFromSectionNavigation:U.a,addToSectionNavigation:U.a,shouldShowPersistentLimitBanner:!1,isBannerDismissed:!1});class app_launcher_AppLauncher extends r.Component{constructor(e){super(e),this.searchInputRef=s.a.createRef(),this.focus=this.focus.bind(this),this.registerListRef=this.registerListRef.bind(this),this.scrollAppLauncherResultsToKey=this.scrollAppLauncherResultsToKey.bind(this),this.listRef={}}componentDidMount(){this.props.fetchDefaultApps({isAppLauncher:!0})}componentDidUpdate(e){var t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object($a.a)(t)&&this.props.addToSectionNavigation(),Object(en.a)(t)&&this.props.removeFromSectionNavigation(),e.isBannerDismissed!==this.props.isBannerDismissed&&!0===this.props.isBannerDismissed&&this.focus()}componentWillUnmount(){this.props.resetSearch()}focus(){this.searchInputRef.current.focus()}registerListRef(e){this.listRef=e}scrollAppLauncherResultsToKey(e){this.listRef&&this.listRef.current&&setTimeout(()=>{this.listRef.current.scrollToIfNotVisible({itemToScroll:e})},100)}render(){var{featureAppLauncher:e,shouldShowPersistentLimitBanner:t}=this.props;if(!e)return null;return s.a.createElement(nc.b,{subtype:"app_launcher"},t&&s.a.createElement(Rc,{scrollToKey:this.scrollAppLauncherResultsToKey}),s.a.createElement("div",{className:"p-app_launcher","data-qa":"app_launcher"},s.a.createElement("div",{className:"p-app_launcher__grid margin_bottom_0 margin_top_0"},s.a.createElement("div",{className:"p-app_launcher__search_filter_container"},s.a.createElement(gc.a,{isAppLauncher:!0,ref:this.searchInputRef,className:"p-app_launcher__search"}),s.a.createElement(jl,null))),s.a.createElement(ml,Object(P.a)({},{addAppsVariant:!1,channelId:null},{registerListRef:this.registerListRef}))))}}app_launcher_AppLauncher.defaultProps=El;var kl=Object(Xa.a)(app_launcher_AppLauncher,"AppLauncher",{index:7}),Sl=Object(m.b)(e=>{var t=Object(vc.c)(e)&&Object(fc.n)(e)&&Object(fc.k)(e);return{featureAppLauncher:Object(_c.a)(e),userAttentionIsOnChat:Object(la.e)(e),shouldShowPersistentLimitBanner:t,composerVisible:(Object(me.a)(e)||"composer_toolbar"===Object(Ja.c)(e,"composer_toolbar"))&&Object(Za.b)(e),teamId:Object(oa.b)(e),isBannerDismissed:Object(fc.k)(e)}},e=>Object(bc.b)({fetchDefaultApps:qr.c,resetSearch:qr.h},e))(kl),Il=new b.b("app_launcher");class app_launcher_page_header_AppLauncherPageHeader extends r.Component{render(){var{className:e,isIAP1Enabled:t}=this.props,a=Il.t("Apps"),n=Il.t("Your tools, right in Slack.");return s.a.createElement("div",{className:h()(e,"app-launcher-page-header"),"data-qa":"app_launcher__page_header"},s.a.createElement("h2",{className:"p-classic_nav__channel_header__title"},a),!t&&s.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle overflow_ellipsis"},n))}}app_launcher_page_header_AppLauncherPageHeader.defaultProps={className:""};var wl=Object(m.b)(e=>({isIAP1Enabled:Object(Vt.d)(e)}))(app_launcher_page_header_AppLauncherPageHeader),Tl=a("2w8c"),Nl=a("oUB8"),Pl=a("O9e6"),Al=(a("ab6v"),20);class activity_page_ActivityPage extends r.Component{constructor(e){super(e),this.fetchMentions=this.fetchMentions.bind(this),this.fetchMoreMentions=this.fetchMoreMentions.bind(this)}componentDidMount(){var{clogger:e,isActivityFlexpaneOpen:t}=this.props;e.track("ACTIVITY_PAGE_OPEN"),this.fetchMentions(),t&&this.props.dispatch(Object(rt.a)())}fetchMentions(){var{afterTs:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props.dispatch(Object(Nl.c)({afterTs:e,limit:Al}))}fetchMoreMentions(){var{activityList:e,hasMore:t,isLoading:a}=this.props;if(!a&&t){var n=e[e.length-1].ts;this.fetchMentions({afterTs:n})}}render(){var{activityList:e,isLoading:t}=this.props;return s.a.createElement("div",{className:"p-activity_page"},s.a.createElement(Pl.a,{fetchActivity:this.fetchMoreMentions,isLoading:t,items:e}))}}activity_page_ActivityPage.defaultProps={activityList:[],hasMore:!1,isLoading:!1};var Ml=Object(m.b)(e=>({activityList:Object(Nl.d)(e),hasMore:Object(Nl.e)(e),isLoading:Object(Nl.f)(e),clogger:Object(g.a)({state:e}),isActivityFlexpaneOpen:"activity"===Object(N.j)(e)}))(activity_page_ActivityPage),xl=a("o18M"),Rl=a("peh1"),Dl=a("6xja"),Fl=a("Kdk+"),Ll=a("sIET"),Ul=a("BRQ/"),Bl=a("0gqo"),Hl=a("QB+X"),Wl=a("Q+UV");class saved_item_reaction_bar_SavedItemReactionBar extends s.a.PureComponent{render(){var{hasReactionOrReplies:e,msg:t}=this.props;return e?s.a.createElement("div",{className:"p-saved_item_message__reactions_and_replies","data-qa":"saved_item-reaction-reply-bar"},s.a.createElement(Ul.a,{msg:t}),s.a.createElement(Bl.a,{msg:t,flexOrigin:"saved_items"})):null}}saved_item_reaction_bar_SavedItemReactionBar.defaultProps={hasReactionOrReplies:!1};var ql=Object(m.b)((e,t)=>{var{msg:a}=t,n=Object(Wl.b)(a),r=Object(Hl.e)(e,n);return{hasReactionOrReplies:!!(Object(an.S)(a)>0||r&&r.length)}})(saved_item_reaction_bar_SavedItemReactionBar),Gl=(a("8tlt"),{theme:"light",className:void 0,"data-qa":void 0});class saved_item_message_SavedItemMessage extends r.Component{render(){var{msg:e,"data-qa":t,theme:a}=this.props,n=h()("p-saved_item__message",this.props.className),i="dense"===a?"above":"default",o=s.a.createElement(In.a,{className:n,"data-qa":t},s.a.createElement(wn.a,{msg:e,position:i,showComment:!0,showReact:!0,showJump:!0,showMoreActions:!0,showShare:!1,messageContainerType:ra.I.THREADS_VIEW,jumpOrigin:"saved_items"},s.a.createElement(je.a,{msg:e},s.a.createElement(Ee.a,{light:s.a.createElement(ke.a,{msg:e,size:36})},s.a.createElement(Se.a,{msg:e}),"\xa0\xa0",s.a.createElement(Pe.a,{msg:e,full:!0}),s.a.createElement("br",null),s.a.createElement(Ie.a,{msg:e}),s.a.createElement(we.a,{msg:e,blocksContainerContext:vn.a.starred_message}),s.a.createElement(Te.a,{msg:e}),s.a.createElement(Ne.b,{msg:e}),s.a.createElement(On.a,{msg:e}),s.a.createElement(ql,{msg:e})))));return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"p-saved_item_header"},s.a.createElement(de.a,{href:Object(an.v)(e.channel,e.ts),className:"p-saved_item_header__permalink"},s.a.createElement(it.a,{channelId:e.channel}))),s.a.createElement(Ce.a,{className:"p-saved_item__message__pillow"},o))}}saved_item_message_SavedItemMessage.defaultProps=Gl;var Kl=saved_item_message_SavedItemMessage,Vl=a("FsNM"),zl=a("AWNZ"),Yl=a("uylt"),Ql=Object(Ka.b)(Kl),Xl={fetchMoreItems:U.a,isLoading:!1,items:void 0,messagesTheme:"light",onItemTabWithin:U.a,focusKey:null,setFocusKey:U.a},Jl={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment"};class saved_items_list_SavedItemsList extends r.PureComponent{constructor(e){super(e),Object(Ft.a)(this,["renderItem","isFocusableItem","getAriaLabelForRow","onFocusEnter","onFocusLeave"]),this.getItemKeys=Object(Rl.createSelector)(e=>{var{items:t}=e;return t},e=>{var{isLoading:t}=e;return t},(e,t)=>{var a=["top-anchor-hack"],n=e.map(e=>this.getSavedItemId(e));return a.push(...n),t&&a.push("loader"),a}),this.list=s.a.createRef(),this.state={hasKeyboardFocus:!1}}componentDidMount(){var{focusKey:e,items:t}=this.props;"stars"===e&&t.length&&this.setFocusOnFirstItem()}onFocusEnter(e){this.setState(()=>({hasKeyboardFocus:e.isKeyboardFocus}))}onFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}setFocusOnFirstItem(){var{isLoading:e,items:t}=this.props,a=this.getItemKeys({isLoading:e,items:t})[1],n=this.list.current;n&&n.focusOnKey(a),this.props.setFocusKey(null)}getSavedItemId(e){switch(e.type){case Jl.MESSAGE:return e.channel+e.ts;case Jl.FILE:case Jl.FILE_COMMENT:return e.id;default:return null}}getAriaLabelForRow(e){var{index:t}=e,{items:a}=this.props,{hasKeyboardFocus:n}=this.state,r=a[t-1];if(r&&r.type)return r.type===Jl.MESSAGE?{"aria-label":this.props.makeMessageSummary({channelId:r.channel,ts:r.ts,hasFocus:n,viewContext:ra.I.STARS_FLEXPANE})}:{"aria-label":this.props.makeFileSummary({fileId:r.id,hasFocus:n})}}focus(){var e=this.list.current;e&&e.focus()}isFocusableItem(e){var{index:t}=e,{isLoading:a,items:n}=this.props,r=this.getItemKeys({isLoading:a,items:n})[t];return!!r&&("top-anchor-hack"!==r&&"loader"!==r)}renderItem(e){var{isLoading:t,items:a,messagesTheme:n}=this.props,r=this.getItemKeys({isLoading:t,items:a});if("top-anchor-hack"===r[e])return s.a.createElement("div",{className:"p-saved_item__top_anchor_item_hack"});if("loader"===r[e])return s.a.createElement(Vl.a,null);var i=a[e-1],o={key:this.getSavedItemId(i),className:h()("c-message_kit__message","p-saved_item",{"p-saved_item--first":i===a[0]}),"data-qa":"saved_item_".concat(i.type)};switch(i.type){case Jl.MESSAGE:return s.a.createElement(Ql,Object(P.a)({},o,{channelId:i.channel,ts:i.ts,theme:n}));case Jl.FILE:return s.a.createElement(zl.a,Object(P.a)({},o,{id:i.id}));case Jl.FILE_COMMENT:return s.a.createElement(Yl.a,Object(P.a)({},o,{fileId:i.fileId,commentId:i.id}));default:return null}}render(){var{isLoading:e,items:t,onItemTabWithin:a}=this.props;return s.a.createElement(Ia.a,null,n=>{var{width:r,height:i}=n;return s.a.createElement(js.a,{ref:this.list,width:r,height:i,keys:this.getItemKeys({isLoading:e,items:t}),rowRenderer:this.renderItem,loadPost:this.props.fetchMoreItems,animateOnScroll:!1,getPropsForItem:this.getAriaLabelForRow,isFocusableItem:this.isFocusableItem,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onItemTabWithin:a})})}}saved_items_list_SavedItemsList.defaultProps=Xl;var Zl=Object(m.b)(e=>({focusKey:Object(Fl.a)(e),messagesTheme:Object(wa.a)(e)}),function(e){return{makeMessageSummary:function(){return e(Object(Na.a)(...arguments))},makeFileSummary:function(){return e(Object(Dl.a)(...arguments))},setFocusKey:t=>e(Object(Ll.a)(t))}})(e=>{var{forwardedRef:t}=e,a=Object(yo.a)(e,["forwardedRef"]);return s.a.createElement(saved_items_list_SavedItemsList,Object(P.a)({ref:t},a))}),$l=s.a.forwardRef((e,t)=>s.a.createElement(Zl,Object(P.a)({forwardedRef:t},e))),ed=a("+sOg"),td=(a("z1BW"),a("EtLH"),{isLoading:!1,starredItems:void 0,cursorMark:void 0});class stars_page_StarsPage extends r.Component{constructor(e){super(e),this.listRef=s.a.createRef(),this.fetchMoreStarredItems=this.fetchMoreStarredItems.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this)}componentDidMount(){var{clogger:e}=this.props;e.track("STARS_PAGE_OPEN")}componentDidUpdate(e){var{starredItems:t,cursorMark:a}=this.props;!Object(Mt.a)(e.starredItems)&&Object(Mt.a)(t)&&a&&this.fetchStarredItems(a)}focus(){var e=this.listRef.current;e&&e.setFocusOnFirstItem()}blur(){Object(U.a)()}fetchStarredItems(e){return!this.requestStars&&(this.requestStars=this.props.dispatch(Object(xl.c)({exclude:"Ch,Gh,Dh",limit:20,cursor:e})),this.requestStars.finally(()=>{this.requestStars=null}))}fetchMoreStarredItems(){var{isLoading:e,cursorMark:t}=this.props;e||t&&this.fetchStarredItems(t)}render(){return this.props.isIAMessagingEnabled?s.a.createElement("div",{className:"p-saved_page"},s.a.createElement($l,{ref:this.listRef,fetchMoreItems:this.fetchMoreStarredItems,isLoading:this.props.isLoading,items:this.props.starredItems})):s.a.createElement("div",{className:"p-stars_page"},s.a.createElement(ed.a,{ref:this.listRef,fetchMoreItems:this.fetchMoreStarredItems,isLoading:this.props.isLoading,items:this.props.starredItems}))}}stars_page_StarsPage.defaultProps=td;var ad=Object(m.b)(e=>({isLoading:Object(xl.f)(e),starredItems:Object(xl.d)(e),totalPages:Object(xl.g)(e),cursorMark:Object(xl.e)(e),clogger:Object(g.a)({state:e}),isIAMessagingEnabled:Object(Vt.c)(e)}))(Object(Xa.a)(stars_page_StarsPage,"StarsPage",{index:3})),nd=a("glRj"),rd=a("1Uzj"),sd=a("P9LH"),id=a("RfGh"),od=a("9gIX"),cd=a("MAit"),ld=a("GJq3"),dd=a("BSK+"),pd={className:void 0,width:void 0,onClick:U.a},ud=e=>{var{file:t,className:a,width:n,onClick:i}=e,o=Object(r.useCallback)(e=>i(e,t),[t,i]),c="image"===Object(sd.p)(t)&&s.a.createElement(dd.a,{file:t,maxSize:300});return s.a.createElement(id.a,{file:t,className:a,showActions:!0,useRowAction:!0,style:{width:n}},s.a.createElement(od.a,{file:t,onClick:o,showThumbnail:!1},s.a.createElement(cd.a,{file:t})),c,s.a.createElement(ld.a,{onClick:o,file:t}))};ud.defaultProps=pd;var hd=ud,md=a("nlS/"),bd=a("z+SX");class files_page_controls_FilesPageControls extends r.Component{constructor(e){super(e),this.renderMemberOption=this.renderMemberOption.bind(this),this.renderSelectedMemberOption=this.renderSelectedMemberOption.bind(this),this.processMemberOptions=this.processMemberOptions.bind(this),this.onMemberSelected=this.onMemberSelected.bind(this),this.onFiletypeSelected=this.onFiletypeSelected.bind(this)}onMemberSelected(e){this.props.dispatch(Object(nd.k)(e.value))}onFiletypeSelected(e){this.props.dispatch(Object(nd.j)(e))}getFiletypeTemplate(){var{filetype:e}=this.props,t=t=>e===t?s.a.createElement(nt.b,{type:"check-small",className:"p-files_page__controls__check_icon"}):null,a=t=>t===e?"p-files_page__filetype_menu_item--selected":"";return[{label:"All File Types",value:"",icon:t(""),click:()=>this.onFiletypeSelected(""),className:a("")},{label:"Posts",value:"docs",icon:t("docs"),click:()=>this.onFiletypeSelected("docs"),className:a("docs")},{label:"Snippets",value:"snippets",icon:t("snippets"),click:()=>this.onFiletypeSelected("snippets"),className:a("snippets")},{label:"Emails",value:"emails",icon:t("emails"),click:()=>this.onFiletypeSelected("emails"),className:a("emails")},{label:"Images",value:"images",icon:t("images"),click:()=>this.onFiletypeSelected("images"),className:a("images")},{label:"Videos",value:"videos",icon:t("videos"),click:()=>this.onFiletypeSelected("videos"),className:a("videos")},{label:"PDF Files",value:"pdfs",icon:t("pdfs"),click:()=>this.onFiletypeSelected("pdfs"),className:a("pdfs")},{label:"Spreadsheets",value:"spreadsheets",icon:t("spreadsheets"),click:()=>this.onFiletypeSelected("spreadsheets"),className:a("spreadsheets")},{label:"Google Docs",value:"gdocs",icon:t("gdocs"),click:()=>this.onFiletypeSelected("gdocs"),className:a("gdocs")}]}processMemberOptions(e,t){return t&&t.length>0?Promise.resolve(e):Promise.resolve([{value:"",label:"Anyone"},...e])}renderSelectedMemberOption(e){var t=""===e.value?e.label:s.a.createElement(bd.a,{id:e.value});return s.a.createElement("span",null,"From: ",s.a.createElement("strong",null,t))}renderMemberOption(e){return""===e.value?s.a.createElement("strong",null,e.label):s.a.createElement(ei.a,{id:e.value})}renderMemberSelect(){var{user:e}=this.props;return s.a.createElement(md.d,{key:e,className:"p-files_page__controls__member",width:"auto",renderOption:this.renderMemberOption,renderSelectedOption:this.renderSelectedMemberOption,selectedOption:{value:e,label:e||"Anyone"},searcherOptions:{entities:{members:{includeSelf:!0,onlyLocalTeam:!0}},sort:{selfFirst:!0},allowEmptyQuery:!0},processOptions:this.processMemberOptions,onOptionSelected:this.onMemberSelected})}renderFiletypeSelect(){var{filetype:e}=this.props,t=this.getFiletypeTemplate(),a=t.find(t=>t.value===e).label;return s.a.createElement(Io.e,{renderMenu:e=>s.a.createElement(Io.a,Object(P.a)({menu:!0},e,{template:t})),position:"bottom-left",offsetX:-4,offsetY:4},s.a.createElement(xs.a,{className:"p-files_page__filetype"},"Type: ",s.a.createElement("strong",null,a),s.a.createElement(nt.b,{type:"chevron-down",inline:!0})))}render(){return s.a.createElement("div",{className:"p-files_page__controls"},this.renderMemberSelect(),this.renderFiletypeSelect())}}files_page_controls_FilesPageControls.defaultProps={user:"",filetype:""};var _d=Object(m.b)(e=>({user:Object(nd.g)(e),filetype:Object(nd.d)(e)}))(files_page_controls_FilesPageControls),gd=(a("CoJr"),new b.b("files")),fd=Object(rd.a)(hd),vd=20;class files_page_FilesPage extends r.Component{constructor(e){super(e),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.keys=null,this.layout=new Ga.a,this.layout.heightCache.DEFAULT_HEIGHT=69,this.width=0,this.state={columns:3},this.onFileClick=this.onFileClick.bind(this),this.onScroll=this.onScroll.bind(this),this.fetchPre=this.fetchPre.bind(this),this.fetchPost=this.fetchPost.bind(this),this.fetchAround=this.fetchAround.bind(this),this.renderRow=this.renderRow.bind(this),this.debouncedResize=Object(ft.a)(this.onResize,20)}componentDidMount(){this.props.clogger.track("FILES_PAGE_OPEN",{is_iap1:this.props.isIAPhase1Enabled}),this.props.dispatch(Object(nd.k)(this.props.currentUserId))}onFileClick(e,t){e.preventDefault();var{id:a}=t;a&&this.props.dispatch(Object(rt.c)({fileId:a}))}onScroll(){this.layout.anchor&&this.layout.setAnchor(!1)}onResize(e){e!==this.width&&(this.width=e,this.setState(()=>({columns:this.getColumns()})))}getColumns(){return Math.floor(this.width/300)}UNSAFE_componentWillReceiveProps(e){var{filetype:t,user:a}=this.props;e.filetype===t&&e.user===a||(this.requestPre&&this.requestPre.cancel(),this.requestPost&&this.requestPost.cancel(),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.layout&&this.layout.setAnchor(!1))}fetchAround(){return(!this.requestPre||!this.requestPost)&&(this.reachedEnd?this.fetchPre():this.reachedStart?this.fetchPost():this.fetchPre())}fetchPost(){var e=this;return!this.requestPost&&(!this.reachedEnd&&(this.requestPost=this.props.dispatch(Object(nd.b)({types:this.props.filetype,user:this.props.user})),this.requestPost.then(function(){var{paging:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{page:a,pages:n}=t;a>=n&&(e.reachedEnd=!0)}).finally(()=>{this.requestPost=null})))}fetchPre(){var e=this;return!this.requestPre&&(!this.reachedStart&&(this.requestPre=this.props.dispatch(Object(nd.c)({types:this.props.filetype,user:this.props.user})),this.requestPre.then(function(){var{paging:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{page:a}=t;1===a&&(e.reachedStart=!0)}).finally(()=>{this.requestPre=null})))}isEmpty(){return!this.props.files.length&&this.reachedStart&&this.reachedEnd}renderFile(e){return s.a.createElement(fd,{key:e,fileId:e,className:"p-files_page__file",clogLinkClick:this.clogFileClick,useRowAction:!0,onClick:this.onFileClick,width:Math.floor((this.width-vd)/this.state.columns-vd)})}renderFiles(e){var t=this.rows[e];return s.a.createElement("div",{className:"p-files_page__row"},t.map(e=>this.renderFile(e)))}renderRow(e){var t=this.keys[e];if(!t)return null;switch(t[0]){case"L":return s.a.createElement("div",{className:"p-file_list__loading"},gd.t("Loading\u2026"));case"P":return s.a.createElement("div",{className:"p-file_list__empty"},gd.t("No matching files were found."));default:return this.renderFiles(e)}}render(){var{files:e}=this.props,t=e.map(e=>e.id);return this.rows=Object(at.a)(t,this.state.columns),this.keys=this.rows.map(e=>e[0]),this.reachedEnd||this.keys.push("Loading".concat(this.keys.length)),this.isEmpty()&&this.keys.push("Placeholder"),s.a.createElement("div",{className:"p-files_page"},s.a.createElement(_d,null),s.a.createElement(ds.a,null,e=>{var{measureRef:t,width:a,height:n}=e;return this.debouncedResize(a),s.a.createElement("div",{className:"p-files_page__container",ref:t},s.a.createElement(js.a,{width:a,height:n,keys:this.keys,layout:this.layout,rowRenderer:this.renderRow,onScroll:this.onScroll,ref:this.list,loadAround:this.fetchAround,loadPre:this.fetchPre,loadPost:this.fetchPost,onItemClick:this.onFileClick,"aria-label":gd.t("Files")}))}))}}files_page_FilesPage.defaultProps={files:[],user:"",filetype:"",clogger:{},isIAPhase1Enabled:!1};var Od=Object(m.b)(e=>({files:Object(nd.e)(e),user:Object(nd.g)(e),filetype:Object(nd.d)(e),currentUserId:Object(i.d)(e),clogger:Object(g.a)(e),isIAPhase1Enabled:Object(Vt.d)(e)}))(files_page_FilesPage),yd=a("g5qt"),Cd=a("g9w/"),jd={className:void 0,user:"",filetype:""};class files_header_FilesHeader extends r.Component{constructor(e){super(e),this.renderMemberOption=this.renderMemberOption.bind(this),this.renderSelectedMemberOption=this.renderSelectedMemberOption.bind(this),this.processMemberOptions=this.processMemberOptions.bind(this),this.onMemberSelected=this.onMemberSelected.bind(this),this.onFiletypeSelected=this.onFiletypeSelected.bind(this)}onMemberSelected(e){this.props.dispatch(Object(nd.k)(e.value))}onFiletypeSelected(e){this.props.dispatch(Object(nd.j)(e.value))}processMemberOptions(e,t){return t&&t.length>0?Promise.resolve(e):Promise.resolve([{value:"",label:"Anyone"},...e])}renderSelectedMemberOption(e){var t=""===e.value?e.label:s.a.createElement(bd.a,{id:e.value});return s.a.createElement("span",null,"From: ",s.a.createElement("strong",null,t))}renderMemberOption(e){return""===e.value?s.a.createElement("strong",null,e.label):s.a.createElement(ei.a,{id:e.value})}renderMemberSelect(){var{user:e}=this.props;return s.a.createElement(md.d,{key:e,renderOption:this.renderMemberOption,renderSelectedOption:this.renderSelectedMemberOption,selectedOption:{value:e,label:e||"Anyone"},searcherOptions:{entities:{members:{includeSelf:!0,onlyLocalTeam:!0}},sort:{selfFirst:!0},allowEmptyQuery:!0},processOptions:this.processMemberOptions,onOptionSelected:this.onMemberSelected})}renderFiletypeSelect(){var e=[{label:"All File Types",value:""},{label:"Posts",value:"docs"},{label:"Snippets",value:"snippets"},{label:"Emails",value:"emails"},{label:"Images",value:"images"},{label:"Videos",value:"videos"},{label:"PDF Files",value:"pdfs"},{label:"Spreadsheets",value:"spreadsheets"},{label:"Google Docs",value:"gdocs"}];return s.a.createElement(Cd.a,{className:"p-files_page__header__controls__filetype",options:e,selectedOption:e.find(e=>e.value===this.props.filetype),onOptionSelected:this.onFiletypeSelected})}renderDownloads(){var{dispatch:e}=this.props;return yd.W?s.a.createElement(ua.a,{className:"p-files_page__header__tab",onClick:()=>e(Object(rt.f)())},"Downloads"):null}render(){var{className:e}=this.props;return s.a.createElement("div",{className:h()(e,"p-files_page__header")},s.a.createElement("div",{className:"p-files_page__header__title"},"Files"),s.a.createElement("div",{className:"p-files_page__header__controls"},this.renderDownloads()))}}files_header_FilesHeader.defaultProps=jd;var Ed=Object(m.b)(e=>({user:Object(nd.g)(e),filetype:Object(nd.d)(e)}))(files_header_FilesHeader),kd=a("nyjr"),Sd=a("l4bA"),Id=a("YhFg"),wd=a("k2C/"),Td=a("l+8s"),Nd=a("qPro"),Pd=a("SwU4"),Ad=a("CEgY"),Md=(a("VGdo"),new b.b("member_directory"));class directory_page_DirectoryPage extends r.Component{constructor(e){super(e),this.onMenuItemSelected=this.onMenuItemSelected.bind(this),this.onFilterInputChange=this.onFilterInputChange.bind(this),this.renderMenu=this.renderMenu.bind(this),this.state={externalTeams:[]}}componentDidMount(){this.props.clogger.track("PEOPLE_DIRECTORY_OPEN",{is_iap1:this.props.isIAPhase1Enabled}),this.fetchExternalTeams()}onMenuItemSelected(e){this.props.dispatch(Object(Sd.d)(e))}onFilterInputChange(e){var t=e.target.value||"";this.props.dispatch(Object(Sd.f)(t))}fetchExternalTeams(){this.props.dispatch(Object(Id.b)()).then(e=>{e&&e.external_teams&&this.setState(()=>({externalTeams:Object.keys(e.external_teams)}))})}renderMenu(e){return s.a.createElement(Ad.a,{onMenuItemSelected:this.onMenuItemSelected,selectedFilter:this.props.filter,menuProps:e,externalTeams:this.state.externalTeams})}render(){var{filter:e,searchQuery:t}=this.props,a=s.a.createElement(Nd.a,{value:t,onChange:this.onFilterInputChange,placeholder:Md.t("Search by name or title"),icon:"search",size:"medium",autoFocus:!0,inputAriaLabel:Md.t("Search members by name or title"),className:"p-directory_page__filter_input"}),n={people:Md.t("Everyone"),org_members:Md.t("All Members"),org_admins:Md.t("Org Admins"),members:Md.t("All Members"),admins:this.props.isEnterprise?Md.t("Workspace Admins"):Md.t("Admins"),bots:Md.t("Bots"),guests:Md.t("Guests"),deactivated:Md.t("Deactivated accounts")},r=Object(wd.a)(e)?s.a.createElement(Ds.a,{id:e}):n[this.props.filter];return s.a.createElement("div",{className:"p-directory_page"},s.a.createElement("div",{className:"p-directory_page__actions"},a,s.a.createElement(Td.a,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:4},s.a.createElement(xs.a,{className:"p-directory_page__filter_type"},"Account type: ",s.a.createElement("strong",null,r),s.a.createElement(j.a,{type:"chevron-down",inline:!0})))),s.a.createElement(Pd.a,{isIAP1Enabled:!0}))}}directory_page_DirectoryPage.defaultProps={searchQuery:"",filter:"people",isEnterprise:!1,clogger:{},isIAPhase1Enabled:!1};var xd=Object(m.b)(e=>({searchQuery:Object(kd.f)(e),filter:Object(kd.a)(e),isEnterprise:Object(i.q)(e),clogger:Object(g.a)(e),isIAPhase1Enabled:Object(Vt.d)(e)}))(directory_page_DirectoryPage),Rd=a("UEyp"),Dd=a("6Jf9");class directory_header_DirectoryHeader extends r.Component{render(){var{showInviteButton:e,showUserGroupButton:t}=this.props;return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"p-ia__view_header__title"},"People"),s.a.createElement("div",{className:"p-ia__view_header__spacer"}),t&&s.a.createElement(ua.a,{onClick:()=>this.props.showUserGroupList(),className:"bold right_margin"},"User Groups"),e&&s.a.createElement(yr.b,{onClick:()=>this.props.openInviteModal()},"Invite people"))}}directory_header_DirectoryHeader.defaultProps={showUserGroupButton:!0};var Fd={openInviteModal:function(){return Object(Dd.a)(...arguments)},showUserGroupList:function(){return Object(rt.o)(...arguments)}},Ld=Object(m.b)(e=>({showInviteButton:Object(Rd.d)(e),showUserGroupButton:!Object(le.Gb)(Object(qe.b)(e))&&Object(X.D)(Object(B.d)(e))}),Fd)(directory_header_DirectoryHeader),Ud=a("obnc"),Bd=a("aybX"),Hd=a("IF1j"),Wd=a("/6yw"),qd=e=>{var{id:t,member:a,showMemberProfile:n}=e,i=Object(r.useCallback)(()=>{n({memberId:t})},[t,n]);return s.a.createElement("div",{className:"p-browse_people_page__member",role:"presentation",onClick:i},s.a.createElement(Hd.c,{userId:t,size:168,isInteractive:!1,showBadge:!1}),s.a.createElement("div",{className:"p-browse_people_page__member__info"},s.a.createElement(xs.a,{className:"p-browse_people_page__member__name"},s.a.createElement(bd.a,{id:t}),s.a.createElement(Wd.a,{memberId:t})),s.a.createElement("div",{className:"p-browse_people_page__member__title"},Object(le.S)(a))))};qd.defaultProps={member:void 0};var Gd={showMemberProfile:function(){return Object(rt.j)(...arguments)}},Kd=Object(m.b)((e,t)=>{var{id:a}=t;return{member:Object(qe.d)(e,a)}},Gd)(qd),Vd=a("plEq"),zd=(a("EpXI"),Object(r.createContext)({containerDimensions:{width:0,height:0},contentMaxWidth:0})),Yd=()=>Object(r.useContext)(zd);function Qd(e){var{gutter:t,contentMinWidth:a,columnSize:n,columnGap:i,children:o}=e,[c,l]=Object(r.useState)(0),[d,p]=Object(r.useState)(0),[u,h]=Object(r.useState)(0);return Object(r.useEffect)(()=>{var e=2*t,r=Math.floor((c-e)/n),s=r*n+(r-1)*i+t;s=Math.max(s,a),h(s)},[i,n,c,a,t]),s.a.createElement(ds.a,null,e=>{var{width:t,height:n,measureRef:r}=e;return d!==n&&p(n),c!==t&&l(t),s.a.createElement("div",{className:"p-browse_page_layout",ref:r},s.a.createElement("div",{className:"p-browse_page_layout__content"},s.a.createElement(zd.Provider,{value:{maxWidth:u,minWidth:a}},o)))})}Qd.defaultProps={children:null,gutter:80,contentMinWidth:344,columnSize:256,columnGap:8};var Xd=Qd,Jd={query:"",onQueryChange:U.a};function Zd(e){var t,{onQueryChange:a,query:n}=e,{maxWidth:r,minWidth:i}=Yd();return r&&(t={maxWidth:r,minWidth:i}),s.a.createElement("div",{className:"p-browse_people_page__controls",style:t},s.a.createElement(Vd.a,{name:"browse-people",id:"browse-people",placeholder:"Search",onChange:a,size:"large",value:n}))}Zd.defaultProps=Jd;var $d=Zd,ep=a("iGrU"),tp=(a("97Bz"),{className:void 0,layout:"grid"});function ap(e){var t,{itemIds:a,renderItem:n,className:r,layout:i}=e,{maxWidth:o,minWidth:c}=Yd();return o&&(t={maxWidth:o,minWidth:c}),s.a.createElement(ds.a,null,e=>{var{width:o,height:c,measureRef:l}=e;return s.a.createElement("div",{className:h()(r,"p-browse_page_results"),ref:l},a.length?s.a.createElement(ep.b,{width:o,height:c},s.a.createElement("div",{className:h()({"p-browse_page_results__grid":"grid"===i,"p-browse_page_results__list":"list"===i}),style:t},a.map(n))):s.a.createElement("div",{className:"p-browse_page_results__empty",style:t},"No items yet! Perform a global search in omni for files to see results."))})}ap.defaultProps=tp;var np=ap;a("s8zD");function rp(e){var{people:t,onQueryChange:a,query:n}=e,r=t.map(e=>{var{id:t}=e;return t});return s.a.createElement("div",{className:"p-browse_people_page"},s.a.createElement(Xd,{contentMinWidth:424,columnSize:168},s.a.createElement($d,{onQueryChange:e=>{a({value:e})},query:n}),s.a.createElement(np,{itemIds:r,renderItem:e=>s.a.createElement(Kd,{id:e,key:e})})))}rp.defaultProps={people:[],query:""};var sp={onQueryChange:function(){return Object(Ud.c)(...arguments)}},ip=Object(m.b)(e=>{var{results:t,query:a,page:n}=Object(Bd.c)(e,"people");return{query:a,people:t[n]}},sp)(rp),op={className:void 0,showUserGroupButton:!0};function cp(e){var{className:t,showInviteButton:a,showUserGroupButton:n,showUserGroupList:r,openInviteModal:i}=e;return s.a.createElement("div",{className:h()(t,"p-browse_people_page__header")},s.a.createElement("div",{className:"p-ia__view_header__title"},"People"),s.a.createElement("div",{className:"p-ia__view_header__spacer"}),n&&s.a.createElement(ua.a,{onClick:()=>r(),className:"bold right_margin"},"User Groups"),a&&s.a.createElement(yr.b,{onClick:()=>i()},"Invite people"))}cp.defaultProps=op;var lp={openInviteModal:function(){return Object(Dd.a)(...arguments)},showUserGroupList:function(){return Object(rt.o)(...arguments)}},dp=Object(m.b)(e=>({showInviteButton:Object(Rd.d)(e),showUserGroupButton:!Object(le.Gb)(Object(qe.b)(e))&&Object(X.D)(Object(B.d)(e))}),lp)(cp),pp=a("4vzu"),up=a("eqKo"),hp=a("qkTT"),mp=a("85z6"),bp=(a("23La"),e=>{var{children:t,label:a,description:n,emoji:i,startOpen:o}=e,[c,l]=Object(r.useState)(o),d=Object(r.useCallback)(()=>l(!c),[c,l]);return s.a.createElement(r.Fragment,null,s.a.createElement(xs.a,{onClick:d,className:"p-page_accordion__button"},s.a.createElement("div",{className:"p-page_accordion__emoji"},s.a.createElement(mp.b,{text:i})),s.a.createElement("div",null,s.a.createElement("div",{className:"p-page_accordion__label"},a),s.a.createElement("div",{className:"p-page_accordion__description"},n)),s.a.createElement(j.a,{className:"p-page_accordion__caret",type:c?"chevron-medium-down":"chevron-medium-right"})),c&&t)});bp.defaultProps={children:void 0,startOpen:!1};var _p=bp,gp=(a("eZdM"),{currentUser:void 0,customStatusText:void 0,customStatusEmoji:void 0});class profile_page_ProfilePage extends r.Component{constructor(e){super(e),this.onCustomStatusClick=this.onCustomStatusClick.bind(this)}onCustomStatusClick(){this.props.dispatch(Object(up.a)())}renderHeader(){var{currentUserId:e,currentUser:t,customStatusEmoji:a,customStatusText:n}=this.props,r=s.a.createElement(xs.a,{className:"p-profile_page__header__info__status",onClick:this.onCustomStatusClick},a&&s.a.createElement(ic.a,{text:n?"".concat(a," ").concat(n):a,emojiSize:hp.a.SMALL,showTooltips:!1,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noHighlights:!0,noEmojiText:!0,preventCopyPaste:!0,stopAnimations:!0}),!a&&"Set a status",s.a.createElement(j.a,{type:"pencil",inline:!0,size:"inherit",className:"small_left_margin"}));return s.a.createElement("div",{className:"p-profile_page__header"},s.a.createElement(Hd.c,{userId:e,size:100}),s.a.createElement("div",{className:"p-profile_page__header__info"},s.a.createElement(bd.a,{id:e,className:"p-profile_page__header__info__name"}),s.a.createElement("div",{className:"p-profile_page__header__info__title"},Object(le.S)(t)),r))}render(){return s.a.createElement("div",{className:"p-profile_page"},this.renderHeader(),s.a.createElement(_p,{emoji:"slightly_smiling_face",label:"About",description:"Full name, display name, and basic things others should know"},s.a.createElement("div",{className:"p-profile_page__section"},"Test")),s.a.createElement(_p,{emoji:"telephone",label:"Contact",description:"Tell others how to get in touch with you"},s.a.createElement("div",{className:"p-profile_page__section"},"Test")),s.a.createElement(_p,{emoji:"earth_americas",label:"Location",description:"Country, city, and floor"},s.a.createElement("div",{className:"p-profile_page__section"},"Test")),s.a.createElement(_p,{emoji:"link",label:"Links",description:"Social accounts and more"},s.a.createElement("div",{className:"p-profile_page__section"},"Test")),s.a.createElement(_p,{emoji:"octopus",label:"Everything else",description:"More details provided by your company"},s.a.createElement("div",{className:"p-profile_page__section"},"Test")))}}profile_page_ProfilePage.defaultProps=gp;var fp=Object(m.b)(e=>{var t=Object(i.d)(e),a=Object(qe.f)(e,t);return{currentUserId:t,currentUser:Object(qe.d)(e,t),customStatusText:a.text,customStatusEmoji:a.emoji,inDnd:!!Object(pp.c)(e)}})(profile_page_ProfilePage),vp=a("GZPf"),Op=a("V+97"),yp=a("VPVR"),Cp=a("IfQk"),jp=a("JQlo"),Ep=a("37yT"),kp=a("+Y/z"),Sp=a("aPoH"),Ip=(a("bKze"),Object(m.b)(e=>({featureTinyspeck:Object(i.m)(e,"feature_tinyspeck")}))(e=>{var{featureTinyspeck:t}=e;return s.a.createElement("div",{className:"p-settings_page"},s.a.createElement(_p,{emoji:"bell",label:"Set notifications",description:"Manage alerts, do-not-disturb, sounds and keywords"},s.a.createElement("div",{className:"p-settings_page__section"},s.a.createElement(vp.a,null))),s.a.createElement(_p,{emoji:"art",label:"Themes",description:"Change the appearance of Slack"},s.a.createElement("div",{className:"p-settings_page__section"},s.a.createElement(Op.a,null))),s.a.createElement(_p,{emoji:"desktop_computer",label:"Accessibility & display",description:"Choose how messages and other media and are displayed"},s.a.createElement("div",{className:"p-settings_page__section"},s.a.createElement(Cp.a,null),s.a.createElement(yp.a,null))),s.a.createElement(_p,{emoji:"open_file_folder",label:"Sidebar",description:"Choose what conversations you see and how channels are organized"},s.a.createElement("div",{className:"p-settings_page__section"},s.a.createElement(jp.a,null))),s.a.createElement(_p,{emoji:"earth_africa",label:"Language & region",description:"Set your language and timezone settings"},s.a.createElement("div",{className:"p-settings_page__section"},s.a.createElement(Ep.a,null))),s.a.createElement(_p,{emoji:"whale2",label:"Advanced preferences",description:"Everything else"},s.a.createElement("div",{className:"p-settings_page__section"},s.a.createElement(kp.a,null))),t&&s.a.createElement(_p,{emoji:"telescope",label:"Labs",description:"TS only"},s.a.createElement("div",{className:"p-settings_page__section"},s.a.createElement(Sp.a,null))))})),wp=a("rzEj");a("+V7z");class browse_channels_page_BrowseChannelsPage extends r.Component{render(){return s.a.createElement("div",{className:"p-ia__browse_channels_page"},s.a.createElement(wp.a,{withoutFullscreenModal:!0,withoutHeader:!0}))}}var Tp=a("UYUI");var Np={openChannelCreateModal:function(){return Object(Tp.a)(...arguments)}},Pp=Object(m.b)(e=>({canUserCreateChannels:Object(Us.D)(e)||Object(Us.C)(e)}),Np)(class browse_channels_header_BrowseChannelsHeader extends r.Component{constructor(e){super(e),this.onCreateClick=this.onCreateClick.bind(this)}onCreateClick(){this.props.openChannelCreateModal({entryPoint:"channel_browser"})}render(){var{canUserCreateChannels:e}=this.props;return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"p-ia__view_header__title"},"Channels"),s.a.createElement("div",{className:"p-ia__view_header__spacer"}),e&&s.a.createElement(yr.b,{className:"p-channel_browser__header__create","data-qa":"channel_browser_channel_create_btn",onClick:this.onCreateClick},"Create channel"))}}),Ap=a("0jQN"),Mp=a("rMl1");a("RJyz");var xp=Object(m.b)(null,e=>({setDMBrowserInitialMembers:function(){return e(Object(Ap.c)(...arguments))}}))(class browse_dms_page_BrowseDmsPage extends r.Component{componentDidMount(){this.props.setDMBrowserInitialMembers({initialMembers:[]})}render(){return s.a.createElement("div",{className:"p-ia__browse_dms_page"},s.a.createElement(Mp.a,{withoutFullscreenModal:!0}))}}),Rp=a("q2IZ");a("7/T7");class help_page_HelpPage extends r.Component{render(){return s.a.createElement("div",{className:"p-ia__help_page"},s.a.createElement(Rp.a,{withoutFullscreenModal:!0}))}}var Dp=e=>{var{className:t,teamUrl:a,teamEnterpriseDomain:n,isAdminOrOwner:r,isEnterpriseAdminOrOwner:i}=e;return s.a.createElement("div",{className:h()("p-ia__settings_header",t)},s.a.createElement("div",{className:"p-ia__view_header__title"},"Preferences"),i&&s.a.createElement(rc.a,{href:"https://".concat(n,".enterprise.slack.com/manage"),className:"p-ia__settings_header__link"},"Organization settings",s.a.createElement(j.a,{type:"external-link-square",inline:!0})),r&&s.a.createElement(rc.a,{href:"".concat(a,"admin/settings"),className:"p-ia__settings_header__link"},"Workspace settings ",s.a.createElement(j.a,{type:"external-link-square",inline:!0})))};Dp.defaultProps={className:void 0,teamUrl:"/",teamEnterpriseDomain:"",isAdminOrOwner:!1,isEnterpriseAdminOrOwner:!1};var Fp=Object(m.b)(e=>{var t=Object(B.d)(e),a=Object(qe.b)(e),n=Object(B.g)(e),r=Object(le.qb)(a)||Object(le.rb)(a),s=Object(le.eb)(e,a)||Object(le.Eb)(e,a)||r;return{teamUrl:Object(X.n)(t),teamEnterpriseDomain:n&&n.domain,isAdminOrOwner:s,isEnterpriseAdminOrOwner:r}})(Dp),Lp=a("lE2N"),Up=a("k+gr"),Bp=a("eY5N"),Hp=a("eZcK"),Wp=a("RYu0"),qp=a("HBMi"),Gp=a("JoAr"),Kp=a("3kjJ"),Vp=e=>{var t=[],a=[],n=null;return e.forEach(e=>{if("top-anchor"!==e.key){if(!n||!Object(Kp.a)(n,e.ts)){var r="date-divider-".concat(e.ts);a.push({index:t.length,key:r}),t.push({type:"date-divider",ts:e.ts,key:r}),n=e.ts}t.push(e)}else t.push(e)}),[t,a]},zp=a("5j4a"),Yp=e=>{var{index:t,channelId:a,channel:n,ts:i,name:o,senderName:c,latestMessage:l,dispatch:d}=e;Object(r.useEffect)(()=>{l||d(Object(Aa.b)({channelId:a,limit:1,reason:"recent-conversations"})).then(function(){var{msgs:e,hasMore:t,isLimited:n,pinCount:r,deleted:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(Object(zp.k)({channelId:a})),d(Object(Pa.a)({msgs:e,channelId:a,isLimited:n,pinCount:r,hasMore:{hasMoreStart:t,hasMoreEnd:!1},oldest:null,latest:null,deleted:s}))})},[d,a,l]);var p=Object(r.useCallback)(()=>{d(Object(jt.a)({id:a}))},[d,a]),u=Object(_o.a)(i),m=l?s.a.createElement(ec.a,{lines:1},s.a.createElement("span",{className:"p-recent_page__conversation__sender"},c),Object(an.mb)(l)?s.a.createElement(tc.a,{richTextBlock:l.blocks[0]}):s.a.createElement(Ie.a,{msg:l,isSingleLine:!0})):s.a.createElement(ui.b,{size:"random"}),b=h()("p-recent_page__item","p-recent_page__conversation",{"p-recent_page__item--first":0===t});return s.a.createElement(xs.a,{className:b,onClick:p},s.a.createElement("div",{className:"p-recent_page__conversation__avatar"},(()=>{switch(Object(_e.u)(n)){case"im":return s.a.createElement(Hd.c,{size:36,userId:Object(_e.G)(n),isInteractive:!1});default:return s.a.createElement(Hd.c,{size:36,userId:l&&l.user,isInteractive:!1})}})()),s.a.createElement("div",{className:"p-recent_page__conversation__content"},s.a.createElement("div",{className:"p-recent_page__conversation__header"},s.a.createElement("div",{className:"p-recent_page__conversation__name"},o||s.a.createElement(ui.b,{size:"random"})),s.a.createElement("div",{className:"p-recent_page__timestamp"},u)),s.a.createElement("div",{className:"p-recent_page__message"},m)))};Yp.defaultProps={channel:void 0,name:void 0,senderName:void 0,latestMessage:void 0};var Qp=Object(m.b)((e,t)=>{var{channelId:a}=t,n=Object(w.e)(e,a),r=Object(Sa.a)(Object(zp.h)(e,a).timestamps),s=Object(Bt.a)(e,a,r),o=s&&Object(qe.d)(e,s.user),c=Object(i.d)(e);return{channel:n,name:Object(_e.w)(e,n,{imIncludeAtSign:!1}),senderName:o&&(o.id===c?"You":Object(le.H)(o)||Object(le.V)(e,o)),latestMessage:s}})(Yp),Xp=(a("2LTG"),e=>{var{dispatch:t,recentConversationHistory:a}=e,[n,i]=Object(r.useState)([]),o=Object(r.useRef)(new Ga.a);Object(r.useEffect)(()=>{Promise.all([t(Object(Bp.a)({reason:"recent-conversations"})),t(Object(Hp.a)({reason:"recent-conversations"}))]).then(()=>t(Object(Wp.a)())).then(e=>{i(e.filter(e=>e.latestTs||e.channel.latest>="1").map(e=>({ts:Math.floor(Object(qp.a)(e.latestTs||e.channel.latest).getTime()/1e3),viewId:e.channel.id,type:"message"})))})},[t]);var c={viewId:"Xtop_anchor",key:"top-anchor",ts:Date.now()+1},[l,d]=Vp(Object(Lp.a)([c,...n,...a].sort((e,t)=>t.ts-e.ts),"viewId")),p=l.map(e=>e.viewId||e.key),u=e=>{if("top-anchor"===l[e].key)return s.a.createElement("div",{className:"p-recent_page__top_anchor"});if("date-divider"===l[e].type){var t=l[e].ts,a=Object(Gp.a)(t,"{day_divider_pretty}");return s.a.createElement("div",{className:"p-recent_page__date_divider"},a)}return s.a.createElement(Qp,{index:e,channelId:l[e].viewId,ts:l[e].ts,type:l[e].type||"history"})};return s.a.createElement(ds.a,null,e=>{var{width:t,height:a,measureRef:n}=e;return s.a.createElement("div",{className:"p-recent_page",ref:n},s.a.createElement(qa.a,{width:t,height:a,keys:p,rowRenderer:u,stickyItems:d,stickyZIndex:1,layout:o.current}))})});Xp.defaultProps={recentConversationHistory:[]};var Jp=Object(m.b)(e=>({recentConversationHistory:Object(Up.b)(e)}))(Xp);var Zp={openComposerPage:function(){return Object(vr.a)(...arguments)}},$p=Object(m.b)(null,Zp)(class recent_header_RecentHeader extends r.Component{render(){return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"p-ia__view_header__title"},"Recent conversations"),s.a.createElement("div",{className:"p-ia__view_header__spacer"}),s.a.createElement(yr.b,{onClick:()=>this.props.openComposerPage()},"New message"))}}),eu={query:"",onQueryChange:U.a};function tu(e){var t,{onQueryChange:a,query:n}=e,{maxWidth:r,minWidth:i}=Yd();return r&&(t={maxWidth:r,minWidth:i}),s.a.createElement("div",{className:"p-browse_files_page__controls",style:t},s.a.createElement(Vd.a,{name:"browse-files",id:"browse-files",placeholder:"Search",onChange:a,size:"large",value:n}))}tu.defaultProps=eu;var au=tu,nu=Object(rd.a)(hd);var ru=function(e){var{id:t}=e;return s.a.createElement(nu,{key:t,fileId:t,className:"p-browse_files_page__file",onClick:U.a})};a("Cmng");function su(e){var{files:t,onQueryChange:a,query:n}=e,r=t.map(e=>{var{id:t}=e;return t});return s.a.createElement("div",{className:"p-browse_files_page"},s.a.createElement(Xd,null,s.a.createElement(au,{onQueryChange:e=>{a({value:e})},query:n}),s.a.createElement(np,{itemIds:r,renderItem:e=>s.a.createElement(ru,{id:e})})))}su.defaultProps={files:[],query:""};var iu={onQueryChange:function(){return Object(Ud.c)(...arguments)}},ou=Object(m.b)(e=>{var{results:t,query:a,page:n}=Object(Bd.c)(e,"files");return{query:a,files:t[n]}},iu)(su),cu=new b.b("files"),lu={className:void 0,showDownloads:U.a};function du(e){var{className:t,showDownloads:a}=e;return s.a.createElement("div",{className:h()(t,"p-browse_files_page__header")},s.a.createElement("div",{className:"p-ia__view_header__title"},cu.t("Files")),s.a.createElement("div",{className:"p-ia__view_header__spacer"}),yd.W&&s.a.createElement(ua.a,{className:"bold",onClick:a},"Downloads"))}du.defaultProps=lu;var pu={showDownloads:function(){return Object(rt.f)(...arguments)}},uu=Object(m.b)(null,pu)(du),hu=a("EetU"),mu=a("81nI"),bu=a("maFm"),_u=a.n(bu),gu=a("2Rjh"),fu=a.n(gu),vu=a("wEz6"),Ou=a.n(vu),yu=a("Ta79"),Cu=a.n(yu),ju=a("Mhgg"),Eu=a.n(ju),ku=a("RwR8"),Su=a.n(ku),Iu=a("2Mhf"),wu=a.n(Iu),Tu=a("4OD1"),Nu=a.n(Tu),Pu=a("ge2f"),Au=a.n(Pu),Mu=a("VQnp"),xu=a.n(Mu),Ru=a("jJ2u"),Du=a.n(Ru),Fu=a("sYFF"),Lu=a.n(Fu),Uu=a("K6R2"),Bu=a.n(Uu),Hu=a("CSbb"),Wu=a.n(Hu),qu=a("hnus"),Gu=a.n(qu),Ku=a("qsRF"),Vu=a.n(Ku),zu=new b.b("paid_onboarding"),Yu="share_channel",Qu="invite_guests",Xu="search",Ju="connect_app",Zu="start_group_call",$u="retention_settings",eh="signin_settings",th="create_user_group",ah=(Lt.default.string.isRequired,Lt.default.string.isRequired,Lt.default.arrayOf(Lt.default.string).isRequired,Lt.default.string.isRequired,Lt.default.string.isRequired,Lt.default.string.isRequired,Lt.default.string.isRequired,{guests:[_u.a,fu.a],sharedChannels:[Ou.a,Cu.a],msgHistory:[Eu.a,Su.a],storage:[wu.a,Nu.a],apps:[Au.a,xu.a],calls:[Du.a,Lu.a],gSuite:[Bu.a,Wu.a],userGroups:[Gu.a,Vu.a]}),nh={standard:["guests","sharedChannels","msgHistory","storage","apps","calls","gSuite","userGroups"],plus:[]},rh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!Object(i.m)(e,"feature_gg_from_the_start"))return[];var a=(e=>{if(!Object(i.m)(e,"feature_gg_from_the_start"))return{};var t=Object(bt.a)();return{guests:{title:zu.t("Bring contractors directly into your workspace"),description:zu.t("Guest accounts let you use Slack with people outside your company, in just the channels you choose."),images:ah.guests,ctaTitle:"",ctaAction:Qu,ctaURL:Object(mu.b)({articleId:"202518103",zdLocale:t}),name:"invite_guests"},sharedChannels:{title:zu.t("Collaborate securely with external organizations"),description:zu.t("Shared channels let you work with clients or partner teams."),images:ah.sharedChannels,ctaTitle:"",ctaAction:Yu,ctaURL:Object(mu.b)({articleId:"115004151203",zdLocale:t}),name:"shared_channels"},msgHistory:{title:zu.t("Find the information you need, when you need it"),description:zu.t("An unlimited message archive lets you view and search all of your team\u2019s public messages."),images:ah.msgHistory,ctaTitle:"",ctaAction:Xu,ctaURL:Object(mu.b)({articleId:"202528808-Search-in-Slack-",zdLocale:t}),name:"message_history"},storage:{title:zu.t("Choose how long your team\u2019s data is stored"),description:zu.t("Custom retention settings give you complete control over how long files and messages are stored in Slack."),images:ah.storage,ctaTitle:"",ctaAction:$u,ctaURL:Object(mu.b)({articleId:"203457187",zdLocale:t}),name:"data_storage"},apps:{title:zu.t("Connect all your apps and tools to Slack"),description:zu.t("Schedule meetings, file tickets, and more, all without leaving Slack."),images:ah.apps,ctaTitle:"",ctaAction:Ju,ctaURL:"/apps",name:"apps_tools"},calls:{title:zu.t("Keep everyone in sync with group video calls"),description:zu.t("Host daily stand-ups, share docs, and check in with team members all over the world."),images:ah.calls,ctaTitle:"",ctaAction:Zu,ctaURL:Object(mu.b)({articleId:"115003501303",zdLocale:t}),name:"group_calls"},gSuite:{title:zu.t("Let your team sign in with their G Suite account"),description:zu.t("If your team uses G Suite, members can sign in to Slack via their Google account \u2014 no need to remember another password."),images:ah.gSuite,ctaTitle:"",ctaAction:eh,ctaURL:Object(mu.b)({articleId:"204078066",zdLocale:t}),name:"g_suite"},userGroups:{title:zu.t("Organize your team with user groups"),description:zu.t("User groups let you message entire departments at once, by bundling them together in a group \u2014 like @sales or @marketing."),images:ah.userGroups,ctaTitle:"",ctaAction:th,ctaURL:Object(mu.b)({articleId:"212906697",zdLocale:t}),name:"user_groups"}}})(e);return t.reduce((e,t)=>{var n=a[t];return n?e.push(n):Object(na.b)().warn("Invalid key ".concat(t," when fetching benefits data")),e},[])},sh=(e,t)=>rh(e,nh[t]),ih=a("m1aP"),oh=a.n(ih),ch=a("uxXE"),lh=a.n(ch),dh=a("3AZy"),ph=a.n(dh),uh=a("nr7U"),hh=a.n(uh),mh=(a("W5K+"),new b.b("paid_onboarding"));class sidebar_link_SidebarLink extends r.PureComponent{componentDidMount(){this.props.clogPaidBenefits({action:y.UiAction.IMPRESSION,step:y.UiStep.BENEFITS_SIDEBAR,elementType:y.ElementType.LINK,elementName:"sidebar_benefits"}),this.preloadBenefitCardImages()}preloadBenefitCardImages(){Object.keys(ah).forEach(e=>{var t=ah[e];(new Image).src=t[0],(new Image).src=t[1]})}renderContent(){var{featureGgFromTheStart:e,planRenewalLevel:t,trialPlanLevel:a,trialDaysRemaining:n,teamTrialState:r}=this.props;if(!e)return null;var i="",o="";switch(r){case zr.b.PAID:i=t===Vr.f.standard.id?mh.t("You\u2019re on Slack Standard"):mh.t("You\u2019re on Slack Plus"),o=mh.t("See your plan");break;case zr.b.FREE_NO_TRIAL:i=a===Vr.f.standard.id?mh.t("Explore Slack Standard"):mh.t("Explore Slack Plus"),o=mh.t("Try it free for 14-days");break;case zr.b.FREE_EXPIRED_TRIAL:i=a===Vr.f.standard.id?mh.t("Keep Slack Standard?"):mh.t("Keep Slack Plus?"),o=mh.t("Your trial has ended");break;case zr.b.IN_TRIAL:i=a===Vr.f.standard.id?mh.t("Slack Standard Trial"):mh.t("Slack Plus Trial"),o=mh.rt("{trial_days_remaining, plural, =1 {# day} other {# days}} remaining",{trial_days_remaining:n})}return s.a.createElement("span",{className:"p-channel_sidebar__name full_width"},s.a.createElement("span",{className:"overflow_ellipsis bold"},i),s.a.createElement("span",{className:"overflow_ellipsis caption"},o))}renderBackgroundImage(){var{trialPlanLevel:e}=this.props,t=e===Vr.f.standard.id,a=t?"".concat(oh.a," 1x, ").concat(lh.a," 2x"):"".concat(ph.a," 1x, ").concat(hh.a," 2x"),n=h()("position_absolute",{"p-sidebar_link__img_standard":t,"p-sidebar_link__img_plus":!t});return s.a.createElement("img",{className:n,srcSet:a,alt:""})}render(){var{featureGgFromTheStart:e}=this.props;return e?s.a.createElement(r.Fragment,null,this.renderBackgroundImage(),this.renderContent()):null}}sidebar_link_SidebarLink.defaultProps={planRenewalLevel:null,trialDaysRemaining:null};var bh=Object(m.b)(e=>({featureGgFromTheStart:Object(i.m)(e,"feature_gg_from_the_start"),planRenewalLevel:Object(zr.j)(e),trialPlanLevel:Object(zr.m)(e),trialDaysRemaining:Object(zr.w)(e),teamTrialState:Object(zr.v)(e)}),e=>({clogPaidBenefits:function(){return e(Qr(...arguments))}}))(sidebar_link_SidebarLink),_h=(a("thgq"),new b.b("paid_onboarding"));var gh=Object(m.b)(e=>({featureGgFromTheStart:Object(i.m)(e,"feature_gg_from_the_start")}),e=>({clogPaidBenefits:function(){return e(Qr(...arguments))}}))(class benefit_card_BenefitCard extends r.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){var{name:e}=this.props;this.props.clogPaidBenefits({action:y.UiAction.CLICK,step:y.UiStep.BENEFITS_PAGE,elementType:y.ElementType.LINK,elementName:"".concat(e,"_learn_more")})}renderImage(){var{images:e}=this.props,t=e[0],a=e[1];return s.a.createElement("img",{className:"p-benefit_card__image",src:a,srcSet:"".concat(t," 1x, ").concat(a," 2x"),alt:""})}renderCTATitle(){var{featureGgFromTheStart:e}=this.props;return e?s.a.createElement("span",{className:"p-benefit_card__text_link"},s.a.createElement("strong",null,_h.t("Learn More")),s.a.createElement(nt.b,{type:"arrow-right",inline:!0})):null}render(){var{title:e,description:t,ctaURL:a}=this.props;return s.a.createElement("div",{className:"p-benefit_card__container"},s.a.createElement(de.a,{className:"p-benefit_card__card_link","data-qa":"benefit_card_learn_more_link",rel:"noopener noreferrer",href:a,onClick:this.onClick},this.renderImage(),s.a.createElement("div",{className:"p-benefit_card__text"},s.a.createElement("h3",{className:"p-benefit_card__title"},e),s.a.createElement("p",{className:"p-benefit_card__description sk_foreground_max"},t)),this.renderCTATitle()))}}),fh=(a("8zv/"),new b.b("paid_onboarding"));var vh=Object(m.b)(e=>({featureGgFromTheStart:Object(i.m)(e,"feature_gg_from_the_start"),team:Object(B.d)(e),checkoutProductId:Object(zr.k)(e)}),e=>({clogPaidBenefits:function(){return e(Qr(...arguments))}}))(class upgrade_footer_UpgradeFooter extends r.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){var{team:e,checkoutProductId:t}=this.props;Object(X.P)(e,"".concat(Vr.a,"?s=1&p=").concat(t)),this.props.clogPaidBenefits({action:y.UiAction.CLICK,step:y.UiStep.BENEFITS_PAGE,elementType:y.ElementType.BUTTON,elementName:"footer_add_payment_details"})}render(){var{featureGgFromTheStart:e,planLevel:t}=this.props;if(!e)return null;var a=t===Vr.f.standard.id?fh.t("Upgrade to Standard"):fh.t("Upgrade to Plus");return s.a.createElement("div",{className:"p-upgrade_footer align_center"},s.a.createElement("h3",{className:"p-upgrade_footer__heading"},fh.t("Ready to upgrade?")),s.a.createElement("h4",{className:"p-upgrade_footer__subheading"},fh.t("Let\u2019s do it. Just add your payment details and you\u2019ll be set.")),s.a.createElement(T.d,{type:"primary",onClick:this.onClick,"data-qa":"upgrade_footer_button"},a))}}),Oh=(a("WI3T"),{subtitleText:"",subtitleClass:"",bodyContent:null,headerContainerClass:"",primaryButtonText:"",primaryButtonClass:"",onPrimary:U.a,secondaryButtonText:void 0,secondaryButtonClass:"",onSecondary:U.a,secondaryHref:void 0,secondaryTarget:void 0});class paid_benefits_header_PaidBenefitsHeader extends r.PureComponent{constructor(e){super(e),Object(Ft.a)(this,["handlePrimaryButton","handleSecondaryButton"])}handlePrimaryButton(){var{onPrimary:e}=this.props;e()}handleSecondaryButton(){var{onSecondary:e}=this.props;e()}renderTitle(){var{titleText:e}=this.props;return e?s.a.createElement("h1",{className:"p-paid_benefits_header__title"},e):null}renderSubtitle(){var{subtitleText:e,subtitleClass:t}=this.props;if(!e)return null;var a=h()("p-paid_benefits_header__subtitle",t);return s.a.createElement("div",{className:a},e)}renderPrimaryButton(){var{primaryButtonText:e,primaryButtonClass:t}=this.props,a=h()("p-paid_benefits_header__button","p-paid_benefits_header__button--primary",t);return s.a.createElement(T.d,{className:a,onClick:this.handlePrimaryButton,size:"medium","data-qa":"paid_benefits_header_primary_button"},e)}renderSecondaryButton(){var{secondaryButtonClass:e,secondaryButtonText:t,secondaryHref:a,secondaryTarget:n}=this.props,r=h()("p-paid_benefits_header__button","p-paid_benefits_header__button--secondary",e);return s.a.createElement(T.d,{className:r,onClick:this.handleSecondaryButton,href:a,target:n,size:"medium",type:"outline","data-qa":"paid_benefits_header_secondary_button"},t)}render(){var{primaryButtonText:e,secondaryButtonText:t,headerContainerClass:a,bodyContent:n}=this.props,r=h()("p-paid_benefits_header",a);return s.a.createElement("div",{className:r},this.renderTitle(),this.renderSubtitle(),n,s.a.createElement("div",{className:"p-paid_benefits_header__button_container"},t&&this.renderSecondaryButton(),e&&this.renderPrimaryButton()))}}paid_benefits_header_PaidBenefitsHeader.defaultProps=Oh;var yh=paid_benefits_header_PaidBenefitsHeader,Ch=(a("Qsz7"),new b.b("paid_onboarding"));var jh=Object(m.b)(e=>({team:Object(B.d)(e),trialPlanLevel:Object(zr.m)(e),checkoutProductId:Object(zr.k)(e),featureGGFromTheStart:Object(i.m)(e,"feature_gg_from_the_start")}),e=>({clogPaidBenefits:function(){return e(Qr(...arguments))}}))(class post_downgrade_header_PostDowngradeHeader extends r.PureComponent{constructor(e){super(e),Object(Ft.a)(this,["onPrimaryCTAClick","onSecondaryCTAClick"])}onPrimaryCTAClick(){var{team:e,checkoutProductId:t}=this.props;Object(X.P)(e,"".concat(Vr.a,"?s=1&p=").concat(t,"&entry_point=post_downgrade_header")),this.props.clogPaidBenefits({action:y.UiAction.CLICK,step:y.UiStep.BENEFITS_PAGE,elementType:y.ElementType.BUTTON,elementName:"header_add_payment_details",isPrimaryCTA:!0})}onSecondaryCTAClick(){this.props.clogPaidBenefits({action:y.UiAction.CLICK,step:y.UiStep.BENEFITS_PAGE,elementType:y.ElementType.BUTTON,elementName:"get_quote"})}getBody(){var{featureGGFromTheStart:e,trialPlanLevel:t}=this.props;if(!e)return null;var a=[Ch.t("Shared channels have been disconnected"),Ch.t("Guest accounts have been deactivated"),Ch.t("Video calls are now limited to 1-1"),Ch.t("You have access to just your most recent 10,000 messages and your most recent 5GB of files"),Ch.t("Your workspace is now limited to just 10 apps")].map(e=>s.a.createElement("li",{key:e}," ",e," ")),n=[t===Vr.f.standard.id?Ch.t("Want to keep Slack Standard?"):Ch.t("Want to keep Slack Plus?")," ",Ch.rt("Add your payment details today, or <a>learn more about Slack\u2019s paid plans.</a>",null,e=>{var{text:t}=e;return s.a.createElement(de.a,{href:Object(Vr.j)({entryPoint:"benefits_downgrade_header"})},t)})];return s.a.createElement("div",{className:"p-post_downgrade_header__body"},s.a.createElement("ul",null,a),s.a.createElement("p",null,n))}render(){var{featureGGFromTheStart:e,trialPlanLevel:t}=this.props;if(!e)return null;var a=t===Vr.f.standard.id,n=a?Ch.t("Your trial of Slack Standard has ended"):Ch.t("Your trial of Slack Plus has ended"),r=Ch.t("Your workspace has been downgraded to the free plan. Here\u2019s what changed:"),i=a?"p-paid_benefits_header__bg_standard":"p-paid_benefits_header__bg_plus",o="plans/estimate?level=".concat(a?"std":"plus");return s.a.createElement(yh,{titleText:n,subtitleText:r,primaryButtonText:Ch.t("Add Payment Details"),headerContainerClass:i,bodyContent:this.getBody(),onPrimary:this.onPrimaryCTAClick,secondaryButtonText:Ch.t("Get Quote"),secondaryHref:o,secondaryTarget:"_self",onSecondary:this.onSecondaryCTAClick})}}),Eh=new b.b("paid_onboarding");var kh=Object(m.b)(e=>({teamName:Object(X.e)(Object(B.d)(e)),planRenewalLevel:Object(zr.j)(e),featureGGFromTheStart:Object(i.m)(e,"feature_gg_from_the_start")}))(class post_upgrade_header_PostUpgradeHeader extends r.PureComponent{render(){var{featureGGFromTheStart:e,teamName:t,planRenewalLevel:a}=this.props;if(!e)return null;var n=a===Vr.f.standard.id,r=n?Eh.rt("{teamName} is now on Slack Standard",{teamName:t}):Eh.rt("{teamName} is now on Slack Plus",{teamName:t}),i=[Eh.t("Your team is all set with group video calls, shared channels, an unlimited message archive, and more.")," ",n?Eh.t("See what else you get with Standard below."):Eh.t("See what else you get with Plus below.")],o=n?"p-paid_benefits_header__bg_standard":"p-paid_benefits_header__bg_plus";return s.a.createElement(yh,{titleText:r,subtitleText:i,headerContainerClass:o})}}),Sh=new b.b("paid_onboarding");var Ih=Object(m.b)(e=>({featureGGFromTheStart:Object(i.m)(e,"feature_gg_from_the_start")}),e=>({startTrial:t=>e(Object(Da.a)({method:"promo.campaigns.redeem",reason:"start_trial_from_paid_benefits_view",args:{campaign_type:"golden_gate_trial",campaign_sub_type:t}})),clogPaidBenefits:function(){return e(Qr(...arguments))}}))(class free_no_trial_header_FreeNoTrialHeader extends r.PureComponent{constructor(e){super(e),Object(Ft.a)(this,["onPrimaryCTAClick"])}onPrimaryCTAClick(){this.props.startTrial("standard"),this.props.clogPaidBenefits({action:y.UiAction.CLICK,step:y.UiStep.BENEFITS_PAGE,elementType:y.ElementType.BUTTON,elementName:"start_trial",isPrimaryCTA:!0})}render(){var{featureGGFromTheStart:e}=this.props;if(!e)return null;var t=Sh.t("Try Slack Standard for free."),a=Sh.t("Start your 14-day trial and explore features like group video calls, shared channels, and an unlimited, searchable message history."),n=Sh.t("Start Trial");return s.a.createElement(yh,{titleText:t,subtitleText:a,primaryButtonText:n,onPrimary:this.onPrimaryCTAClick})}}),wh=a("A/mR"),Th=new b.b("paid_onboarding");var Nh=Object(m.b)(e=>({trialPlanLevel:Object(zr.m)(e),trialExpirationDate:Object(zr.l)(e),checkoutProductId:Object(zr.k)(e),team:Object(B.d)(e),featureGGFromTheStart:Object(i.m)(e,"feature_gg_from_the_start")}),e=>({clogPaidBenefits:function(){return e(Qr(...arguments))}}))(class in_trial_header_InTrialHeader extends r.PureComponent{constructor(e){super(e),Object(Ft.a)(this,["onPrimaryCTAClick"])}onPrimaryCTAClick(){var{team:e,checkoutProductId:t}=this.props;Object(X.P)(e,"".concat(Vr.a,"?s=1&p=").concat(t,"&entry_point=in_trial_header")),this.props.clogPaidBenefits({action:y.UiAction.CLICK,step:y.UiStep.BENEFITS_PAGE,elementType:y.ElementType.BUTTON,elementName:"header_add_payment_details",isPrimaryCTA:!0})}formatDate(e){var t=Ct()(e).subtract(1,"day");return Object(wh.i)(t,{excludeYear:!0})}render(){var{featureGGFromTheStart:e,team:t,trialPlanLevel:a,trialExpirationDate:n}=this.props;if(!e)return null;var r=Object(X.e)(t),i=this.formatDate(n),o=a===Vr.f.standard.id,c=o?Th.rt("{team_name} is trying Slack Standard",{team_name:r}):Th.rt("{team_name} is trying Slack Plus",{team_name:r}),l=o?Th.rt("Your workspace can use all the features of <b>Slack Standard</b> through <b>{trial_expiry_date}.</b>",{trial_expiry_date:i}):Th.rt("Your workspace can use all the features of <b>Slack Plus</b> through <b>{trial_expiry_date}.</b>",{trial_expiry_date:i}),d=Th.t("Add your payment details to stay on this plan and keep using these features."),p=[l,s.a.createElement("br",null),d],u=o?"p-paid_benefits_header__bg_standard":"p-paid_benefits_header__bg_plus";return s.a.createElement(yh,{titleText:c,subtitleText:p,headerContainerClass:u,primaryButtonText:Th.t("Add Payment Details"),onPrimary:this.onPrimaryCTAClick})}}),Ph=(a("We3W"),new b.b("paid_onboarding"));var Ah=Object(m.b)(e=>({trialPlanLevel:Object(zr.m)(e),teamTrialState:Object(zr.v)(e),benefitsData:sh(e,"standard"),featureGgFromTheStart:Object(i.m)(e,"feature_gg_from_the_start")}),e=>({clogPaidBenefits:function(){return e(Qr(...arguments))}}))(class paid_benefits_view_PaidBenefitsView extends r.PureComponent{componentDidMount(){this.props.clogPaidBenefits({action:y.UiAction.IMPRESSION,step:y.UiStep.BENEFITS_PAGE,elementType:y.ElementType.CLIENT_PAGE,elementName:"paid_benefits_page"})}renderPageHeader(){var{featureGgFromTheStart:e,teamTrialState:t}=this.props;if(!e)return null;var a=null;switch(t){case zr.b.PAID:a=s.a.createElement(kh,null);break;case zr.b.FREE_NO_TRIAL:a=s.a.createElement(Ih,null);break;case zr.b.FREE_EXPIRED_TRIAL:a=s.a.createElement(jh,null);break;case zr.b.IN_TRIAL:a=s.a.createElement(Nh,null)}return a}renderBenefitsHeader(){var{trialPlanLevel:e}=this.props,t=e===Vr.f.standard.id?Ph.t("What can you do with Slack Standard?"):Ph.t("What can you do with Slack Plus?");return s.a.createElement("h4",{className:"p-paid_benefits_view__benefits_header"},s.a.createElement("strong",null,t))}renderBenefitCards(){var{benefitsData:e}=this.props;return e.map(e=>s.a.createElement("div",{className:"p-paid_benefits_view__card",key:e.name},s.a.createElement(gh,e)))}renderPaidBenefits(){return s.a.createElement(r.Fragment,null,this.renderPageHeader(),s.a.createElement("div",{className:"p-paid_benefits_view__page_body","data-qa":"paid_benefits_view_page-body"},this.renderBenefitsHeader(),s.a.createElement("div",{className:"p-paid_benefits_view__card_container","data-qa":"paid_benefits_view_card-container"},this.renderBenefitCards()),this.renderFooter()))}renderFooter(){var{teamTrialState:e,trialPlanLevel:t}=this.props;return e!==zr.b.IN_TRIAL&&e!==zr.b.FREE_EXPIRED_TRIAL?null:s.a.createElement(vh,{planLevel:t})}render(){return s.a.createElement(Ia.a,null,e=>{var{width:t,height:a}=e;return s.a.createElement(ep.b,{width:t,height:a,fade:!0},s.a.createElement("div",{className:"p-paid_benefits_view","data-qa":"paid_benefits_view_container"},this.renderPaidBenefits()))})}});a.d(t,"a",function(){return Rh});var Mh=new b.b("channel_sidebar"),xh={Pcomposer:{label:Object(Tl.a)("Pcomposer"),header:e=>s.a.createElement(Tr,e),headerProps:{forceNarrow:!0},view:()=>s.a.createElement("div",{className:"p-workspace__primary_view_body"},s.a.createElement(ho,null))},Pdrafts:{label:Object(Tl.a)("Pdrafts"),header:e=>s.a.createElement(kr,e),view:()=>s.a.createElement("div",{className:"p-workspace__primary_view_body"},s.a.createElement(Xo,null)),sidebar:{badgeCount:e=>{var t=Object(d.a)(e),a=Object(Or.f)(e);return t.length-a.length},badgeProps:{style:hu.a.transparent},icon:"all-files",isBold:e=>{var t=Object(d.a)(e).map(e=>Object(l.d)(e)),a=Object(Or.f)(e);return Object(n.a)(t,a).length>0},onClick:e=>{e(Jr())}}},Pexample:{label:Object(Tl.a)("Pexample"),view:()=>s.a.createElement("div",{className:"margin_100"},"Hi! This is an example page."),sidebar:{icon:"small-quote",onClick:e=>{},onClickClose:e=>{},getCloseLinkLabel:()=>Mh.t("Dismiss example page",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"})}},Punreads:{label:Object(Tl.a)("Punreads"),header:e=>s.a.createElement(gr.a,e),view:()=>s.a.createElement("div",{className:"p-workspace__primary_view_body"},s.a.createElement(_r,null)),sidebar:{icon:"list",isBold:e=>Object(i.m)(e,"feature_incremental_unread_counts")?Object(c.i)(e):Object(o.d)(e)}},Pwelcome:{isChannelHeaderHidden:()=>!0,sidebar:{icon:"map",onClick:e=>{e(Object(O.f)("sidebar"))},onClickClose:e=>{e(Object(Nr.e)({element:s.a.createElement(Rr,null)})),e(Object(v.a)())},getCloseLinkLabel:()=>Mh.t("Dismiss",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"}),isBold:e=>Object(f.u)(e),renderLinkContent:e=>s.a.createElement(Wr,e),rowHeight:70},label:Object(Tl.a)("Pwelcome"),header:e=>s.a.createElement(Fr,e),view:()=>s.a.createElement(Pt,null)},Papps:{label:Object(Tl.a)("Papps"),header:e=>s.a.createElement(wl,e),view:()=>s.a.createElement(Sl,null),sidebar:{icon:"gn-menu",onClick:e=>{e(Object(qr.a)({eventId:"APP_LAUNCHER_OPEN_FROM_SIDEBAR"}))}},indented:!0},Phome:{label:Object(Tl.a)("Phome"),header:e=>s.a.createElement(mc,e),view:()=>s.a.createElement(uc,null),sidebar:{icon:"home",isBold:e=>Object(Gr.d)(e)}},Pactivity:{label:Object(Tl.a)("Pactivity"),view:()=>s.a.createElement(Ml,null),sidebar:{icon:"bell-o"}},Pstars:{label:Object(Tl.a)("Pstars"),view:()=>s.a.createElement(ad,null),sidebar:{icon:"bookmark"},indented:!0},Pfiles:{label:Object(Tl.a)("Pfiles"),view:()=>s.a.createElement(Od,null),header:e=>s.a.createElement(Ed,e),sidebar:{icon:"all-files-alt"},indented:!0},Pdirectory:{label:Object(Tl.a)("Pdirectory"),view:()=>s.a.createElement(xd,null),header:e=>s.a.createElement(Ld,e),sidebar:{icon:"team-directory"},indented:!0},Pprofile:{label:Object(Tl.a)("Pprofile"),view:()=>s.a.createElement(fp,null),isChannelHeaderHidden:()=>!0,sidebar:{icon:"user-groups"}},Psettings:{label:Object(Tl.a)("Papps"),view:()=>s.a.createElement(Ip,null),header:e=>s.a.createElement(Fp,e),sidebar:{icon:"cog-o"}},"Ppaid-benefits":{isChannelHeaderHidden:()=>!0,label:Object(Tl.a)("Ppaid-benefits"),view:()=>s.a.createElement(Ah,null),sidebar:{icon:"",renderLinkContent:()=>s.a.createElement(bh,null),onClickClose:e=>{e(Object(Kr.c)()),e(Qr({action:y.UiAction.CLICK,step:y.UiStep.BENEFITS_SIDEBAR,elementType:y.ElementType.X,elementName:"close_sidebar_benefits"}))},onClick:e=>{e(Qr({action:y.UiAction.CLICK,step:y.UiStep.BENEFITS_SIDEBAR,elementType:y.ElementType.LINK,elementName:"sidebar_benefits"}))},getCloseLinkLabel:()=>Mh.t("Dismiss"),showCloseButton:e=>Object(zr.v)(e)!==zr.b.IN_TRIAL,rowHeight:54}},"Pbrowse-channels":{label:Object(Tl.a)("Pbrowse-channels"),view:()=>s.a.createElement(browse_channels_page_BrowseChannelsPage,null),header:e=>s.a.createElement(Pp,e),sidebar:{icon:"channel"},indented:!0},"Pbrowse-dms":{label:Object(Tl.a)("Pbrowse-dms"),view:()=>s.a.createElement(xp,null)},"Pbrowse-files":{label:Object(Tl.a)("Pbrowse-files"),view:()=>s.a.createElement(ou,null),header:e=>s.a.createElement(uu,e),sidebar:{icon:"all-files-alt"}},"Pbrowse-people":{label:Object(Tl.a)("Pdirectory"),view:()=>s.a.createElement(ip,null),header:e=>s.a.createElement(dp,e),sidebar:{icon:"team-directory"}},Phelp:{label:Object(Tl.a)("Phelp"),view:()=>s.a.createElement(help_page_HelpPage,null),sidebar:{icon:"question-circle"}},Precent:{label:Object(Tl.a)("Precent"),view:()=>s.a.createElement(Jp,null),header:e=>s.a.createElement($p,e),sidebar:{icon:"clock-o"}}};function Rh(e){return xh[e]||{}}},dBrN:function(e,t,a){},dEjE:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("TSYQ")),i=a.n(s),o=a("RhZ7"),c=a("TOh8"),l=a("0dpy"),d=a("8CL7"),p=a("VrmM"),u=a("fFZG"),h=a("rUi3"),m=a("Aeia"),b=a("Gq2+"),_=a("KmK8"),g=a("lU/5"),f=a("gl+W"),v=(a("dX4D"),{avatarSize:24,className:void 0,flexOrigin:void 0,timestampClickable:!1,timestampFull:!0,timestampRelative:!1,blocksContainerContext:void 0,footer:!0});class ContextualMessage extends n.PureComponent{render(){var{avatarSize:e,className:t,flexOrigin:a,msg:n,timestampClickable:s,timestampFull:v,timestampRelative:O,blocksContainerContext:y,footer:C}=this.props;return r.a.createElement(f.a,{className:i()("c-message_kit__message","c-message_kit__contextual_message",t)},r.a.createElement(g.a,{msg:n},r.a.createElement(_.a,{light:r.a.createElement(o.a,{msg:n,size:e})},r.a.createElement(c.a,{msg:n}),"\xa0\xa0",r.a.createElement(l.a,{msg:n,clickable:s,full:v,relative:O}),r.a.createElement("br",null),r.a.createElement(d.a,{msg:n}),r.a.createElement(p.a,{msg:n,blocksContainerContext:y}),r.a.createElement(b.a,{msg:n}),r.a.createElement(m.b,{msg:n}),r.a.createElement(u.a,{msg:n}),C?r.a.createElement(h.a,{flexOrigin:a,msg:n}):null)))}}ContextualMessage.defaultProps=v,t.a=ContextualMessage},dMq1:function(e,t,a){},dVmK:function(e,t,a){},dX4D:function(e,t,a){},dohy:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("XfeM"),i=a("dhvi"),o=a("ifKl"),c=a("XHGt"),l=(a("aK/h"),a("wd/R")),d=a.n(l),p=a("nNoG"),u=a("HOkk"),h=a("hFPh"),m=a("cTBa"),b=a("llxT"),_=a("O0RF"),g=a("kOzZ"),f=a("negh"),v=a("EMMD"),O=a("mqzt"),y=a("A/mR"),C=a("XL7r"),j=a("/LVU"),E=a("4vzu"),k=(a("1iAE"),new p.b("do_not_disturb")),S={do24hrTime:!1,inDnd:!1,clogger:{track:o.a}};class dnd_dialog_DndDialog extends n.PureComponent{constructor(e){super(e);var t=d()().add(1,"hour").startOf("hour"),a=t.format("YYYY-MM-DD"),n=t.format("HH:mm"),r=d()("".concat(a," ").concat(n)).unix();this.state={snoozeEndDate:a,snoozeEndTime:n,snoozeEndTs:r},this.onDateChange=this.onDateChange.bind(this),this.onTimeChange=this.onTimeChange.bind(this),this.onGo=this.onGo.bind(this)}onDateChange(e){var{snoozeEndTime:t}=this.state;this.setState(()=>({snoozeEndDate:e,snoozeEndTs:d()("".concat(e," ").concat(t)).unix()}))}onTimeChange(e){var{snoozeEndDate:t}=this.state;this.setState(()=>({snoozeEndTime:e,snoozeEndTs:d()("".concat(t," ").concat(e)).unix()}))}onGo(){var{clogger:e,inDnd:t}=this.props,{snoozeEndTs:a}=this.state,n=Object(O.a)(a);n<=0||(this.props.snoozeNotifications({duration:n,reason:"DndDialog:onGo"}),e.track(f.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:n,dnd_preset:f.DndPreset.DURATION_CUSTOM,dnd_snooze_type:t?f.DndSnoozeType.SNOOZE_ADJUST:f.DndSnoozeType.SNOOZE_INITIAL}))}getTimeSelectOptions(){var{do24hrTime:e}=this.props,{snoozeEndDate:t}=this.state,a=t===d()().format("YYYY-MM-DD"),n=d()().format("HH:mm");return Object.keys(v.a).filter(e=>!(a&&e<n)).map(t=>({value:t,label:e?t:v.a[t]}))}render(){var{snoozeEndDate:e,snoozeEndTime:t,snoozeEndTs:a}=this.state,n=Object(O.a)(a)<=0,s=Object(y.i)(a),i=k.t("Pause notifications until\u2026"),o=d()().format("YYYY-MM-DD"),c=d()().add(1,"year").format("YYYY-MM-DD");return r.a.createElement(u.a,{title:i,goButtonText:k.t("Pause Notifications"),goButtonType:"primary",goButtonIsDisabled:n,onGo:this.onGo,showCancelButton:!1},r.a.createElement(_.a,{htmlFor:"dnd_dialog_date_button",text:k.t("Date")},r.a.createElement(h.d,{position:"bottom",offsetX:67,dateFormat:"YYYY-MM-DD",selectedDate:e,onDateChange:this.onDateChange,disableDatesBefore:o,disableDatesAfter:c},r.a.createElement(b.a,{id:"dnd_dialog_date_button",className:"p-dnd_dialog__date_picker_trigger","aria-label":k.t("Date to snooze notifications until")},s))),r.a.createElement(_.a,{htmlFor:"dnd_dialog_time_select",text:k.t("Time")},r.a.createElement(m.b,{id:"dnd_dialog_time_select",options:this.getTimeSelectOptions(),onChange:this.onTimeChange,value:t,useFilteredInput:!1,usePlaceholderOption:!1})))}}dnd_dialog_DndDialog.defaultProps=S;var I={snoozeNotifications:j.e},w=Object(c.b)(e=>({do24hrTime:Object(C.k)(e,"time24"),inDnd:!!Object(E.c)(e),clogger:Object(g.a)({state:e})}),I)(dnd_dialog_DndDialog),T=Object(s.b)("Opens the DND dialog",(e,t,a)=>{e(Object(i.e)({element:r.a.createElement(w,a)}))});T.meta={name:"openDndDialog",key:"actionsOpenDndDialogOpenDndDialog",description:"Opens the DND dialog"},T.propTypes=null;t.a=T},dutO:function(e,t,a){},"e+d/":function(e,t,a){"use strict";var n=new(a("nNoG").b)("files_types");t.a={applescript:{mimeType:"text/applescript",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("AppleScript"):""}},c:{mimeType:"text/x-csrc",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("C"):""},loader:()=>Promise.all([a.e(0),a.e(45)]).then(a.t.bind(null,"S6bl",7))},cfm:{mimeType:"text/plain",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("ColdFusion"):""}},clojure:{mimeType:"text/x-clojure",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Clojure"):""},loader:()=>Promise.all([a.e(0),a.e(47)]).then(a.t.bind(null,"LA1u",7))},coffeescript:{mimeType:"text/x-coffeescript",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("CoffeeScript"):""},loader:()=>Promise.all([a.e(0),a.e(48)]).then(a.t.bind(null,"oL3q",7))},cpp:{mimeType:"text/x-c++src",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("C++"):""},loader:()=>Promise.all([a.e(0),a.e(45)]).then(a.t.bind(null,"S6bl",7))},crystal:{mimeType:"text/x-crystal",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Crystal"):""},loader:()=>Promise.all([a.e(0),a.e(50)]).then(a.t.bind(null,"JRJP",7))},csharp:{mimeType:"text/x-csharp",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("C#"):""},loader:()=>Promise.all([a.e(0),a.e(45)]).then(a.t.bind(null,"S6bl",7))},css:{mimeType:"text/css",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("CSS"):""},loader:()=>Promise.all([a.e(0),a.e(44)]).then(a.t.bind(null,"ewDg",7))},cypher:{mimeType:"application/x-cypher-query",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Cypher"):""},loader:()=>Promise.all([a.e(0),a.e(51)]).then(a.t.bind(null,"vW+e",7))},csv:{mimeType:"text/csv",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("CSV"):""}},d:{mimeType:"text/x-d",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("D"):""},loader:()=>Promise.all([a.e(0),a.e(52)]).then(a.t.bind(null,"zRyg",7))},dart:{mimeType:"text/x-dart",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Dart"):""},loader:()=>Promise.all([a.e(0),a.e(45),a.e(53)]).then(a.t.bind(null,"6q/U",7))},diff:{mimeType:"text/x-diff",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Diff"):""},loader:()=>Promise.all([a.e(0),a.e(54)]).then(a.t.bind(null,"3fnu",7))},dockerfile:{mimeType:"text/x-dockerfile",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Docker"):""},loader:()=>Promise.all([a.e(0),a.e(55)]).then(a.t.bind(null,"R6x9",7))},erlang:{mimeType:"text/x-erlang",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Erlang"):""},loader:()=>Promise.all([a.e(0),a.e(56)]).then(a.t.bind(null,"9RTS",7))},fortran:{mimeType:"text/x-fortran",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Fortran"):""},loader:()=>Promise.all([a.e(0),a.e(57)]).then(a.t.bind(null,"UYub",7))},fsharp:{mimeType:"text/x-fsharp",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("F#"):""},loader:()=>Promise.all([a.e(0),a.e(68)]).then(a.t.bind(null,"NU+Z",7))},gherkin:{mimeType:"text/x-feature",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Gherkin"):""},loader:()=>Promise.all([a.e(0),a.e(58)]).then(a.t.bind(null,"tkAH",7))},go:{mimeType:"text/x-go",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Go"):""},loader:()=>Promise.all([a.e(0),a.e(59)]).then(a.t.bind(null,"T/QY",7))},groovy:{mimeType:"text/x-groovy",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Groovy"):""},loader:()=>Promise.all([a.e(0),a.e(60)]).then(a.t.bind(null,"X7TR",7))},handlebars:{mimeType:"text/x-handlebars-template",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Handlebars"):""},loader:()=>Promise.all([a.e(0),a.e(61)]).then(a.t.bind(null,"4d6s",7))},haskell:{mimeType:"text/x-haskell",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Haskell"):""},loader:()=>Promise.all([a.e(0),a.e(62)]).then(a.t.bind(null,"0+DK",7))},haxe:{mimeType:"text/x-haxe",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Haxe"):""},loader:()=>Promise.all([a.e(0),a.e(63)]).then(a.t.bind(null,"We/1",7))},html:{mimeType:"text/html",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("HTML"):""},loader:()=>Promise.all([a.e(0),a.e(44),a.e(46),a.e(64)]).then(a.t.bind(null,"1p+/",7))},java:{mimeType:"text/x-java",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Java"):""},loader:()=>Promise.all([a.e(0),a.e(45)]).then(a.t.bind(null,"S6bl",7))},javascript:{mimeType:"text/javascript",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("JavaScript/JSON"):""},loader:()=>Promise.all([a.e(0),a.e(46),a.e(102)]).then(a.t.bind(null,"+dQi",7))},jsx:{mimeType:"text/jsx",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("JSX"):""},loader:()=>Promise.all([a.e(0),a.e(46),a.e(102)]).then(a.t.bind(null,"onn/",7))},julia:{mimeType:"text/x-julia",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Julia"):""},loader:()=>Promise.all([a.e(0),a.e(65)]).then(a.t.bind(null,"NGrM",7))},kotlin:{mimeType:"text/x-kotlin",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Kotlin"):""},loader:()=>Promise.all([a.e(0),a.e(45)]).then(a.t.bind(null,"S6bl",7))},latex:{mimeType:"text/x-stex",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("LaTeX/sTeX"):""},loader:()=>Promise.all([a.e(0),a.e(83)]).then(a.t.bind(null,"+NIl",7))},lisp:{mimeType:"text/x-lisp",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Lisp"):""},loader:()=>Promise.all([a.e(0),a.e(49)]).then(a.t.bind(null,"kmAK",7))},lua:{mimeType:"text/x-lua",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Lua"):""},loader:()=>Promise.all([a.e(0),a.e(66)]).then(a.t.bind(null,"jrMQ",7))},markdown:{mimeType:"text/x-markdown",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Markdown (raw)"):""},loader:()=>Promise.all([a.e(0),a.e(91)]).then(a.t.bind(null,"lZu9",7))},mathematica:{mimeType:"text/x-mathematica",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Mathematica"):""},loader:()=>Promise.all([a.e(0),a.e(67)]).then(a.t.bind(null,"ztbM",7))},matlab:{mimeType:"text/x-octave",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("MATLAB"):""},loader:()=>Promise.all([a.e(0),a.e(70)]).then(a.t.bind(null,"mybg",7))},mumps:{mimeType:"text/x-mumps",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("MUMPS"):""},loader:()=>Promise.all([a.e(0),a.e(69)]).then(a.t.bind(null,"Q7su",7))},objc:{mimeType:"text/x-objectivec",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Objective-C"):""},loader:()=>Promise.all([a.e(0),a.e(45)]).then(a.t.bind(null,"S6bl",7))},ocaml:{mimeType:"text/x-ocaml",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("OCaml"):""},loader:()=>Promise.all([a.e(0),a.e(68)]).then(a.t.bind(null,"NU+Z",7))},pascal:{mimeType:"text/x-pascal",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Pascal"):""},loader:()=>Promise.all([a.e(0),a.e(71)]).then(a.t.bind(null,"lB9V",7))},perl:{mimeType:"text/x-perl",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Perl"):""},loader:()=>Promise.all([a.e(0),a.e(92)]).then(a.t.bind(null,"kG+r",7))},php:{mimeType:"application/x-httpd-php",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("PHP"):""},loader:()=>Promise.all([a.e(0),a.e(44),a.e(46),a.e(45),a.e(95)]).then(a.t.bind(null,"RNWO",7))},pig:{mimeType:"text/x-pig",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Pig"):""},loader:()=>Promise.all([a.e(0),a.e(72)]).then(a.t.bind(null,"860+",7))},powershell:{mimeType:"text/x-powershell",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("PowerShell"):""},loader:()=>Promise.all([a.e(0),a.e(73)]).then(a.t.bind(null,"naPG",7))},puppet:{mimeType:"text/x-puppet",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Puppet"):""},loader:()=>Promise.all([a.e(0),a.e(74)]).then(a.t.bind(null,"cwoo",7))},python:{mimeType:"text/x-python",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Python"):""},loader:()=>Promise.all([a.e(0),a.e(75)]).then(a.t.bind(null,"25Eh",7))},r:{mimeType:"text/x-rsrc",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("R"):""},loader:()=>Promise.all([a.e(0),a.e(76)]).then(a.t.bind(null,"kD6b",7))},ruby:{mimeType:"text/x-ruby",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Ruby"):""},loader:()=>Promise.all([a.e(0),a.e(77)]).then(a.t.bind(null,"hTYL",7))},rust:{mimeType:"text/x-rustsrc",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Rust"):""},loader:()=>Promise.all([a.e(0),a.e(78)]).then(a.t.bind(null,"sY4N",7))},sass:{mimeType:"text/x-sass",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Sass"):""},loader:()=>Promise.all([a.e(0),a.e(44),a.e(79)]).then(a.t.bind(null,"G2Pi",7))},scala:{mimeType:"text/x-scala",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Scala"):""},loader:()=>Promise.all([a.e(0),a.e(45)]).then(a.t.bind(null,"S6bl",7))},scheme:{mimeType:"text/x-scheme",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Scheme"):""},loader:()=>Promise.all([a.e(0),a.e(80)]).then(a.t.bind(null,"8wdy",7))},shell:{mimeType:"text/x-sh",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Shell"):""},loader:()=>Promise.all([a.e(0),a.e(81)]).then(a.t.bind(null,"AvDn",7))},smalltalk:{mimeType:"text/x-stsrc",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Smalltalk"):""},loader:()=>Promise.all([a.e(0),a.e(82)]).then(a.t.bind(null,"n4Nj",7))},sql:{mimeType:"text/x-sql",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("SQL"):""},loader:()=>Promise.all([a.e(0),a.e(94)]).then(a.t.bind(null,"/9rB",7))},swift:{mimeType:"text/x-swift",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Swift"):""},loader:()=>Promise.all([a.e(0),a.e(84)]).then(a.t.bind(null,"wOIU",7))},tsv:{mimeType:"text/tab-separated-values",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("TSV"):""}},typescript:{mimeType:"text/typescript",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("TypeScript"):""},loader:()=>Promise.all([a.e(0),a.e(46),a.e(102)]).then(a.t.bind(null,"+dQi",7))},tsx:{mimeType:"text/typescript-jsx",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("TSX"):""},loader:()=>Promise.all([a.e(0),a.e(46),a.e(102)]).then(a.t.bind(null,"onn/",7))},vb:{mimeType:"text/x-vb",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("VB.NET"):""},loader:()=>Promise.all([a.e(0),a.e(85)]).then(a.t.bind(null,"Kr55",7))},vbscript:{mimeType:"text/vbscript",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("VBScript"):""},loader:()=>Promise.all([a.e(0),a.e(86)]).then(a.t.bind(null,"axah",7))},velocity:{mimeType:"text/x-velocity",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Velocity"):""},loader:()=>Promise.all([a.e(0),a.e(87)]).then(a.t.bind(null,"/kYp",7))},verilog:{mimeType:"text/x-verilog",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("Verilog"):""},loader:()=>Promise.all([a.e(0),a.e(88)]).then(a.t.bind(null,"m2bc",7))},xml:{mimeType:"text/xml",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("XML"):""},loader:()=>Promise.all([a.e(0),a.e(89)]).then(a.t.bind(null,"1eCo",7))},yaml:{mimeType:"text/x-yaml",label:function(){var{featureSonicSnippets:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?n.t("YAML"):""},loader:()=>Promise.all([a.e(0),a.e(90)]).then(a.t.bind(null,"ztCB",7))}}},e31y:function(e,t,a){},e3Uf:function(e,t,a){},eK75:function(e,t,a){"use strict";var n=a("fCVm");t.a=(()=>Object(n.a)().r)},eZdM:function(e,t,a){},ejm9:function(e,t,a){},erm0:function(e,t,a){},exfU:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("od5y")),i=a("vSXf"),o=a("nNoG"),c=(a("ixEi"),new o.b("offline_mode"));function l(e){var{featureOfflineMode:t,caption:a}=e;return t?r.a.createElement("div",{className:"p-inline_offline_indicator"},r.a.createElement("span",null,r.a.createElement(s.b,{type:"cloud-offline-small",size:"inherit"})," ",r.a.createElement("strong",null,c.t("No connection."))," ",a||c.t("Go online to load more messages."))):null}l.defaultProps={caption:void 0},t.a=Object(i.a)("feature_offline_mode")(l)},fCVm:function(e,t,a){"use strict";a.d(t,"d",function(){return r}),a.d(t,"e",function(){return s}),a.d(t,"b",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"a",function(){return c});var n=a("Sb2x"),r=n.TSF.replaceFormatContents,s=n.TSF.swapOutPlaceholders,i=n.TSF.getTokensArray,o=n.TSF.getTokensString,c=n.TSF.getEmojiRx},fFZG:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("XHGt")),i=a("TSYQ"),o=a.n(i),c=a("oqAd"),l=a("Q+UV"),d=(a("2Dlx"),{className:void 0,reactionKey:null,latestMessageTsWithReactions:void 0});class MessageReactionBar extends n.PureComponent{render(){var{msg:e,className:t,reactionKey:a,latestMessageTsWithReactions:n}=this.props,s=o()("c-message_kit__reaction_bar",t),i=n&&n===e.ts;return r.a.createElement(c.a,{className:s,reactionKey:a,isLatestReactionInChannel:i})}}MessageReactionBar.defaultProps=d;t.a=Object(s.b)((e,t)=>{var{msg:a}=t;return a?{reactionKey:Object(l.b)(a)}:null})(MessageReactionBar)},fHJC:function(e,t,a){},fX3E:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=(a("aK/h"),a("XHGt")),o=a("1hAG"),c=a("t85p"),l=a("h9PG"),d=a("e4Fz"),p=a("nNoG"),u=a("zlNY"),h=a("od5y"),m=(a("1lYC"),new p.b("files")),b=new p.b("search"),_={filetype:"",onChange:n.a,featureRemoteFilesApi:!1,featureDocs:!1,showEmail:!1};class FileTypeSelect extends r.PureComponent{constructor(e){super(e),this.onChange=this.onChange.bind(this),this.labelId="file_type_select_".concat(Object(d.d)()),this.state={label:null}}onChange(e,t,a){this.setState(()=>({label:t})),this.props.onChange(e,t,a)}render(){var e=s.a.createElement(r.Fragment,null,m.rt("Show <strong>all file types</strong>",{fallbackHash:"30266588dc5ca2b69979f4afa079509cd409568e"}));return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"offscreen",id:this.labelId},b.t("File type")," ",s.a.createElement("span",null,"- ",this.state.label?this.state.label:e)),s.a.createElement(u.d,{className:"p-file_list__select p-file_list__file_type_select",optionClassName:"p-file_list__option",placeholder:e,onChange:this.onChange,value:this.props.filetype,maxOptionsListHeight:1/0,useFilteredInput:!1,useFullWidthOptions:!0,wrapperClassName:"p-file_list__select_wrapper",labelId:this.labelId,options:[{label:s.a.createElement(r.Fragment,null,s.a.createElement(h.b,{type:"create-post"}),m.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"})),labelText:m.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"}),value:this.props.featureDocs?"docs":"posts"},{label:s.a.createElement(r.Fragment,null,s.a.createElement(h.b,{type:"create-snippet"}),m.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"})),labelText:m.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"}),value:"snippets"},...this.props.showEmail?[{label:s.a.createElement(r.Fragment,null,s.a.createElement(h.b,{type:"envelope-o"}),m.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"})),labelText:m.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"}),value:"emails"}]:[],{label:s.a.createElement(r.Fragment,null,s.a.createElement(h.b,{type:"image"}),m.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"})),labelText:m.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"}),value:"images"},{label:s.a.createElement(r.Fragment,null,s.a.createElement(h.b,{type:"play"}),m.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"})),labelText:m.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"}),value:"videos"},{label:s.a.createElement(r.Fragment,null,s.a.createElement(h.b,{type:"book"}),m.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"})),labelText:m.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"}),value:"pdfs"},{label:s.a.createElement(r.Fragment,null,s.a.createElement(h.b,{type:"file"}),m.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"})),labelText:m.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"}),value:"spreadsheets"},...this.props.featureRemoteFilesApi?[{label:s.a.createElement(r.Fragment,null,s.a.createElement(h.b,{type:"file"}),m.t("Presentations")),labelText:m.t("Presentations"),value:"presentations"},{label:s.a.createElement(r.Fragment,null,s.a.createElement(h.b,{type:"file"}),m.t("Documents")),labelText:m.t("Documents"),value:"documents"}]:[],{label:s.a.createElement(r.Fragment,null,s.a.createElement(h.b,{type:"google-drive"}),m.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"})),labelText:m.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"}),value:"gdocs"}]}))}}FileTypeSelect.defaultProps=_,t.a=Object(i.b)(e=>({featureDocs:Object(c.m)(e,"feature_docs"),featureRemoteFilesApi:Object(c.m)(e,"feature_remote_files_api"),showEmail:!!Object(o.d)(e).plan&&!Object(l.a)(e,"disable_email_ingestion")}))(FileTypeSelect)},fYpC:function(e,t,a){},fj0Z:function(e,t,a){"use strict";a.d(t,"a",function(){return WorkspaceBootFailure});var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("od5y")),i=a("XLFM"),o=a("LrgL"),c=a("nNoG"),l=a("YB7p"),d=(a("tEVE"),new c.b("sonic_workspace_boot_failure"));class WorkspaceBootFailure extends n.PureComponent{renderAccessLimitedView(){var{shouldRetry:e}=this.props,t=e&&r.a.createElement("div",{className:"p-fallback_view__reload"},r.a.createElement(i.d,{type:"outline",size:"medium",onClick:l.a},d.t("Try Again")));return r.a.createElement("div",{className:"p-workspace__boot_failure"},r.a.createElement(s.b,{type:"warning",className:"p-workspace__boot_failure_icon"}),r.a.createElement("h1",{className:"p-workspace__boot_failure_title"},d.t("Your current network has blocked this workspace.")),r.a.createElement("p",{className:"p-workspace__boot_failure_description"},d.t("Your current network will only allow you to access certain Slack workspaces (usually, just the ones you use for work)."),r.a.createElement("br",null),r.a.createElement("br",null),d.t("To get connected, change networks and try again.")),t)}renderGenericView(){var{shouldRetry:e}=this.props,t=d.t("contact us"),a=e&&r.a.createElement("div",{className:"p-fallback_view__reload"},r.a.createElement(i.d,{type:"outline",size:"medium",onClick:l.a},d.t("Reload")));return r.a.createElement("div",{className:"p-workspace__boot_failure"},r.a.createElement(s.b,{type:"exclamation-circle",className:"p-workspace__boot_failure_icon"}),r.a.createElement("h1",{className:"p-workspace__boot_failure_title"},d.t("Something\u2019s gone awry, and we\u2019re having trouble loading your workspace.")),r.a.createElement("p",{className:"p-workspace__boot_failure_description"},d.rt("Sorry we can\u2019t be more specific \u2014 this is one of those cases where we don\u2019t know what\u2019s gone wrong either. A restart of Slack may help, and you can always {contactLink}.",{contactLink:r.a.createElement(o.a,{href:"https://slack.com/help/contact"},t)})),a)}render(){return this.props.isAccessLimited?this.renderAccessLimitedView():this.renderGenericView()}}WorkspaceBootFailure.defaultProps={shouldRetry:!1,isAccessLimited:!1}},ftfc:function(e,t,a){"use strict";var n=a("rePB"),r=a("ifKl"),s=a("q1tI"),i=a.n(s),o=a("XHGt"),c=(a("aK/h"),a("nNoG")),l=a("Idin"),d=a("M1FR"),p=a("pguY"),u=(e,t)=>{var a=Math.min(t||5e5,5e5);return e.length>a?Object(p.a)(e.slice(0,a)):Object(p.a)(e)},h=a("1hAG"),m=a("81nI"),b=a("7nxQ"),_=a("kOzZ"),g=a("zmn3"),f=a("TSYQ"),v=a.n(f),O=a("uPpK"),y=a("tn36"),C=a("qPro"),j=a("tQ8E"),E=a("cD5Y"),k=a("od5y"),S=a("ynxK"),I=a("lek6"),w=e=>i.a.createElement("div",null,i.a.createElement(S.a,{"data-qa":"article-".concat(e.article.id),className:"p-help_search__list__item ".concat(e.isFocus?"p-help_search__list__item__focus":""),key:"".concat(e.article.id,"-list-item"),onClick:()=>{e.onClickArticle(e.article.url)},onKeyDown:t=>{13===t.keyCode&&e.onClickArticle(e.article.url)}},i.a.createElement("div",{className:"p-help_search__list__item__title"},"string"==typeof e.article.title?i.a.createElement(I.a,{className:"c-channel_search_result__justification",text:e.article.title,showTooltips:!1}):e.article.title),i.a.createElement(k.b,{type:"enter",className:"p-help_search__list__icon"})));w.defaultProps={article:{},isFocus:!1,onClickArticle:r.a};var T=w,N=(a("nTMe"),new c.b("help")),P={query:"",helpCenterToken:"",articles:[],tickets:{closed:0,read:0,unread:0},onQueryChange:r.a,isLoading:!1,onOpenLink:r.a,autoFocus:!1,noTopMargin:!1,noBottomMargin:!1};class help_search_HelpSearch extends s.Component{constructor(e){super(e),this.state={query:this.props.query,articles:this.props.articles,focusFirstResult:!0,isLoading:this.props.isLoading},this.zdLocale=Object(b.a)(),Object(y.a)(this,["onListMouseEnter","onSearchInputChange","onSearchInputSubmit","onClickArticle","onSearchInputBlur","renderArticles"])}onClickArticle(e){var{url:t,index:a,articleId:n}=e;this.openLinkInNewWindow({url:Object(m.a)(t,this.props.helpCenterToken),index:a,articleId:n})}onListMouseEnter(){this.setState(()=>({focusFirstResult:!1}))}onSearchInputBlur(){this.setState(()=>({focusFirstResult:!1}))}onSearchInputChange(e){var t=e.target.value;this.setState(()=>({query:t,focusFirstResult:!0})),this.props.onQueryChange(t)}onSearchInputSubmit(){this.state.articles.length&&this.openLinkInNewWindow({url:Object(m.a)(this.state.articles[0].url,this.props.helpCenterToken),isFromSubmit:!0,index:0,articleId:this.state.articles[0].id})}UNSAFE_componentWillReceiveProps(e){e.articles!==this.state.articles&&this.setState(()=>({articles:e.articles,isLoading:e.isLoading}))}openLinkInNewWindow(e){var{url:t,index:a,isFromSubmit:n,articleId:r}=e,{onOpenLink:s}=this.props;s({url:t,query:this.state.query,index:a,isFromSubmit:n,articleId:r}),window.open(Object(m.a)(t,this.props.helpCenterToken))}renderArticles(e){var{articles:t}=this.state,a=t[e];return i.a.createElement(T,{article:a,isFocus:this.state.focusFirstResult&&0===e,onClickArticle:t=>this.onClickArticle({url:t,index:e,articleId:a.id})})}render(){var{autoFocus:e,noTopMargin:t,noBottomMargin:a}=this.props,{query:n,articles:r}=this.state;this.keys=Object(g.a)(r,"id").map(e=>e.toString());var o=v()({margin_top_200:!t,margin_bottom_100:!a});return i.a.createElement(s.Fragment,null,i.a.createElement(C.a,{placeholder:N.t("Search the Help Center"),value:n,icon:"search",autoFocus:e,hasResetButton:!0,onChange:this.onSearchInputChange,onSubmit:this.onSearchInputSubmit,blurOnSubmit:!0,className:o,size:"large",onBlur:this.onSearchInputBlur}),n?null:i.a.createElement("div",{className:"p-help_search__popular_topics padding_bottom_100 bold"},N.t("Popular help topics")),i.a.createElement("div",{role:"list",className:"p-help_search__list display_flex flex_direction_column justify_content_between",onMouseEnter:this.onListMouseEnter},this.state.isLoading?i.a.createElement(E.a,{size:"large",color:"blue",noMargin:!0}):i.a.createElement("div",{className:"p-help_search__list__inner full_height"},i.a.createElement(O.a,null,e=>{var{width:t,height:a}=e;return i.a.createElement(j.a,{width:t,height:a,keys:this.keys,rowRenderer:this.renderArticles})}))))}}help_search_HelpSearch.defaultProps=P;var A=help_search_HelpSearch;function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var x=new c.b("help"),R={query:"",helpCenterTrackingToken:"",fetchHelpArticles:r.a,autoFocus:!1,onQueryChange:r.a,defaultArticlesData:null,onOpenLink:r.a,noTopMargin:!1,noBottomMargin:!1};function D(e){return"number"==typeof e||"helplink"===e.type?e.id||e:null}class help_search_container_HelpSearchContainer extends s.Component{constructor(e){super(e),this.state={query:this.props.query,articles:[],isLoading:!0},this.allArticles=[],this.onQueryChange=this.onQueryChange.bind(this),this.zdLocale=Object(b.a)()}componentDidMount(){this.fetchHelpArticles({reason:"help-search-container/componentDidMount"})}componentDidUpdate(e){e.defaultArticlesData!==this.props.defaultArticlesData&&this.fetchHelpArticles({reason:"help-search-container/componentDidUpdate"})}onQueryChange(e){var t=e?this.filterArticlesByQuery(e):this.defaultArticles;if(e&&t.length<7){var a=Object(m.b)({query:e,zdLocale:this.zdLocale,sidTrackingToken:this.props.helpCenterTrackingToken});t.push({id:-99999,images:[],label_names:[],title:x.rt('Search for "{query}" on the Help Center',{query:e}),url:a})}this.setState(()=>({query:e,articles:t})),this.props.onQueryChange(e)}filterPopularArticles(e){var t=[];return e.forEach(e=>{e.popular&&t.push(e)}),t.sort((e,t)=>void 0===e.order?1:void 0===t.order?-1:e.order-t.order),t}filterDefaultArticles(e){var{defaultArticlesData:t}=this.props;if(!t)return[];var a={};return t.forEach(t=>{var n=D(t);n&&(a[n]=e.find(e=>e.id===n))}),t.map((e,t)=>{var r=D(e);return r&&a[r]?"number"==typeof e?a[r]:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a[r],{title:e.text||a[r].title}):{id:"customArticle-".concat(t),title:e.text,url:e.url}}).filter(e=>!!e.url)}filterArticlesByQuery(e){var t=u(e),a=new RegExp(t,"i"),n=-1,r=this.allArticles.filter((e,r)=>e.title.toLowerCase()===t.toLowerCase()?(n=r,!1):e.title.match(a));return-1!==n&&r.unshift(this.allArticles[n]),r}processArticles(e){try{this.allArticles=JSON.parse(e.articles).articles}catch(t){this.allArticles=[]}this.defaultArticles=this.props.defaultArticlesData?this.filterDefaultArticles(this.allArticles):this.filterPopularArticles(this.allArticles),this.state.query?this.setState(()=>({articles:this.filterArticlesByQuery(this.props.query),isLoading:!1})):this.setState(()=>({articles:this.defaultArticles,isLoading:!1}))}fetchHelpArticles(){this.props.fetchHelpArticles({locale:this.zdLocale,reason:"help-search-container/fetchHelpArticles"}).then(e=>{this.processArticles(e)})}render(){var{articles:e,query:t,isLoading:a}=this.state,{clogger:n,autoFocus:r,onOpenLink:s,noTopMargin:o,noBottomMargin:c}=this.props;return i.a.createElement(A,{articles:e,query:t,autoFocus:r,helpCenterToken:this.props.helpCenterTrackingToken,onQueryChange:this.onQueryChange,isLoading:a,clogger:n,onOpenLink:s,noTopMargin:o,noBottomMargin:c})}}help_search_container_HelpSearchContainer.defaultProps=R;var F={fetchHelpArticles:l.a},L=Object(o.b)(e=>({clogger:Object(_.a)({state:e}),helpCenterTrackingToken:Object(d.b)(e),team:Object(h.d)(e)}),F)(help_search_container_HelpSearchContainer);t.a=L},fxy3:function(e,t,a){},g9Y9:function(e,t,a){"use strict";var n=a("wx14"),r=a("lE2N"),s=a("q1tI"),i=a.n(s),o=(a("aK/h"),a("XHGt")),c=a("lhZz"),l=a("CF4u"),d=a("brL+"),p=a("S3eg"),u=a("+Sjy"),h=a("ceeJ"),m=a("+1yX"),b=a("/K2e"),_=a("vPEJ"),g=(a("+dXq"),e=>{var{menuProps:t,history:a,teamId:s,dispatch:o}=e,c=Object(r.a)(a.filter(e=>e.teamId===s&&!!e.primaryView),"primaryView").slice(1,20),l=e=>{var t=e.primaryView;return"Vall_threads"===t?"Threads":Object(u.f)(t)?Object(h.a)(t).label():Object(m.a)(t)?i.a.createElement(_.a,{channelId:t}):t},d=[{type:"header",label:"Recently Viewed"},...c.map(e=>({label:l(e),click:()=>o(Object(p.a)({id:e.primaryView}))}))];return i.a.createElement(b.a,Object(n.a)({},t,{template:d,menuClassNames:"p-history_menu"}))});g.defaultProps={history:[]};t.a=Object(o.b)(e=>({history:Object(l.b)(Object(c.getStateForClientStore)()),teamId:Object(d.b)(e)}))(g)},gBrz:function(e,t,a){},ge2f:function(e,t,a){e.exports=a.p+"apps-abefb2a.png"},"gl+W":function(e,t,a){"use strict";a.d(t,"a",function(){return MessagePillow});var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("TSYQ")),i=a.n(s),o=a("Q3oM"),c=(a("aQya"),{className:void 0,children:void 0});class MessagePillow extends n.PureComponent{render(){var e=i()("c-message_kit__pillow",this.props.className);return r.a.createElement(o.a,{className:e},this.props.children)}}MessagePillow.defaultProps=c},gmRt:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"c",function(){return s}),a.d(t,"a",function(){return i});var n=a("U/ze"),r=Object(n.b)(e=>e&&e.unreadsView&&e.unreadsView.newUnreadMsgCount);r.meta={name:"getNewUnreadMsgCount",key:"unreadsViewStoreSelectorsGetNewUnreadMsgCount"};var s=Object(n.b)(e=>e&&e.unreadsView&&e.unreadsView.refreshId);s.meta={name:"getRefreshId",key:"unreadsViewStoreSelectorsGetRefreshId"};var i=Object(n.b)(e=>e&&e.unreadsView&&e.unreadsView.focusRequestedThreadKey);i.meta={name:"getFocusRequestedThreadKey",key:"unreadsViewStoreSelectorsGetFocusRequestedThreadKey"}},gtcZ:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("fp5s"),r=a("f8fv"),s=a("Zr7G"),i=a("eK5+");function o(e,t){return class extends e{constructor(a){super(a),this.uniqueId=Object(n.a)(),this.name=Object(r.a)(e.name),this.telemeter=Object(s.a)(),this.logMetrics=this.telemeter&&Object(i.a)(1),this.label=t||"react_".concat(this.name)}UNSAFE_componentWillMount(){this.logMetrics&&this.telemeter.mark("".concat(this.label,"_mount_mark_").concat(this.uniqueId)),super.UNSAFE_componentWillMount&&super.UNSAFE_componentWillMount(...arguments)}componentDidMount(){super.componentDidMount&&super.componentDidMount(...arguments),this.logMetrics&&this.telemeter.measureAndClear("".concat(this.label,"_mount_mark_").concat(this.uniqueId),"".concat(this.label,"_mount"))}UNSAFE_componentWillUpdate(){this.logMetrics&&this.telemeter.mark("".concat(this.label,"_update_mark_").concat(this.uniqueId)),super.UNSAFE_componentWillUpdate&&super.UNSAFE_componentWillUpdate(...arguments)}componentDidUpdate(){super.componentDidUpdate&&super.componentDidUpdate(...arguments),this.logMetrics&&this.telemeter.measureAndClear("".concat(this.label,"_update_mark_").concat(this.uniqueId),"".concat(this.label,"_update"))}}}},guIn:function(e,t,a){"use strict";function n(e){return!(!e||"-"===e)}a.d(t,"a",function(){return n})},guKx:function(e,t,a){},guNz:function(e,t,a){},h0LD:function(e,t,a){"use strict";var n=a("XfeM"),r=a("fYfO"),s=a("4M+g"),i=a("aK/h"),o=a("yHhI"),c=a("r31G"),l=Object(n.b)("log message to console (for debugging)",function(e,t){var{channelId:a,ts:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t(),l=Object(r.a)(i,a,n),d=Object(s.e)(i,a);l&&(Object(o.a)({getState:t}).warn(l),e(Object(c.e)({message:l,modelObject:d})))});l.meta={name:"logMessage",key:"actionsLogMessageLogMessage",description:"log message to console (for debugging)"},l.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired},t.a=l},h2AX:function(e,t,a){},hCXE:function(e,t,a){},hOGb:function(e,t,a){"use strict";a.d(t,"b",function(){return _}),a.d(t,"a",function(){return g});var n=a("wx14"),r=a("Ff2n"),s=a("q1tI"),i=a.n(s),o=a("TSYQ"),c=a.n(o),l=a("XHGt"),d=(a("aK/h"),a("od5y")),p=a("nNoG"),u=a("Lev8"),h=(a("VmKF"),new p.b("keyboard_key")),m={"\u2191":!0,"\u2193":!0,"\u2190":!0,"\u2192":!0},b={"\u2191":"caret-up","\u2193":"caret-down","\u2190":"caret-left","\u2192":"caret-right",Cmd:"cmd-small"},_=e=>{return{"\u2191":h.t("up arrow"),"\u2193":h.t("down arrow"),"\u2190":h.t("left arrow"),"\u2192":h.t("right arrow"),Ctrl:h.t("Control"),Cmd:h.t("Command"),".":h.t("period"),"[":h.t("left bracket"),"]":h.t("right bracket"),"+":h.t("plus"),"-":h.t("minus"),Esc:h.t("Escape"),Strg:"Steuerung"}[e]||e},g=e=>{var{label:t,className:a,slim:n,backgroundStyle:r}=e;if(t){var s=m[t],o=c()(a,{"c-keyboard_key":!0,"c-keyboard_key__arrow_key":s,"c-keyboard_key--slim":n,"c-keyboard_key--dark":"dark"===r}),l=_(t),p=h.t("{keyName} key",{keyName:l});return i.a.createElement("div",{role:"img","aria-label":p,className:o},b[t]?i.a.createElement(d.b,{type:b[t],size:n?"inherit":20,inline:n}):t)}};g.defaultProps={className:void 0,slim:!1,backgroundStyle:"light"};var f=e=>{var{backgroundStyle:t,clientTheme:a}=e,s=Object(r.a)(e,["backgroundStyle","clientTheme"]),o="dark"===t||"dark"===a?"dark":"light";return i.a.createElement(g,Object(n.a)({backgroundStyle:o},s))};f.defaultProps={className:void 0,slim:!1,backgroundStyle:"light",clientTheme:"light"};Object(l.b)(e=>({clientTheme:Object(u.c)(e)}))(f)},hQtm:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("XHGt")),i=a("tn36"),o=a("HvGc"),c=a("BUzq"),l=a("b7Ww"),d=a("OISv"),p=a("CaXY"),u=a("uvIC"),h=a("dEjE"),m={className:void 0,comment:void 0};class pinned_item_file_comment_PinnedItemFileComment extends n.PureComponent{render(){var{comment:e,fileId:t,className:a}=this.props;if(!e)return null;var n={user:e.user,ts:e.timestamp.toString(),subtype:"file_comment",comment:e,files:[t]};return r.a.createElement(h.a,{msg:n,className:a})}}pinned_item_file_comment_PinnedItemFileComment.defaultProps=m;var b=Object(s.b)((e,t)=>{var{fileId:a,commentId:n}=t;return{comment:Object(u.d)(e,a,n)}})(pinned_item_file_comment_PinnedItemFileComment);t.a=Object(s.b)(null,e=>({previewFile:function(){return e(Object(o.c)(...arguments))}}))(class pinned_item_PinnedItem extends n.PureComponent{constructor(e){super(e),Object(i.a)(this,["onFileClick","renderMessage","renderFile","renderFileComment"])}onFileClick(e,t){t&&this.props.previewFile({fileId:t.id,flexOrigin:"details",flexOriginId:"pins"})}renderMessage(e){return e&&e.ts?r.a.createElement(d.a,{msg:e,timestampClickable:!0,onFileClick:this.onFileClick,className:"p-pinned_items__message",flexOrigin:"details",flexOriginId:"pins",blocksContainerContext:p.a.pinned_items}):null}renderFile(e){return e&&e.id?r.a.createElement(l.a,{file:e,onClick:this.onFileClick,showActions:!1}):null}renderFileComment(e){return e&&e.id?r.a.createElement(b,{commentId:e.id,fileId:e.fileId}):null}render(){var{pin:e}=this.props;return e.type===c.a.FILE?this.renderFile(e):e.type===c.a.FILE_COMMENT?this.renderFileComment(e):this.renderMessage(e)}})},hZjP:function(e,t,a){},hnus:function(e,t,a){e.exports=a.p+"user_groups-81786af.png"},hqEo:function(e,t,a){"use strict";var n=a("rePB"),r=a("q1tI"),s=a.n(r),i=(a("aK/h"),a("XfeM")),o=a("yHhI"),c=a("dhvi"),l=a("8Duq"),d=a("O6kw"),p=a("vmJv"),u=a("Muja"),h=a("lCmp"),m=a("NFsq"),b=a("ifKl"),_=a("X6iR"),g=a("tn36"),f=a("XHGt"),v=a("TSYQ"),O=a.n(v),y=(a("yPgC"),a("t85p")),C=a("dxEi"),j=a("quKg"),E=a("nNoG"),k=a("nN8z"),S=a("kOzZ"),I=a("negh"),w=a("qgNY"),T=a("h9dl"),N=a("AzV5"),P=a("aLpA"),A=a("+yap"),M=a("5lF5"),x=a("h9PG"),R=a("CnQG"),D=a("b0Xh");var F=a("1hAG"),L=a("AjwY"),U=a("5mKg"),B=a("oLrU"),H=a("RB1+"),W=a("mLe0"),q=a("H2PH"),G=a("sJy+"),K=a("HOkk"),V=a("XLFM"),z=a("plEq"),Y=a("O0RF"),Q=a("lwWk"),X=a("Rszm"),J=a("0f2Y"),Z=a("mZe+").b,$=a("IyaR"),ee=a("Y6FH"),te=a("Hvpu"),ae=a("Zwlx"),ne=a("iJ4v"),re=a("r6UO");a("yWse");function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var oe=new E.b("file-upload"),ce="file-upload-name",le="file-upload-share-with",de={selectedChannelId:null,setSelectedChannel:b.a,canPostInSelectedChannel:!1,canThread:!1,closeModal:b.a,switchToChannel:b.a,getShareableChannelId:b.a,msgText:"",setMsgText:b.a,msgOps:void 0,setMsgOps:b.a,initialContents:void 0,converMsgOpsToRichTextMessage:b.a,disallowedKeywordInMsgText:null,initialText:"",initialBroadcast:!1,retentionDuration:null,threadTs:null,isStdPlan:!1,isPlusPlan:!1,isEnterprisePlan:!1,channelType:"channel",selectedChannelName:"",fromPaste:!1,teamId:void 0,inputProxy:void 0,isOffline:!1,featureOfflineMode:!1,featureSonicInputs:!1,featureWysiwygComposer:!1,clientToolBar:!1,currentChannelId:void 0,pendingFiles:null,clearPendingFilesForDialog:b.a,metadata:void 0,isLegacyDropboxPicker:!1,processAndAddPendingFiles:b.a,filterFilesForUpload:b.a};class file_upload_dialog_FileUploadDialog extends r.PureComponent{constructor(e){super(e),Object(g.a)(this,["onGo","onCancel","onCancelAll","onCancelDiscard","closeDialog","onTextChange","onFileNameChange","onFilesSelected","onShareWithChange","onBroadcastChange","onEditCollapsedFileNameClick","setFileNameInputRef","clogPricingLinkClick"]),this.fileNameInput=null,this.initialText=this.props.initialText,this.initialContents=this.props.initialContents,this.logger=Object(o.b)(),this.msgInputRef=s.a.createRef(),this.state=ie({confirmClose:!1,confirmCancelAll:!1,submitting:!1},this.getStateForFileAtIndex(0),{broadcast:e.initialBroadcast})}componentDidMount(){var{files:e,clogger:t}=this.props,{fileIndex:a}=this.state||0;this.shouldShowStorageWarning()&&t.track(I.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:I.UiAction.IMPRESSION,step:I.UiStep.FILE_UPLOAD,ui_component:I.UiComponent.FILE_STORAGE_LIMIT_BANNER}}}),this.isMultiFileUpload()||e&&this.maybeLoadImagePreview(e[a])}onCancel(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{initialText:t,msgText:a,msgOps:n,initialContents:r,featureWysiwygComposer:s}=this.props,{confirmClose:i,confirmCancelAll:o}=this.state,c=0,l=!1;if(a)c=a.length,l=a!==t;else if(s&&n){c=Object(W.b)(n);var d=r?r.contents:[];l=!Object(u.a)(d,n)}return!i&&c>P.i&&l?(this.setState(()=>({confirmClose:!0,confirmCancelAll:e})),!1):(e||!this.hasMoreFiles()||o?this.closeDialog():this.goToNextFile(),!1)}onCancelAll(){return this.onCancel(!0)}onCancelDiscard(){return this.setState(()=>({confirmClose:!1,confirmCancelAll:!1})),!1}onGo(){var{shareWith:e,fileName:t,fileIndex:a,confirmClose:n,broadcast:r}=this.state,{selectedChannelId:s,msgText:i,threadTs:o,teamId:c,pendingFiles:l,featureWysiwygComposer:d}=this.props;if(this.isGoDisabled())return!1;if(n)return this.onCancel();this.initialText=null,this.initialContents=null;var p,{switchToChannel:u,files:h,getShareableChannelId:m,metadata:b}=this.props,_=e?Object(B.a)():void 0,g=e?m({channelOrMemberId:s}):Promise.resolve(null);if(d){var f=this.msgInputRef&&this.msgInputRef.current&&this.msgInputRef.current.getWrappedInstance();p=f?f.getTextContents():this.props.msgOps}return g.then(n=>{var s;if(d&&(s=this.props.converMsgOpsToRichTextMessage({msgOps:p,channelId:n,inThread:!!o})),this.isMultiFileUpload()){this.closeDialog(),Object(q.a)(c).uploadFiles({files:l,shareData:{channelId:n,clientMsgId:_,introMessage:e?i:null,blocks:d&&e?s:null,threadTs:n?o:null,broadcast:n&&o?r:null,metadata:b}}).then(()=>{this.logger.info("UPLOAD-DIALOG","Multi-file upload complete for: ".concat(_))}).catch(e=>{this.logger.warn("Multi-file upload failed for: ".concat(_,"; with error ").concat(e))}),this.logger.info("UPLOAD-DIALOG","Beginning multi-file upload for: ".concat(_))}else{this.hasMoreFiles()||this.closeDialog();var m=h[a];Object(q.a)(c).uploadFiles({files:[m],shareData:{channelId:n,clientMsgId:_,title:t||this.initialFileName(m),link:m.link,introMessage:e?i:null,blocks:d&&e?s:null,threadTs:n?o:null,broadcast:n&&o?r:null,isBox:m.is_box,isDropbox:m.is_dropbox,metadata:b}})}this.hasMoreFiles()?this.goToNextFile():n&&!o&&u({id:n}),this.setState(()=>({submitting:!1}))}),this.setState(()=>({submitting:!0})),!1}onTextChange(e){var{text:t,msgOps:a,overLimit:n}=e,{featureWysiwygComposer:r}=this.props;r?this.props.setMsgOps(a):this.props.setMsgText(t),this.setState(()=>({overMsgLengthLimit:n}))}onFileNameChange(e){this.setState(()=>({fileName:e,overFileNameLimit:e.length>P.y}))}onFilesSelected(e){var t=l.a;this.props.filterFilesForUpload({selectedFiles:e,channelId:t}).then(e=>{e&&e.length&&this.props.processAndAddPendingFiles({channelId:t,files:e})})}onShareWithChange(e){var t=e.target.checked;this.setState(()=>({shareWith:!!t}))}onBroadcastChange(e){this.setState(()=>({broadcast:e}))}onEditCollapsedFileNameClick(){this.setState(()=>({collapseFileNameInput:!1})),this.fileNameInput.focus()}setFileNameInputRef(e){this.fileNameInput=e}getStateForFileAtIndex(e){var{files:t}=this.props,a=t[e],n=a&&Object(m.a)(a.type,"image");return{fileIndex:e,defaultFileName:this.initialFileName(a),fileName:"",shareWith:!0,previewDataUrl:null,overMsgLengthLimit:!1,overFileNameLimit:!1,exifOrientation:null,previewImageDimensionsRatio:null,collapseFileNameInput:n,broadcast:!1}}getStorageWarning(){var{isStdPlan:e,isPlusPlan:t,isEnterprisePlan:a}=this.props;if(!this.shouldShowStorageWarning())return null;var n=e=>{var{text:t}=e;return s.a.createElement(J.a,{href:Object(L.j)({entryPoint:"file_upload_dialog"}),target:"_blank",rel:"noopener noreferrer",onClick:this.clogPricingLinkClick,"data-qa":"file-upload-dialog_pricing-link"},t)};return e?oe.rt("Your workspace has reached the Standard plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,n):t?oe.rt("Your workspace has reached the Plus plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,n):a?oe.rt("It looks like your organization\u2019s reached the file storage limit. If that sounds wrong, you may want to <a>contact Slack</a>.",null,e=>{var{text:t}=e;return s.a.createElement(Q.a,{href:"/help/requests/new",target:"_blank"},t)}):oe.rt("Your free workspace is limited to 5 GB of files. If you upload more files, you\u2019ll lose access to some older ones. To view them again and get more space, <a>upgrade to a paid plan</a>.",null,n)}shouldShowStorageWarning(){var{overStorageLimit:e,files:t}=this.props,{fileIndex:a}=this.state,n=t[a];return e&&!n.is_dropbox&&!n.is_box&&!n.is_external}clogPricingLinkClick(){this.props.clogger.track(I.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:I.UiAction.CLICK,step:I.UiStep.FILE_UPLOAD,ui_element:I.UiElement.PRICING_LINK,ui_component:I.UiComponent.FILE_STORAGE_LIMIT_BANNER}}})}isMultiFileUpload(){var{files:e}=this.props;return!Object(h.a)(e,e=>e.is_box||e.is_dropbox)}isMultipleFiles(){return!this.isMultiFileUpload()&&this.props.files.length>1}hasMoreFiles(){if(!this.isMultipleFiles())return!1;var{files:e}=this.props,{fileIndex:t}=this.state;return e.length>t+1}goToNextFile(){var{files:e,setMsgText:t}=this.props,{fileIndex:a}=this.state;this.setState(()=>ie({confirmClose:!1},this.getStateForFileAtIndex(a+1)),()=>{this.maybeLoadImagePreview(e[a+1])}),t("")}closeDialog(){var{initialBroadcast:e,threadTs:t,featureSonicInputs:a,currentChannelId:n,featureWysiwygComposer:r}=this.props,{inputProxy:s}=this.props;if(this.props.closeModal(),this.isMultiFileUpload()&&this.props.clearPendingFilesForDialog(),r&&this.initialContents){if(s||(s=Object(H.a)({viewContext:P.I.MESSAGE_PANE,channelId:n})),!s)return;return s.setContents(this.initialContents),void s.focus()}if(this.initialText){var i=this.initialText;setTimeout(()=>{if(s)s.setText(i),s.setBroadcast(e),s.focus();else if(t)Object(M.f)(i,e);else if(a){var r=Object(H.a)({viewContext:P.I.MESSAGE_PANE,channelId:n});r&&r.setText(i)}else Object(A.e)(i)},10)}}initialFileName(e){return!e.name||this.props.fromPaste?oe.t("Pasted image at {date}",{date:Object(k.a)(Date.now()/1e3)}):e.name}isUsingNewDropboxApp(){var{isLegacyDropboxPicker:e,files:t}=this.props;return Object(h.a)(t,e=>e.is_dropbox)&&e}isGoDisabled(){var{submitting:e,shareWith:t,overMsgLengthLimit:a,overFileNameLimit:n}=this.state,{canPostInSelectedChannel:r,threadTs:s,canThread:i,disallowedKeywordInMsgText:o,isOffline:c,featureOfflineMode:l}=this.props;return e||t&&!r&&!s||t&&s&&!i||t&&!!o||a||n||l&&c}maybeLoadImagePreview(e){if(window.FileReader&&!e.is_box&&!e.is_dropbox)if("string"!=typeof e)try{var t=new FileReader;t.onload=(t=>{var a=t.target.result;Object(_.a)(a,"data:image/")&&this.loadImagePreviewWithOrientation(e,a)}),t.onloadstart=(e=>{e.total>33554432&&(this.logger.info("UPLOAD-DIALOG","Skipping image preview for large file: ".concat(e.total)),t.abort())}),t.readAsDataURL(e)}catch(a){this.logger.warn("Error loading upload preview"),this.logger.warn(a)}else this.setState(()=>({previewDataUrl:"data:image/png;base64,".concat(e),collapseFileNameInput:!0}))}loadImagePreviewWithOrientation(e,t){(function(e){return new Promise((t,a)=>{var n=Object(o.b)();try{var r=new FileReader;r.onload=(e=>{var a=Object(D.readFromBinaryFile)(e.target.result);a&&"number"==typeof a.Orientation?t(a.Orientation):t(null)}),r.readAsArrayBuffer(e)}catch(s){n.warn("Error reading exif data"),n.warn(s),a(s)}})})(e).then(e=>{if(e&&1!==e){var a=new Image;a.onload=(()=>{var n=a.width,r=a.height/n;this.setState(()=>({previewDataUrl:t,previewImageDimensionsRatio:r,exifOrientation:e,collapseFileNameInput:!0}))}),a.src=t}else this.setState(()=>({previewDataUrl:t,collapseFileNameInput:!0}))})}renderBroadcastCheckbox(){var{threadTs:e,canPostInSelectedChannel:t,channelType:a,selectedChannelName:n}=this.props,{broadcast:r}=this.state;return e&&t?s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--broadcast"},s.a.createElement(re.a,{channelType:a,selectedChannelName:n,value:r,onChange:this.onBroadcastChange})):null}renderImagePreview(){var{previewDataUrl:e,previewImageDimensionsRatio:t,exifOrientation:a,fileName:n}=this.state;if(!this.state.previewDataUrl)return null;var r,i=oe.t("Preview of {fileName}",{fileName:n});2===a?r="scaleX(-1)":3===a?r="rotate(180deg)":4===a?r="rotate(180deg) scaleX(-1)":5===a?r="rotate(90deg) scale(".concat(t,", -").concat(t,")"):6===a?r="rotate(90deg) scale(".concat(t,")"):7===a?r="rotate(90deg) scale(-".concat(t,", ").concat(t,")"):8===a&&(r="rotate(-90deg) scale(".concat(t,", ").concat(t,")"));var o={};return r&&(o.transform=r),s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement("div",{className:"p-file_upload_dialog__preview"},s.a.createElement("div",{style:o},s.a.createElement("img",{className:"p-file_upload_dialog__preview_image",src:e,alt:i}))))}renderShareWith(){var{threadTs:e,selectedChannelId:t}=this.props,{shareWith:a}=this.state;return e?s.a.createElement(ne.a,{channelId:t,threadTs:e}):s.a.createElement(Y.a,{text:oe.t("Share with:"),htmlFor:le,type:"inline"},s.a.createElement(X.a,{id:le,defaultChecked:a,onChange:this.onShareWithChange}))}renderChannelPicker(){var{selectedChannelId:e,setSelectedChannel:t,threadTs:a}=this.props,{shareWith:n}=this.state;return a?null:s.a.createElement(ee.a,{initialChannelId:e,onChange:t,isDisabled:!n,dialogType:"file_upload_dialog"})}renderCancelAllButton(){return s.a.createElement(V.d,{type:"outline",className:"p-file_upload_dialog__footer_cancel_all",onClick:this.onCancelAll,tabIndex:"-1","data-qa":"dialog-cancel-all"},oe.t("Cancel All"))}renderMultiFileShareInputs(){return this.isMultipleFiles()?s.a.createElement("div",{className:"p-file_upload_dialog__section"},this.renderShareWith(),this.renderChannelPicker()):null}renderFooterExtra(){return this.isMultipleFiles()?this.renderCancelAllButton():s.a.createElement("div",{className:"p-file_upload_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}renderWarning(){var e=this.getStorageWarning(),t=Object(ae.a)(this.props);if(!t&&!e)return null;var a=this.props.overStorageLimit?"info":"warning";return s.a.createElement("div",{className:"p-file_upload_dialog__section","data-qa":"share-dialog_warning"},s.a.createElement(G.d,{type:"inline",level:a},e?s.a.createElement("span",{className:"p-share_dialog__warning_message"},e):null,t))}renderCollapsedFileName(){var{defaultFileName:e,collapseFileNameInput:t}=this.state,a=O()("p-file-upload_dialog__preview_file_name",{"p-file-upload_dialog__preview_file_name--hide":!t}),n=oe.rt("edit"),r=oe.rt("Edit file name: {fileName}",{fileName:e});return s.a.createElement("div",{className:a},s.a.createElement("span",{className:"p-file-upload_dialog__preview_file_name_text"},e),s.a.createElement(J.a,{className:"p-file-upload_dialog__preview_file_name_edit",onClick:this.onEditCollapsedFileNameClick,tabIndex:t?null:"-1","aria-label":r},n))}renderExpandedFileNameInput(){if(this.isUsingNewDropboxApp())return null;var{fileName:e,defaultFileName:t,collapseFileNameInput:a}=this.state,n=O()("p-file_upload_dialog__file_name_input",{"p-file_upload_dialog__file_name_input--hide":a});return s.a.createElement(Y.a,{text:oe.t("File name"),htmlFor:ce,className:n},s.a.createElement(z.a,{id:ce,name:ce,value:e,maxCharacterLimit:P.y,counterMinimumCharacters:P.K,onChange:this.onFileNameChange,placeholder:t,tabIndex:a?"-1":null,ref:this.setFileNameInputRef}))}renderFileNameInput(){return s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section_file_name"},this.renderCollapsedFileName(),this.renderExpandedFileNameInput())}renderMultiFileUpload(){return s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement(Z,{channelId:l.a,onFilesSelected:this.onFilesSelected}))}renderRetentionWarning(){var{retentionDuration:e}=this.props;return e?s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--retention_duration"},s.a.createElement("span",null,oe.t("Due to your custom file retention policy, this file will be deleted after {duration}",{duration:Object(R.a)(e)}))):null}render(){var{files:e,msgText:t,selectedChannelId:a,threadTs:n,featureOfflineMode:r,isOffline:i,clientToolBar:o,featureWysiwygComposer:c}=this.props,{fileIndex:l,shareWith:d,confirmClose:p}=this.state,u=oe.t("Add a message about the file",{fallbackHash:"76426947fe26fc3fa06b6bf272f55b1b45248641"}),h=oe.t("Upload a file",{fallbackHash:"1ed2e7b50fa1dbbf1693d1c38adf270c04db10c6"});this.isMultipleFiles()&&(h=oe.t("Upload a file ({number} of {total})",{number:l+1,total:e.length,fallbackHash:"98feccd29dda6dfff23692d85c563aada4877d37"}));var m=O()("p-file_upload_dialog",{"p-file_upload_dialog--multiple":this.isMultipleFiles()&&!p,"p-file_upload_dialog--client_toolbar":o||c}),b=r&&i?s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement(G.d,{icon:"cloud-offline",level:"info"},oe.rt("<strong>No connection.</strong> You'll be able to upload files as soon as you're back online."))):null;return s.a.createElement(K.a,{className:m,title:h,onClose:this.onCancel,onCancel:p?this.onCancelDiscard:this.onCancel,onGo:p?this.onCancel:this.onGo,useSlackScrollbarWithPadding:!0,shouldCloseOnOverlayClick:!p,cancelText:p?oe.t("No, keep it"):null,goButtonIsDisabled:this.isGoDisabled(),goButtonText:p?oe.t("Yes, discard the message"):oe.t("Upload"),footerText:p?oe.t("Closing the window will discard your message"):this.renderFooterExtra(),goButtonType:p?"danger":"primary",showCancelButton:p},this.renderWarning(),b,s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement($.a,{channelId:a,threadTs:n,text:t,initialContents:this.initialContents,onTextChange:this.onTextChange,ariaLabel:u,placeholder:u,enabled:d,focusOnMount:!0,onEnter:this.onGo,enableBroadcastKeywords:!n,maxLines:6,ref:this.msgInputRef})),this.renderBroadcastCheckbox(),this.isMultiFileUpload()?this.renderMultiFileUpload():s.a.createElement(s.a.Fragment,null,this.renderImagePreview(),this.renderFileNameInput(),this.renderMultiFileShareInputs()),this.renderRetentionWarning())}}file_upload_dialog_FileUploadDialog.defaultProps=de;var pe=Object(f.b)(function(e,t){var a=Object(F.d)(e),n={overStorageLimit:Object(U.C)(a),isStdPlan:Object(U.z)(a),isPlusPlan:Object(U.x)(a),isEnterprisePlan:Object(U.s)(a)};return ie({},Object(te.b)(e,t),{},n,{retentionDuration:parseInt(Object(x.a)(e,"file_retention_type"),10)?Object(x.a)(e,"file_retention_duration"):null,teamId:a.id,isOffline:!Object(C.c)(e),featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),featureSonicInputs:Object(y.m)(e,"feature_sonic_inputs"),currentChannelId:Object(p.a)(e),pendingFiles:Object(l.e)(e),clogger:Object(S.a)({state:e}),clientToolBar:"composer_toolbar"===Object(j.c)(e,"composer_toolbar"),isLegacyDropboxPicker:Object(x.a)(e,"dropbox_legacy_picker")})},function(e){return{closeModal:function(){return e(Object(c.a)(...arguments))},switchToChannel:function(){return e(Object(w.a)(...arguments))},getShareableChannelId:function(){return e(Object(T.a)(...arguments))},clearPendingFilesForDialog:function(){return e(Object(l.b)(...arguments))},converMsgOpsToRichTextMessage:function(){return e(Object(N.a)(...arguments))},processAndAddPendingFiles:function(){return e(Object(l.g)(...arguments))},filterFilesForUpload:function(){return e(Object(d.a)(...arguments))}}})(file_upload_dialog_FileUploadDialog),ue=Object(te.a)(pe),he=a("a+Oh");function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?me(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _e=Object(i.b)("Takes N files and opens the file upload dialog",(e,t,a)=>{var{files:n,threadTs:r,inputProxy:i}=a;if(!n||!n.length)return Object(o.a)({getState:t}).warn("No files passed to openFileUploadDialog"),null;var u=t(),h=t=>{if(!t||!t.length)return null;var o=Object(y.m)(u,"feature_sonic_inputs"),d=Object(he.a)(u),h=Object(p.a)(u),m=function(e,t){if(t){var a=t.getBroadcast();return a&&t.setBroadcast(!1),a}return!(!e||Object(M.a)()!==e)&&Object(M.d)()}(r,i),b=d?null:function(e){var{inputProxy:t,featureSonicInputs:a,currentChannelId:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t){var r=t.getText();return r&&t.clear(),r}if(e&&Object(M.a)()===e){var s=Object(M.g)();return s&&Object(M.b)(),s}if(a){var i=Object(H.a)({viewContext:P.I.MESSAGE_PANE,channelId:n}),o=i.getText();return o&&i.clear(),o}var c=Object(A.d)();c&&Object(A.e)("");return c}(r,{inputProxy:i,featureSonicInputs:o,currentChannelId:h}),_=d?function(){var{featureWysiwygComposer:e,currentChannelId:t,inputProxyProp:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)return null;var n=a||Object(H.a)({viewContext:P.I.MESSAGE_PANE,channelId:t});if(!n)return null;var r=n.getContents();r&&n.clear();return r}({featureWysiwygComposer:d,currentChannelId:h,inputProxyProp:i}):null;return e(Object(l.h)({files:t})),e(Object(c.e)({element:s.a.createElement(ue,be({},a,{files:t,initialText:b,initialContents:_,initialBroadcast:m,fileSizeExceeded:t.length<n.length}))}))};return e(Object(d.a)({selectedFiles:n})).then(e=>h(e))});_e.meta={name:"openFileUploadDialog",key:"actionsOpenFileUploadDialogOpenFileUploadDialog",description:"Takes N files and opens the file upload dialog"};t.a=_e},"hr+X":function(e,t,a){},i6Ao:function(e,t,a){"use strict";a.d(t,"e",function(){return l}),a.d(t,"d",function(){return d}),a.d(t,"c",function(){return p}),a.d(t,"a",function(){return u}),a.d(t,"b",function(){return h});var n=a("Z7Ay"),r=a("yHhI"),s=0,i=0,o=!0,c=Object(r.b)({label:"HISTORY-NAVIGATION"}),l=()=>{i!==s&&(c.info("Incrementing the users current position in the history stack"),i+=1,o=!1)},d=()=>{1!==i&&(c.info("Decrementing the users current position in the history stack"),i-=1,o=!1)},p=()=>{o?(c.info("Adding route to the history stack"),i===s?(i+=1,s+=1):s=i+=1):o=!0},u=()=>1===i,h=()=>i===s;Object(n.a)("history",{getHistoryLength:()=>s,getHistoryIndex:()=>i})},iJ13:function(e,t,a){},iJ4v:function(e,t,a){"use strict";var n=a("BeL+"),r=a("zmn3"),s=a("q1tI"),i=a.n(s),o=(a("aK/h"),a("XHGt")),c=a("nNoG"),l=a("4M+g"),d=a("fYfO"),p=a("hOQf"),u=a("4RH7"),h=a("5lF5"),m=a("hpgS"),b=new c.b("file-upload");function _(e){var{label:t,replyCount:a,replyUsers:n,replyUsersCount:r}=e;return n?i.a.createElement("div",{className:"p-file_upload_dialog__thread_label"},t||b.t("Sharing file in a thread"),i.a.createElement("br",null),i.a.createElement(u.a,{replyCount:a,replyUsers:n,replyUsersCount:r})):null}_.defaultProps={label:void 0,replyCount:void 0,replyUsers:void 0,replyUsersCount:void 0},t.a=Object(o.b)(function(e,t){var{channelId:a,threadTs:s}=t,i=Object(d.a)(e,a,s);if(!i){var o=Object(l.e)(e,a);(i=Object(h.c)(o,s))||(i=Object(m.a)(o,s))}if(!i)return{};var c=Object(p.T)(i),u=Object(p.U)(i);return i.replies?(c=Object(r.a)(i.replies,"user"),i.user&&c.push(i.user),u=Object(n.a)(c).length):i.user&&c.push(i.user),{replyCount:Object(p.S)(i),replyUsers:c,replyUsersCount:u}})(_)},ixEi:function(e,t,a){},j1Cd:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("aK/h"),i=a("+uGN"),o=a("XfeM"),c=a("ns4K"),l=a("8Nus"),d=a("HZFI"),p=a("ifKl"),u=a("XHGt"),h=a("nNoG"),m=a("g+Y+"),b=a("qafc"),_=a("0f2Y"),g=new h.b("drafts"),f={dispatch:p.a,featureComposeFlowSidebar:!1,undo:p.a};function v(e){var{dispatch:t,featureComposeFlowSidebar:a,undo:n}=e;return a?r.a.createElement(b.b,{fadeDelay:1e4},g.t("The draft has been deleted."),"\xa0",r.a.createElement(_.a,{onClick:()=>{n(),t(Object(c.b)())}},g.t("Undo"))):null}v.defaultProps=f;var O=Object(u.b)(function(e){return{featureComposeFlowSidebar:Object(m.i)(e)}})(v),y=a("fujP"),C=a("mM05"),j=a.n(C),E=a("negh"),k=a("kOzZ"),S=a("YPPF"),I=a("KCFn"),w=Object(o.b)("Restore a deleted channel draft",function(e,t){var{channelId:a,threadTs:n,draft:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(a&&!Object(y.a)(r)){var s=Object(I.d)(a,n);s&&(s.setContents({contents:r.ops}),r.range&&s.setCursor(r.range.index,r.range.length)),Object(k.a)({getState:t}).track(E.EventId.COMPOSE_FLOW,{draft_id:Object(i.d)(r),draft_type:n?"thread":"channel",contexts:{ui_context:{action:E.UiAction.CLICK,step:E.UiStep.COMPOSE_FLOW_UNDO_DELETE}}}),e(Object(S.e)({channelId:a,threadTs:n,delta:new j.a(r.ops),broadcast:r.broadcast,range:r.range}))}});w.meta={name:"undoDeletedChannelDraft",key:"draftsStoreThunksUndoDeletedDraftUndoDeletedChannelDraft",description:"Restore a deleted channel draft"},w.propTypes={channelId:s.default.string.isRequired,draft:s.default.object.isRequired,threadTs:s.default.string};var T=Object(o.b)("Restore a deleted composer draft",function(e,t){var{draft:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(y.a)(a)||(Object(k.a)({getState:t}).track(E.EventId.COMPOSE_FLOW,{draft_id:Object(i.d)(a),draft_type:"composer",contexts:{ui_context:{action:E.UiAction.CLICK,step:E.UiStep.COMPOSE_FLOW_UNDO_DELETE}}}),e(Object(S.f)(a)))});T.meta={name:"undoDeletedComposerDraft",key:"draftsStoreThunksUndoDeletedDraftUndoDeletedComposerDraft",description:"Restore a deleted composer draft"},T.propTypes={draft:s.default.object.isRequired},a.d(t,"a",function(){return P}),a.d(t,"b",function(){return A});var N=Object(o.b)("Open a toast with an option to restore a deleted draft",function(e,t){var{undo:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(c.c)({element:r.a.createElement(O,{undo:a})}))});N.meta={name:"openDeleteToast",key:"draftsStoreThunksDeleteDraftWithUndoOpenDeleteToast",description:"Open a toast with an option to restore a deleted draft"},N.propTypes={undo:s.default.func};var P=Object(o.b)("Clear a channel draft with the option to undo",function(e,t){var{channelId:a,threadTs:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t(),s=Object(m.b)(r,{channelId:a,threadTs:n});if(s){e(Object(S.b)({channelId:a,threadTs:n}));var i=Object(I.c)({channelId:a,threadTs:n});e(Object(d.a)({draftId:i}));var o=Object(I.d)(a,n);o&&o.clear(),e(N({undo:()=>e(w({channelId:a,threadTs:n,draft:s}))}))}});P.meta={name:"deleteChannelDraftWithUndo",key:"draftsStoreThunksDeleteDraftWithUndoDeleteChannelDraftWithUndo",description:"Clear a channel draft with the option to undo"},P.propTypes={channelId:s.default.string.isRequired,threadTs:s.default.string};var A=Object(o.b)("Clear a composer draft with the option to undo",function(e,t){var{draftId:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t(),r=Object(m.d)(n,a);r&&(e(Object(l.a)({draft:r})),e(Object(S.a)({ids:[a]})),e(Object(d.a)({draftId:a})),Object(i.r)(r)||e(N({undo:()=>e(T({draft:r}))})))});A.meta={name:"deleteComposerDraftWithUndo",key:"draftsStoreThunksDeleteDraftWithUndoDeleteComposerDraftWithUndo",description:"Clear a composer draft with the option to undo"},A.propTypes={draftId:s.default.string.isRequired}},j4JU:function(e,t,a){},j6qi:function(e,t,a){"use strict";a.d(t,"a",function(){return StickyList});var n=a("wx14"),r=a("rePB"),s=a("3/My"),i=a("7EGn"),o=a("q1tI"),c=a.n(o),l=a("aK/h"),d=a("TSYQ"),p=a.n(d),u=a("eK0w"),h=a("nUcG");function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _(e){for(var t={},a=0;a<e.length;a++)t[e[a].key]={index:e[a].index,next:Object(i.a)(e[a+1],"key")};return t}var g=b({},u.a.propTypes,{stickyItems:l.default.arrayOf(l.default.shape({key:l.default.string,index:l.default.number})),stickyOffsetTop:l.default.number,stickyZIndex:l.default.number}),f=b({},u.a.defaultProps,{stickyItems:[],stickyOffsetTop:0,stickyZIndex:null});class StickyList extends u.a{constructor(e){super(e),this.stickyItems=_(e.stickyItems)}UNSAFE_componentWillReceiveProps(e){super.UNSAFE_componentWillReceiveProps(e),this.stickyItems=_(e.stickyItems)}renderItem(e,t){if(!(e in this.stickyItems))return super.renderItem(e,t);var a=0===t?-100:this.getTop(e),r=this.layout.getHeight(e),s=this.layout.getHeightValidity(e),i=this.getContentHeight(),o=this.stickyItems[e].next,l=o?this.getTop(o):i,d=Math.max(0,i-l),u=this.state.activeItem===e,m=null===this.state.activeItem&&this.state.hasKeyboardFocus&&this.state.initialActiveItem===e,b=this.state.mouseDownTargetItem===e,_=this.state.hoveredItem===e,{rowRenderer:g,getPropsForItem:f,onItemClick:v,onItemKeyDown:O,shouldHorizontallyScroll:y,useStaticHeightForListItems:C,width:j}=this.props,E=this.getUniqueItemId(e),k=f({key:e,index:t})||{},S=p()(k.className,"c-virtual_list__item--sticky");return c.a.createElement("div",{key:"".concat(e).concat(a).concat(d).concat(this.props.width).concat(this.props.height),className:"c-virtual_list__sticky_container",role:"presentation",style:{top:a,bottom:d}},c.a.createElement(h.a,Object(n.a)({tabIndex:this.getListItemTabIndex(e)},k,{id:e,itemKey:e,key:e,height:r,validity:s,className:S,style:{top:this.props.stickyOffsetTop,zIndex:this.props.stickyZIndex},hasFocus:u,hasFocusWithin:m,isMouseDownOnItem:b,onFocusEnter:this.onItemFocusEnter,onFocusWithin:this.onItemFocusWithin,onFocusLeave:this.onItemFocusLeave,onTabWithin:this.onItemTabWithin,onHeightChange:this.setHeight,onMouseOver:this.onItemMouseOver,onMouseLeave:this.onItemMouseLeave,onMouseDown:this.onItemMouseDown,onMouseUp:this.onItemMouseUp,onClick:v,onKeyDown:O,shouldHorizontallyScroll:y,useStaticHeight:C}),g(t,{key:e,hasFocus:u,hasFocusWithin:m,isHovered:_,isExpanded:k["aria-expanded"],itemId:E,listWidth:j})))}renderItems(){var e=super.renderItems(),t=this.state.start,a=Object(s.a)(this.props.stickyItems,{index:t},e=>e.index)-1,n=this.props.stickyItems[a];return n&&e.unshift(this.renderItem(n.key,n.index)),e}}StickyList.propTypes=g,StickyList.defaultProps=f},jJ2u:function(e,t,a){e.exports=a.p+"calls-d4bcb6d.png"},jfx7:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("ZSbO");t.a=function(){return r.a.createElement("div",null,r.a.createElement(s.a,null),r.a.createElement("div",{className:"p-channel_sidebar"}),r.a.createElement("div",null))}},k0uR:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a("tn36");var r=new class LogBuffer{constructor(){this.buffer=[],Object(n.a)(this,["store","flush","replace"])}store(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this.buffer.push(t)}flush(){var e=this.buffer;return this.buffer=[],e}replace(e){this.buffer=e}}},k55U:function(e,t,a){"use strict";a.d(t,"a",function(){return d}),a.d(t,"g",function(){return p}),a.d(t,"d",function(){return u}),a.d(t,"j",function(){return h}),a.d(t,"c",function(){return m}),a.d(t,"b",function(){return b}),a.d(t,"f",function(){return _}),a.d(t,"m",function(){return g}),a.d(t,"l",function(){return f}),a.d(t,"k",function(){return v}),a.d(t,"h",function(){return O}),a.d(t,"i",function(){return y}),a.d(t,"e",function(){return C});var n=a("mrSG"),r=a("rWF5"),s=a("jzln"),i=a("zA5J"),o=a("TM4O"),c=a("yHhI"),l=a("g5qt"),d=e=>{throw new Error("Inconceivable!")};function p(e){var{direction:t,type:a,payload:n}=e,r=Object(o.a)()?"slack":"call",s="INTER-WINDOW-MESSAGE";(Object(o.a)()?Object(i.a)(s):Object(c.b)({label:s})).info("".concat("send"===t?"Sending":"Received"," ").concat(a," ").concat("send"===t?"to":"from"," the ").concat(r," window").concat(n?", with payload: ".concat(JSON.stringify(n)):""))}function u(e){return function(t,a,n){e(a,n),t.sendData({type:a,payload:n})}}function h(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a="",n=0;n<e;n++){var r=Math.floor(Math.random()*t.length);a+=t.substring(r,r+1)}return a}function m(){var e,t,a=new Promise((a,n)=>{e=a,t=n});return a.resolve=e,a.reject=t,a}function b(e,t){return _(!!e,t)}function _(e,t){var a;if("boolean"==typeof e){if(e)return!0;a=t}else a=e;if(a||(a="Generic error."),r.l||r.t||s.a)throw Error("Failed debugCheck in dev: ".concat(a));return Object(i.a)("CHECK").error("Silently continuing after failed debugCheck in prod: ".concat(a)),!1}function g(e){return JSON.stringify(e,void 0,2)}function f(e,t){Object(l.dc)({window_token:e,bounds:t}),Object(r.F)()&&Object(l.dc)({window_token:e,bounds:t})}function v(e,t){var a=this,{skipIntermediatePendingRuns:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=!1,i=[];return function o(){for(var c=arguments.length,l=new Array(c),d=0;d<c;d++)l[d]=arguments[d];return Object(n.a)(a,void 0,void 0,function*(){if(s){r&&(i=[]);var a=m();return i.push({args:l,deferred:a}),a}s=!0;var n=yield t.call(e,...l);s=!1;var c=i.shift();return c&&o(...c.args).then(c.deferred.resolve).catch(c.deferred.reject),n})}}function O(e,t){var{ref:a}=t;return y(e,a)}function y(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return e=>{t.forEach(t=>{!function(e){return t=>{"function"==typeof e?e(t):e&&(e.current=t)}}(t)(e)})}}function C(e){var{width:t,height:a,top:n,left:r}=e;return{position:"absolute",width:"".concat(t,"px"),height:"".concat(a,"px"),top:"".concat(n,"px"),left:"".concat(r,"px")}}},kFZb:function(e,t,a){"use strict";function n(e,t){return function(){return t(...arguments),e(...arguments)}}a.d(t,"a",function(){return n})},kFoU:function(e,t,a){"use strict";var n=a("wx14"),r=a("q1tI"),s=a.n(r),i=a("XHGt"),o=(a("aK/h"),a("1hAG")),c=a("A+cF"),l=a("kd6D"),d=a("T00V"),p=a("hUMe"),u=(a("HAG/"),{className:void 0,invert:!1});function h(e){var{className:t,id:a,invert:r,team:i}=e,o=r?l.c.highlightDark:null;return s.a.createElement(c.d,{avatar:e=>s.a.createElement(d.a,Object(n.a)({},e,{team:i,size:l.a.small,invert:r})),className:t,size:"small",style:o,text:s.a.createElement(p.a,{team:i,invert:r}),"data-team-id":a})}h.defaultProps=u;t.a=Object(i.b)((e,t)=>{var a=t.team||Object(o.i)(e,t.id);return{team:a,id:a.id}})(h)},kNze:function(e,t,a){},kSp4:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=a("TSYQ"),o=a.n(i),c=(a("aK/h"),a("Smdl")),l=a("Uk1S"),d=a("Lev8"),p=a("t85p"),u=a("dxEi"),h=a("exfU"),m={className:void 0,clientTheme:"light",featureOfflineMode:!1,isOffline:!1,theme:"light"};function b(e){var{className:t,clientTheme:a,featureOfflineMode:n,isOffline:s,theme:i}=e;return n&&s?r.a.createElement(h.a,null):r.a.createElement("div",{className:o()(t,"c-message_list__placeholders","c-message_list__placeholders--".concat(i),"c-message_list__placeholders--client-theme-".concat(a),{"c-message_list__placeholders--legacy":!Object(c.a)()})})}b.defaultProps=m,t.a=Object(s.b)(function(e){return{clientTheme:Object(d.c)(e),featureOfflineMode:Object(p.m)(e,"feature_offline_mode"),isOffline:!Object(u.c)(e),theme:Object(l.a)(e)}})(b)},kVk7:function(e,t,a){},khjP:function(e,t,a){"use strict";a.d(t,"a",function(){return MessageImpressionLogger});var n=a("rePB"),r=a("negh"),s=a("lhZz"),i=a("fYfO");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var c=e=>{var{channel:t,ts:a}=e;return t&&a?"".concat(t,"-").concat(a):a};class MessageImpressionLogger{constructor(e){var{teamId:t,experimentGroup:a,clogger:n,messageViewLocation:r}=e;this.teamId=t,this.visibleMessageIds={},this.messagesById={},this.experimentGroup=a,this.clogger=n,this.messageViewLocation=r}setCurrentlyVisibleMessages(e){var t=(new Date).getTime(),a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},this.visibleMessageIds);e.forEach(e=>{var n=c(e);this.messagesById[n]=e,this.visibleMessageIds[n]=this.visibleMessageIds[n]||t,delete a[n]}),Object.keys(a).forEach(e=>{var{ts:a,channel:n}=this.messagesById[e],o=Object(i.a)(Object(s.getStateByTeamId)(this.teamId),n,a,!1),c=t-this.visibleMessageIds[e];delete this.visibleMessageIds[e],delete this.messagesById[e],this.shouldLog()&&(c<500||o&&this.clogger.track(r.EventId.MSG_IMPRESSION,{contexts:{ui_context:{action:r.UiAction.IMPRESSION},message_impression:{channel_id:o.channel,msg_timestamp:o.ts,msg_thread_ts:o.thread_ts,msg_author_user_id:o.user,duration_milliseconds:c,message_view_location:this.messageViewLocation}}}))})}flushAllVisibleMessages(){this.setCurrentlyVisibleMessages([])}isDisabled(){return!this.experimentGroup||"control"===this.experimentGroup}shouldLog(){if(this.isDisabled())return!1;switch(this.experimentGroup){case"enabled":return!0;case"sample_001":return Math.random()<.01;default:return!1}}}},ksEP:function(e,t,a){"use strict";var n=a("rePB"),r=a("fujP"),s=a("aK/h"),i=a("XfeM"),o=a("oLrU"),c=a("H2PH"),l=a("brL+"),d=a("m+G5"),p=Object(i.b)("Processes a file object, adds it to Redux, and uploads it",function(e,t){var{file:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!a)return Promise.resolve();var n=Object(o.a)();a.id=n,e(Object(d.b)({files:[a]}));var r=t(),s=Object(l.b)(r),i=Object(c.a)(s).uploadFiles({files:[a],shareData:{isEagerUpload:!0}});return Promise.resolve({pendingFileId:n,uploadPromise:i})});p.meta={name:"addAndUploadPendingFile",key:"pendingFileUploadsStoreThunksAddAndUploadPendingFileAddAndUploadPendingFile",description:"Processes a file object, adds it to Redux, and uploads it"},p.propTypes={file:s.default.object.isRequired};var u=a("kRTx"),h=a("YPPF"),m=a("g+Y+"),b=a("2XCg"),_=a("+uGN");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}a.d(t,"a",function(){return f});var f=Object(i.b)("Kicks off the file upload and updates the draft store with the file IDs",function(e,t){var{draftId:a,files:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a&&!Object(r.a)(s)&&s.forEach(s=>{e(p({file:s})).then(function(){var{pendingFileId:s,uploadPromise:i=Promise.resolve()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s&&(e(Object(b.b)({draftId:a,pendingFileId:s})),i.then(function(){var{fileIds:i=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Object(r.a)(i)){var o=t(),c=Object(m.d)(o,a),l=i[0];e(Object(h.f)(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},c,{files:[...Object(_.h)(c),l]}))),e(Object(d.c)({pendingFileId:s})),e(Object(b.c)({draftId:a,pendingFileId:s}))}}).catch(()=>e(Object(d.e)({pendingFileId:s,status:u.a.ERROR}))))})})});f.meta={name:"uploadDraftFiles",key:"draftsStoreThunksUploadDraftFilesUploadDraftFiles",description:"Kicks off the file upload and updates the draft store with the file IDs"},f.propTypes={draftId:s.default.string.isRequired,files:s.default.arrayOf(s.default.object).isRequired}},kyN7:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=a("XHGt"),o=a("TSYQ"),c=a.n(o),l=(a("aK/h"),a("nNoG")),d=a("Fdc0"),p=a("9E9B"),u=a("zo7m"),h=a("zwKj"),m=a("HvGc"),b=a("od5y"),_=a("XLFM"),g=a("RAhH"),f=a("auxT"),v=a("/m+M"),O=a("dxEi"),y=a("HMjZ"),C=a("2olY"),j=a("negh"),E=a("rGr5"),k=a("ENxx"),S=a("2xgR"),I=(a("kVk7"),new l.b("member_profile")),w={autoFillSlashCommand:n.a,children:void 0,className:void 0,member:void 0,onClick:n.a,openEditProfileModal:n.a,showCallButton:!1,showFileList:n.a,showMemberProfile:n.a,startCallByMemberId:n.a,startImByMemberId:n.a,clogger:{track:n.a},callsApp:{video:[],phone:[]},featurePhoneIntegration:!1,onCallClick:n.a,onMessageClick:n.a};function T(e){var{autoFillSlashCommand:t,children:a,className:n,member:i,onClick:o,onCallClick:l,onMessageClick:p,openEditProfileModal:u,showCallButton:h,showFileList:m,showMemberProfile:O,startCallByMemberId:y,startImByMemberId:C,isOffline:S,isCallsAllowedByAdmin:w,clogger:T,callsApp:N,featurePhoneIntegration:P}=e,{featureModernProfileFlexpane:A,featureOfflineMode:M}=Object(v.a)(),x=Object(d.D)(i),R=Object(r.useCallback)(e=>{var{appId:t}=e;y({memberId:i.id,appId:t}),l(),o()},[i.id,o,l,y]),D=Object(d.K)(i),F=Object(d.Ab)(i);if(!A)return null;var L;if(Object(d.Hb)(i))L=s.a.createElement(_.d,{className:"p-member_profile_buttons__button",onClick:()=>{T.track(j.EventId.USER_PROFILE_EDIT_PROFILE_CLICK,{edit_profile_button_type:F?"complete":"incomplete"}),u(),o()},type:F?"outline":"primary","data-qa":"member_profile_edit_btn"},I.t("Edit Profile"));else if(Object(d.Ib)(i))L=s.a.createElement(_.d,{className:"p-member_profile_buttons__button",onClick:()=>{var e=I.t("remind",{ns:"chat_commands"});t({commandName:"/".concat(e)}),o()},type:"outline","data-qa":"member_profile_remind_btn"},I.t("Remind Me"));else if(!Object(d.xb)(i))if(h)if(Object(d.db)(i)&&w){var U=Object(k.e)(P,N,x)?s.a.createElement("div",{className:"display_flex p-member_profile_buttons__button_body"},s.a.createElement("div",{className:"p-member_profile_buttons__button_body_label"},I.t("Call")),s.a.createElement("div",{className:"p-member_profile_buttons__button_body_icon"},s.a.createElement(b.b,{"data-qa":"call_icon_chevron_down",className:"p-classic_nav__model__button--chevron",type:"chevron_down",inline:!0}))):I.t("Call"),B=s.a.createElement(_.d,{className:"p-member_profile_buttons__button",onClick:Object(k.e)(P,N,x)?null:R,type:"outline","data-qa":"member_profile_call_btn",disabled:M&&S,"aria-label":M&&S?I.t("Go online to start a call"):I.t("Call {name}",{name:D})},U),H=M?s.a.createElement(f.a,{tooltipLabel:I.t("Go online to start a call")}):null;L=M&&S?s.a.createElement(g.c,{tip:H},s.a.createElement("span",{className:"p-member_profile_buttons__button_disabled_container"},B)):B,L=Object(k.e)(P,N,x)?s.a.createElement(E.a,{member:i,onMenuItemSelected:R},L):L}else L=s.a.createElement(_.d,{className:"p-member_profile_buttons__button",onClick:()=>{m({user:i.id}),o()},type:"outline","data-qa":"member_profile_files_btn"},I.t("View Files"));else L=s.a.createElement(_.d,{className:"p-member_profile_buttons__button",onClick:()=>{O({memberId:i.id}),o()},type:"outline","data-qa":"member_profile_profile_btn"},I.t("View Profile"));return s.a.createElement("div",{className:c()(n,"p-member_profile_buttons")},s.a.createElement(_.d,{"aria-label":I.t("Message {name}",{name:Object(d.K)(i)}),className:"p-member_profile_buttons__button",onClick:()=>{C({memberId:i.id}),p(),o()},type:"outline","data-qa":"member_profile_message_btn"},I.t("Message")),L,a)}T.defaultProps=w;var N={autoFillSlashCommand:function(){return Object(h.a)(...arguments)},openEditProfileModal:function(){return Object(u.a)(...arguments)},showFileList:function(){return Object(m.g)(...arguments)},showMemberProfile:function(){return Object(m.j)(...arguments)},startCallByMemberId:function(){return Object(S.a)(...arguments)},startImByMemberId:function(){return Object(p.startImByMemberId)(...arguments)}};t.a=Object(i.b)(e=>({isOffline:!Object(O.c)(e),isCallsAllowedByAdmin:Object(y.g)(e),callsApp:Object(k.d)(e),featurePhoneIntegration:Object(C.b)(e)}),N)(T)},l1Ba:function(e,t,a){"use strict";function n(){var e=window.location.search||"";if(e.indexOf("force_degraded_list=1")>0)return!0;if(e.indexOf("force_infinite_list=1")>0)return!1;var t=window.navigator.userAgent;return-1!==t.indexOf("Firefox")||(-1!==t.indexOf("Windows")||-1!==t.indexOf("Linux"))}a.d(t,"a",function(){return n})},l31K:function(e,t,a){},lKeU:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("cZF4"),r=a("Muja"),s=a("0VPD"),i=a("Gogr");function o(){var e=Object.keys(Object(i.c)("teams")||{}),t=Object.keys(Object(i.c)("prevTeams")||{}),a=Object(n.a)(e,t),o=Object(i.c)("orderedTeamIds"),c=Object(n.a)(Object(s.a)(o,a),e);return Object(r.a)(c,o)||Object(i.h)("orderedTeamIds",c),c}},lV17:function(e,t,a){"use strict";var n=a("wx14"),r=a("ifKl"),s=a("q1tI"),i=a.n(s),o=a("aK/h"),c=a("TSYQ"),l=a.n(c),d=a("XHGt"),p=a("lhZz"),u=a("brL+"),h=a("t85p"),m=a("s/0T"),b=a("/gpl"),_=a("vmJv"),g=a("YSKj"),f=a("iTOt"),v=e=>{var t=Object(f.c)(e),a=t.entityId,n=t.tabId;if(t&&a&&n&&Object(g.a)(n,a,e))return t&&t.tabId},O=a("g+Y+"),y=a("zoXk"),C=a("ajyX"),j=a("hgYl"),E=a("Tc5z"),k=a("6Jf9"),S=a("UYUI"),I=a("dz01"),w=a("oRCd"),T=a("V18M"),N=a("qgOg"),P=a("Fwh9"),A=a("Lev8"),M=a("bPB8"),x=a("nNoG"),R=a("RYr5"),D=a("kme9"),F=a("NYva"),L=a("4M+g"),U=a("fOe4"),B=a("6kok"),H=a("2jER"),W=a("WeBd"),q=a("BA81"),G=new x.b("app_space"),K={tab:void 0,badgeCount:0,isEnabled:!1,isAppHomeStateLoading:!1,isHomeEnabled:!1,isMessagesEnabled:!0,callAppHomeOpenEventByChannelId:r.a,clogDMOpen:r.a};class model_info_app_im_tabs_ModelInfoAppImTabs extends s.PureComponent{constructor(e){super(e),this.handleTabChange=this.handleTabChange.bind(this),this.focus=this.focus.bind(this),this.tabsRef=i.a.createRef()}componentDidMount(){this.maybeRedirectToNewTab()}componentDidUpdate(e){(!this.props.isAppHomeStateLoading&&e.isAppHomeStateLoading||this.props.channelId!==e.channelId)&&this.maybeRedirectToNewTab()}setTabId(e){var{shouldReplaceState:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{tab:a,channelId:n}=this.props;a!==e&&("messages"!==e?this.props.setTab({tabId:e,channelId:n,shouldReplaceState:t}):this.props.setTab({channelId:n,shouldReplaceState:t}))}getValidTabs(){var{badgeCount:e}=this.props;return Object(M.a)([this.props.isHomeEnabled?{id:j.b.APP,title:G.t("Home"),content:i.a.createElement(s.Fragment,null),"data-qa":"home"}:null,this.props.isMessagesEnabled?{id:j.b.MESSAGES,title:i.a.createElement("span",null,G.t("Messages"),e?i.a.createElement(W.b,{className:"p-classic_nav__model__title__name__tabs__badge",count:e,style:W.a.red}):null),content:i.a.createElement(s.Fragment,null),"data-qa":"messages"}:null,{id:j.b.ABOUT,title:G.t("About"),content:i.a.createElement(s.Fragment,null),"data-qa":"about"}])}dispatchAppHomeOpenEvent(e){var{channelId:t}=this.props,a=e||"messages";return"app"===a&&(a="home"),this.props.callAppHomeOpenEventByChannelId({channelId:t,appHomeSection:a})}handleTabChange(e){this.setTabId(e),this.dispatchAppHomeOpenEvent(e)}currentTabIsValid(){var{tab:e}=this.props;return!!this.getValidTabs().find(t=>t.id===e)}maybeRedirectToNewTab(){var{channelId:e,isEnabled:t,isAppHomeStateLoading:a}=this.props;if(t&&!a){var n=this.props.tab;this.currentTabIsValid()||(n=this.getValidTabs()[0].id,this.setTabId(n,{shouldReplaceState:!0})),this.props.clogDMOpen({channelId:e,tabId:n}),this.dispatchAppHomeOpenEvent(n)}}focus(){this.tabsRef&&this.tabsRef.current.focus()}render(){var{tab:e,isEnabled:t,isAppHomeStateLoading:a}=this.props;if(!t||a)return null;var n=this.getValidTabs(),r=this.currentTabIsValid()?e:void 0,s=n.map(e=>e.id).join(","),o=l()("p-classic_nav__model__title__name__tabs__workspace",{"p-classic_nav__model__title__name__tabs__workspace--messages":"messages"===r});return i.a.createElement("div",{className:o},i.a.createElement(q.a,{key:s,currentTabId:r,defaultTabId:n[0].id,tabs:n,onTabChange:this.handleTabChange,ref:this.tabsRef}))}}model_info_app_im_tabs_ModelInfoAppImTabs.defaultProps=K;var V=Object(H.a)(model_info_app_im_tabs_ModelInfoAppImTabs,"ModelInfoAppImTabs",{index:1}),z=Object(d.b)(e=>{var t=Object(_.a)(e),a=v(e)||"messages",n=Object(B.kb)(e,t),{isLoading:r,isHomeEnabled:s,isMessagesEnabled:i}=Object(U.a)(e),o=Object(L.e)(e,t),c=i||Object(I.j)(e)&&"messages"===a||o&&Object(B.U)(o)||Object(B.x)(e,t);return{channelId:t,tab:a,badgeCount:o?Object(L.d)(e,o):0,isEnabled:n,isAppHomeStateLoading:r,isHomeEnabled:s,isMessagesEnabled:c}},e=>({setTab:function(){return e(Object(F.a)(...arguments))},callAppHomeOpenEventByChannelId:function(){return e(Object(R.b)(...arguments))},clogDMOpen:function(){return e(Object(D.a)(...arguments))}}))(V),Y=a("ceeJ"),Q=a("CF4u"),X=a("tn36"),J=a("RAX8"),Z=a("GaFD"),$=a("r31G"),ee=a("uI5u"),te=a("ynxK"),ae=a("cW5R"),ne=a("kOzZ"),re=a("ayyL"),se=a("ubOb"),ie=a("negh"),oe=new x.b("notifications"),ce=3,le=3650,de={notificationPermission:"default",shouldHideBanner:!1,hasKeyboardFocusWithin:!1,onFocus:r.a,onBlur:r.a,clogger:{}},pe=Object(H.a)(ee.a,"EnableNotificationsBanner",{index:0}),ue=Object(H.a)(ee.a,"ConfirmationBanner",{index:0}),he=(e,t)=>Object(Z.q)()&&"denied"!==e&&"1"!==Object(ae.c)("no_growl_banner")&&"1"!==Object(ae.c)("defer_growl_banner")&&!t,me=ie.UiStep.NOTIFICATOIN_BANNER_FIRST_PROMPT,be=ie.UiStep.NOTIFICATOIN_BANNER_SECOND_PROMPT;class banner_enable_notifications_BannerEnableNotifications extends s.Component{constructor(e){super(e),Object(X.a)(this,["onClickEnableNotificationsBanner","onCloseEnableNotificationsBanner","onClickDeferNotificationsBanner","onClickNeverNotificationsBanner"]),this.state={showConfirmationBanner:!1},this.focusEnableButton=!1,this.enableNotificationsButton=i.a.createRef()}componentDidMount(){he(this.props.notificationPermission,this.props.shouldHideBanner)&&this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:ie.UiAction.IMPRESSION,step:me}}})}componentDidUpdate(e,t){var{showConfirmationBanner:a}=t,{showConfirmationBanner:n}=this.state;this.focusEnableButton&&!a&&n&&(this.enableNotificationsButton.current.focus(),this.focusEnableButton=!1),!he(e.notificationPermission,e.shouldHideBanner)&&he(this.props.notificationPermission,this.props.shouldHideBanner)&&this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:ie.UiAction.IMPRESSION,step:me}}}),!a&&n&&this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:ie.UiAction.IMPRESSION,step:be}}})}onClickEnableNotificationsBanner(){var e=this.state.showConfirmationBanner?be:me;this.props.promptForPermissionAndSetPref().then(()=>{this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:ie.UiAction.CLICK,step:e,ui_properties:{element_type:"link",element_name:"enable"}}}}),this.setState(()=>({showConfirmationBanner:!1}))})}onCloseEnableNotificationsBanner(){this.props.hasKeyboardFocusWithin&&(this.focusEnableButton=!0),this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:ie.UiAction.CLICK,step:me,ui_properties:{element_name:"dismiss",element_type:"button"}}}}),this.setState(()=>({showConfirmationBanner:!0}))}onClickDeferNotificationsBanner(){Object(ae.a)("defer_growl_banner","1",ce),this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:ie.UiAction.CLICK,step:be,ui_properties:{element_name:"defer",element_type:"link"}}}}),this.setState(()=>({showConfirmationBanner:!1}))}onClickNeverNotificationsBanner(){Object(ae.a)("no_growl_banner","1",le),this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:ie.UiAction.CLICK,step:be,ui_properties:{element_name:"never",element_type:"link"}}}}),this.setState(()=>({showConfirmationBanner:!1}))}render(){var{onFocus:e,onBlur:t}=this.props,{showConfirmationBanner:a}=this.state,n=i.a.createElement(te.a,{onClick:this.onClickEnableNotificationsBanner},oe.t("enable desktop notifications"));return i.a.createElement(s.Fragment,null,a?i.a.createElement(s.Fragment,null,i.a.createElement(ue,{onFocus:e,onBlur:t,showCloseButton:!1,isFixedPosition:!1},oe.t("We strongly recommend enabling desktop notifications if you'll be using Slack on this computer."),i.a.createElement("br",null),i.a.createElement(te.a,{ref:this.enableNotificationsButton,onClick:this.onClickEnableNotificationsBanner},oe.t("Enable notifications"))," \u2022 ",i.a.createElement(te.a,{onClick:this.onClickDeferNotificationsBanner},oe.t("Ask me later"))," \u2022 ",i.a.createElement(te.a,{onClick:this.onClickNeverNotificationsBanner},oe.t("Never ask again on this computer")))):he(this.props.notificationPermission,this.props.shouldHideBanner)&&i.a.createElement(pe,{type:"info",showCloseButton:!0,onClose:this.onCloseEnableNotificationsBanner,isFixedPosition:!1,onFocus:e,onBlur:t},oe.rt("Slack needs your permission to {enableNotificationsLink}.",{enableNotificationsLink:n})))}}banner_enable_notifications_BannerEnableNotifications.defaultProps=de;var _e={promptForPermissionAndSetPref:$.c},ge=Object(se.a)(Object(d.b)(e=>({notificationPermission:Object(J.b)(e),shouldHideBanner:Object(re.w)(e),clogger:Object(ne.a)({state:e})}),_e)(banner_enable_notifications_BannerEnableNotifications)),fe=a("0f2Y"),ve=a("rWF5"),Oe=a("KP4j"),ye=new x.b("files"),Ce={toggleBanner:r.a},je=Object(H.a)(ee.a,"EnablePopupsBanner",{index:0});class banner_enable_popups_BannerEnablePopups extends s.Component{constructor(e){super(e),Object(X.a)(this,["onCloseEnablePopupsBanner"])}onCloseEnablePopupsBanner(){this.props.toggleBanner(!1)}render(){var{isBannerShowing:e}=this.props;return e&&!Object(ve.v)()&&i.a.createElement(s.Fragment,null,i.a.createElement(je,{type:"info",showCloseButton:!0,onClose:this.onCloseEnablePopupsBanner,isFixedPosition:!1},ye.rt("Please allow pop-ups in your browser. You can <a>contact Slack</a> if you need help.",{},e=>{var{text:t,key:a}=e;return i.a.createElement(fe.a,{key:a,href:"http://my.slack.com/help/requests/new"},t)})))}}banner_enable_popups_BannerEnablePopups.defaultProps=Ce;var Ee=Object(d.b)(e=>({isBannerShowing:Object(Oe.b)(e)}),e=>({toggleBanner:function(){return e(Object(Oe.c)(...arguments))}}))(Object(H.a)(banner_enable_popups_BannerEnablePopups,"BannerEnablePopups",{index:0})),ke=a("rePB"),Se=a("1hAG"),Ie=a("HvGc"),we=a("5mKg");function Te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Ne=new x.b("dunning_banners"),Pe="admin/billing/failed",Ae="help/requests/new",Me={dunning_day_1_banner:{bannerPrefs:{countPref:"dunning_day_1_banner_cta_count",tsPref:"dunning_day_1_banner_last_ts"},renderMethod:"renderDunningDay1"},dunning_day_3_banner:{bannerPrefs:{countPref:"dunning_day_3_banner_cta_count",tsPref:"dunning_day_3_banner_last_ts"},renderMethod:"renderDunningDay3"},dunning_day_7_owner_cardholder_banner:{bannerPrefs:{countPref:"dunning_day_7_owner_cardholder_banner_cta_count",tsPref:"dunning_day_7_owner_cardholder_banner_last_ts"},renderMethod:"renderDunningDay7OwnerCardHolder"},dunning_day_7_admin_billing_contacts_banner:{bannerPrefs:{countPref:"dunning_day_7_admin_billing_contacts_banner_cta_count",tsPref:"dunning_day_7_admin_billing_contacts_banner_last_ts"},renderMethod:"renderDunningDay7AdminBillingContacts"},dunning_day_14_owner_cardholder_banner:{bannerPrefs:{countPref:"dunning_day_14_owner_cardholder_banner_cta_count",tsPref:"dunning_day_14_owner_cardholder_banner_last_ts"},renderMethod:"renderDunningDay14OwnerCardHolder",warningLevel:"urgent"},dunning_day_14_admin_billing_contacts_banner:{bannerPrefs:{countPref:"dunning_day_14_admin_billing_contacts_banner_cta_count",tsPref:"dunning_day_14_admin_billing_contacts_banner_last_ts"},renderMethod:"renderDunningDay14AdminBillingContacts",warningLevel:"urgent"},dunning_day_21_billing_stakeholders_banner:{bannerPrefs:{countPref:"dunning_day_21_billing_stakeholders_banner_cta_count",tsPref:"dunning_day_21_billing_stakeholders_banner_last_ts"},renderMethod:"renderDunningDay21BillingStakeHolders",warningLevel:"urgent"},dunning_day_21_all_users_banner:{bannerPrefs:{countPref:"dunning_day_21_all_users_banner_cta_count",tsPref:"dunning_day_21_all_users_banner_last_ts"},renderMethod:"renderDunningDay21AllUsers"}};class banner_dunning_BannerDunning extends s.Component{constructor(e){super(e),Object(X.a)(this,["onClose"])}componentDidUpdate(e){var{bannerName:t}=this.props;t&&t!==e.bannerName&&Me[t]&&this.clog({action:ie.UiAction.IMPRESSION,ui_component:ie.UiComponent[t.toUpperCase()],ui_properties:{element_type:ie.ElementType.BANNER}})}onClose(){var{bannerName:e}=this.props;if(e){var{bannerPrefs:t}=Me[e];this.clog({action:ie.UiAction.CLICK,is_primary_cta:!0,ui_component:ie.UiComponent[e.toUpperCase()],ui_properties:{element_type:ie.ElementType.BUTTON,element_name:"close"}}),this.props.closeBanner({bannerPrefs:t})}}clog(e){var{clogger:t}=this.props,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Te(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({step:ie.UiStep.BANNER_DUNNING},e);t.track(ie.EventId.UPGRDEXP_DUNNING_BANNER,{contexts:{ui_context:a}})}clogLink(e){var{bannerName:t}=this.props;this.clog({action:ie.UiAction.CLICK,is_primary_cta:!0,ui_component:ie.UiComponent[t.toUpperCase()],ui_properties:{element_type:ie.ElementType.LINK,element_name:e}})}renderDunningDay1(){var{team:e}=this.props;return Ne.rt("There was an issue processing your recent payment. <a>Update your payment details</a>",null,t=>{var{text:a,key:n}=t;return i.a.createElement(fe.a,{key:n,onClick:()=>{Object(we.P)(e,Pe),this.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},a)})}renderDunningDay3(){var{team:e}=this.props;return Ne.rt("Keep your workspace from being downgraded to the Free plan by <a>updating your payment details</a>.",null,t=>{var{text:a,key:n}=t;return i.a.createElement(fe.a,{key:n,onClick:()=>{Object(we.P)(e,Pe),this.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},a)})}renderDunningDay7OwnerCardHolder(){var{team:e}=this.props;return Ne.rt("Keep your paid plan for access to your full message history. <a>Update your payment details</a>",null,t=>{var{text:a,key:n}=t;return i.a.createElement(fe.a,{key:n,onClick:()=>{Object(we.P)(e,Pe),this.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},a)})}renderDunningDay7AdminBillingContacts(){return Ne.rt("There was an issue processing payment for this workspace. Please <a>ask your Workspace Owner</a> to update their payment details.",null,e=>{var{text:t,key:a}=e;return i.a.createElement(fe.a,{key:a,onClick:()=>{this.props.showMemberDirectory({filter:"admins"}),this.clogLink("show_members_admins")},"data-qa":"banner-dunning_admin_members_link"},t)})}renderDunningDay14OwnerCardHolder(){var{team:e}=this.props;return Ne.rt("Your payment is overdue, and your workspace will be downgraded soon. Keep your paid plan by <a>updating your payment details</a>.",null,t=>{var{text:a,key:n}=t;return i.a.createElement(fe.a,{key:n,onClick:()=>{Object(we.P)(e,Pe),this.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},a)})}renderDunningDay14AdminBillingContacts(){var{team:e}=this.props;return Ne.rt("Payment for this workspace is overdue, and it will be downgraded soon. Questions? <a>Contact your Workspace Owner</a>, or <contact>contact support</contact>.",null,t=>{var{text:a,key:n,tag:r}=t;return"a"===r?i.a.createElement(fe.a,{key:n,onClick:()=>{this.props.showMemberDirectory({filter:"admins"}),this.clogLink("show_members_admins")},"data-qa":"banner-dunning_admin_members_link"},a):i.a.createElement(fe.a,{key:n,onClick:()=>{Object(we.P)(e,Ae),this.clogLink("contact_support")},"data-qa":"banner-dunning_support_link"},a)})}renderDunningDay21BillingStakeHolders(){var{team:e,bannerData:t}=this.props,a=t.num_days_til_downgrade||7;return Ne.rt("Your workspace will be downgraded if payment is not received within {numDaysTilDowngrade} days. <a>Update your payment details</a> or <contact>contact support</contact>.",{numDaysTilDowngrade:a},t=>{var{text:a,key:n,tag:r}=t;return"a"===r?i.a.createElement(fe.a,{key:n,onClick:()=>{Object(we.P)(e,Pe),this.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},a):i.a.createElement(fe.a,{key:n,onClick:()=>{Object(we.P)(e,Ae),this.clogLink("contact_support")},"data-qa":"banner-dunning_support_link"},a)})}renderDunningDay21AllUsers(){return Ne.rt("Your workspace may be downgraded soon, which will limit how many past messages you can see. Questions? <a>Contact your admins</a>",null,e=>{var{text:t,key:a}=e;return i.a.createElement(fe.a,{key:a,onClick:()=>{this.props.showMemberDirectory({filter:"admins"}),this.clogLink("show_members_admins")},"data-qa":"banner-dunning_admin_members_link"},t)})}render(){var{bannerName:e}=this.props;if(!e)return null;var t=Me[e];if(!t)return null;var a=t.warningLevel||"warning";return i.a.createElement(ee.a,{type:a,isFixedPosition:!1,onClose:this.onClose},this[t.renderMethod]())}}banner_dunning_BannerDunning.defaultProps={bannerName:"",bannerData:{}};var xe=Object(d.b)(e=>({bannerName:Object(w.d)(e),bannerData:Object(w.c)(e),team:Object(Se.d)(e),clogger:Object(ne.a)({state:e})}),e=>({closeBanner:function(){return e(Object(w.a)(...arguments))},showMemberDirectory:function(){return e(Object(Ie.i)(...arguments))}}))(banner_dunning_BannerDunning),Re=a("dxEi"),De=a("h9PG"),Fe=a("Fdc0"),Le=a("hjTk"),Ue=a("4vzu"),Be=a("MREy"),He=a("llxT"),We=a("od5y"),qe=a("RAhH"),Ge=a("/Qam"),Ke=a("XL7r"),Ve=a("7dYf"),ze=a("PJXc"),Ye=a("vPEJ"),Qe=a("0SzJ"),Xe=a("mqzt"),Je=a("/LVU"),Ze=a("qN/r"),$e=a("dohy"),et=a("jcvV"),tt=(a("1iAE"),new x.b("do_not_disturb")),at={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:!1,currentChannel:{},menuProps:{},openPrefsModal:r.a,openDndDialog:r.a,openChannelNotificationPrefsModal:r.a,clogger:{track:r.a},showNotificationScheduleNewBadge:!1,setUserPrefByApi:r.a,featureGranularDnd:!1,isIAP1Enabled:!1};class dnd_enabled_menu_DndEnabledMenu extends s.PureComponent{constructor(e){super(e),this.renderSubmenu=this.renderSubmenu.bind(this),this.onClickDoNotDisturbSchedule=this.onClickDoNotDisturbSchedule.bind(this),this.onClickNotificationPreferences=this.onClickNotificationPreferences.bind(this)}onClickDoNotDisturbSchedule(){var{featureGranularDnd:e,showNotificationScheduleNewBadge:t}=this.props;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"}),e&&t&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:!0})}onClickNotificationPreferences(){this.props.openPrefsModal({activeSection:"notifications"})}renderDndMenuHeader(){var{inDndBySnooze:e,snoozeEndTs:t,dndEndTs:a,do24hrTime:n,featureGranularDnd:r}=this.props,s=e?t:a,o=Object(Xe.b)(s,{do24hrTime:n}),c=l()({"p-dnd_menu__snooze_header":e||r,"p-dnd_menu__schedule_header":!e&&!r});return i.a.createElement("div",{className:c},i.a.createElement("div",{className:"p-dnd_menu__header_status"},i.a.createElement("div",null,i.a.createElement("strong",null,r?tt.t("Do Not Disturb"):tt.t("Do Not Disturb: ON"))),i.a.createElement("div",null,o)))}renderSubmenu(e){var{clogger:t,isIAP1Enabled:a}=this.props;return i.a.createElement(Be.f,Object(n.a)({},e,{width:200}),i.a.createElement(Be.b,{label:tt.t("30 minutes"),onSelected:()=>{this.props.snoozeNotifications({duration:30,reason:"DndEnabledMenu:30m"}),t.track(ie.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:30,dnd_preset:ie.DndPreset.DURATION_30_MINUTES,dnd_snooze_type:ie.DndSnoozeType.SNOOZE_ADJUST})}}),i.a.createElement(Be.b,{label:tt.t("1 hour"),onSelected:()=>{this.props.snoozeNotifications({duration:60,reason:"DndEnabledMenu:1hr"}),t.track(ie.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:60,dnd_preset:ie.DndPreset.DURATION_1_HOUR,dnd_snooze_type:ie.DndSnoozeType.SNOOZE_ADJUST})}}),i.a.createElement(Be.b,{label:tt.t("2 hours"),onSelected:()=>{this.props.snoozeNotifications({duration:120,reason:"DndEnabledMenu:2hr"}),t.track(ie.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:120,dnd_preset:ie.DndPreset.DURATION_2_HOURS,dnd_snooze_type:ie.DndSnoozeType.SNOOZE_ADJUST})}}),!a&&i.a.createElement(Be.b,{label:tt.t("4 hours"),onSelected:()=>{this.props.snoozeNotifications({duration:240,reason:"DndEnabledMenu:4hr"}),t.track(ie.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:240,dnd_preset:ie.DndPreset.DURATION_4_HOURS,dnd_snooze_type:ie.DndSnoozeType.SNOOZE_ADJUST})}}),i.a.createElement(Be.b,{label:tt.t("Until tomorrow"),onSelected:()=>{var e=Object(Xe.d)();this.props.snoozeNotifications({duration:e,reason:"DndEnabledMenu:tomorrow"}),t.track(ie.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:e,dnd_preset:ie.DndPreset.DURATION_TOMORROW,dnd_snooze_type:ie.DndSnoozeType.SNOOZE_ADJUST})}}),!a&&i.a.createElement(Be.b,{label:tt.t("Until next week"),onSelected:()=>{var e=Object(Xe.c)();this.props.snoozeNotifications({duration:e,reason:"DndEnabledMenu:week"}),t.track(ie.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:e,dnd_preset:ie.DndPreset.DURATION_NEXT_WEEK,dnd_snooze_type:ie.DndSnoozeType.SNOOZE_ADJUST})}}),i.a.createElement(Be.b,{label:tt.t("Custom\u2026"),onSelected:()=>{this.props.openDndDialog(),t.track(ie.EventId.DND_OPEN_CUSTOM_SNOOZE_DIALOG)}}))}renderAdjustMenuItem(){var{inDndBySnooze:e,featureGranularDnd:t}=this.props;return e||t?i.a.createElement(ze.a,{label:tt.t("Adjust time"),renderSubmenu:this.renderSubmenu}):i.a.createElement(Be.b,{label:tt.t("Adjust schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule})}renderSettingsMenuItem(){var{currentChannel:e}=this.props;if(!e.id||Object(B.hb)(e))return null;var t=i.a.createElement(Ye.a,{channelId:e.id,iconProps:{inherit:!0,align:"baseline"},inline:!0}),a=tt.rt("Settings for {name}\u2026",{name:i.a.createElement("strong",null,t),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return i.a.createElement(Be.b,{label:a,onSelected:()=>this.props.openChannelNotificationPrefsModal({channelId:e.id,entryPoint:"dnd_enabled_menu"})})}render(){var e,t,{inDndBySnooze:a,menuProps:r,featureGranularDnd:s,showNotificationScheduleNewBadge:o,isIAP1Enabled:c}=this.props;s&&(e=i.a.createElement("span",{className:"p-dnd_menu__new_pill"},tt.t("NEW")),t=o?i.a.createElement("span",null,tt.t("Notification schedule\u2026")," ",e):tt.t("Notification schedule\u2026"));return i.a.createElement("div",null,this.renderDndMenuHeader(),i.a.createElement(Be.f,Object(n.a)({},r,{menuClassNames:"p-dnd_menu"}),i.a.createElement(Be.b,{label:s?tt.t("Turn off"):tt.t("Resume notifications now"),onSelected:()=>{a?this.props.endDndSnooze({reason:"DndEnabledMenu:end_snooze"}):this.props.endDndSchedule({reason:"DndEnabledMenu:end_schedule"})},danger:s}),this.renderAdjustMenuItem(),i.a.createElement(Be.d,null),c&&i.a.createElement(Be.c,{label:"Availability"}),i.a.createElement(Be.b,{label:s?t:tt.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!s&&!c&&this.renderSettingsMenuItem(),!s&&!c&&i.a.createElement(Be.b,{label:tt.t("Your notification preferences\u2026",{fallbackHash:"4fa8d4f0498a550e3cf075dc9c810f7b6f771e65"}),onSelected:this.onClickNotificationPreferences}),c&&i.a.createElement(Qe.a,null)))}}dnd_enabled_menu_DndEnabledMenu.defaultProps=at;var nt=Object(d.b)(e=>{var t=Object(h.d)(e),{nextDndEndTs:a}=Object(Ue.e)(e,t),{snoozeEnabled:n,snoozeEndTs:r}=Object(Ue.f)(e);return{inDndBySnooze:n,snoozeEndTs:r,dndEndTs:a,do24hrTime:Object(Ke.k)(e,"time24"),clogger:Object(ne.a)({state:e}),featureGranularDnd:Object(h.m)(e,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(Ke.k)(e,"dnd_notification_schedule_new_badge_seen")}},e=>({snoozeNotifications:t=>e(Object(Je.e)(t)),openDndDialog:()=>e(Object($e.a)()),endDndSnooze:t=>e(Object(Je.b)(t)),endDndSchedule:t=>e(Object(Je.a)(t)),openChannelNotificationPrefsModal:t=>e(Object(et.a)(t)),setUserPrefByApi:t=>e(Object(Ve.f)(t)),openPrefsModal:t=>e(Object(Ze.a)(t))}))(dnd_enabled_menu_DndEnabledMenu);function rt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function st(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var it=new x.b("do_not_disturb"),ot={currentChannel:{},className:void 0,featureGranularDnd:!1,featureClassicNav:!1,clogger:{track:r.a}};class dnd_button_DndButton extends s.PureComponent{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this),Object(X.a)(this,["onClick"])}onClick(){var{clogger:e}=this.props;e.track(ie.EventId.DND_MENU_OPEN,{})}renderMenu(e){var t,{inDnd:a,currentChannel:r,featureClassicNav:s}=this.props;return s&&(t={menuProps:st({},e,{onMenuItemSelected:(t,a)=>{a.stopPropagation(),e.onMenuItemSelected(t,a)}})}),a?i.a.createElement(nt,Object(n.a)({currentChannel:r,menuProps:e},t)):i.a.createElement(Ge.a,Object(n.a)({currentChannel:r,menuProps:e},t))}render(){var{inDnd:e,className:t,featureGranularDnd:a}=this.props,n=e?"snooze-outline":"bell-o";return i.a.createElement(Be.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:8,onClick:this.onClick},i.a.createElement(qe.c,{tip:a?it.t("Do Not Disturb"):it.t("Notifications"),position:"bottom",hideFromScreenReader:!0},i.a.createElement(He.a,{className:l()("p-dnd_button",t),"data-qa":"do_not_disturb_btn","aria-label":a?it.t("Do Not Disturb"):it.t("Notifications"),"aria-pressed":e},i.a.createElement(We.b,{type:n}))))}}dnd_button_DndButton.defaultProps=ot;var ct=Object(d.b)(e=>{var t=Object(_.a)(e);return{inDnd:!!Object(Ue.c)(e),currentChannel:Object(L.e)(e,t)||void 0,featureGranularDnd:Object(h.m)(e,"feature_granular_dnd"),featureClassicNav:Object(h.m)(e,"feature_classic_nav"),clogger:Object(ne.a)({state:e})}})(dnd_button_DndButton),lt=a("rz65"),dt=a("d24p"),pt=a("NZTl"),ut=a("eglI"),ht=a("Jn9h"),mt=(a("skMg"),new x.b("global_actions")),bt={menuProps:{},clogger:{track:r.a},featureGlobalActionsV0:!1};class global_actions_menu_GlobalActionsMenu extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["onClickMessage","onClickChannel","renderBrowseMoreTools"])}onClickMessage(){this.props.isComposeFlowEnabled?this.props.openComposerPage():this.props.openDmBrowserModal()}onClickChannel(){this.props.openChannelCreateModal({showOpenTransition:!1,entryPoint:"global_actions"})}renderBrowseMoreTools(){var{menuProps:e,featureGlobalActionsV0:t}=this.props;if(!t)return null;var a=i.a.createElement(We.b,{type:"search",className:"p-global_actions_menu__icon p-global_actions_menu__icon_search",size:"inherit"}),s=i.a.createElement(ht.a,{src:"/img/global-actions/asana/asana@2x.png",height:"20",width:"20",alt:""}),o=i.a.createElement(ht.a,{src:"/img/global-actions/bitmoji/bitmoji@2x.png",height:"20",width:"20",alt:""});return i.a.createElement(Be.f,Object(n.a)({},e,{menuClassNames:"p-global_actions_menu"}),i.a.createElement(Be.b,{icon:a,className:"p-global_actions_menu__item",onSelected:r.a},i.a.createElement(ut.default,{className:"p-global_actions_menu__search_input_box",ariaLabel:mt.t("Find tools"),placeholder:mt.t("Find tools \u2026"),isSingleLine:!0})),i.a.createElement(Be.d,null),i.a.createElement(Be.c,{label:mt.t("Asana"),className:"p-global_actions_menu__item_header"}),i.a.createElement(Be.b,{icon:s,label:mt.t("Create a new task"),className:"p-global_actions_menu__item p-global_actions_menu__asana",onSelected:this.onClickChannel}),i.a.createElement(Be.b,{icon:s,label:mt.t("View my tasks"),className:"p-global_actions_menu__item p-global_actions_menu__asana",onSelected:this.onClickChannel}),i.a.createElement(Be.c,{label:mt.t("Bitmoji"),className:"p-global_actions_menu__item_header"}),i.a.createElement(Be.b,{icon:o,label:mt.t("Send a Bitmoji"),className:"p-global_actions_menu__item p-global_actions_menu__bitmoji",onSelected:this.onClickChannel}))}render(){var{menuProps:e,featureGlobalActionsV0:t}=this.props;if(!t)return null;var a=i.a.createElement("div",{className:"p-global_actions_menu__icon p-global_actions_menu__icon_message"},i.a.createElement(We.b,{type:"pencil-filled",size:"inherit"})),r=i.a.createElement("div",{className:"p-global_actions_menu__icon p-global_actions_menu__icon_channel"},i.a.createElement(We.b,{type:"channel",size:"inherit"})),s=i.a.createElement(ht.a,{src:"/img/global-actions/reminder/reminder@2x.png",height:"20",width:"20",alt:""}),o=i.a.createElement(ht.a,{src:"/img/global-actions/zoom/zoom@2x.png",height:"20",width:"20",alt:""}),c=i.a.createElement(ht.a,{src:"/img/global-actions/giphy/giphy@2x.png",height:"20",width:"20",alt:""});return i.a.createElement("div",null,i.a.createElement(Be.f,Object(n.a)({},e,{menuClassNames:"p-global_actions_menu"}),i.a.createElement(Be.b,{icon:a,label:mt.t("Start a message"),className:"p-global_actions_menu__item p-global_actions_menu__item_primary",onSelected:this.onClickMessage,type:lt.a.custom}),i.a.createElement(Be.b,{icon:r,label:mt.t("Create a channel"),className:"p-global_actions_menu__item p-global_actions_menu__item_primary",onSelected:this.onClickChannel,type:lt.a.custom}),i.a.createElement(Be.d,null),i.a.createElement(Be.c,{label:mt.t("Suggestions"),className:"p-global_actions_menu__item_header p-global_actions_menu__item_header_suggestions"}),i.a.createElement(Be.b,{icon:s,label:mt.t("New reminder"),className:"p-global_actions_menu__item",href:"https://calendar.google.com/calendar/b/1/r/eventedit",showLinkIndicatorIcon:!1,onSelected:()=>this.props.clogger.track(ie.EventId.GLOBAL_ACTIONS_CLICK_APP,{app_id:"reminder"})}),i.a.createElement(Be.b,{icon:o,label:mt.t("Start a Zoom call"),className:"p-global_actions_menu__item",href:"https://slack.zoom.us/j/176336025",showLinkIndicatorIcon:!1,onSelected:()=>this.props.clogger.track(ie.EventId.GLOBAL_ACTIONS_CLICK_APP,{app_id:"zoom"})}),i.a.createElement(Be.b,{icon:c,label:mt.t("Find a GIF"),className:"p-global_actions_menu__item",href:"https://giphy.com",showLinkIndicatorIcon:!1,onSelected:()=>this.props.clogger.track(ie.EventId.GLOBAL_ACTIONS_CLICK_APP,{app_id:"giphy"})}),i.a.createElement(ze.a,{label:mt.t("Browse more tools"),className:"p-global_actions_menu__item p-global_actions_menu__item_header",renderSubmenu:this.renderBrowseMoreTools})))}}global_actions_menu_GlobalActionsMenu.defaultProps=bt;var _t={openDmBrowserModal:function(){return Object(dt.a)(...arguments)},openComposerPage:function(){return Object(pt.a)(...arguments)},openChannelCreateModal:function(){return Object(S.a)(...arguments)}},gt=Object(d.b)(e=>({clogger:Object(ne.a)({state:e}),featureGlobalActionsV0:Object(h.m)(e,"feature_global_actions_v0"),isComposeFlowEnabled:Object(O.g)(e)}),_t)(global_actions_menu_GlobalActionsMenu),ft=new x.b("global_actions"),vt={className:void 0,featureGlobalActionsV0:!1,clogger:{track:r.a}};class global_actions_button_GlobalActionsButton extends s.PureComponent{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this),Object(X.a)(this,["onClick"])}onClick(){this.props.clogger.track(ie.EventId.GLOBAL_ACTIONS_CLICK,{})}renderMenu(e){return i.a.createElement(gt,{menuProps:e})}render(){var{className:e,featureGlobalActionsV0:t}=this.props;return t?i.a.createElement(Be.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:8,onClick:this.onClick},i.a.createElement(qe.c,{tip:ft.t("New"),position:"bottom"},i.a.createElement(He.a,{className:l()("p-global_actions_button",e),"data-qa":"global_actions_btn","aria-label":ft.t("New")},i.a.createElement(We.b,{type:"plus"})))):null}}global_actions_button_GlobalActionsButton.defaultProps=vt;var Ot=Object(d.b)(e=>({featureGlobalActionsV0:Object(h.m)(e,"feature_global_actions_v0"),clogger:Object(ne.a)({state:e})}))(global_actions_button_GlobalActionsButton),yt=a("ZYn4"),Ct=a("6avh"),jt=a("XLFM"),Et=a("bmfP"),kt=a("Smdl"),St=a("/Rx2"),It=a("quKg"),wt=a("Srcy"),Tt=a("U/ze"),Nt=a("oTSI"),Pt=a("Wy5O"),At=a("btvA"),Mt=a("Z7Ay"),xt=a("XfeM"),Rt=a("om+M"),Dt=a("4zXV"),Ft=Object(Rt.a)("Create a new Channel Section for this user",function(e,t){var{name:a,emoji:n,nextChannelSectionId:r=null,reason:s="channel_sections_create"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Object(N.a)(t()))return Promise.reject(new Error("Channel sections not enabled"));var i={name:a,emoji:n};return r&&(i.next_channel_section_id=r),e(Object(Dt.a)({method:"users.channelSections.create",args:i,reason:s}))});Ft.meta={name:"fetchChannelSectionsCreate",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsCreate",description:"Create a new Channel Section for this user"},Ft.propTypes={name:o.default.string.isRequired,emoji:o.default.string.isRequired,nextChannelSectionId:o.default.string};var Lt=Object(Rt.a)("Update a Channel Section for this user",function(e,t){var{channelSectionId:a,name:n,emoji:r,nextChannelSectionId:s=null,reason:i="channel_sections_set"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Object(N.a)(t()))return Promise.reject(new Error("Channel sections not enabled"));var o={channel_section_id:a,name:n,emoji:r};return s&&(o.next_channel_section_id=s),e(Object(Dt.a)({method:"users.channelSections.set",args:o,reason:i}))});Lt.meta={name:"fetchChannelSectionsSet",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsSet",description:"Update a Channel Section for this user"},Lt.propTypes={channelSectionId:o.default.string.isRequired,name:o.default.string.isRequired,emoji:o.default.string.isRequired,nextChannelSectionId:o.default.string};var Ut=Object(Rt.a)("Gets the list of channel sections for this user",function(e,t){var{reason:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{reason:"channel_sections_list"};return Object(N.a)(t())?e(Object(Dt.a)({method:"users.channelSections.list",args:{},reason:a})):Promise.reject(new Error("Channel sections not enabled"))});Ut.meta={name:"fetchChannelSectionsList",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsList",description:"Gets the list of channel sections for this user"},Ut.propTypes={};var Bt=Object(Rt.a)("Gets a channel section for this user with the given ID",function(e,t){var{channelSectionId:a,reason:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{reason:"channel_sections_get"};return Object(N.a)(t())?e(Object(Dt.a)({method:"users.channelSections.get",args:{channel_section_id:a},reason:n})):Promise.reject(new Error("Channel sections not enabled"))});Bt.meta={name:"fetchChannelSectionsGetById",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsGetById",description:"Gets a channel section for this user with the given ID"},Bt.propTypes={channelSectionId:o.default.string.isRequired};var Ht=Object(Rt.a)("Delete a Channel Section for this user",function(e,t){var{channelSectionId:a,reason:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{reason:"channel_sections_delete"};return Object(N.a)(t())?e(Object(Dt.a)({method:"users.channelSections.delete",args:{channel_section_id:a},reason:n})):Promise.reject(new Error("Channel sections not enabled"))});Ht.meta={name:"fetchChannelSectionsDelete",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsDelete",description:"Delete a Channel Section for this user"},Ht.propTypes={channelSectionId:o.default.string.isRequired};var Wt=Object(Rt.a)("Insert or re-insert a channel into a section",function(e,t){var{channelSectionId:a,channelId:n,reason:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{reason:"channel_sections_channel_insert"};return Object(N.a)(t())?e(Object(Dt.a)({method:"users.channelSections.channels.insert",args:{channel_section_id:a,channel_id:n},reason:r})):Promise.reject(new Error("Channel sections not enabled"))});Wt.meta={name:"fetchChannelSectionsChannelsInsert",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsChannelsInsert",description:"Insert or re-insert a channel into a section"},Wt.propTypes={channelSectionId:o.default.string.isRequired,channelId:o.default.string.isRequired};var qt=Object(Rt.a)("Remove a channel from a section",function(e,t){var{channelSectionId:a,channelId:n,reason:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{reason:"channel_sections_channel_reomve"};return Object(N.a)(t())?e(Object(Dt.a)({method:"users.channelSections.channels.remove",args:{channel_section_id:a,channel_id:n},reason:r})):Promise.reject(new Error("Channel sections not enabled"))});qt.meta={name:"fetchChannelSectionsChannelsRemove",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsChannelsRemove",description:"Remove a channel from a section"},qt.propTypes={channelSectionId:o.default.string.isRequired,channelId:o.default.string.isRequired};var Gt=Object(Rt.a)("Bulk update channel section membership",function(e,t){var{remove:a,insert:n,reason:r="channel_sections_channel_bulk_update"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(N.a)(t())?e(Object(Dt.a)({method:"users.channelSections.channels.bulkUpdate",args:{remove:JSON.stringify((a||[]).map(e=>({channel_section_id:e.channelSectionId,channel_ids:e.channelIds}))),insert:JSON.stringify((n||[]).map(e=>({channel_section_id:e.channelSectionId,channel_ids:e.channelIds})))},reason:r})):Promise.reject(new Error("Channel sections not enabled"))});Gt.meta={name:"fetchChannelSectionsChannelsBulkUpdate",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsChannelsBulkUpdate",description:"Bulk update channel section membership"},Gt.propTypes={remove:o.default.arrayOf(o.default.shape({channelSectionId:o.default.string.isRequired,channelIds:o.default.arrayOf(o.default.string).isRequired})),insert:o.default.arrayOf(o.default.shape({channelSectionId:o.default.string.isRequired,channelIds:o.default.arrayOf(o.default.string).isRequired}))},Object(Mt.a)("fetchChannelSections",{list:e=>Object(p.dispatchForTeamId)(e,Ut()),create:(e,t,a,n)=>Object(p.dispatchForTeamId)(e,Ft({name:t,emoji:a,nextChannelSectionId:n})),set:(e,t,a,n,r)=>Object(p.dispatchForTeamId)(e,Lt({channelSectionId:t,name:a,emoji:n,nextChannelSectionId:r})),deleteSection:(e,t)=>Object(p.dispatchForTeamId)(e,Ht({channelSectionId:t})),insertChannel:(e,t,a)=>Object(p.dispatchForTeamId)(e,Wt({channelSectionId:t,channelId:a})),removeChannel:(e,t,a)=>Object(p.dispatchForTeamId)(e,qt({channelSectionId:t,channelId:a}))});var Kt=a("S6Dj"),Vt=Object(xt.b)("Fetches and upserts Channel Sections",function(e,t){var{ids:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{ids:[]};return e(Ut()).then(t=>{t.channel_sections.forEach(t=>{e(Object(Kt.l)({channelSectionId:t.channel_section_id,channelSection:{id:t.channel_section_id,type:t.type,name:t.name,emoji:t.emoji,nextChannelSectionId:t.next_channel_section_id}}));var a=t&&t.channel_ids_page&&t.channel_ids_page.channel_ids||[];e(Object(Kt.e)({channelSectionId:t.channel_section_id,channelIds:a}))});var n=t.channel_sections.map(e=>e.channel_section_id);return Object(Pt.a)(a,n).forEach(t=>e(Object(Kt.b)({channelSectionId:t}))),n})});Vt.meta={name:"fetchAndUpsertChannelSectionsList",key:"channelSectionsStoreConditionalFetchingFetchAndUpsertChannelSectionsList",description:"Fetches and upserts Channel Sections"},Vt.propTypes={ids:o.default.arrayOf(o.default.string).isRequired};var zt=Object(Nt.a)(()=>new At.b({fetch:(e,t)=>Object(p.dispatchForTeamId)(e,Vt({ids:t})).then(()=>{(void 0).markObjectsAsFresh(e,["channel-sections-list-pseudo-id"])}),isEnabled:e=>Object(N.a)(Object(p.getStateByTeamId)(e)),metricsName:"channel-sections",maxAge:()=>86400})),Yt=e=>zt().maybeRefetch(e,"channel-sections-list-pseudo-id");Object(Mt.b)("conditionalFetchManagerChannelSections",zt);var Qt=Object(Tt.b)(e=>(Yt(Object(u.b)(e)),e&&e.channelSections&&e.channelSections.channelSectionById||{}));Qt.meta={name:"getAllChannelSections",key:"channelSectionsStoreChannelSectionsSelectorsGetAllChannelSections"};var Xt=Object(Tt.b)(e=>(Yt(Object(u.b)(e)),e&&e.channelSections&&e.channelSections.orderedChannelSectionList));Xt.meta={name:"_getOrderedChannelSections",key:""},Xt.meta={name:"getOrderedChannelSections",key:"channelSectionsStoreChannelSectionsSelectorsGetOrderedChannelSections"};var Jt=Object(Tt.b)(e=>{var t=Xt(e);return t&&t[0]&&t[0].id||null});Jt.meta={name:"getFirstChannelSectionId",key:"channelSectionsStoreChannelSectionsSelectorsGetFirstChannelSectionId"};var Zt=Object(Tt.b)((e,t)=>(Yt(Object(u.b)(e)),e&&e.channelSections.channelSectionById&&e.channelSections.channelSectionById[t]));Zt.meta={name:"_getChannelSectionById",key:""},Zt.meta={name:"getChannelSectionById",key:"channelSectionsStoreChannelSectionsSelectorsGetChannelSectionById"};var $t=Object(Tt.b)(e=>(Yt(Object(u.b)(e)),e&&e.channelSections&&e.channelSections.channelIdsByChannelSectionId));$t.meta={name:"getAllChannelSectionChannels",key:"channelSectionsStoreChannelSectionsSelectorsGetAllChannelSectionChannels"};var ea=[],ta=Object(Tt.b)((e,t)=>(Yt(Object(u.b)(e)),e&&e.channelSections&&e.channelSections.channelIdsByChannelSectionId&&e.channelSections.channelIdsByChannelSectionId[t]||ea));ta.meta={name:"_getChannelSectionChannels",key:""},ta.meta={name:"getChannelSectionChannels",key:"channelSectionsStoreChannelSectionsSelectorsGetChannelSectionChannels"};var aa=Object(Tt.b)(e=>e&&e.channelSections&&e.channelSections.channelSectionIdsByChannelId);aa.meta={name:"getChannelSectionIdsByChannelId",key:"channelSectionsStoreChannelSectionsSelectorsGetChannelSectionIdsByChannelId"};var na=[],ra=Object(Tt.b)((e,t)=>e&&e.channelSections&&e.channelSections.channelSectionIdsByChannelId&&e.channelSections.channelSectionIdsByChannelId[t]||na);ra.meta={name:"getChannelChannelSections",key:"channelSectionsStoreChannelSectionsSelectorsGetChannelChannelSections"};var sa=Object(Tt.b)((e,t)=>ra(e,t).length>0);sa.meta={name:"getChannelIsInAnyChannelSection",key:"channelSectionsStoreChannelSectionsSelectorsGetChannelIsInAnyChannelSection"};var ia=Object(Tt.b)((e,t)=>e&&e.channelSections&&e.channelSections.localChannelSectionById&&e.channelSections.localChannelSectionById[t]);ia.meta={name:"_getLocalChannelSectionById",key:""},ia.meta={name:"getLocalChannelSectionById",key:"channelSectionsStoreChannelSectionsSelectorsGetLocalChannelSectionById"};var oa=Object(Tt.b)(e=>e&&e.channelSections.isOrganizing);oa.meta={name:"getIsOrganizing",key:"channelSectionsStoreChannelSectionsSelectorsGetIsOrganizing"},Object(Tt.b)(e=>e&&e.channelSections.focusedChannelSectionId).meta={name:"getFocusedChannelSectionId",key:"channelSectionsStoreChannelSectionsSelectorsGetFocusedChannelSectionId"};var ca=Object(Tt.b)((e,t)=>!!(e&&e.channelSections&&e.channelSections.defaultSectionsCollapsed&&e.channelSections.defaultSectionsCollapsed[t]));ca.meta={name:"isDefaultSectionCollapsed",key:"channelSectionsStoreChannelSectionsSelectorsIsDefaultSectionCollapsed"};var la=Object(Tt.b)((e,t)=>!!(e&&e.channelSections&&e.channelSections.customSectionsCollapsed&&e.channelSections.customSectionsCollapsed[t]));la.meta={name:"isCustomSectionCollapsed",key:"channelSectionsStoreChannelSectionsSelectorsIsCustomSectionCollapsed"};var da=Object(Tt.b)(e=>e&&e.channelSections&&e.channelSections.customSectionsCollapsed);da.meta={name:"getAllCustomSectionCollapsedDict",key:"channelSectionsStoreChannelSectionsSelectorsGetAllCustomSectionCollapsedDict"};var pa=Object(Tt.b)(e=>e&&e.channelSections&&e.channelSections.defaultSectionsCollapsed);pa.meta={name:"getAllDefaultSectionCollapsedDict",key:"channelSectionsStoreChannelSectionsSelectorsGetAllDefaultSectionCollapsedDict"};var ua=Object(Tt.b)(e=>e&&e.channelSections&&Object.keys(e.channelSections.organizingSectionItemSelectedState).length||0);ua.meta={name:"getOrganizingSectionItemSelectionCount",key:"channelSectionsStoreChannelSectionsSelectorsGetOrganizingSectionItemSelectionCount"};var ha=Object(Tt.b)((e,t,a)=>!!(e&&e.channelSections&&e.channelSections.organizingSectionItemSelectedState&&e.channelSections.organizingSectionItemSelectedState["".concat(t,"-").concat(a)]));ha.meta={name:"getIsOrganizingSectionItemSelected",key:"channelSectionsStoreChannelSectionsSelectorsGetIsOrganizingSectionItemSelected"};var ma=Object(Tt.b)(e=>e&&e.channelSections&&e.channelSections.organizingSectionItemSelectedState&&Object.values(e.channelSections.organizingSectionItemSelectedState));ma.meta={name:"getAllSelectedItems",key:"channelSectionsStoreChannelSectionsSelectorsGetAllSelectedItems"};var ba=Object(Tt.b)(e=>e&&e.channelSections&&e.channelSections.lastActiveDropTargetForChannelDrag);ba.meta={name:"getLastActiveDropTargetForChannelDrag",key:"channelSectionsStoreChannelSectionsSelectorsGetLastActiveDropTargetForChannelDrag"};var _a=Object(Tt.b)(e=>e&&e.channelSections&&e.channelSections.lastActiveDropTargetForChannelSectionDrag);_a.meta={name:"getLastActiveDropTargetForChannelSectionDrag",key:"channelSectionsStoreChannelSectionsSelectorsGetLastActiveDropTargetForChannelSectionDrag"},Object(Mt.a)("channelSectionsSelectors",{getOrderedChannelSections:e=>Xt(e),getChannelSectionById:(e,t)=>Zt(e,t),getLocalChannelSectionById:(e,t)=>ia(e,t),getChannelSectionChannels:(e,t)=>ta(e,t)});var ga=a("a+Oh"),fa=a("peKf"),va=a("SNtu"),Oa=a("okZA"),ya=a("Ff2n"),Ca=a("G4ux"),ja=a("yZEV"),Ea=a("W045"),ka=a("eqKo"),Sa=a("8vJI"),Ia=a("g5qt"),wa=a("3dqR"),Ta=e=>{var{name:t,secondary:a,userId:n}=e,r=a&&i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__sub"},a);return i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb p-classic_nav__team_menu__blurb--user"},i.a.createElement(wa.c,{userId:n,size:36,isInteractive:!1,className:"p-classic_nav__team_menu__blurb__icon",tabIndex:"-1"}),i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__right"},i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__name"},t),r))};Ta.defaultProps={secondary:void 0};var Na=Object(d.b)(e=>{var t=Object(Ca.b)(e);return{name:Object(Fe.V)(e,t),secondary:Object(Fe.M)(e,t),userId:t.id}})(Ta),Pa=new x.b("classic_nav");function Aa(e,t){var{hasCustomStatus:a,presence:n,featureClassicNav:r,featureOfflineMode:s,isOffline:o}=e;return r?[{type:"custom",children:i.a.createElement(Na,{key:"user-blurb"}),show:!0,key:"user-blurb"},{label:Pa.t("Clear status"),show:a,click:t.clearStatus,key:"clear-status"},{label:a?Pa.t("Edit status"):Pa.t("Set a status"),shortcut:Object(ve.q)()?"\u2318\u21e7Y":"Ctrl+Shift+Y",show:!0,click:t.setStatus,key:"set-status"},{label:Pa.t("Profile & account"),show:!0,click:t.openProfile,key:"profile"},{label:Pa.t("Preferences"),shortcut:Object(ve.q)()&&Ia.W&&"\u2318,",show:!0,click:t.preferences,key:"preferences"},{label:Ma({presence:n,featureClassicNav:r}),show:!0,click:t.togglePresence,key:"presence",disabled:s&&o,showOfflineIcon:s&&o},{label:Pa.t("Help & feedback"),show:!0,click:t.help,key:"help"}].filter(e=>e.show):[]}function Ma(){var{presence:e,featureClassicNav:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t)return null;switch(e){case"active":return Pa.rt("Set yourself to <strong>away</strong>");case"away":return Pa.rt('<strong className="half_opacity">Away</strong> Set yourself to <strong>active</strong>');default:return null}}function xa(e){var t=Object(Ca.b)(e);return{hasCustomStatus:Object(Fe.ab)(t),presence:Object(ja.f)(e,t.id),isOffline:!Object(Re.c)(e),featureClassicNav:Object(h.m)(e,"feature_classic_nav"),featureOfflineMode:Object(h.m)(e,"feature_offline_mode")}}function Ra(e){return{clearStatus:()=>e(Object(Ea.a)({profile:{status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0}})),setStatus:()=>e(Object(ka.a)()),openProfile:()=>e(Object(Ie.j)()),preferences:()=>e(Object(Ze.a)()),togglePresence:()=>e(Object(ja.h)()),help:()=>e(Object(Sa.a)())}}var Da=a("yU6Y"),Fa=a.n(Da),La=a("KGMq"),Ua=a("dhvi"),Ba=a("oT5T"),Ha=a("0nhw"),Wa=a("yHhI"),qa=a("ns4K"),Ga=a("qafc"),Ka=a("s5Is"),Va=a("derf");function za(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Ya=new x.b("leave_workspace"),Qa=Object(Wa.b)(),Xa={featureSonicLeaveWorkspaceDialog:!1,callLeaveWorkspace:r.a,enqueueToast:r.a,removeWorkspaceAndSignOutOfTeam:r.a,getSelfEnterpriseOwnerEmail:r.a},Ja={disableDeniedDueToIdpGroupMembership:"disable_denied_due_to_idpgroup_membership",userDeletedAlready:"user_deleted_already",failedToConvertOrgUserToTeamUser:"failed_to_convert_org_user_to_team_user"};class leave_workspace_dialog_LeaveWorkspaceDialog extends i.a.Component{constructor(e){super(e),this.state={isLoading:!1},this.onClickSubmit=this.onClickSubmit.bind(this),this.trackLeaveClick=this.trackLeaveClick.bind(this)}onClickSubmit(){var{team:e,removeWorkspaceAndSignOutOfTeam:t,featureSonicLeaveWorkspaceDialog:a}=this.props;if(!a)return null;var n=Object(we.i)(e);this.setState(()=>({isLoading:!0}));var r=this.props.getSelfEnterpriseOwnerEmail();return this.trackLeaveClick(),this.props.callLeaveWorkspace({teamId:n}).catch(a=>{var{data:s}=a;if(s.error===Ja.disableDeniedDueToIdpGroupMembership){var o=Ya.rt("<strong>You can\u2019t leave this workspace.</strong>"),c=Ya.rt("Because you\u2019re in an IdP group assigned to this workspace, you can\u2019t leave it here. <a>Contact an Org Admin</a> for help leaving the workspace.",null,e=>{var{key:t,text:a}=e;return i.a.createElement("a",{key:t,href:"mailto:".concat(r),target:"_blank",rel:"noopener noreferrer"},a)});this.setToastText({node:i.a.createElement("div",null,i.a.createElement("strong",null,o),i.a.createElement("br",null),c)}),Qa.error("Error with Leave Workspace Action from TeamMenu - ",s.error)}else if(s.error===Ja.userDeletedAlready||s.error===Ja.failedToConvertOrgUserToTeamUser){t(n);var l=Ya.rt("<strong>You've successfully left {team_name}</strong>",{team_name:Object(we.e)(e),fallbackHash:"4a38fa5a5bec946cb5cc0d6a9e2817bc498562aa"});this.setToastText({node:i.a.createElement("span",null,l)})}else{var d=Ya.rt("<strong>Leaving workspace failed due to an error</strong>",{fallbackHash:"e51a69c26500f73f762ddcacb0cdcb7db688191f"});this.setToastText({node:i.a.createElement("span",null,d)}),Qa.error("Error with Leave Workspace Action from TeamMenu - ",s.error)}}).finally(()=>{this.setState(()=>({isLoading:!1}))})}setToastText(e){var{node:t}=e;this.props.enqueueToast({element:i.a.createElement(Ga.b,{position:"bottom-right",offsetY:50,fadeDelay:5e3},t)})}trackLeaveClick(){var{team:e,clogger:t}=this.props,a={anchor_page:"your_workspaces",entity_key:"leave_workspace_confirm",target_team_id:Object(we.i)(e),tracking_code:"your_workspaces_list"};t.track("ENTERPRISE_LEAVE_WORKSPACE",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?za(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):za(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a,{},{contexts:{ui_context:{action:"click",action_status:1}}}))}render(){var{featureSonicLeaveWorkspaceDialog:e,team:t}=this.props,{isLoading:a}=this.state;if(!e)return null;var n=Ya.t("Are you sure you want to leave {team_name}?",{team_name:Object(x.q)(Object(we.e)(t)),fallbackHash:"2db4b766c6e1e14fbc2657d45b8fb13b96b85dd6"}),r=i.a.createElement("div",{className:"display_flex align_items_center"},i.a.createElement(Va.b,{id:Object(we.i)(t),size:20,className:"margin_right_75"}),i.a.createElement("div",null,n));return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ba.a,{title:r,titleAria:n,goButtonText:Ya.t("Leave This Workspace",{fallbackHash:"29b1014ee5c119d2a9785259535f58bb3f123bb6"}),onGo:this.onClickSubmit,showCancelButton:!0,truncateTitle:!1,shouldCloseOnGo:!0,goButtonIsPending:a},Object(we.J)(t)&&Ya.t("This workspace is hidden. Once you leave, you won\u2019t have access unless you\u2019re invited back.")))}}leave_workspace_dialog_LeaveWorkspaceDialog.defaultProps=Xa;var Za=Object(d.b)(e=>{var t=Object(h.d)(e);return{team:Object(Se.d)(e),clogger:Object(ne.a)({state:e}),member:Object(Ca.d)(e,t),featureSonicLeaveWorkspaceDialog:Object(h.m)(e,"feature_sonic_leave_workspace_dialog"),getSelfEnterpriseOwnerEmail:()=>Object(Se.f)(e)}},e=>({enqueueToast:function(){return e(Object(qa.c)(...arguments))},callLeaveWorkspace:function(){return e(Object(Ha.c)(...arguments))},removeWorkspaceAndSignOutOfTeam:e=>Object(p.dispatchForClientStore)(Object(Ka.removeWorkspace)(e))}))(leave_workspace_dialog_LeaveWorkspaceDialog),$a=Object(xt.b)("Opens the leave a workspace dialog",(e,t)=>{Object(h.m)(t(),"feature_sonic_leave_workspace_dialog")&&e(Object(Ua.e)({element:i.a.createElement(Za,{})}))});$a.meta={name:"openLeaveWorkspaceDialog",key:"actionsOpenLeaveWorkspaceDialogOpenLeaveWorkspaceDialog",description:"Opens the leave a workspace dialog"};var en=$a;$a.propTypes={};var tn=a("XUHR"),an=a("AjwY"),nn=Object(xt.b)("Clogs shared channels team menu item click",(e,t)=>{var a=t(),n=Object(ne.a)({state:a}),r=Object(we.D)(Object(Se.d)(a));n.track(ie.EventId.GROWTH_INTRO_SHARED_CHANNEL,{contexts:{ui_context:{step:ie.UiStep.TEAM_MENU,step_variant:r?an.b.PAID:an.b.FREE,action:ie.UiAction.CLICK,ui_properties:{element_type:ie.ElementType.LINK,element_name:r?"shared_channels_beta_cta":"shared_channels_beta_new_cta"}}}}),n.track(ie.EventId.CHANNEL_CREATE_FLOW,{contexts:{family:"shared",ui_context:{step:"channel_create_modal",action:ie.UiAction.CLICK,ui_properties:{element_type:ie.ElementType.BUTTON,element_name:"shared_channels_new"}}}})});nn.meta={name:"clogSharedChannelsTeamMenuItemClick",key:"actionsClogSharedChannelsTeamMenuItemClickClogSharedChannelsTeamMenuItemClick",description:"Clogs shared channels team menu item click"};var rn=nn,sn=a("Qrgz"),on=a("XNBh"),cn=a("Lts7"),ln=a("UEyp"),dn=a("KXvl"),pn=a("p9qW"),un=a("6FZx"),hn=Object(Tt.b)(e=>e&&e.teamMenuCTA&&e.teamMenuCTA.name);hn.meta={name:"getTeamMenuCTAName",key:"teamMenuCtaStoreTeamMenuCtaSelectorsGetTeamMenuCTAName"};var mn=Object(Tt.b)(e=>e&&e.teamMenuCTA&&e.teamMenuCTA.data);mn.meta={name:"getTeamMenuCTAData",key:"teamMenuCtaStoreTeamMenuCtaSelectorsGetTeamMenuCTAData"};var bn=a("dhcM"),_n=a("U28S"),gn=a("j4mf");a("5DNE");class team_messages_progress_bar_TeamMessagesProgressBar extends s.Component{render(){var{containerSizeInPixels:e,progressPercentage:t,progressBarWidthInPixels:a,progressBarColor:n,progressBarBackgroundColor:r,progressBarLabel:s}=this.props,o=(e-a)/2,c=o*Math.PI*2,l=c-c*t/100,d=e/2;return i.a.createElement("svg",{width:e,height:e,viewBox:"0 0 ".concat(e," ").concat(e)},i.a.createElement("circle",{className:"p-classic_nav__team_messages_progress_bar_background",cx:d,cy:d,r:o,strokeWidth:"".concat(a,"px"),style:{stroke:r}}),i.a.createElement("circle",{className:"p-classic_nav__team_messages_progress_bar_progress",cx:d,cy:d,r:o,strokeWidth:"".concat(a,"px"),transform:"rotate(-90 ".concat(d," ").concat(d,")"),style:{stroke:n,strokeDasharray:c,strokeDashoffset:l}}),i.a.createElement("text",{className:"p-classic_nav__team_messages_progress_bar_text",x:d,y:d,dy:"4px",textAnchor:"middle"},s||Object(gn.e)(t,{precision:2})))}}team_messages_progress_bar_TeamMessagesProgressBar.defaultProps={progressBarColor:null,progressBarBackgroundColor:null,progressBarLabel:null};var fn=team_messages_progress_bar_TeamMessagesProgressBar,vn=a("7nxQ"),On=a("BWAg");a("Rx/r");function yn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Cn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yn(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var jn=new x.b("classic_nav"),En=1e4,kn=10100,Sn=1e6,In={r:69,g:186,b:133},wn={r:255,g:197,b:101},Tn={r:243,g:61,b:95},Nn="rgba(0, 0, 0, 0.1)",Pn="team_messages_limit_meter";var An=Object(d.b)(e=>({clogger:Object(ne.a)({state:e}),team:Object(Se.d)(e),inLimitMeterSpAbbrExper:"treatment"===Object(It.c)(e,"limit_meter_spanish_no_abbreviations")}))(class team_messages_limit_meter_TeamMessagesLimitMeter extends s.Component{constructor(e){super(e),Object(X.a)(this,["onLimitMeterSelected"])}componentDidMount(){this.clogImpression()}onLimitMeterSelected(){var{team:e}=this.props,t=Object(Ia.U)()?"stats":Object(an.j)({entryPoint:Pn});Object(we.P)(e,t),this.clogClick()}getTotalMessagesDetail(){var{messagesCount:e,inLimitMeterSpAbbrExper:t}=this.props;return e>En?e<kn||e>Sn?jn.rt("Upgrade to access all of your messages."):jn.rt("Upgrade to access your first {hiddenMessagesCountFormatted} messages.",{hiddenMessagesCountFormatted:Object(_n.a)(e-En,{precision:2,lowercase:!0,inLimitMeterSpAbbrExper:t})}):jn.rt("On the free plan, you can only view 10k most recent messages.")}getTeamMessagesProgressBarData(){var{messagesCount:e}=this.props,t=0,a=null,n=null;if(e<=En){t=e/En*100,a=Nn;var r=Object(bn.a)(Cn({},In),Cn({},wn),(e,a)=>Math.floor(e*(1-t/100)+a*(t/100)));n="rgb(".concat(r.r,", ").concat(r.g,", ").concat(r.b,")")}else t=100*(Math.atan((e-En)/2500-3)/Math.PI+.5),a="rgb(".concat(wn.r,", ").concat(wn.g," , ").concat(wn.b,")"),n="rgb(".concat(Tn.r,", ").concat(Tn.g,", ").concat(Tn.b,")");return{progressBarPercentage:t,progressBarBackgroundColor:a,progressBarColor:n}}shouldShowProgressChart(){var{messagesCount:e,inLimitMeterSpAbbrExper:t}=this.props;return!("es"===Object(vn.f)().split("-")[0]&&e>99999&&t)}clog(e){var{action:t,elementType:a}=e;this.props.clogger.track(ie.EventId.UPGRDEXP_LIMIT_METER,{contexts:{ui_context:{step:ie.UiStep.SLACK_MENU,action:t,ui_properties:{element_type:a,element_name:Pn,element_value:this.props.messagesCount}}}})}clogImpression(){this.clog({action:ie.UiAction.IMPRESSION,elementType:ie.ElementType.BANNER})}clogClick(){this.clog({action:ie.UiAction.CLICK,elementType:ie.ElementType.BUTTON})}renderHeading(e){if(this.shouldShowProgressChart())return i.a.createElement("strong",null,jn.rt("Total Messages"));var{inLimitMeterSpAbbrExper:t}=this.props;return i.a.createElement("strong",null,i.a.createElement("span",{className:"p-classic_nav__team_messages_limit_meter__heading"},jn.rt("Total Messages:",{fallbackHash:"534d090466ace9a2753bce9fb5c9771d48ff6a8f"})),Object(_n.a)(e,{precision:e>=En?3:2,lowercase:!0,inLimitMeterSpAbbrExper:t}))}renderProgressBar(e){if(!this.shouldShowProgressChart())return null;var{progressBarPercentage:t,progressBarBackgroundColor:a,progressBarColor:n}=this.getTeamMessagesProgressBarData(),{inLimitMeterSpAbbrExper:r}=this.props;return i.a.createElement("div",{className:"p-classic_nav__team_messages_limit_meter__progress_chart"},i.a.createElement(fn,{containerSizeInPixels:54,progressBarWidthInPixels:4,progressPercentage:t,progressBarLabel:Object(_n.a)(e,{precision:e>=En?3:2,lowercase:!0,inLimitMeterSpAbbrExper:r}),progressBarColor:n,progressBarBackgroundColor:a}))}render(){var e=this.props,{messagesCount:t}=e,a=Object(ya.a)(e,["messagesCount"]);return i.a.createElement(On.a,Object(n.a)({},a,{onSelected:this.onLimitMeterSelected}),i.a.createElement("div",{className:"p-classic_nav__team_messages_limit_meter",role:"presentation"},i.a.createElement("div",null,i.a.createElement("div",{"data-qa":"limit-meter-heading"},this.renderHeading(t)),i.a.createElement("div",{className:"p-classic_nav__team_messages_limit_meter__detail"},this.getTotalMessagesDetail())),this.renderProgressBar(t)))}}),Mn={LIMIT_METER:"limit_meter"};var xn=Object(un.b)(Object(d.b)(e=>({ctaName:hn(e),ctaData:mn(e)}))(class team_menu_cta_container_TeamMenuCTAContainer extends s.PureComponent{render(){var e=this.props,{ctaName:t,ctaData:a}=e,r=Object(ya.a)(e,["ctaName","ctaData"]);switch(t){case Mn.LIMIT_METER:return i.a.createElement(An,Object(n.a)({messagesCount:a.messages_count},r));default:return null}}})),Rn=a("2cus"),Dn=(a("GXNc"),new x.b("classic_nav"));class discount_promo_DiscountPromo extends s.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){var{clogger:e,promoType:t,promoSubType:a}=this.props,n="team_plan_pricing_link_".concat(t);e.track(ie.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:ie.UiStep.SLACK_MENU,action:ie.UiAction.CLICK,ui_properties:{element_type:ie.ElementType.LINK,element_name:a?"".concat(n,"_").concat(a):n}}}})}renderDiscountPromo(){var e,{discountPercent:t,promoType:a,promoSubType:n,featureTargetedPromotionalDiscounts:r}=this.props,o="p-classic_nav__team_menu__plan_info";return o=l()(o,"p-classic_nav__discount_promo","p-classic_nav__discount_promo--".concat(a).concat(n?"_".concat(n):"")),a===an.d.TENURED_TEAMS&&r?e=Dn.rt("Ready to upgrade Slack? Here's {discountOfferPercent}% off.",{discountOfferPercent:t}):a===an.d.LOCAL_DISCOUNT&&(e=i.a.createElement(s.Fragment,null,Dn.rt("Get {localDiscountOfferPercent}% off a paid plan, for a limited time.",{localDiscountOfferPercent:t}),i.a.createElement("br",null))),e?i.a.createElement("p",{className:o,"data-qa":"classic_nav__team_menu__plan_info"},e," ",i.a.createElement(fe.a,{className:"bold",href:Object(an.j)({entryPoint:"team_menu_discount_promo"}),onClick:this.onClick},Dn.t("See upgrade options"))):null}render(){return this.renderDiscountPromo()}}discount_promo_DiscountPromo.defaultProps={promoSubType:null};var Fn=Object(d.b)(e=>({promoType:Object(Rn.e)(e),promoSubType:Object(Rn.d)(e),discountPercent:Object(Rn.c)(e),featureTargetedPromotionalDiscounts:Object(h.m)(e,"feature_targeted_promotional_discounts"),clogger:Object(ne.a)({state:e})}))(discount_promo_DiscountPromo),Ln=(a("Blhu"),new x.b("classic_nav")),Un={orgName:void 0};class plan_info_PlanInfo extends s.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){this.props.clogger.track(ie.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:ie.UiStep.SLACK_MENU,action:ie.UiAction.CLICK,ui_properties:{element_type:ie.ElementType.LINK,element_name:"team_plan_pricing_link"}}}})}buildPlanInfoLink(e){var{path:t,tag:a,text:n}=e;return"a"!==a?null:i.a.createElement(fe.a,{className:"bold",href:t,onClick:this.onClick},n)}renderPlanInfo(){var e,t,{team:a,orgName:n}=this.props;return Object(we.w)(a)?(e=Object(an.j)({entryPoint:"team_menu_plan_info"}),t=Ln.rt("Your workspace is currently on the free version of Slack. <a>See upgrade options</a>",{fallbackHash:"4db253b125b40c2b0b2b8bc5e70aba1dbc223e5f",fallbackHashNs:"classic_nav"},t=>{var{tag:a,text:n}=t;return this.buildPlanInfoLink({path:e,tag:a,text:n})})):Object(we.z)(a)?(e=Object(an.j)({planLevel:an.f.standard.id,entryPoint:"team_menu_plan_info"}),t=Ln.rt("Your workspace is currently on Slack's <strong>Standard</strong> plan. <a>Learn more</a>",{},t=>{var{tag:a,text:n}=t;return this.buildPlanInfoLink({path:e,tag:a,text:n})})):Object(we.x)(a)?(e=Object(an.j)({planLevel:an.f.plus.id,entryPoint:"team_menu_plan_info"}),t=Ln.rt("Your workspace is currently on Slack's <strong>Plus</strong> plan. <a>Learn more</a>",{},t=>{var{tag:a,text:n}=t;return this.buildPlanInfoLink({path:e,tag:a,text:n})})):Object(we.s)(a)?(e="account/workspace-settings",t=Ln.rt("This workspace is part of the <strong>{orgName}</strong> organization. <a>Learn more</a>",{orgName:n},t=>{var{tag:a,text:n}=t;return this.buildPlanInfoLink({path:e,tag:a,text:n})})):Object(we.v)(a)&&(t=Ln.t("Your workspace is currently on Slack\u2019s Enterprise Select plan.")),t}render(){var e=this.renderPlanInfo();return e?i.a.createElement("p",{className:"p-classic_nav__team_menu__plan_info","data-qa":"classic_nav__team_menu__plan_info"},e):null}}plan_info_PlanInfo.defaultProps=Un;var Bn=Object(d.b)(e=>{var t=Object(Se.d)(e);return{team:t,orgName:t.enterprise_name,clogger:Object(ne.a)({state:e})}})(Object(un.b)(plan_info_PlanInfo)),Hn=new x.b("classic_nav");var Wn=Object(d.b)(e=>({team:Object(Se.d)(e),clogger:Object(ne.a)({state:e}),planLevel:Object(Rn.t)(e),numDaysToExpiry:Object(Rn.s)(e),checkoutProductId:Object(Rn.r)(e)}))(class trial_info_TrialInfo extends s.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){var{path:t}=e,{team:a,planLevel:n,clogger:r}=this.props,s="".concat(n===an.f.standard.id?"standard":"plus","_trial");Object(we.P)(a,t),r.track(ie.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:ie.UiStep.SLACK_MENU,action:ie.UiAction.CLICK,step_variant:s,ui_properties:{element_type:ie.ElementType.LINK,element_name:"team_plan_pricing_link_trial"}}}})}render(){var{numDaysToExpiry:e,planLevel:t,checkoutProductId:a}=this.props,n=t===an.f.standard.id?Hn.t("Slack Standard"):Hn.t("Slack Plus"),r="".concat(an.a,"?s=1&p=").concat(a,"&entry_point=team_menu_trial_info");return i.a.createElement("p",{className:"p-classic_nav__team_menu__plan_info","data-qa":"classic_nav__team_menu__plan_info"},i.a.createElement(s.Fragment,null,Hn.rt("Your trial of <strong>{planName}</strong> ends in <strong>{numDaysToExpiry} days</strong>.",{numDaysToExpiry:e,planName:n,break:i.a.createElement("br",null),fallbackHashNs:"classic_nav",fallbackHash:"f7e45837bbd271a6a47dd6b4fb816040bdc19a78"})," ",i.a.createElement("br",null),i.a.createElement(te.a,{target:"_blank",className:"bold",path:r,onClick:()=>this.onClick({path:r})},Hn.t("Add payment details"))))}}),qn={PLAN_INFO:"plan_info",TRIAL_INFO:"trial_info",DISCOUNT_PROMO:"discount_promo"};var Gn={fetchPaymentsStatus:Oa.d},Kn=Object(un.b)(Object(d.b)(e=>{var t=Object(Se.d)(e),a=Object(Ca.b)(e);return{team:t,planName:Object(Rn.u)(e),isGuest:Object(Fe.wb)(a),orgName:t.enterprise_name,clogger:Object(ne.a)({state:e})}},Gn)(class plan_info_container_PlanInfoContainer extends s.PureComponent{constructor(e){super(e),this.state={paymentsStatusIsLoaded:!1}}componentDidMount(){this.props.fetchPaymentsStatus().then(()=>{this.setState(()=>({paymentsStatusIsLoaded:!0}))}),this.clogImpression()}clogImpression(){var e,{team:t,planName:a}=this.props;a===qn.TRIAL_INFO&&(e="".concat(Object(we.z)(t)?"standard":"plus","_trial")),this.props.clogger.track(ie.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:ie.UiStep.SLACK_MENU,step_variant:e,action:ie.UiAction.IMPRESSION,ui_properties:{element_type:ie.ElementType.LINK,element_name:"team_plan_pricing_link"}}}})}render(){var{planName:e,isGuest:t}=this.props;if(!this.state.paymentsStatusIsLoaded||t)return null;switch(e){case qn.PLAN_INFO:return i.a.createElement(Bn,null);case qn.TRIAL_INFO:return i.a.createElement(Wn,null);case qn.DISCOUNT_PROMO:return i.a.createElement(Fn,null);default:return i.a.createElement(Bn,null)}}})),Vn=a("0BC7"),zn=(a("p6QP"),new x.b("shared_channels"));class shared_channels_team_menu_item_SharedChannelsTeamMenuItem extends s.PureComponent{componentDidMount(){var{clogger:e,clogStepVariant:t,clogElementName:a}=this.props;e.track(ie.EventId.GROWTH_INTRO_SHARED_CHANNEL,{contexts:{ui_context:{step:ie.UiStep.TEAM_MENU,step_variant:t,action:ie.UiAction.IMPRESSION,ui_properties:{element_type:ie.ElementType.LINK,element_name:a}}}})}render(){var{showNewLabel:e}=this.props,t=zn.rt("Shared channels");return i.a.createElement("div",{className:"p-shared_channels_team_menu_item"},t,e&&i.a.createElement(s.Fragment,null," ",i.a.createElement("span",{className:"p-shared_channels_team_menu_item__label--new"},zn.rt("NEW"))))}}shared_channels_team_menu_item_SharedChannelsTeamMenuItem.defaultProps={showNewLabel:!1};var Yn=Object(d.b)(e=>{var t=Object(we.D)(Object(Se.d)(e));return{clogger:Object(ne.a)({state:e}),clogStepVariant:t?an.b.PAID:an.b.FREE,clogElementName:t?"shared_channels_beta_cta":"shared_channels_beta_new_cta"}})(shared_channels_team_menu_item_SharedChannelsTeamMenuItem),Qn=a("IEWa");a("RHBl");var Xn=Object(d.b)(e=>{var t=Object(Se.d)(e);return{team:t,name:Object(we.e)(t),url:"".concat(t.domain,".slack.com")}})(Object(un.b)(class team_blurb_TeamBlurb extends s.Component{render(){var{team:e,name:t,url:a}=this.props;return i.a.createElement("div",null,i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb p-classic_nav__team_menu__blurb--team"},i.a.createElement(Va.b,{id:e.id,size:36,className:"p-classic_nav__team_menu__blurb__icon",tabIndex:"-1"}),i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__right"},i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__name"},t),i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__sub"},a))))}})),Jn=a("wd/R"),Zn=a.n(Jn),$n=a("M+5u"),er=a("JoAr"),tr=new x.b("classic_nav"),ar="team_plan_pricing_link",nr={orgName:void 0,localDiscountOffer:null,tenuredDiscountOffer:null};class team_plan_info_TeamPlanInfo extends s.PureComponent{constructor(e){super(e),this.state={paymentsStatusIsLoaded:!1}}componentDidMount(){this.props.fetchPaymentsStatus().then(()=>{this.setState(()=>({paymentsStatusIsLoaded:!0}),this.clogImpression())})}clog(e){var{action:t,elementType:a,elementName:n=ar,stepVariant:r}=e;this.props.clogger.track(ie.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:ie.UiStep.SLACK_MENU,step_variant:r,action:t,ui_properties:{element_type:a,element_name:n}}}})}clogImpression(){var e,{team:t,featureGGFromTheStart:a}=this.props;Object(we.A)(t)&&a&&(e="".concat(Object(we.z)(t)?"standard":"plus","_trial")),this.clog({action:ie.UiAction.IMPRESSION,elementType:ie.ElementType.LINK,stepVariant:e})}clogClick(e,t){this.clog({action:ie.UiAction.CLICK,elementType:ie.ElementType.LINK,elementName:e,stepVariant:t})}buildPlanInfoLink(e){var{path:t,tag:a,text:n,elementName:r,stepVariant:s}=e;if("a"!==a)return null;var{team:o}=this.props;return i.a.createElement(te.a,{target:"_blank",className:"bold",path:t,onClick:()=>{Object(we.P)(o,t),this.clogClick(r,s)}},n)}renderTeamPlanInfo(){var e,{team:t,member:a,orgName:n,localDiscountOffer:r,tenuredDiscountOffer:o}=this.props;if(!this.state.paymentsStatusIsLoaded)return null;if(Object(Fe.wb)(a))return null;var c,d="p-classic_nav__team_menu__blurb_plan",p=Object(we.w)(t),u=Object(we.z)(t),h=Object(we.x)(t),m=Object(we.A)(t)&&!Object(we.o)(t);m||(u?c=an.f.standard.id:h&&(c=an.f.plus.id));var b=Object(an.j)({planLevel:c,entryPoint:"team_menu_plan_info"});if(p&&o.isEligible){var _="".concat(ar,"_discount_tenured_teams");e=i.a.createElement(s.Fragment,null,tr.rt("Ready to upgrade Slack? Here's {discountOfferPercent}% off.",{discountOfferPercent:o.discountPercent})," ",this.buildPlanInfoLink({path:b,tag:"a",text:tr.t("See upgrade options"),elementName:_})),d=l()("p-classic_nav__team_menu__plan_info","p-classic_nav__discount_promo","p-classic_nav__discount_promo--tenured_teams_discount")}else if((m||p)&&r){var g;g=r.country?"".concat(ar,"_discount_").concat(r.country.replace(/\s/g,"_").toLowerCase()):"".concat(ar,"_discount"),e=i.a.createElement(s.Fragment,null,tr.rt("Get {localDiscountOfferPercent}% off a paid plan, for a limited time.",{localDiscountOfferPercent:r.discountPercent})," ",this.buildPlanInfoLink({path:b,tag:"a",text:tr.t("See upgrade options"),elementName:g})),d=l()(d,"p-classic_nav__team_menu__blurb_plan--has_local_discount","p-classic_nav__team_menu__blurb_plan--has_local_discount_".concat(r.country.toLowerCase()))}else if(m)if(this.props.featureGGFromTheStart){var f=Zn()(1e3*Object(we.c)(t)),v=Object($n.a)(f,{timeZone:Object(Fe.Q)(a),timeZoneOffset:Object(Fe.R)(a),returnMoment:!0}),O=Object($n.a)(Date.now(),{timeZone:Object(Fe.Q)(a),timeZoneOffset:Object(Fe.R)(a),returnMoment:!0}),y=v.diff(O,"days")+1,C=u?tr.t("Slack Standard"):tr.t("Slack Plus"),j=u?"std_m":"plus_m";b="".concat(an.a,"?s=1&p=").concat(j,"&entry_point=team_menu_plan_info"),e=i.a.createElement(s.Fragment,null,tr.rt("Your trial of <strong>{planName}</strong> ends in <strong>{numDaysToExpiry} days</strong>.",{planName:C,numDaysToExpiry:y,break:i.a.createElement("br",null),fallbackHashNs:"classic_nav",fallbackHash:"f7e45837bbd271a6a47dd6b4fb816040bdc19a78"})," ",i.a.createElement("br",null),this.buildPlanInfoLink({path:b,tag:"a",text:tr.t("Add payment details"),elementName:"".concat(ar,"_trial"),stepVariant:"".concat(u?"standard":"plus","_trial")}))}else{var E=Zn()(1e3*Object(we.c)(t)).subtract(1,"day"),k=Object($n.a)(E,{timeZone:Object(Fe.Q)(a),timeZoneOffset:Object(Fe.R)(a),returnMoment:!0}),S=Object(er.a)(k,"{date}");e=i.a.createElement(s.Fragment,null,u?tr.rt("Your trial of <strong>Standard</strong> lasts through {trialExpiryDate}.",{trialExpiryDate:S}):tr.rt("Your trial of <strong>Plus</strong> lasts through {trialExpiryDate}.",{trialExpiryDate:S})," ",this.buildPlanInfoLink({path:b,tag:"a",text:tr.t("See upgrade options"),elementName:"".concat(ar,"_trial")}))}else p?e=tr.rt("Your workspace is currently on the free version of Slack. <a>See upgrade options</a>",{fallbackHash:"4db253b125b40c2b0b2b8bc5e70aba1dbc223e5f",fallbackHashNs:"classic_nav"},e=>{var{tag:t,text:a}=e;return this.buildPlanInfoLink({path:b,tag:t,text:a})}):u?e=tr.rt("Your workspace is currently on Slack's <strong>Standard</strong> plan. <a>Learn more</a>",{},e=>{var{tag:t,text:a}=e;return this.buildPlanInfoLink({path:b,tag:t,text:a})}):h?e=tr.rt("Your workspace is currently on Slack's <strong>Plus</strong> plan. <a>Learn more</a>",{},e=>{var{tag:t,text:a}=e;return this.buildPlanInfoLink({path:b,tag:t,text:a})}):Object(we.s)(t)?(b="account/workspace-settings",e=tr.rt("This workspace is part of the <strong>{orgName}</strong> organization. <a>Learn more</a>",{orgName:n},e=>{var{tag:t,text:a}=e;return this.buildPlanInfoLink({path:b,tag:t,text:a})})):Object(we.v)(t)&&(e=tr.t("Your workspace is currently on Slack\u2019s Enterprise Select plan."));return e?i.a.createElement("p",{className:d,"data-qa":"classic_nav__team_menu__blurb_plan"},e):null}render(){return this.renderTeamPlanInfo()}}team_plan_info_TeamPlanInfo.defaultProps=nr;var rr={fetchPaymentsStatus:Oa.d},sr=Object(d.b)(e=>{var t=Object(Se.d)(e),a=Object(h.m)(e,"feature_targeted_promotional_discounts");return{team:t,member:Object(Ca.b)(e),orgName:t.enterprise_name,clogger:Object(ne.a)({state:e}),localDiscountOffer:Object(we.k)(t),tenuredDiscountOffer:{isEligible:a&&"discount_promo"===Object(Rn.u)(e)&&"tenured_teams_discount"===Object(Rn.e)(e),discountPercent:Object(Rn.c)(e)},featureGGFromTheStart:Object(h.m)(e,"feature_gg_from_the_start")}},rr)(Object(un.b)(team_plan_info_TeamPlanInfo)),ir=a("atZP"),or=new x.b("classic_nav"),cr={teamIsEnterprise:!1,teamEnterpriseDashUrl:void 0,teamUrl:"",userIsAppmin:!1,userCanManageSharedChannels:!1,featureClassicNav:!1,performOpenManageSharedChannelsModal:r.a},lr=e=>{var{menuProps:t,teamIsEnterprise:a,teamEnterpriseDashUrl:r,teamUrl:s,userIsAppmin:o,userCanManageSharedChannels:c,featureClassicNav:l,isAdminOrOwner:d,isEnterpriseAdminOrOwner:p,performOpenManageSharedChannelsModal:u}=e;if(!l)return null;var h=r,m=[{label:or.t("Manage members"),show:d,href:"".concat(s,"admin"),key:"manage-members"},{label:or.t("Workspace settings"),show:d,href:"".concat(s,"admin/settings"),key:"workspace-settings"},{label:or.t("Organization settings"),show:p,href:h,key:"org-settings"},{label:or.t("Manage apps"),show:!a&&o,href:"".concat(s,"apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"),key:"manage-apps"},{label:or.t("Manage shared channels"),click:()=>u({entryPoint:"team_menu"}),show:c,key:"manage-shared-channels",badgeLabel:or.t("NEW")}].filter(e=>e.show);return i.a.createElement(Be.a,Object(n.a)({},t,{template:m}))};lr.defaultProps=cr;var dr=Object(d.b)(e=>{var t=Object(Se.d)(e),a=Object(Ca.b)(e),n=Object(Se.g)(e),r=Object(Fe.qb)(a)||Object(Fe.rb)(a),s=Object(Fe.eb)(e,a)||Object(Fe.Eb)(e,a)||r;return{teamIsEnterprise:Object(we.s)(t),teamUrl:Object(we.n)(t),teamEnterpriseDashUrl:Object(we.n)(n,"manage"),userIsAppmin:Object(Ca.k)(e),userCanManageSharedChannels:Object(on.a)(e)?Object(sn.y)(e)||Object(sn.S)(e):Object(Fe.g)(e,{blockAllForNoOne:!1}),featureClassicNav:Object(h.m)(e,"feature_classic_nav"),isAdminOrOwner:s,isEnterpriseAdminOrOwner:r}},e=>({performOpenManageSharedChannelsModal:function(){return e(Object(ir.a)(...arguments))}}))(lr),pr=a("Zr7G"),ur=Object(xt.b)("Counts the number of times the Open App team menu item is selected",(e,t)=>{Object(pr.c)({getState:t}).count("team_menu_download_apps")});ur.meta={name:"countOpenAppClick",key:"componentsClassicNavTeamMenuUtilityCountOpenAppClickCountOpenAppClick",description:"Counts the number of times the Open App team menu item is selected"};var hr=ur,mr=a("IY6O");function br(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var _r=new x.b("classic_nav");function gr(e,t){var{featureClassicNav:a}=e;if(!a)return[];var{userId:n,userIsAdmin:r,userIsEnterpriseAdminOrOwner:s,userIsOwner:o,userIsRestricted:c,teamIsEnterprise:l,teamIsPaid:d,orgId:p,orgName:u,teamName:h,teamUrl:m,teamEnterpriseDomain:b,team:_,isSignedIntoOtherOrgTeams:g,isSharedChannelsExplicitlyDisabled:f,userCanSeeInviteModal:v,userCanManageSharedChannelsBeta:O,userCanManageESC:y,userCanLeaveWorkspace:C,userIsAppmin:j,purchaserPref:E,statsOnlyAdmins:k,customizeOnlyAdmins:S,isAppSpaceEnabled:I,showSwitchWorkspaces:w,featureOfflineMode:T,featureTeamMenuMegaphoneTransition:N,isOffline:P,showTeamSidebar:A,workflowBuilderEnabled:M,usingAppStoreBuild:x}=e,R=!c,D=!k,F=!S;return[{type:"custom",children:i.a.createElement(Xn,{key:"team-blurb"}),show:!0,key:"team-blurb"},{type:"custom",children:i.a.createElement(sr,{key:"team-plan-info"}),show:!N&&(l||!x),key:"team-plan-info"},{type:"custom",children:i.a.createElement(Kn,{key:"plan-info-container"}),show:N&&(l||!x),key:"plan-info-container"},{type:"custom",children:i.a.createElement(xn,{key:"team-menu-cta-container"}),show:!0,key:"team-menu-cta-container"},{type:"separator",show:!0,key:"separator-team-blurb"},{type:"submenu",label:_r.t("Administration"),show:y||r||o||s,renderSubmenu:Or,key:"administration"},{label:_r.t("Invite people"),show:v,click:t.invite,key:"invite",disabled:T&&P,showOfflineIcon:T&&P},{label:_r.t("Analytics"),show:R&&(r||D),href:"".concat(m,"stats"),key:"analytics"},{label:_r.t("Billing"),show:l?s:!!d&&(o||E),href:l?"https://".concat(b,".enterprise.slack.com/manage/billing"):"".concat(m,"admin/billing"),key:"billing"},{show:M,click:t.launchWorkflowBuilder,label:_r.t("Workflow Builder"),key:"launch-workflow-builder",badgeLabel:_r.t("NEW")},{label:_r.t("Customize Slack"),show:R&&(r||F),href:"".concat(m,"customize?utm_source=in-prod&utm_medium=inprod-customize_link-slack_menu-click"),key:"customize"},{label:_r.t("Manage apps"),show:I&&j&&l,href:"".concat(m,"apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"),key:"apps"},{label:i.a.createElement(Yn,{showNewLabel:!0}),show:d&&O&&!f,click:t.externalSharedChannels,key:"ext-shared-channels"},{label:i.a.createElement(Yn,{showNewLabel:!0}),show:!d&&O&&!x,click:t.externalSharedChannels,key:"ext-shared-channels-free-team"},{label:_r.t("Find more workspaces"),show:l&&R,click:()=>t.findWorkspaces(n),disabled:T&&P,showOfflineIcon:T&&P,key:"find-workspaces"},{label:_r.t("Leave this workspace"),show:l&&C,click:t.leaveWorkspace,key:"leave-workspace",disabled:T&&P,showOfflineIcon:T&&P},{label:_r.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:h}),show:!l||Object(dn.b)()&&g,click:()=>t.signOut(_.id),key:"sign-out",dataQa:"sign-out",disabled:T&&P,showOfflineIcon:T&&P},{label:_r.rt("Sign out of <strong>{signoutName}</strong> (organization)",{signoutName:u}),show:l,click:()=>t.signOutOfOrg(p),key:"org-sign-out",dataQa:"org-sign-out",disabled:T&&P,showOfflineIcon:T&&P},{type:"separator",show:!0,key:"separator-switch"},{type:"submenu",label:_r.t("Switch workspaces"),show:w,renderSubmenu:yr,key:"switch-workspaces"},{label:_r.t("Sign in to another workspace"),show:!A,click:t.signIn,key:"sign-in",disabled:T&&P,showOfflineIcon:T&&P},{type:"separator",show:!0,key:"separator-app"},{label:_r.rt("Open the Slack App"),show:!Ia.W&&!Fa.a.chromeBook,href:"".concat(m,"ssb/redirect"),click:t.openApp,key:"open-desktop-app"}].filter(e=>e.show)}function fr(e){var t=Object(Ca.b)(e),a=Object(Se.d)(e),n=Object(mr.getNumberOfWorkspaces)(Object(p.getStateForClientStore)()),r=Object(pn.a)({numTeams:n}),s=Object(we.s)(a),i=Object(Se.g)(e),o=!Object(we.E)(e,a),c=Object(Ia.U)();return{userId:t.id,userIsAdmin:Object(Fe.eb)(e,t),userIsOwner:Object(Fe.Eb)(e,t),userIsRestricted:Object(Fe.Gb)(t),userIsEnterpriseAdminOrOwner:Object(Fe.qb)(t)||Object(Fe.rb)(t),teamIsEnterprise:s,teamIsPaid:Object(we.D)(a),orgName:a.enterprise_name,orgId:a.enterprise_id,teamName:Object(we.e)(a),teamUrl:Object(we.n)(a),teamEnterpriseDomain:i&&i.domain,team:a,numTeams:n,isSignedIntoOtherOrgTeams:Object(h.h)(e).some(e=>e.id!==a.id&&e.enterprise_id===a.enterprise_id),isSharedChannelsExplicitlyDisabled:o,userCanSeeInviteModal:Object(ln.d)(e),userCanManageSharedChannelsBeta:Object(sn.k)(e,!0),userCanManageESC:Object(on.a)(e)?Object(sn.y)(e)||Object(sn.S)(e):Object(Fe.g)(e,{blockAllForNoOne:!1}),userCanLeaveWorkspace:Object(Fe.l)(e,t)&&Object(h.m)(e,"feature_sonic_leave_workspace_dialog"),userIsAppmin:Object(Ca.k)(e),purchaserPref:Object(Ke.k)(e,"purchaser"),statsOnlyAdmins:Object(De.a)(e,"stats_only_admins"),customizeOnlyAdmins:Object(De.a)(e,"emoji_only_admins")&&Object(De.a)(e,"slackbot_responses_only_admins")&&Object(De.a)(e,"loading_only_admins"),showSwitchWorkspaces:Object(h.h)(e).length>0&&!r,showTeamSidebar:r,isAppSpaceEnabled:!0,featureClassicNav:Object(h.m)(e,"feature_classic_nav"),featureOfflineMode:Object(h.m)(e,"feature_offline_mode"),isOffline:!Object(Re.c)(e),featureTeamMenuMegaphoneTransition:Object(h.m)(e,"feature_team_menu_megaphone_transition"),workflowBuilderEnabled:Object(Qn.b)(e),usingAppStoreBuild:c}}function vr(e){return{invite:()=>e(Object(k.a)()),externalSharedChannels:function(){e(rn());for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];e(Object(tn.a)(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?br(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):br(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({entryPoint:"team_menu"},a)))},launchWorkflowBuilder:()=>e(Object(cn.a)({source:"workspace_menu"})),findWorkspaces:t=>e(Object(La.a)(t)),leaveWorkspace:t=>e(en(t)),signOut:e=>Object(p.dispatchForClientStore)(Object(Ka.removeWorkspace)(e)),signOutOfOrg:e=>Object(p.dispatchForClientStore)(Object(Ka.removeOrg)(e)),signIn:()=>Object(p.dispatchForClientStore)(Object(Ka.startWorkspaceSignIn)()),openApp:()=>e(hr())}}function Or(e){return i.a.createElement(dr,{menuProps:e})}function yr(e){return i.a.createElement(Vn.a,{menuProps:e})}var Cr={renderSonicMenu:r.a},jr=e=>{var{userItemsData:t,userItemsActions:a,teamItemsData:s,teamItemsActions:o,renderSonicMenu:c,featureTinyspeck:l}=e,d=Object(ya.a)(e,["userItemsData","userItemsActions","teamItemsData","teamItemsActions","renderSonicMenu","featureTinyspeck"]),p=[...Object(kt.a)()&&(ve.l||l)&&c!==r.a?[{type:"submenu",label:"Sonic",renderSubmenu:c,key:"sonic-debug-submenu"},{type:"separator",key:"sonic-debug-separator"}]:[],...Aa(t,a),{type:"separator",key:"team-menu-separator"},...gr(s,o)];return i.a.createElement(Be.a,Object(n.a)({},d,{template:p,menuClassNames:"p-classic_nav__team_menu",stripTerminalSeparators:!0}))};jr.defaultProps=Cr;var Er=Object(d.b)(e=>({userItemsData:xa(e),teamItemsData:fr(e),featureTinyspeck:Object(h.m)(e,"feature_tinyspeck")}),e=>({userItemsActions:Ra(e),teamItemsActions:vr(e)}))(jr),kr=(a("Hza5"),new x.b("classic_nav")),Sr={featureClassicNav:!1,featureOfflineMode:!1,featureGlobalActionsV0:!1,renderSonicMenu:r.a,isWindowFrameless:!1,userAttentionIsOnChat:!1,composerVisible:!1,featureSonicServiceDown:!1,isServiceDown:!1,customStatusSite:void 0,removeFromSectionNavigation:r.a,addToSectionNavigation:r.a,featureChannelSections:!1,isOrganizing:!1};class team_header_TeamHeader extends s.Component{constructor(e){super(e),this.menuButtonRef=i.a.createRef(),this.renderIcon=this.renderIcon.bind(this),this.renderMenu=this.renderMenu.bind(this),this.onServiceDownIndicatorClick=this.onServiceDownIndicatorClick.bind(this),this.onDndContainerClick=this.onDndContainerClick.bind(this),this.focus=this.focus.bind(this)}componentDidMount(){this.props.fetchLocalDiscountOffer()}componentDidUpdate(e){var t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(fa.a)(t)&&this.props.addToSectionNavigation(),Object(va.a)(t)&&this.props.removeFromSectionNavigation()}onServiceDownIndicatorClick(e){e.stopPropagation();var{customStatusSite:t}=this.props,a=t?"https://status.slack.com/".concat(encodeURIComponent(t)):"https://status.slack.com";Object(Le.a)(a,"_blank")}onOfflineIndicatorClick(e){e.stopPropagation()}onDndContainerClick(e){e.stopPropagation()}focus(){this.menuButtonRef.current.focus()}maybeRenderStatusIndicator(){var{isServiceDown:e,featureOfflineMode:t,featureSonicServiceDown:a}=this.props;return a&&e?i.a.createElement(qe.c,{tip:kr.t("Limited connectivity"),position:"bottom-left"},i.a.createElement(jt.c,{className:"display_flex",onClick:this.onServiceDownIndicatorClick,"aria-label":kr.t("Limited connectivity. Navigate to our status site.")},i.a.createElement(We.b,{type:"exclamation-circle",className:"p-classic_nav__team_header__team__status_indicator p-classic_nav__team_header__team__status_indicator--service_down"}))):t?i.a.createElement(Et.a,null,i.a.createElement(qe.c,{tip:kr.t("No connection",{fallbackHash:"38d627873d774089f849a0750d81e19e73eba862"}),position:"bottom-left"},i.a.createElement(jt.c,{onClick:this.onOfflineIndicatorClick},i.a.createElement(We.b,{type:"cloud-offline-small",className:"p-classic_nav__team_header__team__status_indicator cursor_default"})))):null}renderMenu(e){return this.props.clogger.track(ie.EventId.GLOBAL_NAV,{contexts:{ui_context:{action:ie.UiAction.CLICK,ui_component:ie.UiComponent.GLOBAL_NAV,ui_element:ie.UiElement.NAV_TEAM_MENU}}}),i.a.createElement(Er,Object(n.a)({},e,{renderSonicMenu:this.props.renderSonicMenu}))}renderServiceDownIcon(){var{featureSonicServiceDown:e}=this.props;return e?i.a.createElement(s.Fragment,null,i.a.createElement(qe.c,{tip:kr.t("Slack is unavailable. Check our status page for updates."),position:"bottom"},i.a.createElement(We.b,{type:"warning",className:"p-classic_nav__team_header__team__status_indicator margin_left_50"}))):null}renderIcon(){return i.a.createElement(We.b,{type:"chevron-down",className:"p-classic_nav__team_header__team__icon"})}render(){var{teamName:e,teamId:t,userId:a,userName:n,featureClassicNav:r,isWindowFrameless:s,featureGlobalActionsV0:o,featureChannelSections:c,isOrganizing:d,featureChannelHeaderLabels:p}=this.props;if(!r)return null;var u=i.a.createElement(jt.c,{ref:this.menuButtonRef,className:"p-classic_nav__team_header__team__icon_button","aria-label":kr.t("Team Menu"),"aria-haspopup":!0},this.renderIcon()),h=this.maybeRenderStatusIndicator(),m=o?null:i.a.createElement("div",{className:"p-classic_nav__team_header__team__dnd_container",role:"presentation",onClick:this.onDndContainerClick},i.a.createElement(ct,{className:"p-classic_nav__team_header__team__dnd"})),b=o?i.a.createElement("div",{className:"p-global_actions_button__container",role:"presentation"},i.a.createElement(Ot,null)):null,_=l()({"p-classic_nav__team_header":!0,"p-classic_nav__team_header--frameless":s,"p-global_actions_button__header":o});if(c&&d)return i.a.createElement("div",{className:_},i.a.createElement("div",{className:"p-classic_nav__team_header__content p-classic_nav__team_header__content--organizing","data-qa":"organizing_header"},i.a.createElement("div",{className:"p-classic_nav__team_header__team"},i.a.createElement("div",{"data-teamid":t,className:"p-classic_nav__team_header__team__name","data-qa":"team_header"},kr.t("Organizing\u2026")))));var g=p?kr.t("{teamName} options",{teamName:e,note:"Label for the left section of the Channel Header containing the workspace menu and notification menu buttons. Not visible on screen as it is only for customers using screen readers."}):void 0,f=p?"group":void 0;return i.a.createElement("div",{className:_,role:f,"aria-label":g},i.a.createElement(Be.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-8,offsetY:2,allowanceX:4},i.a.createElement("div",{className:"p-classic_nav__team_header__content",id:"team-menu-trigger"},i.a.createElement("div",{className:"p-classic_nav__team_header__team"},h,i.a.createElement("div",{"data-teamid":t,className:"p-classic_nav__team_header__team__name","data-qa":"team_header"},e),u,m),i.a.createElement("div",{className:"p-classic_nav__team_header__user","data-qa":"user_header"},i.a.createElement(yt.a,{memberId:a,className:"p-classic_nav__team_header__user__presence",inline:!0}),i.a.createElement("span",{className:"p-classic_nav__team_header__user__name"},i.a.createElement("span",{className:"p-classic_nav__team_header__user__name__truncate"},n),i.a.createElement(Ct.b,{memberId:a,tooltip:!0,tipPosition:"bottom"}))))),b)}}team_header_TeamHeader.defaultProps=Sr;var Ir={fetchLocalDiscountOffer:Oa.c},wr=Object(kt.a)()?Object(H.a)(team_header_TeamHeader,"TeamHeader",{index:3}):team_header_TeamHeader,Tr=Object(d.b)(e=>{var t=Object(h.d)(e);return{teamId:Object(u.b)(e),teamName:Object(we.e)(Object(Se.d)(e)),userId:t,userName:Object(Fe.W)(e,t),customStatusSite:Object(De.a)(e,"custom_status_site"),isWindowFrameless:Object(E.l)(e),userAttentionIsOnChat:Object(St.e)(e),composerVisible:(Object(ga.a)(e)||"composer_toolbar"===Object(It.c)(e,"composer_toolbar"))&&Object(wt.b)(e),featureClassicNav:Object(h.m)(e,"feature_classic_nav"),featureOfflineMode:Object(h.m)(e,"feature_offline_mode"),featureGlobalActionsV0:Object(h.m)(e,"feature_global_actions_v0"),featureSonicServiceDown:Object(h.m)(e,"feature_sonic_service_down"),isServiceDown:!Object(Re.e)(e),clogger:Object(ne.a)({state:e}),featureChannelSections:Object(h.m)(e,"feature_channel_sections"),shouldUseChannelSections:Object(N.a)(e),isOrganizing:oa(e),featureChannelHeaderLabels:Object(h.m)(e,"feature_channel_header_labels")}},Ir)(wr),Nr=a("IF1j"),Pr=e=>{var{isAppIm:t,channel:a}=e;return a&&Object(B.hb)(a)?t?i.a.createElement(Nr.c,{size:32,userId:Object(B.G)(a),className:"p-channel_tabs__header__avatar"}):i.a.createElement(yt.a,{memberId:Object(B.G)(a),className:"p-channel_tabs__header__presence"}):null};Pr.defaultProps={channel:void 0,isAppIm:!1};var Ar=Object(d.b)((e,t)=>{var{channelId:a}=t;return{channel:Object(L.e)(e,a),isAppIm:Object(B.kb)(e,a)}})(Pr),Mr=a("RbWr"),xr=a("+8mH"),Rr=a("kcos"),Dr=a("NJ7B"),Fr=a("IUyx"),Lr=a("N5a2"),Ur=a("M4X7"),Br=a("jeHR"),Hr=a("FSos"),Wr=a("z+SX"),qr={addMemberToPresenceSubscription:function(){return Object(Hr.a)(...arguments)},removeMemberFromPresenceSubscription:function(){return Object(Hr.c)(...arguments)}},Gr=Object(d.b)((e,t)=>{var{memberId:a}=t;return{isActive:"active"===Object(ja.f)(e,a)}},qr)(e=>{var{memberId:t,isActive:a,addMemberToPresenceSubscription:n,removeMemberFromPresenceSubscription:r}=e;Object(s.useEffect)(()=>(n({memberId:t}),()=>{r({memberId:t})}),[t,n,r]);var o=a?void 0:"p-classic_nav__model__title__name--dim";return i.a.createElement(Wr.a,{id:t,className:o})}),Kr=a("lek6"),Vr=a("qkTT"),zr=e=>{var{emoji:t,text:a}=e;return t?i.a.createElement(Kr.a,{className:"p-classic_nav__model__title__name__status--im",text:a?"".concat(t," ").concat(a):t,emojiSize:Vr.a.SMALL,showTooltips:!1,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noHighlights:!0,noEmojiText:!0,preventCopyPaste:!0,stopAnimations:!0}):null};zr.defaultProps={emoji:void 0,text:void 0};var Yr=Object(d.b)((e,t)=>{var{memberId:a}=t,n=Object(Ca.f)(e,a);return{text:n.text,emoji:n.emoji}})(zr),Qr=new x.b("channel_header"),Xr=e=>{var{isYou:t}=e;return t?i.a.createElement("span",{className:"p-classic_nav__model__title__is_you"},Qr.t("(you)",{fallbackHash:"1647df1274ca1403fb32187b06fed324ade6b1ad",fallbackHashNs:"channel_sidebar"})):null};Xr.defaultProps={isYou:!1};var Jr=Object(d.b)((e,t)=>{var{memberId:a}=t;return{isYou:Object(h.d)(e)===a}})(Xr),Zr=a("stJQ"),$r=a("hW7Y"),es=a("c8iJ"),ts=new x.b("classic_nav");var as=Object(d.b)(e=>({featureClassicNav:Object(h.m)(e,"feature_classic_nav")}),e=>({unmuteChannelById:function(){return e(Object(Zr.b)(...arguments))}}))(class unmute_button_UnmuteButton extends s.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){e.stopPropagation(),this.props.unmuteChannelById(this.props.channelId)}render(){return this.props.featureClassicNav?i.a.createElement($r.c,{tip:ts.t("Unmute"),position:"bottom"},i.a.createElement(He.a,{className:"p-classic_nav__model__title__name__unmute",onClick:this.onClick},i.a.createElement(es.a,{type:"bell-slash",size:"inherit"}))):null}}),ns=a("9E9B"),rs=a("2Inn"),ss=a("Nzgh"),is=a("S6VJ"),os=a("+j2t"),cs=a("QTMz"),ls=a("9/KO"),ds=a("53Ys"),ps=a("7EGn"),us=a("wfE8"),hs=a("zmUX"),ms=a("aolG"),bs=a("fujP"),_s=a("WD4z"),gs=new x.b("mpims");function fs(e){var{uras:t}=e;if(Object(bs.a)(t))return null;var a=t.map(e=>i.a.createElement("strong",{key:e.id},i.a.createElement(Wr.a,{id:e.id})));return i.a.createElement(_s.a,{level:"warning",className:"top_margin"},gs.rt("{ura_list} { uras_length, plural, =1 { is a Single-Channel Guest. They are already a member } other { are Single-Channel Guests. They are already members }} of one channel, and will not have access to this new private channel.",{ura_list:Object(x.k)(a),uras_length:t.length}))}fs.defaultProps={uras:[]};var vs=Object(d.b)(function(e,t){var{memberIds:a}=t;return{uras:a.map(t=>Object(Ca.d)(e,t)).filter(e=>Object(Fe.Mb)(e))}})(fs),Os=new x.b("mpims");class mpim_conversion_modal_MpimConversionModal extends s.Component{constructor(e){super(e),this.state={confirmed:!1,newChannelName:"",newChannelNameValid:!1,promisePending:!1},this.onGo=this.onGo.bind(this),this.onValidNameEntered=this.onValidNameEntered.bind(this),this.onInvalidNameEntered=this.onInvalidNameEntered.bind(this)}componentWillUnmount(){this.promise&&this.promise.cancel()}onGo(){var{channelId:e,logger:t}=this.props,{confirmed:a,newChannelName:n}=this.state;a?(this.setState(()=>({promisePending:!0})),this.promise=this.props.convertMpimToPrivateChannel({mpimId:e,privateChannelName:n}).then(()=>{this.promise=null,this.props.closeModal()}).catch(e=>{this.promise=null;var a=Object(ps.a)(e,"data.error","");"conversion_already_started"!==a?(this.setState(()=>({promisePending:!1})),t.error("MPIM-CONVERSION",a,e,{subtype:"mpim-conversion-error"}),this.props.openModal({element:i.a.createElement(Ba.a,{title:Os.t("Sorry, something went wrong")},Os.t("Try again in a moment.")),isStackable:!0})):this.props.closeModal()})):this.setState(()=>({confirmed:!0}))}onValidNameEntered(e){var{value:t}=e;this.setState(()=>({newChannelName:t,newChannelNameValid:!0}))}onInvalidNameEntered(e){var{value:t}=e;this.setState(()=>({newChannelName:t,newChannelNameValid:!1}))}renderConfirmationStep(){return i.a.createElement("p",{className:"no_bottom_margin"},Os.t("By converting this conversation to a private channel, you will make the entire message history and all shared files visible to the new members that you invite to the channel."))}renderNamingStep(){var e=this.props.memberIds.filter(e=>e!==this.props.currentUserId).map(e=>i.a.createElement("strong",{key:e},i.a.createElement(Wr.a,{id:e})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(hs.a,{id:"mpim-conversion-modal-input",value:"",onValid:this.onValidNameEntered,onInvalid:this.onInvalidNameEntered,shouldFix:!0,focusOnMount:!0}),i.a.createElement("p",{className:"no_bottom_margin small_top_margin"},Os.rt("You are about to convert the group DM with {member_list} to a private channel. <strong>This cannot be undone.</strong>",{member_list:Object(x.k)(e)})))}render(){var{confirmed:e,newChannelNameValid:t,promisePending:a}=this.state,{memberIds:n}=this.props,r=e?Os.t("Enter a name for the channel"):Os.t("Are you sure?"),s=e?Os.t("Convert to a private channel"):Os.t("Yes, continue");return i.a.createElement(ms.a,{title:r,goButtonText:s,onGo:this.onGo,goButtonIsDisabled:e&&!t,goButtonIsPending:a},e?this.renderNamingStep():this.renderConfirmationStep(),i.a.createElement(vs,{memberIds:n}))}}mpim_conversion_modal_MpimConversionModal.defaultProps={memberIds:[]};var ys={convertMpimToPrivateChannel:function(){return Object(us.b)(...arguments)},closeModal:function(){return Object(Ua.a)(...arguments)},openModal:function(){return Object(Ua.e)(...arguments)}},Cs=Object(d.b)(function(e,t){var{channelId:a}=t,n=Object(L.e)(e,a);return{logger:Object(Wa.a)({state:e}),currentUserId:Object(h.d)(e),memberIds:Object(B.H)(n)}},ys)(mpim_conversion_modal_MpimConversionModal),js=Object(xt.b)("Starts the MPIM -> Private channel workflow",function(e,t){var{channelId:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a&&e(Object(Ua.e)({element:i.a.createElement(Cs,{channelId:a})}))});js.meta={name:"openMpimConversionModal",key:"componentsMpimConversionModalOpenMpimConversionModalOpenMpimConversionModal",description:"Starts the MPIM -> Private channel workflow"},js.propTypes={channelId:o.default.string.isRequired};var Es=js,ks=a("t3J7"),Ss=Object(xt.b)("Sets the default tab for a channel",function(e,t){var{tabId:a,channelId:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t();return n?Object(P.e)(r)?e(Object(us.x)({channelId:n,newPrefs:JSON.stringify({default_tab:"subteam:".concat(a||"messages")})})).then(t=>{var a=Object(ps.a)(t,["prefs","default_tab"]);a&&e(Object(ks.b)({channelId:n,pref:"default_tab",value:a}))}):Promise.reject(new Error("not-enabled")):Promise.reject(new Error("invalid-args"))});Ss.meta={name:"setDefaultTabForChannel",key:"actionsSetDefaultTabForChannelSetDefaultTabForChannel",description:"Sets the default tab for a channel"},Ss.propTypes={tabId:o.default.string,channelId:o.default.string.isRequired};var Is=Object(xt.b)("Add an embed tab for a channel",function(e,t){var{channelId:a,type:n,label:r,url:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t();if(!(a&&n&&r&&s))return Promise.reject(new Error("invalid-args"));if(!Object(P.e)(i))return Promise.reject(new Error("not-enabled"));var o=Object(P.c)(i,a);return o.push({type:n,url:encodeURI(s),label:r}),e(Object(us.x)({channelId:a,newPrefs:JSON.stringify({embed_tabs:"subteam:".concat(btoa(JSON.stringify(o)))})})).then(t=>{var n=Object(ps.a)(t,["prefs","embed_tabs"]);n&&(e(Object(ks.b)({channelId:a,pref:"embed_tabs",value:n})),e(Object(F.a)({tabId:"embed-".concat(o.length-1),channelId:a})))})});Is.meta={name:"addEmbedTab",key:"actionsEmbedTabsAddEmbedTab",description:"Add an embed tab for a channel"},Is.propTypes={channelId:o.default.string.isRequired,type:o.default.oneOf(["figma"]).isRequired,label:o.default.string.isRequired,url:o.default.string.isRequired};var ws=Object(xt.b)("Add an embed tab for a channel",function(e,t){var{tabId:a,channelId:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t();if(!n||!a)return Promise.reject(new Error("invalid-args"));if(!Object(P.e)(r))return Promise.reject(new Error("not-enabled"));var s=Object(P.b)(a);if(!1===s)return Promise.reject(new Error("invalid-args"));var i=Object(P.c)(r,n);return i.splice(s,1),e(Object(us.x)({channelId:n,newPrefs:JSON.stringify({embed_tabs:"subteam:".concat(btoa(JSON.stringify(i)))})})).then(t=>{var a=Object(ps.a)(t,["prefs","embed_tabs"]);a&&(e(Object(ks.b)({channelId:n,pref:"embed_tabs",value:a})),e(Object(F.a)({tabId:void 0,channelId:n})))})});ws.meta={name:"removeEmbedTab",key:"actionsEmbedTabsRemoveEmbedTab",description:"Add an embed tab for a channel"},ws.propTypes={tabId:o.default.string.isRequired,channelId:o.default.string.isRequired};var Ts=a("jK7E"),Ns=a("xrsA"),Ps=a("zo7m"),As=a("ROZo"),Ms=Object(As.b)("TS.ui.apps_browser.startAddApps"),xs=a("O0RF"),Rs=a("qEEt"),Ds=a("1VmY"),Fs=a("g9w/"),Ls=[{value:"figma",label:"Figma"}];var Us=Object(d.b)()(class add_embed_tab_dialog_AddEmbedTabDialog extends s.Component{constructor(e){super(e),this.onClose=this.onClose.bind(this),this.onSubmit=this.onSubmit.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onLabelChange=this.onLabelChange.bind(this),this.onURLChange=this.onURLChange.bind(this),this.state={type:Ls[0],label:void 0,url:void 0}}onClose(){this.props.dispatch(Object(Ua.a)())}onSubmit(){this.props.dispatch(Is({channelId:this.props.channelId,type:this.state.type.value,label:this.state.label,url:this.state.url})),this.props.dispatch(Object(Ua.a)())}onTypeChange(e){this.setState(()=>({type:e}))}onLabelChange(e){this.setState(()=>({label:e}))}onURLChange(e){this.setState(()=>({url:e}))}render(){return i.a.createElement(Ds.a,{title:"Add an embed tab",submitButtonText:"Add",cancelButtonText:"Cancel",onClose:this.onClose,onCancel:this.onClose,onSubmit:this.onSubmit},i.a.createElement(xs.a,{text:"Embed type",className:"margin_bottom_125"},i.a.createElement(Fs.a,{options:Ls,selectedOption:this.state.type,width:"100%",onOptionSelected:this.onTypeChange})),i.a.createElement(xs.a,{text:"Tab label"},i.a.createElement(Rs.b,{value:this.state.label,onChange:this.onLabelChange})),i.a.createElement(xs.a,{text:"Embed URL"},i.a.createElement(Rs.b,{value:this.state.url,onChange:this.onURLChange})))}}),Bs=a("LzXF"),Hs=a("hFPh"),Ws=new x.b("classic_nav"),qs={channel:void 0,close:r.a,back:r.a,featureClassicNav:!1,jumpToTimestamp:r.a};class model_menu_jump_ModelMenuJump extends s.Component{constructor(e){super(e),this.onDateChange=this.onDateChange.bind(this)}onDateChange(e){var t=Zn()(e,"YYYY-MM-DD").format("X");this.props.jumpToTimestamp({ts:t,highlight:!0}),this.props.close()}render(){var{channel:e,back:t,featureClassicNav:a}=this.props;if(!a)return null;var r=e.created?Zn()(e.created,"X").format("YYYY-MM-DD"):void 0;return i.a.createElement(Be.f,Object(n.a)({},this.props,{width:325}),i.a.createElement(Hs.a,{key:"date-picker",className:"p-classic_nav__model__menu__jump",disableDatesBefore:r,disableDatesAfter:Zn()().format("YYYY-MM-DD"),onDateChange:this.onDateChange}),i.a.createElement(jt.c,{key:"date-picker-back",className:"p-classic_nav__model__menu__jump__back","data-qa":"date_picker_back",onClick:t},Ws.t("Back to menu")))}}model_menu_jump_ModelMenuJump.defaultProps=qs;var Gs=Object(d.b)((e,t)=>{var{channelId:a}=t;return{channel:Object(L.e)(e,a),featureClassicNav:Object(h.m)(e,"feature_classic_nav")}},e=>({jumpToTimestamp:function(){return e(Object(Bs.c)(...arguments))}}))(model_menu_jump_ModelMenuJump),Ks=a("TSHB"),Vs=a("HMjZ");function zs(e,t){var a=Object(L.e)(e,t);if(!e||!a)return null;var n=Object(Ca.d)(e,Object(B.G)(a)),r=Object(Ca.b)(e),s=Object(B.u)(a),i="im"===s,o="mpim"===s,c="channel"===s,l="private"===s,d=c||l,p=Object(B.Tb)(r.id,a),u=Object(Vs.f)(e,a),m=Object(sn.K)(e,t)||o,b=p,_=i&&!p,g=i&&!p&&!Object(B.Hb)(a)&&!Object(Fe.Mb)(r)&&!Object(Fe.Mb)(n)&&!Object(Fe.mb)(n)&&!Object(Fe.tb)(n),f=d,v=function(e,t){if(!t)return!1;var a=Object(B.u)(t),n="channel"===a||"private"===a,r=Object(Ca.b)(e);return!(!n||Object(B.X)(t)||(Object(h.m)(e,"feature_announce_only")?!Object(B.nb)(t)||!Object(sn.p)(e,t.id)&&(Object(B.Fb)(t)||Object(Fe.Gb)(r)||Object(Fe.Mb)(r)):Object(Fe.Gb)(r)||Object(Fe.Mb)(r)||!Object(B.nb)(t)||Object(h.q)(e)&&Object(B.vb)(t)&&!Object(sn.L)(e)||!Object(sn.p)(e,t.id)&&Object(B.Fb)(t)))}(e,a),O=Object(sn.R)(e,t),y=o&&Object(sn.C)(e)&&!Object(B.ab)(a)&&!Object(B.db)(a),C=!i&&(o||Object(B.nb)(a)&&!Object(B.X)(a)),j=Object(h.m)(e,"feature_all_dm_mute")?Object(B.nb)(a)&&!Object(B.X)(a)&&!p&&!Object(B.Hb)(a):C,E=Object(sn.x)(e,t),k=Object(De.a)(e,"allow_email_ingestion"),S=d&&Object(B.nb)(a)&&!Object(B.X)(a)&&!Object(B.Fb)(a)&&!Object(Fe.Mb)(r)&&(!Object(Fe.Gb)(r)||l),I=d&&!Object(B.nb)(a)&&!Object(B.X)(a)&&!Object(Fe.Mb)(r)&&!Object(Fe.Gb)(r),w=!c&&Object(sn.J)(e,t),T=Object(B.X)(a)&&!Object(B.db)(a)&&!Object(B.B)(a),N=Object(B.X)(a)&&Object(Fe.eb)(e,r)&&d&&!Object(B.Fb)(a);return Object(Ks.a)({call:u,jump:!0,invite:m,editProfile:b,viewProfile:_,addMember:g,details:!0,copyChannelName:f,options:v,retention:O,convertToPrivate:y,notifications:C,mute:j,apps:E,email:k,leave:S,join:I,exportHistory:w,unarchive:T,delete:N},e=>!!e)}var Ys=new x.b("classic_nav"),Qs=Object(xt.b)("Un-archive a channel",(e,t,a)=>{var{channelId:n}=a;Object(h.m)(t(),"feature_classic_nav")&&e(Object(us.P)({channelId:n})).catch(a=>{Object(Wa.a)({getState:t}).error("CHANNEL-ACTIONS","Unarchive failed with error",a);var n="restricted_action"===Object(ps.a)(a,"data.error")?Ys.t("You don\u2019t have permission to un-archive channels. Please talk to your Workspace Owner."):Ys.t("Sorry, something went wrong. Try again in a moment.");e(Object(Ua.e)({element:i.a.createElement(Ba.a,{title:Ys.t("Un-archive failed")},n)}))})});Qs.meta={name:"unarchiveChannel",key:"componentsClassicNavChannelHeaderModelHeaderMenuUtilityUnarchiveChannelUnarchiveChannel",description:"Un-archive a channel"},Qs.propTypes={channelId:o.default.string.isRequired};var Xs=Qs,Js=new x.b("classic_nav"),Zs={onMenuItemSelected:r.a,actions:void 0,displayName:void 0,isMuted:!1,team:void 0,canManagePostingPermissions:!1,lastChannelDetailsSection:void 0,clogger:{track:r.a},joinChannel:r.a,unarchiveChannel:r.a,gantryStartCall:r.a,showDetails:r.a,showMemberProfile:r.a,copyChannelNameById:r.a,maybeLeaveChannel:r.a,muteChannelById:r.a,unmuteChannelById:r.a,openDmBrowserModal:r.a,startChannelInviteModal:r.a,openChannelOptions:r.a,openChannelNotificationPrefsModal:r.a,openEditProfileModal:r.a,openInviteMemberToChannelDialog:r.a,openAppsBrowserModal:r.a,openMpimConversionModal:r.a,showAnnounceOnlyPromo:!1,desktopNotifySetting:void 0,featureClassicNav:!1,featureSonicEditProfile:!1,featureM11nAppsBrowser:!1,featureAnnounceOnly:!1,featureCopyChannelName:!1,featureAnnounceOnlyPromo:!1,isChannelTabsEnabled:!1,currentTabId:void 0,defaultTabId:void 0,featureChannelNotificationSettings:!1,channelNotificationSettings:!1,isIAPhase1Enabled:!1};class model_menu_ModelMenu extends s.Component{constructor(e){super(e),this.onMenuItemSelected=this.onMenuItemSelected.bind(this),this.getMuteLabel=this.getMuteLabel.bind(this),this.getItems=this.getItems.bind(this),this.preventClose=!1,this.state={mode:"menu"}}onMenuItemSelected(e,t){if(this.preventClose)this.preventClose=!1;else{var{channel:a,clogger:n}=this.props;"im"===Object(B.u)(a)&&n.track(ie.EventId.USER_CARD_CLICK),this.props.onMenuItemSelected(e,t);var r=this.getItems()[e];r&&r.key&&n.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_SETTINGS_ITEM"}},label:r.key})}}getMuteLabel(){var{isMuted:e,channel:t,displayName:a,featureClassicNav:n}=this.props,r="mpim"===Object(B.u)(t)||"im"===Object(B.u)(t);return n?e&&r?Js.t("Unmute conversation",{fallbackHash:"20adf9cbeb9de497d0542ed186c2346d59f40451",fallbackHashNs:"classic_nav"}):e&&!r?Js.t("Unmute {channelName}",{channelName:a}):!e&&r?Js.t("Mute conversation",{fallbackHash:"56403da5406f82ce89e0bc11bad072c588ca1a91",fallbackHashNs:"classic_nav"}):e||r?null:Js.t("Mute {channelName}",{channelName:a}):null}getNotificationPreferencesDescription(){var e,{desktopNotifySetting:t,isMuted:a,featureChannelNotificationSettings:n,channelNotificationSettings:r}=this.props,s=Object(Z.l)();if(!n||!r)return"";if("not_allowed"===s||"not_yet_allowed"===s)return"";if(a)return Js.t("Muted");switch(t){case"everything":e=Js.t("Every new message");break;case"mentions_dms":e=Js.t("Just @mentions");break;case"nothing":e=Js.t("No notifications");break;default:e=""}return e}getItems(){var{channelId:e,channel:t,actions:a,displayName:n,joinChannel:r,featureClassicNav:s,team:o,canManagePostingPermissions:c,showAnnounceOnlyPromo:l,clogger:d,featureSonicEditProfile:p,featureM11nAppsBrowser:u,featureOfflineMode:h,featureAnnounceOnly:m,featureAnnounceOnlyPromo:b,featureCopyChannelName:_,isOffline:g,isChannelTabsEnabled:f,currentTabId:v,defaultTabId:O,isIAPhase1Enabled:y}=this.props,C=Object(B.u)(t),j=Object(B.G)(t);if(!a||!C||!s)return[];var E="mpim"===C,k="channel"===C||"private"===C;return[{label:Js.t("Jump to date\u2026"),show:a.jump,key:"jump",click:()=>{this.preventClose=!0,this.setState(()=>({mode:"jump-to-date"})),d.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_SETTINGS_ITEM"}},label:"jump"})},disabled:h&&g,showOfflineIcon:h&&g},{label:E?Js.t("Invite another member\u2026"):Js.rt("Add people to channel",{channelName:n,fallbackHash:"5a88a5faedf2e862fdeb161752d2d2f1b68b2333"}),show:a.invite&&!y,dataQa:"invite_user_modal",key:"invite",click:()=>{if(E){var a=Object(B.H)(t);this.props.openDmBrowserModal({memberIds:a,source:os.b.MPIM})}else this.props.startChannelInviteModal({channelId:e,entryPoint:"channel_settings_add_people"})},disabled:h&&g,showOfflineIcon:h&&g},{label:Js.t("Edit your profile"),show:a.editProfile&&!y,key:"editProfile",click:()=>p?this.props.openEditProfileModal():Object(Ts.a)(),disabled:h&&g,showOfflineIcon:h&&g},{label:Js.rt("View {userPossesive} profile",{userPossesive:Object(x.c)(n)}),show:a.viewProfile,key:"viewProfile",click:()=>this.props.showMemberProfile({memberId:j})},{label:Js.rt("Add {userName} to a channel\u2026",{userName:n}),show:a.addMember&&!y,key:"addMember",click:()=>this.props.openInviteMemberToChannelDialog({memberId:j}),disabled:h&&g,showOfflineIcon:h&&g},{label:k?Js.t("View channel details"):Js.t("View conversation details"),show:a.details&&!y,key:"details",click:()=>this.props.showDetails({sectionId:this.props.lastChannelDetailsSection||"info"})},{label:_?Js.t("Copy channel name"):"",show:_&&a.copyChannelName,key:"copyChannelName",click:()=>this.props.copyChannelNameById(t.id)},{label:Js.t("Convert to a private channel\u2026"),show:a.convertToPrivate,key:"convertToPrivate",click:()=>this.props.openMpimConversionModal({channelId:t.id}),disabled:h&&g,showOfflineIcon:h&&g},{label:Js.t("Edit message retention\u2026"),show:a.retention&&!y,key:"retention",click:()=>this.props.openChannelOptions({channelId:e,section:"retention"}),disabled:h&&g,showOfflineIcon:h&&g},{label:Js.t("Manage posting permissions"),show:m&&c&&a.options,key:"posting_privilege",click:()=>this.props.openChannelOptions({channelId:e,section:"posting_privilege"}),disabled:h&&g,showOfflineIcon:h&&g},{label:Js.t("Manage posting permissions"),show:b&&l&&!c&&a.options,key:"posting_privilege",click:()=>this.props.openChannelOptions({channelId:e}),disabled:h&&g,showOfflineIcon:h&&g,badgeLabel:Js.t("UPGRADE")},{label:Js.t("Additional options\u2026"),show:a.options,key:"options",click:()=>this.props.openChannelOptions({channelId:e}),disabled:h&&g,showOfflineIcon:h&&g},{type:"separator",key:"separator-1"},{label:Js.t("Notification preferences\u2026"),show:a.notifications&&!y,key:"notifications",description:this.getNotificationPreferencesDescription(),click:()=>(d.track(ie.EventId.CHANNEL_NOTIFICATION_SETTINGS,{contexts:{ui_context:{step:ie.UiStep.CHANNEL_NOTIFICATION_SETTINGS_OPEN,action:ie.UiAction.CLICK}}}),this.props.openChannelNotificationPrefsModal({channelId:e,entryPoint:"modal_menu"}))},{label:this.getMuteLabel(),show:a.mute&&!y,key:"mute",click:()=>{this.props.isMuted?this.props.unmuteChannelById(e):this.props.muteChannelById(e)}},{type:"separator",key:"separator-2",show:!y},{label:Js.t("Add an app"),show:a.apps&&!y,key:"apps",click:()=>{var t=ie.EventId.CHANNEL_SETTINGS,a={action:ie.UiAction.CLICK,ui_element:ie.UiElement.BTN_ADD_APPS};d.track(t,{contexts:{ui_context:a}}),u?this.props.openAppsBrowserModal({addAppsVariant:!0,referringEventId:t,referringUiContext:a,channelId:e}):Ms()},disabled:h&&g,showOfflineIcon:h&&g},{label:E?Js.t("Send email to this conversation\u2026"):Js.t("Send email to {channelName}\u2026",{channelName:n}),show:a.email&&!y,key:"email",href:Object(we.n)(o,"/services/new/email"),target:"_blank",disabled:h&&g,showOfflineIcon:h&&g},{type:"separator",key:"separator-3",show:!y},{label:Js.t("Leave {channelName}",{channelName:n}),show:a.leave,key:"leave",click:()=>this.props.maybeLeaveChannel({channelId:e}),disabled:h&&g,showOfflineIcon:h&&g},{label:Js.t("Join {channelName}",{channelName:n}),show:a.join,key:"join",click:()=>r({channelId:e}),disabled:h&&g,showOfflineIcon:h&&g},{type:"separator",key:"separator-4",show:!y},{label:Js.t("Export message history\u2026"),show:a.exportHistory,key:"exportHistory",click:()=>this.props.openChannelOptions({channelId:e,section:"export"}),disabled:h&&g,showOfflineIcon:h&&g},{type:"separator",key:"separator-5",show:!y},{label:Js.t("Un-archive {channelName}",{channelName:n}),show:a.unarchive,key:"unarchive",click:()=>this.props.unarchiveChannel({channelId:e}),disabled:h&&g,showOfflineIcon:h&&g},{label:Js.t("Delete {channelName}",{channelName:n}),show:a.delete,key:"unarchive",click:()=>this.props.openChannelOptions({channelId:e,section:"delete"}),disabled:h&&g,showOfflineIcon:h&&g},{type:"separator",key:"separator-6",show:Fe.eb&&f&&!y},{label:"Make this tab the default",show:f&&c&&!y,key:"channel_tabs_default",disabled:v===O,click:()=>this.props.setDefaultTabForChannel({tabId:v,channelId:e})},{label:"Add an embed tab",show:f&&c&&!y,key:"channel_tabs_embed_add",click:()=>this.props.openModal({element:i.a.createElement(Us,{channelId:e})})},{label:"Remove this embed tab",show:f&&c&&v&&0===v.indexOf("embed")&&!y,key:"channel_tabs_embed_add",click:()=>this.props.removeEmbedTab({tabId:v,channelId:e})}].filter(e=>e&&(e.show||"separator"===e.type&&!1!==e.show))}render(){switch(this.state.mode){case"menu":return i.a.createElement(Be.a,Object(n.a)({},this.props,{template:this.getItems(),onMenuItemSelected:this.onMenuItemSelected,stripTerminalSeparators:!0,width:"auto"}));case"jump-to-date":return i.a.createElement(Gs,Object(n.a)({},this.props,{channelId:this.props.channelId,close:this.props.onMenuItemSelected,back:()=>{this.preventClose=!0,this.setState(()=>({mode:"menu"}))}}));default:return null}}}model_menu_ModelMenu.defaultProps=Zs;var $s=Object(d.b)((e,t)=>{var a,{channelId:n}=t,r=Object(L.e)(e,n),s=Object(Se.d)(e),i=Object(sn.M)(e,n),o=Object(h.m)(e,"feature_announce_only_promo"),c=o&&(Object(we.w)(s)||Object(we.z)(s))&&!Object(B.fb)(r);return Object(B.hb)(r)||(a=Object(Z.f)(e,n)),{channel:r,actions:zs(e,n),displayName:Object(B.w)(e,r,{imIncludeAtSign:!1}),isMuted:Object(xr.c)(e,n),team:s,canManagePostingPermissions:i,showAnnounceOnlyPromo:c,clogger:Object(ne.a)({state:e}),lastChannelDetailsSection:Object(y.b)(e),featureClassicNav:Object(h.m)(e,"feature_classic_nav"),featureSonicEditProfile:Object(h.m)(e,"feature_sonic_edit_profile"),featureM11nAppsBrowser:Object(h.m)(e,"feature_m11n_apps_browser"),featureOfflineMode:Object(h.m)(e,"feature_offline_mode"),featureAnnounceOnly:Object(h.m)(e,"feature_announce_only"),featureCopyChannelName:Object(h.m)(e,"feature_copy_channel_name"),featureAnnounceOnlyPromo:o,featureChannelNotificationSettings:Object(h.m)(e,"feature_channel_notification_settings"),isOffline:!Object(Re.c)(e),desktopNotifySetting:a,channelNotificationSettings:"new_design"===Object(It.c)(e,"channel_notification_settings"),isChannelTabsEnabled:Object(P.e)(e),currentTabId:v(e),defaultTabId:Object(P.a)(e,n)}},e=>({joinChannel:function(){return e(Object(ns.joinConversationApi)(...arguments))},unarchiveChannel:function(){return e(Xs(...arguments))},gantryStartCall:function(){return e(Object(rs.d)(...arguments))},showDetails:function(){return e(Object(Ie.e)(...arguments))},showMemberProfile:function(){return e(Object(Ie.j)(...arguments))},copyChannelNameById:function(){return e(Object(ss.a)(...arguments))},maybeLeaveChannel:function(){return e(Object(is.a)(...arguments))},muteChannelById:function(){return e(Object(Zr.a)(...arguments))},unmuteChannelById:function(){return e(Object(Zr.b)(...arguments))},openDmBrowserModal:function(){return e(Object(dt.a)(...arguments))},startChannelInviteModal:function(){return e(Object(cs.b)(...arguments))},openChannelOptions:function(){return e(Object(ls.a)(...arguments))},openChannelNotificationPrefsModal:function(){return e(Object(et.a)(...arguments))},openEditProfileModal:function(){return e(Object(Ps.a)(...arguments))},openInviteMemberToChannelDialog:function(){return e(Object(Ns.a)(...arguments))},openAppsBrowserModal:function(){return e(Object(ds.a)(...arguments))},openMpimConversionModal:function(){return e(Es(...arguments))},setDefaultTabForChannel:function(){return e(Ss(...arguments))},openModal:function(){return e(Object(Ua.e)(...arguments))},removeEmbedTab:function(){return e(ws(...arguments))}}))(model_menu_ModelMenu),ei={channelId:o.default.string.isRequired,noMenu:o.default.bool,type:o.default.oneOf(["channel","private","im","mpim"]),name:o.default.string,memberId:o.default.string,mpimIds:o.default.arrayOf(o.default.string.isRequired),currentUser:o.default.string.isRequired,isChannelUnavailable:o.default.bool.isRequired,isMuted:o.default.bool,logger:o.default.object.isRequired,clogger:o.default.object.isRequired,isIAP1Enabled:o.default.bool.isRequired},ti={noMenu:!1,type:void 0,name:void 0,memberId:void 0,mpimIds:void 0,isMuted:!1};class model_name_ModelName extends Mr.a{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this),this.renderChannel=this.renderChannel.bind(this),this.renderIM=this.renderIM.bind(this),this.renderMPIM=this.renderMPIM.bind(this),this.onMenuOpen=this.onMenuOpen.bind(this)}onMenuOpen(){this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_NAME"}}})}renderMenu(e){return i.a.createElement($s,Object(n.a)({},e,{channelId:this.props.channelId}))}renderChannel(e){var{channelId:t,name:a,isMuted:n,isIAP1Enabled:r}=this.props,o=i.a.createElement(Fr.a,{channelId:t,bold:!0,disableArchived:!0}),c=n&&!r?i.a.createElement(as,{channelId:t}):null;return i.a.createElement(s.Fragment,null,i.a.createElement(e,null,o,a),r?null:i.a.createElement(Dr.a,{channelId:t,className:"p-classic_nav__model__title__name__shared_icon",inherit:!1,inline:!1,tooltipPosition:"bottom"}),c)}renderIM(e){var{memberId:t,isMuted:a,channelId:n,isIAP1Enabled:r}=this.props;if(!t)return null;var o=a&&!r?i.a.createElement(as,{channelId:n}):null;return i.a.createElement(s.Fragment,null,i.a.createElement(e,null,r&&i.a.createElement(yt.a,{memberId:t}),i.a.createElement(Gr,{memberId:t}),i.a.createElement(Jr,{memberId:t}),!r&&i.a.createElement(Yr,{memberId:t})),o)}renderMPIM(e){var{channelId:t,mpimIds:a,currentUser:n,isMuted:r,logger:o,isIAP1Enabled:c}=this.props;if(!a||!a.length)return o.error("CLASSIC-NAV","MPIM ".concat(t," has no members")),i.a.createElement(s.Fragment,null,i.a.createElement(Lr.b,{className:"align_self_center"}),"\u200b");var l=r&&!c?i.a.createElement(as,{channelId:t}):null,d=a.filter(e=>e!==n).map((e,t)=>i.a.createElement(s.Fragment,{key:e},t>0?", ":null,i.a.createElement(Gr,{memberId:e}),i.a.createElement(Ct.b,{memberId:e,tipPosition:"bottom",className:"p-classic_nav__model__title__name__status--mpim"})));return i.a.createElement(e,null,d,l)}render(){var{type:e,isMuted:t,isChannelUnavailable:a,noMenu:n,isIAP1Enabled:r}=this.props;if(!e)return null;var s,o=e=>{var{children:t}=e;return a?i.a.createElement("div",{className:"p-classic_nav__model__title__name__button","data-qa":"channel_name"},t):r?i.a.createElement(Ur.a,{id:this.props.channelId},i.a.createElement("div",{className:"p-classic_nav__model__title__name__button","data-qa":"channel_name"},t)):n?i.a.createElement("div",{className:"p-classic_nav__model__title__name__button","data-qa":"channel_name"},t):i.a.createElement(Be.e,{renderMenu:this.renderMenu,onClick:this.onMenuOpen,position:"bottom-left",offsetX:-4,offsetY:4},i.a.createElement(jt.c,{className:"p-classic_nav__model__title__name__button","data-qa":"channel_name"},t))};switch(e){case"channel":case"private":s=this.renderChannel(o);break;case"im":s=this.renderIM(o);break;case"mpim":s=this.renderMPIM(o);break;default:s=null}var c=l()({"p-classic_nav__model__title__name":!0,"p-classic_nav__model__title__name--dim":!r&&t,"p-classic_nav__no_drag":!0});return i.a.createElement("div",{className:c},s)}}model_name_ModelName.propTypes=ei,model_name_ModelName.defaultProps=ti;var ai=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a);return{type:Object(B.u)(n),name:Object(B.M)(n),memberId:Object(B.G)(n)||void 0,mpimIds:(Object(Br.c)(e)?Object(B.L)(e,n):Object(B.H)(n))||void 0,currentUser:Object(h.d)(e),isMuted:Object(xr.c)(e,a),isChannelUnavailable:Object(B.Lb)(e,n),logger:Object(Wa.a)({state:e}),clogger:Object(ne.a)({state:e}),isIAP1Enabled:Object(Rr.d)(e)}})(model_name_ModelName),ni=()=>i.a.createElement("span",{className:"p-classic_nav__model__title__info__sep","aria-hidden":"true"},"|"),ri=(a("hCXE"),{tab:void 0,isEnabled:!1,embedTabs:[]});class model_info_tabs_ModelInfoTabs extends s.Component{constructor(e){super(e),this.onTabClick=this.onTabClick.bind(this)}onTabClick(e){this.props.setTab({tabId:e,channelId:this.props.channelId})}render(){var{tab:e,isEnabled:t,embedTabs:a}=this.props;if(!t)return null;var n=[{id:void 0,label:"Messages"},{id:"about",label:"About"},{id:"space",label:"Notes"},...a.map((e,t)=>({id:"embed-".concat(t),label:e.label}))].map((t,a)=>{var{id:n,label:r}=t,s=l()("p-classic_nav__model__title__info__tab",{"p-classic_nav__model__title__info__tab--active":e===n,"p-classic_nav__model__title__info__tab--first":0===a});return i.a.createElement(jt.c,{className:s,onClick:()=>this.onTabClick(n),key:n||"default"},r)});return i.a.createElement(s.Fragment,null,n,i.a.createElement(ni,null))}}model_info_tabs_ModelInfoTabs.defaultProps=ri;var si=Object(d.b)((e,t)=>{var{channelId:a}=t;return{tab:v(e),isEnabled:Object(P.e)(e),embedTabs:Object(P.c)(e,a)}},e=>({setTab:function(){return e(Object(F.a)(...arguments))}}))(model_info_tabs_ModelInfoTabs),ii=a("0F/N"),oi=a("0VPD"),ci=a("yIs4"),li=a("5VWh"),di=a("HOkk"),pi=a("RMmo"),ui=a("wMtF"),hi=a("oxKW"),mi=a("x4bP"),bi=a("e4Fz"),_i=a("NAkb"),gi=a("n3t6"),fi=a("PM8X"),vi=a("NcDR"),Oi=(a("LsCE"),new x.b("current_status")),yi={TEAM_MENU:"team_menu",TEAM_SITE:"team_site",VIEW_PROFILE:"view_profile"},Ci={CREATE:"create",RENAME:"rename",MOVE:"move"},ji=100,Ei=94,ki={emojiMenuPosition:"bottom-left",inputType:yi.TEAM_MENU,initialText:"",initialEmoji:"",onCancel:r.a,onClose:r.a,onSubmit:r.a,onChange:r.a,focusOnMount:!1,isControlled:!1,closeModal:r.a,featureChannelSections:!1,onRenameChannelSectionSubmit:r.a};function Si(e){return e?i.a.createElement("div",{className:"p-channel_section_modal_input__emoji"},i.a.createElement(Vr.b,{text:e,stopAnimations:!0,obeyEmojiMode:!1,emojiSize:Vr.a.MEDIUM,forceDisplay:!0})):i.a.createElement("div",{className:"p-channel_section_modal_input__empty_emoji"},i.a.createElement(We.a,{className:"p-channel_section_modal_input__emoji_circle_icon",type:"circle-fill"}),i.a.createElement(We.a,{className:"p-channel_section_modal_input__emoji_smile_icon",type:"smile-o"}),i.a.createElement(We.a,{className:"p-channel_section_modal_input__emoji_happy_icon",type:"happy-smile"}))}class channel_section_modal_input_BaseChannelSectionModalInput extends s.PureComponent{constructor(e){super(e),this.dialog=i.a.createRef(),this.state={text:Object(gi.b)(e.initialText,null,{for_edit:!0}),emoji:e.initialEmoji,textyHasFocus:!1,userDidSelectEmoji:!!e.initialEmoji,selectedPresetIndex:void 0},this.setTextyRef=this.setTextyRef.bind(this),this.onTextChange=this.onTextChange.bind(this),this.onCancel=this.onCancel.bind(this),this.onClose=this.onClose.bind(this),this.onEmojiChange=this.onEmojiChange.bind(this),this.onEnter=this.onEnter.bind(this),this.onSubmit=this.onSubmit.bind(this),this.onClickEmojiMenu=this.onClickEmojiMenu.bind(this),this.onClearIconClick=this.onClearIconClick.bind(this),this.onClearStatusButtonClick=this.onClearStatusButtonClick.bind(this),this.onTextyBlur=this.onTextyBlur.bind(this),this.onTextyFocus=this.onTextyFocus.bind(this),this.setFocusOnTextInput=this.setFocusOnTextInput.bind(this),this.selectedPresetOptionRef=i.a.createRef(),this.textyModules={tabcomplete:{positionMenu:e=>{e.style.width="".concat(this.texty.container.offsetWidth,"px"),e.style.minWidth="".concat(this.texty.container.offsetWidth,"px"),Object(_i.a)(e,this.texty.container)},completers:["channels","emoji","members"]},keyboard:{useFormattingCommands:!1}}}componentDidMount(){this.dialog&&(this.keyCommands=new pi.a(this.dialog.node),this.keyCommands.bindAll([{keys:["down"],handler:()=>this.handleDownArrow()},{keys:["up"],handler:()=>this.handleUpArrow()}]))}componentDidUpdate(){this.selectedPresetOptionRef.current&&this.selectedPresetOptionRef.current.focus()}componentWillUnmount(){this.keyCommands&&this.keyCommands.reset()}onCancel(){var{inputType:e,initialEmoji:t,initialText:a,onCancel:n}=this.props;e!==yi.TEAM_SITE&&(this.texty.value(a),this.setState(()=>({text:a,emoji:t}),()=>n({emoji:t,text:a})))}onClose(){this.props.onClose()}onClearIconClick(){this.clearStatus({andSubmit:!1})}onClearStatusButtonClick(){this.clearStatus({andSubmit:!0})}onClickEmojiMenu(e){var{emojiMenuPosition:t}=this.props,a="top"===t?-5:5;Object(fi.a)({e:e,offset_y:a,position:t,callback:this.onEmojiChange,target_bounds:this.texty.container.getBoundingClientRect()})}onEmojiChange(e){var{onChange:t}=this.props;this.setState(()=>({emoji:e,userDidSelectEmoji:!0}),this.setFocusOnTextInput),t({emoji:e})}onEnter(){var{text:e}=this.state;this.hasUnsavedChanges()&&e.length<=ji&&(this.onSubmit(),this.props.closeModal())}onPresetSelected(e){var{emoji:t,text:a}=e,{onChange:n}=this.props;this.texty.value(a),this.setState(()=>({emoji:t,text:a,userDidSelectEmoji:!0}),this.setFocusOnTextInput),n({emoji:t,text:a})}onSubmit(){var{emoji:e}=this.state,{inputType:t,onSubmit:a,onRenameChannelSectionSubmit:n}=this.props,r=this.texty.value();return t!==yi.TEAM_SITE&&(!(!this.hasUnsavedChanges()||r.length>ji)&&(this.props.action===Ci.RENAME?(n({text:r,emoji:e}),!0):(a({text:r,emoji:e}),!0)))}onTextChange(){if(this.texty){var{onChange:e}=this.props,{text:t,emoji:a,userDidSelectEmoji:n}=this.state,r=this.texty.value();if(r!==t){var s=a;n||(s=""),this.setState(()=>({text:r,emoji:s})),e({text:r,emoji:s})}}}onTextyBlur(){this.setState(()=>({textyHasFocus:!1}))}onTextyFocus(){this.setState(()=>({textyHasFocus:!0}))}setFocusOnTextInput(){this.texty.setCursorAtEnd(),this.resetSelectedPresetIndex()}setSelectedPresetIndex(e){this.setState(()=>({selectedPresetIndex:e}))}setTextyRef(e){this.texty=e&&e.getWrappedInstance?e.getWrappedInstance():e}UNSAFE_componentWillReceiveProps(e){var{isControlled:t,initialEmoji:a,initialText:n}=this.props,{initialEmoji:r,initialText:s}=e;if((a!==r||n!==s)&&(t||!this.hasUnsavedChanges())){var i=Object(gi.b)(s,null,{for_edit:!0});this.texty.value(i),this.setState(()=>({emoji:r,text:i}))}}clearStatus(){var{andSubmit:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onChange:t}=this.props,[a,n,r]=["","","",void 0,!1];this.texty.clear(),this.setState(()=>({text:a,emoji:n,userDidSelectEmoji:r}),()=>{e?this.onSubmit():this.setFocusOnTextInput()}),t({emoji:n,text:a})}handleDownArrow(){var{teamPresets:e}=this.props,{selectedPresetIndex:t,text:a,textyHasFocus:n}=this.state;Object(ci.a)(t)?t<e.length-1&&this.setSelectedPresetIndex(t+1):!a&&n&&this.setSelectedPresetIndex(0)}handleUpArrow(){var{selectedPresetIndex:e}=this.state;Object(ci.a)(e)&&(0===e?this.setFocusOnTextInput():this.setSelectedPresetIndex(e-1))}hasInput(){var{emoji:e,text:t}=this.state;return!(!t&&!e)}hasUnsavedChanges(){var{initialText:e,initialEmoji:t}=this.props,{emoji:a,text:n}=this.state;return a!==t||n!==e}maybeRenderSaveButton(){var{inputType:e}=this.props,{text:t}=this.state;if(e===yi.TEAM_SITE)return null;if(!this.hasUnsavedChanges())return null;var a=Oi.t("Save");return i.a.createElement("div",{className:"align_right"},i.a.createElement(jt.d,{type:"primary",size:"small",onClick:this.onSubmit,disabled:t.length>ji,"data-qa":"channel_selection_modal_input_submit_button"},a))}resetSelectedPresetIndex(){this.setSelectedPresetIndex()}renderActionButtons(){var{inputType:e}=this.props,t=e===yi.TEAM_SITE||this.hasUnsavedChanges()||this.hasInput(),a=l()("p-channel_section_modal_input__actions","p-channel_section_modal_input__actions--with_expiry",{"p-channel_section_modal_input__actions--invisible":!t});return i.a.createElement("div",{className:a},this.maybeRenderSaveButton())}renderClearIcon(){var{inputType:e}=this.props,{text:t,emoji:a}=this.state;if(e===yi.TEAM_SITE||!t&&!a)return null;var n=Oi.t("Clear all"),r=e===yi.VIEW_PROFILE?"top-right":"top",s=i.a.createElement(He.a,{className:"p-channel_section_modal_input__clear_link","aria-label":n,"data-qa":"channel_selection_modal_clear_icon",onClick:this.onClearIconClick},i.a.createElement(We.a,{type:"close-filled",className:"p-channel_section_modal_input__clear_icon"}));return i.a.createElement("div",{className:"p-channel_section_modal_input__status_clear_icon_wrap"},i.a.createElement(qe.c,{tip:n,position:r,zIndex:"above_fs"},s))}renderEmojiPicker(){var{emojiMenuPosition:e}=this.props,{emoji:t}=this.state;if(Object(mi.a)()){var a="top"===e?-5:5;return i.a.createElement(ui.a,{onEmojiSelected:(e,t)=>this.onEmojiChange(":".concat(t,":")),offsetY:a,position:e},i.a.createElement(He.a,{className:"p-channel_section_modal_input__emoji_picker","aria-label":Oi.t("Emoji menu"),"data-qa":"channel_selection_modal_input_emoji_picker"},Si(t)))}return i.a.createElement(He.a,{onClick:this.onClickEmojiMenu,className:"p-channel_section_modal_input__emoji_picker","aria-label":Oi.t("Emoji menu"),"data-qa":"channel_selection_modal_input_emoji_picker"},Si(t))}renderPresetOption(e,t){var{selectedPresetIndex:a}=this.state,{emoji:n,text:r,description:s}=e,o=t===a?this.selectedPresetOptionRef:void 0;return i.a.createElement(He.a,{className:"p-channel_section_modal_input__preset_option","data-qa":"channel_selection_modal_input_preset_option",onClick:()=>this.onPresetSelected({emoji:n,text:r}),key:t,onFocus:()=>this.setSelectedPresetIndex(t),onBlur:()=>this.resetSelectedPresetIndex(),ref:o},i.a.createElement("div",{className:"p-channel_section_modal_input__preset_option_emoji"},Si(n)),i.a.createElement("div",{className:"p-channel_section_modal_input__preset_option_text"},r),i.a.createElement("div",{className:"p-channel_section_modal_input__preset_option_description"},"\xa0\u2014 ",s))}renderPresets(){var{inputType:e,teamPresets:t}=this.props,{emoji:a,text:n}=this.state;if(e===yi.TEAM_SITE||a||n)return null;var r=t.map(this.renderPresetOption,this);return i.a.createElement("div",{className:"p-channel_section_modal_input__presets"},r)}renderStatusTextInput(){var{inputType:e,focusOnMount:t,featureChannelSections:a}=this.props,{text:n}=this.state;if(!a)return null;var r="channel_selection_modal_input_for_".concat(e),s=Oi.t("Choose a helpful name"),o=Object(bi.a)(r,"character-count");return Object(mi.a)()?i.a.createElement(hi.a,{completeOnMembers:!0,completeOnChannels:!0,completeOnEmoji:!0,position:"bottom",shouldCompleteOnTab:!1,renderInput:e=>{var{modules:a,isOpen:c}=e;return i.a.createElement(li.a,{id:o,currentCount:n.length,maxCharacterLimit:ji,counterMinimumCharacters:Ei,size:Rs.a.medium},i.a.createElement(ut.default,{id:r,name:r,ref:this.setTextyRef,className:"p-channel_section_modal_input__text_input small",ariaLabel:s,initialText:n,"data-validation":"maxlength=100","data-validation-for":r,"data-qa":"channel_selection_modal_input_text_input",modules:a,isAutocompleteOpen:c,onBlur:this.onTextyBlur,onEnter:this.onEnter,onEscape:this.onCancel,onFocus:this.onTextyFocus,onTextChange:this.onTextChange,placeholder:s,focusOnMount:t,enableBroadcastKeywords:!1,enableFormattingCommands:!1,isSingleLine:!0}))}}):i.a.createElement(li.a,{id:o,currentCount:n.length,maxCharacterLimit:ji,counterMinimumCharacters:Ei,size:Rs.a.medium},i.a.createElement(ut.default,{id:r,name:r,ref:this.setTextyRef,className:"p-channel_section_modal_input__text_input small",ariaLabel:s,initialText:n,"data-validation":"maxlength=100","data-validation-for":r,"data-qa":"channel_selection_modal_input_text_input",modules:this.textyModules,onBlur:this.onTextyBlur,onEnter:this.onEnter,onEscape:this.onCancel,onFocus:this.onTextyFocus,onTextChange:this.onTextChange,placeholder:s,focusOnMount:t,useLegacyCreate:!0,isSingleLine:!0,enableBroadcastKeywords:!1,legacyShouldCompleteOnTab:!1}))}render(){var{featureChannelSections:e}=this.props,{text:t}=this.state;if(!e)return null;var a,n,r=!this.hasUnsavedChanges()||t.length>ji;switch(this.props.action){case Ci.CREATE:a=Oi.t("Create"),n=Oi.t("Add section");break;case Ci.RENAME:a=Oi.t("Save"),n=Oi.t("Rename section");break;case Ci.MOVE:a=Oi.t("Move"),n=Oi.t("Add section")}var s=this.onSubmit;return i.a.createElement(di.a,{className:l()("p-channel_section_modal_input__dialog",{"p-channel_section_modal_input--modern":Object(mi.a)()}),goButtonIsDisabled:r,goButtonText:a,goButtonType:"primary",onGo:s,onClose:this.onClose,title:n,ref:this.dialog,shouldCloseOnOverlayClick:!0,useSlackScrollbar:!1,showTooltipOnCloseButton:!0,"data-qa":"channel_selection_modal_input"},i.a.createElement("div",{className:"p-channel_section_modal_input__input_wrap"},this.renderStatusTextInput(),this.renderEmojiPicker(),this.renderClearIcon()),this.renderPresets())}}channel_section_modal_input_BaseChannelSectionModalInput.defaultProps=ki;var Ii={closeModal:Ua.a},wi=Object(d.b)(function(e,t){var{initialText:a,initialEmoji:n,channelSectionId:r}=t,s=Object(h.m)(e,"feature_channel_sections"),i=[];return s&&(i=[{emoji:":speaker:",text:Oi.t("Announcements"),description:Oi.t("Internal comms")},{emoji:":busts_in_silhouette:",text:Oi.t("Team"),description:Oi.t("Direct messages and team channels")},{emoji:":triangular_flag_on_post:",text:Oi.t("Priority"),description:Oi.t("Urgent conversations")},{emoji:":notebook:",text:Oi.t("Resources"),description:Oi.t("IT, benefits, and HR requests")}]),{initialText:a,initialEmoji:n,teamPresets:i,featureChannelSections:s,channelSectionId:r}},Ii)(Object(vi.a)(channel_section_modal_input_BaseChannelSectionModalInput)),Ti=a("UF3u"),Ni=a("D03H"),Pi=a("oLrU"),Ai=a("cZF4"),Mi=(e,t)=>{var a=Qt(e),n={};t.forEach(t=>{n[t]=ra(e,t)});var r={};t.forEach(t=>{var a=Object(L.e)(e,t);r[t]=Object(B.Ib)(a)});var s={};t.forEach(e=>{(n[e]||[]).forEach(t=>{s[t]||(s[t]={channelSectionId:t,channelIds:[]}),s[t].channelIds.push(e)})});var i=t.filter(e=>r[e]);return Object(Ai.a)(Object.values(s),0===i.length?[]:Object.values(a).filter(e=>e.type===Ni.h).map(e=>({channelSectionId:e.id,channelIds:i})))};function xi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ri(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xi(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Di=Object(xt.b)("Channel Sections: UI action when the collapsed state of a custom or default section is toggled",function(e,t){var{channelSectionId:a,defaultSectionName:n,isCollapsed:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(n?Object(Kt.g)({defaultSectionName:n,isCollapsed:r}):Object(Kt.f)({channelSectionId:a,isCollapsed:r}))});Di.meta={name:"setSectionCollapsed",key:"channelSectionsStoreChannelSectionsThunksSetSectionCollapsed",description:"Channel Sections: UI action when the collapsed state of a custom or default section is toggled"},Di.propTypes={defaultSectionName:o.default.oneOf(Ni.a),channelSectionId:o.default.string,isCollapsed:o.default.bool.isRequired};var Fi=Object(xt.b)("Channel Sections: create a new channel section",function(e,t){var{name:a,emoji:n,nextChannelSectionId:r=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.startsWith(":")&&n.endsWith(":")?n.slice(1,-1):n,i="local-".concat(Object(Pi.a)());return e(Object(Kt.l)({channelSection:{id:i,type:Ni.g,name:a,emoji:s,nextChannelSectionId:r}})),e(Ft({name:a,emoji:s,nextChannelSectionId:r})).then(t=>{var n=t.channel_section_id;return e(Object(Kt.l)({channelSection:{id:t.channel_section_id,type:Ni.g,name:a,emoji:s,nextChannelSectionId:r}})),e(Object(Kt.n)({localChannelSection:{id:n,isCollapsed:!1,isEditable:!0}})),n}).catch(t=>{throw e(Object(Kt.b)({channelSectionId:i})),t})});Fi.meta={name:"createChannelSection",key:"channelSectionsStoreChannelSectionsThunksCreateChannelSection",description:"Channel Sections: create a new channel section"},Fi.propTypes={name:o.default.string.isRequired,emoji:o.default.string.isRequired,nextChannelSectionId:o.default.string};var Li=Object(xt.b)("Channel Sections: bulk delete and add channels to channel sections section",function(e,t){var{remove:a=[],insert:n=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t(),s={},i={};a.forEach(e=>{e.channelIds.forEach(t=>{s[t]||(s[t]={}),s[t][e.channelSectionId]=!0})}),n.forEach(e=>{e.channelIds.forEach(t=>{s[t]&&s[t][e.channelSectionId]&&(i[e.channelSectionId]||(i[e.channelSectionId]=new Set),i[e.channelSectionId].add(t))})});var o=a.map(e=>i[e.channelSectionId]?Ri({},e,{channelIds:e.channelIds.filter(t=>!i[e.channelSectionId].has(t))}):e).filter(e=>e.channelIds.length>0),c=n.map(e=>i[e.channelSectionId]?Ri({},e,{channelIds:e.channelIds.filter(t=>!i[e.channelSectionId].has(t))}):e).filter(e=>e.channelIds.length>0),l=(e,t)=>{var a=Zt(r,t.channelSectionId);return a&&a.type&&(e[a.type]||(e[a.type]=[]),e[a.type].push(t)),e},d=o.reduce(l,{}),p=c.reduce(l,{}),u=d[Ni.g]||[],h=p[Ni.g]||[],m=d[Ni.h]||[],b=p[Ni.h]||[];u.forEach(a=>{var{channelSectionId:n,channelIds:r}=a,s=new Set(r),i=ta(t(),n);e(Object(Kt.e)({channelSectionId:n,channelIds:i.filter(e=>!s.has(e))}))}),h.forEach(t=>{e(Object(Kt.m)(t))});var _=[];return m.forEach(t=>{var{channelIds:a}=t;_.push(...a.map(t=>e(Object(ii.a)(!1,{channel:t}))))}),b.forEach(t=>{var{channelIds:a}=t;_.push(...a.map(t=>e(Object(ii.a)(!0,{channel:t}))))}),u.length+h.length>0&&_.push(e(Gt({remove:u,insert:h}))),Promise.all(_).catch(e=>{throw Object(Wa.a)({getState:t}).error("Failure while performing moveManyChannels",e),e})});Li.meta={name:"moveManyChannels",key:"channelSectionsStoreChannelSectionsThunksMoveManyChannels",description:"Channel Sections: bulk delete and add channels to channel sections section"},Li.propTypes={remove:o.default.arrayOf(o.default.shape({channelSectionId:o.default.string.isRequired,channelIds:o.default.arrayOf(o.default.string).isRequired})),insert:o.default.arrayOf(o.default.shape({channelSectionId:o.default.string.isRequired,channelIds:o.default.arrayOf(o.default.string).isRequired,nextChannelId:o.default.oneOf([o.default.string,o.default.null])}))};var Ui=Object(xt.b)("Channel Sections: Move one more more channels to a section",function(e,t){var{channelIds:a,channelSectionId:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e(Li({remove:Mi(t(),a),insert:[{channelSectionId:n,channelIds:a}]}))});Ui.meta={name:"moveManyChannelsToSection",key:"channelSectionsStoreChannelSectionsThunksMoveManyChannelsToSection",description:"Channel Sections: Move one more more channels to a section"},Ui.propTypes={channelIds:o.default.arrayOf(o.default.string).isRequired,channelSectionId:o.default.string.isReuired};var Bi=Object(xt.b)("Channel Sections: create a new channel section and move zero or more channels into it",function(e,t){var{name:a,emoji:n,channelIds:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=Jt(t());return e(Fi({emoji:n,name:a,nextChannelSectionId:s})).then(t=>e(Ui({channelSectionId:t,channelIds:r})))});Bi.meta={name:"moveManyChannelsToNewSection",key:"channelSectionsStoreChannelSectionsThunksMoveManyChannelsToNewSection",description:"Channel Sections: create a new channel section and move zero or more channels into it"},Bi.propTypes={channelIds:o.default.arrayOf(o.default.string).isRequired,name:o.default.string.isRequired,emoji:o.default.string.isRequired};var Hi=Object(xt.b)("Channel Sections: update a channel section",function(e,t){var{channelSection:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t(),r=Zt(n,a.id);return e(Object(Kt.l)({channelSection:a})),e(Lt({channelSectionId:a.id,name:a.name,emoji:a.emoji,nextChannelSectionId:a.nextChannelSectionId})).catch(()=>{e(Object(Kt.l)({channelSection:r}))})});Hi.meta={name:"updateChannelSection",key:"channelSectionsStoreChannelSectionsThunksUpdateChannelSection",description:"Channel Sections: update a channel section"},Hi.propTypes={channelSection:Ni.p.isRequired};var Wi=Object(xt.b)("Channel Sections: move a sidebar section to before a target channel/section",function(e,t){var{channelSectionId:a,nextChannelSectionId:n=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(a===n)return Promise.resolve();var r=Zt(t(),a);return e(Hi({channelSection:Ri({},r,{nextChannelSectionId:n})}))});Wi.meta={name:"moveChannelSection",key:"channelSectionsStoreChannelSectionsThunksMoveChannelSection",description:"Channel Sections: move a sidebar section to before a target channel/section"},Wi.propTypes={channelSectionId:o.default.string.isRequired,nextChannelSectionId:o.default.string};var qi=Object(xt.b)("Channel Sections: delete a channel section",function(e,t){var{channelSectionId:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t(),r=Zt(n,a);return e(Object(Kt.b)({channelSectionId:a})),e(Ht({channelSectionId:a})).catch(()=>{e(Object(Kt.l)({channelSection:r}))})});qi.meta={name:"deleteChannelSection",key:"channelSectionsStoreChannelSectionsThunksDeleteChannelSection",description:"Channel Sections: delete a channel section"},qi.propTypes={channelSectionId:o.default.string.isRequired};var Gi=Object(xt.b)("Channel Sections: insert or update a channel within a channel section",function(e,t){var{channelSectionId:a,channelId:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Zt(t(),a).type===Ni.h)return e(Object(ii.a)(!0,{channel:n}));var r=ta(t());return e(Object(Kt.m)({channelSectionId:a,channelIds:[n]})),e(Wt({channelSectionId:a,channelId:n})).catch(()=>{e(Object(Kt.e)({channelSectionId:a,channelIds:r}))})});Gi.meta={name:"upsertChannelSectionChannel",key:"channelSectionsStoreChannelSectionsThunksUpsertChannelSectionChannel",description:"Channel Sections: insert or update a channel within a channel section"},Gi.propTypes={channelSectionId:o.default.string.isRequired,channelId:o.default.string.isRequired};var Ki=Object(xt.b)("Channel Sections: remove a channel from a channel section",function(e,t){var{channelSectionId:a,channelId:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Zt(t(),a).type===Ni.h)return e(Object(ii.a)(!1,{channel:n}));var r=ta(t());return e(Object(Kt.d)({channelSectionId:a,channelIds:[n]})),e(qt({channelSectionId:a,channelId:n})).catch(()=>{e(Object(Kt.e)({channelSectionId:a,channelIds:r}))})});Ki.meta={name:"removeChannelSectionChannel",key:"channelSectionsStoreChannelSectionsThunksRemoveChannelSectionChannel",description:"Channel Sections: remove a channel from a channel section"},Ki.propTypes={channelSectionId:o.default.string.isRequired,channelId:o.default.string.isRequired},Object(Mt.a)("channelSections",{create:(e,t,a,n)=>Object(p.dispatchForTeamId)(e,Fi({name:t,emoji:a,nextChannelSectionId:n})),update:(e,t,a)=>Object(p.dispatchForTeamId)(e,Hi({channelSectionId:t,channelSection:a})),deleteSection:(e,t)=>Object(p.dispatchForTeamId)(e,qi({channelSectionId:t})),upsertChannel:(e,t,a)=>Object(p.dispatchForTeamId)(e,Gi({channelSectionId:t,channelId:a})),removeChannel:(e,t,a)=>Object(p.dispatchForTeamId)(e,Ki({channelSectionId:t,channelId:a}))});var Vi=new x.b("channel_sidebar"),zi={onItemSelected:r.a,moveManyChannels:()=>Promise.resolve(),moveManyChannelsToNewSection:()=>Promise.resolve(),moveManyChannelsToSection:()=>Promise.resolve(),removeChannelSectionChannels:[]};class channel_section_select_menu_trigger_ChannelSectionSelectMenuTrigger extends s.Component{constructor(e){super(e),this.state={showingModal:!1},Object(X.a)(this,["onNewSectionSelected","onNewSectionClose","onNewSectionSubmit","onRemoveFromChannelSectionSelected","renderMenu"])}shouldComponentUpdate(e,t){return this.state.showingModal!==t.showingModal||this.props.channelIds!==e.channelIds||this.props.onItemSelected!==e.onItemSelected||this.props.children!==e.children||this.props.featureChannelSections!==e.featureChannelSections||this.props.channelSections!==e.channelSections||!Object(Ti.a)(this.props.channelIsStarred,e.channelIsStarred,1)||!Object(Ti.a)(this.props.channelSectionChannels,e.channelSectionChannels,1)||!Object(Ti.a)(this.props.removeChannelSectionChannels,e.removeChannelSectionChannels,1)}onNewSectionSelected(){this.setState(()=>({showingModal:!0}))}onNewSectionSubmit(e){var{emoji:t,text:a}=e,{channelIds:n}=this.props;this.props.moveManyChannelsToNewSection({channelIds:n,emoji:t,name:a}).then(()=>{this.setState(()=>({showingModal:!1})),this.props.onItemSelected()}).catch(()=>{this.setState(()=>({showingModal:!1}))})}onNewSectionClose(){this.setState(()=>({showingModal:!1}))}onRemoveFromChannelSectionSelected(){this.removeFromAllChannelSections(),this.props.onItemSelected()}onItemSelected(e){this.props.moveManyChannelsToSection({channelIds:this.props.channelIds,channelSectionId:e.id}),this.props.onItemSelected()}getDoesSectionContainAllChannels(e){var{channelIds:t,channelSections:a,channelSectionChannels:n,channelIsStarred:r}=this.props;if(0===t.length)return!1;var s=a[e];return!!s&&(s.type===Ni.h?t.reduce((e,t)=>e&&r[t],!0):Object(oi.a)(t,n[e]).length===t.length)}getShouldShowRemoveFromChannelSection(){return Object.values(this.props.channelSections).some(e=>this.getDoesSectionContainAllChannels(e.id))}removeFromAllChannelSections(){this.props.moveManyChannels({remove:this.props.removeChannelSectionChannels,insert:[]})}renderMenu(e){var{channelSections:t}=this.props;if(!this.props.featureChannelSections)return null;var a=Object.values(t).filter(e=>e.type===Ni.g||e.type===Ni.h);return i.a.createElement(Be.f,Object(n.a)({width:196,menuClassNames:"p-channel_sidebar__channel_section_select_menu"},e),a.map(e=>i.a.createElement(Be.b,{key:e.id,"data-qa":"channel_section_select_menu_channel_section",onSelected:()=>this.onItemSelected(e),className:l()("p-channel_sidebar__channel_section_select_menu_item",{"p-channel_sidebar__channel_section_select_menu_item--checked":this.getDoesSectionContainAllChannels(e.id)})},this.getDoesSectionContainAllChannels(e.id)?i.a.createElement(We.b,{type:"check-small"}):null,i.a.createElement(Vr.b,{text:e.emoji,stopAnimations:!0,obeyEmojiMode:!1,emojiSize:Vr.a.SMALL,forceDisplay:!0,isEmojiInlineWithText:!0})," ",e.name)),a.length>0&&i.a.createElement(Be.d,null),i.a.createElement(Be.b,{"data-qa":"channel_section_select_menu_new_section",onSelected:this.onNewSectionSelected},Vi.t("New section\u2026")),this.getShouldShowRemoveFromChannelSection()&&i.a.createElement(Be.b,{"data-qa":"channel_section_select_menu_remove_from_section",onSelected:this.onRemoveFromChannelSectionSelected},Vi.t("Remove from section")))}render(){return i.a.createElement(s.Fragment,null,this.state.showingModal&&i.a.createElement(wi,{action:Ci.MOVE,focusOnMount:!0,openedFromKeyboardShortcut:!1,onSubmit:this.onNewSectionSubmit,onClose:this.onNewSectionClose}),i.a.createElement(Be.e,{"data-qa":"channel_section_select_menu_trigger",allowanceX:12,offsetY:8,position:"bottom",renderMenu:this.renderMenu},this.props.children))}}channel_section_select_menu_trigger_ChannelSectionSelectMenuTrigger.defaultProps=zi;var Yi=Object(d.b)((e,t)=>{var{channelIds:a}=t,n=Qt(e),r={};a.forEach(t=>{var a=Object(L.e)(e,t);r[t]=Object(B.Ib)(a)});var s={};return Object.values(n).forEach(t=>{s[t.id]=ta(e,t.id)}),{channelSections:n,channelIsStarred:r,channelSectionChannels:s,featureChannelSections:Object(h.m)(e,"feature_channel_sections"),removeChannelSectionChannels:Mi(e,a)}},e=>({moveManyChannels:function(){return e(Li(...arguments))},moveManyChannelsToSection:function(){return e(Ui(...arguments))},moveManyChannelsToNewSection:function(){return e(Bi(...arguments))}}))(channel_section_select_menu_trigger_ChannelSectionSelectMenuTrigger),Qi=new x.b("classic_nav"),Xi=new x.b("channel_sidebar"),Ji={isStarred:!1,featureClassicNav:!1,shouldUseChannelSections:!1,omitSeparator:!1,isMemberOfChannel:!1,isInAnyChannelSection:!1,updateStar:r.a};class model_info_star_ModelInfoStar extends s.Component{constructor(e){super(e),Object(X.a)(this,["onClick","renderTip","renderAriaLabel"])}onClick(){var{channelId:e,isStarred:t}=this.props;this.props.updateStar(!t,{channel:e}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_STAR"}}})}renderTip(){var{channelType:e,isStarred:t,featureClassicNav:a}=this.props;if(!a)return null;if(this.props.shouldUseChannelSections)return Xi.t("Select sections");switch(e){case"channel":case"private":return t?Qi.t("Unstar this channel"):Qi.t("Star this channel");case"im":case"mpim":return t?Qi.t("Unstar this direct message"):Qi.t("Star this direct message");default:return null}}renderAriaLabel(){var{channelType:e,channelName:t}=this.props;return"channel"===e||"private"===e?Qi.t("Star channel {channelName}",{channelName:t,fallbackHash:"f314f33a825d5dc3ac1683638acc464b2aae62fc",note:"A label for the button in the Channel Header to star a channel. Not visible on screen as it is only for customers using screen readers."}):"im"===e?Qi.t("Star conversation with {memberName}",{memberName:t,fallbackHash:"a04b360e228e052a9853fbe7203ab22697daade3",note:"A label for the button in the Channel Header to star an IM. Not visible on screen as it is only for customers using screen readers."}):"mpim"===e?Qi.t("Star conversation with {memberNames}",{memberNames:t,fallbackHash:"a04b360e228e052a9853fbe7203ab22697daade3",note:"A label for the button in the Channel Header to star an MPIM. memberNames is a comma-delimited set of names. Not visible on screen as it is only for customers using screen readers."}):void 0}render(){var{isStarred:e,omitSeparator:t,isMemberOfChannel:a,isInAnyChannelSection:n}=this.props;if(!a)return null;var r=this.props.shouldUseChannelSections&&n||e,o=r?"star":"star-o",c=l()({"p-classic_nav__model__title__info__star":!0,"p-classic_nav__model__title__info__star--starred":r}),d=i.a.createElement(qe.c,{tip:this.renderTip,position:"bottom",hideFromScreenReader:!0},i.a.createElement(jt.c,{className:c,onClick:this.props.shouldUseChannelSections?null:this.onClick,"aria-label":this.renderAriaLabel(),"data-qa":"channel_header__star_button","aria-pressed":r},i.a.createElement(We.b,{type:o,size:"inherit",inline:!0})));return i.a.createElement(s.Fragment,null,this.props.shouldUseChannelSections?i.a.createElement(Yi,{channelIds:[this.props.channelId]},d):d,!t&&i.a.createElement(ni,null))}}model_info_star_ModelInfoStar.defaultProps=Ji;var Zi=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object(B.w)(e,n,{publicChannelIncludeHashSign:!1});return{channelType:Object(B.u)(n),isStarred:Object(B.Ib)(n),isMemberOfChannel:Object(B.nb)(n),isInAnyChannelSection:sa(e,a),featureClassicNav:Object(h.m)(e,"feature_classic_nav"),shouldUseChannelSections:Object(N.a)(e),clogger:Object(ne.a)({state:e}),channelName:r}},e=>({updateStar:function(){return e(Object(ii.a)(...arguments))}}))(model_info_star_ModelInfoStar),$i=a("K2Qr"),eo=a("hUMe"),to=a("k0G2"),ao=new x.b("classic_nav"),no={memberCount:void 0,isSharedMpim:!1,pendingAndConnectedTeamIds:void 0,externalMemberCount:void 0,featureClassicNav:!1,isMembersVisible:!1,showDetails:r.a,isChannel:!1};class model_info_members_ModelInfoMembers extends s.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}onClick(){this.props.showDetails({sectionId:"members"}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_MEMBERS"}}})}onKeyDown(e){e.keyCode===to.e&&(e.preventDefault(),this.props.showDetails({sectionId:"members",focusKey:"members"}))}getCount(){var{isSharedMpim:e,memberCount:t}=this.props,a=Object(ci.a)(t)?Object(x.o)(t):"\u2013";return e?this.getSharedMpimCount(a):a}getSharedMpimCount(e){var{featureClassicNav:t,pendingAndConnectedTeamIds:a,externalMemberCount:n}=this.props;return t?a&&a.length&&n?a.length>1?ao.rt("{totalMemberCount} ({externalMemberCount} from other organizations)",{totalMemberCount:e,externalMemberCount:n}):ao.rt("{totalMemberCount} ({externalMemberCount} from\xa0{externalTeamName})",{totalMemberCount:e,externalMemberCount:n,externalTeamName:i.a.createElement(eo.a,{id:a[0],bold:!1})}):e:null}render(){var{featureClassicNav:e,isMembersVisible:t,channelName:a,isChannel:n}=this.props;if(!e)return null;var r=n?ao.t("Show member list for channel {channelName}",{channelName:a,fallbackHash:"cd2bc6930e2aeee592020415692ed1dc4c9652fe",note:"A label for the button in the Channel Header to show the member list for a channel in the Flexpane. Not visible on screen as it is only for customers using screen readers."}):ao.t("Show member list for conversation with {memberNames}",{memberNames:a,fallbackHash:"cd2bc6930e2aeee592020415692ed1dc4c9652fe",note:"A label for the button in the Channel Header to show the member list for an MPIM in the Flexpane. memberNames is a comma-delimited set of names. Not visible on screen as it is only for customers using screen readers."}),o=i.a.createElement(jt.c,{className:"p-classic_nav__model__title__info__members",onClick:this.onClick,onKeyDown:this.onKeyDown,"aria-label":r,"aria-expanded":t,"data-qa":"model-title-info-member"},i.a.createElement(We.b,{type:"user",size:"inherit",inline:!0}),"\xa0",this.getCount());return i.a.createElement(s.Fragment,null,t?o:i.a.createElement(qe.c,{tip:ao.t("View member list"),position:"bottom",hideFromScreenReader:!0},o),i.a.createElement(ni,null))}}model_info_members_ModelInfoMembers.defaultProps=no;var ro=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object($i.f)(e,a),s=Object(B.ab)(n)&&Object(B.pb)(n),i=s?Object(B.N)(e,n):null,o=s?Object(B.H)(n).filter(t=>Object(Fe.tb)(Object(Ca.d)(e,t))).length:void 0,c=Object(y.e)(e)[0]||"",l=Object(B.w)(e,n,{publicChannelIncludeHashSign:!1});return{memberCount:r&&r.counts&&r.counts.member_count,featureClassicNav:Object(h.m)(e,"feature_classic_nav"),isSharedMpim:s,pendingAndConnectedTeamIds:i,externalMemberCount:o,clogger:Object(ne.a)({state:e}),isMembersVisible:"members"===c,channelName:l,isChannel:Object(B.Cb)(n)||Object(B.Bb)(n)}},e=>({showDetails:function(){return e(Object(Ie.e)(...arguments))}}))(model_info_members_ModelInfoMembers),so=new x.b("classic_nav"),io={maybe:!1,pinsCount:void 0,featureClassicNav:!1,isPinsVisible:!1,showDetails:r.a};class model_info_pins_ModelInfoPins extends s.Component{constructor(e){super(e),Object(X.a)(this,["onClick","onKeyDown","renderAriaLabel"])}onClick(){this.props.showDetails({sectionId:"pins"}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_PINS"}}})}onKeyDown(e){e.keyCode===to.e&&(e.preventDefault(),this.props.showDetails({sectionId:"pins",focusKey:"pins"}))}renderAriaLabel(){var{channelType:e,channelName:t}=this.props;return"channel"===e||"private"===e?so.t("Show items pinned in channel {channelName}",{channelName:t,fallbackHash:"ed68592deea9577fd06f582a1ecb11ae4bc371e8",note:"A label for the button in the Channel Header to show the pinned items Flexpane for a channel. Not visible on screen as it is only for customers using screen readers."}):"im"===e?so.t("Show items pinned in conversation with {memberName}",{memberName:t,fallbackHash:"ed68592deea9577fd06f582a1ecb11ae4bc371e8",note:"A label for the button in the Channel Header to show the pinned items Flexpane for an IM. Not visible on screen as it is only for customers using screen readers."}):"mpim"===e?so.t("Show items pinned in conversation with {memberNames}",{memberNames:t,fallbackHash:"ed68592deea9577fd06f582a1ecb11ae4bc371e8",note:"A label for the button in the Channel Header to show the pinned items Flexpane for an MPIM. memberNames is a comma-delimited set of names. Not visible on screen as it is only for customers using screen readers."}):void 0}render(){var{maybe:e,featureClassicNav:t,pinsCount:a,isPinsVisible:n}=this.props;if(!t)return null;if(e&&!a)return null;var r=Object(ci.a)(a)?Object(x.o)(a):"\u2013",o=so.t("View pinned items"),c=i.a.createElement(jt.c,{className:"p-classic_nav__model__title__info__pins",onClick:this.onClick,onKeyDown:this.onKeyDown,"aria-label":this.renderAriaLabel(),"aria-expanded":n},i.a.createElement(We.b,{type:"thumb-tack",size:"inherit",inline:!0}),"\xa0",r);return i.a.createElement(s.Fragment,null,n?c:i.a.createElement(qe.c,{tip:o,position:"bottom",hideFromScreenReader:!0},c),i.a.createElement(ni,null))}}model_info_pins_ModelInfoPins.defaultProps=io;var oo=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object(y.e)(e)[0]||"",s=Object(B.w)(e,n,{publicChannelIncludeHashSign:!1});return{pinsCount:Object(B.O)(n),featureClassicNav:Object(h.m)(e,"feature_classic_nav"),clogger:Object(ne.a)({state:e}),isPinsVisible:"pins"===r,channelName:s,channelType:Object(B.u)(n)}},e=>({showDetails:function(){return e(Object(Ie.e)(...arguments))}}))(model_info_pins_ModelInfoPins),co=a("yzQ7"),lo=e=>"persistent"===Object(It.c)(e,"platform_workflows_action_menu"),po=(e,t)=>{var a=Object(L.e)(e,t);return Object(kt.a)()&&(lo(e)||Object(Rr.d)(e))&&(Object(B.Bb)(a)||Object(B.Cb)(a))},uo=(e,t)=>{var a=Object(L.e)(e,t);return(Object(B.Bb)(a)||Object(B.Cb)(a))&&Object(B.nb)(a)},ho=new x.b("classic_nav"),mo={channelActionsCount:void 0,isActionsSectionExpanded:!1,countIsKnown:!1,showDetails:r.a,shouldDisplay:!1},bo=e=>{var{channelActionsCount:t,channelName:a,clogger:n,countIsKnown:r,isActionsSectionExpanded:o,shouldDisplay:c,showDetails:l}=e,d=Object(s.useCallback)(()=>{l({sectionId:"actions"}),n.track(ie.EventId.CLASSIC_NAV,{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.ui_component]:ie.UiComponent.CHANNEL_HEADER,[ie.UiContextKeys.ui_element]:ie.UiElement.NAV_CHANNEL_ACTIONS}}})},[n,l]),p=Object(s.useCallback)(e=>{e.keyCode===to.e&&(e.preventDefault(),l({sectionId:"actions",focusKey:"actions"}))},[l]);if(!c)return null;var u=r?Object(x.o)(t):"\u2013",h=ho.t("View channel actions",{fallbackHash:"b225cbd5ab14bf4bbd8e4b05e1beb652d1f7c33b"}),m=ho.t("Actions in channel {channelName}",{channelName:a,fallbackHash:"b225cbd5ab14bf4bbd8e4b05e1beb652d1f7c33b",note:"Label for the channel actions button in Channel Header. Not visible on screen as it is only for customers using screen readers."}),b=i.a.createElement(jt.c,{className:"p-classic_nav__model__title__info__actions",onClick:d,onKeyDown:p,"aria-label":m,"aria-expanded":o},i.a.createElement(We.b,{type:"bolt",size:"inherit",inline:!0}),"\xa0",u);return i.a.createElement(s.Fragment,null,o?b:i.a.createElement(qe.c,{tip:h,position:"bottom",hideFromScreenReader:!0},b),i.a.createElement(ni,null))};bo.defaultProps=mo;var _o=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object(y.e)(e)[0]||"",s=Object(B.w)(e,n,{publicChannelIncludeHashSign:!1});return{channelActionsCount:Object(co.c)(e,a),channelName:s,clogger:Object(ne.a)({state:e}),countIsKnown:Object(co.d)(e,a),isActionsSectionExpanded:"actions"===r,shouldDisplay:po(e,a)}},e=>({showDetails:function(){return e(Object(Ie.e)(...arguments))}}))(bo),go=a("hCI9"),fo=a("+z37"),vo=(a("4tN7"),250),Oo=new x.b("classic_nav"),yo={currentRawTopic:void 0,currentFormattedTopic:void 0,featureClassicNav:!1,submitChannelTopic:r.a,openModal:r.a};class channel_topic_dialog_ChannelTopicDialog extends s.Component{constructor(e){super(e),this.onSubmit=this.onSubmit.bind(this),this.renderInput=this.renderInput.bind(this),this.input=i.a.createRef()}onSubmit(){var e=this.input.current&&this.input.current.getWrappedInstance().value();null!=e&&e!==this.props.currentRawTopic&&this.props.submitChannelTopic({channelId:this.props.channelId,topic:e}).catch(e=>{var t=Object(B.t)(Object(ps.a)(e,"data.error"));this.props.openModal({element:i.a.createElement(Ba.a,{title:Oo.t("Oooops!",{ns:"channels"})},t)})})}renderInput(e){var{modules:t,isOpen:a}=e,{currentFormattedTopic:n}=this.props;return i.a.createElement(go.b,{initialText:n,focusOnMount:!0,minLines:3,modules:t,isAutocompleteOpen:a,maxLength:vo,ariaLabel:Oo.t("Edit channel topic"),ref:this.input,useLegacyLists:!0})}render(){return this.props.featureClassicNav?i.a.createElement(di.a,Object(n.a)({className:"p-channel_topic_dialog",title:Oo.t("Edit channel topic"),goButtonText:Oo.t("Set topic"),onGo:this.onSubmit},this.props),i.a.createElement(hi.a,{renderInput:this.renderInput,completeOnMembers:!0,completeOnChannels:!0,completeOnEmoji:!0,shouldCompleteOnTab:!1})):null}}channel_topic_dialog_ChannelTopicDialog.defaultProps=yo;var Co=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=n&&n.topic&&n.topic.value;return{currentRawTopic:r,currentFormattedTopic:r&&Object(fo.a)(e,{text:r}),featureClassicNav:Object(h.m)(e,"feature_classic_nav")}},e=>({submitChannelTopic:function(){return e(Object(us.H)(...arguments))},openModal:function(){return e(Object(Ua.e)(...arguments))}}))(channel_topic_dialog_ChannelTopicDialog),jo=new x.b("classic_nav"),Eo={topic:void 0,readOnly:!1,featureClassicNav:!1,openModal:r.a,hasKeyboardFocusWithin:!1,onFocus:r.a,onBlur:r.a};class model_info_topic_ModelInfoTopic extends s.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.containerRef=i.a.createRef()}onClick(e){e.target&&"A"===e.target.tagName||this.props.readOnly||this.containerRef.current&&e.target&&!this.containerRef.current.contains(e.target)||(this.props.openModal({element:i.a.createElement(Co,{channelId:this.props.channelId})}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_TOPIC"}}}))}render(){var{topic:e,readOnly:t,featureClassicNav:a,hasKeyboardFocusWithin:n,isIAP1Enabled:r}=this.props;if(!a)return null;if(t&&!e)return null;var o=e?i.a.createElement(Kr.a,{text:e,className:"p-classic_nav__model__title__info__topic__content",emojiSize:Vr.a.SMALL,noJumbomoji:!0,noHighlights:!0}):i.a.createElement("div",{className:"p-classic_nav__model__title__info__topic__content"},!r&&i.a.createElement(s.Fragment,null,i.a.createElement(We.b,{type:"pencil",size:"inherit",inline:!0}),"\xa0"),jo.t("Add a topic")),c=t?null:i.a.createElement(jt.c,{"aria-label":jo.t("Edit channel topic",{fallbackHash:"5301648dcf6b53cefc9ed52999aaa92d4603cae0"}),className:"p-classic_nav__model__title__info__topic__edit"},jo.t("Edit")),d=l()({"p-classic_nav__model__title__info__item":!0,"p-classic_nav__model__title__info__topic":!0,"p-classic_nav__model__title__info__topic--empty":!e,"p-classic_nav__model__title__info__topic--readonly":t,"p-classic_nav__model__title__info__topic--focus-within":n});return i.a.createElement(s.Fragment,null,i.a.createElement("div",{role:"presentation",ref:this.containerRef,className:d,onClick:this.onClick,onFocus:this.props.onFocus,onBlur:this.props.onBlur},i.a.createElement("div",{className:"p-classic_nav__model__title__info__topic__text"},o),c),i.a.createElement(ni,null))}}model_info_topic_ModelInfoTopic.defaultProps=Eo;var ko=Object(se.a)(Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a);return{topic:n&&n.topic&&n.topic.value,readOnly:!Object(sn.w)(e,a).ok,featureClassicNav:Object(h.m)(e,"feature_classic_nav"),clogger:Object(ne.a)({state:e}),isIAP1Enabled:Object(Rr.d)(e)}},e=>({openModal:function(){return e(Object(Ua.e)(...arguments))}}))(model_info_topic_ModelInfoTopic)),So=a("RDbB"),Io=a("yY9y"),wo=new x.b("presence"),To={memberId:void 0,featureClassicNav:!1};class model_info_presence_ModelInfoPresence extends s.Component{constructor(e){super(e),this.getPresenceDescription=this.getPresenceDescription.bind(this)}getPresenceDescription(e){return this.props.featureClassicNav?e.isDnd?wo.t("notifications snoozed"):e.isActive?wo.t("active"):wo.t("away"):null}render(){var{memberId:e}=this.props;return e?i.a.createElement(s.Fragment,null,i.a.createElement(So.a,{memberId:e},e=>i.a.createElement("div",{className:"p-classic_nav__model__title__info__presence"},i.a.createElement(Io.a,Object(n.a)({},e,{className:"p-classic_nav__model__title__info__presence__icon"})),this.getPresenceDescription(e))),i.a.createElement(ni,null)):null}}model_info_presence_ModelInfoPresence.defaultProps=To;var No=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a);return{memberId:Object(B.G)(n),featureClassicNav:Object(h.m)(e,"feature_classic_nav")}})(model_info_presence_ModelInfoPresence),Po=e=>{var{secondaryName:t}=e;return t?i.a.createElement(s.Fragment,null,i.a.createElement("div",{className:"p-classic_nav__model__title__info__secondary_name"},t),i.a.createElement(ni,null)):null};Po.defaultProps={secondaryName:void 0};var Ao=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object(Ca.d)(e,Object(B.G)(n));return{secondaryName:Object(Fe.M)(e,r)}})(Po),Mo=new x.b("classic_nav");class model_info_shared_teams_ModelInfoSharedTeams extends s.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){this.props.showDetails({sectionId:"info"})}render(){var{isShared:e,pendingAndConnectedTeamIds:t,featureClassicNav:a,isInfoOpen:n,channelName:r}=this.props;if(!a)return null;if(!e)return null;var o=Object(x.k)(t.map(e=>i.a.createElement(eo.a,{id:e}))),c=Mo.rt("Shared with {teamNames}",{teamNames:o}),l=Mo.t("View the organizations {channelName} is shared with",{channelName:r,fallbackHash:"fa4fe5f6ebd939a3f0478bc80b4bcc1890ef936e"}),d=i.a.createElement(jt.c,{className:"p-classic_nav__model__title__info__shared_teams",onClick:this.onClick,"aria-expanded":n},c);return i.a.createElement(s.Fragment,null,n?d:i.a.createElement(qe.c,{tip:l,position:"bottom"},d),i.a.createElement(ni,null))}}model_info_shared_teams_ModelInfoSharedTeams.defaultProps={isShared:!1,pendingAndConnectedTeamIds:[],isInfoOpen:!1,featureClassicNav:!1};var xo=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object(y.e)(e)[0]||"",s=Object(B.w)(e,n,{publicChannelIncludeHashSign:!1});return{isShared:Object(B.ab)(n),pendingAndConnectedTeamIds:Object(B.N)(e,n),featureClassicNav:Object(h.m)(e,"feature_classic_nav"),isInfoOpen:"info"===r,channelName:s}},e=>({showDetails:function(){return e(Object(Ie.e)(...arguments))}}))(model_info_shared_teams_ModelInfoSharedTeams),Ro=e=>{var{isExternal:t,memberTeamId:a}=e;return t&&a?i.a.createElement(s.Fragment,null,i.a.createElement(eo.a,{id:a,bold:!1}),i.a.createElement(ni,null)):null};Ro.defaultProps={isExternal:!1,memberTeamId:void 0};var Do=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object(B.G)(n),s=Object(Ca.d)(e,r);return{isExternal:Object(Fe.tb)(s),memberTeamId:Object(Fe.P)(s)}})(Ro),Fo={channel:["star","members","pins","actions","sharedTeams","topic"],private:["star","members","pins","actions","sharedTeams","topic"],mpim:["star","members","pinsMaybe"],im:["star","presence","secondaryName","teamName","pinsMaybe"]},Lo={channel:["members","pins","topic"],private:["members","pins","topic"],mpim:["members","pinsMaybe"],im:["pinsMaybe","status"]},Uo=e=>{var{channelId:t,channelType:a,showTabs:n,isIAP1Enabled:r,memberId:s}=e;if(!a)return null;var o=n&&i.a.createElement(si,{channelId:t,key:"tabs"}),c=(r?Lo:Fo)[a].map(e=>{switch(e){case"star":return i.a.createElement(Zi,{channelId:t,key:"star"});case"members":return i.a.createElement(ro,{channelId:t,key:"members"});case"pins":return i.a.createElement(oo,{channelId:t,key:"pins"});case"actions":return i.a.createElement(_o,{channelId:t,key:"actions"});case"presence":return i.a.createElement(No,{channelId:t,key:"presence"});case"secondaryName":return i.a.createElement(Ao,{channelId:t,key:"secondaryName"});case"pinsMaybe":return i.a.createElement(oo,{maybe:!0,channelId:t,key:"pinsMaybe"});case"sharedTeams":return i.a.createElement(xo,{channelId:t,key:"sharedTeams"});case"teamName":return i.a.createElement(Do,{channelId:t,key:"teamName"});case"topic":return i.a.createElement(ko,{channelId:t,key:"topic"});case"status":return i.a.createElement(Ct.b,{className:"p-ia__view_header__status",memberId:s,tooltip:!1});default:return null}}),d=l()("p-classic_nav__model__title__info","p-classic_nav__no_drag",{"p-classic_nav__model__title__info--tabs":n});return i.a.createElement("div",{"data-qa":"channel_header__title__info",className:d},o,c)};Uo.defaultProps={channelType:void 0,memberId:void 0,showTabs:!1,isIAP1Enabled:!1};var Bo=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a);return{channelType:Object(B.u)(n),showTabs:Object(P.e)(e),isIAP1Enabled:Object(Rr.d)(e),memberId:n&&Object(B.hb)(n)&&Object(B.G)(n)||void 0}})(Uo),Ho=a("/m+M"),Wo=a("Z1bu"),qo=a("cMxN"),Go=a("vSXf"),Ko=new x.b("channel_action_menu"),Vo=Object(d.b)(void 0,e=>({closeModal:()=>e(Object(Ua.a)()),launchWorkflowBuilder:t=>{var{subPath:a}=t;return e(Object(cn.a)({source:"add_channel_action__modal",subPath:a}))},setClickedThrough:()=>e(Object(Ve.f)({pref:"workflow_builder_intro_modal_clicked_through",value:!0}))}))(e=>{var{closeModal:t,setClickedThrough:a,launchWorkflowBuilder:n,channelId:r}=e,{featureChannelActionsClient:o}=Object(Ho.a)(),c=Object(s.useCallback)(()=>{n({subPath:"workflow/create/channel_action/".concat(r)}),a(),t()},[t,a,r,n]);return o?i.a.createElement(Ds.a,{onClose:t,title:Ko.t("Add a new action"),submitButtonText:Ko.t("Create Workflow"),onSubmit:c,showCancelButton:!1,"data-qa":"add_channel_action_modal"},i.a.createElement("p",null,Ko.t("You can automate everyday actions \u2014 like sending routine messages or gathering info from people \u2014 with Workflow Builder. Create workflows and add them to a channel for everyone to use."))):null}),zo=e=>i.a.createElement(Vo,{channelId:e}),Yo=Object(xt.b)("add channel action with workflow builder",(e,t,a)=>{var n=t();Object(Qn.a)(n)&&Object(h.m)(n,"feature_builder_can_access")&&(!0!==Object(Ke.k)(n,"workflow_builder_intro_modal_clicked_through")?e(Object(Ua.e)({element:zo(a)})):e(Object(cn.a)({source:"add_channel_action__seen_modal",subPath:"workflow/create/channel_action/".concat(a)})))});Yo.meta={name:"addChannelActionWithWorkflowBuilder",key:"actionsAddChannelActionWithWorkflowBuilderAddChannelActionWithWorkflowBuilder",description:"add channel action with workflow builder"},Yo.propTypes=o.default.string.isRequired;var Qo=Yo,Xo=a("OYPW"),Jo=a("hCvz"),Zo=a("V/As"),$o=a("AE1P"),ec=a("uG0r"),tc=(a("fYpC"),e=>{var{action:t,app:a,channelId:r,isOffline:o,onSelected:c,runChannelAction:l,index:d,clogger:p}=e,u=Object(ya.a)(e,["action","app","channelId","isOffline","onSelected","runChannelAction","index","clogger"]),h=Object(ps.a)(t,"app.icons.image_64",Object(Zo.b)(a,64)),m=i.a.createElement(ht.a,{alt:name,className:"p-channel_action_menu_item__icon",height:20,src:h,width:20}),b=Object(s.useCallback)(()=>{l({actionId:t.id,channelId:r}),((e,t)=>{var{index:a,appId:n,actionId:r}=t;e.track(ie.EventId.CHANNEL_ACTION_MENU,{app_id:n,action_id:r,contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.ui_component]:ie.UiComponent.CHANNEL_ACTION,[ie.UiContextKeys.ui_properties]:{[ie.UiPropertiesKeys.element_type]:ie.ElementType.DROPDOWN,[ie.UiPropertiesKeys.element_name]:"action_item",[ie.UiPropertiesKeys.element_index]:a}}}})})(p,{index:d,actionId:t.id,appId:t.appId}),c(t)},[t,r,p,d,c,l]);return Object(s.useEffect)(()=>{((e,t)=>{var{index:a,appId:n,actionId:r}=t;e.track(ie.EventId.CHANNEL_ACTION_MENU,{app_id:n,action_id:r,contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.IMPRESSION,[ie.UiContextKeys.ui_component]:ie.UiComponent.CHANNEL_ACTION,[ie.UiContextKeys.ui_properties]:{[ie.UiPropertiesKeys.element_type]:ie.ElementType.DROPDOWN,[ie.UiPropertiesKeys.element_name]:"action_item",[ie.UiPropertiesKeys.element_index]:a}}}})})(p,{index:d,actionId:t.id,appId:t.appId})},[t.appId,t.id,p,d]),i.a.createElement(Be.b,Object(n.a)({},u,{className:"p-channel_action_menu_item",onSelected:b,icon:m,"data-qa":"channel_action_menu_item",showOfflineIcon:o,disabled:o}),t.name)});tc.defaultProps={app:null,onSelected:r.a};var ac=Object(d.b)((e,t)=>{var{action:{appId:a}}=t;return{app:Object($o.e)(e,a)||null,isOffline:!Object(Re.c)(e),clogger:Object(ne.a)({state:e})}},e=>({runChannelAction:t=>e(Object(ec.a)(t))}))(tc),nc=Object(un.b)(ac),rc=new x.b("channel_action_menu"),sc={small:160,medium:200,large:240},ic=e=>{var{channelId:t,channelActionCount:a,channelActions:r,onSelected:o,addChannelActionWithWorkflowBuilder:c,shouldShowCreateButton:l,clogger:d}=e,p=Object(ya.a)(e,["channelId","channelActionCount","channelActions","onSelected","addChannelActionWithWorkflowBuilder","shouldShowCreateButton","clogger"]),{featureChannelActionsClient:u}=Object(Ho.a)(),h=Object(Xo.a)(()=>new Array(a).fill(null).map((e,t)=>i.a.createElement(Be.b,{"data-qa":"channel_action_menu__placeholder_item",key:t,disabled:!0},i.a.createElement(Jo.b,{size:"random",sizes:sc}))),[a]),m=Object(s.useMemo)(()=>r&&0!==r.length?r.map((e,a)=>i.a.createElement(nc,{key:e.id,action:e,channelId:t,onSelected:o,index:a})):h,[h,r,t,o]),b=Object(s.useCallback)(()=>{d.track(ie.EventId.CHANNEL_ACTION_MENU,{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.ui_component]:ie.UiComponent.CHANNEL_ACTION,[ie.UiContextKeys.ui_properties]:{[ie.UiPropertiesKeys.element_type]:ie.ElementType.LINK,[ie.UiPropertiesKeys.element_name]:"create_action"}}}}),c(t)},[c,t,d]);return i.a.createElement(Be.f,Object(n.a)({},p,{"data-qa":"channel_action_menu"}),m,l&&i.a.createElement(s.Fragment,null,i.a.createElement(Be.d,null),i.a.createElement(Be.b,{onSelected:b,"data-qa":"channel_action_menu__create_action_cta"},u?rc.t("Add a new action..."):"")))};ic.defaultProps={channelActions:[],onSelected:r.a};var oc=Object(d.b)((e,t)=>{var{channelId:a}=t;return{channelId:a,channelActionCount:Object(co.c)(e,a),channelActions:Object(co.a)(e,a),shouldShowCreateButton:Object(Qn.a)(e),clogger:Object(ne.a)({state:e})}},e=>({addChannelActionWithWorkflowBuilder:t=>e(Qo(t))}))(ic),cc=new x.b("channel_action_menu"),lc=e=>{var{children:t,channelId:a,featureChannelActionsClient:r,offsetX:s,offsetY:o,position:c}=e,l=Object(ya.a)(e,["children","channelId","featureChannelActionsClient","offsetX","offsetY","position"]);return r?i.a.createElement(qo.b,Object(n.a)({},l,{ariaHasPopup:!0,renderPopover:e=>i.a.createElement(qo.a,Object(n.a)({allowanceX:15,allowanceY:15,position:c,offsetX:s,offsetY:o,ariaLabel:cc.t("App Actions"),ariaRole:"dialog"},e),i.a.createElement(oc,{channelId:a,onTriggerClose:e.onClose,onMenuItemSelected:e.onClose}))}),t):null};lc.defaultProps={channelId:null,offsetX:0,offsetY:0,position:"bottom-right",featureChannelActionsClient:!1};var dc=Object(Go.a)("feature_channel_actions_client")(lc),pc=new x.b("classic_nav"),uc=e=>{var{teamId:t,channelId:a,channelName:n,channelActionCount:r,shouldDisplay:o,clogger:c}=e,{featureClassicNav:l,featureChannelActionsClient:d}=Object(Ho.a)(),p=l&&d&&o,u=Object(s.useCallback)(()=>(e=>e.track(ie.EventId.CLASSIC_NAV,{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.ui_component]:ie.UiComponent.CHANNEL_HEADER,[ie.UiContextKeys.ui_element]:ie.UiElement.NAV_CHANNEL_ACTIONS}}}))(c),[c]),h=Object(s.useCallback)(()=>(e=>e.track(ie.EventId.CHANNEL_ACTION_MENU,{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.HOVER,[ie.UiContextKeys.ui_component]:ie.UiComponent.CHANNEL_ACTION,[ie.UiContextKeys.ui_properties]:{[ie.UiPropertiesKeys.element_type]:ie.ElementType.ICON,[ie.UiPropertiesKeys.element_name]:"action_icon"}}}}))(c),[c]);if(Object(s.useEffect)(()=>{o&&Object(Wo.b)(t,a)},[t,a,r,o]),Object(s.useEffect)(()=>{p&&(e=>e.track(ie.EventId.CHANNEL_ACTION_MENU,{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.IMPRESSION,[ie.UiContextKeys.ui_component]:ie.UiComponent.CHANNEL_ACTION,[ie.UiContextKeys.ui_properties]:{[ie.UiPropertiesKeys.element_type]:ie.ElementType.ICON,[ie.UiPropertiesKeys.element_name]:"action_icon"}}}}))(c)},[c,p]),!p)return null;var m=pc.t("Actions in this channel"),b=d?pc.t("Actions in channel {channelName}",{channelName:n,fallbackHash:"b225cbd5ab14bf4bbd8e4b05e1beb652d1f7c33b",note:"Label for the channel actions button in Channel Header. Not visible on screen as it is only for customers using screen readers."}):"";return i.a.createElement(dc,{channelId:a,onClick:u},i.a.createElement(qe.c,{position:"bottom",tip:m,onMouseEnter:h,hideFromScreenReader:!0},i.a.createElement(jt.c,{className:"p-classic_nav__model__button","aria-label":b,"data-qa":"channel_action_button"},i.a.createElement(We.b,{type:"bolt",className:"p-classic_nav__model__button__icon"}))))};uc.defaultProps={channelActionCount:null};var hc=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object(co.c)(e,a),s=((e,t)=>{var a=Object(L.e)(e,t),n=Object(co.c)(e,t);return Object(kt.a)()&&!lo(e)&&(Object(B.Bb)(a)||Object(B.Cb)(a))&&Object(B.nb)(a)&&n>0})(e,a),i=Object(B.w)(e,n,{publicChannelIncludeHashSign:!1});return{shouldDisplay:s,channelActionCount:r,teamId:Object(u.b)(e),clogger:Object(ne.a)({state:e}),channelName:i}})(uc),mc=a("NB3s"),bc=a("2olY"),_c=a("jzln"),gc=e=>"treatment"===Object(It.c)(e,"calls_4902")&&(Object(kt.a)()||Object(_c.a)()),fc=a("FghR"),vc=a("cnLP"),Oc=a("cD5Y"),yc=(a("XcDb"),new x.b("calls")),Cc=e=>{var{featureCallButtonCoachEnabled:t,clogger:a,team:n}=e,[r,o]=Object(s.useState)(!1),c=Object(s.useCallback)(()=>{o(!1)},[]),l=Object(s.useCallback)(()=>{r||a.track(ie.EventId.CALLS_UPGRADE_PROMPT_GROUP_CALLS,{contexts:{ui_context:{[ie.UiContextKeys.step]:ie.UiStep.CALLS_BUTTON_COACHMARK_OPEN,[ie.UiContextKeys.action]:ie.UiAction.IMPRESSION,[ie.UiContextKeys.entry_point]:"calls-button-coachmark"}}}),o(!r)},[a,r]),d=Object(s.useCallback)(()=>{a.track(ie.EventId.CALLS_UPGRADE_PROMPT_GROUP_CALLS,{contexts:{ui_context:{[ie.UiContextKeys.step]:ie.UiStep.CALLS_BUTTON_COACHMARK_LEARN_MORE,[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.is_primary_cta]:!0,[ie.UiContextKeys.ui_properties]:{[ie.UiPropertiesKeys.element_type]:ie.ElementType.LINK,[ie.UiPropertiesKeys.element_name]:"calls_button_learn_more_link"}}}}),Object(we.P)(n,Object(an.j)({entryPoint:"calls-button-coachmark"}))},[a,n]);if(!t)return null;var p=i.a.createElement(fc.a,{isOpen:r,closeCoachmark:c,centerOnArrow:!0,orientation:"bottom",coachmarkClassNames:"p-classic_nav__call-button-coachmark"},i.a.createElement("h3",{className:"margin_bottom_100"},i.a.createElement(We.b,{type:"slack"})," ",yc.t("Slack Standard plan feature")),i.a.createElement("div",{className:"display_flex"},i.a.createElement(ht.a,{alt:yc.t("Group calls image"),src:"/img/calls/calls-group-coachmark-2x.png",height:"151",width:"189",renderPending:()=>i.a.createElement("div",null,i.a.createElement(Oc.a,{color:"blue"}))}),i.a.createElement("div",{className:"display_flex flex_direction_column margin_left_100"},i.a.createElement("h2",{className:"margin_bottom_50"},yc.t("Group calls")),i.a.createElement("p",null,yc.rt("15-person video calls let you host daily stand-ups, share docs, and check in with team members all over the world. <a>Learn more about paid plans</a>",{fallbackHash:"baba8ad6e505593640eb65e5ae5181245af628bb"},e=>{var{key:t,text:a}=e;return i.a.createElement("a",{key:t,href:"#",onClick:d,"data-qa":"learn_more_link"},a)})))));return i.a.createElement(vc.a,{coachmarkElement:p,orientation:"bottom"},i.a.createElement(jt.c,{className:"p-classic_nav__model__button","aria-label":"Group calls","data-qa":"channel_header_calls_button",onClick:l},i.a.createElement(We.b,{type:"phone",className:"p-classic_nav__model__button__icon"})))};Cc.defaultProps={};var jc=Object(d.b)(e=>({featureCallButtonCoachEnabled:gc(e),clogger:Object(ne.a)({state:e}),team:Object(Se.d)(e)}),null)(Cc),Ec=a("rGr5"),kc=a("ENxx"),Sc=100,Ic={tooltip:void 0,tooltipContext:void 0,isVisible:!0,isDisabled:!1,callConfirmationStrings:null,startCall:r.a,shouldShowCoachmark:!1,isCallMenuEnabled:!1,member:void 0};class call_button_CallButton extends s.Component{constructor(e){super(e),Object(X.a)(this,["onClick","startCall","closeConfirmationModal"]),this.state={showConfirmation:!1}}onClick(e){var{appId:t}=e,{isDisabled:a}=this.props;a||(this.props.memberCount>=Sc?this.setState(()=>({showConfirmation:!0})):this.startCall({appId:t}))}closeConfirmationModal(){this.setState(()=>({showConfirmation:!1}))}startCall(e){var{appId:t}=e;this.props.startCall({appId:t}),this.closeConfirmationModal(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_CALL"}}})}maybeRenderConfirmationModal(){var{callConfirmationStrings:e}=this.props,{showConfirmation:t}=this.state;return t?i.a.createElement(mc.a,{closeModal:this.closeConfirmationModal,isOpen:this.state.showConfirmation,centered:!0},i.a.createElement(mc.h,null,i.a.createElement(mc.j,{title:e.title})),i.a.createElement(mc.d,null,i.a.createElement(mc.e,null,i.a.createElement("p",null,e.description))),i.a.createElement(mc.f,null,i.a.createElement(mc.g,null,i.a.createElement(mc.c,{type:"outline",onClick:this.closeConfirmationModal},e.cancel),i.a.createElement(jt.d,{type:"primary",onClick:this.startCall},e.confirm)))):null}render(){var{tooltip:e,tooltipContext:t,isVisible:a,isDisabled:n,featurePhoneIntegration:r,isCoachmarkExperimentEnabled:o,shouldShowCoachmark:c,isCallMenuEnabled:d,channelId:p,member:u}=this.props;if(!a)return null;var h,m=l()({"p-classic_nav__model__button":!0,"p-classic_nav__model__button--disabled":n}),b=r?i.a.createElement("div",null,i.a.createElement("div",null,e),!n&&i.a.createElement("div",{className:"p-classic_nav__model__button--tooltip"},t)):e,_=i.a.createElement(qe.c,{tip:b,position:"bottom"},i.a.createElement(jt.c,{onClick:d?null:this.onClick,className:m,"aria-label":e,"aria-disabled":n,"data-qa":"channel_header_calls_button"},i.a.createElement("div",{className:"display_flex"},i.a.createElement(We.b,{type:"phone",className:"p-classic_nav__model__button__icon"}))));return h=c&&o?i.a.createElement(jc,null):d&&!n?i.a.createElement(Ec.a,{channelId:p,member:u,onMenuItemSelected:this.onClick},_):_,i.a.createElement(s.Fragment,null,h,this.maybeRenderConfirmationModal())}}call_button_CallButton.defaultProps=Ic;var wc=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object($i.f)(e,n.id),s=Object(ps.a)(r,"counts.member_count")||0,i=Object(B.G)(n),o=Object(Ca.d)(e,i),c=Object(Fe.D)(o),l=Object(B.Y)(n),d=Object(kc.d)(e,l),p=Object(bc.b)(e);return{memberCount:s,tooltip:Object(Vs.c)(e,n),tooltipContext:Object(Vs.d)(e,n,c),isVisible:Object(Vs.f)(e,n),isDisabled:Object(Vs.e)(e,n),clogger:Object(ne.a)({state:e}),callConfirmationStrings:Object(Vs.b)(s),shouldShowCoachmark:Object(Vs.h)(e,n),isCoachmarkExperimentEnabled:gc(e),featurePhoneIntegration:p,memberPhoneNumber:c,isCallMenuEnabled:Object(kc.e)(p,d,c),member:o}},e=>({startCall:function(){e(Object(rs.d)(...arguments))}}))(call_button_CallButton),Tc=new x.b("classic_nav"),Nc={isActive:!1,lastChannelDetailsSection:null,featureClassicNav:!1,showDetails:r.a,closeFlexpane:r.a};class details_button_DetailsButton extends s.Component{constructor(e){super(e),Object(X.a)(this,["onClick","onKeyDown","renderTip","renderAriaLabel"])}onClick(){this.props.isActive?this.props.closeFlexpane():this.props.showDetails({sectionId:this.props.lastChannelDetailsSection||"info"}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_DETAILS"}}})}onKeyDown(e){if(e.keyCode===to.e)if(e.preventDefault(),this.props.isActive)this.props.closeFlexpane();else{var t=this.props.lastChannelDetailsSection||"info";this.props.showDetails({sectionId:t,focusKey:t})}}renderTip(){var{channelType:e,isActive:t,featureClassicNav:a}=this.props,n="channel"===e||"private"===e;return a?n&&t?Tc.t("Hide channel details"):n&&!t?Tc.t("View channel details"):!n&&t?Tc.t("Hide conversation details"):n||t?null:Tc.t("View conversation details"):null}renderAriaLabel(){var{channelType:e,channelName:t}=this.props;return"channel"===e||"private"===e?Tc.t("Show details for channel {channelName}",{channelName:t,fallbackHash:"f342e3d5c6b2ef68fd26370af67b8f6725a1ca43",fallbackHashNs:"client",note:"A label for the button in the Channel Header to show the details Flexpane for a channel. Not visible on screen as it is only for customers using screen readers."}):"im"===e?Tc.t("Show details for conversation with {memberName}",{memberName:t,fallbackHash:"d98f3774273f4ddf16d4c19acfc148750dbadbea",fallbackHashNs:"client",note:"A label for the button in the Channel Header to show the details Flexpane for an IM. Not visible on screen as it is only for customers using screen readers."}):"mpim"===e?Tc.t("Show details for conversation with {memberNames}",{memberNames:t,fallbackHash:"d98f3774273f4ddf16d4c19acfc148750dbadbea",fallbackHashNs:"client",note:"A label for the button in the Channel Header to show the details Flexpane for an MPIM. memberNames is a comma-delimited set of names. Not visible on screen as it is only for customers using screen readers."}):void 0}render(){var{isActive:e}=this.props,t=l()({"p-classic_nav__model__button":!0,"p-classic_nav__model__button--active":e});return i.a.createElement(qe.c,{position:"bottom",tip:this.renderTip(),delay:qe.a,hideFromScreenReader:!0},i.a.createElement(jt.c,{className:t,onClick:this.onClick,onKeyDown:this.onKeyDown,"aria-label":this.renderAriaLabel(),"aria-expanded":e},i.a.createElement(We.b,{type:"info-circle",className:"p-classic_nav__model__button__icon"})))}}details_button_DetailsButton.defaultProps=Nc;var Pc=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object(B.w)(e,n,{publicChannelIncludeHashSign:!1});return{channelType:Object(B.u)(n),isActive:"details"===Object(y.j)(e),lastChannelDetailsSection:Object(y.b)(e),channelName:r,featureClassicNav:Object(h.m)(e,"feature_classic_nav"),clogger:Object(ne.a)({state:e})}},e=>({showDetails:function(){return e(Object(Ie.e)(...arguments))},closeFlexpane:function(){return e(Object(Ie.a)(...arguments))}}))(details_button_DetailsButton),Ac=a("ANjH"),Mc=a("1zbP"),xc=a("8Mhq"),Rc=a("u2vH"),Dc=a("EOYu"),Fc=a("tBeP");function Lc(e,t){var a=Object(L.e)(e,t);if(!e||!a)return null;var n=Object(B.G)(a),r=Object(Ca.d)(e,n),s=Object(Fe.q)(r),i=Object(Ca.b)(e),o=Object(Se.d)(e),c=Object(Dc.c)(e,{serviceId:s,memberId:n});if(Object(Mc.d)(c)||!Object(Mc.b)(c))return null;var l=Object(Rc.j)(c),d=Object(Rc.s)(c),p=Object(Rc.B)(c),u=Object(Rc.k)(c),m=Object(Rc.p)(c),b="slack"===d,_=l!==o.id,g=!p||_||Object(Fe.Gb)(i),f=!g,v=!g,O=Object(h.m)(e,"feature_all_dm_mute_bots"),y=Object(Rc.L)(e,c),C=!!u,j=Object(Rc.K)(e,c),E=!!m,k=!E&&b;return Object(Ks.a)({addApp:f,viewFiles:v,featureAllDmMuteBots:O,settings:y,homepage:C,viewInAppDirectory:j,support:E,slackSupport:k},e=>!!e)}a("CDdZ");function Uc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Bc=new x.b("app_items"),Hc={onMenuItemSelected:r.a,openAppManagementModal:r.a,openInviteMemberToChannelDialog:r.a,muteChannelById:r.a,unmuteChannelById:r.a,openModal:r.a,showFileList:r.a,actions:void 0,featureClassicNav:!1};class app_menu_AppMenu extends s.Component{constructor(e){super(e),this.getItems=this.getItems.bind(this),this.clogClick=this.clogClick.bind(this)}getItems(){var{teamUrl:e,appProfile:t,memberId:a,botId:n,channelId:r,isMuted:s,clogger:o,featureClassicNav:c,actions:l,onMenuItemSelected:d,settingsUrl:p}=this.props;if(!l||!c)return[];var u=Object(Rc.l)(t),h=Object(Rc.s)(t),m=Object(Rc.k)(t),b=Object(Rc.p)(t);return[{label:Bc.t("Add this app to a channel\u2026"),show:l.addApp,key:"addApp",click:()=>this.props.openInviteMemberToChannelDialog({memberId:a}),dataQa:"app_menu_add_app_to_channel"},{label:Bc.t("View files shared by this app"),show:l.viewFiles,key:"viewFiles",click:()=>this.props.showFileList({user:a}),dataQa:"app_menu_files_shared_by_app"},{type:"separator",key:"separator-1"},{label:s?Bc.t("Unmute this app"):Bc.t("Mute this app"),show:l.featureAllDmMuteBots,key:"muteApp",click:()=>{s?this.props.unmuteChannelById(r):this.props.muteChannelById(r)},dataQa:"app_menu_mute_app"},{label:Bc.t("Settings"),show:l.settings,key:"settings",href:p,click:e=>{var t={action:"CLICK",ui_element:"LINK_APP_SETTINGS"};o.track("CHANNEL_SETTINGS",{contexts:{ui_context:t}}),"xoxa"===h&&(e.preventDefault(),this.props.openAppManagementModal({serviceId:n,referringEventId:"CHANNEL_SETTINGS",referringUiContext:t}))},dataQa:"app_menu_settings"},{label:Bc.t("App Homepage"),show:l.homepage,key:"homepage",href:m,click:()=>{o.track("APP_CLICK_LINK_APP_HOMEPAGE_IN_CHANNEL_SETTINGS",{contexts:{ui_context:{step:"channel_settings",action:"click",ui_element:"link_app_homepage"}}})},dataQa:"app_menu_homepage"},{label:Bc.t("View in App Directory"),show:l.viewInAppDirectory,key:"viewInAppDirectory",href:"".concat(e,"apps/").concat(u,"?utm_source=in-prod&utm_medium=inprod-link_app_directory-channel_settings-click"),click:()=>{o.track("APP_CLICK_LINK_APP_DIRECTORY_IN_CHANNEL_SETTINGS",{contexts:{ui_context:{step:"channel_settings",action:"click",ui_element:"link_app_directory"}}})},dataQa:"app_menu_view_app_directory"},{label:Bc.t("Support for this app"),show:l.support,key:"support",href:b,dataQa:"app_menu_support"},{label:Bc.t("Support for this app"),show:l.slackSupport,key:"slackSupport",click:()=>this.props.openModal({element:i.a.createElement(xc.a,{trigger:"app_support_profile_button"})}),dataQa:"app_menu_support"}].filter(e=>e&&(e.show||"separator"===e.type)).map((e,t)=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Uc(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Uc(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({},e,{click:a=>(this.clogClick(),d(t,a),e.click?e.click(a):void 0)}))}clogClick(){var{appProfile:e,botId:t,clogger:a}=this.props,{app_id:n}=e;a.track(ie.EventId.USER_CARD_CLICK,{app_id:n,bot_id:t})}render(){var{appProfile:e}=this.props;if(Object(Mc.d)(e))return i.a.createElement(Be.f,{menuClassNames:"p-app_menu--loading"},i.a.createElement(Oc.a,null));if(!Object(Mc.b)(e))return null;var t=this.getItems();return t.length?i.a.createElement(Be.a,{template:t,stripTerminalSeparators:!0}):null}}app_menu_AppMenu.defaultProps=Hc;var Wc=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object(B.G)(n),s=Object(Ca.d)(e,r),i=Object(Fe.q)(s),o=Object(u.b)(e),c=Object(Se.i)(e,o),l=Object(Dc.b)(e,a),d=Object(Rc.y)(e,l),p=Object(h.m)(e,"feature_all_dm_mute_bots")&&Object(xr.c)(e,a);return{actions:Lc(e,a),teamUrl:Object(we.n)(c),appProfile:l,memberId:r,botId:i,channelId:a,isMuted:p,settingsUrl:d,clogger:Object(ne.a)({state:e}),featureClassicNav:Object(h.m)(e,"feature_classic_nav")}},e=>Object(Ac.b)({openAppManagementModal:Fc.a,openInviteMemberToChannelDialog:Ns.a,openModal:Ua.e,showFileList:Ie.g,muteChannelById:Zr.a,unmuteChannelById:Zr.b},e))(app_menu_AppMenu),qc=new x.b("classic_nav");class actions_button_ActionsButton extends s.Component{constructor(e){super(e),Object(X.a)(this,["renderMenu","onTriggerClick","renderAriaLabel"])}onTriggerClick(){this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_SETTINGS"}}})}renderMenu(e){return this.props.hasAppMenu?i.a.createElement(Wc,Object(n.a)({},e,{channelId:this.props.channelId})):i.a.createElement($s,Object(n.a)({},e,{channelId:this.props.channelId}))}renderAriaLabel(){var{channelType:e,channelName:t}=this.props;return"channel"===e||"private"===e?qc.t("Settings for channel {channelName}",{channelName:t,fallbackHash:"eb2e450637aca7e07bbb3574966b72549c2b533b",note:"A label for the button in the Channel Header to show the settings menu for a channel. Not visible on screen as it is only for customers using screen readers."}):"im"===e?qc.t("Settings for conversation with {memberName}",{memberName:t,fallbackHash:"575f3f99f1b5afc989da1de8ca14e234f55e7ede",note:"A label for the button in the Channel Header to show the settings menu for an IM. Not visible on screen as it is only for customers using screen readers."}):"mpim"===e?qc.t("Settings for conversation with {memberNames}",{memberNames:t,fallbackHash:"575f3f99f1b5afc989da1de8ca14e234f55e7ede",note:"A label for the button in the Channel Header to show the settings menu for an MPIM. memberNames is a comma-delimited set of names.  Not visible on screen as it is only for customers using screen readers."}):void 0}render(){var{featureClassicNav:e,isChannel:t,tooltipPosition:a}=this.props,n=t?qc.t("Channel settings"):qc.t("Conversation settings");return e?i.a.createElement(Be.e,{renderMenu:this.renderMenu,position:"bottom-right",onClick:this.onTriggerClick},i.a.createElement(qe.c,{position:a,tip:n,hideFromScreenReader:!0},i.a.createElement(jt.c,{className:"p-classic_nav__model__button","data-qa":"channel_header_settings_button","aria-label":this.renderAriaLabel()},i.a.createElement(We.b,{type:"cog-o",className:"p-classic_nav__model__button__icon"})))):null}}actions_button_ActionsButton.defaultProps={featureClassicNav:!1,isChannel:!1,tooltipPosition:"bottom"};var Gc=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object(B.w)(e,n,{publicChannelIncludeHashSign:!1});return{channelType:Object(B.u)(n),channelName:r,hasAppMenu:Object(B.kb)(e,a),featureClassicNav:Object(h.m)(e,"feature_classic_nav"),clogger:Object(ne.a)({state:e})}})(actions_button_ActionsButton),Kc=new x.b("classic_nav"),Vc=e=>{var{title:t,buttons:a,isChannelAvailable:n,className:r,featureChannelHeaderLabels:s}=e,o=l()(r,"p-classic_nav__model_header",{"p-classic_nav__model__title__name__unavailable__channel":!n}),c=s?"group":void 0,d=s?Kc.t("{channelName} options",{channelName:e["aria-label"],note:"Label for the Channel Header as a section. Not visible on screen as it is only for customers using screen readers."}):void 0;return i.a.createElement("div",{className:o,role:c,"aria-label":d},i.a.createElement("div",{"data-qa":"channel_header__title",className:"p-classic_nav__model__title"},t),a&&i.a.createElement("div",{"data-qa":"channel_header__buttons",className:"p-classic_nav__model__buttons p-classic_nav__no_drag"},a))};Vc.defaultProps={className:"",buttons:void 0,featureChannelHeaderLabels:!1};var zc=Vc,Yc=e=>{var{channelId:t,isUnknown:a,isChannelAvailable:n,className:r,useTabsHeaderVariant:o,featureChannelHeaderLabels:c,channelName:d}=e;if(a)return i.a.createElement("div",{className:r});var p=l()(r,{"p-classic_nav__model_header--tabs_header":o});return i.a.createElement(zc,{className:p,isChannelAvailable:n,title:i.a.createElement(s.Fragment,null,o&&i.a.createElement(Ar,{channelId:t}),i.a.createElement(ai,{channelId:t}),o&&i.a.createElement(Zi,{channelId:t}),n&&i.a.createElement(Bo,{channelId:t})),buttons:n&&i.a.createElement(s.Fragment,null,i.a.createElement(hc,{channelId:t}),i.a.createElement(wc,{channelId:t}),i.a.createElement(Pc,{channelId:t}),i.a.createElement(Gc,{channelId:t})),"aria-label":d,featureChannelHeaderLabels:c})};Yc.defaultProps={className:"",useTabsHeaderVariant:!1,channelName:void 0};var Qc=Object(d.b)(e=>{var t=Object(_.a)(e),a=Object(L.e)(e,t),n=Object(B.w)(e,a,{publicChannelIncludeHashSign:!1});return{channelId:t,isUnknown:!a,isChannelAvailable:!Object(B.Lb)(e,a),useTabsHeaderVariant:Object(P.f)(e),featureChannelHeaderLabels:Object(h.m)(e,"feature_channel_header_labels"),channelName:n}})(Yc),Xc=(e,t)=>Object($o.g)(e)&&Object(B.kb)(e,t),Jc=a("ukeO"),Zc={className:"",appObj:void 0};class app_im_header_AppImHeader extends s.Component{renderAppHomeHeader(e,t){var{channelId:a,memberId:n,isChannelAvailable:r,appObj:o}=this.props;return i.a.createElement(s.Fragment,null,i.a.createElement(Jc.a,{size:36,ariaHidden:!0,image:o?Object(Zo.b)(o,72):null}),i.a.createElement("div",{className:"p-classic_nav_name_star","data-qa":"new_style_header"},i.a.createElement(Wr.a,{id:n,className:"p-classic_nav_member_name"}),r&&i.a.createElement(Zi,{channelId:a,key:"star",omitSeparator:!0}),t))}render(){var{channelId:e,isChannelAvailable:t,isMuted:a,className:n,appName:r}=this.props,o=t?"padding_left_50":"",c=a?i.a.createElement(as,{channelId:e}):null,d=l()("p-classic_nav__no_drag","p-classic_nav__model__title__name",{"p-classic_nav__model__title__name--dim":a});return i.a.createElement(zc,{className:l()(n,"p-classic_app_home_header"),isChannelAvailable:t,title:i.a.createElement(s.Fragment,null,i.a.createElement("div",{className:d},this.renderAppHomeHeader(o,c))),buttons:t&&i.a.createElement(s.Fragment,null,i.a.createElement(Pc,{channelId:e}),i.a.createElement(Gc,{channelId:e})),"aria-label":r})}}app_im_header_AppImHeader.defaultProps=Zc;var $c=Object(d.b)(e=>{var t=Object(_.a)(e),a=Object(L.e)(e,t),n=Object(h.m)(e,"feature_all_dm_mute_bots")&&Object(xr.c)(e,t),r=Xc(e,t),{appId:s}=Object(U.b)(e),i=Object(Dc.b)(e,t),o=Object(Rc.m)(i);return{channelId:t,memberId:Object(B.G)(a)||void 0,isChannelAvailable:!Object(B.Lb)(e,a),appObj:r&&s?Object($o.e)(e,s):void 0,isMuted:n,appName:o}})(app_im_header_AppImHeader),el=e=>{var{appObj:t,className:a}=e,n=l()("p-classic_nav__no_drag","p-classic_nav__model__title__name");return i.a.createElement(zc,{className:l()(a,"p-classic_app_home_header"),isChannelAvailable:!0,title:t?i.a.createElement("div",{className:n},i.a.createElement(Jc.a,{size:36,ariaHidden:!0,image:t?Object(Zo.b)(t,72):null}),i.a.createElement("div",{className:"p-classic_nav_name_star","data-qa":"new_style_header"},i.a.createElement("p",{className:"p-classic_nav_member_name padding_left_50"},t&&t.name))):null,"aria-label":t&&t.name})};el.defaultProps={className:"",appObj:void 0};var tl=Object(d.b)(e=>{return{appObj:Object($o.e)(e,Object(_.a)(e))}})(el),al=a("r5Q4"),nl=new x.b("classic_nav"),rl=e=>{var{totalUnreadReplies:t,className:a,featureClassicNav:n}=e;if(!n)return null;var r=l()("p-classic_nav__channel_header__title","p-classic_nav__no_drag"),s=null;return Object(ci.a)(t)&&(s=nl.t("{totalUnreadReplies, plural, =0 {No new replies} =1 {# new reply} other {# new replies}}",{totalUnreadReplies:t})),i.a.createElement("div",{className:a},i.a.createElement("span",{className:r},nl.t("Threads")),i.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},s))};rl.defaultProps={totalUnreadReplies:void 0,className:void 0,featureClassicNav:!1};var sl=Object(d.b)(e=>({totalUnreadReplies:Object(al.k)(e),featureClassicNav:Object(h.m)(e,"feature_classic_nav")}))(rl),il=a("a9fl"),ol=a("wumb"),cl=e=>{var{id:t,className:a,legacy:n}=e;if(!t)return null;var r=Object(Y.a)(t);if(r.header)return r.header({className:a});var s=l()("p-classic_nav__page_header",{"p-classic_nav__page_header--legacy":n},a);return i.a.createElement("div",{className:s},i.a.createElement("div",{className:"p-classic_nav__channel_header__title"},r.label()),i.a.createElement(ol.a,{regionId:"main",flex:!0}))};cl.defaultProps={className:void 0,legacy:!1};var ll=cl,dl=a("5tH5"),pl=a("+Sjy"),ul="EMPTY",hl="ALL_THREADS",ml="ALL_UNREADS",bl="PAGE",_l="APP_IM",gl="UTA_HOME",fl="DEFAULT",vl=[{type:ul,isShowing:e=>!e},{type:hl,isShowing:e=>e===dl.a.allThreads},{type:ml,isShowing:e=>e===dl.a.allUnreads},{type:bl,isShowing:(e,t)=>Object(pl.e)(t,e)},{type:_l,isShowing:(e,t)=>Xc(t,e)&&!Object(P.f)(t)},{type:gl,isShowing:(e,t)=>Object(b.a)(e)&&Object(C.b)(t)}],Ol=e=>{var t=Object(_.a)(e),a=vl.find(a=>a.isShowing(t,e));return a?a.type:fl},yl=(a("c7HH"),e=>{var{primaryView:t,headerType:a,isWindowFrameless:n}=e,r=l()({"p-classic_nav__channel_header":!0,"p-classic_nav__channel_header--frameless":n,"p-classic_nav__drag":n});switch(a){case ul:return i.a.createElement("div",{className:r});case hl:return i.a.createElement(sl,{className:r});case ml:return i.a.createElement(il.a,{className:r});case bl:return i.a.createElement(ll,{id:t,className:r});case _l:return i.a.createElement($c,{className:r});case gl:return i.a.createElement(tl,{className:r});default:return i.a.createElement(Qc,{className:r})}});yl.defaultProps={primaryView:void 0,headerType:void 0,isWindowFrameless:!1};var Cl=Object(d.b)(e=>({primaryView:Object(_.a)(e),headerType:Ol(e),isWindowFrameless:Object(E.l)(e)}))(yl),jl=a("5dgH"),El=a("1tsX"),kl=a("m5Fn"),Sl=(a("4F1B"),new x.b("app_launcher"));class app_launcher_right_menu_actions_AppLauncherActions extends s.Component{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this),this.clogAppDirectory=this.clogAppDirectory.bind(this),this.onMenuTriggerClick=this.onMenuTriggerClick.bind(this),this.onMenuTriggerClose=this.onMenuTriggerClose.bind(this),this.state={isMenuOpen:!1}}onMenuTriggerClick(){this.setState(()=>({isMenuOpen:!0}))}onMenuTriggerClose(){this.setState(()=>({isMenuOpen:!1}))}clogAppDirectory(){this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"LINK_APP_DIRECTORY"}}})}renderMenu(e){var t=[{label:Sl.t("Manage Apps",{fallbackHash:"5b7111cdde14815bb325dae16d169cfdefda6165"}),key:"manageApps",href:"".concat(this.props.teamUrl,"apps/manage"),dataQa:"app_launcher_header__manage_apps_link",click:()=>{this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_element:"LINK_MANAGE_APPS"}}})}}];return i.a.createElement(Be.a,Object(n.a)({},e,{template:t,stripTerminalSeparators:!0,"data-qa":"app_launcher_menu"}))}render(){if(!this.props.featureAppLauncher)return null;var e=l()("p-classic_nav__right__button","p-classic_nav__no_drag");return i.a.createElement("div",{className:"p-app_launcher_actions"},i.a.createElement(fe.a,{href:"".concat(this.props.teamUrl,"apps"),className:"p-app_launcher_actions__link",onClick:this.clogAppDirectory,"data-qa":"app_launcher_header__more_apps_link"},Sl.t("Get more apps")),i.a.createElement(Be.e,{position:"bottom-right",renderMenu:this.renderMenu,allowanceX:8,onClick:this.onMenuTriggerClick,onClose:this.onMenuTriggerClose},i.a.createElement(qe.c,{tip:Sl.t("App Menu"),position:"bottom-right",hideFromScreenReader:!0},i.a.createElement(jt.c,{className:e,"aria-label":Sl.t("App Menu"),"data-qa":"app_launcher_menu_trigger","aria-expanded":this.state.isMenuOpen},i.a.createElement(We.b,{type:"cog-o"})))))}}app_launcher_right_menu_actions_AppLauncherActions.defaultProps={featureAppLauncher:!1,teamUrl:"my"};var Il=Object(d.b)(e=>({featureAppLauncher:Object(El.a)(e),teamUrl:Object(we.n)(Object(Se.d)(e)),clogger:Object(ne.a)({state:e})}))(app_launcher_right_menu_actions_AppLauncherActions),wl=a("Go8C"),Tl=a("iH/p"),Nl=a("7ARk"),Pl=a("fdJE"),Al=a("ckF6"),Ml=new x.b("search"),xl={query:void 0,featureClassicNav:!1,featureComposeFlow:!1,isIAP1Enabled:!1,plainTextQuery:void 0,showKeyboardShortcut:!1,clientTheme:"light",openFromClick:r.a,clearSearchInput:r.a};class search_input_SearchInput extends s.Component{constructor(e){super(e),this.clearSearchRef=i.a.createRef(),this.onClick=this.onClick.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClearClick=this.onClearClick.bind(this)}onClick(){this.props.openFromClick(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_SEARCH"}}})}onMouseDown(e){2===e.nativeEvent.which&&(this.props.openFromClick(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_SEARCH"}}}))}onClearClick(e){e.preventDefault(),e.stopPropagation();var t=Object(Al.a)();t&&t.focus(),this.props.clearSearchInput()}renderQueryText(){var{query:e}=this.props;return i.a.createElement(Kr.a,{text:e,customLineEnding:" ",showTooltips:!1,noLinking:!0,noSpecials:!0,noHighlights:!0,noJumbomoji:!0})}renderSmallButton(){var{query:e,plainTextQuery:t,showKeyboardShortcut:a,featureClassicNav:n}=this.props;if(!n)return null;var r=l()({"p-classic_nav__right__button":!0,"p-classic_nav__right__button--search_small":!0,"p-classic_nav__no_drag":!0}),o=a&&i.a.createElement("div",{className:"c-tooltip__tip_shortcut"},Object(ve.q)()?"\u2318G":"Ctrl+G");return i.a.createElement(s.Fragment,null,i.a.createElement("div",{className:"p-classic_nav__search_small_divider"}),i.a.createElement(qe.c,{position:"bottom",tip:()=>e?Ml.rt("Search: {query}",{query:this.renderQueryText()}):i.a.createElement(s.Fragment,null,Ml.t("Search"),o)},i.a.createElement(jt.c,{className:r,onClick:this.onClick,"data-qa":"legacy_search_header","aria-label":e?Ml.t("Search: {query}",{query:t}):Ml.t("Search")},i.a.createElement(We.b,{type:"search"}))))}render(){var{query:e,plainTextQuery:t,featureClassicNav:a,clientTheme:n,featureComposeFlow:r,isIAP1Enabled:o}=this.props;if(!a)return null;var c=e?i.a.createElement(s.Fragment,null,i.a.createElement("div",{className:"p-classic_nav__right__search__text","aria-label":Ml.t("Search: {query}",{query:t})},this.renderQueryText())):i.a.createElement("span",{className:"p-classic_nav__right__search__placeholder"},Ml.t("Search"));return i.a.createElement("div",{className:"p-classic_nav__right__search__input"},i.a.createElement(jt.c,{onClick:this.onClick,onMouseDown:this.onMouseDown,"aria-label":Ml.t("Search"),"data-qa":"legacy_search_header",className:l()("p-classic_nav__right__search","p-classic_nav__no_drag",{["p-classic_nav__right__search--".concat(n)]:"light"!==n})},i.a.createElement(We.b,{className:"p-classic_nav__right__search__icon",type:"search",size:"inherit",inline:!0}),c),e?i.a.createElement(jt.c,{className:"p-classic_nav__right__search__clear",onClick:this.onClearClick,"aria-label":Ml.t("Clear search field"),ref:this.clearSearchRef},i.a.createElement(We.b,{type:"times-small",inline:!0})):null,this.renderSmallButton(),!o&&!r&&i.a.createElement(kl.a,null))}}search_input_SearchInput.defaultProps=xl;var Rl=Object(d.b)(e=>{var t=Object(wl.b)(e),a=Ia.W||Object(Ke.k)(e,"f_key_search");return{query:t,featureClassicNav:Object(h.m)(e,"feature_classic_nav"),featureComposeFlow:Object(O.g)(e),isIAP1Enabled:Object(Rr.d)(e),plainTextQuery:t?Object(Pl.a)(e,t):void 0,showKeyboardShortcut:a,clientTheme:Object(A.c)(e),clogger:Object(ne.a)({state:e})}},e=>({openFromClick:function(){return e(Object(Tl.c)(...arguments))},clearSearchInput:function(){return e(Object(Nl.a)(...arguments))}}))(search_input_SearchInput),Dl=a("Vs2R"),Fl=a("TOkS"),Ll=a("Fsnq"),Ul=new x.b("classic_nav"),Bl=e=>{var{userName:t,channelName:a,isDirectMessage:n,otherUsers:r,featureClassicNav:o}=e;if(!o)return null;var c=Object(Ll.a)(r),l=0===c?t:Ul.t("{userName} and {numOthers,plural,=1{# other}other{# others}}",{userName:t,numOthers:c}),d=n?Ul.t("Direct Message"):a;return i.a.createElement(s.Fragment,null,l,i.a.createElement("span",{className:"p-classic_nav__tip_sub"},d))};Bl.defaultProps={userName:void 0,channelName:void 0,isDirectMessage:!1,otherUsers:void 0,featureClassicNav:!1};var Hl=Object(d.b)((e,t)=>{var{userId:a,channelId:n}=t,r=Object(L.e)(e,n),s=Object(B.w)(e,r);return{userName:Object(Fe.W)(e,a),channelName:s,isDirectMessage:Object(B.hb)(r),featureClassicNav:Object(h.m)(e,"feature_classic_nav")}})(Bl);function Wl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ql(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wl(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wl(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Gl=3e3,Kl=400,Vl="REACTIONS_TOAST",zl=new x.b("classic_nav"),Yl={currentToast:void 0,isActive:!1,stopAnimations:!1,featureClassicNav:!1,toggleActivityFlexpane:r.a,shiftToast:r.a};class base_activity_button_BaseActivityButton extends s.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.state={waiting:!1}}componentDidMount(){this.props.currentToast&&this.props.currentToast.emoji&&this.startToastTimer()}componentDidUpdate(e,t){var a=e.currentToast&&e.currentToast.emoji,n=this.props.currentToast&&this.props.currentToast.emoji;n&&n!==a&&this.startToastTimer(),this.state.waiting&&!t.waiting&&this.startWaitTimer()}componentWillUnmount(){this.props.shiftToast(),this.toastTimer&&clearTimeout(this.toastTimer),this.waitTimer&&clearTimeout(this.waitTimer)}onClick(){this.props.toggleActivityFlexpane(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_FLEX_ACTIVITY"}}})}onKeyDown(e){e.keyCode===to.e&&(e.preventDefault(),this.props.toggleActivityFlexpane({focusKey:"activity"}))}startToastTimer(){var{logger:e}=this.props;e.info(Vl,"Got next reaction, toasting"),this.toastTimer=setTimeout(()=>{e.debug(Vl,"Toasting done, starting wait period"),this.setState(e=>ql({},e,{waiting:!0}))},Gl)}startWaitTimer(){var{logger:e}=this.props;e.debug(Vl,"Entering wait period"),this.waitTimer=setTimeout(()=>{e.debug(Vl,"Wait period done, shifting toast"),this.setState(e=>ql({},e,{waiting:!1})),this.props.shiftToast()},Kl)}shouldShowToast(){return this.props.currentToast&&!this.state.waiting}renderTipText(){var{isActive:e}=this.props;return e?zl.t("Hide Activity"):zl.t("Show Activity")}renderTip(){var{currentToast:e,featureClassicNav:t}=this.props;if(!t)return null;if(this.shouldShowToast())return i.a.createElement(Hl,e);var a=this.renderTipText(),n=!(Fa.a.chrome&&!Ia.W)&&i.a.createElement("div",{className:"c-tooltip__tip_shortcut"},Object(ve.q)()?"\u2318\u21e7M":"Ctrl+Shift+M");return i.a.createElement(s.Fragment,null,a,n)}render(){var{currentToast:e,isActive:t,stopAnimations:a}=this.props,n=this.shouldShowToast()&&i.a.createElement(Vr.b,{text:":".concat(e.emoji,":"),emojiSize:Vr.a.LARGE,className:"p-classic_nav__right__activity__toast"}),r=this.renderTip(),s=l()("p-classic_nav__right__activity__container",{"p-classic_nav__right__activity__container--no_animation":a}),o=l()({"p-classic_nav__right__button":!0,"p-classic_nav__right__button--activity":!0,"p-classic_nav__right__button--active":t,"p-classic_nav__right__activity":!0,"p-classic_nav__right__activity--toasting":this.shouldShowToast(),"p-classic_nav__no_drag":!0}),c=zl.t("Show Activity");return i.a.createElement("div",{className:s},i.a.createElement(qe.c,{position:"bottom-right",tip:r,hideFromScreenReader:!0},i.a.createElement(jt.c,{className:o,onClick:this.onClick,"aria-label":c,"aria-expanded":t,onKeyDown:this.onKeyDown},i.a.createElement(We.b,{type:"mentions",className:"p-classic_nav__right__activity__icon"}))),n)}}base_activity_button_BaseActivityButton.defaultProps=Yl;var Ql=Object(d.b)(e=>({isActive:"activity"===Object(y.j)(e),featureClassicNav:Object(h.m)(e,"feature_classic_nav"),stopAnimations:!Object(Ke.k)(e,"a11y_animations"),logger:Object(Wa.a)({state:e}),clogger:Object(ne.a)({state:e})}),e=>({toggleActivityFlexpane:function(){return e(Object(Ie.q)(...arguments))},shiftToast:function(){return e(Object(Dl.e)(...arguments))}}))(base_activity_button_BaseActivityButton);var Xl=Object(d.b)(e=>({teamId:Object(u.b)(e)}))(class activity_button_ActivityButton extends s.Component{renderButton(e){var t=Object(Dl.c)(e);return i.a.createElement(Ql,{currentToast:t})}render(){var e=Object(p.getStoreInstanceByTeamId)(this.props.teamId);return i.a.createElement(Fl.a,{store:e,render:this.renderButton})}}),Jl=new x.b("classic_nav"),Zl={isActive:!1,showStarredItemsList:r.a,closeFlexpane:r.a};class stars_button_StarsButton extends s.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}onClick(){this.showDetails(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_FLEX_STARS"}}})}onKeyDown(e){e.keyCode===to.e&&(e.preventDefault(),this.showDetails({focusKey:"stars"}))}showDetails(){var{focusKey:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props.isActive?this.props.closeFlexpane():this.props.showStarredItemsList({focusKey:e})}render(){var{isActive:e}=this.props,t=e?Jl.t("Hide Starred Items"):Jl.t("Show Starred Items"),a=Jl.t("Show Starred Items"),n=i.a.createElement(s.Fragment,null,t,i.a.createElement("div",{className:"c-tooltip__tip_shortcut"},Object(ve.q)()?"\u2318\u21e7S":"Ctrl+Shift+S")),r=l()({"p-classic_nav__right__button":!0,"p-classic_nav__right__button--stars":!0,"p-classic_nav__right__button--active":e,"p-classic_nav__no_drag":!0});return i.a.createElement(qe.c,{position:"bottom-right",tip:n,hideFromScreenReader:!0},i.a.createElement(jt.c,{className:r,onClick:this.onClick,"aria-label":a,"aria-expanded":e,onKeyDown:this.onKeyDown},i.a.createElement(We.b,{type:"star-o"})))}}stars_button_StarsButton.defaultProps=Zl;var $l=Object(d.b)(e=>({isActive:"starred_items"===Object(y.j)(e),clogger:Object(ne.a)({state:e})}),e=>({showStarredItemsList:function(){return e(Object(Ie.k)(...arguments))},closeFlexpane:function(){return e(Object(Ie.a)(...arguments))}}))(stars_button_StarsButton),ed=a("zmn3"),td=a("hbEN"),ad=a("qcAq"),nd=a("qSXi"),rd=a("HYPA"),sd=a("/X+W"),id=a("rtjy"),od=e=>({id:e.frecencyId,action:e}),cd=Object(xt.b)("Search global actions (shortcuts) in Redux store",function(e,t){var{query:a=""}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t(),{actions:r}=Object(rd.b)(n),s=[...r.map(nd.a)];return s=s.filter(e=>Object(nd.b)(e,Object(sd.a)(a))),s=(s=Object(id.e)(n,{query:a,list:s.map(od)})).map(e=>e.action)});cd.meta={name:"searchLocalGlobalActions",key:"actionsSearchShortcutsSearchLocalGlobalActions",description:"Search global actions (shortcuts) in Redux store"},cd.propTypes={query:o.default.string};var ld=Object(xt.b)("Search shortcuts, returns as Promise",(e,t,a)=>{var n=e(cd(a));return Promise.resolve(n)});ld.meta={name:"searchShortcuts",key:"actionsSearchShortcutsSearchShortcuts",description:"Search shortcuts, returns as Promise"},ld.propTypes=cd.propTypes;var dd=ld,pd=a("2/vs"),ud=a("cTBa"),hd=a("Rrdp"),md=a("yPgC"),bd=56,_d={className:"",pillarClassName:"",app:void 0};class shortcuts_dialog_item_ShortcutsDialogItem extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["renderEnter","renderIcon","renderIconMaybe"])}renderIcon(){var{action:e,app:t,defaultAppIcon:a}=this.props,n=t&&t.icons||e.iconSet;if(n){var r=bd,s=Object(Zo.b)({icons:n},r,a);return i.a.createElement("img",{alt:"",className:"p-shortcuts__icon",src:s})}return e.iconType?i.a.createElement(We.b,{type:e.iconType}):null}renderIconMaybe(e){return e?i.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},e):null}renderEnter(){var{className:e,pillarClassName:t}=this.props,a=l()(e,"c-menu_item__enter",{["".concat(t,"__enter")]:t});return i.a.createElement(We.a,{type:"enter",className:a,"data-qa":"menu_item_enter",role:"presentation"})}render(){var{action:e,app:t,className:a,pillarClassName:n}=this.props,r=l()(a,"c-menu_item__button","c-button-unstyled",{"c-menu_item__button--danger":e.danger,["".concat(n)]:n,["".concat(n,"--danger")]:e.danger&&n}),s=t&&t.name||e.description;return!s&&t&&(s=i.a.createElement(hd.a,{type:Object(Mc.d)(t)?"unknown":"non-existent"})),i.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},i.a.createElement("div",{className:r,"data-qa":e["data-qa"],key:e.id,id:e.id},this.renderIconMaybe(this.renderIcon()),i.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},e.label||e.name,i.a.createElement("div",{className:"c-menu_item__description"},s)),this.renderEnter()))}}shortcuts_dialog_item_ShortcutsDialogItem.defaultProps=_d;var gd=Object(d.b)((e,t)=>{var{action:a}=t;return{app:a&&a.appId&&Object($o.e)(e,a.appId),defaultAppIcon:Object($o.f)(e)}})(shortcuts_dialog_item_ShortcutsDialogItem),fd=(a("N391"),new x.b("shortcuts")),vd=64,Od={onClose:r.a};class shortcuts_dialog_ShortcutsDialog extends s.PureComponent{constructor(e){super(e),this.state={filterQuery:"",isLoading:!0,isError:!1,actions:[]},this.initClogged=!1,Object(X.a)(this,["onFilterUpdate","onSelectAction","renderSingleAction","handleSelectEvent","searchShortcuts"]),this.searchShortcutsDebounced=Object(td.a)(this.searchShortcuts,200,{leading:!0})}componentDidMount(){this.searchShortcutsDebounced()}componentDidUpdate(){this.initClogged||this.state.isLoading||this.state.isError||(this.initClogged=!0)}componentWillUnmount(){this.activePromise&&delete this.activePromise}onSelectAction(e,t){var{closeModal:a,handleShortcut:n}=this.props;a(),this.props.onClose&&this.props.onClose(e),n(t),this.props.recordShortcutFrecencyEvent({action:t,query:this.state.filterQuery})}onFilterUpdate(e){this.setState(()=>({filterQuery:e}),this.searchShortcutsDebounced)}searchShortcuts(){var e=this.props.searchShortcuts({query:this.state.filterQuery}).then(t=>{this.activePromise===e&&this.setState(()=>({actions:t,isError:!1,isLoading:!1}))}).catch(()=>{this.setState(()=>({isError:!0,isLoading:!1}))});this.activePromise=e}handleSelectEvent(e,t,a){this.onSelectAction(a,t.props.action)}renderTitle(e){return i.a.createElement("div",{className:"p-shortcuts_dialog__title","data-qa-shortcuts-dialog-title":!0},i.a.createElement("div",{className:"p-shortcuts_dialog__title_text"},e))}renderLoading(){return i.a.createElement("div",{className:"p-shortcuts_dialog__loader"},i.a.createElement(Oc.a,null))}renderSingleAction(e){return{label:i.a.createElement(gd,{key:e.id,pillarClassName:"p-shortcuts_dialog_option",action:e}),value:e.id}}renderSelect(){var{featureAppActionsGlobal:e}=this.props;if(!e)return null;var t=fd.t("Search shortcuts");return i.a.createElement(ud.b,{"data-qa":"shortcuts-dialog-list",isAlwaysOpen:!0,usePlaceholderOption:!1,autoSelectFirstOption:!0,focusInputOnMount:!0,placeholder:t,icon:"search",id:"p-shortcuts_dialog__select",className:"p-shortcuts_dialog__select",pillarClassName:"p-shortcuts_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(ed.a)(this.state.actions,this.renderSingleAction),optionsRowHeight:vd})}render(){var{isLoading:e}=this.state,{featureAppActionsGlobal:t}=this.props;if(!t)return null;var a=fd.t("Build your own!"),n=fd.t("Use a shortcut");return i.a.createElement(di.a,{contentLabel:n,className:"p-shortcuts_dialog",overlayClassName:"p-shortcuts_dialog__overlay",footerIcon:"external-link",footerLink:"/workflow-builder",footerText:a,goOnEnterPressed:!1,onCancel:this.props.onClose,showCloseButton:!1,showCancelButton:!1,showGoButton:!1,title:this.renderTitle(n),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:!1},e?this.renderLoading():this.renderSelect())}}shortcuts_dialog_ShortcutsDialog.defaultProps=Od;var yd=Object(d.b)(e=>({clogger:Object(ne.a)({state:e}),featureAppActionsGlobal:Object(h.m)(e,"feature_app_actions_global")}),e=>({closeModal:()=>e(Object(Ua.a)()),searchShortcuts:function(){return e(dd(...arguments))},recordShortcutFrecencyEvent:t=>e(Object(ad.a)(t)),handleShortcut:t=>e(Object(pd.b)({actionId:t.id,appId:t.appId}))}))(shortcuts_dialog_ShortcutsDialog),Cd=Object(xt.b)("Open app shortcuts dialog",e=>{var t=i.a.createElement(yd);e(Object(Ua.e)({element:t}))});Cd.meta={name:"browseShortcuts",key:"actionsBrowseShortcutsBrowseShortcuts",description:"Open app shortcuts dialog"};var jd=Cd,Ed=new x.b("classic_nav"),kd={featureClassicNav:!1,featureAppActionsGlobal:!1,browseShortcuts:r.a};class shortcuts_button_ShortcutsButton extends s.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){this.props.browseShortcuts()}render(){var{featureClassicNav:e,featureAppActionsGlobal:t}=this.props;if(!e||!t)return null;var a=Ed.t("Show Shortcuts"),n=l()("p-classic_nav__right__button","p-classic_nav__right__button--shortcuts","p-classic_nav__no_drag");return i.a.createElement(qe.c,{position:"bottom-right",tip:a},i.a.createElement(jt.c,{className:n,onClick:this.onClick},i.a.createElement(We.b,{type:"rocket"})))}}shortcuts_button_ShortcutsButton.defaultProps=kd;var Sd=Object(d.b)(e=>({featureClassicNav:Object(h.m)(e,"feature_classic_nav"),featureAppActionsGlobal:Object(h.m)(e,"feature_app_actions_global")}),e=>({browseShortcuts:function(){return e(jd(...arguments))}}))(shortcuts_button_ShortcutsButton),Id=a("M1FR"),wd=a("Ro9a"),Td=a("LWrH"),Nd=new x.b("classic_nav"),Pd={currentUserId:void 0,isEnterprise:!1,isUserRestricted:!1,isPaid:!1,helpTicketsCount:0,whatsNewCount:0,featureClassicNav:!1,featureCalendarSimpleAgendaView:!1,featureEmailWorkflow:!1,showFileList:r.a,showDownloads:r.a,showMemberDirectory:r.a,showUserGroupList:r.a,showWhatsNew:r.a,showKeyboardShortcuts:r.a,openHelpModal:r.a,openClaimedFromMenu:r.a,openCompletedFromMenu:o.default.func,showUserCalendar:r.a,keyboardLocale:null};class flexpanes_menu_FlexpanesMenu extends s.Component{constructor(e){super(e),this.onMenuItemSelected=this.onMenuItemSelected.bind(this)}onMenuItemSelected(e,t){var{menuProps:a,clogger:n}=this.props;a&&a.onMenuItemSelected&&a.onMenuItemSelected(e,t);var r=this.items&&this.items[e];r&&r.key&&n.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_FLEX_MENU_ITEM"}},label:r.key})}render(){var{menuProps:e,currentUserId:t,isEnterprise:a,isUserRestricted:r,isPaid:s,helpTicketsCount:o,whatsNewCount:c,featureClassicNav:l,featureCalendarSimpleAgendaView:d,featureEmailWorkflow:p,keyboardLocale:u}=this.props;if(!l)return null;var h=Object(x.j)("/",{kb:u}),m=[{key:"calendar",label:Nd.t("Your calendar"),icon:i.a.createElement(We.b,{type:"all-files-alt"}),click:this.props.showUserCalendar,show:d},{key:"files",label:Nd.t("Files"),icon:i.a.createElement(We.b,{type:"all-files-alt"}),click:e=>this.props.showFileList({focusKey:e&&"keydown"===e.type?"files":null,user:t}),show:!0},{key:"claimed",label:p?Nd.t("Claimed"):"",icon:i.a.createElement(We.b,{type:"emoji-objects"}),click:this.props.openClaimedFromMenu,show:p},{key:"completed",label:p?Nd.t("Completed"):"",icon:i.a.createElement(We.b,{type:"check-square-o"}),click:this.props.openCompletedFromMenu,show:p},{key:"downloads",label:Nd.t("Downloads"),icon:i.a.createElement(We.b,{type:"cloud-download"}),click:e=>this.props.showDownloads({focusKey:e&&"keydown"===e.type?"downloads":null}),show:Ia.W},{type:"separator",show:!0},{key:"team-directory",label:a?Nd.t("Organization Directory"):Nd.t("Workspace Directory"),icon:i.a.createElement(We.b,{type:"team-directory"}),shortcut:!Fa.a.firefox&&(Object(ve.q)()?"\u2318\u21e7E":"Ctrl+Shift+E"),click:this.props.showMemberDirectory,show:!0},{key:"user-groups",label:Nd.t("User Groups"),icon:i.a.createElement(We.b,{type:"user-groups"}),click:()=>this.props.showUserGroupList(),show:!r&&s},{type:"separator",show:!0},{key:"whats-new",label:Nd.t("What\u2019s New"),icon:i.a.createElement(We.b,{type:"emoji-celebration"}),click:e=>this.props.showWhatsNew({focusKey:e&&"keydown"===e.type?"whats_new":null}),show:!0,badgeCount:c,dataQa:"whats_new_menu_item"},{key:"keyboard-shortcuts",label:Nd.t("Keyboard Shortcuts"),icon:i.a.createElement(We.b,{type:"keyboard"}),shortcut:Object(ve.q)()?"\u2318".concat(h):"Ctrl+".concat(h),click:e=>this.props.showKeyboardShortcuts({focusKey:e&&"keydown"===e.type?"keyboard_shortcuts":null}),show:!0},{key:"help",label:Nd.t("Help"),icon:i.a.createElement(We.b,{type:"question-circle"}),click:()=>this.props.openHelpModal({trigger:"flex_menu"}),show:!0,badgeCount:o,dataQa:"help_center_menu_item"}].filter(e=>e.show);return this.items=m,i.a.createElement(Be.a,Object(n.a)({},e,{onMenuItemSelected:this.onMenuItemSelected,menuClassNames:"p-classic_nav__right__flexpanes_menu",template:m,stripTerminalSeparators:!0,width:Object(ve.q)()?void 0:360}))}}flexpanes_menu_FlexpanesMenu.defaultProps=Pd;var Ad=Object(d.b)(e=>({currentUserId:Object(h.d)(e),isEnterprise:Object(h.q)(e),isUserRestricted:Object(Fe.Gb)(Object(Ca.b)(e)),isPaid:Object(we.D)(Object(Se.d)(e)),helpTicketsCount:Object(Id.d)(e),whatsNewCount:Object(jl.e)(e),featureClassicNav:Object(h.m)(e,"feature_classic_nav"),featureCalendarSimpleAgendaView:Object(h.m)(e,"feature_calendar_simple_agenda_view"),featureEmailWorkflow:Object(wd.a)(e),clogger:Object(ne.a)({state:e})}),e=>({showFileList:function(){return e(Object(Ie.g)(...arguments))},showDownloads:function(){return e(Object(Ie.f)(...arguments))},showMemberDirectory:function(){return e(Object(Ie.i)(...arguments))},showUserGroupList:function(){return e(Object(Ie.o)(...arguments))},showWhatsNew:function(){return e(Object(Ie.p)(...arguments))},showKeyboardShortcuts:function(){return e(Object(Ie.h)(...arguments))},openHelpModal:function(){return e(Object(Sa.a)(...arguments))},openClaimedFromMenu:function(){return e(Object(Tl.a)(...arguments))},openCompletedFromMenu:function(){return e(Object(Tl.b)(...arguments))},showUserCalendar:function(){return e(Object(Ie.m)(...arguments))}}))(flexpanes_menu_FlexpanesMenu),Md=Object(Td.a)(Ad),xd=new x.b("classic_nav");class flexpanes_button_FlexpanesButton extends s.Component{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this),this.onTriggerClick=this.onTriggerClick.bind(this)}onTriggerClick(){this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_FLEX_MENU"}}})}maybeRenderBadge(){var{helpTicketsCount:e}=this.props;if(!e)return null;var t=e>9?"9+":String(e);return i.a.createElement("span",{className:"p-classic_nav__right__help_count","data-qa":"help_ticket_count"},t)}renderMenu(e){return i.a.createElement(Md,{menuProps:e})}render(){if(!this.props.featureClassicNav)return null;var e=l()("p-classic_nav__right__button","p-classic_nav__right__button--flexpanes","p-classic_nav__no_drag",{"p-classic_nav__right__button--flexpanes-help-count":!!this.props.helpTicketsCount});return i.a.createElement(Be.e,{position:"bottom-right",renderMenu:this.renderMenu,allowanceX:8,onClick:this.onTriggerClick},i.a.createElement(qe.c,{tip:xd.t("More Items"),position:"bottom-right"},i.a.createElement(jt.c,{className:e,"aria-label":xd.t("More Items")},i.a.createElement(We.b,{type:"vertical-ellipsis"}),this.maybeRenderBadge())))}}flexpanes_button_FlexpanesButton.defaultProps={helpTicketsCount:0,featureClassicNav:!1};var Rd=Object(d.b)(e=>({helpTicketsCount:Object(Id.d)(e),featureClassicNav:Object(h.m)(e,"feature_classic_nav"),clogger:Object(ne.a)({state:e})}))(flexpanes_button_FlexpanesButton),Dd=new x.b("whats_new"),Fd={latestNewsTimestamp:void 0};class whats_new_button_WhastNewButton extends s.PureComponent{componentDidMount(){var{updateCount:e}=this.props;e&&this.doClogBadge()}componentDidUpdate(e){!e.updateCount&&this.props.updateCount&&this.doClogBadge()}doClogBadge(){var{clogger:e,latestNewsTimestamp:t}=this.props;e.track(ie.EventId.WHATSNEW_ACTION,{action:"do_badge",trigger:String(t),step:String(t)})}renderCount(){var{updateCount:e}=this.props;if(e<=1)return null;var t=e>9?"9+":String(e),a=Dd.t("{num_updates} Updates",{num_updates:t});return i.a.createElement(s.Fragment,null,i.a.createElement("span",{className:"p-classic_nav__right__whats_new_num_only","data-qa":"whats_new_btn_count"},t),i.a.createElement("span",{className:"p-classic_nav__right__whats_new_num_updates","data-qa":"whats_new_btn_count_full"},a))}render(){var{isActive:e,updateCount:t,featureClassicNav:a}=this.props;if(!a)return null;if(!t)return null;if(e)return null;var n=Dd.t("What\u2019s New");return i.a.createElement(qe.c,{position:"bottom-right",tip:n},i.a.createElement(jt.c,{className:"p-classic_nav__right__button p-classic_nav__right__whats_new",onClick:this.props.showWhatsNew,"data-qa":"whats_new_button"},i.a.createElement(We.b,{type:"emoji-celebration"}),this.renderCount()))}}whats_new_button_WhastNewButton.defaultProps=Fd;var Ld=Object(d.b)(e=>({isActive:"whats_new"===Object(y.j)(e),featureClassicNav:Object(h.m)(e,"feature_classic_nav"),updateCount:Object(jl.e)(e),latestNewsTimestamp:Object(jl.d)(e),clogger:Object(ne.a)({state:e})}),e=>({showWhatsNew:function(){return e(Object(Ie.p)(...arguments))}}))(whats_new_button_WhastNewButton),Ud=(a("tLal"),new x.b("classic_nav")),Bd=e=>{var{secondaryView:t,isWindowFrameless:a,whatsNewCount:n,featureAppActionsGlobal:r,isAppLauncherView:s,featureChannelHeaderLabels:o}=e,c=l()({"p-classic_nav__right_header":!0,"p-classic_nav__right_header--context_pane":t,"p-classic_nav__right_header--frameless":a,"p-classic_nav__right_header--whats_new_showing":!s&&n>0,"p-classic_nav__drag":a,"p-classic_nav__right_header--page_view":s}),d=s?i.a.createElement(i.a.Fragment,null,i.a.createElement(kl.a,null),i.a.createElement(Il,null)):i.a.createElement(i.a.Fragment,null,i.a.createElement(Rl,null),i.a.createElement(Xl,null),i.a.createElement($l,null),r&&i.a.createElement(Sd,null),i.a.createElement(Rd,null),i.a.createElement(Ld,null)),p=o?"group":void 0,u=o?Ud.t("Search and additional options",{note:"Label for the right section of the Channel Header containing the search box and button to its right. Not visible on screen as it is only for customers using screen readers."}):void 0;return i.a.createElement("div",{className:c,role:p,"aria-label":u},d)};Bd.defaultProps={secondaryView:void 0,isWindowFrameless:!1,isAppLauncherView:!1};var Hd=Object(d.b)(e=>({secondaryView:Object(y.j)(e),isWindowFrameless:Object(E.l)(e),whatsNewCount:Object(jl.e)(e),featureAppActionsGlobal:Object(h.m)(e,"feature_app_actions_global"),isAppLauncherView:Object(El.a)(e)&&"Papps"===Object(_.a)(e),featureChannelHeaderLabels:Object(h.m)(e,"feature_channel_header_labels")}))(Bd),Wd=(a("05X0"),{className:void 0,forceNarrow:!1,hideChannelHeader:!1,renderSonicMenu:r.a}),qd=e=>{var{className:t,renderSonicMenu:a,hideChannelHeader:n,forceNarrow:r}=e;return i.a.createElement("div",{className:l()("p-classic_nav",t,{"p-classic_nav--narrow":r})},i.a.createElement(Tr,{renderSonicMenu:a}),!n&&i.a.createElement(s.Fragment,null,i.a.createElement(Cl,null),i.a.createElement(Hd,null)))};qd.defaultProps=Wd;var Gd=qd,Kd=a("lCmp"),Vd=a("Z0Cl"),zd=a("jA2l"),Yd=a("ManV"),Qd=a("lyBs"),Xd=a("m4nM"),Jd=a("G3Sk"),Zd=a("brQN"),$d=a("S3eg"),ep=a("OFWM"),tp=a("Cbpi"),ap=a("0Syo"),np=Object(xt.b)("Ensure channels with drafts exist in our model",(e,t)=>{var a=t(),n=Object(Wa.a)({state:a,label:"DRAFTS"}),r=Object(kt.a)()?Object(O.a)(a):Object(ap.e)();Object(bs.a)(r)?n.info("There are no channels with drafts"):(n.info("Ensuring we have channel objects for all channels with drafts"),r.forEach(e=>{Object(L.e)(a,e)}))});np.meta={name:"ensureDraftChannelObjects",key:"actionsEnsureDraftChannelObjectsEnsureDraftChannelObjects",description:"Ensure channels with drafts exist in our model"},np.propTypes=null;var rp=np,sp=a("eK5+"),ip=a("Dpde");function op(e){return Object(El.a)(e)&&!Object(Fe.Gb)(Object(Ca.b)(e))}var cp=a("oKz6"),lp=a("G4Tr"),dp=new x.b("a11y");var pp=a("Ik/9"),up=a("gLeh"),hp=a("CpTu"),mp=a("Z3Pq"),bp=a("qAkX"),_p=a("peh1"),gp=a("FHcd"),fp=a("KCFn");function vp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Op(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vp(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vp(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var yp=32,Cp=/^channel_draft-/,jp=/^composer_draft-/,Ep="treeitem",kp=new x.b("channel_sidebar"),Sp={drafts:()=>kp.t("Drafts"),starred:()=>kp.t("Starred"),channels:()=>kp.t("Channels"),ims:()=>kp.t("Messages",{fallbackHash:"f1b1f5c277f7954dfbed1eddb8517dad1651b04b"}),apps:()=>kp.t("Recent apps",{fallbackHash:"eb537ca7589d275fa9d031a9a211ad476b691e63"})},Ip={id:null,type:"spacer",height:12,key:null,role:"presentation"},wp={id:"Vall_threads",type:"allThreadsLink",height:yp,key:"Vall_threads",role:Ep,"aria-level":1},Tp={id:"Punreads",type:"pageLink",height:yp,key:"Punreads",role:Ep,"aria-level":1},Np={id:null,type:"sectionHeading",name:"",height:36,role:Ep,"aria-level":1},Pp={id:null,type:"sectionHeadingAriaGroup",name:"",height:0,role:"group"},Ap={id:null,type:"channel",index:null,height:28,role:Ep,"aria-level":2},Mp=Op({},Ap,{type:"composer_draft",role:Ep,"aria-level":2}),xp=Op({},Ap,{type:"channel_draft",role:Ep,"aria-level":2}),Rp={id:null,type:"appDmSuggestion",index:null,height:28,role:Ep,"aria-level":2};function Dp(e,t){var a=Object(Y.a)(e&&e.id);if(!e||!a)return null;var n=a.sidebar&&a.sidebar.rowHeight||yp;return{id:e.id,key:e.id,type:"pageLink",height:n,scrollTop:t,scrollBottom:t+n,role:Ep,"aria-level":1,indented:a.indented}}var Fp=Object(_p.createSelector)([e=>e&&e.sidebarSectionsOrdered,e=>e&&e.sidebarSections,e=>e&&e.pages,e=>e&&e.hasAllUnreadsLink,e=>e&&e.hasThreadsLink,e=>e&&e.featureComposeFlow,e=>e&&e.showDraftsPageSidebar,e=>e&&e.primaryView,e=>e&&e.iap1MainMenuIsVisible,e=>e&&e.iaBrowsersEnabled,e=>e&&e.shouldUseChannelSections,e=>e&&e.isOrganizing],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],l=arguments.length>9&&void 0!==arguments[9]&&arguments[9],d=arguments.length>10&&void 0!==arguments[10]&&arguments[10],p=arguments.length>11&&void 0!==arguments[11]&&arguments[11],u=[],h=0;u.push(Op({},Ip,{id:"top-padding-spacer",key:"top-padding-spacer",height:12,scrollTop:h,scrollBottom:h+=12}));var m=a.find(e=>"Pwelcome"===e.id);if(m){var b=Dp(m,h);u.push(b),h=b.scrollBottom}var _=!(d&&p),g=a.find(e=>"Phome"===e.id);if(g){var f=Dp(g,h);u.push(f),h=f.scrollBottom}_&&n&&u.push(Op({},Tp,{scrollTop:h,scrollBottom:h+=Tp.height})),_&&r&&u.push(Op({},wp,{scrollTop:h,scrollBottom:h+=wp.height}));var v=Dp(Object(hp.a)(a,{id:"Pactivity"}),h);if(_&&v&&(u.push(v),h=v.scrollBottom),_&&i){var O=Dp(Object(hp.a)(a,{id:"Pdrafts"}),h);O&&(u.push(O),h=O.scrollBottom)}_&&u.push(Op({},Np,{name:"browse",scrollTop:h,scrollBottom:h+=Np.height,sectionName:"browse",key:"sectionHeading-browse","aria-expanded":c})),["Pstars","Pbrowse-channels",l?"Pbrowse-people":"Pdirectory","Papps",l?"Pbrowse-files":"Pfiles"].filter(e=>c||o===e).forEach(e=>{var t=Dp(Object(hp.a)(a,{id:e}),h);t&&(u.push(t),h=t.scrollBottom)});var y=0;return e.forEach((a,n)=>{var r=t[a]||{},s=r.channelsOrdered||[];if(!d){var i=Object(bp.a)(u);("sectionHeading"!==i.type&&"sectionHeadingAriaGroup"!==i.type||s.length>0)&&u.push(Op({},Ip,{scrollTop:h,scrollBottom:h+=Ip.height,key:"sectionHeading-spacer-".concat(a)}))}var o=r.channelsOrdered.reduce((e,t)=>jp.test(t)?(e[t]=t.replace(jp,""),e):Cp.test(t)?(e[t]=t.replace(Cp,""),e):(e[t]=t,e),{});if(r.hasHeading){var c,l;if(d&&r.channelSection){var{emoji:p,name:m}=r.channelSection;c=p?"".concat(p," ").concat(m):m}else c=Sp[a]();if(d){var b=n>0&&e[n-1],_=b&&t[b];l=_?_.channelSection:void 0}u.push(Op({},Np,{"aria-label":c,name:a,scrollTop:h,scrollBottom:h+=Np.height,sectionName:a,key:"sectionHeading-".concat(a),"aria-expanded":!0,channelIds:d?r.channelsOrdered:void 0,channelSection:r.channelSection,priorDisplayedChannelSection:l})),u.push(Op({},Pp,{"aria-label":c,scrollTop:h,scrollBottom:h+=Pp.height,key:"sectionHeadingAriaGroup-".concat(a),"aria-owns":d&&r.isCollapsed?"":Object.values(o).join(" "),channelSection:r.channelSection}))}r.channelsOrdered.forEach(e=>{var t,n,s=o[e];if(jp.test(e))t=Mp;else if(Cp.test(e)){t=xp;var{channelId:i,threadTs:c}=Object(fp.b)(s);n={draftId:s,channelId:i,threadTs:c}}else t=Ap;d&&r.isCollapsed||u.push(Op({},t,{id:s,index:y,scrollTop:h,scrollBottom:h+=t.height,sectionName:a,channelSection:r.channelSection,channelSectionChannelIds:d?r.channelsOrdered:void 0,key:e,params:n})),y+=1}),d&&!r.isCollapsed&&r.channelsOrdered.length>0&&u.push(Op({},Ip,{height:8,scrollTop:h,scrollBottom:h+=8,key:"sectionHeading-spacer-".concat(a)})),"apps"===a&&(r.membersOrdered&&r.membersOrdered.forEach(e=>{var t=Object(gp.a)(e)?Rp:Ap;u.push(Op({},t,{id:e,index:y,scrollTop:h,scrollBottom:h+=t.height,sectionName:a,key:e})),y+=1}),r.membersOrdered&&r.membersOrdered.length>0&&u.push(Op({},Ip,{scrollTop:h,scrollBottom:h+=Ip.height,key:"spacer-apps"})))}),u.push(Op({},Ip,{scrollTop:h,scrollBottom:h+=Ip.height,key:"spacer-footer-1"})),u.push(Op({},Ip,{scrollTop:h,scrollBottom:h+=Ip.height,key:"spacer-footer-2"})),s&&(u.push(Op({},Ip,{scrollTop:h,scrollBottom:h+=Ip.height,key:"spacer-footer-3"})),u.push(Op({},Ip,{scrollTop:h,scrollBottom:h+=Ip.height,key:"spacer-footer-4"})),u.push(Op({},Ip,{scrollTop:h,scrollBottom:h+=Ip.height,key:"spacer-footer-5"})),u.push(Op({},Ip,{scrollTop:h,scrollBottom:h+=Ip.height,key:"spacer-footer-6"})),u.push(Op({},Ip,{scrollTop:h,scrollBottom:h+=Ip.height,key:"spacer-footer-7"}))),{rows:u,rowsMap:Object(mp.a)(u,"id"),rowIds:Object(ed.a)(u,"id")}}),Lp=a("+uGN"),Up=a("j1Cd"),Bp=a("K7TJ"),Hp=a("Olm7"),Wp=a("xWuZ"),qp=a("NFsq"),Gp=a("OL4R"),Kp=Object(Tt.b)(e=>{var t=Object(Se.d)(e);return Object(we.D)(t)?Object(Ke.k)(e,"channel_sort"):"alphabetical"});Kp.meta={name:"getChannelSortPref",key:"prefsStoreUserDerivedSelectorsGetChannelSortPrefGetChannelSortPref"};var Vp=Kp,zp=a("2I0B"),Yp=a("icQl");function Qp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Xp=[Ni.k,Ni.o,Ni.n,Ni.j,Ni.m,Ni.l,Ni.i],Jp=["defaultMentions","default","sharedMentions","shared","privateMentions","private","slackbot","you","imsMentions","ims"],Zp=()=>({channelsOrdered:{default:Jp.map(()=>[]),muted:Jp.map(()=>[]),suggested:Jp.map(()=>[])},hasHeading:!0,isCollapsed:!1,channelSection:null}),$p=Object(Gp.a)(Jp),eu=e=>e&&e.has_draft,tu=e=>{var{channel:t,members:a,isCurrentlySelected:n,shouldHideReadChannels:r,shouldHideReadChannelsUnlessStarred:s,hasDraft:i,teamId:o,isSuggested:c,showAppDmSuggestions:l,isInAnyCustomChannelSection:d,isOrganizing:p}=e;if(Object(B.cb)(t))return!1;if(Object(B.Nb)(t))return!1;if(n)return!0;if(Object(B.eb)(o,t))return!0;if(Object(B.X)(t))return!1;if(Object(B.ib)(t,a[Object(B.G)(t)]))return!1;if(!Object(B.nb)(t)&&!c)return!1;if((Object(B.hb)(t)||Object(B.pb)(t))&&!Object(B.sb)(t)&&Object(B.Db)(t)&&!i)return!1;var u={members:a,selfTeamIds:{teamId:o},dangerouslyOverrideCreateSelectorSanityCheck:!0};if(Object(B.hb)(t)){var h=[Object(B.G)(t)];if(h[0]||Object(Wa.a)({teamId:o}).error("SIDEBAR-SECTIONS","IM ".concat(t.id," is missing its associated user")),!Object(Fe.cb)(u,h))return o&&Object(Ca.g)(u,h),!1}if(Object(B.pb)(t)){var m=Object(B.H)(t);if(m&&m.length||Object(Wa.a)({teamId:o}).error("SIDEBAR-SECTIONS","MPIM ".concat(t.id," is missing its associated members")),!Object(Fe.cb)(u,m))return o&&Object(Ca.g)(u,m),!1}return!!p||(!(!s||!Object(B.Ib)(t)&&!d)||(!!i||!(l&&r&&Object(B.W)(t,a)&&Object(B.Ib)(t)&&Object(B.Db)(t))&&(!(!l||!Object(B.W)(t,a))||(!s&&!r||!Object(B.Db)(t)))))},au={},nu={},ru={},su=Object(Yp.a)(function(){for(var{channels:e,currentlySelectedId:t,mutedChannels:a,members:n,sidebarBehaviorPref:r,draftChannelIds:s,teamId:i,suggestedChannelIds:o,showAppDmSuggestions:c,channelSectionIdsByChannelId:l,isOrganizing:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p="hide_read_channels"===r,u="hide_read_channels_unless_starred"===r,h=[],m=!1,b=!1,_=!1,g=Object.keys(e),f=0;f<g.length;f+=1){var v=e[g[f]],O=-1!==s.indexOf(v.id);Object(kt.a)()||(O=eu(v)),tu({channel:v,members:n,isCurrentlySelected:t===v.id,isMuted:!!a[v.id],shouldHideReadChannels:p,shouldHideReadChannelsUnlessStarred:u,hasDraft:O,teamId:i,isSuggested:-1!==o.indexOf(v.id),showAppDmSuggestions:c,isInAnyCustomChannelSection:l&&l[v.id]&&l[v.id].length>0,isOrganizing:d})&&h.push(v),m||(m=Object(B.eb)(i,v)||Object(B.Gb)(v)&&(Object(B.nb)(v)||t===v.id)),b||(b=Object(B.ub)(v)&&!Object(B.Bb)(v)),_||(_=Object(B.Ib)(v))}return{channelsVisible:h,belongsToOrPreviewingAnySharedChannels:m,belongsToAnyOrgChannels:b,hasAStarredChannel:_}},2);function iu(e){var{members:t,appChannels:a,flatSidebarSections:n,dismissedAppMembers:r,maxSuggestionsCount:s=10}=e,i=Object(mp.a)(a,B.G),o=a.reduce((e,t)=>(n[Ni.o]&&-1!==n[Ni.o].channelsOrdered.indexOf(t.id)||e.push(t.id),e),[]),c=[],l=s-o.length;if(l>0){var d=Object.values(t).reduce((e,t)=>{var{is_bot:a,id:n}=t;return!a||i[n]||r[n]||Object(Fe.mb)(t)||e.push(t),e},[]);d.sort((e,t)=>Object(x.r)(e.name,t.name)),c=d.map(e=>e.id).slice(0,l)}return o.concat(c)}var ou=Object(Yp.a)(e=>{var{channelsSorted:t,belongsToOrPreviewingAnySharedChannels:a,members:n,mutedChannels:r,draftChannelIds:s,visibleUnifiedDrafts:i,withheldDraftIds:o,suggestedChannelIds:c,currentUserId:l,currentlySelectedId:d,teamId:u,sortPref:m,isGuest:b,shouldSeparateSharedChannels:_,shouldSeparateOrgWideChannels:g,shouldSeparatePrivateChannels:f,dismissedAppMembers:v,featureChannelSidebarDraftsSection:O,featureSilenceAppDMs:y,featureComposeFlowSidebar:C,shouldUseChannelSections:j,defaultChannelSectionsCollapsed:E,customChannelSectionsCollapsed:k,orderedChannelSections:S,channelSectionIdIsExclusivelyFromAnotherTeam:I,allChannelSectionChannels:w,showAppDmSuggestions:T,showDraftsPageSidebar:N}=e,P={},A=[],M=[],x={},R={},D={},F={};j?(M.push(Ni.k),P[Ni.k]=Zp(),P[Ni.k].channelSection=null,S.forEach(e=>{w[e.id].forEach(t=>{D[t]||(D[t]=[]),D[t].push(e.id)});var t,a="custom-".concat(e.id);switch(x[e.id]=a,R[a]=e.id,e.type){case Ni.b:t=Ni.j,F[Ni.j]=a;break;case Ni.c:t=Ni.l,F[Ni.l]=a;break;case Ni.d:t=Ni.m,F[Ni.m]=a;break;case Ni.e:t=Ni.i,F[Ni.i]=a;break;case Ni.f:t=Ni.n,F[Ni.n]=a;break;case Ni.h:t=Ni.o,F[Ni.o]=a;break;case Ni.g:default:t=a}M.push(t),P[t]=Zp(),P[t].channelSection=e}),Xp.forEach(e=>{P[e]||(M.push(e),P[e]=Zp())})):Xp.forEach(e=>{M.push(e),P[e]=Zp()});var L=[],U=[];t.forEach(e=>{Object(B.hb)(e)&&L.push(Object(B.G)(e));var t=Object(B.W)(e,n),a=(e=>{var{channel:t,isApp:a,isGuest:n,shouldSeparateSharedChannels:r,shouldSeparateOrgWideChannels:s,draftChannelIds:i,featureChannelSidebarDraftsSection:o,featureComposeFlowSidebar:c,currentlySelectedId:l,teamId:d}=e,u=Object(p.getStateByTeamId)(d);return!c&&o&&(Object(qp.a)(i,t.id)||eu(t))&&(Object(h.m)(u,"feature_announce_only_websocket")||Object(sn.p)(u,t.id))&&(l!==t.id||Object(qp.a)(nu[d],t.id)||au[d]||(ru[d]=t.id),ru[d]&&l!==ru[d]&&delete ru[d],t.id!==ru[d])?Ni.k:Object(B.Ib)(t)?Ni.o:(Object(B.Gb)(t)||Object(B.eb)(d,t))&&r?Ni.n:Object(B.ub)(t)&&!Object(B.Bb)(t)&&s?Ni.m:a&&!n?Ni.i:Object(B.hb)(t)||Object(B.pb)(t)?Ni.l:Ni.j})({channel:e,isApp:t,isGuest:b,shouldSeparateSharedChannels:_,shouldSeparateOrgWideChannels:g,draftChannelIds:s,featureChannelSidebarDraftsSection:O,featureComposeFlowSidebar:C,currentlySelectedId:d,teamId:u});t&&A.push(e);var i,o=!!r[e.id],v=Object(B.o)(e,o,y,Object(B.W)({channel:e,members:n})),j=(e=>{var{channel:t,currentUserId:a,shouldSeparatePrivateChannels:n,shouldSeparateSharedChannels:r,shouldBumpMention:s}=e;return Object(B.Hb)(t)?$p.slackbot:Object(B.Qb)(t,a)?$p.you:Object(B.hb)(t)||Object(B.pb)(t)?s?$p.imsMentions:$p.ims:n&&Object(B.Bb)(t)?s?$p.privateMentions:$p.private:r&&Object(B.Gb)(t)?s?$p.sharedMentions:$p.shared:s?$p.defaultMentions:$p.default})({channel:e,currentUserId:l,shouldSeparatePrivateChannels:f,shouldSeparateSharedChannels:_,shouldBumpMention:"priority"===m&&v>0});i=-1!==c.indexOf(e.id)?"suggested":o?"muted":"default",D[e.id]?D[e.id].forEach(t=>{var a=x[t];P[a].channelsOrdered[i][j].push(e.id)}):P[a].channelsOrdered[i][j].push(e.id),Object(kt.a)()||eu(e)&&U.push(e.id)});var H={};c.forEach((e,t)=>{H[e]=t}),P.channels.channelsOrdered.suggested.forEach(e=>{e.sort((e,t)=>H[e]>H[t]?1:-1)}),nu[u]=[...s,...U];var W=Object(Ks.a)(P,e=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qp(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qp(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({},e,{channelsOrdered:Object(Wp.a)([...e.channelsOrdered.default,...e.channelsOrdered.muted,...e.channelsOrdered.suggested])}));if(C){var q=Object(Lp.t)(i),G=[];q.forEach(e=>{var t=Object(Lp.d)(e);Object(Lp.p)(e)?G.push("composer_draft-".concat(t)):Object(qp.a)(o,t)||G.push("channel_draft-".concat(t))}),W[Ni.k].channelsOrdered=G}if((!O||N||W[Ni.k].channelsOrdered.length<1)&&(delete W[Ni.k],Object(Hp.a)(M,e=>e===Ni.k)),!j&&W[Ni.o].channelsOrdered.length<1&&(delete W[Ni.o],Object(Hp.a)(M,e=>e===Ni.o)),_&&a||(delete W[Ni.n],Object(Hp.a)(M,e=>e===Ni.n)),(!g||W[Ni.m].channelsOrdered.length<1)&&(delete W[Ni.m],Object(Hp.a)(M,e=>e===Ni.m)),b?(delete W[Ni.i],Object(Hp.a)(M,e=>e===Ni.i)):T&&(W[Ni.i]={hasHeading:!0,channelsOrdered:[],membersOrdered:iu({members:n,appChannels:A,flatSidebarSections:W,dismissedAppMembers:v})}),j){Object.entries(F).forEach(e=>{var[t,a]=e;W[t]&&(W[a]=W[t],delete W[t])});var K=M.map(e=>F[e]||e).filter(e=>{var t=P[e];return!(t&&I&&t.channelSection&&t.channelSection.id&&void 0!==I[t.channelSection.id]&&I[t.channelSection.id])});return K.forEach(e=>{var t=e===Ni.k?!!E[Ni.k]:!!k[R[e]];W[e].isCollapsed=t}),Object.entries(x).forEach(e=>{var[t,a]=e;if(W[a]){var n=!!k[t];W[a].isCollapsed=n}}),{sidebarSectionsOrdered:K,sidebarSections:W,orderedChannelSections:S,idsNeedingPresenceSubscription:L}}return{sidebarSectionsOrdered:M,sidebarSections:W,orderedChannelSections:S,idsNeedingPresenceSubscription:L}},3),cu=e=>{var t=Object(u.b)(e),a=Object(L.b)(e),n=Object(xr.b)(e),r=Object(Ca.a)(e),s=Object(O.a)(e),i=Object(zp.a)(e),o=Object(O.f)(e),c=Object(B.S)(e),l=Object(_.a)(e),d=Object(h.d)(e),p=(e=>Object(Ke.k)(e,"sidebar_behavior"))(e),m=!Object(Rr.d)(e)&&(e=>Object(Ke.k)(e,"separate_private_channels"))(e),b=!Object(Rr.d)(e)&&(e=>!Object(h.m)(e,"feature_channel_is_remove_create_shared_channel")&&Object(Ke.k)(e,"separate_shared_channels"))(e),g=!Object(Rr.d)(e)&&(e=>Object(Ke.k)(e,"ent_org_wide_channels_sidebar"))(e),f=Object(Ke.e)(e),v=Object(Ca.l)(e),y=Object(h.u)(e),C=(e=>Object(h.m)(e,"feature_channel_sidebar_drafts_section"))(e),j=Object(O.i)(e),E="variant"===Object(It.c)(e,"show_more_apps_in_sidebar_new_and_free"),k=Object(N.a)(e),S=k?pa(e):null,I=k?da(e):null,w=k?Xt(e):[],T=k?$t(e):{},P=oa(e),A=Object(O.j)(e),M=k?Object(Bp.a)(w.map(t=>{var a=$t(e)[t.id];return[t.id,t.type===Ni.g&&!Object(bs.a)(a)&&a.reduce((t,a)=>t&&Object(B.cb)(Object(L.e)(e,a)),!0)]})):{};void 0===au[t]?au[t]=!0:au[t]&&(au[t]=!1);var R=k&&aa(e),{channelsVisible:D,belongsToOrPreviewingAnySharedChannels:F}=su({channels:a,currentlySelectedId:l,mutedChannels:n,members:r,sidebarBehaviorPref:p,draftChannelIds:s,teamId:t,suggestedChannelIds:c,showAppDmSuggestions:E,channelSectionIdsByChannelId:R,isOrganizing:P}),U={};D.forEach(t=>{t&&t.id&&(U[t.id]=Object(B.w)(e,t,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}))});var H=(e,t)=>Object(x.r)(e&&U[e.id],t&&U[t.id]),W=(e,t)=>{var a=e.priority||-1,n=t.priority||-1;return a===n?H(e,t):n-a},q=Vp(e),G=D.sort((e=>"priority"===e?W:H)(q));return ou({channelsSorted:G,belongsToOrPreviewingAnySharedChannels:F,members:r,mutedChannels:n,draftChannelIds:s,visibleUnifiedDrafts:i,withheldDraftIds:o,suggestedChannelIds:c,currentUserId:d,currentlySelectedId:l,teamId:t,sortPref:q,isGuest:v,shouldSeparateSharedChannels:b,shouldSeparateOrgWideChannels:g,shouldSeparatePrivateChannels:m,dismissedAppMembers:f,featureChannelSidebarDraftsSection:C,featureSilenceAppDMs:y,featureComposeFlowSidebar:j,shouldUseChannelSections:k,defaultChannelSectionsCollapsed:S,customChannelSectionsCollapsed:I,orderedChannelSections:w,channelSectionIdIsExclusivelyFromAnotherTeam:M,allChannelSectionChannels:T,showAppDmSuggestions:E,showDraftsPageSidebar:A})};function lu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function du(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lu(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lu(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}Object(Mt.a)("channelSidebar",{getDraftChannelToWithhold:()=>ru});var pu=26,uu=/^channel_draft-/,hu=/^composer_draft-/,mu="treeitem",bu=new x.b("channel_sidebar"),_u={drafts:()=>bu.t("Drafts"),starred:()=>bu.t("Starred"),sharedChannels:()=>bu.t("Shared Channels"),channels:()=>bu.t("Channels"),orgWideChannels:()=>bu.t("Organization Channels"),ims:()=>bu.t("Direct Messages"),apps:()=>bu.t("Recent Apps")},gu={id:null,type:"topPadding",height:12,key:null,role:"presentation"},fu={id:null,type:"spacer",height:18,key:null,role:"presentation"},vu={id:null,type:"spacer",height:6,key:null,role:"presentation"},Ou={id:"Vquick_switcher",type:"quickswitcherButton",height:52,key:"Vquick_switcher",role:mu,"aria-level":1},yu={id:"Vall_threads",type:"allThreadsLink",height:pu,key:"Vall_threads",role:mu,"aria-level":1},Cu={id:"Punreads",type:"pageLink",height:pu,key:"Punreads",role:mu,"aria-level":1},ju={id:"Vsearch",type:"searchLink",height:pu,key:"Vsearch",role:mu,"aria-level":1},Eu={id:null,type:"sectionHeading",name:"",height:pu,role:mu,"aria-level":1},ku={id:null,type:"sectionHeadingAriaGroup",name:"",height:0,role:"group"},Su={id:null,type:"folderHeading",name:"",height:pu,role:mu,"aria-level":1},Iu={id:null,type:"channel",index:null,height:pu,role:mu,"aria-level":2},wu=du({},Iu,{type:"composer_draft",role:mu,"aria-level":2}),Tu=du({},Iu,{type:"channel_draft",role:mu,"aria-level":2}),Nu={id:null,type:"appDmSuggestion",index:null,height:pu,role:mu,"aria-level":2},Pu={id:null,type:"addAChannelLink",dim:!1,height:pu,key:"addAChannelLink",role:mu,"aria-level":1},Au={id:null,type:"invitePeopleLink",dim:!1,height:pu,key:"invitePeopleLink",role:mu,"aria-level":1},Mu={id:null,type:"installAppsLink",dim:!1,height:pu,key:"installAppsLink",role:mu,"aria-level":1},xu={id:null,type:"appSuggestionLinks",dim:!1,height:pu,key:"appSuggestionLinks",role:mu,"aria-level":1},Ru={id:null,type:"upgradeSlackCTA",height:pu,key:"upgradeSlackCTA",role:mu,"aria-level":1},Du={id:null,type:"emptyState",index:null,height:pu,key:null,role:"presentation"};function Fu(e,t){var a=Object(Y.a)(e.id),n=a.sidebar&&a.sidebar.rowHeight||pu;return{id:e.id,key:e.id,type:"pageLink",height:n,scrollTop:t,scrollBottom:t+n,role:mu,"aria-level":1}}var Lu=Object(_p.createSelector)([e=>e&&e.hasQuickswitcherButton,e=>e&&e.hasAllUnreadsLink,e=>e&&e.hasSearchLink,e=>e&&e.hasAddAChannelLink,e=>e&&e.hasInvitePeopleLink,e=>e&&e.appSuggestionsCount,e=>e&&e.hasUpgradeSlackCTA,e=>e&&e.hasThreadsLink,e=>e&&e.hasAppsLink,e=>e&&e.hasInstallAppsLink,e=>e&&e.sidebarSectionsOrdered,e=>e&&e.sidebarSections,e=>e&&e.sidebarFoldersIsEnabled,e=>e&&e.sidebarFolders,e=>e&&e.pages,e=>e&&e.featureComposeFlow,e=>e&&e.shouldUseChannelSections,e=>e&&e.shouldHideForWelcomePlace,e=>e&&e.showDraftsPageSidebar],function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],l=arguments.length>9&&void 0!==arguments[9]&&arguments[9],d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:[],p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:{},u=arguments.length>12&&void 0!==arguments[12]&&arguments[12],h=arguments.length>13&&void 0!==arguments[13]?arguments[13]:[],m=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[],b=arguments.length>15&&void 0!==arguments[15]&&arguments[15],_=arguments.length>16&&void 0!==arguments[16]&&arguments[16],g=arguments.length>17&&void 0!==arguments[17]&&arguments[17],f=arguments.length>18&&void 0!==arguments[18]&&arguments[18],v=[],O={},y=0;!g&&e?v.push(du({},Ou,{scrollTop:y,scrollBottom:y+=Ou.height})):v.push(du({},gu,{scrollTop:y,scrollBottom:y+=gu.height,key:"top-padding"}));var C=m.find(e=>"Pwelcome"===e.id);if(C){var j=Fu(C,y);v.push(j),y=j.scrollBottom}var E=m.find(e=>"Phome"===e.id);if(!g&&E){var k=Fu(E,y);v.push(k),y=k.scrollBottom}t&&v.push(du({},Cu,{scrollTop:y,scrollBottom:y+=pu})),o&&v.push(du({},yu,{scrollTop:y,scrollBottom:y+=yu.height})),a&&v.push(du({},ju,{scrollTop:y,scrollBottom:y+=ju.height}));var S=m.find(e=>"Papps"===e.id);if(!g&&c){var I=Fu(S,y);v.push(I),y=I.scrollBottom}var w=["Punreads","Pwelcome","Phome","Pcomposer","Papps","Ppaid-benefits"];f||w.push("Pdrafts");var T=m.filter(e=>-1===w.indexOf(e.id)),N=T.length;T.forEach((e,t)=>{var a=Fu(e,y);v.push(du({},a,{"aria-setsize":N,"aria-posinset":t+1})),y=a.scrollBottom});var P=0;u&&h.forEach(e=>{"folderHeading"!==Object(bp.a)(v).type&&"sectionHeadingAriaGroup"!==Object(bp.a)(v).type&&v.push(du({},fu,{scrollTop:y,scrollBottom:y+=fu.height,key:"spacer-".concat(e.name)})),v.push(du({},Su,{"aria-label":e.name,id:e.name,name:e.name,key:"folder-".concat(e.name),"aria-expanded":!e.isCollapsed})),v.push(du({},ku,{"aria-label":e.name,scrollTop:y,scrollBottom:y+=ku.height,"aria-owns":e.channelIds.join(" "),key:"aria-group-".concat(e.name)}));var t=e.channelIds.length;e.channelIds.forEach((a,n)=>{var r=!1;d.forEach(e=>{var t=(p[e]||{}).channelsOrdered||[];r=r||t.filter(e=>e===a).length>0}),r&&(e.isCollapsed||(v.push(du({},Iu,{id:a,index:P,scrollTop:y,scrollBottom:y+=Iu.height,sectionName:e.name,key:a,"aria-setsize":t,"aria-posinset":n+1})),P+=1),O[a]=!0)})}),d.forEach((e,t)=>{var a=p[e]||{};if(_||!a.channelSection){var i=a.channelsOrdered||[],o=_&&a.isCollapsed;if(_)v.push(du({},vu,{scrollTop:y,scrollBottom:y+=vu.height,key:"sectionHeading-spacer-".concat(e)}));else{var c=Object(bp.a)(v);("sectionHeading"!==c.type&&"sectionHeadingAriaGroup"!==c.type||i.length>0)&&v.push(du({},fu,{scrollTop:y,scrollBottom:y+=fu.height,key:"sectionHeading-spacer-".concat(e)}))}var u=a.channelsOrdered.reduce((e,t)=>hu.test(t)?(e[t]=t.replace(hu,""),e):uu.test(t)?(e[t]=t.replace(uu,""),e):(e[t]=t,e),{});if(a.hasHeading){var h,m;if(_&&a.channelSection){var{emoji:b,name:f}=a.channelSection;h=b?"".concat(b," ").concat(f):f}else h=_u[e]();if(_){var C=t>0&&d[t-1],j=C&&p[C];m=j?j.channelSection:void 0}v.push(du({},Eu,{"aria-label":h,name:e,scrollTop:y,scrollBottom:y+=Eu.height,sectionName:e,key:"sectionHeading-".concat(e),"aria-expanded":!o,channelIds:_?a.channelsOrdered:void 0,channelSection:a.channelSection,priorDisplayedChannelSection:m})),v.push(du({},ku,{"aria-label":h,scrollTop:y,scrollBottom:y+=ku.height,key:"sectionHeadingAriaGroup-".concat(e),"aria-owns":_&&a.isCollapsed?"":Object.values(u).join(" "),channelSection:a.channelSection}))}var E=a.channelsOrdered.length;a.channelsOrdered.forEach((t,n)=>{if(!O[t]){var r,s,i=u[t];if(hu.test(t))r=wu;else if(uu.test(t)){r=Tu;var{channelId:o,threadTs:c}=Object(fp.b)(i);s={draftId:i,channelId:o,threadTs:c}}else r=Iu;_&&a.isCollapsed||(v.push(du({},r,{id:i,index:P,scrollTop:y,scrollBottom:y+=r.height,sectionName:e,channelSection:a.channelSection,channelSectionChannelIds:_?a.channelsOrdered:void 0,key:t,params:s,"aria-setsize":E,"aria-posinset":n+1})),P+=1)}}),!g&&"channels"===e&&n&&(v.push(du({},fu,{scrollTop:y,scrollBottom:y+=fu.height,key:"spacer-addAChannelLink"})),v.push(du({},Pu,{dim:!0,height:Pu.height,scrollTop:y,scrollBottom:y+=Pu.height}))),"ims"===e&&r&&(v.push(du({},fu,{scrollTop:y,scrollBottom:y+=fu.height,key:"spacer-invite-people"})),v.push(du({},Au,{dim:"dim"===r,height:Au.height,scrollTop:y,scrollBottom:y+=Au.height})));var k="apps"===e&&a.membersOrdered,S=k&&k.length;if("apps"===e){if(a.membersOrdered&&a.membersOrdered.forEach((t,a)=>{var n=Object(gp.a)(t)?Nu:Iu;v.push(du({},n,{id:t,index:P,scrollTop:y,scrollBottom:y+=n.height,sectionName:e,key:t,"aria-posinset":a+1,"aria-setsize":S})),P+=1}),a.membersOrdered&&a.membersOrdered.length>0&&v.push(du({},fu,{scrollTop:y,scrollBottom:y+=fu.height,key:"spacer-apps"})),!g&&Number.isFinite(s)&&s>0){var I=s*xu.height;v.push(du({},xu,{height:I,scrollTop:y,scrollBottom:y+=I}))}!g&&l&&v.push(du({},Mu,{height:Mu.height,scrollTop:y,scrollBottom:y+=Mu.height}))}}});var A=m.find(e=>"Ppaid-benefits"===e.id);if(A){v.push(du({},Du,{scrollTop:y,scrollBottom:y+=Du.height,key:"benefits-page-empty-state-1"}));var M=Fu(A,y);v.push(M),y=M.scrollBottom}i&&(v.push(du({},Du,{scrollTop:y,scrollBottom:y+=Du.height,key:"upgrade-slack-cta-empty-state-1"})),v.push(du({},Ru,{height:Ru.height,scrollTop:y,scrollBottom:y+=Ru.height})),v.push(du({},Du,{scrollTop:y,scrollBottom:y+=Du.height,key:"upgrade-slack-cta-empty-state-2"}))),v.push(du({},fu,{scrollTop:y,scrollBottom:y+=fu.height,key:"spacer-footer-1"})),v.push(du({},fu,{scrollTop:y,scrollBottom:y+=fu.height,key:"spacer-footer-2"})),b&&(v.push(du({},fu,{scrollTop:y,scrollBottom:y+=fu.height,key:"spacer-footer-3"})),v.push(du({},fu,{scrollTop:y,scrollBottom:y+=fu.height,key:"spacer-footer-4"})));var x=v.filter(e=>1===e["aria-level"]),R=x.length,D=x.reduce((e,t,a)=>(e[t.key]=a+1,e),{});return{rows:v=v.map(e=>1===e["aria-level"]?du({},e,{"aria-setsize":R,"aria-posinset":D[e.key]}):e),rowsMap:Object(mp.a)(v,"id"),rowIds:Object(ed.a)(v,"id")}}),Uu=a("kMOi"),Bu=new x.b("channel_sidebar"),Hu=(e,t)=>{var a=Object(Yd.f)(e,t),n=Object(Uu.c)(a),r=Object(Uu.e)(a),s=((e,t)=>{var a=Object(Yd.f)(e,t);return Object(Uu.d)(a)})(e,t),i=Object(Se.d)(e);if(!n||!r)return{};var o="",c=Object(Uu.b)(a)||"";return!s&&c&&(o=c).startsWith("/")&&(o=Object(we.n)(i,o)),{appId:n,isInstall:s,href:o||Object(we.n)(i,"/apps/".concat(n)),text:s?Bu.t("Install {name}",{name:r}):Bu.t("Connect {name}",{name:r}),label:Bu.t("Dismiss {name} suggestion",{name:r}),dismissKey:"".concat(t,s?"_install_prompt_dismissed":"_connect_prompt_dismissed"),clogUiElement:s?"app_install_prompt":"app_connect_prompt"}},Wu=e=>Object(Yd.g)(e).length,qu=a("vPIQ"),Gu=a("ukIz"),Ku=a("F294"),Vu=a("+Xah"),zu=a("RB1+"),Yu=a("Po2o"),Qu=a("+yap"),Xu=a("2Y1Y"),Ju=a("s19S"),Zu=a("yt6e"),$u=a("tRvn"),eh=a("ARZM"),th=(a("Fsvi"),{query:void 0,plainTextQuery:void 0,shouldUseChannelSections:!1,isOrganizing:!1});class omniswitcher_button_OmniswitcherButton extends s.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.onClearClick=this.onClearClick.bind(this)}onClick(){this.props.query?this.props.openFromClick():this.props.maybeShowOmniSwitcher()}onClearClick(){this.props.clearSearchInput()}render(){var{teamName:e,query:t,plainTextQuery:a,isOrganizing:n}=this.props,r=this.props.shouldUseChannelSections&&n,s=l()("p-ia__omniswitcher_button",{"p-ia__omniswitcher_button--organizing":r});return t?i.a.createElement("div",{className:"p-ia__omniswitcher_button__search_container"},i.a.createElement(jt.c,{onClick:this.onClick,className:s},i.a.createElement(es.a,{type:"search-medium",size:"inherit",className:"p-ia__omniswitcher_button__icon"})," ",i.a.createElement("span",{className:"p-ia__omniswitcher_button__text"},"Search: ",a)),i.a.createElement(jt.c,{onClick:this.onClearClick,className:"p-ia__omniswitcher_button__search_clear"},i.a.createElement(es.a,{type:"times-medium"}))):i.a.createElement(jt.c,{onClick:this.onClick,className:s,disabled:r,"aria-disabled":r},i.a.createElement(es.a,{type:"search-medium",size:"inherit",className:"p-ia__omniswitcher_button__icon"})," ",i.a.createElement("span",{className:"p-ia__omniswitcher_button__text"},"Search ",e),i.a.createElement("div",{className:"p-ia__omniswitcher_button__shortcut"},Object(ve.q)()?"\u2318K":"Ctrl+K"))}}omniswitcher_button_OmniswitcherButton.defaultProps=th;var ah=Object(d.b)(e=>{var t=Object(wl.b)(e),a=Object(Se.d)(e);return{query:t,teamName:Object(we.s)(a)?Object(Se.e)(e):Object(we.e)(a),plainTextQuery:t?Object(Pl.a)(e,t):void 0,shouldUseChannelSections:Object(N.a)(e),isOrganizing:oa(e)}},e=>({maybeShowOmniSwitcher:function(){return e(Object(eh.a)(...arguments))},openFromClick:function(){return e(Object(Tl.c)(...arguments))},clearSearchInput:function(){return e(Object(Nl.a)(...arguments))}}))(omniswitcher_button_OmniswitcherButton),nh=a("vJtL"),rh=a("wSSu"),sh=a.n(rh),ih=(a("wMxR"),new x.b("coachmarks")),oh=150,ch=-500,lh={children:void 0,className:void 0,position:"right",delay:0,content:"",zIndex:"above_fs",onContinue:r.a,onShow:r.a,onSkip:r.a,hasCloseButton:!0,hasSkipLink:!0,hasSkipButton:!1,skipButtonText:"",skipLinkPre:"",skipLinkText:"",continueButtonText:"",title:"",shouldShow:!1};class coachmark_DeprecatedCoachmark extends s.PureComponent{constructor(){super(),this.state={isShowing:!1,contentsRect:null},this.setCoachmarkedContentRef=this.setCoachmarkedContentRef.bind(this),this.setCoachmarkRef=this.setCoachmarkRef.bind(this),this.maybeShowCoachmark=this.maybeShowCoachmark.bind(this),this.measureContents=this.measureContents.bind(this),this.onSkipClick=this.onSkipClick.bind(this),this.onCloseClick=this.onCloseClick.bind(this),this.onContinueClick=this.onContinueClick.bind(this),this.containClickEvents=this.containClickEvents.bind(this),this.onResize=Object(td.a)(this.measureContentsAndSetState.bind(this),oh,{maxWait:oh})}componentWillUnmount(){this.hideCoachmark(),window.clearTimeout(this.delayTimer),this.onResize.cancel(),this.listenerInstalled&&(window.removeEventListener("resize",this.onResize),this.listenerInstalled=!1)}onCloseClick(e){this.hideCoachmark(),this.props.onSkip(e,"CLOSE")}onContinueClick(e){this.hideCoachmark(),this.props.onContinue(e)}onSkipClick(e){this.hideCoachmark(),this.props.onSkip(e,"SKIP")}setCoachmarkRef(e){this.coachmark=e}setCoachmarkedContentRef(e){this.coachmarkedContent=e}UNSAFE_componentWillMount(){this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay)}UNSAFE_componentWillReceiveProps(e){this.props.shouldShow!==e.shouldShow&&!0===e.shouldShow?this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay):this.props.shouldShow!==e.shouldShow&&!1===e.shouldShow&&this.hideCoachmark()}containClickEvents(e){e.stopPropagation()}hideCoachmark(){this.setState(()=>({isShowing:!1,contentsRect:null})),window.removeEventListener("resize",this.onResize),this.listenerInstalled=!1}maybeShowCoachmark(){(Object(nh.a)(this.props.shouldShow)?this.props.shouldShow():this.props.shouldShow)?(this.setState(()=>({isShowing:!0,contentsRect:this.measureContents()})),window.addEventListener("resize",this.onResize),this.listenerInstalled=!0,this.props.onShow()):this.hideCoachmark()}measureContents(){return this.coachmarkedContent?Object(rh.findDOMNode)(this.coachmarkedContent).getBoundingClientRect():null}measureContentsAndSetState(){this.setState(()=>({contentsRect:this.measureContents()}))}renderCloseButton(){return this.props.hasCloseButton?i.a.createElement(jt.c,{className:"p-coachmark__close_btn","data-qa":"coachmark_close_btn",onClick:this.onCloseClick,"aria-label":ih.t("Close")},i.a.createElement(We.a,{type:"times"})):null}renderContent(){return i.a.createElement("div",{className:"p-coachmark__content"},this.props.content)}renderFooter(){var e=this.props.hasSkipLink?"p-coachmark__footer":l()("p-coachmark__footer","margin_top_100"),t=this.props.continueButtonText||ih.t("Got It",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0"});return i.a.createElement("div",{className:e},this.renderSkipLink(),this.renderSkipButton(),i.a.createElement(jt.d,{onClick:this.onContinueClick,className:"p-coachmark__continue_button","data-qa":"coachmark_continue_btn"},t))}renderSkipButton(){return this.props.hasSkipButton?i.a.createElement(jt.d,{onClick:this.onSkipClick,type:"outline",className:"p-coachmark__skip_button margin_right_50","data-qa":"coachmark_skip_btn"},this.props.skipButtonText):null}renderSkipLink(){if(!this.props.hasSkipLink)return null;var e=this.props.skipLinkPre||ih.t("Done?"),t=this.props.skipLinkText||ih.t("Click here to skip");return i.a.createElement("div",{className:"p-coachmark__skip_link"},i.a.createElement("span",null,e),e&&" ",i.a.createElement(jt.c,{className:"p-coachmark__skip_link_button","data-qa":"coachmark_skip_link",onClick:this.onSkipClick},t))}renderTitle(){return i.a.createElement("h3",{className:"p-coachmark__title"},this.props.title)}render(){var{children:e,position:t,zIndex:a}=this.props,{isShowing:n,contentsRect:r}=this.state,s=l()("p-coachmark","p-coachmark--".concat(t),this.props.className),o=n&&i.a.createElement(qo.a,{isOpen:n,position:t,targetBounds:r,allowanceX:ch,allowanceY:ch,zIndex:a,key:"coachmark-popover",onClose:this.onCloseClick},i.a.createElement("div",{className:s,"data-qa":"coachmark",onClick:this.containClickEvents,ref:this.setCoachmarkRef,role:"presentation"},i.a.createElement("div",{className:"p-coachmark__callout"}),this.renderCloseButton(),this.renderTitle(),this.renderContent(),this.renderFooter()));return i.a.cloneElement(e,{ref:this.setCoachmarkedContentRef},[...i.a.Children.toArray(e.props.children),o])}}coachmark_DeprecatedCoachmark.defaultProps=lh;var dh=coachmark_DeprecatedCoachmark,ph=(a("/6P7"),new x.b("channel_sidebar")),uh={coachmarkState:void 0,setJumperCoachmarkState:r.a,setUserPrefByApi:r.a,maybeShowOmniSwitcher:r.a,openFromQuickSwitcherCmd:r.a,historyNavigationEnabled:!1,useHistoryNavigation:!1};class quickswitcher_button_QuickswitcherButton extends s.Component{constructor(e){super(e),this.hideCoachmark=this.hideCoachmark.bind(this),this.hideButton=this.hideButton.bind(this),this.onShowContinue=this.onShowContinue.bind(this),this.onShowSkip=this.onShowSkip.bind(this),this.onHideContinue=this.onHideContinue.bind(this),this.onHideSkip=this.onHideSkip.bind(this),this.onButtonClick=this.onButtonClick.bind(this)}onShowContinue(e){e.stopPropagation(),this.clog("OK"),this.hideCoachmark()}onShowSkip(e,t){switch(e.stopPropagation(),t){case"SKIP":return this.clog("SKIP"),this.hideButton();case"CLOSE":return this.clog("CLOSE"),this.hideCoachmark();default:return null}}onHideContinue(e){e.stopPropagation(),this.clog("OK"),this.hideButton()}onHideSkip(e,t){switch(e.stopPropagation(),t){case"SKIP":return this.clog("SKIP"),this.hideCoachmark();case"CLOSE":return this.clog("CLOSE"),this.hideButton();default:return null}}onButtonClick(){this.props.openFromQuickSwitcherCmd({key:"button"})}clog(e){var{clogger:t,coachmarkState:a}=this.props,n={SHOW_BUTTON:"SIDEBAR_JUMPER_BUTTON_SHOW",HIDE_BUTTON:"SIDEBAR_JUMPER_BUTTON_HIDE"}[a];t.track("SIDEBAR_JUMPER_COACHMARK",{contexts:{ui_context:{action:e,step:n}}})}hideCoachmark(){this.props.setJumperCoachmarkState(null)}hideButton(){this.hideCoachmark(),this.props.setUserPrefByApi({pref:"show_sidebar_quickswitcher_button",value:!1}),this.props.setUserPrefByApi({pref:"k_key_omnibox_auto_hide_count",value:5})}maybeRenderCoachmark(e){var t={SHOW:{title:ph.rt("Get around Slack faster <sparkles></sparkles>",null,e=>{var{tag:t,key:a}=e;return"sparkles"===t?i.a.createElement(Vr.b,{key:a,text:":sparkles:",emojiSize:Vr.a.MEDIUM}):null}),content:ph.rt("To jump to a channel, person, or file \u2014 or even kick off a Slack search \u2014 try using the <strong>Quick Switcher</strong>. Summon it with this button or {shortcut}.",{shortcut:Object(ve.q)()?"\u2318K":"Ctrl+K",fallbackHash:"e5c4c0b492d4a5244f99eabd8b8d5bc558e93e55"}),skipLinkText:ph.t("Hide the sidebar button"),continueButtonText:ph.t("OK")},HIDE:{title:ph.t("You\u2019re a pro at keyboard shortcuts"),content:ph.rt("Looks like you\u2019ve gotten the hang of using {shortcut} to summon the Quick Switcher. If you\u2019d like, you can gain back some sidebar space by hiding the <strong>Jump to</strong> button.",{shortcut:Object(ve.q)()?"\u2318K":"Ctrl+K"}),skipLinkText:ph.t("No thanks, I like the button"),continueButtonText:ph.t("Hide Button")}},a={skipLinkPre:"",position:"right-bottom",shouldShow:!0,hasCloseButton:!1,className:"p-channel_sidebar__jumper_coachmark"};switch(this.props.coachmarkState){case"SHOW_BUTTON":return this.clog("IMPRESSION"),i.a.createElement(dh,Object(n.a)({},a,t.SHOW,{onContinue:this.onShowContinue,onSkip:this.onShowSkip}),e);case"HIDE_BUTTON":return this.clog("IMPRESSION"),i.a.createElement(dh,Object(n.a)({},a,t.HIDE,{onContinue:this.onHideContinue,onSkip:this.onHideSkip}),e);default:return e}}render(){var{historyNavigationEnabled:e,useHistoryNavigation:t}=this.props,a=Object(ve.q)()?"\u2318K":"Ctrl+K",n=ph.t("Quick Switcher ({keyboardShortcut})",{keyboardShortcut:a,fallbackHash:"66d3ce0aa57a3b14881f5588807ccbd726af7a15",fallbackHashNs:"quick_switcher"}),r=i.a.createElement(jt.c,{className:"p-channel_sidebar__jumper",onClick:this.onButtonClick,"aria-label":n},i.a.createElement("div",{className:"p-channel_sidebar__jumper_left"},i.a.createElement(We.a,{type:"filter",inherit:!0,align:"baseline",className:"p-channel_sidebar__jumper_icon"}),ph.t("Jump to...",{note:"This label should be brief. It needs to fit in a 192px wide container."})),!t&&i.a.createElement("span",{className:"p-channel_sidebar__jumper_keys"},a));return e?r:this.maybeRenderCoachmark(r)}}quickswitcher_button_QuickswitcherButton.defaultProps=uh;var hh=Object(d.b)(e=>({coachmarkState:Object(Yd.i)(e),clogger:Object(ne.a)({state:e}),historyNavigationEnabled:Object(ip.a)(e),useHistoryNavigation:Object(ip.b)(e)}),e=>({setJumperCoachmarkState:function(){return e(Object(Yd.q)(...arguments))},setUserPrefByApi:function(){return e(Object(Ve.f)(...arguments))},maybeShowOmniSwitcher:function(){return e(Object(eh.a)(...arguments))},openFromQuickSwitcherCmd:function(){return e(Object(Tl.i)(...arguments))}}))(quickswitcher_button_QuickswitcherButton),mh=a("vuMC"),bh=new x.b("channel_sidebar"),_h=e=>{var t=bh.t("Navigation",{fallbackHash:"cf03cf2e9cdf95a20af09137dfb9071db0c31bf2",fallbackHashNs:"shortcuts_flexpane"});return i.a.createElement("div",{className:"p-channel_sidebar__navigation_bar",role:"toolbar","aria-orientation":"vertical","aria-label":t},!(e.shouldUseChannelSections&&e.isOrganizing)&&i.a.createElement(s.Fragment,null,i.a.createElement(hh,null),e.useHistoryNavigation&&i.a.createElement(mh.a,null)))};_h.defaultProps={useHistoryNavigation:!1,shouldUseChannelSections:!1,isOrganizing:!1};var gh=Object(d.b)(e=>({shouldUseChannelSections:Object(N.a)(e),isOrganizing:oa(e)}),{})(_h),fh=a("uPpK"),vh=a("3zPy"),Oh=a.n(vh),yh=a("lfjV"),Ch=a("iGrU"),jh=a("rCFu"),Eh=a("oUPN"),kh=e=>e.shouldUseChannelSections&&e.isOrganizing?null:i.a.createElement(jt.c,{className:l()("p-channel_sidebar__section_heading p-channel_sidebar__section-heading--browse p-channel_sidebar__section_heading_label--clickable",{"p-channel_sidebar__section_heading--collapsed":!e.iap1MainMenuIsVisible}),role:"group",onClick:()=>e.setIAP1MainMenuIsVisible(!e.iap1MainMenuIsVisible)},i.a.createElement(We.b,{className:"p-channel_sidebar__section_heading_expand","data-qa":"channel-section-collapse",type:"chevron-medium-right",size:"inherit",inline:!0}),i.a.createElement("span",{className:"p-channel_sidebar__section_heading_label"},e.iap1MainMenuIsVisible?"Less":"More"));kh.defaultProps={shouldUseChannelSections:!1,isOrganizing:!1};var Sh=Object(d.b)(e=>({iap1MainMenuIsVisible:Object(Yd.h)(e),shouldUseChannelSections:Object(N.a)(e),isOrganizing:oa(e)}),e=>({setIAP1MainMenuIsVisible:function(){return e(Object(Yd.p)(...arguments))}}))(kh),Ih=a("0Qg5"),wh=a("lwWk"),Th=a("ESRc"),Nh=a("eD8c"),Ph={};var Ah=Object(Nt.a)(function(e,t){var a=Ph[e.teamId];return a||(a={},Ph[e.teamId]=a),function(){var n=t({eventId:arguments.length<=0?void 0:arguments[0],payload:arguments.length<=1?void 0:arguments[1]});a[n]||(a[n]=!0,e.track(...arguments))}}),Mh=new x.b("channel_sidebar"),xh={selectItem:r.a,dismissInstalledAppDmSuggestion:r.a,featureSidebarVirtualized:!1,clogger:{track:r.a}},Rh=e=>{var{eventId:t,payload:a}=e;return"".concat(t,"-").concat(a.contexts.ui_context.action,"-").concat(a.contexts.core.app_id)},Dh=e=>{var{action:t,appId:a}=e;return{contexts:{ui_context:{action:t},core:{app_id:a}}}};function Fh(e){var{id:t,name:a,appId:n,teamDomain:r,startImByMemberId:o,dismissInstalledAppDmSuggestion:c,featureSidebarContextMenu:d,featureSidebarVirtualized:p,clogger:u}=e;Object(s.useEffect)(()=>{Ah(u,Rh)(ie.EventId.APP_SIDEBAR,Dh({action:ie.UiAction.IMPRESSION,appId:n}))});var[h,m]=Object(s.useState)(!1),b=Object(s.useCallback)(e=>{e.preventDefault(),u.track(ie.EventId.APP_SIDEBAR,Dh({action:ie.UiAction.CLICK,appId:n})),o({memberId:t})},[u,n,o,t]),_=Object(s.useCallback)(()=>c({memberId:t,appId:n}),[n,c,t]),g=Object(s.useCallback)(()=>[{label:Mh.t("Dismiss app"),click:_}],[_]),f=Object(s.useCallback)(e=>{e.target.offsetWidth<e.target.scrollWidth&&m(!0)},[m]),v=p?-1:void 0,O=i.a.createElement(jt.c,{onClick:_,className:"p-channel_sidebar__close","aria-label":p?void 0:Mh.t("Dismiss app"),"aria-hidden":!!p||void 0,tabIndex:v},i.a.createElement(We.a,{type:"times-circle-medium"})),y=i.a.createElement("div",{className:"p-channel_sidebar__close_container"},i.a.createElement(wh.a,{href:Object(B.n)({channelId:t,teamDomain:r}),className:"p-channel_sidebar__channel p-channel_sidebar__channel--suggested",onClick:b,"data-qa-channel-sidebar-channel":!0,"data-qa-channel-sidebar-channel-id":t,draggable:!1,"data-drag-type":"channel","data-drag-id":t,tabIndex:v,role:p?"presentation":void 0},i.a.createElement(yt.a,{className:"p-channel_sidebar__presence_icon",memberId:t,enablePresenceSubscriptions:!1,inline:!1}),i.a.createElement(qe.c,{delay:qe.a,position:"top-left",tip:a,tipClassName:l()({hidden:!h})},i.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name",onMouseEnter:f},a))),O);return d?i.a.createElement(Nh.a,{getTemplate:g},y):y}Fh.defaultProps=xh;var Lh=Object(d.b)((e,t)=>{var{id:a}=t,n=Object(Ca.d)(e,a,!1);return{featureSidebarContextMenu:Object(h.m)(e,"feature_sidebar_context_menu"),teamDomain:Object(Se.d)(e).domain,name:Object(Fe.W)(e,a),appId:Object(Fe.p)(n),clogger:Object(ne.a)({state:e}),featureSidebarVirtualized:Object(h.m)(e,"feature_sidebar_virtualized")}},e=>Object(Ac.b)({dismissInstalledAppDmSuggestion:Th.a,startImByMemberId:ns.startImByMemberId},e))(Fh),Uh=a("NZ+B"),Bh=a("jkD3"),Hh=a("IEnm"),Wh=Object(xt.b)("Dismiss suggested channel from channels list",function(e,t){var{channelId:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(Hh.d)({ids:[a]}));var n=Object(Ke.i)(t()).split(","),r=n.indexOf(a);-1!==r&&(n.splice(r,1),e(Object(Ve.f)({pref:"newxp_suggested_channels",value:n.join(",")})))});Wh.meta={name:"dismissSuggestedChannel",key:"actionsDismissSuggestedChannelDismissSuggestedChannel",description:"Dismiss suggested channel from channels list"},Wh.propTypes={channelId:o.default.string.isRequired};var qh=Wh,Gh=a("WIdh"),Kh=a("weu1"),Vh=new x.b("channel_sidebar");function zh(){var{type:e,displayName:t,isShared:a,isOrgShared:n,isYou:r,isMuted:s,isSuggested:i,hasUnreads:o,hasDraft:c,isArchived:l,unreadCount:d,badgeCount:p,isSelected:u,userActive:h,isTyping:m,isThread:b,canPost:_=!0,featureAnnounceOnly:g=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=[u?Vh.t("selected"):null];"channel"===e?f.push(a||n?Vh.t("shared channel"):Vh.t("channel")):"private"===e?f.push(Vh.t("private channel")):"mpim"===e?f.push(Vh.t("group direct message")):"im"===e&&(f.push(Vh.t("direct message")),f.push(h?Vh.t("active"):Vh.t("away"))),l&&f.push(Vh.t("archived")),s&&f.push(Vh.t("muted")),!_&&g&&f.push(Vh.t("read only",{fallbackHash:"1d8d39a6e91a5d579d831544fb5c2b08d7ea8d5d"})),i&&f.push(Vh.t("suggested")),o&&d&&!p&&f.push(Vh.t("{count} unread {count, plural, =1 {message} other {messages}}",{count:d})),p&&f.push(Vh.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:p})),c&&f.push(Vh.t("has draft")),m&&f.push(Vh.t("typing"));var v=(()=>r?Vh.t("{name} (you)",{name:t}):!b||"channel"!==e&&"private"!==e?!b||"mpim"!==e&&"im"!==e?t:Vh.t("Thread with {name}",{name:t}):Vh.t("Thread in {name}",{name:t}))(),O=Object(Kh.a)(Object(Vd.a)(f,Vu.a),", ");return"".concat(v," (").concat(O,")")}var Yh=a("ICFZ");function Qh(e){var{channelId:t,channelSectionChannelIds:a,isCollapsed:n}=e;return!!n||(t?1+a.indexOf(t):0)<Math.floor(a.length+1)/2}var Xh="CHANNEL-SIDEBAR";var Jh={channel:o.default.object,featureSonicPresenceManager:o.default.bool,isFrozenAndInGracePeriod:o.default.bool,isSelected:o.default.bool,isTyping:o.default.bool,showDraft:o.default.bool},Zh={channel:void 0,featureSonicPresenceManager:!1,isFrozenAndInGracePeriod:!1,isSelected:!1,isTyping:!1,showDraft:!1};class channel_prefix_ChannelPrefix extends Mr.a{render(){var{channel:e,featureSonicPresenceManager:t,isFrozenAndInGracePeriod:a,isSelected:n,isTyping:r,showDraft:s}=this.props;if(function(e){var{channel:t,hasDraft:a,isSelected:n,isTyping:r}=e;return!(!Object(B.hb)(t)||Object(B.Hb)(t)||a&&!n||r&&!n||Object(B.X)(t)&&!Object(B.db)(t))}({channel:e,hasDraft:s,isSelected:n,isTyping:r})){var o=Object(B.G)(e)||e.user_id;return i.a.createElement(yt.a,{className:"p-channel_sidebar__presence_icon","data-qa":"sidebar-channel-presence-prefix",enablePresenceSubscriptions:t||Object(mi.a)(),inline:!1,memberId:o})}var c,d=l()("p-channel_sidebar__channel_icon_prefix",{"p-channel_sidebar__channel_icon_prefix--im-slackbot":Object(B.Hb)(e),"p-channel_sidebar__channel_icon_prefix--typing":r&&!n});if(r&&!n)return i.a.createElement("div",{"data-qa":"sidebar-channel-icon-prefix",className:d});if(s)c="pencil";else if(!Object(B.X)(e)||a||Object(B.db)(e)&&Object(B.jb)(e))if(Object(B.Bb)(e))c="lock-small";else if(Object(B.pb)(e)){var p=Object(B.K)(e)||0;c="multiparty-dm-".concat(p)}else c=Object(B.Hb)(e)?"heart":"channel-pane-hash";else c="archived-channel";return i.a.createElement(We.b,{className:d,"data-qa":"sidebar-channel-icon-prefix",inline:!0,size:"inherit",type:c})}}channel_prefix_ChannelPrefix.propTypes=Jh,channel_prefix_ChannelPrefix.defaultProps=Zh;var $h=channel_prefix_ChannelPrefix,em=a("HiDb"),tm=new x.b("channel_sidebar"),am={channel:o.default.object,displayName:o.default.string,isYou:o.default.bool,memberPresences:o.default.arrayOf(o.default.string),members:o.default.arrayOf(o.default.string),userActive:o.default.bool},nm={channel:void 0,displayName:"",isYou:!1,memberPresences:null,members:void 0,userActive:!0};class channel_name_ChannelName extends Mr.a{constructor(e){super(e),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.state={isTruncated:!1}}handleMouseEnter(e){e.target.offsetWidth<e.target.scrollWidth&&this.setState(()=>({isTruncated:!0}))}buildImName(){var{channel:e,isYou:t}=this.props,a=Object(B.G)(e)||e.user_id;return this.renderName(i.a.createElement(i.a.Fragment,null,i.a.createElement(Ct.b,{memberId:a}),i.a.createElement(Wr.a,{id:a}),t&&i.a.createElement("span",{className:"p-channel_sidebar__you_label","data-qa":"channel_sidebar_name_you"},tm.t("(you)"))))}buildMpimName(){var{channel:e,members:t,memberPresences:a}=this.props;if(!Object(B.pb)(e)||!t||!a)return null;var n=Object(em.a)(t,(e,a)=>[i.a.createElement(Wr.a,{id:e,key:e}),a<t.length-1?", ":null]);return this.renderName(n)}renderName(e){var{channel:t,userActive:a,displayName:n}=this.props,{isTruncated:r}=this.state,s=n.toString().replace(/ /g,"-").toLowerCase();return i.a.createElement(qe.c,{delay:qe.a,position:"top-left",tip:e,tipClassName:l()({hidden:!r})},i.a.createElement("span",{dir:"auto",className:l()("p-channel_sidebar__name",{"p-channel_sidebar__name--away":Object(B.hb)(t)&&!a}),"data-qa":"channel_sidebar_name_".concat(s),onMouseEnter:this.handleMouseEnter},e))}render(){var{channel:e,displayName:t}=this.props;return Object(B.hb)(e)?this.buildImName():Object(B.pb)(e)?this.buildMpimName():this.renderName(t)}}channel_name_ChannelName.propTypes=am,channel_name_ChannelName.defaultProps=nm;var rm=channel_name_ChannelName,sm=a("EetU"),im=a("mM05"),om=a.n(im),cm=a("YaVv"),lm=a("UOab");var dm=a("85z6"),pm={className:void 0,draftText:void 0,maxCharacters:void 0};function um(e){var{className:t,draftText:a,maxCharacters:n}=e;return i.a.createElement(Kr.a,{className:t,customContentHandler:e=>e.map(e=>!function(){var{text:e,type:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!e||e.trim())||"paragraph_break"===t||"line_break"===t||"space_hard"===t}(e)?e:{text:" "}),emojiSize:dm.a.SMALL,maxCharacters:n,noHighlights:!0,noJumbomoji:!0,stopAnimations:!0,text:a})}um.defaultProps=pm;var hm=Object(d.b)(function(e,t){var a,{draftId:n}=t,r=Object(O.d)(e,n);if(r){var s=Object(Lp.k)(r),i=new om.a(s),o=Object(cm.a)(e,i);a=Object(lm.a)(e,o.blocks)}return{draftText:a}})(um),mm=new x.b("channel_sidebar"),bm={badgeCount:0,channel:void 0,featureComposeFlow:!1,isIAP1Enabled:!1,showDraft:!1};class channel_suffix_ChannelSuffix extends i.a.PureComponent{renderSharedIcon(){var{channel:e,isIAP1Enabled:t}=this.props;return t?null:i.a.createElement(Dr.a,{channel:e,className:"p-channel_sidebar__channel_icon_suffix","data-qa":"sidebar-channel-icon-suffix",inherit:!0,inline:!0,forceNonBaseline:!0})}renderDraft(){var{channel:e,featureComposeFlow:t,showDraft:a}=this.props;return t&&a?i.a.createElement(qe.c,{tip:()=>i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement("strong",null,mm.t("Draft"))),i.a.createElement("div",{className:"c-tooltip__subtitle"},Object(x.e)(t),i.a.createElement(hm,{draftId:e.id,maxCharacters:50}),Object(x.d)(t)))},i.a.createElement(We.b,{className:"p-channel_sidebar__channel_draft_suffix",inline:!0,size:"inherit",type:"pencil-filled"})):null}renderBadge(){var{badgeCount:e}=this.props;return e<=0?null:i.a.createElement(sm.b,{count:e,className:"p-channel_sidebar__badge","data-qa":"sidebar-channel-badge-suffix"})}render(){return i.a.createElement(i.a.Fragment,null,this.renderDraft(),this.renderSharedIcon(),this.renderBadge())}}channel_suffix_ChannelSuffix.defaultProps=bm;var _m=channel_suffix_ChannelSuffix;function gm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var fm=new x.b("channel_sidebar"),vm={channel:o.default.object.isRequired,isYou:o.default.bool,isMuted:o.default.bool,isSuggested:o.default.bool,hasDraft:o.default.bool,suffix:o.default.node,hideCloseButton:o.default.bool,isFrozenAndInGracePeriod:o.default.bool,displayName:o.default.string,teamDomain:o.default.string,appId:o.default.string,botId:o.default.string,isSelected:o.default.bool,badgeCount:o.default.number,userActive:o.default.bool,selectItem:o.default.func,closeIM:o.default.func,dismissSuggestedChannel:o.default.func,isTyping:o.default.bool,members:o.default.arrayOf(o.default.string),memberPresences:o.default.arrayOf(o.default.string),onContextMenu:o.default.func,featureSidebarContextMenu:o.default.bool,index:o.default.number.isRequired,sidebarFoldersIsEnabled:o.default.bool,onDragStart:o.default.func,onDragEnd:o.default.func,onDrop:o.default.func,onDragOver:o.default.func,featureSonicPresenceManager:o.default.bool,featureCopyChannelName:o.default.bool,featureCopyChannelLink:o.default.bool,featureComposeFlowSidebar:o.default.bool,featureComposeFlow:o.default.bool,showDraftsPageSidebar:o.default.bool,isIAP1Enabled:o.default.bool,clogger:o.default.object.isRequired,canPostInChannel:o.default.bool,featureAnnounceOnly:o.default.bool,featureSidebarVirtualized:o.default.bool,onItemSelected:o.default.func,maybeLeaveChannel:o.default.func,muteChannelById:o.default.func,unmuteChannelById:o.default.func,updateStar:o.default.func,copyChannelNameById:o.default.func,featureChannelSections:o.default.bool,shouldUseChannelSections:o.default.bool,isOrganizing:o.default.bool,setIsOrganizing:o.default.func,isOrganizingSelected:o.default.bool,setOrganizingSectionItemSelected:o.default.func,channelSection:Ni.p,connectDragSource:o.default.func,connectDropTarget:o.default.func,lastActiveDropTargetForChannelDrag:o.default.shape({channelSectionId:o.default.string}),lastActiveDropTargetForChannelSectionDrag:o.default.shape({channelSectionId:o.default.string,isAfter:o.default.bool}),isActiveDropTargetOfChannelDrag:o.default.bool,moveManyChannelsToNewSection:o.default.func,removeChannelSectionChannel:o.default.func,openModal:o.default.func},Om={isSelected:!1,isYou:!1,isMuted:!1,isSuggested:!1,hasDraft:!1,suffix:void 0,hideCloseButton:void 0,isFrozenAndInGracePeriod:!1,appId:void 0,botId:void 0,displayName:"",badgeCount:0,userActive:!0,selectItem:r.a,closeIM:r.a,dismissSuggestedChannel:r.a,isTyping:!1,members:null,memberPresences:null,onContextMenu:r.a,teamDomain:"",featureSidebarContextMenu:!1,sidebarFoldersIsEnabled:!1,onDragStart:r.a,onDragEnd:r.a,onDrop:r.a,onDragOver:r.a,featureSonicPresenceManager:!1,featureCopyChannelName:!1,featureComposeFlow:!1,featureComposeFlowSidebar:!1,showDraftsPageSidebar:!1,isIAP1Enabled:!1,clogger:{},canPostInChannel:!0,featureAnnounceOnly:!1,featureSidebarVirtualized:!1,onItemSelected:r.a,maybeLeaveChannel:r.a,muteChannelById:r.a,unmuteChannelById:r.a,updateStar:r.a,copyChannelNameById:r.a,featureChannelSections:!1,shouldUseChannelSections:!1,isOrganizing:!1,setIsOrganizing:r.a,isOrganizingSelected:!1,setOrganizingSectionItemSelected:r.a,channelSection:void 0,connectDragSource:Vu.a,connectDropTarget:Vu.a,lastActiveDropTargetForChannelDrag:void 0,lastActiveDropTargetForChannelSectionDrag:void 0,isActiveDropTargetOfChannelDrag:!1,moveManyChannelsToNewSection:()=>Promise.resolve(),removeChannelSectionChannel:()=>Promise.resolve(),openModal:r.a},ym=Object(Wa.b)();class channel_Channel extends Mr.a{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.closeIM=this.closeIM.bind(this),this.closeSuggestedChannel=this.closeSuggestedChannel.bind(this),this.getContextMenuTemplate=this.getContextMenuTemplate.bind(this),this.linkRef=i.a.createRef()}componentDidMount(){this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}componentDidUpdate(e){if(!e.isSelected&&this.props.isSelected&&this.props.onItemSelected(this.linkRef.current),this.props.shouldUseChannelSections&&this.props.channelSection&&!e.isChannelDraggingOverChannel&&this.props.isChannelDraggingOverChannel&&this.props.lastActiveDropTargetForChannelDrag&&this.props.lastActiveDropTargetForChannelDrag.channelSectionId!==this.props.channelSection.id&&this.props.setLastActiveDropTargetForChannelDrag({channelSectionId:this.props.channelSection.id}),this.props.shouldUseChannelSections&&!e.isChannelSectionDraggingOverChannel&&this.props.isChannelSectionDraggingOverChannel){var t=this.props.channelSection&&this.props.channelSection.id,a=!Qh({isCollapsed:this.props.isCollapsed,channelId:this.props.channel.id,channelSectionChannelIds:this.props.channelSectionChannelIds});this.props.setLastActiveDropTargetForChannelSectionDrag({channelSectionId:t,isAfter:a})}}onClick(e){var{channel:t,channelSection:a,shouldUseChannelSections:n,isOrganizing:r}=this.props;if(e.preventDefault(),ym.action(Xh,"Selected ".concat(t.id)),n&&r){var s=a&&a.id?a.id:"default";this.props.setOrganizingSectionItemSelected({channelSectionId:s,channelId:t.id,isSelected:!this.props.isOrganizingSelected})}else this.props.selectItem(t.id),this.clogClick()}closeIM(e){var{channel:t}=this.props;e.preventDefault(),e.stopPropagation(),ym.action(Xh,"Closed ".concat(t.id)),this.props.closeIM({channelId:t.id})}closeSuggestedChannel(e){var{channel:t,index:a,isSelected:n,clogger:r,dismissSuggestedChannel:s}=this.props;e.preventDefault(),e.stopPropagation(),ym.action(Xh,"Closed suggested channel ".concat(t.id)),s({channelId:t.id}),r.track("SIDEBAR_ITEM_SUGGESTED_CLOSE",{item_type:t.id[0],item_id:t.id,index:a,is_selected:n})}clogClick(){var{channel:e,index:t,isMuted:a,isSuggested:n,isSelected:r,badgeCount:s,appId:i,botId:o,clogger:c,isIAP1Enabled:l}=this.props;c.track("SIDEBAR_ITEM_CLICK",{item_type:e.id[0],item_id:e.id,index:t,is_muted:a,is_suggested:n,is_starred:Object(B.Ib)(e),has_unreads:Object(B.Ob)(e),is_archived:Object(B.X)(e),is_frozen:Object(B.db)(e),is_selected:r,badge_count:s,app_id:i,bot_id:o,is_iap1:l})}shouldShowClose(){var{channel:e,isSuggested:t,hasDraft:a,hideCloseButton:n}=this.props;return!n&&(!(!Object(B.jb)(e)&&!t)&&(!Object(B.Ob)(e)&&!a))}buildAriaLabel(){var{channel:e,displayName:t,isYou:a,isMuted:n,isSuggested:r,hasDraft:s,badgeCount:i,isSelected:o,userActive:c,isTyping:l,canPostInChannel:d,featureAnnounceOnly:p,featureSidebarVirtualized:u}=this.props;if(!u)return zh({type:Object(B.u)(e),displayName:t,isShared:Object(B.ab)(e),isOrgShared:Object(B.vb)(e),isYou:a,isMuted:n,isSuggested:r,hasUnreads:Object(B.Ob)(e),hasDraft:s,isArchived:Object(B.X)(e),unreadCount:Object(B.U)(e),badgeCount:i,isSelected:o,userActive:c,isTyping:l,canPost:d,featureAnnounceOnly:p})}getChannelLink(){var{channel:e,teamDomain:t}=this.props;return Object(B.n)({channelId:e.id,teamDomain:t,archive:!0})}getContextMenuTemplate(){var e,t,a,n,r,s,o,c,l,d,p,u,h,m,b=this,_=new x.b("menu"),{channel:g,channelSection:f,displayName:v,isMuted:O,canMute:y,maybeLeaveChannel:C,updateStar:j,muteChannelById:E,unmuteChannelById:k,copyChannelNameById:S,featureCopyChannelName:I,featureCopyChannelLink:w,featureChannelSections:T,shouldUseChannelSections:N,isOrganizing:P,setIsOrganizing:A}=this.props;Object(B.jb)(g)?(e=_.t("Star Conversation"),t="star_conversation",a=_.t("Unstar Conversation"),n="unstar_conversation",r=_.t("Mute Conversation"),s="mute_conversation",o=_.t("Unmute Conversation"),c="unmute_conversation",l=_.t("Close Conversation",{fallbackHash:"170fcb2077d0265d1095a0f459abb40ffb9cf16f",fallbackHashNs:"menu"}),d="leave_conversation"):(e=_.t("Star Channel"),t="star_channel",a=_.t("Unstar Channel"),n="unstar_channel",r=_.t("Mute {channel}",{channel:"#".concat(v)}),s="mute_channel",o=_.t("Unmute {channel}",{channel:"#".concat(v)}),c="unmute_channel",l=_.t("Leave {channel}",{channel:"#".concat(v)}),d="leave_channel",I&&(p=_.t("Copy Channel Name"),u="copy_channel_name"),w&&!Ia.W&&(h=_.t("Copy Channel Link"),m="copy_channel_link"));var M=[];if(T&&N){var R,D;if(P?(D=_.t("Stop organizing sidebar"),R="stop_organizing_sidebar"):(D=_.t("Organize sidebar"),R="organize_sidebar"),M.push({label:D,labelToClog:R,click:()=>A({isOrganizing:!P})}),P)return M;M.push({label:_.t("Add to new section\u2026"),labelToClog:"create_new_section",click:()=>this.props.openModal({element:i.a.createElement(wi,{action:Ci.MOVE,focusOnMount:!0,openedFromKeyboardShortcut:!1,onSubmit:e=>{var{emoji:t,text:a}=e;return this.props.moveManyChannelsToNewSection({emoji:t,name:a,channelIds:[g.id]})}})})}),!f||f.type!==Ni.g&&f.type!==Ni.h||M.push({label:_.t("Remove from section"),labelToClog:"remove_from_section",click:()=>this.props.removeChannelSectionChannel({channelSectionId:f.id,channelId:g.id})}),M.push({type:"separator"})}return Object(B.j)(g)&&(Object(B.Ib)(g)?M.push({label:a,labelToClog:n,click:()=>j(!1,{channel:g.id})}):M.push({label:e,labelToClog:t,click:()=>j(!0,{channel:g.id})})),(Object(B.nb)(g)||Object(B.Bb)(g))&&M.push({label:l,labelToClog:d,click:()=>C({channelId:g.id})}),y&&M.push({label:O?o:r,labelToClog:O?c:s,click:()=>O?k(g.id):E(g.id)}),p&&M.push({label:p,labelToClog:u,click:()=>S(g.id)}),h&&M.push({label:h,labelToClog:m,click:()=>{Object(Yh.c)(this.getChannelLink())}}),M.forEach(e=>{var t=e.click;e.click=function(){return b.props.clogger.track(ie.EventId.CONTEXT_MENU_ACTION,{contexts:{ui_context:{action:ie.UiAction.CLICK,ui_component:ie.UiComponent.SIDEBAR,ui_element:ie.UiElement.SIDEBAR_CHANNEL_ITEM}},label:e.labelToClog}),t(...arguments)}}),M}renderOrganizingCheckbox(){var{featureChannelSections:e,shouldUseChannelSections:t,isOrganizing:a,isOrganizingSelected:n}=this.props;return e&&t?i.a.createElement(We.b,{className:l()("p-channel_sidebar__organizing_checkbox",{"p-channel_sidebar__organizing_checkbox--not-organizing":!a,"p-channel_sidebar__organizing_checkbox--selected":n}),"data-qa":"organizing-checkbox-state",size:"inherit",inline:!0,type:n?"real-checkbox-checked":"real-checkbox-empty"}):null}render(){var{isYou:e,isMuted:t,isSuggested:a,badgeCount:r,isSelected:s,displayName:o,onContextMenu:c,featureSidebarContextMenu:d,featureSidebarVirtualized:p,isTyping:u,hasDraft:h,isFrozenAndInGracePeriod:m,featureSonicPresenceManager:b,featureComposeFlow:_,featureComposeFlowSidebar:g,showDraftsPageSidebar:f,canPostInChannel:v,memberPresences:O,members:y,userActive:C,isIAP1Enabled:j,channel:E,suffix:k,shouldUseChannelSections:S,isOrganizing:I,isOrganizingSelected:w,channelSection:T,lastActiveDropTargetForChannelDrag:N,lastActiveDropTargetForChannelSectionDrag:P,orderedChannelSections:A,channelSectionChannelIds:M,isAnyChannelDragging:x,isAnyChannelSectionDragging:R}=this.props,D=function(e){var{canPostInChannel:t,hasDraft:a,isSelected:n}=e;return a&&t&&!n}({canPostInChannel:v,hasDraft:h,isSelected:s}),F={};if(S&&T){var L=Object(bp.a)(M)===E.id,U=Object(bp.a)(A),H=U&&U.id===T.id;F["p-channel_sidebar__channel--drop_over_section"]=x&&N&&N.channelSectionId===T.id,F["p-channel_sidebar__channel--last_in_section"]=L,F["p-channel_sidebar__channel--drop_section_below"]=R&&L&&H&&P&&P.channelSectionId===T.id&&P.isAfter}var W=l()("p-channel_sidebar__channel",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gm(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gm(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({"p-channel_sidebar__channel--mpim":Object(B.pb)(E),"p-channel_sidebar__channel--im-slackbot":Object(B.Hb)(E),"p-channel_sidebar__channel--im-you":e,"p-channel_sidebar__channel--selected":S&&I?w:s,"p-channel_sidebar__channel--muted":t,"p-channel_sidebar__channel--suggested":a,"p-channel_sidebar__channel--unread":Object(B.Ob)(E)&&!Object(B.X)(E),"p-channel_sidebar__channel--draft_legacy":D&&!g,"p-channel_sidebar__channel--draft":D&&g&&f,"p-channel_sidebar__channel--typing":u&&!s},F)),q=i.a.createElement($h,{channel:E,featureSonicPresenceManager:b,isFrozenAndInGracePeriod:m,isSelected:s,isTyping:u,showDraft:!g&&!f&&D,"data-qa":"channel_prefix"}),G=k||i.a.createElement(_m,{badgeCount:r,channel:E,featureComposeFlow:_,isIAP1Enabled:j,showDraft:f&&D,"data-qa":"channel_suffix"}),K=i.a.createElement(rm,{channel:E,displayName:o,isYou:e,memberPresences:O,members:y,userActive:C,"data-qa":"channel_name"}),V=this.renderOrganizingCheckbox(),z={};this.props.shouldUseChannelSections?(this.props.connectDragSource(this.linkRef),this.props.connectDropTarget(this.linkRef)):z={draggable:this.props.sidebarFoldersIsEnabled,"data-drag-type":"channel","data-drag-id":E.id,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver};var Y=i.a.createElement(wh.a,Object(n.a)({href:this.getChannelLink(),ref:this.linkRef,className:W,onClick:this.onClick,onContextMenu:c,"data-user-count":Object(B.K)(E)||0,"data-qa-channel-sidebar-channel":!0,"data-qa-channel-sidebar-channel-is-selected":s,"data-qa-channel-sidebar-channel-id":E.id,"data-qa-channel-sidebar-channel-type":Object(B.u)(E),"data-qa-channel-sidebar-is-starred":Object(B.Ib)(E),"data-qa-channel-sidebar-is-you":e,"data-qa-channel-sidebar-priority":Object(B.P)(E),"aria-label":this.buildAriaLabel(),tabIndex:p?-1:void 0,role:p?"presentation":void 0},z),V,q,K,G);if(this.shouldShowClose()){var Q=fm.t("Close Direct Message with {name}",{name:o});a&&(Q=fm.t("Dismiss suggested channel"));var X=S&&I?null:i.a.createElement(jt.c,{onClick:a?this.closeSuggestedChannel:this.closeIM,className:"p-channel_sidebar__close","data-qa":"channel_item_close","aria-label":p?void 0:Q,"aria-hidden":!!p||void 0,tabIndex:p?-1:void 0},i.a.createElement(We.a,{type:"times-circle-medium"}));Y=i.a.createElement("div",{className:"p-channel_sidebar__close_container","data-qa":"channel_item_container"},Y,X)}return d?i.a.createElement(Nh.a,{getTemplate:this.getContextMenuTemplate,desktopAppOnly:!1},Y):Y}}channel_Channel.propTypes=vm,channel_Channel.defaultProps=Om;var Cm=channel_Channel,jm=["DRAG_CHANNEL_SIDEBAR_CHANNEL","DRAG_CHANNEL_SIDEBAR_SECTION_HEADING"],Em=Object(mi.a)()?Object(Bh.a)("DRAG_CHANNEL_SIDEBAR_CHANNEL",{beginDrag:e=>({channel:e.channel,channelSection:e.channelSection}),endDrag:e=>{e.setLastActiveDropTargetForChannelDrag({channelSectionId:null})},canDrag:e=>e.shouldUseChannelSections&&!e.isOrganizing},(e,t)=>({connectDragSource:e.dragSource(),isDragging:t.isDragging()}))(Cm):Cm,km=Object(mi.a)()?Object(zd.a)(jm,{},(e,t)=>{var a=t.getItemType(),n="DRAG_CHANNEL_SIDEBAR_CHANNEL"===a,r="DRAG_CHANNEL_SIDEBAR_SECTION_HEADING"===a,s=n&&t.isOver(),i=r&&t.isOver();return{connectDropTarget:e.dropTarget(),isAnyChannelDragging:n,isAnyChannelSectionDragging:r,isChannelDraggingOverChannel:s,isChannelSectionDraggingOverChannel:i}})(Em):Cm,Sm={closeIM:ns.closeChannelApi,dismissSuggestedChannel:qh,maybeLeaveChannel:is.a,muteChannelById:Zr.a,unmuteChannelById:Zr.b,updateStar:ii.a,copyChannelNameById:function(){return Object(ss.a)(...arguments)},setIsOrganizing:Kt.h,setOrganizingSectionItemSelected:Kt.k,setLastActiveDropTargetForChannelDrag:Kt.i,setLastActiveDropTargetForChannelSectionDrag:Kt.j,moveManyChannelsToNewSection:Bi,removeChannelSectionChannel:Ki,openModal:Ua.e},Im=(e,t)=>{var{id:a,isSelected:n,channelSection:r}=t,s=Object(L.e)(e,a),i=Object(N.a)(e);if(!s)return{featureSidebarContextMenu:Object(h.m)(e,"feature_sidebar_context_menu"),shouldUseChannelSections:i};var o,c=Object(B.u)(s),l="im"===c&&Object(Ke.k)(e,"show_typing")&&Object(Gh.f)(e,a).length>0,d=Object(B.G)(s),p="im"!==c||"active"===Object(ja.f)(e,d),u=Object(Ca.d)(e,d),m=Object(Fe.q)(u)||void 0,b=Object(Fe.p)(u)||void 0,g=Object(h.d)(e),f="mpim"===c&&(Object(Br.c)(e)?Object(B.L)(e,s):Object(B.H)(s)&&Object(Vd.a)(Object(B.H)(s),e=>e!==g)),v="mpim"===c&&f&&Object(ed.a)(f,t=>Object(ja.f)(e,t)),y=Object(h.m)(e,"feature_all_dm_mute")?Object(B.nb)(s)&&!Object(B.kb)(e,s):Object(B.nb)(s)&&(Object(B.Cb)(s)||Object(B.Bb)(s)),C=Object(B.w)(e,s,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),j=Object(Se.d)(e),E=Object(we.i)(j),k=Object(we.f)(j),S=Object(O.i)(e),I=Object(O.j)(e);return o=I?!!Object(O.d)(e,a):Object(B.x)(e,a),{channel:s,isSelected:Object(Uh.a)(n)?n:Object(_.a)(e)===a,isYou:Object(B.Tb)(g,s),isMuted:Object(xr.c)(e,a),isSuggested:!Object(B.nb)(s)&&Object(B.Jb)(e,s),hasDraft:o,isFrozenAndInGracePeriod:Object(B.eb)(E,s),appId:b,botId:m,displayName:C,badgeCount:Object(L.d)(e,s),userActive:p,isTyping:l,canPostInChannel:Object(sn.p)(e,a),featureAnnounceOnly:Object(h.m)(e,"feature_announce_only"),members:f||null,memberPresences:v||null,canMute:y,teamDomain:k,featureSidebarContextMenu:Object(h.m)(e,"feature_sidebar_context_menu"),featureCopyChannelName:Object(h.m)(e,"feature_copy_channel_name"),featureCopyChannelLink:Object(h.m)(e,"feature_copy_channel_link"),featureSonicPresenceManager:Object(h.m)(e,"feature_sonic_presence_manager"),featureComposeFlow:Object(O.g)(e),featureComposeFlowSidebar:S,showDraftsPageSidebar:I,isIAP1Enabled:Object(Rr.d)(e),clogger:Object(ne.a)({state:e}),featureSidebarVirtualized:Object(h.m)(e,"feature_sidebar_virtualized"),shouldUseChannelSections:i,featureChannelSections:Object(h.m)(e,"feature_channel_sections"),orderedChannelSections:Xt(e),isOrganizing:oa(e),isOrganizingSelected:ha(e,r&&r.id?r.id:"default",a),lastActiveDropTargetForChannelDrag:i?ba(e):void 0,lastActiveDropTargetForChannelSectionDrag:i?_a(e):void 0}},wm=Object(d.b)(Im,Sm,null,{withRef:!0})(Cm),Tm=Object(d.b)(Im,Sm,null,{withRef:!0})(km),Nm=a("wCpp"),Pm=a("wgy9"),Am=a("1Oqo"),Mm=new x.b("channel_sidebar"),xm={dispatch:r.a,featureComposeFlow:!1,isSelected:!1,onItemSelected:r.a,selectItem:r.a,featureSidebarVirtualized:!1};function Rm(e){var{dispatch:t,draft:a,featureComposeFlow:n,isSelected:r,onItemSelected:o,selectItem:c,featureSidebarVirtualized:d}=e,p=Object(Am.a)(),u=Object(s.useRef)();Object(s.useEffect)(()=>{o(u.current)},[r,o]);var h=Object(s.useMemo)(()=>n?Object(bs.a)(a)?"(".concat(Mm.t("unknown"),")"):Object(Lp.n)(a)?i.a.createElement(i.a.Fragment,null,Object(x.e)(n),i.a.createElement(hm,{className:"p-channel_sidebar__name",draftId:Object(Lp.d)(a),maxCharacters:50}),Object(x.d)(n)):"(".concat(Mm.t("New message"),")"):"",[a,n]);if(!n)return null;var m=d?-1:void 0;return i.a.createElement("div",{className:"p-channel_sidebar__close_container"},i.a.createElement(He.a,{className:l()("p-channel_sidebar__channel","p-channel_sidebar__channel--composer_draft",{"p-channel_sidebar__channel--selected":r}),onClick:()=>{var e=Object(Lp.d)(a);c("Pcomposer",{routeParams:{draftId:Object(Nm.b)(e)}}),p.track(ie.EventId.COMPOSE_FLOW,{draft_id:e,draft_action_source:"sidebar",draft_type:"composer",contexts:{ui_context:{action:ie.UiAction.CLICK,step:ie.UiStep.COMPOSE_FLOW_OPEN}}})},ref:u,tabIndex:m,role:d?"presentation":void 0},i.a.createElement(We.b,{size:"inherit",inline:!0,className:"p-channel_sidebar__channel_icon_prefix",type:"file"}),h),i.a.createElement(qe.c,{tip:Mm.t("Delete draft")},i.a.createElement(He.a,{className:"p-channel_sidebar__close",onClick:()=>{var e=Object(Lp.d)(a);t(Object(Up.b)({draftId:e})),p.track(ie.EventId.COMPOSE_FLOW,{draft_id:e,draft_action_source:"sidebar",draft_type:"composer",contexts:{ui_context:{action:ie.UiAction.CLICK,step:ie.UiStep.COMPOSE_FLOW_DELETE}}})},tabIndex:m,"aria-hidden":!!d||void 0},i.a.createElement(We.b,{className:"p-channel_sidebar__delete_icon",type:"trash"}))))}Rm.defaultProps=xm;var Dm,Fm=Object(d.b)(function(e,t){var{id:a}=t,n=Object(_.a)(e),r=Object(Pm.a)(e);return{draft:Object(O.d)(e,a),featureComposeFlow:Object(O.g)(e),isSelected:"Pcomposer"===n&&r===a,featureSidebarVirtualized:Object(h.m)(e,"feature_sidebar_virtualized")}})(Rm),Lm=a("hhak"),Um=new x.b("channel_sidebar");var Bm={dispatch:r.a,draftId:void 0,onItemSelected:r.a,selectItem:r.a,threadTs:void 0,featureComposeFlowSidebar:!1};function Hm(e){var{channelId:t,dispatch:a,draftId:n,featureComposeFlowSidebar:r,onItemSelected:o,selectItem:c,threadTs:l,featureSidebarVirtualized:d}=e,p=Object(Am.a)(),u=Object(s.useRef)();return Object(s.useEffect)(()=>{o(u.current)},[o]),r?i.a.createElement("div",{className:"p-channel_sidebar__close_container"},i.a.createElement(wm,{hideCloseButton:!0,id:t,index:0,isSelected:!1,suffix:l&&i.a.createElement(We.b,{className:"p-channel_sidebar__icon p-channel_sidebar__reply_icon",type:"small-reply"}),selectItem:()=>{l?(a(Object(Lm.a)({channelId:t,threadTs:l})),function(e,t){clearInterval(Dm);var a=Object(fp.d)(e,t);return a?Promise.resolve(a):new Promise(a=>{Dm=setInterval(()=>{var n=Object(fp.d)(e,t);n&&(clearInterval(Dm),a(n))},50)}).timeout(1e4)}(t,l).then(e=>{e.scrollIntoView()})):c(t),p.track(ie.EventId.COMPOSE_FLOW,{draft_id:n,draft_action_source:"sidebar",draft_type:l?"thread":"channel",contexts:{ui_context:{action:ie.UiAction.CLICK,step:ie.UiStep.COMPOSE_FLOW_OPEN}}})}}),i.a.createElement(qe.c,{tip:Um.t("Delete draft")},i.a.createElement(He.a,{className:"p-channel_sidebar__close",onClick:()=>{a(Object(Up.a)({channelId:t,threadTs:l})),p.track(ie.EventId.COMPOSE_FLOW,{draft_id:n,draft_action_source:"sidebar",draft_type:l?"thread":"channel",contexts:{ui_context:{action:ie.UiAction.CLICK,step:ie.UiStep.COMPOSE_FLOW_DELETE}}})},tabIndex:-1,"aria-hidden":!!d||void 0},i.a.createElement(We.b,{className:"p-channel_sidebar__delete_icon",type:"trash"})))):null}Hm.defaultProps=Bm;var Wm=Object(d.b)(function(e){return{featureComposeFlowSidebar:Object(O.i)(e),featureSidebarVirtualized:Object(h.m)(e,"feature_sidebar_virtualized")}})(Hm);function qm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Gm=new x.b("sonic_pilot");function Km(e){var{children:t,featureSonicPlaceholderLabels:a,unstyled:n,tooltipPosition:r}=e;if(!a)return t;if(Object(kt.a)()){var s=i.a.cloneElement(t,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qm(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qm(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t.props,{className:l()(t.props.className,{"c-button--sonic-placeholder":!n,"c-button-unstyled--sonic-placeholder":n})}),t.props.children);return i.a.createElement(qe.c,{tip:i.a.createElement("div",{className:"c-tooltip__sonic_placeholder","data-qa":"sonic-placeholder-text"},Gm.t("Coming soon")),position:r||"top",zIndex:"above_fs"},s)}return t}Km.defaultProps={unstyled:!1,tooltipPosition:void 0};var Vm=Object(d.b)(e=>({featureSonicPlaceholderLabels:Object(h.m)(e,"feature_sonic_placeholder_labels")}))(Km),zm=new x.b("channel_sidebar"),Ym={isSelected:!1,labelUnread:"",hasUnreads:!1,badgeCount:0,badgeProps:void 0,icon:void 0,selectItem:r.a,isDim:!1,qaLabel:"",disabledInSonic:!1,onItemSelected:r.a,onClick:r.a,className:"",renderLinkContent:null,featureSidebarVirtualized:!1};class link_Link extends s.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.linkRef=i.a.createRef(),this.state={}}componentDidMount(){this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}componentDidUpdate(e){!e.isSelected&&this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}onClick(e){Object(Wa.b)().action(Xh,"Selected ".concat(this.props.id)),this.props.selectItem(this.props.id,e),"function"==typeof this.props.onClick&&this.props.onClick()}render(){var{id:e,label:t,labelUnread:a,icon:r,hasUnreads:o,badgeCount:c,badgeProps:d,isSelected:p,isDim:u,qaLabel:h,disabledInSonic:m,className:b,renderLinkContent:_,featureSidebarVirtualized:g}=this.props,f=l()("p-channel_sidebar__link",{"p-channel_sidebar__link--all-unreads":"Vall_unreads"===e,"p-channel_sidebar__link--all-threads":"Vall_threads"===e,"p-channel_sidebar__link--search":"Vsearch"===e,"p-channel_sidebar__link--invites":"Vinvites"===e,"p-channel_sidebar__link--add-channel":"Vadd_channel"===e,"p-channel_sidebar__link--selected":p,"p-channel_sidebar__link--unread":o,"p-channel_sidebar__link--dim":u},b),v=o&&a?a:t,O=i.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name_".concat(h.toLowerCase())},v),y=Object(Vd.a)([p?zm.t("selected"):null,o&&!c?zm.t("has unreads"):null,c?zm.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:c}):null],Vu.a),C=v+(y.length?" (".concat(y.join(", "),")"):""),j=d||{},{className:E}=j,k=Object(ya.a)(j,["className"]),S=i.a.createElement(sm.b,Object(n.a)({className:l()("p-channel_sidebar__badge",E),count:c},k)),I=r&&i.a.createElement(We.b,{type:r,size:"inherit",className:"p-channel_sidebar__link__icon"}),w=i.a.createElement(jt.c,{role:g?"presentation":void 0,className:f,onClick:this.onClick,"aria-label":g?void 0:C,"data-sidebar-link-id":e,"data-qa-channel-sidebar-link-id":e,ref:this.linkRef,tabIndex:g?-1:void 0},_?_({icon:I,name:O,badge:S}):i.a.createElement(s.Fragment,null,I,O,S));return m?i.a.createElement(Vm,null,w):w}}link_Link.defaultProps=Ym;var Qm=link_Link,Xm=new x.b("channel_sidebar"),Jm=Object(d.b)(e=>({id:"Vall_threads",label:Xm.t("Threads"),labelUnread:Xm.t("Threads"),hasUnreads:Object(h.m)(e,"feature_incremental_unread_counts")?Object(Jd.j)(e):Object(Xd.c)(e),badgeCount:Object(h.m)(e,"feature_incremental_unread_counts")?Object(Jd.e)(e):Object(Xd.b)(e),isSelected:"Vall_threads"===Object(_.a)(e),featureSidebarVirtualized:Object(h.m)(e,"feature_sidebar_virtualized")}),null,null,{withRef:!0})(Qm),Zm=new x.b("channel_sidebar"),$m=Object(d.b)(e=>{var t=Object(h.m)(e,"feature_primary_search")&&Object(T.a)(e)?Zm.t("Search Results"):"",a=Object(h.m)(e,"feature_sidebar_virtualized");return{id:"Vsearch",label:t,isSelected:"Vsearch"===Object(_.a)(e),featureSidebarVirtualized:a}})(Qm),eb=a("QOdn"),tb=new x.b("channel_sidebar"),ab={isDim:!1,qaLabel:"",onClickClose:r.a,featureSidebarVirtualized:!1};class add_channel_link_AddChannelLink extends i.a.Component{constructor(e){super(e),this.onItemSelect=this.onItemSelect.bind(this)}onItemSelect(){var{clogger:e}=this.props;e.track("SIDEBAR_ITEM_CLICK",{contexts:{ui_context:{step:"ADD_CHANNEL",action:"click",ui_component:"SIDEBAR"}}}),this.props.openChannelBrowser()}render(){var{label:e,qaLabel:t,isDim:a,onClickClose:n,featureNewxp2798:r,featureSidebarVirtualized:s}=this.props,o=s?-1:void 0,c=r&&!s?tb.t("Hide Add Channel button"):null;return i.a.createElement("div",{className:"p-channel_sidebar__close_container"},i.a.createElement(Qm,{key:"Vadd_channel",id:"Vadd_channel",isDim:a,qaLabel:t,label:e,selectItem:this.onItemSelect,featureSidebarVirtualized:s}),i.a.createElement(He.a,{onClick:n,className:"p-channel_sidebar__close","aria-hidden":!!s||void 0,"aria-label":c,tabIndex:o},i.a.createElement(We.b,{type:"times-circle-medium"})))}}var nb={openChannelBrowser:function(){return Object(eb.a)(...arguments)}};add_channel_link_AddChannelLink.defaultProps=ab;var rb=Object(d.b)(e=>({clogger:Object(ne.a)({state:e}),featureNewxp2798:Object(h.m)(e,"feature_newxp_2798"),featureSidebarVirtualized:Object(h.m)(e,"feature_sidebar_virtualized")}),nb)(add_channel_link_AddChannelLink),sb={isBold:!1,badgeCount:void 0,badgeProps:void 0,isSelected:!1,isCloseButtonVisible:!1,onClickClose:r.a,selectItem:r.a,featureSidebarVirtualized:!1,isIAP1Enabled:!1,isIndented:!1},ib=e=>{var{id:t,views:a,isBold:r,isCloseButtonVisible:s,onClickClose:o,badgeCount:c,badgeProps:d,featureSidebarVirtualized:p,isIndented:u}=e,h=Object(ya.a)(e,["id","views","isBold","isCloseButtonVisible","onClickClose","badgeCount","badgeProps","featureSidebarVirtualized","isIndented"]),m=Object(nh.a)(a.label)&&a.label(),{icon:b,getCloseLinkLabel:_}=a.sidebar||{},g=i.a.createElement(Qm,Object(n.a)({},h,{id:t,label:m,className:l()("p-channel_sidebar__link--page_".concat(t.toLowerCase()," position_relative"),{"p-channel_sidebar__link--indented":u}),icon:b,hasUnreads:r,badgeCount:c,badgeProps:d,qaLabel:"page_".concat(t),featureSidebarVirtualized:p}));if(!s)return g;var f=Object(nh.a)(_)?_():"",v=i.a.createElement(He.a,{onClick:o,className:"p-channel_sidebar__close p-channel_sidebar__close--circle","aria-label":p?void 0:f,"aria-hidden":!!p||void 0,tabIndex:p?-1:void 0},i.a.createElement(We.b,{type:"times-circle-medium"}));return i.a.createElement("div",{className:"p-channel_sidebar__close_container"},g,v)};ib.defaultProps=sb;var ob=Object(d.b)((e,t)=>{var{id:a}=t,n=Object(Y.a)(a),r=n.sidebar||{},s=(!Object(nh.a)(r.showCloseButton)||r.showCloseButton(e))&&Object(nh.a)(r.onClickClose);return{id:a,views:n,isBold:Object(nh.a)(r.isBold)&&r.isBold(e),badgeCount:Object(nh.a)(r.badgeCount)?r.badgeCount(e):void 0,badgeProps:r.badgeProps,isSelected:Object(_.a)(e)===a,isCloseButtonVisible:s,featureSidebarVirtualized:Object(h.m)(e,"feature_sidebar_virtualized"),isIndented:Rr.d&&n.indented}},(e,t)=>{var{id:a}=t,n=Object(Y.a)(a).sidebar||{};return{onClickClose:Object(nh.a)(n.onClickClose)?()=>{n.onClickClose(e)}:null,onClick:Object(nh.a)(n.onClick)?()=>{n.onClick(e)}:null,renderLinkContent:n.renderLinkContent}})(ib),cb=a("MnCE"),lb=new x.b("channel_sidebar"),db=e=>{var{selectItem:t,dim:a,label:n,qaLabel:r,showClose:s,onClickClose:o,featureSidebarVirtualized:c}=e,l=n||lb.t("Invite people",{fallbackHash:"a937c4ac396e25f4c9a290d468e33c668ec6ff69"}),d=c?-1:void 0,p=i.a.createElement(Qm,{key:"Vinvites",id:"Vinvites",label:l,selectItem:t,isDim:a,qaLabel:r,featureSidebarVirtualized:c});if(!s)return p;var u=i.a.createElement(He.a,{onClick:o,className:"p-channel_sidebar__close","aria-label":c?void 0:lb.t("Hide Invite People button"),tabIndex:d,"aria-hidden":!!c||void 0},i.a.createElement(We.b,{type:"times-circle-medium"}));return i.a.createElement("div",{className:"p-channel_sidebar__close_container"},p,u)};db.defaultProps={selectItem:r.a,dim:!0,label:void 0,qaLabel:"",showClose:!1,onClickClose:r.a,featureSidebarVirtualized:!1};var pb=Object(cb.a)(db),ub=a("YCXn"),hb=Object(xt.b)("Dismiss Add Apps link in sidebar",e=>{e(Object(Ve.f)({pref:"add_apps_prompt_dismissed",value:!0}))});hb.meta={name:"dismissInstallAppsPrompt",key:"actionsDismissInstallAppsPromptDismissInstallAppsPrompt",description:"Dismiss Add Apps link in sidebar"};var mb=hb,bb=a("za+y"),_b=a("97va"),gb=new x.b("channel_sidebar"),fb={hideAppLinkPrompt:r.a,dismissInstallAppsPrompt:r.a,openAppsBrowserModal:r.a,openAppLauncherView:r.a,clogAppLauncherOpen:r.a,appSuggestionsCount:0,featureM11nAppsBrowser:!1,featureAppLauncher:!1,featureSidebarVirtualized:!1,appLinkImpression:!1,setAppLinkImpressionClogged:r.a};class install_apps_link_InstallAppsLink extends s.Component{constructor(e){super(e),this.handleAppsBrowserClick=this.handleAppsBrowserClick.bind(this),this.dismissLink=this.dismissLink.bind(this)}componentDidMount(){this.props.appLinkImpression||(this.clogEvent("impression"),this.props.setAppLinkImpressionClogged())}clogEvent(e){this.props.clogger.track("APP_ADD_APPS_PROMPT",{contexts:{ui_context:{action:e,ui_element:"ADD_APPS"}}})}handleAppsBrowserClick(){this.clogEvent("click");var{clogger:e}=this.props;e.track("INSTALL_APPS_LINK_APP_BROWSER_CLICK"),this.props.featureM11nAppsBrowser?this.props.featureAppLauncher?(this.props.openAppLauncherView(),this.props.clogAppLauncherOpen({eventId:"APP_LAUNCHER_OPEN_FROM_ADD_APPS_CTA"})):this.props.openAppsBrowserModal():Object(ub.a)()}dismissLink(){this.props.hideAppLinkPrompt(),this.clogEvent("decline"),this.props.dismissInstallAppsPrompt()}render(){var{appSuggestionsCount:e,featureSidebarVirtualized:t}=this.props,a=e>1?gb.t("Add more apps"):gb.t("Add apps"),n=gb.t('Dismiss "Add apps" prompt'),r=t?-1:void 0;return i.a.createElement("div",{className:"p-channel_sidebar__close_container"},i.a.createElement(jt.c,{className:"p-channel_sidebar__link p-channel_sidebar__link--dim p-channel_sidebar__link--add-apps",onClick:this.handleAppsBrowserClick,"data-qa":"add_apps_link",role:t?"presentation":void 0,tabIndex:r},i.a.createElement("span",{className:"p-channel_sidebar__name"},a)),i.a.createElement(jt.c,{onClick:this.dismissLink,className:"p-channel_sidebar__close","aria-label":t?void 0:n,"data-qa":"add_apps_dismiss_link",tabIndex:r,"aria-hidden":!!t||void 0},i.a.createElement(We.b,{type:"times-circle-medium"})))}}install_apps_link_InstallAppsLink.defaultProps=fb;var vb=Object(d.b)(function(e){return{clogger:Object(ne.a)({state:e}),appLinkImpression:Object(Yd.c)(e),appSuggestionsCount:(Object(Yd.g)(e)||[]).length,featureM11nAppsBrowser:Object(h.m)(e,"feature_m11n_apps_browser"),featureAppLauncher:Object(El.a)(e),featureSidebarVirtualized:Object(h.m)(e,"feature_sidebar_virtualized")}},e=>({setAppLinkImpressionClogged:function(){return e(Object(Yd.n)(...arguments))},hideAppLinkPrompt:function(){return e(Object(Yd.j)(...arguments))},dismissInstallAppsPrompt:function(){return e(mb(...arguments))},openAppsBrowserModal:function(){return e(Object(ds.a)(...arguments))},openAppLauncherView:function(){return e(Object(_b.a)(...arguments))},clogAppLauncherOpen:function(){return e(Object(bb.a)(...arguments))}}))(install_apps_link_InstallAppsLink),Ob=a("4qCO");function yb(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Cb={setUserPrefByApi:r.a,hideAppSuggestion:r.a,setAppSuggestionImpressionClogged:r.a,onboardingRoleApps:"",featureSidebarVirtualized:!1};function jb(e){var{appKey:t,appId:a,isInstall:n,setUserPrefByApi:r,hideAppSuggestion:o,dismissKey:c,href:l,text:d,label:p,clogUiElement:u,clogger:h,appSuggestionImpressions:m,setAppSuggestionImpressionClogged:b,onboardingRoleApps:_,featureSidebarVirtualized:g}=e,f=Object(s.useCallback)(e=>{h.track(ie.EventId.APP_SIDEBAR_PROMPTS,{contexts:{ui_context:{action:e,ui_element:u},core:{app_id:a}}})},[a,h,u]);Object(s.useEffect)(()=>{m[t]||(b(t),f("impression"))},[m,b,f,t]);var v=Object(s.useCallback)(()=>{o(t),n||r({pref:c,value:!0}),f("click")},[t,o,n,f,r,c]),O=Object(s.useCallback)(()=>{o(t);var e=(_||"").split(",");e.includes(a)&&(e.splice(e.indexOf(a),1),r({pref:"onboarding_role_apps",value:e.join(",")})),r({pref:c,value:!0}),f("decline")},[_,a,o,t,r,c,f]),y=g?-1:void 0,C=g?void 0:p;return i.a.createElement("div",{className:"p-channel_sidebar__close_container"},i.a.createElement(fe.a,{"data-qa":"app_suggestion_prompt_cta",className:"p-channel_sidebar__link p-channel_sidebar__link--dim p-channel_sidebar__link--add-apps",href:l,onClick:v,tabIndex:y,role:g?"presentation":void 0},i.a.createElement("span",{className:"p-channel_sidebar__name"},d)),i.a.createElement(jt.c,{"data-qa":"app_suggestion_prompt_dismiss",onClick:O,className:"p-channel_sidebar__close","aria-label":C,"aria-hidden":!!g||void 0,tabIndex:y},i.a.createElement(We.b,{type:"times-circle-medium"})))}jb.defaultProps=Cb;var Eb=Object(d.b)((e,t)=>{var{appKey:a}=t;return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yb(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yb(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},Hu(e,a),{clogger:Object(ne.a)({state:e}),onboardingRoleApps:Object(Ke.k)(e,"onboarding_role_apps"),appSuggestionImpressions:Object(Yd.e)(e),featureSidebarVirtualized:Object(h.m)(e,"feature_sidebar_virtualized")})},e=>({setUserPrefByApi:function(){return e(Object(Ve.f)(...arguments))},hideAppSuggestion:function(){return e(Object(Yd.k)(...arguments))},setAppSuggestionImpressionClogged:function(){return e(Object(Yd.o)(...arguments))}}))(jb),kb=(e,t)=>{var{appName:a}=e,{appName:n}=t;return Object(Ob.a)(a,n)};function Sb(e){var{displayedAppSuggestionsList:t}=e;return i.a.createElement(s.Fragment,null,t.sort(kb).map(e=>{var{appKey:t}=e;return i.a.createElement(Eb,{appKey:t,key:t})}))}Sb.defaultProps={displayedAppSuggestionsList:[]};var Ib=Object(d.b)(e=>({displayedAppSuggestionsList:Object(Yd.g)(e)}))(Sb),wb=a("+1yX"),Tb=new x.b("channel_sidebar"),Nb={className:"",channelSectionId:"",featureSidebarVirtualized:!1,channelSection:{},updateChannelSection:r.a,shouldUseChannelSections:!1,featureChannelSections:!1,deleteChannelSection:r.a,openModal:r.a,closeModal:r.a,labelPrefix:null,onRenameSectionSelected:r.a,onRemoveSectionSelected:r.a};class section_menu_SectionMenu extends s.Component{constructor(e){super(e),this.renderSectionMenu=this.renderSectionMenu.bind(this),this.onSectionMenuOpen=this.onSectionMenuOpen.bind(this),this.onSectionMenuClose=this.onSectionMenuClose.bind(this),this.state={ellipsisVisible:!1}}onSectionMenuOpen(){this.setState(()=>({ellipsisVisible:!0}))}onSectionMenuClose(){this.setState(()=>({ellipsisVisible:!1}))}renderSectionMenu(e){return i.a.createElement(Be.f,Object(n.a)({width:200,className:"p-channel_sidebar__channel_section_select_menu"},e,{"data-qa":"channel_section_menu"}),i.a.createElement(Be.b,{"data-qa":"channel_section_menu_rename_channel_section",onSelected:this.props.onRenameSectionSelected,label:this.props.featureChannelSections?Tb.t("Rename section"):null}),this.props.channelSection.type===Ni.g&&i.a.createElement(Be.b,{"data-qa":"channel_section_menu_remove_channel_section",onSelected:this.props.onRemoveSectionSelected,label:this.props.featureChannelSections?Tb.t("Remove section"):null,danger:!0}))}render(){var{className:e,featureSidebarVirtualized:t,featureChannelSections:a}=this.props;return!!this.props.featureChannelSections&&i.a.createElement(s.Fragment,null,i.a.createElement(Be.e,{renderMenu:this.renderSectionMenu,onClick:this.onSectionMenuOpen,position:"bottom-left",offsetX:-4,offsetY:4,"data-qa":"channel_section_menu_trigger",onClose:this.onSectionMenuClose},i.a.createElement(jt.c,{className:l()(e,"p-channel_sidebar__section_heading_ellipsis",{"p-channel_sidebar__section_heading_ellipsis--hover":this.state.ellipsisVisible}),"aria-label":t&&!a?void 0:Tb.t("Channel Section Options"),"data-qa":"standard_channel_section_button"},i.a.createElement(We.b,{"data-qa":"channel_section_ellipsis_icon",className:"p-channel_sidebar__section_heading_ellipsis_icon",type:"vertical-ellipsis",size:"inherit",inline:!0}))))}}section_menu_SectionMenu.defaultProps=Nb;var Pb=Object(d.b)((e,t)=>{var{channelSectionId:a}=t,n=Object(N.a)(e);return{featureSidebarVirtualized:Object(h.m)(e,"feature_sidebar_virtualized"),featureChannelSections:Object(h.m)(e,"feature_channel_sections"),channelSectionId:a,channelSection:Zt(e,a),shouldUseChannelSections:n}},{})(section_menu_SectionMenu),Ab=new x.b("channel_browser_coachmark"),Mb={channelSection:{},featureChannelSections:!1,numOtherWorkspacesOfCurrentEnterprise:0,channelExternalTeamNamesAffected:{},numOtherChannelsAffected:0,onModalSubmit:r.a,onModalClose:r.a,labelPrefix:null};class section_heading_confirmation_modal_SectionHeadingConfirmationModal extends s.Component{renderLabelPrefix(){var{labelPrefix:e}=this.props;return e||""}render(){var{featureChannelSections:e,channelSection:t,channelExternalTeamNamesAffected:a,numOtherChannelsAffected:n,numOtherWorkspacesOfCurrentEnterprise:r,onModalSubmit:o,onModalClose:c}=this.props;if(!e)return null;var l,d,p=i.a.createElement("div",{"data-qa":"channel-section-delete-confirmation-modal-single-workspace-message"},Ab.rt("Conversations in <strong>{labelPrefix} {channelSectionName}</strong> will move back to the Channels or Direct Messages section in your sidebar.",{labelPrefix:this.renderLabelPrefix(),channelSectionName:t.name})),u=i.a.createElement("div",{"data-qa":"channel-section-delete-confirmation-modal-multi-workspace-message"},Ab.rt("Conversations in <strong>{labelPrefix} {channelSectionName}</strong> across all workspaces will move back to the Channels or Direct Messages section in your sidebar.",{labelPrefix:this.renderLabelPrefix(),channelSectionName:t.name})),h=i.a.createElement(_s.a,{type:"inline",align:"left",level:"warning",className:"p-channel_sidebar__remove_section_modal_spacing","data-qa":"channel-section-delete-confirmation-modal-multi-workspace-warning"},Ab.rt("<strong>{numChannels} not shown</strong> (in {numOtherWorkspaces}) will be ungrouped.",{numChannels:Ab.t("{count, plural, =1 {# channel} other {# channels}}",{count:n}),numOtherWorkspaces:(l=Object.keys(a).length,d=Object.keys(a)[0],Ab.t("{count, plural, =1 {{firstWorkspaceAffected}} =2 {{firstWorkspaceAffected} and 1 other workspace} other {{firstWorkspaceAffected} and {countMultipleWorkspacesAffected} other workspaces}}",{count:l,firstWorkspaceAffected:d,countMultipleWorkspacesAffected:l-1}))})),m=i.a.createElement(s.Fragment,null,r>0?u:p,i.a.createElement("div",{className:"p-channel_sidebar__remove_section_modal_spacing"},Ab.rt("<strong>Note:</strong> You won't be leaving any channels when you remove this section.")),Object.keys(a).length>0?h:null);return i.a.createElement(Ds.a,{"data-qa":"remove_channel_section_modal",submitButtonText:Ab.t("Remove"),submitButtonType:"danger",cancelButtonText:Ab.t("Cancel"),onSubmit:o,onCancel:c,onClose:c,title:Ab.t("Remove this section?")},m)}}section_heading_confirmation_modal_SectionHeadingConfirmationModal.defaultProps=Mb;var xb=Object(d.b)((e,t)=>{var{channelSectionId:a}=t,n=Object(h.h)(e).filter(t=>!!t.enterprise_id&&t.enterprise_id===Object(u.a)(e)).length,r=ta(e,a).map(t=>Object(L.e)(e,t)).filter(e=>e&&Object(B.cb)(e)).map(t=>Object(we.e)(Object(Se.i)(e,Object(B.Zb)(e,t)))),s={};r.forEach(e=>{s[e]?s[e]+=1:s[e]=1});var i;return i=Object.values(s).reduce((e,t)=>e+t,0),{featureChannelSections:Object(h.m)(e,"feature_channel_sections"),numOtherWorkspacesOfCurrentEnterprise:n,channelExternalTeamNamesAffected:s,numOtherChannelsAffected:i,channelSection:Zt(e,a),channelSectionChannels:ta(e,a)}})(section_heading_confirmation_modal_SectionHeadingConfirmationModal);function Rb(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Db(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Rb(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rb(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Fb=new x.b("channel_browser_coachmark"),Lb={qaLabel:"",labelPrefix:null,tooltip:"",headerAriaLabel:"",tooltipClassName:null,tooltipArrowOffset:void 0,onLabelClick:r.a,showPlus:!1,plusTooltip:null,plusAriaLabel:"",onPlusClick:r.a,seenChannelBrowserCoachmark:!1,hasRecentlySharedAChannel:!1,setUserPrefByApi:r.a,openChannelBrowser:r.a,featureChannelIsRemoveCreateSharedChannel:!1,isSelected:!1,secondaryContent:void 0,clogger:{track:r.a},featureSidebarVirtualized:!1,featureChannelSections:!1,defaultSectionName:void 0,channelSectionId:void 0,channelSection:{},shouldUseChannelSections:!1,isCollapsed:!1,setSectionCollapsed:r.a,badgeCount:0,hasUnreads:!1,connectDropTarget:Vu.a,connectDragSource:Vu.a,isChannelDraggingOverHeading:!1,isChannelSectionDraggingOverHeading:!1,lastActiveDropTargetForChannelDrag:void 0,lastActiveDropTargetForChannelSectionDrag:void 0,priorDisplayedChannelSectionId:void 0,setLastActiveDropTargetForChannelDrag:r.a,setLastActiveDropTargetForChannelSectionDrag:r.a,orderedChannelSections:[],isAnyChannelDragging:!1,isAnyChannelSectionDragging:!1,channelIds:[],updateChannelSection:r.a,deleteChannelSection:r.a,openModal:r.a,closeModal:r.a,channelSectionChannels:[],isIAP1Enabled:!1},Ub={defaultSectionName:o.default.oneOf(Ni.a),channelIds:o.default.arrayOf(o.default.string)},Bb={defaultSectionName:void 0,channelIds:[]},Hb=Object(Wa.b)();class section_heading_SectionHeading extends i.a.PureComponent{constructor(e){super(e),this.onLabelClick=this.onLabelClick.bind(this),this.onPlusClick=this.onPlusClick.bind(this),this.setTooltipRef=this.setTooltipRef.bind(this),this.setPlusTooltipRef=this.setPlusTooltipRef.bind(this),this.onCollapseToggleClick=this.onCollapseToggleClick.bind(this),this.sectionHeadingRef=i.a.createRef(),this.getContextMenuTemplate=this.getContextMenuTemplate.bind(this),this.onRenameSectionSelected=this.onRenameSectionSelected.bind(this),this.onRemoveSectionSelected=this.onRemoveSectionSelected.bind(this),this.onRenameChannelSectionSubmit=this.onRenameChannelSectionSubmit.bind(this),this.onRenameSectionClose=this.onRenameSectionClose.bind(this),this.renderContextMenu=this.renderContextMenu.bind(this),this.renderSectionHeading=this.renderSectionHeading.bind(this),this.onModalSubmit=this.onModalSubmit.bind(this),this.onModalClose=this.onModalClose.bind(this),this.state={showingModal:!1}}componentDidUpdate(e){if(this.props.shouldUseChannelSections&&!e.isChannelDraggingOverHeading&&this.props.isChannelDraggingOverHeading&&this.props.lastActiveDropTargetForChannelDrag&&this.props.lastActiveDropTargetForChannelDrag.channelSectionId!==this.props.channelSectionId&&this.props.setLastActiveDropTargetForChannelDrag({channelSectionId:this.props.channelSectionId}),this.props.shouldUseChannelSections&&!e.isChannelSectionDraggingOverHeading&&this.props.isChannelSectionDraggingOverHeading){var t=this.props.channelSectionId,a=!Qh({isCollapsed:this.props.isCollapsed,channelSectionChannelIds:this.props.channelIds,channelId:null});this.props.setLastActiveDropTargetForChannelSectionDrag({channelSectionId:t,isAfter:a})}}onCollapseToggleClick(e){e.preventDefault(),Hb.action(Xh,"Toggled collapsed state of heading ".concat(this.props.qaLabel));var{channelSectionId:t,defaultSectionName:a,isCollapsed:n}=this.props;this.props.setSectionCollapsed({channelSectionId:t,defaultSectionName:a,isCollapsed:!n})}onLabelClick(e){this.props.shouldUseChannelSections?this.onCollapseToggleClick(e):(e.preventDefault(),Hb.action(Xh,"Selected heading ".concat(this.props.qaLabel)),this.props.onLabelClick(),this.tooltip&&this.tooltip.hideTip())}onPlusClick(e){e.preventDefault(),Hb.action(Xh,"Clicked plus button for ".concat(this.props.qaLabel)),this.props.onPlusClick(),this.plusTooltip&&this.plusTooltip.hideTip(),this.props.clogger.track(ie.EventId.SIDEBAR_PLUS_CLICK,{label:this.props.qaLabel,is_iap1:this.props.isIAP1Enabled})}onRenameSectionSelected(){this.setState(()=>({showingModal:!0}))}onModalSubmit(){this.props.deleteChannelSection({channelSectionId:this.props.channelSectionId}).then(this.onModalClose).catch(this.onModalClose)}onModalClose(){this.props.closeModal()}onRemoveSectionSelected(){this.props.featureChannelSections&&(this.props.channelSectionChannels.length>0?this.props.openModal({element:i.a.createElement(xb,{onModalSubmit:this.onModalSubmit,onModalClose:this.onModalClose,channelSectionId:this.props.channelSectionId,labelPrefix:this.props.labelPrefix})}):0===this.props.channelSectionChannels.length&&this.props.deleteChannelSection({channelSectionId:this.props.channelSectionId}))}onRenameChannelSectionSubmit(e){var{text:t,emoji:a}=e,{channelSection:n}=this.props,r=a.startsWith(":")&&a.endsWith(":")?a.slice(1,-1):a,s={id:n.id,name:t,emoji:r,type:n.type};n.nextChannelSectionId&&(s.nextChannelSectionId=n.nextChannelSectionId),this.props.updateChannelSection({channelSection:s}).then(()=>{this.setState(()=>({showingModal:!1}))}).catch(()=>{this.setState(()=>({showingModal:!1}))})}onRenameSectionClose(){this.setState(()=>({showingModal:!1}))}setTooltipRef(e){this.tooltip=e}setPlusTooltipRef(e){this.plusTooltip=e}getContextMenuTemplate(){var e,t=new x.b("menu"),a={label:this.props.featureChannelSections?t.t("Rename Section"):null,click:()=>this.onRenameSectionSelected()},n={label:this.props.featureChannelSections?t.t("Remove Section"):null,click:()=>this.onRemoveSectionSelected(),danger:!0};return this.props.channelSection.type===Ni.g?e=[a,n]:this.props.channelSection.type===Ni.h&&(e=[a]),e}determineTabIndexForPlus(){var{onPlusClick:e,onLabelClick:t,featureSidebarVirtualized:a}=this.props;return a?-1:e===t?"-1":void 0}renderLabelPrefix(){var{labelPrefix:e}=this.props;return e||null}renderSectionHeadingRightMaybe(){var{shouldUseChannelSections:e,showPlus:t,plusTooltip:a,plusAriaLabel:n,qaLabel:r,onPlusClick:s,onLabelClick:o,featureSidebarVirtualized:c,isCollapsed:l,badgeCount:d}=this.props,p=[];if(!this.props.shouldUseChannelSections||this.props.channelSection.type!==Ni.g&&this.props.channelSection.type!==Ni.h){if(t){var u=this.determineTabIndexForPlus(),h=s===o||c?"true":void 0,m=i.a.createElement(jt.c,{className:"p-channel_sidebar__section_heading_right_item p-channel_sidebar__section_heading_plus",onClick:this.onPlusClick,"aria-label":c?void 0:n,"aria-hidden":h,tabIndex:u,"data-qa":"channel_sidebar__plus__".concat(r),key:"plus-button"});p.push(a?i.a.createElement(qe.c,{tip:a,position:"top",ref:this.setPlusTooltipRef,delay:qe.a,key:"plus-button-tooltip"},m):m)}}else p.push(i.a.createElement(Pb,{className:"p-channel_sidebar__section_heading_right_item",channelSectionId:this.props.channelSectionId,onRenameSectionSelected:this.onRenameSectionSelected,onRemoveSectionSelected:this.onRemoveSectionSelected,onRenameChannelSectionSubmit:this.onRenameChannelSectionSubmit,key:"section-menu"}));return e&&l&&d&&p.push(i.a.createElement(sm.b,{className:"p-channel_sidebar__badge p-channel_sidebar__section_heading_right_item",style:sm.a.red,count:d,key:"badge"})),p.length?i.a.createElement("div",{className:"p-channel_sidebar__section_heading_right"},p):null}renderSharedChannelsCoachmarkMaybe(e){var{seenChannelBrowserCoachmark:t,hasRecentlySharedAChannel:a,qaLabel:n,featureChannelIsRemoveCreateSharedChannel:r}=this.props;if("shared_channels"!==n&&!r||"channels"!==n&&r||t||!a)return e;var s=()=>{this.props.setUserPrefByApi({pref:"seen_channel_browser_admin_coachmark",value:!0})},o=i.a.createElement(fc.a,{secondaryCallToActionText:Fb.t("Close"),primaryCallToActionText:Fb.t("Show Me"),title:Fb.t("View and manage shared channels"),content:Fb.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar."),isOpen:!0,onClickSecondaryButton:s,onClickPrimaryButton:()=>{s(),this.props.openChannelBrowser()},orientation:"right",closeCoachmark:s},i.a.createElement("h3",{className:"margin_bottom_50"},Fb.t("View and manage shared channels")),i.a.createElement("p",null,Fb.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar.")));return i.a.createElement("div",null,i.a.createElement(vc.a,{orientation:"right",coachmarkElement:o},e))}renderCollapseToggle(){return this.props.shouldUseChannelSections&&(this.props.defaultSectionName||this.props.channelSectionId)?i.a.createElement("span",{role:"presentation","aria-hidden":"true",onClick:this.onCollapseToggleClick},i.a.createElement(We.b,{"data-qa":"channel-section-collapse",className:"p-channel_sidebar__section_heading_expand",type:"chevron-medium-right",size:"inherit",inline:!0})):null}renderContextMenu(){return i.a.createElement(Nh.a,{width:200,getTemplate:this.getContextMenuTemplate,desktopAppOnly:!1},this.renderSectionHeading())}renderSectionHeading(){var e,{label:t,qaLabel:a,tooltip:n,headerAriaLabel:s,tooltipClassName:o,tooltipArrowOffset:c,onLabelClick:d,isSelected:p,isCollapsed:u,isAnyChannelSectionDragging:h,secondaryContent:m,featureSidebarVirtualized:b,shouldUseChannelSections:_,hasUnreads:g,channelIds:f,isAnyChannelDragging:v}=this.props,O=b?-1:void 0,y=d!==r.a||_;e=y?i.a.createElement(jt.c,{className:l()("p-channel_sidebar__section_heading_label","p-channel_sidebar__section_heading_label--clickable",{"p-channel_sidebar__section_heading_label--unreads":g}),onClick:this.onLabelClick,"aria-label":b?void 0:s,"aria-hidden":!!b||void 0,tabIndex:O,"data-qa":"channel_sidebar__section_heading_label__".concat(a)},this.renderLabelPrefix()," ",t):i.a.createElement("span",{role:b?void 0:"heading","aria-level":b?void 0:"2",className:l()("p-channel_sidebar__section_heading_label",{"p-channel_sidebar__section_heading_label--unreads":g}),"data-qa":"channel_sidebar__section_heading_label__".concat(a)},this.renderLabelPrefix()," ",t);var C=n&&!_?i.a.createElement(qe.c,{tip:n,tipClassName:o,position:"top-left",tipArrowOffset:c,ref:this.setTooltipRef,delay:qe.a},this.renderSharedChannelsCoachmarkMaybe(e)):e,j=y&&!b?i.a.createElement("h2",{className:"offscreen"},t):null,E=!b&&this.props.onPlusClick!==this.props.onLabelClick,k=E?"group":void 0,S=E?t:void 0,I={};if(_){this.props.connectDropTarget(this.sectionHeadingRef),this.props.connectDragSource(this.sectionHeadingRef);var w=this.props.orderedChannelSections.length>0&&this.props.orderedChannelSections[this.props.orderedChannelSections.length-1].id===this.props.channelSectionId,T=u||0===f.length;I["p-channel_sidebar__section_heading--collapsed"]=u,I["p-channel_sidebar__section_heading--empty"]=T,I["p-channel_sidebar__section_heading--unreads"]=g,I["p-channel_sidebar__section_heading--drop_over_section"]=v&&this.props.lastActiveDropTargetForChannelDrag&&this.props.lastActiveDropTargetForChannelDrag.channelSectionId===this.props.channelSectionId;var N=h&&this.props.lastActiveDropTargetForChannelSectionDrag&&this.props.priorDisplayedChannelSectionId&&this.props.lastActiveDropTargetForChannelSectionDrag.channelSectionId===this.props.priorDisplayedChannelSectionId&&this.props.lastActiveDropTargetForChannelSectionDrag.isAfter,P=h&&this.props.lastActiveDropTargetForChannelSectionDrag&&this.props.lastActiveDropTargetForChannelSectionDrag.channelSectionId===this.props.channelSectionId&&!this.props.lastActiveDropTargetForChannelSectionDrag.isAfter;I["p-channel_sidebar__section_heading--drop_target_before"]=P||N;var A=h&&this.props.lastActiveDropTargetForChannelSectionDrag&&this.props.lastActiveDropTargetForChannelSectionDrag.channelSectionId===this.props.channelSectionId&&this.props.lastActiveDropTargetForChannelSectionDrag.isAfter;I["p-channel_sidebar__section_heading--drop_target_after"]=w&&T&&A}return i.a.createElement("div",{className:l()("p-channel_sidebar__section_heading",Db({"p-channel_sidebar__section_heading--selected":p},I)),ref:this.sectionHeadingRef,"data-qa-channel-sidebar-section-heading":a,"data-qa":a,role:k,"aria-label":S},this.renderCollapseToggle(),j,C,this.renderSectionHeadingRightMaybe(),m)}render(){return i.a.createElement(s.Fragment,null,this.state.showingModal&&i.a.createElement(wi,{action:Ci.RENAME,focusOnMount:!0,openedFromKeyboardShortcut:!1,onRenameChannelSectionSubmit:this.onRenameChannelSectionSubmit,onClose:this.onRenameSectionClose,initialText:this.props.channelSection.name,initialEmoji:this.props.channelSection.emoji}),this.props.shouldUseChannelSections&&Object(kt.a)()&&(this.props.channelSection.type===Ni.h||this.props.channelSection.type===Ni.g)?this.renderContextMenu():this.renderSectionHeading())}}section_heading_SectionHeading.defaultProps=Lb;var Wb=Object(mi.a)()?Object(Bh.a)("DRAG_CHANNEL_SIDEBAR_SECTION_HEADING",{beginDrag:e=>({channelSection:e.channelSection}),endDrag:e=>{e.setLastActiveDropTargetForChannelSectionDrag({channelSectionId:null,isAbove:!1})},canDrag:e=>e.shouldUseChannelSections&&!e.isOrganizing},e=>({connectDragSource:e.dragSource()}))(section_heading_SectionHeading):section_heading_SectionHeading,qb=["DRAG_CHANNEL_SIDEBAR_CHANNEL","DRAG_CHANNEL_SIDEBAR_SECTION_HEADING"],Gb=Object(mi.a)()?Object(zd.a)(qb,{},(e,t)=>{var a=t.getItemType(),n="DRAG_CHANNEL_SIDEBAR_CHANNEL"===a,r="DRAG_CHANNEL_SIDEBAR_SECTION_HEADING"===a,s=n&&t.isOver(),i=r&&t.isOver();return{connectDropTarget:e.dropTarget(),isAnyChannelDragging:n,isAnyChannelSectionDragging:r,isChannelDraggingOverHeading:s,isChannelSectionDraggingOverHeading:i}})(Wb):section_heading_SectionHeading,Kb=(e,t)=>{var{channelSectionId:a,defaultSectionName:n,channelIds:r}=t,s=Object(N.a)(e),i=!1;a?i=la(e,a):n&&(i=ca(e,n));var o=!1,c=0;return s&&i&&r.forEach(t=>{if(Object(wb.a)(t)){var a=Object(L.e)(e,t);if(!Object(B.qb)(a)&&!Object(xr.c)(e,a.id)){var n=Object(B.U)(a),r=Object(L.d)(e,a);o=o||n>0,c+=r}}}),{seenChannelBrowserCoachmark:Object(Ke.k)(e,"seen_channel_browser_admin_coachmark"),hasRecentlySharedAChannel:Object(Ke.k)(e,"has_recently_shared_a_channel"),featureChannelIsRemoveCreateSharedChannel:Object(h.m)(e,"feature_channel_is_remove_create_shared_channel"),clogger:Object(ne.a)({state:e}),featureSidebarVirtualized:Object(h.m)(e,"feature_sidebar_virtualized"),featureChannelSections:Object(h.m)(e,"feature_channel_sections"),isCollapsed:s&&i,shouldUseChannelSections:s,hasUnreads:o,badgeCount:c,channelSection:Zt(e,a),isOrganizing:oa(e),orderedChannelSections:Xt(e),lastActiveDropTargetForChannelDrag:s?ba(e):null,lastActiveDropTargetForChannelSectionDrag:s?_a(e):null,currentEnterpriseTeam:Object(Se.g)(e),channelSectionChannels:ta(e,a),getChannelsUserIsIn:Object(L.g)(e),isIAP1Enabled:Object(Rr.d)(e)}},Vb={setUserPrefByApi:function(){return Object(Ve.f)(...arguments)},openChannelBrowser:function(){return Object(eb.a)(...arguments)},setSectionCollapsed:function(){return Di(...arguments)},updateChannelSection:function(){return Hi(...arguments)},deleteChannelSection:function(){return qi(...arguments)},openModal:function(){return Object(Ua.e)(...arguments)},closeModal:function(){return Object(Ua.a)(...arguments)},setLastActiveDropTargetForChannelDrag:function(){return Object(Kt.i)(...arguments)},setLastActiveDropTargetForChannelSectionDrag:function(){return Object(Kt.j)(...arguments)}},zb=Object(d.b)(Kb,Vb)(section_heading_SectionHeading);zb.propTypes=Ub,zb.defaultProps=Bb;var Yb=zb,Qb=Object(d.b)(Kb,Vb,null,{withRef:!0})(Gb);Qb.propTypes=Ub,Qb.defaultProps=Bb;var Xb=new x.b("channel_sidebar"),Jb={clogger:{track:r.a},featureChannelSidebarDraftsSection:!1,featureComposeFlow:!1,isSelected:!1,selectItem:r.a,setUserPrefByApi:r.a,showDraftsSectionCoachmark:!1,scrollToTopOfChannelList:r.a,channelIds:[]};class drafts_heading_DraftsHeading extends s.Component{constructor(e){super(e),this.state={showCoachmark:e.showDraftsSectionCoachmark},this.markCoachmarkSeen=this.markCoachmarkSeen.bind(this),this.onShow=this.onShow.bind(this)}componentDidMount(){this.props.showDraftsSectionCoachmark&&this.props.scrollToTopOfChannelList()}onShow(){this.state.showCoachmark&&this.props.setUserPrefByApi({pref:"seen_drafts_section_coachmark",value:!0})}markCoachmarkSeen(){this.setState(()=>({showCoachmark:!1}))}render(){var{featureChannelSidebarDraftsSection:e,featureComposeFlow:t,isSelected:a,selectItem:r,channelIds:s,clogger:o}=this.props,{showCoachmark:c}=this.state;if(!e)return null;var l={};if(t){var d=Xb.t("View all drafts");l.onLabelClick=(()=>{r("Pdrafts"),o.track(ie.EventId.COMPOSE_FLOW,{draft_action_source:"sidebar",contexts:{ui_context:{action:ie.UiAction.CLICK,step:ie.UiStep.COMPOSE_FLOW_DRAFTS_OPEN}}})}),l.headerAriaLabel=d,l.tooltip=d,l.tooltipArrowOffset=20,l.isSelected=a}var p=i.a.createElement(Yb,Object(n.a)({},l,{label:Xb.t("Drafts"),defaultSectionName:Ni.k,qaLabel:"drafts",channelIds:s}));if(c){this.onShow();var u=Xb.t("Pick up where you left off"),h=Xb.t("Your drafts are now collected in one place, so you can jump right back whenever you're ready to hit send."),m=i.a.createElement(fc.a,{orientation:"right",onClickPrimaryButton:this.markCoachmarkSeen,closeCoachmark:this.markCoachmarkSeen,primaryCallToActionText:Xb.t("Got it",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0",fallbackHashNs:"coachmarks"}),isOpen:!0,"data-qa":"drafts-coachmark"},i.a.createElement("h3",{className:"margin_bottom_50"},u),i.a.createElement("p",null,h));return i.a.createElement(vc.a,{orientation:"right",coachmarkElement:m},i.a.createElement("div",null,p))}return p}}drafts_heading_DraftsHeading.defaultProps=Jb;var Zb=Object(d.b)(e=>({clogger:Object(ne.a)({state:e}),featureChannelSidebarDraftsSection:Object(h.m)(e,"feature_channel_sidebar_drafts_section"),featureComposeFlow:Object(O.g)(e),isSelected:"Pdrafts"===Object(_.a)(e),showDraftsSectionCoachmark:!Object(Ke.k)(e,"seen_drafts_section_coachmark")}),e=>({setUserPrefByApi:t=>e(Object(Ve.f)(t))}))(drafts_heading_DraftsHeading),$b=new x.b("channel_sidebar");class upgrade_slack_cta_UpgradeSlackCTA extends s.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}componentDidMount(){this.clog(ie.UiAction.IMPRESSION)}onClick(){this.clog(ie.UiAction.CLICK)}clog(e){this.props.clogger.track(ie.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:ie.UiStep.SIDEBAR,action:e,ui_properties:{element_type:ie.ElementType.LINK,element_name:"upgrade_link"}}}})}render(){var{featureSidebarVirtualized:e}=this.props,t=i.a.createElement("span",{className:"p-channel_sidebar__name"},$b.t("Upgrade")),a=e?-1:void 0,n=e?"presentation":void 0;return i.a.createElement(fe.a,{className:"p-channel_sidebar__link p-channel_sidebar__link--upgrade-slack","data-qa":"upgrade-slack-cta",onClick:this.onClick,href:Object(an.j)({entryPoint:"channel_sidebar_upgrade_cta"}),tabIndex:a,role:n},t)}}upgrade_slack_cta_UpgradeSlackCTA.defaultProps={featureSidebarVirtualized:!1};var e_=Object(d.b)(function(e){return{clogger:Object(ne.a)({state:e}),featureSidebarVirtualized:Object(h.m)(e,"feature_sidebar_virtualized")}})(upgrade_slack_cta_UpgradeSlackCTA),t_=new x.b("channel_sidebar"),a_=Object(cb.a)(e=>i.a.createElement(Yb,Object(n.a)({},e,{label:t_.t("Starred"),qaLabel:"starred",defaultSectionName:Ni.o}))),n_=a("auxT"),r_=new x.b("channel_sidebar"),s_={openChannelCreateModal:r.a,featureOfflineMode:!1,wasRecentlyOnline:!1,canUserCreateChannels:!1,openDmBrowserModal:r.a,clogger:null,isIAP1Enabled:!1};class channel_section_heading_ChannelSectionHeading extends s.PureComponent{constructor(e){super(e),this.onCreateChannelClick=this.onCreateChannelClick.bind(this),this.onDMBrowserModalClick=this.onDMBrowserModalClick.bind(this)}onCreateChannelClick(){this.props.openChannelCreateModal({entryPoint:"channel_sidebar"}),this.props.clogger.track("SIDEBAR_PLUS_CLICK",{is_iap1:this.props.isIAP1Enabled,label:"channels"})}onDMBrowserModalClick(){this.props.openDmBrowserModal(),this.props.clogger.track("SIDEBAR_PLUS_CLICK",{is_iap1:this.props.isIAP1Enabled,label:"ims"})}render(){var e,t,{channelSection:a,featureOfflineMode:s,wasRecentlyOnline:o,canUserCreateChannels:c}=this.props,l=!1,d=r.a;return a.type===Ni.b&&(l=c,t=r_.t("Create a channel"),e=r_.t("Create a channel"),d=this.onCreateChannelClick,s&&!o&&(e=i.a.createElement(n_.a,{tooltipLabel:r_.t("Create a channel")}))),a.type===Ni.c&&(l=!0,e=r_.t("Open a direct message"),t=r_.t("Open a direct message"),d=this.onDMBrowserModalClick),i.a.createElement(Qb,Object(n.a)({},this.props,{showPlus:l,plusAriaLabel:t,plusTooltip:e,onPlusClick:d,labelPrefix:a.emoji&&i.a.createElement(Vr.b,{text:a.emoji,stopAnimations:!0,obeyEmojiMode:!1,emojiSize:Vr.a.SMALL,forceDisplay:!0,isEmojiInlineWithText:!0}),label:a.name,qaLabel:"custom-".concat(a.id),channelSectionId:a.id}))}}channel_section_heading_ChannelSectionHeading.defaultProps=s_;var i_={openChannelCreateModal:S.a,openDmBrowserModal:dt.a},o_=Object(d.b)((e,t)=>{var{channelIds:a,channelSection:n}=t,r=Object(N.a)(e),s=Object(_.a)(e),i=la(e,n.id),o=s&&a.includes(s);return{featureOfflineMode:Object(h.m)(e,"feature_offline_mode"),wasRecentlyOnline:Object(Re.h)(e),canUserCreateChannels:Object(sn.D)(e)||Object(sn.C)(e),isSelected:r&&i&&o,clogger:Object(ne.a)({state:e}),isIAP1Enabled:Object(Rr.d)(e)}},i_)(channel_section_heading_ChannelSectionHeading),c_=a("zbZx"),l_=a("08ch"),d_=new x.b("channel_sidebar"),p_={canOpenChannelBrowser:!0,showPlusButton:!1,openSharedChannelCreationModal:r.a,openChannelCreateModal:r.a,canUserRequestSharedChannel:!1,canUserCreateSharedChannel:!1,featureSonicDmBrowser:!1,openDmBrowserModal:r.a,clogger:{}},u_=e=>{var t,{canOpenChannelBrowser:a,showPlusButton:s}=e;a&&(t=d_.t("Browse all shared channels"));var o=a?()=>e.openChannelBrowser({initialFilter:"shared"}):r.a,c=e.openSharedChannelCreationModal.bind(null,{entryPoint:"shared_channel_sidebar"});return i.a.createElement(Yb,Object(n.a)({},e,{onLabelClick:o,tooltip:t,headerAriaLabel:d_.t("Browse all shared channels"),tooltipArrowOffset:50,label:d_.t("Shared Channels"),qaLabel:"shared_channels",showPlus:s,plusTooltip:d_.t("Create a shared channel"),onPlusClick:function(){return c(...arguments)},defaultSectionName:Ni.n}))};u_.defaultProps=p_;var h_={openSharedChannelCreationModal:function(){return Object(l_.a)(...arguments)},openChannelBrowser:function(){return Object(eb.a)(...arguments)},openDmBrowserModal:function(){return Object(dt.a)(...arguments)},openChannelCreateModal:function(){return Object(S.a)(...arguments)}},m_=Object(cb.a)(u_),b_=Object(d.b)(e=>({canOpenChannelBrowser:!Object(Fe.Mb)(Object(Ca.b)(e)),featureSonicEscCreation:Object(h.m)(e,"feature_sonic_esc_creation"),showPlusButton:__(e),canUserRequestSharedChannel:Object(sn.P)(e),canUserCreateSharedChannel:Object(sn.E)(e),featureSonicDmBrowser:Object(h.m)(e,"feature_sonic_dm_browser")}),h_)(m_);function __(e){var t=!Object(h.m)(e,"feature_shared_channels_block_large_orgs"),a=Object(Ca.b)(e);return!(!Object(sn.D)(e)&&!Object(sn.C)(e))&&(Object(on.a)(e)?Object(sn.P)(e):Object(c_.d)(e)&&t?Object(Fe.g)(e,{blockAllForNoOne:!0}):!Object(Fe.Mb)(a)&&!Object(Fe.Gb)(a)&&Object(sn.P)(e))}var g_=new x.b("coachmarks"),f_={currentMember:r.a,currentMemberIsAdmin:!1,firstListedChannel:null,inSinglePublicChannel:!1,inSinglePrivateChannel:!1,anchorElement:null};class channel_heading_coachmark_ChannelHeadingCoachmark extends s.Component{constructor(e){super(e),this.onClose=this.onClose.bind(this),this.renderCoachmarkContent=this.renderCoachmarkContent.bind(this)}onClose(e){e.preventDefault(),this.props.setAboutChannelsCoachmarkIsVisible(!1)}renderCoachmarkContent(){var{currentMember:e,currentMemberIsAdmin:t,inSinglePublicChannel:a,inSinglePrivateChannel:n,firstListedChannel:r}=this.props;return t?g_.t("Channels bring order and searchability to your team\u2019s conversations. Organize by topic (#research), working group (#sales), or specific project (#sales-tv-ad)."):Object(Fe.Gb)(e)?a?g_.rt("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can send messages and browse archives in one channel, {channelName}.",{channelName:i.a.createElement("strong",null,r),fallbackHash:"714a97c13fc44eebbf3c57a94f5e275f6c6da22f",fallbackHashNs:"coachmarks"}):n?g_.rt("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can access one channel, {channelName}. This is a private, invitation-only channel.",{channelName:i.a.createElement("strong",null,r),fallbackHash:"6b2988717e064c5abfcad7bc9ba9187458753ac3",fallbackHashNs:"coachmarks"}):g_.t("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can send messages and browse archives in the channels listed here."):g_.t("Channels bring order and searchability to your team\u2019s conversations. They\u2019re organized by topic (#research), working group (#sales), or specific project (#sales-tv-ad).")}render(){var{anchorElement:e}=this.props;return i.a.createElement(fc.a,{anchorElement:e,orientation:"right",onClickPrimaryButton:this.onClose,closeCoachmark:this.onClose,primaryCallToActionText:g_.t("Got it!"),isOpen:!0},i.a.createElement("h3",{className:"margin_bottom_50"},g_.t("Messaging happens in channels")),i.a.createElement("p",null,this.renderCoachmarkContent()))}}channel_heading_coachmark_ChannelHeadingCoachmark.defaultProps=f_;var v_={setAboutChannelsCoachmarkIsVisible:function(){return Object(Yd.m)(...arguments)}},O_=Object(d.b)(e=>{var t=Object(L.t)(e),a=t.filter(B.Bb),n=t.filter(B.Cb),r=Object(Ca.b)(e);return{currentMember:r,currentMemberIsAdmin:Object(Fe.eb)(e,r),inSinglePrivateChannel:1===t.length&&1===a.length,inSinglePublicChannel:1===t.length&&1===n.length,firstListedChannel:t.length?t[0].name:""}},v_)(channel_heading_coachmark_ChannelHeadingCoachmark),y_=new x.b("channel_sidebar"),C_=e=>{var t,a,{featureOfflineMode:r,showPlus:s,canOpenChannelBrowser:o,wasRecentlyOnline:c,aboutChannelsCoachmarkIsVisible:l,iAPhase1Enabled:d}=e,p=y_.t("Create a channel");r&&!c&&(p=i.a.createElement(n_.a,{tooltipLabel:y_.t("Create a channel")})),o&&!d&&(t=e.openChannelBrowser,a=y_.t("Browse all channels"));var u=i.a.createElement(Yb,Object(n.a)({},e,{onLabelClick:t,label:y_.t("Channels"),qaLabel:"channels",tooltip:a,headerAriaLabel:y_.t("Browse all channels"),tooltipArrowOffset:30,showPlus:s,plusTooltip:p,plusAriaLabel:y_.t("Create a channel"),defaultSectionName:Ni.j}));return l?i.a.createElement(vc.a,{orientation:"right",coachmarkElement:i.a.createElement(O_,null)},u):u};C_.defaultProps={showPlus:!0,canOpenChannelBrowser:!0};var j_={openChannelBrowser:function(){return Object(eb.a)(...arguments)}},E_=Object(d.b)(e=>({showPlus:Object(sn.D)(e)||Object(sn.C)(e),canOpenChannelBrowser:!Object(Fe.Mb)(Object(Ca.b)(e)),featureOfflineMode:Object(h.m)(e,"feature_offline_mode"),wasRecentlyOnline:Object(Re.h)(e),aboutChannelsCoachmarkIsVisible:Object(Yd.b)(e),iAPhase1Enabled:Object(Rr.d)(e)}),j_)(C_),k_=a("DKof"),S_={name:"",setIsRenaming:r.a,saveFolderData:r.a,renameFolder:r.a,toggleFolderCollapse:r.a,setFolderCollapse:r.a,badgeCount:0,hasUnreads:!1,isCollapsed:!1,isRenaming:!1,onDragStart:r.a,onDragEnd:r.a,onDrop:r.a,onDragOver:r.a,featureSidebarVirtualized:!1};class folder_heading_FolderHeading extends i.a.PureComponent{constructor(e){super(e),this.toggleFolderCollapse=this.toggleFolderCollapse.bind(this),this.renameFolder=this.renameFolder.bind(this),this.showRenameBox=this.showRenameBox.bind(this),this.setRenamingLabel=this.setRenamingLabel.bind(this),this.setInputRef=this.setInputRef.bind(this),this.onBlur=this.onBlur.bind(this),this.state={renamingLabel:this.props.name,hasTyped:!1}}onBlur(e){if(this.props.isRenaming){var t=this.props.name,a=e.target.value;this.props.renameFolder({oldName:t,newName:a}),this.props.saveFolderData()}}setRenamingLabel(e){var t=e.target.value;this.setState(()=>({renamingLabel:t,hasTyped:!0}))}setInputRef(e){e&&!this.state.hasTyped&&(e.select(),e.focus())}showRenameBox(){var e=this.props.name;this.props.setIsRenaming({name:e}),this.setState(()=>({renamingLabel:e,hasTyped:!1}))}toggleFolderCollapse(e){e.altKey?this.props.setFolderCollapse({isCollapsed:!this.props.isCollapsed}):this.props.toggleFolderCollapse({name:this.props.name}),this.props.saveFolderData()}renameFolder(e){var t,a=this.props.name;"Enter"===e.key&&(t=e.target.value),"Escape"===e.key&&(t=this.props.name),void 0!==t&&(this.props.renameFolder({oldName:a,newName:t}),this.props.saveFolderData())}render(){var e,{featureSidebarVirtualized:t}=this.props,a=this.props.isRenaming?"":i.a.createElement(jt.c,{"aria-hidden":!!t||void 0,tabIndex:t?-1:void 0,className:l()("p-channel_sidebar__folder_heading_icon",{"p-channel_sidebar__folder_heading_icon_collapsed":this.props.isCollapsed}),onClick:this.toggleFolderCollapse});e=this.props.isRenaming?i.a.createElement("input",{type:"text",className:"p-channel_sidebar__folder_heading_label_rename",value:this.state.renamingLabel,onChange:this.setRenamingLabel,onKeyDown:this.renameFolder,ref:this.setInputRef,onBlur:this.onBlur}):Object(qp.a)(this.props.name,"<")?i.a.createElement(jt.c,{className:l()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":t?"":void 0,tabIndex:t?-1:void 0},this.props.name):i.a.createElement(jt.c,{className:l()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":t?"":void 0,tabIndex:t?-1:void 0},i.a.createElement(Kr.a,{text:this.props.name,noJumbomoji:!0,noHighlights:!0}));var n=this.props.isCollapsed?i.a.createElement(jt.c,{className:"p-channel_sidebar__folder_heading_badge",onClick:this.toggleFolderCollapse,"aria-hidden":!!t||void 0,tabIndex:t?-1:void 0},i.a.createElement(sm.b,{count:this.props.badgeCount,className:"p-channel_sidebar__badge"})):"";return i.a.createElement("div",{className:"p-channel_sidebar__folder_heading","data-qa-channel-sidebar-section-heading":"folder",draggable:!0,"data-drag-type":"folder","data-drag-id":this.props.name,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver},e,n,a)}}folder_heading_FolderHeading.defaultProps=S_;var I_={toggleFolderCollapse:Qd.k,setFolderCollapse:Qd.i,saveFolderData:Qd.h,renameFolder:Qd.g,setIsRenaming:Qd.j},w_=Object(d.b)((e,t)=>{var{name:a}=t,n=Object(Qd.d)(e,a),r=n?Object(ed.a)(n.channelIds,t=>Object(L.e)(e,t)):[],s=!!n&&n.isCollapsed,i=!!n&&n.isRenaming,o=r.length>0?Object(k_.a)(Object(ed.a)(r,t=>Object(L.d)(e,t))):0;return{isCollapsed:s,isRenaming:i,hasUnreads:r.length>0&&!!Object(hp.a)(r,t=>Object(B.Ob)(t)&&!Object(xr.c)(e,t.id)),badgeCount:o,featureSidebarVirtualized:Object(h.m)(e,"feature_sidebar_virtualized")}},I_)(folder_heading_FolderHeading),T_=new x.b("channel_sidebar"),N_=Object(cb.a)(e=>i.a.createElement(Yb,Object(n.a)({},e,{tooltipClassName:"p-channel_sidebar__section_heading_tip--short",label:T_.t("Organization Channels"),qaLabel:"org_wide_channels",tooltip:T_.t("Shared with all workspaces at {orgName}",{orgName:e.orgName}),tooltipArrowOffset:50,defaultSectionName:Ni.m}))),P_=Object(d.b)(e=>{return{orgName:Object(Se.e)(e)}})(N_),A_=new x.b("channel_sidebar"),M_=e=>i.a.createElement(Yb,Object(n.a)({},e,{label:e.iAPhase1Enabled?"Direct messages":e.label,qaLabel:"ims",tooltip:e.iAPhase1Enabled?void 0:A_.t("Open a direct message"),headerAriaLabel:e.iAPhase1Enabled?void 0:A_.t("Open a direct message"),tooltipArrowOffset:50,showPlus:!0,plusTooltip:A_.t("Open a direct message"),plusAriaLabel:A_.t("Open a direct message"),onLabelClick:e.iAPhase1Enabled?void 0:e.openDmBrowserModal,onPlusClick:e.openDmBrowserModal,defaultSectionName:Ni.l}));M_.defaultProps={openDmBrowserModal:r.a};var x_={openDmBrowserModal:()=>Object(dt.a)()},R_=Object(d.b)(e=>({label:A_.t("Direct Messages"),iAPhase1Enabled:Object(Rr.d)(e)}),x_)(M_),D_=new x.b("sonic_pilot");var F_=Object(d.b)(e=>({featureSonicPlaceholderLabels:Object(h.m)(e,"feature_sonic_placeholder_labels")}))(function(e){var{children:t,featureSonicPlaceholderLabels:a}=e;return a&&Object(kt.a)()?i.a.createElement(i.a.Fragment,null,t,i.a.createElement("div",{className:"c-tooltip__sonic_placeholder","data-qa":"sonic-placeholder-text"},D_.t("Coming soon"))):t}),L_=new x.b("channel_sidebar"),U_=e=>{var t=e.featureM11nAppsBrowser?L_.t("Browse Apps"):i.a.createElement(F_,null,L_.t("Browse apps")),a=e.featureM11nAppsBrowser?e.openAppsBrowserModal:ub.a,s=e.featureAppLauncher?L_.t("Recent Apps"):L_.t("Apps");return e.iAPhase1Enabled&&(s="Recent apps"),i.a.createElement(Yb,Object(n.a)({},e,{onLabelClick:e.featureAppLauncher?r.a:a,onPlusClick:e.featureAppLauncher?r.a:a,label:s,qaLabel:"apps",tooltip:e.featureAppLauncher?"":t,headerAriaLabel:L_.t("Browse apps"),tooltipArrowOffset:16,showPlus:e.showPlus,plusTooltip:e.featureAppLauncher?"":t,plusAriaLabel:L_.t("Browse apps"),defaultSectionName:Ni.i}))};U_.defaultProps={featureM11nAppsBrowser:!1,featureAppLauncher:!1,iAPhase1Enabled:!1};var B_=Object(d.b)(e=>{var t=Object(El.a)(e);return{featureM11nAppsBrowser:Object(h.m)(e,"feature_m11n_apps_browser"),featureAppLauncher:t,showPlus:!Object(Rr.d)(e)&&!t,iAPhase1Enabled:Object(Rr.d)(e)}},e=>Object(Ac.b)({openAppsBrowserModal:ds.a},e))(U_),H_=a("z0G2");class sidebar_layout_SidebarLayout extends H_.a{constructor(){var{getHeight:e,keys:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({keys:t}),this.getHeight=e,this.layout()}getHeightValidity(){return!0}setHeight(){}}var W_=a("3lVB");function q_(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function G_(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q_(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q_(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var K_=Oh()("enter"),V_=Oh()("delete"),z_=Oh()("backspace"),Y_=new x.b("channel_sidebar"),Q_={onItemSelect:r.a,onInviteClick:r.a,onCreateChannelClick:r.a,onCreateSharedChannelClick:r.a,onResize:r.a,onScroll:r.a,sidebarFoldersIsEnabled:!1,onDragStart:r.a,onDragEnd:r.a,onDrop:r.a,onDragOver:r.a,onCreateFolder:r.a,shouldTrackTTFMP:!0,logger:null,clogger:null,bootType:null,setHideInviteButton:r.a,setHideAddChannelButton:r.a,teamId:null,featureSeeMoreChannels:!1,removeFromSectionNavigation:r.a,addToSectionNavigation:r.a,userAttentionIsOnChat:!1,composerVisible:!1,featureSidebarVirtualized:!1,selectedItemId:void 0,closeIM:r.a,getAriaLabelForRow:r.a,shouldUseChannelSections:!1,isScreenReaderEnabled:!1,hasKeyboardFocus:!1,deleteComposerDraft:r.a,deleteChannelDraft:r.a,bannerHeight:void 0,isTopBannerVisible:!1,isBottomBannerVisible:!1,keyboardLocale:void 0};class channel_list_ChannelList extends i.a.PureComponent{constructor(e){super(e),Object(X.a)(this,["setScrollbarRef","getCurrentScrollTop","resetCurrentScrollTopMaybe","onResize","onScroll","onListFocusEnter","onInviteClick","onInviteCloseClick","onAddChannelCloseClick","onItemKeyDown","renderRow","renderRowWithWrapper","isRowFocusable","getAriaAttributesForRow","onItemSelected","scrollToTopOfChannelList","focus","getPropsForItem"]),this.currentScrollTop=0,this.height=0,this.keyboardNavigableListRef=i.a.createRef();this.layout=new sidebar_layout_SidebarLayout({getHeight:e=>this.rowHeightByKey[e]});var t=Object(Ih.b)({keyboardLocale:this.props.keyboardLocale});this.keyboardShortcuts=Object.keys(t).reduce((e,a)=>(e[a]=t[a].keys.map(e=>e.replace("key_","")).join(" "),e),{})}componentDidMount(){if(Object(ps.a)(window,"performance.timing.fetchStart")){var e=this.props.shouldTrackTTFMP;if(e&&Object(kt.a)()){var t=Object(p.getStateForClientStore)();(e=Object(m.f)(t))&&Object(p.dispatchForClientStore)(Object(m.b)(!1))}var a=Promise.resolve();Object(ve.v)()&&Object(Ia.tb)()&&(a=Object(Ia.B)("shouldLogFirstMeaningfulPaint").then(t=>{"false"===t&&(e=!1)})),(ve.l||ve.t||ve.o)&&(e=!1);var n=Object(jh.d)(),r=Object(ve.u)()?"_reload":"",s=Date.now()-(window.performance.timing.fetchStart+n),i=Object(kt.a)()?"ttfmp_sonic_".concat(this.props.bootType).concat(r):"ttfmp_legacy".concat(r);a.then(()=>{e&&(this.shouldLogFirstMeaningfulPaint=!1,Object(ve.v)()&&Object(Ia.tb)()&&Object(Ia.Wb)("shouldLogFirstMeaningfulPaint","false"),this.props.logger.info("PERF","First meaningful paint: ".concat(s,"ms")),window.performance.timing.fetchStart>0&&this.props.telemeter.store(i,s))}),this.clogInvitePeopleButton()}}componentDidUpdate(e){if(Object(kt.a)()){var t=Object(p.getStateForClientStore)(),a=Object(mr.getFocusedWorkspace)(t);if(Object(m.i)(t)&&a===this.props.teamId){var n=Object(W_.b)(),r=Date.now()-n;this.props.telemeter.store("team_switch_sonic",r),Object(p.dispatchForClientStore)(Object(m.e)(!1))}}var s={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(fa.a)(s)&&this.props.addToSectionNavigation(),Object(va.a)(s)&&this.props.removeFromSectionNavigation(),this.restoreFocusOnUpdate&&(this.focus(),this.restoreFocusOnUpdate=!1)}onResize(e){var{height:t}=e;this.resetCurrentScrollTopMaybe(t),this.height=t,this.props.onResize({height:t})}onScroll(e,t){var{scrollTop:a}=t;this.currentScrollTop=a,this.props.onScroll&&this.props.onScroll(a)}onListFocusEnter(){var{selectedItemId:e,bannerHeight:t,isTopBannerVisible:a,isBottomBannerVisible:n,hasKeyboardFocus:r}=this.props,s=this.keyboardNavigableListRef.current,i=s.getActiveItem();r&&(i!==e&&s.focusOnKey(e),(a||n)&&this.ensureRowInView(e,t+10))}onDeleteKeyPressed(e){this.restoreFocusOnUpdate=!0;var{rows:t,closeIM:a,deleteComposerDraft:n,deleteChannelDraft:r}=this.props,s=e.id,i=t[Object(Gu.a)(this.rowKeys,s)];if(i){var{id:o,params:c={}}=i,{channelId:l,threadTs:d}=c,p=i.type;"composer_draft"!==p?"channel_draft"!==p?"channel"===p&&a(o):r({channelId:l,threadTs:d}):n(o)}}onEnterKeyPressed(e){var t=e.currentTarget.querySelector("a,button");t&&t.click()}onItemKeyDown(e){var t=e.keyCode;t!==K_?(t===V_||Object(ve.q)()&&t===z_)&&this.onDeleteKeyPressed(e):this.onEnterKeyPressed(e)}onInviteClick(e,t){this.props.onInviteClick(t)}onInviteCloseClick(){this.props.setHideInviteButton()}onAddChannelCloseClick(){this.props.setHideAddChannelButton()}onItemSelected(e){this.selectedItemRef=e}setScrollbarRef(e){this.Scrollbar=e&&e.getWrappedInstance?e.getWrappedInstance():e}getCurrentScrollTop(){return this.currentScrollTop}getContentHeight(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.rows;return e.length?e[e.length-1].scrollBottom:0}getAriaLabelForRow(e){var{isScreenReaderEnabled:t,hasKeyboardFocus:a}=this.props;return e&&"channel"===e.type&&(a||t)?this.props.getAriaLabelForRow(e.id):void 0}getAriaDescriptionSectionHeaderRow(e){var{featureSidebarVirtualized:t}=this.props;if(t)return"channels"===e?Y_.t("Press {keys} to find or create a channel",{keys:this.keyboardShortcuts.browse_channels,note:'Contextual instructions visible only for customers using screen readers. Applied to the "Channels" button in the Channel List. "keys" is a space-delimited list of keys for the keyboard shortcut.'}):"drafts"===e?Y_.t("Press delete to delete a draft",{note:'Contextual instructions visible only for customers using screen readers. Applied to the "Drafts" header in the Channel List. "keys" is a space-delimited list of keys for the keyboard shortcut.'}):"app"===e?Y_.t("Press delete to remove messages from an app from the sidebar",{note:'Contextual instructions visible only for customers using screen readers. Applied to the "Apps" header in the Channel List. "keys" is a space-delimited list of keys for the keyboard shortcut.'}):"ims"===e?Y_.t("Press {keys} to find or create a channel. Press delete to remove a conversation from the sidebar",{keys:this.keyboardShortcuts.browse_dms,note:'Contextual instructions visible only for customers using screen readers. Applied to the "Direct Messages" header in the Channel List. "keys" is a space-delimited list of keys for the keyboard shortcut.'}):void 0}getAriaAttributesForRow(e){return"sectionHeading"===e.type?{role:e.role,"aria-expanded":e["aria-expanded"],"aria-level":e["aria-level"],"aria-label":e["aria-label"],"aria-describedby":"".concat(e.key,"-description")}:"folderHeading"===e.type?{role:e.role,"aria-level":e["aria-level"],"aria-expanded":e["aria-expanded"],"aria-label":e.name}:"sectionHeadingAriaGroup"===e.type?{role:e.role,"aria-owns":e["aria-owns"],"aria-label":e["aria-label"]}:{role:e.role,"aria-level":e["aria-level"]}}getPropsForItem(e){var{key:t,index:a}=e,{rows:n,selectedItemId:r}=this.props,s=n[a];if(s){var i={className:"p-channel_sidebar__static_list__item",tabIndex:-1};if("presentation"===s.role)return G_({},i,{role:s.role});var o=this.getAriaAttributesForRow(s);if("group"===o.role)return G_({},i,{},o);var c=r===t;return G_({},i,{},o,{tabIndex:c?0:-1,"aria-label":s["aria-label"]||this.getAriaLabelForRow(s),"aria-selected":c,"aria-setsize":s["aria-setsize"],"aria-posinset":s["aria-posinset"]})}}isItemInView(e){var t=this.keyboardNavigableListRef&&this.keyboardNavigableListRef.current;return!!t&&t.isItemInView(e)}isItemAboveView(e){var t=this.keyboardNavigableListRef&&this.keyboardNavigableListRef.current;return!!t&&t.isItemAboveView(e)}isItemBelowView(e){var t=this.keyboardNavigableListRef&&this.keyboardNavigableListRef.current;return!!t&&t.isItemBelowView(e)}focus(){var{featureSidebarVirtualized:e,selectedItemId:t}=this.props;e?this.keyboardNavigableListRef.current.focusOnKey(t):this.selectedItemRef&&this.selectedItemRef.focus()}clogInvitePeopleButton(){var{clogger:e}=this.props;e.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}}),e.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}}),e.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}}),e.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}})}resetCurrentScrollTopMaybe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.rows;e>this.getContentHeight(t)&&(this.currentScrollTop=0)}scrollToTarget(e){var t=Math.max(0,Math.min(this.getContentHeight()-this.height,e));Object(yh.a)({fromValue:this.currentScrollTop,toValue:t,duration:200,easing:"easeOutQuad",onTick:e=>{var{value:t,nextTick:a}=e;this.jumpToOffset(t),a()}})}ensureRowInView(e,t){var a=this.keyboardNavigableListRef&&this.keyboardNavigableListRef.current;if(a&&!a.isItemInView(e,t)){var n=a.getContainerHeight(),r=this.layout.getTotalHeight(),s=this.layout.getOffsetForKey(e),i=this.layout.getHeight(e);a.isItemAboveView(e,t)&&a.scrollToOffset(Math.max(0,s-t),{animate:!0}),a.isItemBelowView(e,t)&&a.scrollToOffset(Math.min(r,s-n+i+t),{animate:!0})}}scrollToTopOfChannelList(){this.jumpToOffset(0)}jumpToOffset(e){this.Scrollbar&&this.Scrollbar.scrollTop(e),this.keyboardNavigableListRef.current&&this.keyboardNavigableListRef.current.scrollToOffset(e)}isRowFocusable(e){var{index:t}=e,a=this.props.rows[t];return"presentation"!==a.role&&"group"!==a.role}renderSectionHeadingAriaGroup(e){var t=this.props.rows[e-1],{name:a,key:n}=t,r="".concat(n,"-description"),s=this.getAriaDescriptionSectionHeaderRow(a)||" ";return i.a.createElement("div",{id:r,className:"p-channel_sidebar__group-description"},s)}renderRowWithWrapper(e,t){var{height:a,type:n,key:r}=e,s={quickswitcherButton:"listitem",allThreadsLink:"listitem",searchLink:"listitem",pageLink:"listitem",sectionHeading:"listitem",channel:"listitem",app:"listitem",addAChannelLink:"listitem",invitePeopleLink:"listitem",installAppsLink:"listitem",appSuggestionLinks:"listitem",upgradeSlackCTA:"listitem",spacer:"presentation",topPadding:"presentation",emptyState:"listitem"}[n];return i.a.createElement("div",{key:r,style:{height:a},role:s},this.renderRow(t))}renderRow(e){var{onItemSelect:t,featureSeeMoreChannels:a,featureSidebarVirtualized:n,rows:r}=this.props,s=r[e];if(!s)return null;switch(s.type){case"quickswitcherButton":return i.a.createElement(hh,null);case"allThreadsLink":return i.a.createElement(Jm,{qaLabel:"all_thread_link",selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected});case"searchLink":return i.a.createElement($m,{selectItem:t});case"pageLink":return i.a.createElement(ob,{id:s.id,selectItem:t,onItemSelected:this.onItemSelected});case"sectionHeading":return this.renderSectionHeading(s);case"sectionHeadingAriaGroup":return this.renderSectionHeadingAriaGroup(e);case"folderHeading":return this.renderFolderHeading(s.name);case"channel":return this.renderChannel(s);case"composer_draft":return this.renderComposerDraft(s);case"channel_draft":return this.renderChannelDraft(s);case"appDmSuggestion":return this.renderAppDmSuggestion(s.id,s.index);case"addAChannelLink":return i.a.createElement(rb,{isDim:s.dim,qaLabel:"add_channel",label:a?Y_.t("See more channels"):Y_.t("Add a channel"),onClickClose:this.onAddChannelCloseClick});case"invitePeopleLink":return i.a.createElement(pb,{selectItem:this.onInviteClick,dim:s.dim,qaLabel:"invite_people",label:Y_.t("Invite people"),showClose:!0,onClickClose:this.onInviteCloseClick,featureSidebarVirtualized:n});case"installAppsLink":return i.a.createElement(vb,null);case"appSuggestionLinks":return i.a.createElement(Ib,null);case"upgradeSlackCTA":return i.a.createElement(e_,null);case"spacer":case"topPadding":case"emptyState":return null;default:Object(Wa.b)().warn("Row type ".concat(s.type," not implemented"),s)}return null}renderDraftsHeading(e){var{channelIds:t}=e;return i.a.createElement(Zb,{selectItem:this.props.onItemSelect,scrollToTopOfChannelList:this.scrollToTopOfChannelList,channelIds:t})}renderSectionHeading(e){var{name:t,priorDisplayedChannelSection:a,channelSection:n,channelIds:r}=e,{shouldUseChannelSections:s,onCreateChannelClick:o,onCreateSharedChannelClick:c}=this.props;if(s&&n)return"drafts"===t?this.renderDraftsHeading(e):i.a.createElement(o_,{channelSection:n,priorDisplayedChannelSectionId:a&&a.id,channelIds:r});switch(t){case"drafts":return this.renderDraftsHeading(e);case"starred":return!this.props.shouldUseChannelSections&&this.props.sidebarFoldersIsEnabled?i.a.createElement(Yb,{label:Y_.t("Starred"),qaLabel:"starred",showPlus:!0,onPlusClick:this.props.onCreateFolder,channelIds:r}):i.a.createElement(a_,{channelIds:r});case"sharedChannels":return i.a.createElement(b_,{onPlusClick:c,channelIds:r});case"channels":return i.a.createElement(E_,{onPlusClick:o,channelIds:r});case"orgWideChannels":return i.a.createElement(P_,{channelIds:r});case"ims":return i.a.createElement(R_,{channelIds:r});case"apps":return i.a.createElement(B_,{channelIds:r});case"browse":return i.a.createElement(Sh,{label:"Browse",channelIds:r});default:return null}}renderFolderHeading(e){return i.a.createElement(w_,{name:e,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver})}renderAppDmSuggestion(e,t){return i.a.createElement(Lh,{id:e,index:t})}renderChannel(e){var{id:t,index:a,channelSection:n,channelSectionChannelIds:r}=e;return this.props.shouldUseChannelSections?i.a.createElement(Tm,{key:t,id:t,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:a,channelSection:n,channelSectionChannelIds:r}):this.props.sidebarFoldersIsEnabled?i.a.createElement(wm,{key:t,id:t,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:a,sidebarFoldersIsEnabled:!0,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver}):i.a.createElement(wm,{key:t,id:t,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:a,channelSection:n})}renderComposerDraft(e){var{id:t}=e;return i.a.createElement(Fm,{id:t,key:t,onItemSelected:this.onItemSelected,selectItem:this.props.onItemSelect})}renderChannelDraft(e){var{id:t,params:a={}}=e,{draftId:n,channelId:r,threadTs:s}=a;return i.a.createElement(Wm,{draftId:n,channelId:r,threadTs:s,key:t,onItemSelected:this.onItemSelected,selectItem:this.props.onItemSelect})}render(){var{featureSidebarVirtualized:e,rows:t}=this.props,a=t.map(e=>e.key);return this.rowKeys=a,this.rowHeightByKey=t.reduce((e,t)=>(e[t.key]=t.height,e),{}),i.a.createElement(fh.a,{onResize:this.onResize},n=>{var{width:r,height:s}=n;return e?i.a.createElement(Eh.a,{layout:this.layout,ref:this.keyboardNavigableListRef,width:r,height:s,className:"p-channel_sidebar__static_list",keys:a,rowRenderer:this.renderRow,"aria-label":Y_.t("Channels and direct messages"),onScroll:this.onScroll,onItemKeyDown:this.onItemKeyDown,isFocusableItem:this.isRowFocusable,pageHeight:s-26,getPropsForItem:this.getPropsForItem,role:"tree",useStaticHeightForListItems:!0,useFixedTrackHeightForScrollbar:!0,onFocusEnter:this.onListFocusEnter}):i.a.createElement(Ch.a,{width:r,height:s,contentHeight:this.getContentHeight(),onScroll:this.onScroll,ref:this.setScrollbarRef,serializationKey:"channel-list-scrollbar"},i.a.createElement("div",{className:"p-channel_sidebar__static_list","data-qa":"channel_sidebar_list","aria-label":Y_.t("Channels and direct messages"),role:"list"},t.map(this.renderRowWithWrapper)))})}}channel_list_ChannelList.defaultProps=Q_;var X_=Object(kt.a)()?Object(H.a)(channel_list_ChannelList,"ChannelList",{index:2}):channel_list_ChannelList,J_=Object(vi.a)(X_),Z_=new x.b("channel_sidebar"),$_={linkedId:null,isMention:!1,position:"top",ensureRowInView:r.a,featureSidebarVirtualized:!1,clogger:{},isIAPhase1Enabled:!1};class unread_banner_UnreadBanner extends i.a.PureComponent{constructor(){super(),this.onClick=this.onClick.bind(this)}onClick(e){var{linkedId:t,ensureRowInView:a,clogger:n,isIAPhase1Enabled:r}=this.props;e.preventDefault(),n.track("SIDEBAR_MORE_UNREADS_CLICK",{is_iap1:r}),t&&a(t)}render(){var{isShowing:e,position:t,isMention:a,linkedId:n,featureSidebarVirtualized:r}=this.props;if(!e)return null;var s=l()("p-channel_sidebar__banner",{"p-channel_sidebar__banner--mentions":a,"p-channel_sidebar__banner--unreads":!a,"p-channel_sidebar__banner--top":"top"===t,"p-channel_sidebar__banner--bottom":"bottom"===t}),o="top"===t?"arrow-up-medium":"arrow-down-medium",c=a?Z_.t("Unread Mentions"):Z_.t("More Unreads");return i.a.createElement(jt.c,{className:s,onClick:this.onClick,"data-qa-linked-id":n,tabIndex:r?-1:void 0},c,i.a.createElement(We.b,{type:o,inline:!0,className:"p-channel_sidebar__banner_icon"}))}}unread_banner_UnreadBanner.defaultProps=$_;var eg=unread_banner_UnreadBanner,tg=a("unce"),ag=new x.b("drafts"),ng={dispatch:r.a,featureComposeFlow:!1,hasMaxDrafts:!1,isIAP1Enabled:!1},rg=e=>{var{dispatch:t,featureComposeFlow:a,hasMaxDrafts:n,isIAP1Enabled:r}=e,s=Object(Am.a)();return a?i.a.createElement(qe.c,{delay:qe.a,tip:()=>{if(n)return ag.t("You have reached the maximum number of drafts (Copy TBD)");if(Ia.W){var e=Object(ve.q)()?"\u2318":"Ctrl ";return ag.rt("New message<r1>{metaKey}N</r1>",{metaKey:e},e=>{var{text:t}=e;return i.a.createElement("div",{className:"c-tooltip__subtitle"},t)})}return ag.rt("New message")}},i.a.createElement(jt.c,{className:l()("p-channel_sidebar__compose_button",{"p-channel_sidebar__compose_button--disabled":n}),disabled:n,onClick:()=>{t(Object(pt.a)()),s.track(ie.EventId.COMPOSE_FLOW,{draft_action_source:"sidebar",draft_type:"composer",contexts:{ui_context:{action:ie.UiAction.CLICK,step:ie.UiStep.COMPOSE_FLOW_CREATE}},is_iap1:r})},tabIndex:"-1"},i.a.createElement(We.b,{type:r?"compose-dm":"pencil",className:"p-channel_sidebar__compose_button_icon"}))):null};rg.defaultProps=ng;var sg=Object(d.b)(e=>({featureComposeFlow:Object(O.g)(e),hasMaxDrafts:Object(tg.a)(e),isIAP1Enabled:Object(Rr.d)(e)}))(rg),ig=a("ZSbO"),og=new x.b("channel_sidebar"),cg={featureChannelSections:!1,shouldUseChannelSections:!1,isOrganizing:!1,selectedItems:[],selectedItemCount:0,setIsOrganizing:r.a,createChannelSection:r.a,openModal:r.a,closeModal:r.a,firstChannelSectionId:null,clearAllOrganizingSections:r.a};function lg(e){var{featureChannelSections:t,shouldUseChannelSections:a,isOrganizing:n,selectedItems:r,selectedItemCount:s,firstChannelSectionId:o}=e;if(!t)return null;if(!a)return null;if(!n)return null;var c=r.length>0,l=r.map(e=>e.channelId);return i.a.createElement("div",{className:"p-channel_sidebar__organize_mode_menu"},i.a.createElement("p",{"data-qa":"org_mode_count",className:"p-channel_sidebar__organize_mode_count"},og.t("{selectedItemCount} selected",{selectedItemCount:s})),i.a.createElement("div",{className:"p-channel_sidebar__organize_mode_actions"},c?i.a.createElement(Yi,{channelIds:l,onItemSelected:e.clearAllOrganizingSections},i.a.createElement(jt.d,{type:"outline",className:"p-channel_sidebar__organize_action p-channel_sidebar__organize_action--primary","data-qa":"org_mode_action_move"},og.t("Move to\u2026"))):i.a.createElement(jt.d,{type:"outline",className:"p-channel_sidebar__organize_action p-channel_sidebar__organize_action--primary","data-qa":"org_mode_action_create",onClick:()=>e.openModal({element:i.a.createElement(wi,{action:Ci.CREATE,focusOnMount:!0,openedFromKeyboardShortcut:!1,onSubmit:t=>{var{emoji:a,text:n}=t;return e.createChannelSection({emoji:a,name:n,nextChannelSectionId:o})},onClose:e.closeModal})})},og.t("Add section")),i.a.createElement(jt.d,{type:"outline",className:"p-channel_sidebar__organize_action","data-qa":"org_mode_action_done",onClick:()=>e.setIsOrganizing({isOrganizing:!1})},og.t("Done"))))}lg.defaultProps=cg;var dg={setIsOrganizing:Kt.h,createChannelSection:Fi,openModal:Ua.e,closeModal:Ua.a,clearAllOrganizingSections:Kt.a},pg=Object(d.b)(e=>({featureChannelSections:Object(h.m)(e,"feature_channel_sections"),shouldUseChannelSections:Object(N.a)(e),isOrganizing:oa(e),selectedItems:ma(e),selectedItemCount:ua(e),firstChannelSectionId:Jt(e)}),dg)(lg);function ug(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function hg(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ug(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ug(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var mg=new x.b("channel_sidebar"),bg="react_channel_sidebar_update",_g=Object(sp.a)(1),gg=2,fg=10,vg=24,Og={FOCUS_WITHIN:2,CONTAINER_FOCUSED:1,NOT_FOCUSED:-1},yg={isBooted:!1,selectedItemId:null,mentionIds:[],unreadIds:[],mutedMentionIds:[],idsNeedingPresenceSubscription:[],rows:[],rowsMap:{},rowIds:[],onItemSelect:r.a,onInviteClick:r.a,onCreateChannelClick:r.a,jumperCoachmarkState:null,historyNavigationEnabled:!1,useHistoryNavigation:!1,featureClassicNav:!1,sidebarFoldersIsEnabled:!1,ensureDraftChannelObjects:void 0,initializeFolderData:r.a,initializeAppSuggestionLinksData:r.a,createFolder:r.a,dragFolderOrChannel:r.a,ariaLandmarkLabel:null,featureSonicPresenceManager:!1,featureSonicInputs:!1,telemeter:null,isWindowFocused:!1,logger:null,bootType:null,teamId:null,suggestedChannelsMap:{},clogger:{},setHideInviteButton:r.a,setHideAddChannelButton:r.a,featureSeeMoreChannels:!1,userAttentionIsOnChat:!1,composerVisible:!1,featureSidebarVirtualized:!1,closeIM:r.a,getAriaLabelForRow:r.a,deleteComposerDraft:r.a,deleteChannelDraft:r.a,shouldUseChannelSections:!1,isOrganizing:!1,isScreenReaderEnabled:!1,isWelcomePlaceAnimationEnabled:!1,isIAPhase1Enabled:!1,shouldHideForWelcomePlace:!1,useIATopNav:!1,connectDropTarget:Vu.a,isChannelDraggingOverSidebar:!1,isChannelSectionDraggingOverSidebar:!1,keyboardLocale:void 0};class channel_sidebar_ChannelSidebar extends s.PureComponent{constructor(e){super(e),this.setRef=this.setRef.bind(this),this.ensureRowInView=this.ensureRowInView.bind(this),this.onResize=this.onResize.bind(this),this.onScroll=this.onScroll.bind(this),this.onItemSelect=this.onItemSelect.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDrop=this.onDrop.bind(this),this.onCreateFolder=this.onCreateFolder.bind(this),Object(kt.a)()||(this.onFocusEnter=this.onFocusEnter.bind(this),this.onFocusLeave=this.onFocusLeave.bind(this),this.onFocusWithin=this.onFocusWithin.bind(this)),this.state=hg({},this.getUnreadRows(e),{scrolledBelowFirstMention:!1,scrolledBelowFirstUnread:!1,scrolledAboveLastMention:!1,scrolledAboveLastUnread:!1,listHeight:0,hasInitializedFolderData:!1,hasInitializedAppSuggestionLinksData:!1}),Object(kt.a)()||(this.state.hasKeyboardFocus=Og.NOT_FOCUSED),this.presenceList=Object(Yu.a)(this.props.idsNeedingPresenceSubscription),this.commands=[{keys:["option+up"],handler:this.gotoNext.bind(this,"up",!1)},{keys:["option+down"],handler:this.gotoNext.bind(this,"down",!1)},{keys:["option+shift+up"],handler:this.gotoNext.bind(this,"up",!0)},{keys:["option+shift+down"],handler:this.gotoNext.bind(this,"down",!0)}],this.pendingEnsureRowInView=!1,this.shouldTrackTTFMP=!0,this.isSuggestedChannelsClogSent=!1,this.hasInitializedDraftsData=!1}componentDidMount(){this.keyCommands=new pi.a,this.keyCommands.bindAll(this.commands),this.maybeLoadFolderData(),this.maybeLoadDraftsData(),this.maybeLoadAppSuggestionLinksData(),this.shouldTrackTTFMP=this.props.isWindowFocused,this.maybeBeaconBootMountSuccess()}componentDidUpdate(e){var{selectedItemId:t,isBooted:a,jumperCoachmarkState:n,rows:r,suggestedChannelsMap:s,clogger:i,telemeter:o}=this.props,c="SHOW_BUTTON"===n||"HIDE_BUTTON"===n,l=e.selectedItemId!==t,d=a&&!e.isBooted;if(c||!l&&!d||this.ensureRowInView(t),this.maybeLoadFolderData(),this.maybeLoadDraftsData(),this.maybeLoadAppSuggestionLinksData(),_g&&o.measureAndClear("".concat(bg,"_mark"),bg),!this.isSuggestedChannelsClogSent&&Object.keys(s).length){var p=r.filter(e=>"channel"===e.type&&s[e.id]).length;p&&i.track&&(this.isSuggestedChannelsClogSent=!0,i.track("SIDEBAR_SUGGESTED_CHANNELS_RENDERED",{count:p}))}this.maybeBeaconBootMountSuccess()}componentWillUnmount(){this.keyCommands.reset(),this.presenceList&&this.presenceList.destroy()}onCreateFolder(){this.props.sidebarFoldersIsEnabled&&this.props.createFolder()}onDragEnd(){this.props.sidebarFoldersIsEnabled&&(this.props.dragFolderOrChannel(this.state.dragData),this.setState(()=>({dragData:null})))}onDragOver(e){this.props.sidebarFoldersIsEnabled&&e.preventDefault()}onDragStart(e){if(this.props.sidebarFoldersIsEnabled){var t=e.dataTransfer;t.effectAllowed="move",t.dropEffect="move";for(var a=e.target;a&&!a.attributes["data-drag-type"];)a=a.parentNode;var n={src:{type:a.attributes["data-drag-type"].value,id:a.attributes["data-drag-id"].value}};this.setState(()=>({dragData:n}))}}onDrop(e){if(this.props.sidebarFoldersIsEnabled){for(var t=e.target;t&&!t.attributes["data-drag-type"];)t=t.parentNode;this.setState(e=>({dragData:hg({},e.dragData,{dest:{type:t.attributes["data-drag-type"].value,id:t.attributes["data-drag-id"].value}})}))}}onFocusEnter(e){var{relatedEvent:t,target:a,currentTarget:n}=e;if(!t||"mousedown"!==t.type){var r=a===n?Og.CONTAINER_FOCUSED:Og.FOCUS_WITHIN;this.setState(()=>({hasKeyboardFocus:r}))}}onFocusLeave(){this.setState(()=>({hasKeyboardFocus:Og.NOT_FOCUSED}))}onFocusWithin(){this.setState(()=>({hasKeyboardFocus:Og.FOCUS_WITHIN}))}onItemSelect(e){var{routeParams:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.props.onItemSelect(e,{routeParams:t})}onResize(e){var{height:t}=e;this.setState(e=>{var a=hg({},e,{listHeight:t});return hg({},a,{},this.getBannerState(a))},()=>{!1!==this.pendingEnsureRowInView&&this.ensureRowInView(this.pendingEnsureRowInView)})}onScroll(){this.setState(this.getBannerState)}getBannerStateFromVisibleListItems(e,t,a,n){var r=t&&this.ChannelList.isItemAboveView(t.key),s=n&&this.ChannelList.isItemBelowView(n.key);return{scrolledBelowFirstMention:e&&this.ChannelList.isItemAboveView(e.key),scrolledBelowFirstUnread:r,scrolledAboveLastMention:a&&this.ChannelList.isItemBelowView(a.key),scrolledAboveLastUnread:s}}getBannerState(){var{firstMention:e,firstUnread:t,lastMention:a,lastUnread:n,listHeight:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,s=this.ChannelList?this.ChannelList.getCurrentScrollTop():0;if(this.props.featureSidebarVirtualized)return this.getBannerStateFromVisibleListItems(e,t,a,n);var i=!!(t&&t.scrollBottom-fg<=s),o=!!(n&&n.scrollTop+fg>=s+r);return{scrolledBelowFirstMention:!!(e&&e.scrollBottom-fg-(i?vg:0)<=s),scrolledBelowFirstUnread:i,scrolledAboveLastMention:!!(a&&a.scrollTop+fg+(o?vg:0)>=s+r),scrolledAboveLastUnread:o}}getUnreadRows(){var{rowsMap:e,unreadIds:t,mentionIds:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{firstUnread:e[Object(Ku.a)(t)],lastUnread:e[Object(bp.a)(t)],firstMention:e[Object(Ku.a)(a)],lastMention:e[Object(bp.a)(a)]}}setRef(e){this.ChannelList=e}UNSAFE_componentWillReceiveProps(e){if(this.shouldTrackTTFMP=this.shouldTrackTTFMP&&e.isWindowFocused,e.isBooted){e.featureSonicPresenceManager||Object(mi.a)()||Object(Ti.a)(this.props.idsNeedingPresenceSubscription,e.idsNeedingPresenceSubscription)||this.presenceList&&(this.presenceList.clear(),this.presenceList.add(e.idsNeedingPresenceSubscription));var t="SHOW_BUTTON"===e.jumperCoachmarkState||"HIDE_BUTTON"===e.jumperCoachmarkState,a=this.props.rows.length&&e.rows.length&&("Vquick_switcher"===this.props.rows[0].id||"Vquick_switcher"===e.rows[0].id)&&this.props.rows[0].id!==e.rows[0].id;(t||a)&&this.ChannelList&&this.ChannelList.jumpToOffset(0),this.setState(t=>{var a=hg({},t,{},this.getUnreadRows(e));return this.ChannelList&&this.ChannelList.resetCurrentScrollTopMaybe(a.listHeight,e.rows),hg({},a,{},this.getBannerState(a))})}}UNSAFE_componentWillUpdate(e){_g&&e.telemeter.mark("".concat(bg,"_mark"))}ensureRowInView(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.selectedItemId,{rows:t,rowsMap:a,rowIds:n,featureSidebarVirtualized:r}=this.props;if(a[e])if(r)this.ChannelList.ensureRowInView(e,vg);else{var{currentScrollTop:s}=this.ChannelList,{listHeight:i}=this.state;if(0!==i){this.pendingEnsureRowInView=!1;var o=t[Math.max(n.indexOf(e)-gg,0)].scrollTop;if(o<s)this.ChannelList.scrollToTarget(o);else{var c=t[Math.min(n.indexOf(e)+gg,t.length-1)].scrollBottom-i;c>s&&this.ChannelList.scrollToTarget(c)}}else this.pendingEnsureRowInView=e}}gotoNext(e,t,a){var{rows:n,rowIds:r,selectedItemId:s,featureSonicInputs:i,userAttentionIsOnChat:o}=this.props;if(Object(kt.a)()){if(!o)return}else if(!Object(Ju.f)())return;if(i){var c=Object(zu.b)(document.activeElement);if(c){if(!c.isEmpty()){if(!("up"!==e||c.isCursorAtBeginning&&c.isCursorAtBeginning()))return;if(!("down"!==e||c.isCursorAtEnd&&c.isCursorAtEnd()))return}}else if(Object($u.a)(document.activeElement))return}else{var l=Object(Qu.c)(),d=Object(Xu.e)(l);if(Object(Xu.f)(l)&&d>0){if(Object(Xu.h)(l))return;var p=Object(Xu.b)(l).start;if("up"===e&&0!==p)return;if("down"===e&&p!==d)return}}var u,h=r.indexOf(s),m=Object(Vd.a)(Object(Vd.a)(Object(ed.a)(n,(e,t)=>hg({},e,{index:t})),e=>"channel"===e.type),e=>!t||Object(Gu.a)(this.props.unreadIds,e.id)>=0||Object(Gu.a)(this.props.mutedMentionIds,e.id)>=0);0!==m.length&&(void 0===(u="down"===e?Object(hp.a)(m,e=>e.index>h):Object(qu.a)(m,e=>e.index<h))&&(u="down"===e?Object(Ku.a)(m):Object(bp.a)(m)),this.props.onItemSelect(u.id),a&&a.preventDefault())}maybeLoadAppSuggestionLinksData(){this.state.hasInitializedAppSuggestionLinksData||this.props.initializeAppSuggestionLinksData===r.a||(this.props.initializeAppSuggestionLinksData(),this.setState(()=>({hasInitializedAppSuggestionLinksData:!0})))}maybeLoadDraftsData(){this.props.ensureDraftChannelObjects&&!this.hasInitializedDraftsData&&(this.props.ensureDraftChannelObjects(),this.hasInitializedDraftsData=!0)}maybeLoadFolderData(){this.props.sidebarFoldersIsEnabled&&!this.state.hasInitializedFolderData&&(this.props.initializeFolderData(),this.setState(e=>hg({},e,{hasInitializedFolderData:!0})))}maybeBeaconBootMountSuccess(){var{teamId:e,rows:t,telemeter:a,logger:n}=this.props;window.clientBootMountTeam&&e===window.clientBootMountTeam&&t.length&&(a.count("client_boot_mount_success"),window.clientBootMountTeam=void 0,n.info("BOOT","Beaconed client boot mount success"))}renderFocusOutline(){return this.state.hasKeyboardFocus===Og.CONTAINER_FOCUSED?i.a.createElement("div",{className:"sectionfocusindicator"}):null}render(){if(!this.props.isBooted)return null;var{rows:e,onInviteClick:t,onCreateChannelClick:a,selectedItemId:r,historyNavigationEnabled:s,useHistoryNavigation:o,featureClassicNav:c,sidebarFoldersIsEnabled:d,ariaLandmarkLabel:p,telemeter:u,logger:h,bootType:m,teamId:b,featureSeeMoreChannels:_,featureSidebarVirtualized:g,clogger:f,userAttentionIsOnChat:v,composerVisible:O,closeIM:y,getAriaLabelForRow:C,shouldUseChannelSections:j,isOrganizing:E,isScreenReaderEnabled:k,isWelcomePlaceAnimationEnabled:S,isIAPhase1Enabled:I,useIATopNav:w,shouldHideForWelcomePlace:T,deleteComposerDraft:N,deleteChannelDraft:P,connectDropTarget:A,isChannelDraggingOverSidebar:M,isChannelSectionDraggingOverSidebar:x,keyboardLocale:R}=this.props,{scrolledBelowFirstMention:D,scrolledBelowFirstUnread:F,scrolledAboveLastMention:L,scrolledAboveLastUnread:U,firstMention:B,firstUnread:H,lastMention:W,lastUnread:q}=this.state,G=!Object(kt.a)()&&this.state.hasKeyboardFocus!==Og.NOT_FOCUSED,K=Object(kt.a)()||this.state.hasKeyboardFocus!==Og.CONTAINER_FOCUSED?null:"-1",V=l()("p-channel_sidebar",{focusablesection:!Object(kt.a)()&&G,"p-channel_sidebar--classic_nav":c,"p-channel_sidebar--animate-channels":S,"p-channel_sidebar--iap1":I,"p-channel_sidebar--channel_dragging":M,"p-channel_sidebar--channel_section_dragging":x,"p-channel_sidebar--top_banner_showing":D||F,"p-channel_sidebar--bottom_banner_showing":L||U}),z=Object(kt.a)()?{}:{"data-is-focusable-section":!0,tabIndex:K},Y=T||!I||w?null:i.a.createElement(ah,null),Q=D||F,X=L||U,J=A(i.a.createElement("nav",Object(n.a)({className:V,"data-qa-channel-sidebar":!0,"data-qa-channel-sidebar-selected-item-id":r,"aria-labelledby":p},z),i.a.createElement("h1",{id:"channel_sidebar_aria_label",className:"offscreen"},mg.t("Channel Sidebar")),i.a.createElement(ig.a,null),Y,!T&&!I&&s&&i.a.createElement(gh,{useHistoryNavigation:o}),i.a.createElement("div",{className:"p-channel_sidebar__list"},!E&&i.a.createElement(eg,{position:"top",isShowing:Q,isMention:D,linkedId:D&&B.id||F&&H.id,ensureRowInView:this.ensureRowInView,featureSidebarVirtualized:g,clogger:f,isIAPhase1Enabled:I}),i.a.createElement(J_,{rows:e,onItemSelect:this.onItemSelect,onInviteClick:t,onCreateChannelClick:a,onScroll:this.onScroll,onResize:this.onResize,sidebarFoldersIsEnabled:d,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onDragOver:this.onDragOver,onCreateFolder:this.onCreateFolder,ref:this.setRef,telemeter:u,logger:h,shouldTrackTTFMP:this.shouldTrackTTFMP,bootType:m,teamId:b,setHideInviteButton:this.props.setHideInviteButton,setHideAddChannelButton:this.props.setHideAddChannelButton,featureSeeMoreChannels:_,featureSidebarVirtualized:g,clogger:f,userAttentionIsOnChat:v,composerVisible:O,selectedItemId:r,closeIM:y,getAriaLabelForRow:C,shouldUseChannelSections:j,isOrganizing:E,isScreenReaderEnabled:k,deleteComposerDraft:N,deleteChannelDraft:P,bannerHeight:vg,isTopBannerVisible:Q,isBottomBannerVisible:X,keyboardLocale:R}),!E&&i.a.createElement(eg,{position:"bottom",isShowing:L||U,isMention:L,linkedId:L&&W.id||U&&q.id,ensureRowInView:this.ensureRowInView,featureSidebarVirtualized:g,clogger:f,isIAPhase1Enabled:I}),!E&&i.a.createElement(sg,null)),j&&i.a.createElement(pg,null),Object(kt.a)()?null:this.renderFocusOutline()));return Object(kt.a)()?J:i.a.createElement(Zu.a,{onFocusEnter:this.onFocusEnter,onFocusWithin:this.onFocusWithin,onFocusLeave:this.onFocusLeave},J)}}channel_sidebar_ChannelSidebar.defaultProps=yg;var Cg=channel_sidebar_ChannelSidebar;function jg(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Eg=Object(sp.a)(1),kg=e=>{if(Object(cp.d)(e))return!1;if(Object(Ke.k)(e,"add_channel_prompt_dismissed"))return!1;if(Object(Ca.l)(e))return!1;if(!!Object(Ke.i)(e))return!0;for(var t=Object(L.b)(e)||{},a=Object.keys(t),n=0,r=0;r<a.length;r++)if(Object(B.Rb)(t[a[r]])&&(n+=1),n>10)return!1;return!0},Sg=e=>{if(!Object(ln.d)(e))return!1;var t=Object(Ll.a)(Object(Vd.a)(Object(Ca.a)(e),e=>!e.is_slackbot));return!Object(Ke.k)(e,"channel_sidebar_hide_invite")&&(!(t>=2)||"dim")},Ig=e=>{if("Vall_threads"!==Object(_.a)(e)){var t=Object(Ke.k)(e,"has_received_threaded_message"),a=Object(h.m)(e,"feature_incremental_unread_counts")?Object(Jd.j)(e):Object(Xd.c)(e);return t||a}return!0},wg=e=>{var t,a,n,s,i,o,c,l,d,p,m,b,g,f,v,y,C,j,E,k,S,I,w,P;return(A,M)=>{((e,t)=>Eg&&Object(pr.c)({state:t}).mark("".concat(e,"_mark")))("react_channel_sidebar_selector_factory",A);var x=Object(Wa.a)({state:A}),R=Object(ne.a)({state:A}),D=Object(pr.c)({state:A}),F=Object(ep.g)(A),U=Object(ep.b)(A),H=Object(N.a)(A),W=Object(_.a)(A),{onItemSelect:q}=M,{rows:G,rowsMap:K,rowIds:V,orderedChannelSections:z,idsNeedingPresenceSubscription:Y}=(e=>{var t,a=Object(ip.a)(e),{sidebarSections:n,sidebarSectionsOrdered:r,orderedChannelSections:s,idsNeedingPresenceSubscription:i}=cu(e),o="enabled"===Object(It.c)(e,"folders_sidebar")&&Object(Ke.k)(e,"folders_enabled"),c=o?Object(Qd.e)(e):[],l=!Object(bs.a)(Object(Se.g)(e)),d=Object(Ke.k)(e,"add_apps_prompt_dismissed")||Object(Yd.d)(e),p=!l&&!Object(we.D)(Object(Se.d)(e))&&!d;t=Object(Rr.d)(e)?Fp({sidebarSectionsOrdered:r,sidebarSections:n,pages:Object(pl.a)().filter(t=>Object(pl.d)(e,t))||[],hasAllUnreadsLink:!0===Object(Ke.k)(e,"enable_unread_view"),hasThreadsLink:Ig(e),featureComposeFlow:Object(O.g)(e),showDraftsPageSidebar:Object(O.j)(e),primaryView:Object(_.a)(e),iap1MainMenuIsVisible:Object(Yd.h)(e),iaBrowsersEnabled:Object(Rr.a)(e),shouldUseChannelSections:Object(N.a)(e),isOrganizing:oa(e)}):Lu({hasQuickswitcherButton:!a&&Object(Ke.k)(e,"show_sidebar_quickswitcher_button")&&!Object(Rr.d)(e),hasAllUnreadsLink:!0===Object(Ke.k)(e,"enable_unread_view"),hasAddAChannelLink:kg(e),hasInvitePeopleLink:Sg(e),hasSearchLink:Object(T.a)(e),hasAppsLink:op(e),hasInstallAppsLink:p,appSuggestionsCount:Wu(e),hasUpgradeSlackCTA:Object(Rn.p)(e),hasThreadsLink:Ig(e),sidebarSectionsOrdered:r,sidebarSections:n,sidebarFoldersIsEnabled:o,sidebarFolders:c,pages:Object(pl.a)().filter(t=>Object(pl.d)(e,t))||[],featureComposeFlow:Object(O.g)(e),shouldUseChannelSections:Object(N.a)(e),shouldHideForWelcomePlace:Object(re.q)(e),showDraftsPageSidebar:Object(O.j)(e)});var{rows:u,rowsMap:h,rowIds:m}=t;return{rows:u,rowsMap:h,rowIds:m,orderedChannelSections:s,idsNeedingPresenceSubscription:i}})(A),Q=Wu(A),X=[],J=[],Z=[];if(Object(h.m)(A,"feature_incremental_unread_counts")?(Object(Jd.e)(A)&&J.push("Vall_threads"),Object(Jd.j)(A)&&X.push("Vall_threads")):(Object(Xd.b)(A)&&J.push("Vall_threads"),Object(Xd.c)(A)&&X.push("Vall_threads")),H)for(var $=0;$<G.length;++$){var ee=G[$];if("sectionHeading"===ee.type&&ee.channelIds)for(var te=0;te<ee.channelIds.length;++te){var ae=ee.channelIds[te],se=Object(L.w)(A,ae),ie=Object(xr.c)(A,ae);!ie&&Object(L.x)(A,ae)&&X.push(ae),!ie&&se&&J.push(ae),ie&&se&&Z.push(ae)}}else for(var oe=V.length,ce=0;ce<oe;ce++){var le=V[ce],de=Object(L.w)(A,le),pe=Object(xr.c)(A,le);!pe&&Object(L.x)(A,le)&&X.push(le),!pe&&de&&J.push(le),pe&&de&&Z.push(le)}var ue=Object(St.e)(A),he=(Object(ga.a)(A)||"composer_toolbar"===Object(It.c)(A,"composer_toolbar"))&&Object(wt.b)(A),me=Object(Yd.i)(A),be=Object(Ke.k)(A,"sidebar_behavior"),_e="enabled"===Object(It.c)(A,"folders_sidebar")&&Object(Ke.k)(A,"folders_enabled"),ge=Object(ip.a)(A),fe=Object(ip.b)(A),ve=Object(h.m)(A,"feature_sonic_inputs"),Oe=Object(h.m)(A,"feature_classic_nav"),ye=Object(h.m)(A,"feature_sonic_presence_manager"),Ce=Object(h.m)(A,"feature_see_more_channels"),je=Object(h.m)(A,"feature_sidebar_virtualized"),Ee=Object(Kd.a)(G,e=>"addAChannelLink"===e.type),Ie=Object(u.b)(A),Te=Object(B.S)(A),Ne=Te.join(","),Pe=H&&ba(A),Ae=H&&_a(A),Me=Object(up.b)(A),xe=Object(re.a)(A),Re=Object(re.q)(A),De=Object(Rr.d)(A),Fe=Object(Rr.f)(A);if(W===a&&Object(Ti.a)(X,n)&&Object(Ti.a)(J,s)&&Object(Ti.a)(Z,i)&&Object(Ti.a)(V,o)&&me===c&&be===l&&_e===d&&Oe===p&&Object(Ti.a)(M,m)&&Ee===b&&Ne===g&&ue===f&&he===v&&Q===y&&C===Me&&j===xe&&E===De&&k===Fe&&S===Re&&Object(Ti.a)(I,z)&&w===Pe&&Object(Ti.a)(P,Ae))return t;var Le=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jg(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jg(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},M,{isBooted:!0,rows:G,rowsMap:K,rowIds:V,selectedItemId:W,unreadIds:X,mentionIds:J,mutedMentionIds:Z,userAttentionIsOnChat:ue,composerVisible:he,jumperCoachmarkState:me,historyNavigationEnabled:ge,useHistoryNavigation:fe,featureClassicNav:Oe,idsNeedingPresenceSubscription:Y,featureSonicPresenceManager:ye,featureSonicInputs:ve,featureSeeMoreChannels:Ce,sidebarFoldersIsEnabled:_e,featureSidebarVirtualized:je,closeIM:t=>{var a=Object(L.e)(A,t),n=Object(B.u)(a);return"im"===n||"mpim"===n?e(Object(ns.closeChannelApi)({channelId:t})):void 0},deleteComposerDraft:t=>{var a=Object(O.d)(A,t),n=Object(Lp.d)(a);return e(Object(Up.b)({draftId:n}))},deleteChannelDraft:function(){return e(Object(Up.a)(...arguments))},ensureDraftChannelObjects:()=>e(rp()),initializeFolderData:()=>e(Object(Qd.f)()),initializeAppSuggestionLinksData:()=>e(Object(Yd.l)()),dragFolderOrChannel:t=>{var{src:a,dest:n}=t;e(Object(Qd.c)({src:a,dest:n})),e(Object(Qd.h)())},createFolder:()=>e(Object(Qd.a)()),setHideInviteButton:()=>(R.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}}),R.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}}),e(Object(Ve.f)({pref:"channel_sidebar_hide_invite",value:!0}))),setHideAddChannelButton:()=>e(Object(Ve.f)({pref:"add_channel_prompt_dismissed",value:!0})),onItemSelect:function(t){var{routeParams:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x.info("CHANNEL-SIDEBAR","onItemSelect",t),W===t&&e(Object(tp.a)({channelId:t})),Object(kt.a)()?(e(Object($d.a)({id:t,routeParams:a})),e(Object(Zd.d)({source:"SIDE_BAR",objId:t}))):q&&q(t).then(()=>{e(Object(Zd.d)({source:"SIDE_BAR",objId:t}))}).catch(r.a)},ariaLandmarkLabel:"channel_sidebar_aria_label",logger:x,clogger:R,telemeter:D,isWindowFocused:F,bootType:U,teamId:Ie,suggestedChannelsMap:Te.reduce((e,t)=>(e[t]=t,e),{}),getAriaLabelForRow:e=>{var t=Object(L.e)(A,e),a=Object(B.u)(t),n=Object(B.w)(A,t,{publicChannelIncludeHashSign:!1}),r=Object(h.d)(A),s=Object(B.Tb)(r,t),i=Object(xr.c)(A,e),o=!!Object(B.U)(t),c=Object(B.x)(A,e),l=!!Object(L.d)(A,t),d=Object(B.Ib)(t);return"im"===a?Object(pp.a)({name:n,isSelf:s,hasNotifications:l,isStarred:d,isMuted:i,hasDraft:c,hasUnreads:o}):"mpim"===a?function(){var{name:e,isCurrent:t,hasNotifications:a,isStarred:n,isMuted:r,hasDraft:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(()=>t&&a&&r&&n&&s?dp.t("current conversation, has notifications, muted, starred, has a draft message"):!t&&a&&r&&n&&s?dp.t("has notifications, muted, starred, has a draft message"):t&&!a&&r&&n&&s?dp.t("current conversation, muted, starred, has a draft message"):!t&&!a&&r&&n&&s?dp.t("muted, starred, has a draft message"):t&&a&&!r&&n&&s?dp.t("current conversation, has notifications, starred, has a draft message"):!t&&a&&!r&&n&&s?dp.t("has notifications, starred, has a draft message"):t&&!a&&!r&&n&&s?dp.t("current conversation, starred, has a draft message"):t||a||r||!n||!s?t&&a&&r&&!n&&s?dp.t("current conversation, has notifications, muted, has a draft message"):!t&&a&&r&&!n&&s?dp.t("has notifications, muted, has a draft message"):t&&!a&&r&&!n&&s?dp.t("current conversation, muted, has a draft message"):t||a||!r||n||!s?t&&a&&!r&&!n&&s?dp.t("current conversation, has notifications, has a draft message"):t||!a||r||n||!s?!t||a||r||n||!s?t||a||r||n||!s?t&&a&&r&&n&&!s?dp.t("current conversation, has notifications, muted, starred"):!t&&a&&r&&n&&!s?dp.t("has notifications, muted, starred"):t&&!a&&r&&n&&!s?dp.t("current conversation, muted, starred"):t||a||!r||!n||s?t&&a&&!r&&n&&!s?dp.t("current conversation, has notifications, starred"):t||!a||r||!n||s?!t||a||r||!n||s?t||a||r||!n||s?t&&a&&r&&!n&&!s?dp.t("current conversation, has notifications, muted"):t||!a||!r||n||s?!t||a||!r||n||s?t||a||!r||n||s?!t||!a||r||n||s?t||!a||r||n||s?!t||a||r||n||s?"":dp.t("current conversation"):dp.t("has notifications"):dp.t("current conversation, has notifications"):dp.t("muted"):dp.t("current conversation, muted"):dp.t("has notifications, muted"):dp.t("starred"):dp.t("current conversation, starred"):dp.t("has notifications, starred"):dp.t("muted, starred"):dp.t("has a draft message"):dp.t("current conversation, has a draft message"):dp.t("has notifications, has a draft message"):dp.t("muted, has a draft message"):dp.t("starred, has a draft message"))();return e&&i?dp.t("{name} ({context})",{name:e,context:i}):e||""}({name:n,hasNotifications:l,isStarred:d,isMuted:i,hasDraft:c,hasUnreads:o}):Object(lp.a)({channelName:n,isPrivate:Object(B.Bb)(t),isStarred:d,isMuted:i,hasDraft:c,hasUnreads:o})},shouldUseChannelSections:H,lastActiveDropTargetForChannelDrag:Pe,lastActiveDropTargetForChannelSectionDrag:Ae,moveManyChannels:function(){return e(Li(...arguments))},moveChannelSection:function(){return e(Wi(...arguments))},isOrganizing:oa(A),isScreenReaderEnabled:Me,isWelcomePlaceAnimationEnabled:xe,isIAPhase1Enabled:De,useIATopNav:Fe,shouldHideForWelcomePlace:Re});return t=Le,a=W,n=X,s=J,i=Z,o=V,c=me,l=be,d=_e,p=Oe,m=M,b=Ee,g=Ne,f=ue,v=he,y=Q,C=Me,E=De,k=Fe,j=xe,S=Re,I=z,w=Pe,P=Ae,((e,t)=>Eg&&Object(pr.c)({state:t}).measureAndClear("".concat(e,"_mark"),e))("react_channel_sidebar_selector_factory",A),Le}},Tg={withRef:!0},Ng=Object(d.c)(wg,Tg)(Cg),Pg=["DRAG_CHANNEL_SIDEBAR_CHANNEL","DRAG_CHANNEL_SIDEBAR_SECTION_HEADING"],Ag={drop:(e,t)=>{var a=t.getItemType();if("DRAG_CHANNEL_SIDEBAR_CHANNEL"===a){var n=t.getItem(),r=n.channel.id,s=n.channelSection&&n.channelSection.id,i=e.lastActiveDropTargetForChannelDrag&&e.lastActiveDropTargetForChannelDrag.channelSectionId;if(s===i)return;var o=[],c=[];s&&o.push({channelSectionId:s,channelIds:[r]}),i&&c.push({channelSectionId:i,channelIds:[r]}),(o.length||c.length)&&e.moveManyChannels({remove:o,insert:c})}else if("DRAG_CHANNEL_SIDEBAR_SECTION_HEADING"===a){var l=t.getItem().channelSection.id,{channelSectionId:d,isAfter:p}=e.lastActiveDropTargetForChannelSectionDrag||{},u=e.orderedChannelSections||[],h=d;if(p){var m=u.findIndex(e=>e.id===d),b=m>=0?u[m+1]:void 0;h=b?b.id:null}e.moveChannelSection({channelSectionId:l,nextChannelSectionId:h})}}},Mg=Object(kt.a)()?Object(zd.a)(Pg,Ag,(e,t)=>{var a=t.getItemType(),n="DRAG_CHANNEL_SIDEBAR_CHANNEL"===a&&t.isOver(),r="DRAG_CHANNEL_SIDEBAR_SECTION_HEADING"===a&&t.isOver();return{connectDropTarget:e.dropTarget(),isChannelDraggingOverSidebar:n,isChannelSectionDraggingOverSidebar:r}})(Cg):Cg,xg=Object(Td.a)(Object(d.c)(wg,Tg)(Mg)),Rg=Ng,Dg=a("TGBA"),Fg=a("uXhx"),Lg=a("1wEm"),Ug=a("PbVc"),Bg=a("2TEj"),Hg=Object(xt.b)("Save the scrollmark if the current user is viewing a public channel that they are a member of",function(e,t){var{channelId:a,scrollmark:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t(),s=Object(L.e)(r,a);Object(B.Cb)(s)&&!Object(B.nb)(s)||e(Object(Bs.d)({channelId:a,scrollmark:n}))});Hg.meta={name:"maybeSaveScrollmark",key:"messagePaneStoreThunksMaybeSaveScrollmark",description:"Save the scrollmark if the current user is viewing a public channel that they are a member of"},Hg.propTypes={channelId:o.default.string,scrollmark:o.default.object};var Wg=a("umiW"),qg=a("pfyZ"),Gg=a("DTfP"),Kg=a("fYfO"),Vg=a("Uk1S"),zg=a("fAc/"),Yg=a("miRO"),Qg=a("TDTp"),Xg=a("YjHT"),Jg=a("QB+X"),Zg=a("KdfD"),$g=a("hOQf"),ef=a("Q+UV"),tf=e=>{var{featureReactjiEducationTip:t,inProductCoachmark:a,channel:n}=e;return!!Object(kt.a)()&&(!!t&&(!(!a||"reactji_awareness_coachmark"!==a.name)&&!(!n||!Object(B.Cb)(n)&&!Object(B.Bb)(n))))},af=a("2HDu"),nf=a("K138"),rf=a("Muja"),sf=a("uKXT"),of=Object(As.b)("TS.debug_widget.isVisible"),cf=Object(As.b)("TS.debug_widget.setFrameRate"),lf=100,df=1e3,pf=300,uf=1e3,hf=500,mf=60;class responsiveness_ResponsivenessMetrics{constructor(){this.enabledForPRQMetrics=!1,this.enabledForClientStats=!1,this.resetCountersForClientStats(),this.resetCountersForPRQMetrics(),this.beachballsTotal=0,this.stuttersTotal=0,this.rafHandler=this.rafHandler.bind(this)}isEnabled(){return this.isEnabledForClientStats()||this.isEnabledForPRQMetrics()}rafHandler(){this.isEnabledForClientStats()&&this.rafHandlerForClientStats(),this.isEnabledForPRQMetrics()&&this.rafHandlerForPRQMetrics(),this.isEnabled()&&window.requestAnimationFrame(this.rafHandler)}resetCountersForClientStats(){this.beachballs=0,this.frameRates=[],this.stutters=0,this.lastRafHandlerTimeForClientStats=window.performance.now(),this.fpsIndex=0,this.fpsStartTime=null}rafHandlerForClientStats(){if(this.isEnabledForClientStats()){var e=window.performance.now(),t=e-this.lastRafHandlerTimeForClientStats;if(this.lastRafHandlerTimeForClientStats=e,t>df?(this.beachballs+=1,this.beachballsTotal+=1):t>lf&&(this.stutters+=1,this.stuttersTotal+=1),0===this.fpsIndex&&(this.fpsStartTime=e),this.fpsIndex+=1,this.fpsIndex===pf){var a=(e-this.fpsStartTime)/1e3,n=Math.floor(this.fpsIndex/a);this.fpsIndex=0,of()&&cf(n),this.frameRates.push(n)}}}startClientStats(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler),this.enabledForClientStats=!0,this.resetCountersForClientStats()}stopClientStats(){this.enabledForClientStats=!1}storeClientStats(){var e=Object(pr.a)();if(e.count("stutters",this.stutters),e.count("beachballs",this.beachballs),!Object(bs.a)(this.frameRates)){var t,a=Object(sf.a)(this.frameRates),n=this.frameRates.sort(),r=Math.floor(n.length/2);t=n.length%2==1?n[r]:(n[r-1]+n[r])/2,e.store("fps_min",a),e.store("fps_median",t)}this.stutters=void 0,this.beachballs=void 0,this.frameRates=void 0}isEnabledForClientStats(){return!!this.enabledForClientStats}getTotalBeachballCount(){return this.beachballsTotal}getTotalStutterCount(){return this.stuttersTotal}resetCountersForPRQMetrics(){this.histJankyWindows={},this.histFrameRenderTime={},this.durationMs=0,this.lastRafHandlerTimeForPRQMetrics=void 0,this.nextJankyWindowSampleIntervalNumber=1,this.framesInPreviousJankyWindowSample=0,this.framesInCurrentJankyWindowSample=0}recordJankyWindows(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!(t<1)){var a=Math.max(mf-e,0);this.histJankyWindows[a]=(this.histJankyWindows[a]||0)+t}}sampleJankyWindows(){var e=Object(_n.d)(this.durationMs,9)>hf*this.nextJankyWindowSampleIntervalNumber,t=Math.floor(this.durationMs/hf),a=t-this.nextJankyWindowSampleIntervalNumber;e&&(this.durationMs>=uf&&(this.recordJankyWindows(0,a-1),this.recordJankyWindows(this.framesInCurrentJankyWindowSample,a>0?1:0),this.recordJankyWindows(this.framesInCurrentJankyWindowSample+this.framesInPreviousJankyWindowSample)),this.nextJankyWindowSampleIntervalNumber=t+1,this.framesInPreviousJankyWindowSample=a>0?0:this.framesInCurrentJankyWindowSample,this.framesInCurrentJankyWindowSample=0),this.framesInCurrentJankyWindowSample+=1}rafHandlerForPRQMetrics(){if(this.isEnabledForPRQMetrics()){var e=window.performance.now();if(void 0!==this.lastRafHandlerTimeForPRQMetrics){var t=e-this.lastRafHandlerTimeForPRQMetrics,a=Object(_n.d)(Math.round(t,0),2);this.histFrameRenderTime[a]=(this.histFrameRenderTime[a]||0)+1,this.lastRafHandlerTimeForPRQMetrics=e,this.durationMs+=t,this.sampleJankyWindows()}else this.lastRafHandlerTimeForPRQMetrics=e}}startPRQMetrics(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler),this.enabledForPRQMetrics=!0,this.resetCountersForPRQMetrics()}stopPRQMetrics(){this.enabledForPRQMetrics=!1}isEnabledForPRQMetrics(){return!!this.enabledForPRQMetrics}getPRQMetrics(){return{durationMs:Math.round(this.durationMs),histJankyWindows:this.histJankyWindows,histFrameRenderTime:this.histFrameRenderTime}}}function bf(){return null===responsiveness_ResponsivenessMetrics.instance&&(responsiveness_ResponsivenessMetrics.instance=new responsiveness_ResponsivenessMetrics),responsiveness_ResponsivenessMetrics.instance}responsiveness_ResponsivenessMetrics.instance=null;bf().startClientStats.bind(responsiveness_ResponsivenessMetrics.instance),bf().stopClientStats.bind(responsiveness_ResponsivenessMetrics.instance),bf().storeClientStats.bind(responsiveness_ResponsivenessMetrics.instance),bf().isEnabledForClientStats.bind(responsiveness_ResponsivenessMetrics.instance),bf().getTotalBeachballCount.bind(responsiveness_ResponsivenessMetrics.instance),bf().getTotalStutterCount.bind(responsiveness_ResponsivenessMetrics.instance);var _f=bf().startPRQMetrics.bind(responsiveness_ResponsivenessMetrics.instance),gf=bf().stopPRQMetrics.bind(responsiveness_ResponsivenessMetrics.instance),ff=bf().isEnabledForPRQMetrics.bind(responsiveness_ResponsivenessMetrics.instance),vf=bf().getPRQMetrics.bind(responsiveness_ResponsivenessMetrics.instance),Of=a("aLpA"),yf=a("XoBp"),Cf=a("OZf9"),jf=a("pHS2"),Ef=a("h5+L"),kf=a("F2y5"),Sf=a("RQuH"),If=a("mkut"),wf=a("UXvI"),Tf=a("+6YQ"),Nf=a("hOGb"),Pf=new x.b("contextual_shortcuts"),Af={showKeyboardShortcuts:r.a,featureContextualMessageShortcuts:!1,closeModal:r.a,featureAppViewsReminders:!1};class contextual_message_shortcuts_modal_ContextualShortcutsModal extends i.a.Component{constructor(e){super(e),this.state={isOpen:!0},Object(X.a)(this,["closeModal","openShortcutsPanel"])}componentDidMount(){this.props.clogger.track(ie.EventId.CLIENT_KEYBOARD_SHORTCUTS,{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.KEYDOWN,[ie.UiContextKeys.step]:ie.UiStep.CONTEXTUAL_SHORTCUTS_EDUCATION,[ie.UiContextKeys.ui_properties]:{[ie.UiPropertiesKeys.element_type]:ie.ElementType.MODAL}}}})}closeModal(){this.setState(()=>({isOpen:!1})),this.props.closeModal()}openShortcutsPanel(e){this.props.showKeyboardShortcuts({focusKey:e&&"keydown"===e.type?"keyboard_shortcuts":null}),this.closeModal()}render(){var{featureAppViewsReminders:e,featureContextualMessageShortcuts:t}=this.props;if(!t)return null;var a=Pf.t("Message keyboard shortcuts");return i.a.createElement(mc.a,{isOpen:this.state.isOpen,centered:!0,fullscreen:!1,closeModal:this.closeModal},i.a.createElement(mc.h,null,i.a.createElement(mc.j,{title:a})),i.a.createElement(mc.d,null,i.a.createElement(mc.e,null,i.a.createElement("div",{className:"margin_bottom_100"},Pf.rt("When you focus on a message using {up_arrow_key} or {f6_key}, you can quickly interact with it by pressing:",{up_arrow_key:i.a.createElement(Nf.a,{label:"\u2191",slim:!0}),f6_key:i.a.createElement(Nf.a,{label:"F6",slim:!0})})),i.a.createElement("ul",{className:"no_bullets margin_left_0"},i.a.createElement("li",{className:"margin_bottom_50"},Pf.rt("{shortcut} to edit (if it's your message)",{shortcut:i.a.createElement(Nf.a,{label:"E",className:"nudge_bottom_1"})})),i.a.createElement("li",{className:"margin_bottom_50"},Pf.rt("{shortcut} to add an emoji reaction",{shortcut:i.a.createElement(Nf.a,{label:"R",className:"nudge_bottom_1"})})),i.a.createElement("li",{className:"margin_bottom_50"},Pf.rt("{shortcut} to open a thread",{shortcut:i.a.createElement(Nf.a,{label:"T",className:"nudge_bottom_1"})})),i.a.createElement("li",{className:"margin_bottom_50"},Pf.rt("{shortcut} to pin / unpin",{shortcut:i.a.createElement(Nf.a,{label:"P",className:"nudge_bottom_1"})})),i.a.createElement("li",{className:"margin_bottom_50"},Pf.rt("{shortcut} to share this message",{shortcut:i.a.createElement(Nf.a,{label:"S",className:"nudge_bottom_1"})})),i.a.createElement("li",{className:"margin_bottom_50"},Pf.rt("{shortcut} to star / unstar this message",{shortcut:i.a.createElement(Nf.a,{label:"A",className:"nudge_bottom_1"})})),i.a.createElement("li",{className:"margin_bottom_50"},Pf.rt("{shortcut} to mark as unread from this message",{shortcut:i.a.createElement(Nf.a,{label:"U",className:"nudge_bottom_1"})})),e&&i.a.createElement("li",{className:"margin_bottom_50"},Pf.rt("{shortcut} to remind you about this message",{shortcut:i.a.createElement(Nf.a,{label:"M",className:"nudge_bottom_1"})})),i.a.createElement("li",null,Pf.rt("{shortcut} to delete this message",{shortcut:i.a.createElement(Nf.a,{label:"DELETE",className:"nudge_bottom_1"})}))))),i.a.createElement(mc.f,null,i.a.createElement(mc.g,null,i.a.createElement(Tf.b,{type:"outline",onClick:this.openShortcutsPanel},Pf.t("Open the shortcut panel")),i.a.createElement(Tf.b,{onClick:this.closeModal,autoFocus:!0},Pf.t("Okay")))))}}contextual_message_shortcuts_modal_ContextualShortcutsModal.defaultProps=Af;var Mf=Object(d.b)(e=>({featureContextualMessageShortcuts:Object(h.m)(e,"feature_contextual_message_shortcuts"),featureAppViewsReminders:Object(h.m)(e,"feature_app_views_reminders"),clogger:Object(ne.a)({state:e})}),e=>({showKeyboardShortcuts:function(){return e(Object(Ie.h)(...arguments))},closeModal:function(){return e(Object(Ua.a)(...arguments))}}))(contextual_message_shortcuts_modal_ContextualShortcutsModal),xf=Object(xt.b)("Open the contextual message shortcuts modal",function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})();Object(h.m)(t,"feature_contextual_message_shortcuts")&&e(Object(Ua.e)({element:i.a.createElement(Mf,null)}))});xf.meta={name:"openContextualMessageShortcutsModal",key:"actionsOpenContextualMessageShortcutsModalOpenContextualMessageShortcutsModal",description:"Open the contextual message shortcuts modal"};var Rf=xf,Df=a("LxWA"),Ff=a("9RFl"),Lf=a("gtcZ");class foreword_Foreword extends s.PureComponent{render(){var{channelId:e,channelType:t,hasLimitedHistory:a,isShared:n,isSlackbotIm:r,newxpOnboardingStep:s,hasTeamMessageLimit:o,isMsgLimitBannerUpgrd1131BugTreatment:c,logger:l}=this.props;if(r)return s&&s!==Hv.COMPLETE?i.a.createElement(Wv,{step:s,clientTheme:this.props.clientTheme}):i.a.createElement(Dv,null);if(c){if(a&&o)return i.a.createElement(Sv,{channelId:e,clientTheme:this.props.clientTheme})}else if(a)return o||l.error("Foreword Component: Rendering `LimitedHistoryForeword` component when channel history is limited but team message limit is not.",{subtype:"MESSAGE_PANE_FOREWORD"}),i.a.createElement(Sv,{channelId:e,clientTheme:this.props.clientTheme});return"channel"===t||"private"===t?n?i.a.createElement(Lv,{channelId:e}):!this.props.inCreatorOnboarding&&i.a.createElement(dv,{channelId:e}):"im"===t?n?i.a.createElement(Ev,{channelId:e}):i.a.createElement(vv,{channelId:e}):"mpim"===t?i.a.createElement(Mv,{channelId:e}):(Object(Wa.b)().warn('Unknown foreword type "'.concat(t,'"')),null)}}foreword_Foreword.defaultProps={channelId:null,channelType:null,hasLimitedHistory:!1,isShared:!1,isSlackbotIm:!1,newxpOnboardingStep:null,hasTeamMessageLimit:!1,isMsgLimitBannerUpgrd1131BugTreatment:!1,clientTheme:"light",inCreatorOnboarding:!1};var Uf=Object(d.b)(function(e,t){var{channelId:a}=t,n=Object(L.e)(e,a);if(!n)return null;var r=Object(Se.d)(e);return{isShared:Object(B.ab)(n),isSlackbotIm:Object(B.Hb)(n),newxpOnboardingStep:Object(I.l)(e),hasTeamMessageLimit:Object(we.l)(r)>0,isMsgLimitBannerUpgrd1131BugTreatment:"treatment"===Object(It.c)(e,"lc_msg_limit_banner_upgrd_1131_bug"),logger:Object(Wa.a)({state:e}),inCreatorOnboarding:Object(cp.d)(e)}})(foreword_Foreword),Bf=a("A/mR"),Hf=a("w6pt"),Wf=a("Atrf"),qf=a("kDop"),Gf=Object(As.b)("TS.ui.purpose_dialog.start",r.a),Kf=(a("v+20"),new x.b("dialogs_purpose")),Vf={currentRawPurpose:void 0,currentFormattedPurpose:void 0,featureM11nChannelDetails:!1,submitChannelPurpose:r.a};class channel_purpose_dialog_ChannelPurposeDialog extends s.Component{constructor(e){super(e),this.onSubmit=this.onSubmit.bind(this),this.renderInput=this.renderInput.bind(this),this.input=i.a.createRef()}onSubmit(){var e=this.input.current&&this.input.current.getWrappedInstance().value();null!=e?e!==this.props.currentRawPurpose&&this.props.submitChannelPurpose({channelId:this.props.channelId,purpose:e}):this.props.logger.error("Channel Description dialog submitted with undefined value")}renderInput(e){var{modules:t,isOpen:a}=e,{currentFormattedPurpose:n}=this.props;return i.a.createElement(go.b,{initialText:n,focusOnMount:!0,minLines:3,modules:t,isAutocompleteOpen:a,maxLength:B.a,ariaLabel:Kf.t("Edit channel description"),ref:this.input,useLegacyLists:!0})}render(){return this.props.featureM11nChannelDetails?i.a.createElement(di.a,Object(n.a)({className:"p-channel_purpose_dialog",title:Kf.t("Edit channel description"),goButtonText:Kf.t("Update description"),onGo:this.onSubmit,footerText:Kf.t("Describe what this channel is for.")},this.props),i.a.createElement(hi.a,{renderInput:this.renderInput,completeOnMembers:!0,completeOnChannels:!0,completeOnEmoji:!0,shouldCompleteOnTab:!1})):null}}channel_purpose_dialog_ChannelPurposeDialog.defaultProps=Vf;var zf=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(Wa.a)({label:"CHANNEL-PURPOSE",state:e}),r=Object(L.e)(e,a),s=r&&r.purpose&&r.purpose.value,i=s&&Object(fo.a)(e,{text:s});return{channelId:r.id,currentRawPurpose:s,currentFormattedPurpose:i,featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details"),logger:n}},e=>({submitChannelPurpose:function(){return e(Object(us.G)(...arguments))}}))(channel_purpose_dialog_ChannelPurposeDialog),Yf=a("F+Fq"),Qf=new x.b("message_pane_foreword"),Xf={onClick:r.a};class app_button_AppButton extends s.PureComponent{render(){var{onClick:e}=this.props;return i.a.createElement(te.a,{className:"p-message_pane__foreword__button",onClick:e},i.a.createElement(We.b,{type:"plus",size:"inherit"})," ",Qf.t("Add an app"))}}app_button_AppButton.defaultProps=Xf;var Jf=app_button_AppButton,Zf=new x.b("message_pane_foreword"),$f={isPrivate:!1,onClick:r.a};class invite_button_InviteButton extends s.PureComponent{render(){var e,{isPrivate:t,onClick:a}=this.props;return e=t?Zf.t("Add people to this private channel",{fallbackHash:"e39d2befa2a64ec5522429e9d4be5aace4c8f08b"}):Zf.t("Add people to this channel",{fallbackHash:"379e588d09f8d3998101d407aac8b99c9555d635"}),i.a.createElement(te.a,{className:"p-message_pane__foreword__button",onClick:a},i.a.createElement(We.b,{type:"user",size:"inherit"})," ",e)}}invite_button_InviteButton.defaultProps=$f;var ev=invite_button_InviteButton,tv=new x.b("message_pane_foreword"),av={onClick:r.a};class purpose_button_PurposeButton extends s.PureComponent{render(){var{onClick:e}=this.props;return i.a.createElement(te.a,{className:"p-message_pane__foreword__button",onClick:e},i.a.createElement(We.b,{type:"pencil",size:"inherit"})," ",tv.t("Set a description"))}}purpose_button_PurposeButton.defaultProps=av;var nv=purpose_button_PurposeButton,rv={channelId:null,purpose:null,isUserRestricted:!1,isChannelArchived:!1,channelType:null,canInviteToChannel:!1,canAddAppsToChannel:!1,startChannelInviteModal:r.a,openModal:r.a,openAppsBrowserModal:r.a,featureM11nAppsBrowser:!1};class channel_foreword_buttons_ChannelForewordButtons extends s.PureComponent{constructor(e){super(e),this.onPurposeButtonClick=this.onPurposeButtonClick.bind(this),this.onInviteButtonClick=this.onInviteButtonClick.bind(this),this.onAppButtonClick=this.onAppButtonClick.bind(this)}onPurposeButtonClick(){var{channelId:e}=this.props;Object(kt.a)()?this.props.openModal({element:i.a.createElement(zf,{channelId:e})}):Gf(e)}onInviteButtonClick(){var{channelId:e,clogger:t}=this.props;t.track(ie.EventId.CHANNEL_FOREWORD,{contexts:{ui_context:{action:"click",ui_properties:{element_type:"button",element_name:"channel_foreword_add"}}}}),this.props.startChannelInviteModal({channelId:e})}onAppButtonClick(){var{channelId:e,clogger:t}=this.props,a=ie.EventId.CHANNEL_FOREWORD,n={[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.ui_element]:ie.UiElement.BTN_ADD_APPS};t.track(a,{contexts:{[ie.ClientEventKeys.ui_context]:n}}),this.props.featureM11nAppsBrowser?this.props.openAppsBrowserModal({addAppsVariant:!0,referringEventId:a,referringUiContext:n,channelId:e}):Object(Yf.b)(a,n)}render(){var e,t,a,{channelId:n,canAddAppsToChannel:r,isUserRestricted:s,purpose:o,channelType:c,canInviteToChannel:l,isChannelArchived:d}=this.props;return o||s||d||(e=i.a.createElement(nv,{channelId:n,onClick:this.onPurposeButtonClick})),r&&(t=i.a.createElement(Jf,{onClick:this.onAppButtonClick})),l&&(a=i.a.createElement(ev,{onClick:this.onInviteButtonClick,isPrivate:"private"===c})),i.a.createElement("div",{className:"p-message_pane__foreword__buttons"},e,t,a)}}channel_foreword_buttons_ChannelForewordButtons.defaultProps=rv;var sv=Object(d.b)(function(e,t){var{channelId:a}=t,n=Object(L.e)(e,a);if(!n)return{};var r=Object(Ca.b)(e),s=n.purpose?n.purpose.value:null,i=Object(sn.K)(e,a),o=Object(sn.x)(e,a);return{purpose:s,isUserRestricted:Object(Fe.Gb)(r),isChannelArchived:Object(B.X)(n),channelType:Object(B.u)(n),clogger:Object(ne.a)({state:e}),canInviteToChannel:i,canAddAppsToChannel:o,featureM11nAppsBrowser:Object(h.m)(e,"feature_m11n_apps_browser")}},e=>({startChannelInviteModal:function(){return e(Object(cs.b)(...arguments))},openAppsBrowserModal:function(){return e(Object(ds.a)(...arguments))},openModal:function(){return e(Object(Ua.e)(...arguments))}}))(channel_foreword_buttons_ChannelForewordButtons),iv=new x.b("message_pane_foreword"),ov={channelId:null,description:null,purpose:null,isUserRestricted:!1,userCanSetPurposeForChannel:!0,openModal:r.a};class channel_foreword_description_ChannelForewordDescription extends s.PureComponent{constructor(e){super(e),this.onPurposeButtonClick=this.onPurposeButtonClick.bind(this)}onPurposeButtonClick(){var{channelId:e}=this.props;Object(kt.a)()?this.props.openModal({element:i.a.createElement(zf,{channelId:e})}):Gf(e)}maybeRenderPurpose(){var{purpose:e}=this.props;return e?i.a.createElement("span",null," ",iv.t("Description:")," ",i.a.createElement(Kr.a,{text:e})):null}maybeRenderPurposeEditLink(){var{purpose:e,isUserRestricted:t,userCanSetPurposeForChannel:a}=this.props;return e&&!t&&a?i.a.createElement("span",{className:"no_wrap"}," ","(",i.a.createElement(te.a,{onClick:this.onPurposeButtonClick},iv.t("edit")),")"):null}render(){var{description:e}=this.props;return i.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},e,this.maybeRenderPurpose(),this.maybeRenderPurposeEditLink())}}channel_foreword_description_ChannelForewordDescription.defaultProps=ov;var cv=Object(d.b)((e,t)=>{var{ok:a}=Object(sn.v)(e,t.channelId);return{userCanSetPurposeForChannel:a}},e=>({openModal:function(){return e(Object(Ua.e)(...arguments))}}))(channel_foreword_description_ChannelForewordDescription),lv=new x.b("message_pane_foreword");class channel_foreword_ChannelForeword extends s.PureComponent{renderTitle(){var{channelId:e,featureLongerChannelNames:t}=this.props,a=l()("p-message_pane__foreword__title",{"p-message_pane__foreword__title--truncate":!t});return i.a.createElement("h1",{className:a},t?i.a.createElement(qf.a,{channelId:e}):i.a.createElement(Ye.a,{channelId:e,inline:!0,iconProps:{inherit:!0,align:"baseline"}}))}renderDescription(){var e,{channelId:t,createdById:a,creatorIsYou:n,dateCreated:r,isPrivate:s,purpose:o,isUserRestricted:c,featureLongerChannelNames:l}=this.props;r?(e=Object(Bf.j)(r),e=Object(Bf.e)(r)||Object(Bf.f)(r)?e.toLowerCase():lv.t("on {date}",{date:e})):e=lv.rt("on {date}",{date:i.a.createElement(Hf.a,{type:"unknown"})});var d,p=l?i.a.createElement("strong",null,i.a.createElement(qf.a,{channelId:t,boldIcon:!0})):i.a.createElement(Ye.a,{channelId:t,inline:!0,iconProps:{inherit:!0,align:"baseline"},className:"bold"});if(n)d=s?lv.rt("You created this private channel {date}. This is the very beginning of the {name} channel.",{date:e,name:p}):lv.rt("You created this channel {date}. This is the very beginning of the {name} channel.",{date:e,name:p});else{var u=a?i.a.createElement(Wf.a,{id:a,showTooltip:!0}):i.a.createElement(Hf.a,{type:"unknown"});d=s?lv.rt("{creator} created this private channel {date}. This is the very beginning of the {name} channel.",{creator:u,date:e,name:p}):lv.rt("{creator} created this channel {date}. This is the very beginning of the {name} channel.",{creator:u,date:e,name:p})}return i.a.createElement(cv,{channelId:t,description:d,purpose:o,isUserRestricted:c})}render(){var{channelId:e,isPrivate:t}=this.props,a=l()("p-message_pane__foreword",{"p-message_pane__foreword--private":t});return i.a.createElement("div",{className:a},this.renderTitle(),this.renderDescription(),i.a.createElement(sv,{channelId:e}))}}channel_foreword_ChannelForeword.defaultProps={channelId:null,purpose:null,creatorIsYou:!1,createdById:null,dateCreated:null,isPrivate:!1,isUserRestricted:!1};var dv=Object(d.b)(function(e,t){var{channelId:a}=t,n=Object(L.e)(e,a);if(!n)return{};var r=Object(Ca.b)(e),s=n.purpose?n.purpose.value:null,i=Object(B.Bb)(n);return{purpose:s,creatorIsYou:r&&r.id===n.creator,createdById:n.creator,dateCreated:n.created,isPrivate:i,isUserRestricted:Object(Fe.Gb)(r),featureLongerChannelNames:Object(h.m)(e,"feature_longer_channel_names")}})(channel_foreword_ChannelForeword),pv=a("uksu"),uv=a("HfwO"),hv=new x.b("message_pane_foreword"),mv={botName:null,botId:null,openAboutAppWithMemberId:void 0};class app_help_button_AppHelpButton extends s.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){var{botId:e}=this.props;this.props.openAboutAppWithMemberId({memberId:e});var{clogger:t}=this.props;t.track("APP_SPACE_ABOUT_CLICKED",{about_clicked_from_bot_dm:!0})}render(){var{botName:e}=this.props;return i.a.createElement(te.a,{className:"p-message_pane__foreword__button",onClick:this.onClick},i.a.createElement(We.b,{type:"lightbulb-o",size:"inherit"})," ",hv.t("How does {name} work?",{name:Object(x.q)(e)}))}}app_help_button_AppHelpButton.defaultProps=mv;var bv=Object(d.b)(function(e,t){var{botId:a}=t,n=Object(Ca.d)(e,a),r=Object(ne.a)({state:e});return n?{botName:Object(Fe.A)(n),clogger:r}:{clogger:r}},e=>({openAboutAppWithMemberId:function(){return e(Object(pv.c)(...arguments))}}))(app_help_button_AppHelpButton),_v=new x.b("message_pane_foreword"),gv={memberId:null,prefWhoCanSeeThis:!1,openAboutAppWithMemberId:r.a};class im_foreword_BaseImForeword extends s.PureComponent{constructor(e){super(e),this.onMemberClick=this.onMemberClick.bind(this)}onMemberClick(e){e.preventDefault();var{memberId:t,featureReactMemberProfileCard:a}=this.props;this.canAppSpaceBeUsed()?this.props.openAboutAppWithMemberId({memberId:t}):a?this.props.showMemberProfile({memberId:t}):Object(Ju.i)(t)}canAppSpaceBeUsed(){var{isAppSpaceEnabled:e,type:t}=this.props;return"bot"===t&&e}renderAvatar(){var{memberId:e}=this.props;return i.a.createElement("div",{className:"p-message_pane__foreword__avatars"},i.a.createElement(jt.c,{onClick:this.onMemberClick},i.a.createElement(uv.b,{id:e,showPresence:!0,showStatus:!0,showAvatar:!0})))}renderDescription(){var{memberId:e,type:t}=this.props;if("self"===t)return i.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},_v.rt("<b>This is your space.</b> Draft messages, list your to-dos, or keep links and files handy. You can also talk to yourself here, but please bear in mind you\u2019ll have to supply both sides of the conversation."));var a=_v.rt("This is the very beginning of your direct message history with {name}",{name:i.a.createElement(Wf.a,{id:e,showTooltip:!0})});return this.props.prefWhoCanSeeThis&&(a=_v.rt("This is the very beginning of your direct message history with {name}. Only the two of you are in this conversation, and no one else can join it. <a>Learn more</a>",{name:i.a.createElement(Wf.a,{id:e,showTooltip:!0})},e=>{var{text:t,key:a}=e;return i.a.createElement(fe.a,{key:a,href:"https://get.slack.help/hc/articles/360002063088",rel:"noopener noreferrer"},t)})),i.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},a)}renderButtons(){var{memberId:e}=this.props;return this.canAppSpaceBeUsed()?i.a.createElement("div",{className:"p-message_pane__foreword__buttons"},i.a.createElement(bv,{botId:e})):null}render(){return i.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription(),this.renderButtons())}}im_foreword_BaseImForeword.defaultProps=gv;var fv=Object(d.b)(function(e,t){var{channelId:a}=t,n=Object(L.e)(e,a);if(!n)return{};var r,s=Object(B.G)(n),i=Object(Ca.d)(e,s);return r=s===Object(h.d)(e)?"self":Object(Fe.ib)(i)?"bot":"member",{isAppSpaceEnabled:Object($o.g)(e),memberId:s,type:r,prefWhoCanSeeThis:Object(Ke.k)(e,"whocanseethis_dm_mpdm_badge"),featureReactMemberProfileCard:Object(h.m)(e,"feature_react_member_profile_card")}},e=>({openAboutAppWithMemberId:function(){return e(Object(pv.c)(...arguments))},showMemberProfile:function(){return e(Object(Ie.j)(...arguments))}}))(im_foreword_BaseImForeword);fv.propTypes={channelId:o.default.string},fv.defaultProps={channelId:null};var vv=fv,Ov=a("AncD"),yv=a("46+D"),Cv=new x.b("message_pane_foreword"),jv={memberId:void 0,sharedTeam:void 0};class im_shared_foreword_ImSharedForeword extends s.PureComponent{renderAvatar(){var{memberId:e}=this.props;return i.a.createElement("div",{className:"p-message_pane__foreword__avatars"},i.a.createElement(Ov.a,{id:e,size:"large",showPresence:!0,showStatus:!0,showAvatar:!0}))}renderDescription(){var{sharedTeam:e,memberId:t}=this.props,a=!e||Object(we.M)(e)?i.a.createElement(yv.a,{type:"unknown"}):i.a.createElement("strong",null,Object(we.e)(e)),n=Cv.rt("{name} is from {team} and not a member of your team, so share files and information with care.",{name:i.a.createElement(Wf.a,{id:t,showTooltip:!0}),team:a});return i.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},n)}render(){return i.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription())}}im_shared_foreword_ImSharedForeword.defaultProps=jv;var Ev=Object(d.b)(function(e,t){var{channelId:a}=t,n=Object(L.e)(e,a);if(!n)return null;var r=Object(Ca.d)(e,Object(B.G)(n)),s=Object(Fe.P)(r),i=Object(Se.i)(e,s);return{memberId:Object(B.G)(n),sharedTeam:i}})(im_shared_foreword_ImSharedForeword),kv=new x.b("message_pane_foreword");class limited_history_foreword_LimitedHistoryForeword extends s.PureComponent{constructor(e){super(e),this.onClickLearnMore=this.onClickLearnMore.bind(this)}componentDidMount(){var{clogger:e}=this.props;e.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:this.getClogUiElementVal()}}})}onClickLearnMore(){var{clogger:e}=this.props;e.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"click",ui_element:this.getClogUiElementVal()}}})}getClogUiElementVal(){var{channelType:e}=this.props;return"mpim"===e||"im"===e?33:34}render(){var{channelName:e,channelType:t,clientTheme:a,workspaceName:n,teamMessageLimitInSeconds:r}=this.props,o=!0,c="",d="",p=kv.t("See Upgrade Options");r?(o=!1,c=kv.t("Unlock messages prior to {priorToDate} in {workspaceName}",{priorToDate:Object(er.a)(r,"{date}"),workspaceName:Object(x.q)(n)}),d=kv.t("To view and search all the messages in your workspace\u2019s history, rather than just the {maxMesssageLimitCount} most recent, upgrade to one of our paid plans.",{maxMesssageLimitCount:Object(gn.a)(1e4)})):"mpim"===t||"im"===t?(d=kv.t("To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),c=kv.t("There\u2019s more to this conversation")):(c=kv.t("There\u2019s more to the conversation in {name}",{name:e}),d=kv.t("To see and search this channel\u2019s full history, upgrade to one of our paid plans."));var u=l()("p-message_pane__limited_history_foreword",{["p-message_pane__limited_history_foreword--".concat(a)]:"light"!==a});return i.a.createElement("div",{className:u,"data-qa":"msg_lim_header"},i.a.createElement("div",{className:"p-message_pane__limited_history_foreword_headline","data-qa":"msg_lim_headline"},o&&i.a.createElement(s.Fragment,null,i.a.createElement(Vr.b,{text:":speech_balloon:",emojiSize:Vr.a.MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0"),c),i.a.createElement("div",{className:"p-message_pane__limited_history_foreword_subheading","data-qa":"msg_lim_subheading"},d),i.a.createElement(jt.d,{onClick:this.onClickLearnMore,href:Object(an.j)({entryPoint:"limited_history_foreword"}),"data-qa":"see_upgrade_options_btn",size:"small"},p))}}limited_history_foreword_LimitedHistoryForeword.defaultProps={channelName:"",workspaceName:"",teamMessageLimitInSeconds:0,clientTheme:"light"};var Sv=Object(d.b)(function(e,t){var{channelId:a}=t,n=Object(L.e)(e,a);if(!n)return{};var r=Object(Se.d)(e),s=r?Object(we.e)(r):"",i=Object(we.l)(r),o=0;return i>0&&(o=i/1e6),{channelType:Object(B.u)(n),channelName:Object(B.w)(e,n),clogger:Object(ne.a)({state:e}),workspaceName:s,teamMessageLimitInSeconds:o}})(limited_history_foreword_LimitedHistoryForeword),Iv=a("OtLZ"),wv=new x.b("message_pane_foreword"),Tv={memberIds:[],externalTeams:[],notificationPermission:"na",notificationSetting:"everything",prefWhoCanSeeThis:!1,openChannelNotificationPrefsModal:r.a,openPrefsModal:r.a};class mpim_foreword_BaseMpimForeword extends s.PureComponent{constructor(e){super(e),this.openPrefsDialog=this.openPrefsDialog.bind(this),this.openChannelPrefsDialog=this.openChannelPrefsDialog.bind(this),this.state=Object(Z.m)()}getNotificationWarningText(){var{notificationsEnabled:e,notificationDisabledType:t}=this.state;if(e)return null;switch(t){case"not_yet_allowed":return wv.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",null,e=>{var{key:t,text:a}=e;return i.a.createElement(te.a,{onClick:this.openPrefsDialog,key:t},a)});case"not_allowed":return wv.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.");case"impossible":return wv.rt("Your browser does not support desktop notifications. <a>Try one of our apps?</a>",{},e=>{var{key:t,text:a}=e;return i.a.createElement(wh.a,{target:"_blank",key:t,href:"/downloads"},a)});default:return null}}UNSAFE_componentWillReceiveProps(e){this.props.notificationPermission!==e.notificationPermission&&this.setState(()=>Object(Z.m)())}openChannelPrefsDialog(){this.props.openChannelNotificationPrefsModal({channelId:this.props.channelId,entryPoint:"foreward"})}openPrefsDialog(){this.props.openPrefsModal({activeSection:"notifications"})}renderAvatars(){var{memberIds:e,featureReactMemberProfileCard:t}=this.props,a=e.map(e=>i.a.createElement(wa.c,{key:e,className:"p-message_pane__foreword__avatar",userId:e,size:56,showCard:t}));return i.a.createElement("div",{className:"p-message_pane__foreword__avatars"},a)}renderDescription(){var{memberIds:e,externalTeams:t}=this.props;if(t.length){var a=t.map(this.renderTeamName),n=wv.rt("This conversation includes people from {teams}, so share files and information with care.",{teams:Object(x.k)(a,{noEscape:!0,react:!0,strong:!0})});return i.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},n,this.renderDescriptionActions())}var r=e.map(e=>i.a.createElement(Wf.a,{id:e,showTooltip:!0})),s=wv.rt("This is the very beginning of your direct message history with {names}",{names:Object(x.k)(r,{noEscape:!0,react:!0})});return this.props.prefWhoCanSeeThis&&(s=wv.rt("This is the very beginning of your direct message history with {names}. Only the {number} of you are in this conversation, and no one else can join it. <a>Learn more</a>",{names:Object(x.k)(r,{noEscape:!0,react:!0}),number:r.length+1},e=>{var{text:t,key:a}=e;return i.a.createElement(wh.a,{key:a,href:"https://get.slack.help/hc/articles/360002063088",target:"_blank",rel:"noopener noreferrer"},t)})),i.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},s,this.renderDescriptionActions())}renderDescriptionActions(){var e=this.getNotificationWarningText();if(e)return i.a.createElement("div",{className:"p-message_pane__foreword__notification_warning"},e);var t=this.props.notificationSetting;return"everything"===t?i.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},wv.rt("You\u2019ll be notified for <strong>every new message</strong> in this conversation.",{fallbackHash:"d74e681b9c224e38f01310015fd4ae63f9c3ba9c"})," ",this.renderEditButton()):"mentions_dms"===t?i.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},wv.rt("You\u2019ll be notified when <strong>a teammate mentions you or uses one of your keywords</strong>.")," ",this.renderEditButton()):i.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},wv.rt("You won\u2019t receive notifications.")," ",this.renderEditButton())}renderEditButton(){return i.a.createElement(te.a,{onClick:this.openChannelPrefsDialog},wv.rt("Change this setting",{fallbackHash:"5301648dcf6b53cefc9ed52999aaa92d4603cae0"}))}renderTeamName(e){return Object(we.M)(e)?i.a.createElement(yv.a,{type:"unknown"}):Object(we.e)(e)}render(){return i.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatars(),this.renderDescription())}}mpim_foreword_BaseMpimForeword.defaultProps=Tv;var Nv=Object(_p.createSelector)((e,t)=>{var{channelId:a}=t;return Object(L.e)(e,a)},h.d,(e,t)=>{var a=Object(B.H)(e);return Object(Iv.a)(a,t)}),Pv=Object(_p.createSelectorCreator)(_p.defaultMemoize,Ti.a)((e,t)=>{var{channelId:a}=t;return Object(L.e)(e,a)},h.d,(e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a);return n?Object(B.H)(n).map(t=>({id:t,name:Object(Fe.W)(e,t)})).sort((e,t)=>Object(Ob.a)(e.name,t.name)).map(e=>e.id):null},(e,t,a)=>Object(Iv.a)(a,t));var Av=Object(d.b)(function(e,t){var{channelId:a}=t,n=Object(L.e)(e,a);if(!n)return null;var r=[];if(Object(B.ab)(n)){var s=Object(B.N)(e,n,{includeSelfTeamId:!0});r=Object(we.O)(e,s).map(t=>Object(Se.i)(e,t))}return{memberIds:Object(Br.c)(e)?Pv(e,{channelId:a}):Nv(e,{channelId:a}),externalTeams:r,notificationPermission:Object(J.b)(e),notificationSetting:Object(Z.f)(e,a),prefWhoCanSeeThis:Object(Ke.k)(e,"whocanseethis_dm_mpdm_badge"),featureReactMemberProfileCard:Object(h.m)(e,"feature_react_member_profile_card")}},function(e){return{openChannelNotificationPrefsModal:function(){return e(Object(et.a)(...arguments))},openPrefsModal:function(){return e(Object(Ze.a)(...arguments))}}})(mpim_foreword_BaseMpimForeword);Av.propTypes={channelId:o.default.string},Av.defaultProps={channelId:null};var Mv=Av,xv=new x.b("message_pane_foreword"),Rv="USLACKBOT";var Dv=class slackbot_foreword_SlackbotForeword extends s.Component{shouldComponentUpdate(){return!1}render(){var e=i.a.createElement("h1",{className:"p-message_pane__foreword__title"},xv.t("Hi, Slackbot here!")),t=i.a.createElement("div",{className:"p-message_pane__foreword__description display_flex","data-qa":"im_foreword_description"},i.a.createElement(wa.c,{userId:Rv,size:48,className:"p-message_pane__foreword__avatar"}),i.a.createElement("div",null,i.a.createElement("p",null,xv.rt("You can ask me simple questions about how Slack works, or just type a few keywords. I\u2019ll search the <a>Help Center</a> to help you find more info.",{fallbackHash:"0d892d295ed431c242e406d752976a0f4d8d8b38"},e=>{var{key:t,text:a}=e;return i.a.createElement(fe.a,{key:t,rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},a)})),i.a.createElement("p",{className:"margin_0"},xv.rt("For example: <b>Can I edit a message I\u2019ve posted?</b> Or simply: <b>edit message</b>.",{fallbackHash:"bb42704f8751d2e3be33f3dd809a406c5a787d1e"},e=>{var{key:t,text:a}=e;return i.a.createElement(fe.a,{key:t,rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},a)})))),a=l()("p-message_pane__foreword","p-message_pane__foreword--slackbot");return i.a.createElement("div",{className:a},e,t)}},Fv=new x.b("message_pane_foreword");class shared_foreword_SharedForeword extends s.PureComponent{constructor(){super(),this.renderTeamName=this.renderTeamName.bind(this)}renderTitle(){var{channel:e,featureLongerChannelNames:t}=this.props,a=l()("p-message_pane__foreword__title",{"p-message_pane__foreword__title--truncate":!t});return i.a.createElement("h1",{className:a},t?i.a.createElement(qf.a,{channel:e}):i.a.createElement(Ye.a,{channel:e,inline:!0,iconProps:{inherit:!0,align:"baseline"}}))}renderAvatars(){var{channel:e,sharedTeams:t}=this.props;if(Object(bs.a)(t))return null;var a=t.map(t=>{var a=Object(B.zb)(e,t.id);return i.a.createElement(Va.b,{key:t.id,id:t.id,size:56,isPendingShared:a,className:"p-message_pane__foreword__avatar"})});return i.a.createElement("div",{className:"p-message_pane__foreword__avatars"},a)}renderTeamName(e){return Object(we.M)(e)?i.a.createElement(yv.a,{type:"unknown"}):Object(we.e)(e)}renderDescription(){var e,{channelId:t,purpose:a,sharedTeams:n,externalTeams:r,isPendingShared:s,isUserRestricted:o}=this.props;if(s){var c=r.map(this.renderTeamName),l=Object(x.k)(c,{noEscape:!0,react:!0,strong:!0});e=Fv.rt("This is a shared channel. Waiting for {names} to join...",{names:l})}else{var d=n.map(this.renderTeamName),p=Object(x.k)(d,{noEscape:!0,react:!0,strong:!0});e=Fv.rt("This is a shared channel between {names}.",{names:p})}return i.a.createElement(cv,{channelId:t,description:e,purpose:a,isUserRestricted:o})}render(){var{channelId:e,isPrivate:t}=this.props,a=l()("p-message_pane__foreword",{"p-message_pane__foreword--private":t});return i.a.createElement("div",{className:a},this.renderAvatars(),this.renderTitle(),this.renderDescription(),i.a.createElement(sv,{channelId:e}))}}shared_foreword_SharedForeword.defaultProps={channel:null,channelId:null,isPrivate:!1,isPendingShared:!1,sharedTeams:[],externalTeams:[],purpose:null,isUserRestricted:!1};var Lv=Object(d.b)(function(e,t){var{channelId:a}=t,n=Object(L.e)(e,a);if(!n)return null;var r=Object(Ca.b)(e),s=n.purpose?n.purpose.value:null,i=Object(B.Bb)(n),o=Object(B.ab)(n),c=Object(B.yb)(n),l=[],d=[];if(o||c){var p=Object(B.N)(e,n,{includeSelfTeamId:!0});l=p.map(t=>Object(Se.i)(e,t)),d=Object(we.O)(e,p).map(t=>Object(Se.i)(e,t))}return{channel:n,isPendingShared:c,isPrivate:i,isUserRestricted:r.is_restricted,purpose:s,sharedTeams:l,externalTeams:d,featureLongerChannelNames:Object(h.m)(e,"feature_longer_channel_names")}})(shared_foreword_SharedForeword),Uv=a("zBEu"),Bv=new x.b("newxp_onboarding"),Hv={START:"onboarding_start",CANCELLED:"onboarding_cancelled",SLACKBOT:"onboarding_slackbot_conversation",COMPLETE:"onboarding_complete"};class newxp_foreword_NewxpForeword extends s.PureComponent{renderHeaderAction(){return this.props.step===Hv.CANCELLED?Bv.rt("I changed my mind. <a>Take the tutorial.</a>",null,e=>{var{key:t,text:a}=e;return i.a.createElement(fe.a,{key:t,onClick:Uv.b},a)}):this.props.step===Hv.SLACKBOT?Bv.rt("Got the hang of Slack already? <a>Skip the tutorial.</a>",null,e=>{var{key:t,text:a}=e;return i.a.createElement(fe.a,{key:t,onClick:Uv.a},a)}):null}renderFooter(){return this.props.step!==Hv.START?null:i.a.createElement("div",{className:"p-message_pane__newxp_foreword__footer"},i.a.createElement(jt.d,{type:"primary",size:"large",className:"p-message_pane__newxp_foreword__explore",onClick:Uv.g},Bv.rt("Explore Slack")),i.a.createElement("div",{className:"p-message_pane__newxp_foreword__pre_skip"},Bv.rt("Not your first Slack workspace? <a>Skip the tutorial</a>",null,e=>{var{key:t,text:a}=e;return i.a.createElement(fe.a,{key:t,onClick:Uv.a,"data-qa":"skip_tutorial"},a)})))}render(){var{step:e,clientTheme:t}=this.props,a=l()("p-message_pane__newxp_foreword",{"p-message_pane__newxp_foreword--start":"onboarding_start"===e}),n=l()("p-message_pane__newxp_foreword__welcome_text",{["p-message_pane__newxp_foreword__welcome_text--".concat(t)]:"light"!==t});return i.a.createElement("div",{className:a},i.a.createElement("div",{className:"p-message_pane__newxp_foreword__header"},i.a.createElement("div",{className:n},Bv.rt("Welcome!")),i.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_message"},Bv.t("Slack is a collaboration hub for teams.",{fallbackHash:"2548745b7be53c916d085ad9d7a6350c53b003b3"})),i.a.createElement("div",{className:"p-message_pane__newxp_foreword__skip_messaging"},this.renderHeaderAction())),this.renderFooter())}}newxp_foreword_NewxpForeword.defaultProps={step:null,clientTheme:"light"};var Wv=newxp_foreword_NewxpForeword,qv=Uf,Gv=new x.b("message_pane_foreword"),Kv=35;class limited_history_alert_LimitedHistoryAlert extends s.PureComponent{componentDidMount(){var{clogger:e}=this.props;e.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:Kv}}})}render(){var{clientTheme:e}=this.props,t=Object(an.j)({entryPoint:"limited_history_alert"}),a=l()("p-message_pane__limited_history_alert",{["p-message_pane__limited_history_alert--".concat(e)]:"light"!==e});return i.a.createElement("div",{className:a},i.a.createElement(Vr.b,{text:":speech_balloon:",emojiSize:Vr.a.MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0",Gv.rt("<b>There\u2019s more to this conversation.</b> To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),"\xa0",i.a.createElement(fe.a,{href:t,target:"_blank",rel:"noopener noreferrer","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"slackbot_message_limit_header","data-clog-ui-action":"click","data-clog-ui-step":"history"},Gv.t("Learn More")))}}limited_history_alert_LimitedHistoryAlert.defaultProps={clientTheme:"light"};var Vv=Object(d.b)(e=>({clogger:Object(ne.a)({state:e})}))(limited_history_alert_LimitedHistoryAlert),zv=a("Efcz"),Yv=a("7p4D"),Qv=a("kSp4"),Xv=a("j6qi"),Jv=a("7Xqt"),Zv=a("o4sC"),$v=a("ukTK"),eO=a("l1Ba"),tO=a("H3xq").a,aO=a("0d94"),nO=a("CaXY"),rO=a("anIG"),sO=a("RhZ7"),iO=a("Aeia"),oO=a("TOh8"),cO=a("0dpy"),lO=a("8CL7"),dO=a("VrmM"),pO=a("UvJ4"),uO=a("Gq2+"),hO=a("fFZG"),mO=a("CZPb"),bO=a("WP4K"),_O=a("IqgZ"),gO=a("Q/6m"),fO=a("Q3oM"),vO=a("WOap"),OO=a("KmK8"),yO=a("yuuz"),CO=a("gK0X"),jO=a("CsEc"),EO=a("LwCT"),kO=a("/FWe"),SO=a("qnZ7"),IO=a("0wDQ"),wO=(a("Mzw9"),new x.b("message")),TO={className:void 0,children:void 0};class resend_MessageResend extends s.PureComponent{constructor(e){super(e),this.resend=this.resend.bind(this),this.cancel=this.cancel.bind(this)}getText(){var{isEKMError:e}=this.props.msg;return e?wO.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel."):wO.t("Slack couldn\u2019t send this message")}resend(){var{msg:e}=this.props,{ts:t,channel:a}=e;this.props.resendMessage(a,t)}cancel(){var{msg:e}=this.props,{ts:t,channel:a}=e;this.props.removeMessageAndTimestamp({channelId:a,ts:t})}renderFooter(){var{showResend:e,showCancel:t,isEKMError:a}=this.props.msg;if(!e&&!t)return null;var n=e&&i.a.createElement(te.a,{className:"c-message_kit__resend__resend",onClick:this.resend},wO.t("Try again")),r=t&&i.a.createElement(te.a,{className:"c-message_kit__resend__cancel",onClick:this.cancel},a?wO.t("Clear"):wO.t("Cancel")),s=n&&r&&i.a.createElement("span",{className:"c-message_kit__resend__separator"},"\xa0|\xa0");return i.a.createElement("div",{className:"c-message_kit__resend__footer"},i.a.createElement("div",{className:"c-message_kit__resend__footer__border"}),i.a.createElement("div",null,this.getText(),"\u2002",n,s,r))}render(){var{showResend:e,showCancel:t}=this.props.msg,a=Object($g.xb)(this.props.msg);if(!e&&!t&&!a)return this.props.children;var n=l()("c-message_kit__resend",this.props.className,{"c-message_kit__resend--with_buttons":e||t,"c-message_kit__resend--unprocessed":a});return i.a.createElement("div",{className:n},this.props.children,this.renderFooter())}}resend_MessageResend.defaultProps=TO;var NO={resendMessage:function(){return Object(SO.a)(...arguments)},removeMessageAndTimestamp:function(){return Object(IO.a)(...arguments)}},PO=Object(d.b)(null,NO)(resend_MessageResend),AO=(a("8vlY"),{theme:"light",adjacent:!1,focused:!1,renderActionsOffscreen:!1,actionsPosition:void 0,onOptionClick:r.a,rollup:null,parentId:void 0,isLast:!1,showingContextBar:!1,highlight:!1,clearHighlight:r.a,latestMessageTsWithReactions:void 0});class message_pane_message_Message extends s.PureComponent{constructor(e){super(e),this.handleBackgroundClick=this.handleBackgroundClick.bind(this)}getMessageBody(e){var{adjacent:t,rollup:a,latestMessageTsWithReactions:n}=this.props;return i.a.createElement(i.a.Fragment,null,!t&&i.a.createElement(yO.a,{msg:e},i.a.createElement(oO.a,{msg:e}),"\xa0\xa0",i.a.createElement(cO.a,{msg:e}),i.a.createElement("br",null)),i.a.createElement(PO,{msg:e},i.a.createElement(lO.a,{msg:e,rollup:a,"data-qa":"message-text"}),i.a.createElement(dO.a,{msg:e,blocksContainerContext:nO.a.message}),i.a.createElement(uO.a,{msg:e}),i.a.createElement(iO.b,{msg:e}),i.a.createElement(rO.a,{msg:e})),i.a.createElement(hO.a,{msg:e,latestMessageTsWithReactions:n}),i.a.createElement(bO.a,{msg:e}),i.a.createElement(mO.a,{msg:e}))}getCompactMessageBody(e){var{adjacent:t,rollup:a,latestMessageTsWithReactions:n}=this.props;return i.a.createElement(kO.a,null,!t&&i.a.createElement(yO.a,{msg:e},i.a.createElement(oO.a,{msg:e,className:"p-message_pane_message__sender--compact"}),"\xa0"),i.a.createElement(PO,{msg:e},i.a.createElement(lO.a,{msg:e,rollup:a,"data-qa":"message-text"}),i.a.createElement(pO.a,{msg:e,blocksContainerContext:nO.a.message}),i.a.createElement(uO.a,{msg:e}),i.a.createElement(iO.b,{msg:e}),i.a.createElement(rO.a,{msg:e})),i.a.createElement(hO.a,{msg:e,latestMessageTsWithReactions:n}),i.a.createElement(bO.a,{msg:e}),i.a.createElement(mO.a,{msg:e}))}getCompactGutter(){var{msg:e,theme:t,adjacent:a}=this.props,n="light"===t,r=l()("p-message_pane_message__compact_timestamp",{"p-message_pane_message__compact_timestamp--light":n,"p-message_pane_message__compact_timestamp--adjacent":a});return i.a.createElement("div",{className:r},i.a.createElement(cO.a,{msg:e,meridiem:!(a&&n)}))}handleBackgroundClick(e){e.altKey&&(e.preventDefault(),this.props.onOptionClick(this.props.msg))}render(){var{msg:e,theme:t,adjacent:a,focused:n,renderActionsOffscreen:r,actionsPosition:s,parentId:o,isLast:c,showingContextBar:d,highlight:p,clearHighlight:u}=this.props,h=l()("p-message_pane_message__message","c-message_kit__message",{"p-message_pane_message__message--last":c,"p-message_pane_message__message--showing_context_bar":d}),m="dense"===t,b=m?this.getCompactGutter():null,_=a?this.getCompactGutter():i.a.createElement(sO.a,{msg:e}),g=m?this.getCompactMessageBody(e):this.getMessageBody(e);return i.a.createElement(_O.a,{msg:e},i.a.createElement(gO.a,{msg:e,className:h,onClick:this.handleBackgroundClick,highlight:p,clearHighlight:u},i.a.createElement(fO.a,{hovered:n},i.a.createElement(vO.a,{msg:e,showComment:!0,showShare:!0,messageContainerType:Of.I.MESSAGE_PANE,position:s||(m||a?"above":"default"),renderOffscreen:r,parentId:o},i.a.createElement(jO.a,{msg:e,className:"p-message_pane_message__message_label"},i.a.createElement(OO.a,{light:_,compact:b},i.a.createElement(CO.a,{msg:e,replyBar:i.a.createElement(bO.a,{msg:e})},i.a.createElement(EO.a,{msg:e},g))))))))}}message_pane_message_Message.defaultProps=AO;var MO=Object(Lf.a)(message_pane_message_Message,"message-pane-message"),xO={setUnreadPoint:r.a};class message_wrapper_MessageWrapper extends s.Component{constructor(e){super(e),this.markMsgUnread=this.markMsgUnread.bind(this)}markMsgUnread(e){var{channel:t,ts:a}=e;this.props.setUnreadPoint({channelId:t,unreadTs:a})}render(){return i.a.createElement(MO,Object(n.a)({onOptionClick:this.markMsgUnread},this.props))}}message_wrapper_MessageWrapper.defaultProps=xO;var RO=Object(aO.a)(Object(d.b)(null,function(e){return{setUnreadPoint:function(){return e(Object(ns.setUnreadPoint)(...arguments))}}})(message_wrapper_MessageWrapper)),DO=a("PR8O"),FO=a("J7VK"),LO=a("SIr3"),UO=(a("EnhK"),Xv.a),BO=Jv.a,HO={channelId:o.default.string,timestamps:o.default.arrayOf(o.default.string),requestHistory:o.default.func,lastReadTs:o.default.string,isGhostLastRead:o.default.bool,startTs:o.default.string,startTsOffset:o.default.number,highlightTs:o.default.string,focusRequestedTs:o.default.string,rollups:o.default.objectOf(md.a.Rollup()),setUnreadPoint:o.default.func,isLoading:o.default.bool,isLoadingOlder:o.default.bool,reachedStart:o.default.bool,reachedEnd:o.default.bool,prevReachedEnd:o.default.bool,oldest:o.default.string,latest:o.default.string,onScroll:o.default.func,onVisibleRowsChanged:o.default.func,doneHighlighting:o.default.func,isFileExpanding:o.default.bool,isLimited:o.default.bool,isSlackbotIm:o.default.bool,useStickyDayDividers:o.default.bool,shouldIgnoreScrollKeys:o.default.func,shouldIgnoreArrowKeys:o.default.func,channelSessionId:o.default.string,theme:o.default.string,firstUnreadTs:o.default.string,featureTinyspeck:o.default.bool,featureAriaApplicationMode:o.default.bool,messageContainerType:o.default.string,"aria-label":o.default.string.isRequired,teamId:o.default.string,enterpriseId:o.default.string,sessionId:o.default.string,msgTriggers:o.default.object,currentUserId:o.default.string,jumpToTimestamp:o.default.func,makeMessageSummary:o.default.func,isScreenReaderEnabled:o.default.bool,windowLastFocusEvent:o.default.number,onFocusEnter:o.default.func,onFocusLeave:o.default.func,isBannerVisible:o.default.bool,setFocusRequestedTs:o.default.func,showThreadIfThreadable:o.default.func,currentThreadKey:o.default.string,isThreadable:o.default.func,threadListId:o.default.string,telemeter:o.default.object,featureOfflineMode:o.default.bool,isOffline:o.default.bool,userAttentionIsOnChat:o.default.bool,clientTheme:o.default.string,featureMessageNavigationShortcuts:o.default.bool,featureContextualMessageShortcuts:o.default.bool,latestMessageTsWithReactions:o.default.string,openContextualMessageShortcutsModal:o.default.func,contextualMessageShortcutsModalWasSeen:o.default.bool,isToastInView:o.default.bool,featureMessageKitInMessagePane:o.default.bool,showingContextBar:o.default.bool,removeFromSectionNavigation:o.default.func,addToSectionNavigation:o.default.func,setInitialActiveSection:o.default.func,focusLastVisibleMessageInChannel:o.default.bool,setFocusLastVisibleMessageInChannel:o.default.func,setFocusMessageInput:o.default.func},WO={channelId:null,timestamps:[],requestHistory:r.a,lastReadTs:void 0,isGhostLastRead:!1,startTs:null,startTsOffset:null,highlightTs:null,focusRequestedTs:void 0,rollups:null,setUnreadPoint:r.a,isFileExpanding:!1,isLoading:!1,isLoadingOlder:!1,reachedStart:!1,reachedEnd:!1,prevReachedEnd:!1,oldest:void 0,latest:void 0,onScroll:r.a,onVisibleRowsChanged:r.a,doneHighlighting:r.a,isLimited:!1,isSlackbotIm:!1,useStickyDayDividers:!0,shouldIgnoreScrollKeys:()=>!1,shouldIgnoreArrowKeys:()=>!1,channelSessionId:null,theme:"light",firstUnreadTs:null,featureTinyspeck:!1,featureAriaApplicationMode:!1,messageContainerType:void 0,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,currentUserId:null,jumpToTimestamp:r.a,makeMessageSummary:void 0,isScreenReaderEnabled:!1,windowLastFocusEvent:null,onFocusEnter:r.a,onFocusLeave:r.a,isBannerVisible:!1,setFocusRequestedTs:r.a,showThreadIfThreadable:r.a,currentThreadKey:void 0,isThreadable:r.a,threadListId:void 0,telemeter:{store:r.a,measure:r.a},featureOfflineMode:!1,isOffline:!1,userAttentionIsOnChat:!1,clientTheme:"light",latestMessageTsWithReactions:null,removeFromSectionNavigation:r.a,addToSectionNavigation:r.a,setInitialActiveSection:r.a,focusLastVisibleMessageInChannel:!1,setFocusLastVisibleMessageInChannel:r.a,setFocusMessageInput:r.a,featureMessageNavigationShortcuts:!1,featureContextualMessageShortcuts:!1,openContextualMessageShortcutsModal:r.a,contextualMessageShortcutsModalWasSeen:!1,isToastInView:!1,featureMessageKitInMessagePane:!1,showingContextBar:!1},qO=80,GO=60,KO=64,VO=120,zO=28,YO="MESSAGE-LIST",QO=864e5,XO={ABOVE:1,VISIBLE:2,BELOW:3},JO="0000000000.000001",ZO=e=>{var t=Math.floor(e/1e3);return"".concat(t,".000000")};class message_list_MessageList extends Mr.a{constructor(e){super(e);var t=Object(eO.a)();if(this.state={degraded:t,isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder,isSelecting:!1,hasKeyboardFocus:!1,isFileExpanding:!1},this.DEFAULT_ROW_HEIGHT="light"===e.theme?qO:GO,this.STICKY_EPSILON=this.DEFAULT_ROW_HEIGHT/2,this.ANCHOR_OFFSET=t?VO:KO,this.heightCache=new $v.a({DEFAULT_HEIGHT:this.DEFAULT_ROW_HEIGHT}),this.layout=new Zv.a({heightCache:this.heightCache,stickToBottom:!e.isFileExpanding||e.reachedEnd||e.prevReachedEnd,shouldExcludeFirstItemFromGravity:this.isFirstRowLimitedHistoryForeword.bind(this),STICKY_EPSILON:this.STICKY_EPSILON,STICKY_EPSILON_SETHEIGHT:2,ANCHOR_OFFSET:this.ANCHOR_OFFSET}),this.keys=[],this.rows=[],this.visibleRows=[],this.partiallyVisibleRows=[],this.unreadIndex=null,this.list=null,this.useAnchor=!0,this.keyToScrollTo=null,this.width=0,this.hasRenderedOneMessage=!1,this.requestAround=this.requestAround.bind(this),this.requestOlder=this.requestOlder.bind(this),this.requestNewer=this.requestNewer.bind(this),this.renderRow=this.renderRow.bind(this),this.setListRef=this.setListRef.bind(this),this.getAriaLabelForRow=this.getAriaLabelForRow.bind(this),this.isItemAriaExpanded=this.isItemAriaExpanded.bind(this),this.getPropsForItem=this.getPropsForItem.bind(this),this.onScroll=this.onScroll.bind(this),this.onListScrolled=this.onListScrolled.bind(this),this.onFocusEnter=this.onFocusEnter.bind(this),this.onFocusLeave=this.onFocusLeave.bind(this),this.onItemTabWithin=this.onItemTabWithin.bind(this),this.onItemKeyDown=this.onItemKeyDown.bind(this),this.debouncedOnListScrolled=Object(Df.a)(this.onListScrolled,150),this.isMessage=this.isMessage.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this),this.onJumpToUnreadShortcut=this.onJumpToUnreadShortcut.bind(this),this.focus=this.focus.bind(this),this.onShiftPageUp=this.onShiftPageUp.bind(this),this.onShiftPageDown=this.onShiftPageDown.bind(this),this.onEnd=this.onEnd.bind(this),this.onArrowKeyRight=this.onArrowKeyRight.bind(this),this.scrollToOffset=Object(wf.a)(this.scrollToOffset.bind(this),200),this.messagesRendered={},this.loadingHistoriesSeen=0,this.loadingHistoriesSeenHighEnd=0,this.loadingHistoriesPerHowManyMessages=84,this.loadingHistoriesPerHowManyMessagesHighEnd=500,this.scrollMetricsGatheringEnabled=Object(sp.a)(1)||this.props.featureTinyspeck,this.scrollMetricsGatheringEnabled){var a=Object(p.getStateByTeamId)(e.teamId),n=Object(pr.c)({state:a});this.debounceBatchMessagesSeen=Object(td.a)(()=>{n.store("modern_history_load_seen_per_84_messages",this.loadingHistoriesSeen,{allow_zero:!0}),this.loadingHistoriesSeen=0},1e3),this.debounceBatchMessagesSeenHighEnd=Object(td.a)(()=>{n.store("modern_history_load_seen_per_500_messages",this.loadingHistoriesSeenHighEnd,{allow_zero:!0}),this.loadingHistoriesSeenHighEnd=0},1e3)}this.debounceCountHistoryLoadSeen=Object(td.a)(()=>{this.loadingHistoriesSeen+=1,this.loadingHistoriesSeenHighEnd+=1},1e3),this.prqMetrics={channelSwitch:{}}}componentDidMount(){this.shouldShowContextualShortcutsOnMount()&&this.showContextualShortcutsModal()}componentDidUpdate(e){this.keyToScrollTo&&this.list&&(this.list.scrollToKey(this.keyToScrollTo,{lazy:this.lazyScroll}),this.keyToScrollTo=null);var t=this.props.isLoading||this.props.isLoadingOlder;Object(nh.a)(this.onJump)&&!t&&this.props.timestamps.length&&(this.onJump(),this.onJump=null),!!e.isFileExpanding&&!this.props.isFileExpanding?this.layout.setStickToBottom(!1):this.layout.setStickToBottom(this.props.reachedEnd||this.props.prevReachedEnd),this.onListScrolled(),this.maybeLogChannelSwitch(e);var a={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(fa.a)(a)&&this.props.addToSectionNavigation(),Object(va.a)(a)&&this.props.removeFromSectionNavigation(),this.props.featureMessageNavigationShortcuts&&this.maybeFocusOnLastVisibleMessage(e)}maybeFocusOnLastVisibleMessage(e){var{focusLastVisibleMessageInChannel:t}=this.props;t&&e.focusLastVisibleMessageInChannel!==t&&(this.list.focusLastItemInView(),this.props.setFocusLastVisibleMessageInChannel(null))}maybeLogChannelSwitch(e){if(navigator.onLine)if(void 0!==this.props.msgTriggers[this.props.channelId]&&this.props.windowLastFocusEvent===this.props.msgTriggers[this.props.channelId].lastFocus){if(e.channelId!==this.props.channelId)this.trackChannelSwitchWithoutSync(e.channelId);else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&!1===e.isLoading&&!0===this.props.isLoading&&!0!==this.props.isLoadingOlder&&!1===this.prqMetrics.channelSwitch.hasLoggedVisible&&!1===this.prqMetrics.channelSwitch.hasLoggedUsable){this.trackChannelSwitchWithSync(jh.g,!1)}else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&!0===e.isLoading&&!1===this.props.isLoading&&!0!==this.props.isLoadingOlder&&!0===this.prqMetrics.channelSwitch.hasLoggedVisible){this.trackChannelSwitchWithSync(jh.f,!0)}}else this.prqMetrics.channelSwitch={}}trackChannelSwitchWithoutSync(e){this.prqMetrics.channelSwitch.duration&&(Object(jh.f)(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId),Object(jh.g)(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId));var t=Object(p.getStateByTeamId)(this.props.teamId),a=Object(pr.c)({state:t}),n="start_channel_change_".concat(this.props.channelId),r=a.measure(n,"channel_change_react_msgs",null,{return_unprocessed:!0}).unprocessed;this.prqMetrics.channelSwitch={duration:r,prevChannelId:e,nextChannelId:this.props.channelId,fetchHistoryState:jh.c,hasLoggedVisible:!1,hasLoggedUsable:!1}}trackChannelSwitchWithSync(e,t){var a="start_channel_change_".concat(this.prqMetrics.channelSwitch.nextChannelId),n=Object(p.getStateByTeamId)(this.props.teamId);e(Object(pr.c)({state:n}).measure(a,"channel_change_not_stored",null,{ephemeral:!0,return_unprocessed:!0}).unprocessed,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,jh.a,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId),t?(this.prqMetrics.channelSwitch={},this.prqMetrics.channelSwitch.hasLoggedUsable=!0):this.prqMetrics.channelSwitch.hasLoggedVisible=!0}findTimestampClosestToStartTs(){var{startTs:e,timestamps:t}=this.props;return!!t.length&&(e?Object(hp.a)(t,t=>t>=e):null)}focus(){this.list.focus()}blur(){this.list.blur()}setListRef(e){this.list=e}jumpToUnread(e){var{lastReadTs:t,isScreenReaderEnabled:a,firstUnreadTs:n}=this.props,r=e&&"keydown"===e.type&&(a||this.state.hasKeyboardFocus),s=Object(ci.a)(this.unreadIndex)&&this.keys[this.unreadIndex];s?r?(this.list.setActiveItem(n),this.list.scrollToKey(n)):this.list.scrollToKey(s):this.jumpToTimestamp({ts:t,onJump:()=>{this.state.hasKeyboardFocus&&this.list.setActiveItem(this.props.firstUnreadTs)}})}isAtBottom(){if(!this.list)return!1;var e=this.list.getScrollTop(),t=this.layout.getTotalHeight();return e+this.height>=Math.floor(t)-this.STICKY_EPSILON}getUnreadLinePlacement(){if("number"!=typeof this.unreadIndex)return XO.ABOVE;if(!this.list)return XO.ABOVE;var{start:e,end:t}=this.list.getVisibleRange();return this.unreadIndex<e?XO.ABOVE:this.unreadIndex<t?XO.VISIBLE:XO.BELOW}getVisibleRows(e){if(!this.list)return[];var{start:t,end:a}=this.list.getVisibleRange(void 0,e);return this.rows.slice(t,a)}getScrollmarkForFocusedItem(e){var t=e===JO?this.props.timestamps[0]:e;return{mark:e,offset:this.layout.getTop(t)-this.list.getScrollTop()}}getScrollmark(){if(!this.list||!this.layout)return null;var e=this.state.hasKeyboardFocus?this.list.getActiveItem():this.previouslyActiveItem;if(this.previouslyActiveItem=null,e)return this.getScrollmarkForFocusedItem(e);var t=this.list.getScrollTop();if(this.layout.shouldStickToBottom(t))return null;var a=this.props.timestamps,n=this.layout.findAnchor(a,a,t+this.ANCHOR_OFFSET);return{mark:n,offset:this.layout.getTop(n)-t}}onScroll(){this.useAnchor=!1,this.layout.setAnchor(!1),this.debouncedOnListScrolled(),this.props.onScroll()}onSelectionChange(e){this.node&&this.setState(()=>({isSelecting:e}))}isMessage(e){var t=this.rows[e.index];return t&&("message"===t.type||"foreword"===t.type)}onListScrolled(){var e=this.getVisibleRows(!1),t=this.getVisibleRows(!0);Object(rf.a)(e,this.visibleRows)&&Object(rf.a)(t,this.partiallyVisibleRows)||(this.visibleRows=e,this.partiallyVisibleRows=t,this.props.onVisibleRowsChanged(e,t))}onShiftPageUp(){var e=this.getTimestampOfPrevDay();if(e){var{hasKeyboardFocus:t}=this.state;if(this.list.isScrolledToTop()&&this.props.reachedStart&&t)this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(e));else{var a=ZO(e),n=this.props.isBannerVisible?KO:zO;this.jumpToTimestamp({ts:a,offset:n,onJump:()=>{var a=this.getTimestampOfFirstMessageForDay(e);t&&this.list.setActiveItem(a),this.list.scrollToKey(a,{lazy:this.lazyScroll})}})}}}onShiftPageDown(){var e=this.getTimestampOfNextDay();if(e){var{hasKeyboardFocus:t}=this.state;if(this.list.isScrolledToBottom()&&this.props.reachedEnd&&t)this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(e));else{var a=ZO(e),n=this.props.isBannerVisible?KO:zO;this.jumpToTimestamp({ts:a,offset:n,onJump:()=>{var a=this.getTimestampOfFirstMessageForDay(e);t&&this.list.setActiveItem(a),this.list.scrollToKey(a,{lazy:this.lazyScroll})}})}}}onEnd(){var{reachedEnd:e,timestamps:t}=this.props,a=e?t[t.length-1]:null;return this.jumpToTimestamp({ts:a,onJump:()=>{if(this.state.hasKeyboardFocus){var e=this.rows,t=e[e.length-1];"message"===(t&&t.type)&&this.list.setActiveItem(t.ts)}}}),!1}onArrowKeyRight(e){var{target:t}=e;if(!Object($u.a)(t)){var{channelId:a,timestamps:n}=this.props;if(this.state.hasKeyboardFocus){var r=this.list.getInitialActiveItem();if(r&&Object(qp.a)(n,r))this.props.showThreadIfThreadable({channelId:a,threadTs:r,requestFocus:!0})&&this.blur()}}}onItemKeyDown(){var{key:e,id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.props.featureMessageNavigationShortcuts&&"ArrowDown"===e){var a=this.rows[this.rows.length-1];a&&t===a.ts&&this.props.setFocusMessageInput(!0)}}onJumpToUnreadShortcut(e){DO.a&&this.jumpToUnread(e)}onFocusEnter(e){this.shouldShowContextualShortcutsOnKeyPress(e)?this.showContextualShortcutsModal():this.setState(()=>({hasKeyboardFocus:e.isKeyboardFocus}),()=>{this.props.onFocusEnter(e);var{focusRequestedTs:t,setFocusRequestedTs:a}=this.props;t&&t===this.list.getActiveItem()&&a(null)})}onFocusLeave(e){this.state.hasKeyboardFocus&&(this.previouslyActiveItem=e.activeItem),this.setState(()=>({hasKeyboardFocus:!1}),()=>{this.props.onFocusLeave(e)})}onItemTabWithin(){this.props.setInitialActiveSection()}scrollToOffset(){this.list&&this.list.scrollToOffset(...arguments)}shouldShowContextualShortcutsOnKeyPress(e){var{featureMessageNavigationShortcuts:t,featureContextualMessageShortcuts:a,contextualMessageShortcutsModalWasSeen:n,isToastInView:r}=this.props;return!!a&&(!n&&(!(e&&!e.isKeyboardFocus)&&((!e||!e.relatedEvent||e.relatedEvent.keyCode!==to.k)&&((!e||!Object($u.a)(e.target))&&(!t||!r)))))}shouldShowContextualShortcutsOnMount(){return this.props.isScreenReaderEnabled&&this.props.featureContextualMessageShortcuts&&!this.props.contextualMessageShortcutsModalWasSeen}shouldShowLimitedHistoryAlert(){var{isLimited:e,isSlackbotIm:t}=this.props;return e&&t}shouldShowLimitedHistoryForeword(){var{isLimited:e,isSlackbotIm:t}=this.props;return e&&!t}isFirstRowLimitedHistoryForeword(){if(!this.shouldShowLimitedHistoryForeword())return!1;var e=Object(Ku.a)(this.rows);return e&&"foreword"===e.type}showContextualShortcutsModal(){this.props.openContextualMessageShortcutsModal(),this.props.setUserPrefByApi({pref:"contextual_message_shortcuts_modal_was_seen",value:!0})}requestAround(){if(this.state.isLoading)return!1;if(this.props.reachedEnd)return this.requestOlder();if(this.props.reachedStart)return this.requestNewer();Object(Wa.a)({teamId:this.props.teamId}).info(YO,"requestAround channelId: ".concat(this.props.channelId," isLoading: ").concat(this.state.isLoading," timestamps: ").concat(Object(Ll.a)(this.props.timestamps)," reachedStart: ").concat(this.props.reachedStart," reachedEnd: ").concat(this.props.reachedEnd));var{oldest:e,latest:t,timestamps:a,startTs:n}=this.props;if(Object(bs.a)(a)&&!n)return this.props.requestHistory({});var r=e||a&&Object(Ku.a)(a)||n,s=t||a&&Object(bp.a)(a)||n,i=this.props.requestHistory({latest:r,oldest:s});return i&&(this.prqMetrics.channelSwitch.fetchHistoryState!==jh.a&&(this.prqMetrics.channelSwitch.fetchHistoryState=jh.b),i.then(()=>{this.prqMetrics.channelSwitch.fetchHistoryState=jh.a}),this.setState(()=>({isLoading:!0,isLoadingOlder:!1}))),i}requestOlder(){if(this.state.isLoading)return!1;var{oldest:e,timestamps:t,startTs:a}=this.props,n=e||t&&Object(Ku.a)(t)||a,r=this.props.requestHistory({latest:n});return r&&(this.prqMetrics.channelSwitch.fetchHistoryState!==jh.a&&(this.prqMetrics.channelSwitch.fetchHistoryState=jh.b),r.then(()=>{this.prqMetrics.channelSwitch.fetchHistoryState=jh.a}),this.setState(()=>({isLoading:!0,isLoadingOlder:!0}))),r}requestNewer(){if(this.state.isLoading)return!1;var{latest:e,timestamps:t,startTs:a}=this.props,n=e||t&&Object(bp.a)(t)||a,r=this.props.requestHistory({oldest:n});return r&&(this.prqMetrics.channelSwitch.fetchHistoryState!==jh.a&&(this.prqMetrics.channelSwitch.fetchHistoryState=jh.b),r.then(()=>{this.prqMetrics.channelSwitch.fetchHistoryState=jh.a}),this.setState(()=>({isLoading:!0,isLoadingOlder:!1}))),r}renderMessage(e,t){var{hasFocus:a,isHovered:n,isExpanded:r,itemId:s}=t,{ts:o,previousMessageTs:c}=e,l=Object(bp.a)(this.props.timestamps),d=o&&o===this.props.highlightTs;if(this.scrollMetricsGatheringEnabled){this.messagesRendered[e.ts]=!0;var p=Object(If.a)(this.messagesRendered).length;p%this.loadingHistoriesPerHowManyMessages==0&&this.debounceBatchMessagesSeen(),p%this.loadingHistoriesPerHowManyMessagesHighEnd==0&&this.debounceBatchMessagesSeenHighEnd()}return this.props.featureMessageKitInMessagePane?i.a.createElement(RO,{channelId:this.props.channelId,ts:o,key:o,prevTs:c,focused:a,renderActionsOffscreen:this.state.hasKeyboardFocus,theme:this.props.theme,rollup:this.props.rollups[o],parentId:s,isLast:o===l,showingContextBar:this.props.showingContextBar,highlight:d,clearHighlight:this.props.doneHighlighting,latestMessageTsWithReactions:this.props.latestMessageTsWithReactions}):i.a.createElement(tO,{ts:o,key:o,channelId:this.props.channelId,previousMessageTs:c,isLast:o===l,rollup:this.props.rollups[o],setUnreadPoint:this.props.setUnreadPoint,fadeAwayHighlight:d,doneHighlighting:this.props.doneHighlighting,channelType:this.props.channelType,channelSessionId:this.props.channelSessionId,latestMessageTsWithReactions:this.props.latestMessageTsWithReactions,isHovered:n,isThreadExpanded:r,threadListId:this.props.threadListId,messageContainerType:this.props.messageContainerType,renderActions:n||a,hasFocus:a,renderActionsOffscreen:this.state.hasKeyboardFocus,showThreadIfThreadable:this.props.showThreadIfThreadable,parentId:s})}renderForeword(){return i.a.createElement(qv,{key:"message-list-foreword",channelType:this.props.channelType,channelId:this.props.channelId,clientTheme:this.props.clientTheme,hasLimitedHistory:this.shouldShowLimitedHistoryForeword()})}renderRow(e){var{hasFocus:t,isHovered:a,isExpanded:n,itemId:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.rows[e];if(!s||!s.type)return null;switch(s.type){case"message":return this.renderMessage(s,{hasFocus:t,isHovered:a,isExpanded:n,itemId:r});case"dayDividerLabel":return i.a.createElement(LO.b,{key:s.day,date:s.day,sticky:this.props.useStickyDayDividers});case"dayDivider":return i.a.createElement(LO.a,{key:s.day,date:s.day,isUnread:s.showDayDividerAsUnread,ghost:this.props.isGhostLastRead});case"unread":return i.a.createElement(FO.a,{key:"unread",ghost:this.props.isGhostLastRead});case"loading":return this.debounceCountHistoryLoadSeen(),i.a.createElement(Qv.a,null);case"loadingSpinner":return i.a.createElement(Yv.a,null);case"foreword":return this.renderForeword({hasFocus:t});case"limited_history":return i.a.createElement(Vv,{clientTheme:this.props.clientTheme});default:return null}}isItemAriaExpanded(e,t){var{channelId:a,isThreadable:n,currentThreadKey:r}=this.props;if(n){var s=this.rows[t];if(s&&s.type&&"message"===s.type){var{threadTs:i,channelId:o}=Object(af.a)(r),c=i===e&&a===o;return n({channelId:a,threadTs:e})?c:void 0}}}getAriaLabelForRow(e){var{channelId:t,makeMessageSummary:a,isScreenReaderEnabled:n}=this.props;if(!a)return null;var r=this.rows[e];if(!r||!r.type)return null;if("message"!==r.type)return null;var{ts:s,previousMessageTs:i,isFirstMsgForDay:o,isLastMsgForDay:c,isFirstUnreadMsg:l,day:d}=r,p=this.props.rollups[s];return this.state.hasKeyboardFocus||n?a({channelId:t,ts:s,isFirstUnreadMsg:l,isFirstMsgForDay:o,isLastMsgForDay:c,previousMessageTs:i,day:d,rollup:p,hasFocus:this.state.hasKeyboardFocus,viewContext:Of.I.MESSAGE_PANE}):null}UNSAFE_componentWillReceiveProps(e){if(this.setState(t=>e.isLoading===t.isLoading&&e.isLoadingOlder===t.isLoadingOlder?null:(Object(Wa.a)({teamId:this.props.teamId}).info(YO,"componentWillReceiveProps isLoading: ".concat(e.isLoading," isLoadingOlder: ").concat(e.isLoadingOlder," timestamps: ").concat(Object(Ll.a)(e.timestamps))),{isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder})),e.channelId!==this.props.channelId||e.startTs!==this.props.startTs||e.highlightTs&&e.highlightTs!==this.props.highlightTs||e.timestamps.length&&!this.props.timestamps.length){this.useAnchor=!0;var t=e.startTs,a=this.props.timestamps,n=e.timestamps;if(Object(Sf.a)(t,Object(kf.a)(Object(Ku.a)(a)),Object(Ef.a)(Object(bp.a)(a)))&&e.channelId===this.props.channelId){var r=Object(qu.a)(n,t=>t<=e.startTs);this.keyToScrollTo=r,this.lazyScroll=e.highlightLazy,this.useAnchor=!1}}e.channelId!==this.props.channelId&&(this.heightCache.invalidate(),this.list&&this.list.resetRendered&&this.list.resetRendered(),Object(Wa.a)({teamId:this.props.teamId}).info(YO,"Switching channels: ".concat(e.channelId," timestamps: ").concat(Object(Ll.a)(e.timestamps)))),e.lastReadTs!==this.props.lastReadTs&&(this.unreadIndex=null)}groupTimestampsByDay(e){return Object(jf.a)(e,e=>Object(Ff.a)(e))}getTimestampsForDays(e){return Object(If.a)(this.groupTimestampsByDay(e)).sort()}getTimestampOfDayClosestToTop(){var{start:e}=this.list.getVisibleRange(),t=this.rows[e];if(t)return"dayDivider"===t.type?t.day.toString():"dayDividerLabel"===t.type?t.day.toString():"message"===t.type?t.day.ts.toString():void 0}getStartTimestampForDayNavigation(){return this.state.hasKeyboardFocus?Object(Ff.a)(this.list.getInitialActiveItem()):this.getTimestampOfDayClosestToTop()}getTimestampOfPrevDay(){var e=this.getStartTimestampForDayNavigation(),t=this.getTimestampOfFirstMessageForDay(e);if(!t)return e;if(t&&!this.list.isItemInView(t))return e;var a=this.getTimestampsForDays(this.props.timestamps);return a[Object(Gu.a)(a,e)-1]}getTimestampOfNextDay(){var e=this.getStartTimestampForDayNavigation(),t=this.getTimestampsForDays(this.props.timestamps),a=t[Object(Gu.a)(t,e)+1];return a||(parseInt(e,10)+QO).toString()}getTimestampOfFirstMessageForDay(e){var t=this.getTimestampsForDays(this.props.timestamps),a=Object(Gu.a)(t,e);if(!(a<0)&&(0!==a||this.props.reachedStart)){var n=this.groupTimestampsByDay(this.props.timestamps)[e];return n?n[0]:void 0}}jumpToTimestamp(e){var{ts:t,offset:a,onJump:n}=e;Object(nh.a)(n)&&(this.onJump=n),this.props.jumpToTimestamp({ts:t,offset:a})}getPropsForItem(e){var{key:t,index:a}=e,n=this.rows[a];return n&&n.type?{"aria-label":this.getAriaLabelForRow(a),"aria-expanded":this.isItemAriaExpanded(t,a)}:void 0}render(){if(this.props.featureOfflineMode&&this.props.isOffline&&Object(bs.a)(this.props.timestamps))return i.a.createElement(zv.a,null);var e=this.groupTimestampsByDay(this.props.timestamps),t=Object(If.a)(e).sort(),a=[],n=[],r=[],s=this.findTimestampClosestToStartTs(),o=this.props.firstUnreadTs,c=s;this.props.reachedStart&&(n.push(JO),a.push({type:"foreword",ts:JO}),this.shouldShowLimitedHistoryAlert()&&(n.push("limited_history"),a.push({type:"limited_history"}))),this.unreadIndex=null;var l=Object(Ku.a)(this.props.timestamps)<=this.props.lastReadTs||this.props.reachedStart;Object(Cf.a)(t,(s,i)=>{var d,p=parseInt(s,10),u=e[s],h="".concat(s,".").concat(this.props.channelId),m=l&&Object(Ku.a)(u)===o;m&&(this.unreadIndex=a.length,this.props.startTs===this.props.lastReadTs&&(c=h)),a.push({type:"dayDividerLabel",day:p,showDayDividerAsUnread:m}),this.props.useStickyDayDividers&&r.push({key:h,index:n.length}),n.push(h),(i>0||this.props.reachedStart||this.state.degraded)&&(a.push({type:"dayDivider",day:p,showDayDividerAsUnread:m}),n.push("".concat(s,"divider"))),this.state.degraded||this.state.isSelecting||0!==i||!this.state.isLoadingOlder||(n.push("loading"),a.push({type:"loading"})),Object(Cf.a)(u,(e,r)=>{if(l&&0!==r&&e===o){this.unreadIndex=a.length;n.push("unreadDivider"),a.push({type:"unread",day:p}),this.props.startTs===this.props.lastReadTs&&(c=o)}var s=0===i&&this.props.reachedStart,h=i===t.length-1&&this.props.reachedEnd,m=0===r&&(i>0||this.props.reachedStart),b=r===u.length-1&&(i<t.length-1||this.props.reachedEnd),_=o===e;a.push({type:"message",ts:e,previousMessageTs:d,isFirstMsgForDay:m,isLastMsgForDay:b,isFirstUnreadMsg:_,day:{ts:p,isFirstDay:s,isLastDay:h}}),n.push(e),d=e})}),!this.state.isLoading||this.state.isLoadingOlder||this.props.reachedEnd||this.props.prevReachedEnd||(n.push("loadingSpinner"),a.push({type:"loadingSpinner"})),this.layout.setAnchor(this.useAnchor&&c,this.useAnchor&&this.props.startTsOffset),!this.useAnchor&&this.keyToScrollTo&&Object(ci.a)(this.props.startTsOffset)&&(this.layout.anchorOffset=this.props.startTsOffset),this.keys=n,this.rows=a;var d={firstVisibleUnreadTs:o,isGhostLastRead:this.props.isGhostLastRead,highlightTs:this.props.highlightTs,lastTimestamp:Object(bp.a)(this.props.timestamps),reachedEnd:this.props.reachedEnd,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:this.props.useStickyDayDividers},p=this.state.degraded?BO:UO,u=this.props.shouldIgnoreScrollKeys,h=[{keys:["command+j","ctrl+j"],handler:this.onJumpToUnreadShortcut},{keys:["shift+pagedown"],handler:this.onShiftPageDown.bind(this),filter:u},{keys:["shift+pageup"],handler:this.onShiftPageUp.bind(this),filter:u},{keys:["right"],handler:this.onArrowKeyRight,filter:this.props.shouldIgnoreArrowKeys}],m=(()=>{if(this.state.isLoading)return null;var e=a[a.length-1],t=e&&e.type;return this.props.startTs===JO||!1===s&&"foreword"===t?JO:null===s&&"message"===t?e.ts:o||(s||null)})();return i.a.createElement(fh.a,null,e=>{var{width:t,height:a}=e;return 0===t||0===a?null:(t!==this.width&&(this.heightCache.invalidate(),this.width=t),this.height=a,i.a.createElement(p,{ref:this.setListRef,className:"c-message_list",id:this.listId,"aria-label":this.props["aria-label"],height:a,width:t,keys:n,rowRenderer:this.renderRow,layout:this.layout,stickyItems:r,stickyOffsetTop:-21,stickyZIndex:200,loadAround:this.requestAround,loadPre:this.requestOlder,loadPost:this.requestNewer,isLoading:this.state.isLoading,reachedStart:this.props.reachedStart,reachedEnd:this.props.reachedEnd||this.props.prevReachedEnd,fadeScrollbar:!0,onScroll:this.onScroll,onSelectionChange:this.onSelectionChange,onEnd:this.onEnd,onFocusEnter:this.onFocusEnter,onItemTabWithin:this.onItemTabWithin,onFocusLeave:this.onFocusLeave,keyCommands:h,shouldIgnoreScrollKeys:this.props.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:this.props.shouldIgnoreArrowKeys,isFocusableItem:this.isMessage,unrelatedUpdateProps:d,activeItem:this.props.focusRequestedTs,initialActiveItem:m,useAriaApplicationMode:this.props.featureAriaApplicationMode,getPropsForItem:this.getPropsForItem,featureOfflineMode:this.props.featureOfflineMode,isOffline:this.props.isOffline,onItemKeyDown:this.onItemKeyDown}))})}}message_list_MessageList.propTypes=HO,message_list_MessageList.defaultProps=WO;var $O=Object(Lf.a)(message_list_MessageList),ey=Object(d.b)(e=>({focusLastVisibleMessageInChannel:Object(I.c)(e),featureMessageNavigationShortcuts:Object(h.m)(e,"feature_message_navigation_shortcuts"),featureContextualMessageShortcuts:Object(h.m)(e,"feature_contextual_message_shortcuts"),contextualMessageShortcutsModalWasSeen:Object(Ke.k)(e,"contextual_message_shortcuts_modal_was_seen"),isToastInView:Object(qa.f)(e),featureMessageKitInMessagePane:Object(h.m)(e,"feature_message_kit_in_message_pane")}),e=>({setFocusLastVisibleMessageInChannel:function(){return e(Object(Bs.h)(...arguments))},setFocusMessageInput:function(){return e(Object(Bs.i)(...arguments))},openContextualMessageShortcutsModal:function(){return e(Rf(...arguments))},setUserPrefByApi:function(){return e(Object(Ve.f)(...arguments))}}))(e=>{var{forwardedRef:t}=e,a=Object(ya.a)(e,["forwardedRef"]);return i.a.createElement($O,Object(n.a)({ref:t},a))}),ty=i.a.forwardRef((e,t)=>i.a.createElement(ey,Object(n.a)({forwardedRef:t},e))),ay=a("7v/h"),ny=a("wuDf"),ry=a("4EIq"),sy=a("jWJI"),iy=a("JS8a"),oy=(a("3ise"),new x.b("unavailable_channel")),cy=e=>{var t,a,{isThread:n,isImOrMpim:r,unavailableTeamId:o}=e,c=i.a.createElement(eo.a,{id:o});t=n?oy.t("This thread is currently unavailable"):oy.rt("{teamName} is making changes to their workspace",{teamName:c}),a=n?oy.rt("{teamName} is making changes to their workspace, and this thread will be unavailable until that process is complete.",{teamName:c}):r?oy.t("This conversation will be unavailable until this process is complete."):oy.t("This channel will be unavailable until this process is complete.");var l=cdn_url+"/80588/img/enterprise/unavailable_channel.png";return i.a.createElement(s.Fragment,null,i.a.createElement("img",{className:"p-unavailable_channel_image",src:l,srcSet:"".concat(l,", ").concat(l.replace(".png","@2x.png")," 2x"),alt:""}),i.a.createElement("h2",{className:"p-unavailable_channel_title"},t),i.a.createElement("div",{className:"p-unavailable_channel_content"},a))};cy.defaultProps={isThread:!1};var ly=cy,dy=a("c695"),py=a("YB7p"),uy=new x.b("unavailable_channel");class unavailable_channel_reload_UnavailableChannelReload extends s.PureComponent{constructor(e){super(e),this.state={loading:!1},this.handleReload=this.handleReload.bind(this)}handleReload(){var{channelId:e,channelPrivacyType:t,unavailableTeamId:a,clogger:n,isThread:r}=this.props;this.setState(()=>({loading:!0}));var s="UnavailableChannelReload: Remote team ".concat(a," has migrated their data, user triggered client reload");Object(mi.a)()?Object(py.a)({reason:s,reasonKey:"unavailable_channel_reload"}):Object(py.b)({reason:s,reasonKey:"unavailable_channel_reload",noCache:!0}),n.track(ie.EventId.CHANNEL_UNAVAILABLE,{channel_id:e,channel_type:e?e.charAt(0):null,channel_privacy_type:t,unavailable_team_id:a,contexts:{ui_context:{action:ie.UiAction.CLICK,step:r?ie.UiStep.THREAD:ie.UiStep.MESSAGE_PANE,ui_element:ie.UiElement.BTN_RELOAD}}}),n.sendDataAndEmptyQueue()}render(){var e,{isThread:t,isImOrMpim:a,unavailableTeamId:n}=this.props;e=t?uy.t("Reload Slack to view this thread"):a?uy.t("Reload Slack to view this conversation"):uy.t("Reload Slack to view this channel");var r,o=i.a.createElement(eo.a,{id:n});r=t?uy.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this thread.",{teamName:o}):a?uy.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this conversation.",{teamName:o}):uy.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this channel.",{teamName:o});var c=cdn_url+"/80588/img/enterprise/unavailable_channel_reload.png";return i.a.createElement(s.Fragment,null,i.a.createElement("img",{className:"p-unavailable_channel_image p-unavailable_channel_image--reload",src:c,srcSet:"".concat(c,", ").concat(c.replace(".png","@2x.png")," 2x"),alt:""}),i.a.createElement("h2",{className:"p-unavailable_channel_title"},e),i.a.createElement("div",{className:"p-unavailable_channel_content"},i.a.createElement("p",null,r),i.a.createElement("div",{className:"align_center"},i.a.createElement(dy.a,{type:"primary",size:"large",onClick:this.handleReload,disabled:this.state.loading,loading:this.state.loading},uy.t("Reload Slack")))))}}unavailable_channel_reload_UnavailableChannelReload.defaultProps={isThread:!1};var hy=unavailable_channel_reload_UnavailableChannelReload,my="reload",by="blocker";class unavailable_channel_UnavailableChannel extends s.PureComponent{componentDidMount(){this.clogImpression()}componentDidUpdate(e){e.isReloadRequired===this.props.isReloadRequired&&e.channelId===this.props.channelId||this.clogImpression()}clogImpression(){var{channelId:e,channelPrivacyType:t,unavailableTeamId:a,clogger:n,isThread:r,isReloadRequired:s}=this.props;n.track(ie.EventId.CHANNEL_UNAVAILABLE,{channel_id:e,channel_type:e?e.charAt(0):null,channel_privacy_type:t,unavailable_team_id:a,contexts:{ui_context:{action:ie.UiAction.IMPRESSION,step:r?ie.UiStep.THREAD:ie.UiStep.MESSAGE_PANE,ui_properties:{element_name:s?my:by}}}})}render(){var{isReloadRequired:e,isThread:t}=this.props,a=l()("p-unavailable_channel",{"p-unavailable_channel_thread":t});return i.a.createElement("div",{className:a},e?i.a.createElement(hy,this.props):i.a.createElement(ly,this.props))}}unavailable_channel_UnavailableChannel.defaultProps={isThread:!1};var _y=Object(d.b)((e,t)=>{var{unavailableTeamId:a,channelId:n}=t,r=Object(Se.i)(e,a),s=Object(L.e)(e,n);return{isReloadRequired:Object(we.a)(r),isImOrMpim:Object(B.hb)(s)||Object(B.pb)(s),clogger:Object(ne.a)({state:e}),channelId:s.id,channelPrivacyType:Object(B.s)(s)}})(unavailable_channel_UnavailableChannel),gy=a("khjP"),fy=a("P1uz"),vy=a("ySrZ"),Oy=a("WhMD"),yy=(a("qfOp"),new x.b("messages"));class archives_banner_ArchivesBanner extends s.PureComponent{render(){var e=Object(Oy.a)(this.props.firstTimestamp,{shortenMonth:!0}),t=Object(Oy.a)(this.props.lastTimestamp,{shortenMonth:!0});return i.a.createElement("div",{className:"p-archives_banner"},i.a.createElement("span",{className:"p-archives_banner__date_range"},yy.t("Viewing archives from {rangeStart} - {rangeEnd}",{rangeStart:e,rangeEnd:t})),i.a.createElement(jt.c,{className:"p-archives_banner__jump",onClick:this.props.jumpToRecent,"data-qa":"archives_banner"},yy.t("Jump to recent messages"),i.a.createElement(We.a,{type:"arrow_down"})))}}archives_banner_ArchivesBanner.defaultProps={};var Cy=a("rsVu"),jy=new x.b("messages"),Ey=3e3,ky=100,Sy={displayCount:0,since:null,do24hrTime:!1,known:!1,channelId:null,ghost:!1,unreadPlacement:XO.VISIBLE,jumpToUnread:r.a,markMostRecentMsgRead:r.a,onHide:r.a};class message_pane_unread_banner_UnreadBanner extends s.PureComponent{constructor(e){super(e),this.startFade=this.startFade.bind(this),this.onAnimationTick=this.onAnimationTick.bind(this),this.onAnimationEnd=this.onAnimationEnd.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.jumpOrMark=this.jumpOrMark.bind(this),this.markAsRead=this.markAsRead.bind(this),this.animation=null,this.state={hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1}}componentWillUnmount(){this.animation&&this.animation.cancel()}onAnimationEnd(){this.setState(()=>({hasUnreads:!1,opacity:1}),()=>{this.props.onHide()})}onAnimationTick(e){var{value:t,nextTick:a}=e;this.animation&&(this.setState(()=>({opacity:t})),a())}onKeyDown(e){var t=[to.e,to.j];Object(qp.a)(t,e.keyCode)&&this.jumpOrMark(e)}UNSAFE_componentWillReceiveProps(e){if(e.channelId!==this.props.channelId&&this.animation&&this.animation.cancel(),!this.state.hasUnreads||e.hasUnreads)this.setState(()=>({hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1}));else{var t=e.ghost?Ey:0;this.startFade(t)}}jumpOrMark(e){this.state.unreadPlacement===XO.VISIBLE?this.markAsRead(e):this.props.jumpToUnread(e)}makeJumpAriaLabel(){if(Object(DO.a)()){var e=Object(ve.q)()?jy.t("Cmd"):jy.t("Ctrl");return jy.t("Jump to first unread message ({cmdButton} J)",{cmdButton:e,fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})}}makeJumpLabel(){if(!Object(DO.a)())return jy.t("Jump");var e=Object(ve.q)()?jy.t("Cmd"):jy.t("Ctrl");return jy.rt("Jump <span>({cmdButton} + J)</span>",{cmdButton:e},e=>{var{text:t,key:a}=e;return i.a.createElement("span",{key:a,className:"normal"},t)})}markAsRead(e){e.stopPropagation(),Object(Wa.b)().action("UNREAD-BANNER","Mark ".concat(this.props.channelId," read")),this.props.markMostRecentMsgRead({channelId:this.props.channelId,reason:Of.w.CLICKED}),this.animation&&this.animation.cancel(),this.onAnimationEnd()}startFade(e){this.animation=Object(yh.a)({delay:e,fromValue:1,toValue:0,duration:ky,easing:"easeInQuad",onTick:this.onAnimationTick,onComplete:this.onAnimationEnd})}renderClose(){var e=l()("p-message_pane__unread_banner__close",{"p-message_pane__unread_banner__close--detached":this.state.unreadPlacement!==XO.VISIBLE});return i.a.createElement(qe.c,{tip:jy.t("Mark as read (esc)"),position:"bottom-right"},i.a.createElement(jt.c,{className:e,onClick:this.markAsRead,"aria-label":jy.t("Mark as read")},i.a.createElement("span",{className:"p-message_pane__unread_banner__close__label"},jy.t("Mark as read")),i.a.createElement(We.a,{type:"times_small",className:"p-message_pane__unread_banner__close__icon"})))}renderJump(){var{unreadPlacement:e}=this.state;if(e===XO.VISIBLE)return null;var t=e===XO.ABOVE?"arrow_up":"arrow_down",a=this.makeJumpLabel(),n=this.makeJumpAriaLabel();return i.a.createElement(jt.c,{"aria-label":n,onMouseDown:this.jumpOrMark,onKeyDown:this.onKeyDown,className:"p-message_pane__unread_banner__jump"},i.a.createElement(We.a,{type:t,className:"p-message_pane__unread_banner__jump__arrow"}),a)}render(){var{hasUnreads:e,since:t,displayCount:a}=this.state,{do24hrTime:n,known:r}=this.props;if(!e||!t)return null;var s=Math.floor(parseFloat(t));if(!s)return null;var o=Object(Oy.a)(s,{excludeYear:!0}),c=Object(Cy.a)(s,{do24hrTime:n}),l=r?"":"+",d=a;!r&&d>10&&(d=10*Math.floor(d/10));var p=jy.t("{count, plural, =1 {#{certainty} new message} other {#{certainty} new messages}} since {time} on {date}",{certainty:l,count:d,time:c,date:o});return d&&(1!==d||r)||(p=jy.t("New messages since {time} on {date}",{time:c,date:o})),i.a.createElement("div",{className:"p-message_pane__unread_banner p-message_pane__banner"},i.a.createElement("div",{className:"p-message_pane__unread_banner__banner"},this.renderJump(),i.a.createElement(jt.c,{className:"p-message_pane__unread_banner__msg",onMouseDown:this.jumpOrMark,onKeyDown:this.jumpOrMark,style:{opacity:this.state.opacity}},p)),this.renderClose())}}message_pane_unread_banner_UnreadBanner.defaultProps=Sy;var Iy=Object(d.b)((e,t)=>{var a=t.since;"0000000000.000000"===a&&(a=Object(L.e)(e,t.channelId).created);return{do24hrTime:Object(Ke.k)(e,"time24"),since:a}})(message_pane_unread_banner_UnreadBanner),wy=a("e9Nc"),Ty=a("Rjjz"),Ny=(a("Rmar"),new x.b("search")),Py={searchInProductEducationDismiss:r.a,channelForCurrentInFilterQuery:null,openFromScrollSearchTipBanner:r.a,incrementScrollerSearchInProductEducationDismissalCount:r.a,recordLastDismissedScrollSearchTooltipTimestamp:r.a,refocusList:r.a,messageListRef:null};class search_tip_banner_SearchTipBanner extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["onClose","onClickBannerContent","onKeyPressedUp"]),this.searchTipBannerRef=i.a.createRef()}componentDidMount(){this.keyCommands=this.initKeyCommands()}componentDidUpdate(e){this.props.showSearchScrollbackTip&&!e.showSearchScrollbackTip&&this.props.clogger.track("SEARCH_SCROLL_TIP",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id})}componentWillUnmount(){this.keyCommands&&this.keyCommands.reset()}onClose(e){e.stopPropagation(),e.preventDefault(),this.props.clogger.track("SEARCH_SCROLL_TIP_DISMISS",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id}),this.previousFocus&&document.activeElement!==this.previousFocus&&this.previousFocus.focus(),this.props.recordLastDismissedScrollSearchTooltipTimestamp(),this.props.incrementScrollerSearchInProductEducationDismissalCount(),this.props.searchInProductEducationDismiss(),this.props.refocusList()}onEscape(e){"Escape"===e.key&&this.onClose(e)}onClickBannerContent(e){e.stopPropagation(),e.preventDefault(),this.props.clogger.track("SEARCH_SCROLL_TIP_CLICK",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id}),this.props.openFromScrollSearchTipBanner()}onKeyPressedUp(){this.props.showSearchScrollbackTip&&this.searchTipBannerRef.current&&!this.searchTipBannerRef.current.contains(document.activeElement)&&this.props.messageListRef.current.contains(document.activeElement)&&(this.previousFocus=document.activeElement,this.searchTipBannerRef.current.focus())}initKeyCommands(){var e=new pi.a;return e.bindAll([{keys:["up"],handler:this.onKeyPressedUp}]),e}render(){var{showSearchScrollbackTip:e}=this.props;return e&&i.a.createElement("div",{ref:this.searchTipBannerRef,className:"p-message_pane__search_tip_banner",role:"presentation",tabIndex:0,onKeyDown:e=>this.onEscape(e),"aria-label":Ny.t("Tip: Try command F to search this channel.")},i.a.createElement(jt.c,{className:"p-message_pane__search_tip_banner_content",onClick:this.onClickBannerContent,tabIndex:-1,role:"presentation"},Ny.rt("<strong>Tip</strong>: Try {command}{f} to search this channel.",{fallbackHash:"f74de2cccbeb348dd34450e1fc92a0fd0f502e71",command:i.a.createElement(Nf.a,{label:Object(ve.q)()?"Cmd":"Ctrl",slim:!0}),f:i.a.createElement(Nf.a,{label:"F",slim:!0})})),i.a.createElement(qe.c,{tip:Ny.t("Close",{fallbackHash:"1f863990d6ec5b308a2330f10e271f087ccf0bf7"})},i.a.createElement(jt.c,{className:"p-message_pane__search_tip_banner_action","aria-label":Ny.t("Close",{ns:"toast"}),onClick:this.onClose,onKeyDown:e=>this.onEscape(e)},i.a.createElement(We.b,{inline:!0,type:"times"}))))}}search_tip_banner_SearchTipBanner.defaultProps=Py;var Ay={searchInProductEducationDismiss:Ug.c,openFromScrollSearchTipBanner:Tl.j,incrementScrollerSearchInProductEducationDismissalCount:Ty.f,recordLastDismissedScrollSearchTooltipTimestamp:Ty.m,setFocusRequestedTs:Bs.j},My=Object(d.b)(e=>({showSearchScrollbackTip:Object(Ug.f)(e),clogger:Object(ne.a)({state:e}),channelForCurrentInFilterQuery:Object(wy.a)(e),appearedTime:Object(Ug.b)(e)}),Ay)(search_tip_banner_SearchTipBanner),xy=a("Z6RV"),Ry=a("qgNY"),Dy=new x.b("messages");class briefings_back_button_BriefingsBackButton extends s.PureComponent{constructor(e){super(e),this.backToBriefings=this.backToBriefings.bind(this)}backToBriefings(){this.props.displayModelOrViewById({id:"Vall_unreads"})}render(){return this.props.isHighlightsBackButtonVisible?i.a.createElement(jt.d,{type:"outline",size:"small",className:"p-message_pane__briefings_back_button",onClick:this.backToBriefings},i.a.createElement(We.b,{className:"p-message_pane__briefings_back_button_icon",type:"arrow-left"}),Dy.t("Back to my highlights")):null}}briefings_back_button_BriefingsBackButton.defaultProps={isHighlightsBackButtonVisible:!1};var Fy=Object(d.b)(e=>({isHighlightsBackButtonVisible:Object(I.q)(e)}),e=>({displayModelOrViewById:function(){var{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(Object(Ry.a)({id:t}))}}))(briefings_back_button_BriefingsBackButton);function Ly(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Uy(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ly(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ly(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var By=Object(kt.a)()?Object(H.a)(ty,"MessagePane",{index:0}):ty,Hy={logger:{error:r.a},clogger:{track:r.a},channelId:null,channelDisplayName:void 0,type:"channel",theme:"light",timestamps:[],reachedStart:!1,reachedEnd:!1,prevReachedEnd:!1,oldest:void 0,latest:void 0,fetchHistory:r.a,fetchSliHighlights:r.a,onMount:r.a,callAppHomeOpenEventByChannelId:r.a,lastReadTs:void 0,isGhostLastRead:!1,unreadCount:0,unreadCountKnown:!1,startTs:null,startTsOffset:null,highlightTs:null,highlightLazy:void 0,focusRequestedTs:void 0,rollups:null,isLoading:!1,isLoadingOlder:!1,setUnreadPoint:r.a,markMostRecentMsgRead:r.a,setUnreadLineVisibility:r.a,clearHighlightTs:r.a,jumpToTimestamp:r.a,saveScrollmark:r.a,isArchived:!1,isLimited:!1,isSlackbotIm:!1,isAppIm:!1,overlayVisible:!1,channelSessionId:null,prevChannelSwitchTs:null,newxpOnboardingStep:null,firstUnreadTs:null,featureTinyspeck:!1,featureClassicNav:!1,featureAriaApplicationMode:!1,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,hasMessagePaneUnmounted:!1,setMessagePaneHasUnmounted:r.a,currentUserId:null,isAppSpaceOpen:!1,isShared:!1,isOrgShared:!1,isYou:!1,isMuted:!1,hasUnreads:!1,hasDraft:!1,badgeCount:0,screenReaderOverride:void 0,windowLastBlurEvent:null,windowLastFocusEvent:null,makeMessageSummary:void 0,isScreenReaderEnabled:!1,setFocusRequestedTs:r.a,showThreadIfThreadable:r.a,currentThreadKey:void 0,isThreadable:r.a,unavailableTeamId:"",canPostInChannel:!0,featureAnnounceOnly:!1,featureSonicInputs:!1,searchInProductEducationReset:r.a,bootInFlight:!1,bootType:null,isFileExpanding:!1,featureOfflineMode:!1,isOffline:!1,userAttentionIsOnChat:!1,composerVisible:!1,clientTheme:"light",impressionLoggingWebGroup:"control",latestMessageTsWithReactions:null,showingContextBar:!1};class message_pane_BaseMessagePane extends s.PureComponent{constructor(e){super(e),this.list=null,this.onFocusEnter=this.onFocusEnter.bind(this),this.onFocusLeave=this.onFocusLeave.bind(this),this.onVisibleRowsChanged=this.onVisibleRowsChanged.bind(this),this.onUnreadBannerHide=this.onUnreadBannerHide.bind(this),this.setListRef=this.setListRef.bind(this),this.shouldIgnoreScrollKeys=this.shouldIgnoreScrollKeys.bind(this),this.shouldIgnoreArrowKeys=this.shouldIgnoreArrowKeys.bind(this),this.requestHistory=this.requestHistory.bind(this),this.jumpToMostRecent=this.jumpToMostRecent.bind(this),this.jumpToUnread=this.jumpToUnread.bind(this),this.focus=this.focus.bind(this),this.renderSearchScrollbackTip=this.renderSearchScrollbackTip.bind(this),this.messageListRef=i.a.createRef(),this.state={showingArchiveBanner:!1,showingUnreadBanner:!1,unreadPlacement:XO.VISIBLE},this.historyRateLimiter=new vy.a,this.prqMetrics={usableVisible:{}},this.sendSessionFrameStats=this.sendSessionFrameStats.bind(this),this.recordSessionFrameStats=this.recordSessionFrameStats.bind(this),this.attachMessageImpressionsLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger)}componentDidMount(){this.props.onMount();var e=!!this.props.timestamps.length,t=!(!this.props.unreadCount&&!this.props.unreadCountKnown);e&&t&&("channel"===this.props.type||"private"===this.props.type)&&this.props.fetchSliHighlights({channelId:this.props.channelId,timestamps:Object(Vd.a)(this.props.timestamps,e=>e>this.props.lastReadTs),lastReadTs:this.props.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs}),this.props.isAppIm&&this.logAppHomeRequest(this.props.channelId,"messages"),this.recordAndTrackTimeToVisible(),document.hasFocus()?this.recordSessionFrameStats():window.addEventListener("focus",this.recordSessionFrameStats)}componentDidUpdate(){if(this.list){var e=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(e)}(!0===this.props.reachedStart&&!0===this.props.reachedEnd||this.props.timestamps.length>0)&&this.recordAndTrackTimeToUsable(ie.TimingStatus.COMPLETED)}componentWillUnmount(){if(Object(kt.a)()){var e=this.list&&this.list.getScrollmark(),t=this.props.channelId;this.props.saveScrollmark({channelId:t,scrollmark:e})}this.sendSessionFrameStats(),window.removeEventListener("focus",this.recordSessionFrameStats),this.props.setMessagePaneHasUnmounted(!0);try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(a){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",a)}}onFocusEnter(e){this.hasFocus=!0,this.hasKeyboardFocus=e.isKeyboardFocus}onFocusLeave(){this.hasFocus=!1,this.hasKeyboardFocus=!1}onUnreadBannerHide(){this.setState(()=>({showingUnreadBanner:!1}))}onVisibleRowsChanged(e,t){if(this.list){var a=this.getUnreadLinePlacement();this.setState(()=>({unreadPlacement:a}));var n=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(n);try{this.messageImpressionLogger.setCurrentlyVisibleMessages(t.filter(e=>"message"===e.type).map(e=>({ts:e.ts,channel:this.props.channelId})))}catch(r){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",r)}this.list.isAtBottom()&&this.props.searchInProductEducationReset()}}getUnreadBannerDisplayCount(){var{timestamps:e,lastReadTs:t,unreadCount:a,reachedEnd:n}=this.props;return e.length&&n?e.filter(e=>e>t).length:a}getUnreadLinePlacement(){return 1===this.props.unreadCount&&!this.props.unreadCountKnown||!this.list?XO.VISIBLE:this.list.getUnreadLinePlacement()}setListRef(e){this.list=e}componentDidCatch(e){this.setState(()=>({caughtError:!0})),this.props.logger.error("MessagePane componentDidCatch:",e,"message_pane_componentDidCatch")}UNSAFE_componentWillReceiveProps(e){var t=this.props.channelId;if(this.setState(t=>{var a=this.getUnreadLinePlacement();if(!e.isLoading&&!Object(bs.a)(e.timestamps)){var n=!1===e.reachedEnd&&!e.prevReachedEnd;if(n!==t.showingArchiveBanner)return Uy({},t,{unreadPlacement:a,showingArchiveBanner:n})}return t.unreadPlacement!==a?Uy({},t,{unreadPlacement:a}):t}),this.setState(e=>{return Uy({},e,{showingUnreadBanner:this.getUnreadBannerDisplayCount()>0})}),this.setState(e=>{return Uy({},e,{showingUnreadBanner:this.getUnreadBannerDisplayCount()>0})}),t&&e.channelId!==t){try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(s){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",s)}var a=this.list&&this.list.getScrollmark();this.props.saveScrollmark({channelId:t,scrollmark:a}),this.historyRateLimiter.reset(),this.recordAndTrackTimeToUsable(ie.TimingStatus.ABANDONED),this.state.caughtError&&this.setState(()=>({caughtError:!1})),e.isAppIm&&this.logAppHomeRequest(e.channelId,"messages")}e.channelId===t&&e.isAppIm!==this.props.isAppIm&&e.isAppIm&&this.logAppHomeRequest(e.channelId,"messages");var n=this.props.timestamps.length!==e.timestamps.length,r=this.props.unreadCount!==e.unreadCount||this.props.unreadCountKnown!==e.unreadCountKnown;!e.channelId||!n&&!r||"channel"!==e.type&&"private"!==e.type||this.props.fetchSliHighlights({channelId:e.channelId,timestamps:Object(Vd.a)(e.timestamps,t=>t>e.lastReadTs),lastReadTs:e.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs}),e.teamId!==this.props.teamId&&this.attachMessageImpressionsLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger)}attachMessageImpressionsLogger(e,t,a){if(this.messageImpressionLogger)try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(n){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",n)}this.messageImpressionLogger=new gy.a({teamId:e,experimentGroup:t,clogger:a,messageViewLocation:fy.a.CHANNEL})}blur(){this.list.blur()}focus(){this.list.focus()}isUnreadLineVisible(){var{isGhostLastRead:e,unreadCount:t,reachedEnd:a,isLoading:n}=this.props;return!n&&(!e&&this.list.getUnreadLinePlacement()===XO.VISIBLE||!(t||!a||!this.list.isAtBottom()))}jumpToMostRecent(){this.props.jumpToTimestamp({ts:null})}jumpToUnread(e){this.list.jumpToUnread(e)}logAppHomeRequest(e,t){Object(kt.a)()||this.props.callAppHomeOpenEventByChannelId({channelId:e,appHomeSection:t})}recordAndTrackTimeToUsable(e){if(Object(kt.a)()&&this.props.bootInFlight)this.staleTimestamps||(this.staleTimestamps=this.props.timestamps);else if(0!==Object.keys(this.prqMetrics.usableVisible).length)if(0===this.props.windowLastBlurEvent){if(Object(kt.a)()){if(!Object(m.g)(Object(p.getStateForClientStore)()))return;Object(p.dispatchForClientStore)(Object(m.c)(!1))}var t=this.props.telemeter.measure("navigationStart","prq_time_to_usable",null,{return_unprocessed:!0}).unprocessed;Object(kt.a)()&&this.props.telemeter.store("prq_time_to_usable_".concat(this.props.bootType),t),!!this.staleTimestamps&&!Object(rf.a)(this.props.timestamps.sort(),this.staleTimestamps.sort())&&this.props.telemeter.count("prq_time_to_usable_required_sync"),Object(jh.i)(t,"APP_ICON",!0,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,e),this.prqMetrics.usableVisible={},this.props.logger.info("PERF","Logged time to usable (TTU): ".concat(t))}else this.prqMetrics.usableVisible={}}recordAndTrackTimeToVisible(){if(!this.props.hasMessagePaneUnmounted||this.props.bootInFlight)if(0===this.props.windowLastBlurEvent){if(Object(kt.a)()){if(!Object(m.h)(Object(p.getStateForClientStore)()))return;Object(p.dispatchForClientStore)(Object(m.d)(!1))}var e=this.props.telemeter.measure("navigationStart","prq_time_to_visible",null,{return_unprocessed:!0}).unprocessed;Object(kt.a)()&&this.props.telemeter.store("prq_time_to_visible_".concat(this.props.bootType),e),this.prqMetrics.usableVisible={[this.props.channelId]:e},Object(jh.j)(e,"APP_ICON",!1,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId),this.props.setMessagePaneHasUnmounted(!0),this.props.logger.info("PERF","Logged time to visible (TTV): ".concat(e))}else this.prqMetrics.usableVisible={}}recordSessionFrameStats(){window.removeEventListener("focus",this.recordSessionFrameStats),window.addEventListener("blur",this.sendSessionFrameStats),window.addEventListener("beforeunload",this.sendSessionFrameStats),Object(jh.e)(this.props.teamId,this.props.enterpriseId,ie.EventId.PRQ_SESSION_FRAME_STATS)&&_f()}requestHistory(e){var{oldest:t,latest:a}=e,{channelId:n,type:r,reachedStart:s,reachedEnd:i,logger:o}=this.props;if(s&&i)return!1;var c=t,l=a;if(l&&s){if(!c)return!1;l=null}if(c&&i){if(!l)return!1;c=null}if(this.historyRateLimiter.isRequestPending({oldest:t,latest:a}))return!1;if(this.historyRateLimiter.shouldPreventHistoryRequest({oldest:t,latest:a}))return this.beaconedRateLimit?o.warn("MESSAGE_PANE","message_pane_request_rate_limited ".concat(n," ").concat(t,"_").concat(a)):(o.error({channelId:n,latestTs:l,oldestTs:c},"message_pane_request_rate_limited"),this.beaconedRateLimit=!0),!1;this.beaconedRateLimit=!1;var d=this.props.fetchHistory({channelId:n,type:r,oldest:c,latest:l,reason:"message-pane/requestHistory"});return d&&this.historyRateLimiter.logHistoryRequest({oldest:c,latest:l,promise:d}),d}sendSessionFrameStats(){if(window.addEventListener("focus",this.recordSessionFrameStats),window.removeEventListener("blur",this.sendSessionFrameStats),window.removeEventListener("beforeunload",this.sendSessionFrameStats),ff()){gf();var e=vf();0!==e.durationMs&&Object(jh.h)(e.durationMs,e.histFrameRenderTime,e.histJankyWindows,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId)}}shouldIgnoreArrowKeys(e){var{target:t}=e,a=document.querySelector(".client_channels_list_container"),n=document.getElementById("col_flex"),r=a&&a.contains(t),s=n&&n.contains(t);return!(this.props.featureSonicInputs?this.props.userAttentionIsOnChat:Object(Ju.f)())||s||r||Object(iy.b)()||!this.hasKeyboardFocus}shouldIgnoreScrollKeys(e){var{target:t}=e,a=t===document.body,n=this.hasFocus,r=Object(Ju.e)(),{channelId:s,featureSonicInputs:i}=this.props;if(i){var o=Object(zu.a)({viewContext:Of.I.MESSAGE_PANE,channelId:s});r=!!o&&o.hasFocus()}return!(a||n||r)}renderArchivesBanner(){if(!this.state.showingArchiveBanner)return null;var{timestamps:e}=this.props;return Object(bs.a)(e)?null:i.a.createElement(archives_banner_ArchivesBanner,{firstTimestamp:Object(Ku.a)(e),lastTimestamp:Object(bp.a)(e),jumpToRecent:this.jumpToMostRecent})}renderDegradedBanner(){var{newxpOnboardingStep:e,overlayVisible:t}=this.props;return t?null:e?null:i.a.createElement(yf.a,null,i.a.createElement(xy.a,null))}renderMessagePaneBannerContainer(){var{newxpOnboardingStep:e,overlayVisible:t}=this.props;return t?null:e?null:i.a.createElement(ay.a,null)}renderSearchScrollbackTip(){return i.a.createElement(My,{messageListRef:this.messageListRef,refocusList:()=>this.focus()})}renderUnreadBanner(){var{unreadCount:e,unreadCountKnown:t,lastReadTs:a,channelId:n,isGhostLastRead:r,markMostRecentMsgRead:s,newxpOnboardingStep:o,overlayVisible:c,isArchived:l}=this.props;return c?null:o&&o!==Hv.CANCELLED&&o!==Hv.COMPLETE?null:l?null:i.a.createElement(Iy,{channelId:n,hasUnreads:e>0,displayCount:this.getUnreadBannerDisplayCount(),known:t,since:a,ghost:r,unreadPlacement:this.state.unreadPlacement,jumpToUnread:this.jumpToUnread,markMostRecentMsgRead:s,onHide:this.onUnreadBannerHide})}render(){if(this.props.isAppSpaceOpen)return null;if(this.state.caughtError)return null;if(this.props.newxpOnboardingStep===Hv.START)return i.a.createElement(Wv,{step:this.props.newxpOnboardingStep});if(this.props.unavailableTeamId)return i.a.createElement(_y,{channelId:this.props.channelId,unavailableTeamId:this.props.unavailableTeamId});if(!this.props.channelId)return null;var e=Fa.a.msie||Fa.a.msedge,t=!this.props.overlayVisible&&!e,a=l()("p-message_pane",{"p-message_pane--ie":e,"p-message_pane--classic-nav":Object(kt.a)()&&this.props.featureClassicNav}),{type:n,channelDisplayName:r,isShared:s,isOrgShared:o,isYou:c,isMuted:d,hasUnreads:p,hasDraft:u,isArchived:h,unreadCount:m,badgeCount:b,canPostInChannel:_,featureAnnounceOnly:g,isFileExpanding:f,userAttentionIsOnChat:v,composerVisible:O,clientTheme:y,latestMessageTsWithReactions:C}=this.props,j=zh({type:n,displayName:r,isShared:s,isOrgShared:o,isYou:c,isMuted:d,hasUnreads:p,hasDraft:u,isArchived:h,unreadCount:m,badgeCount:b,canPost:_,featureAnnounceOnly:g,isSelected:!1,userActive:!1,isTyping:!1}),E=Object(af.e)(this.props.currentThreadKey),k=i.a.createElement("div",{ref:this.messageListRef,className:a,"data-qa":"message_pane"},i.a.createElement("div",{className:"p-message_pane__top_banners"},i.a.createElement(ny.a,null),this.renderDegradedBanner(),i.a.createElement(Fy,null),this.renderUnreadBanner(),this.renderSearchScrollbackTip()),this.renderMessagePaneBannerContainer(),i.a.createElement(By,{ref:this.setListRef,channelId:this.props.channelId,"aria-label":j,timestamps:this.props.timestamps,startTs:this.props.startTs,startTsOffset:this.props.startTsOffset,shouldIgnoreScrollKeys:this.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:this.shouldIgnoreArrowKeys,highlightTs:this.props.highlightTs,highlightLazy:this.props.highlightLazy,focusRequestedTs:this.props.focusRequestedTs,requestHistory:this.requestHistory,lastReadTs:this.props.lastReadTs,isGhostLastRead:this.props.isGhostLastRead,rollups:this.props.rollups,isLoading:this.props.isLoading,isLoadingOlder:this.props.isLoadingOlder,setUnreadPoint:this.props.setUnreadPoint,reachedStart:this.props.reachedStart,reachedEnd:this.props.reachedEnd,prevReachedEnd:this.props.prevReachedEnd,oldest:this.props.oldest,latest:this.props.latest,onVisibleRowsChanged:this.onVisibleRowsChanged,doneHighlighting:this.props.clearHighlightTs,channelType:this.props.type,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:t,theme:this.props.theme,channelSessionId:this.props.channelSessionId,firstUnreadTs:this.props.firstUnreadTs,messageContainerType:Of.I.MESSAGE_PANE,featureTinyspeck:this.props.featureTinyspeck,featureAriaApplicationMode:this.props.featureAriaApplicationMode,teamId:this.props.teamId,enterpriseId:this.props.enterpriseId,sessionId:this.props.sessionId,msgTriggers:this.props.msgTriggers,windowLastFocusEvent:this.props.windowLastFocusEvent,currentUserId:this.props.currentUserId,screenReaderOverride:this.props.screenReaderOverride,jumpToTimestamp:this.props.jumpToTimestamp,makeMessageSummary:this.props.makeMessageSummary,isScreenReaderEnabled:this.props.isScreenReaderEnabled,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,isBannerVisible:this.state.showingUnreadBanner,setFocusRequestedTs:this.props.setFocusRequestedTs,showThreadIfThreadable:this.props.showThreadIfThreadable,currentThreadKey:this.props.currentThreadKey,isThreadable:this.props.isThreadable,threadListId:E,isFileExpanding:f,featureOfflineMode:this.props.featureOfflineMode,isOffline:this.props.isOffline,userAttentionIsOnChat:v,composerVisible:O,clientTheme:y,latestMessageTsWithReactions:C,showingContextBar:this.props.showingContextBar}),this.renderArchivesBanner());return Object(kt.a)()?k:i.a.createElement(ry.a,{component:this,order:0},k)}}message_pane_BaseMessagePane.defaultProps=Hy;var Wy=Object(sy.a)(message_pane_BaseMessagePane,{updateStore:e=>{var{instance:t,dispatch:a}=e,n=t.list&&t.list.getScrollmark();a(Hg({channelId:t.props.channelId,scrollmark:n}))}}),qy=a("y8dB"),Gy=Object(_p.createSelectorCreator)(_p.defaultMemoize,Ti.a),Ky=Gy([e=>e,(e,t)=>t,(e,t,a)=>a],(e,t,a)=>{var{timestamps:n,start:r,end:s,reachedStart:i,reachedEnd:o,prevReachedEnd:c}=e;if(!o&&!c&&n&&n.length-Object(Lg.a)(n,a)<20)return{messages:[],rollups:{},reachedStart:!1,reachedEnd:!1};var l=Object(Fg.a)(Object(ed.a)(n,e=>t[e]),$g.fb),{rollups:d,messages:p}=Object(qy.a)(l);return{messages:p,timestamps:Object(ed.a)(p,e=>e.ts),rollups:d,reachedStart:i,reachedEnd:o,prevReachedEnd:c,oldest:r,latest:s}});var Vy={fetchHistory:Bg.a,fetchSliHighlights:qg.c,setUnreadPoint:ns.setUnreadPoint,markMostRecentMsgRead:ns.markMostRecentMsgRead,setUnreadLineVisibility:function(e){return(t,a)=>{var n=Object(I.s)(a());n!==e&&(Object(Wa.a)({getState:a}).info("CHECK-UNREADS","unreadLineVisible updated: ".concat(n," -> ").concat(e)),t(Object(Bs.p)(e)))}},clearHighlightTs:Bs.a,jumpToTimestamp:Bs.c,saveScrollmark:Hg,onMount:Wg.b,setMessagePaneHasUnmounted:Bs.m,makeMessageSummary:Qg.a,setFocusRequestedTs:Bs.j,callAppHomeOpenEventByChannelId:R.b,isThreadable:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(e,a)=>Object($g.vb)(a(),...t)},showThreadIfThreadable:Yg.m,searchInProductEducationReset:Ug.e},zy=Object(d.b)((e,t)=>{var a=t.channelId||Object(_.a)(e),n=Object(L.e)(e,a),r=Object(It.c)(e,"context_bar"),s=Object(h.m)(e,"feature_tinyspeck"),i=Object(h.m)(e,"feature_classic_nav"),o=Object(h.m)(e,"feature_aria_application_mode"),c=Object(h.d)(e),l=Object(u.b)(e),d=Object(u.a)(e),p=Object(I.b)(e),m=Object(Zd.b)(e),b=Object(I.g)(e),g=Object(ep.d)(e),f=Object(ep.e)(e),v=Object(af.b)(e),O=Object(pr.c)({state:e}),y=Object(Wa.a)({state:e}),C=Object(ne.a)({state:e}),j=Object(Xg.g)(e),E=Object(ep.b)(e),k=Object(It.c)(e,"impression_logging_web");if(!n)return{featureTinyspeck:s,featureClassicNav:i,impressionLoggingWebGroup:k,currentUserId:c,teamId:l,enterpriseId:d,sessionId:p,msgTriggers:m,hasMessagePaneUnmounted:b,windowLastBlurEvent:g,windowLastFocusEvent:f,telemeter:O,logger:y,clogger:C,bootInFlight:j,bootType:E};var S=Object(zg.d)(e,a),w=Object(zg.e)(e,a),T=Object(B.C)(n),N=!1,P=Object(I.f)(e);P&&P!==T&&(T=P,N=!0);var M=Object(I.j)(e),x=Object(I.k)(e),R=Object(I.i)(e),D=Object(I.h)(e),F=Object(B.U)(n),U=Object(Gg.h)(e,a,T),H=U&&U.reachedEnd,W=Object(I.b)(e),q=Object(I.n)(e),G=Object(Vg.a)(e),K=Object(Gg.f)(e,a,M),V=Object(Kg.c)(e,a,K.timestamps),{timestamps:z,messages:Y,rollups:Q,reachedStart:X,reachedEnd:J,prevReachedEnd:Z,oldest:$,latest:ee}=Ky(K,V,M);(Object(B.Cb)(n)&&!Object(B.nb)(n)||Object(B.X)(n))&&(T=Object(bp.a)(z));var te,ae=function(e){var{state:t,channelId:a,timestamps:n,rollups:r,lastReadTs:s}=e;return Object(hp.a)(n,e=>{var n=Object(Kg.a)(t,a,e),i=Object(h.d)(t);if(!n)return!1;if(r[e]){var o=Object(Dg.a)(r[e]),c=Object(ed.a)(o,"ts"),l=Object(ed.a)(c,e=>Object(Kg.a)(t,a,e));return Object(Kd.a)(l,e=>Object($g.kb)(e,s,i))}return Object($g.kb)(n,s,i)})}({state:e,channelId:a,timestamps:z,rollups:Q,lastReadTs:T}),re=Object(up.b)(e),se=Object(I.p)(e)&&Xc(e,a);Object(B.Lb)(e,n)&&(te=Object(B.T)(e,n));var ie=Object(nf.e)(e),oe=Object(St.e)(e),ce=function(e){var{state:t,channel:a,rolledMessages:n}=e,r=Object(h.m)(t,"feature_reactji_education_tip"),s=Object(Zg.d)(t);if(!tf({featureReactjiEducationTip:r,inProductCoachmark:s,channel:a}))return null;var i=Object(qu.a)(n,e=>{var a=Object(ef.b)(e),n=Object(Jg.e)(t,a);return!!n&&!!n.length});return i?i.ts:null}({state:e,channel:n,rolledMessages:Y});return{isFileExpanding:ie,channelId:a,type:Object(B.u)(n),channelDisplayName:Object(B.w)(e,n,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),timestamps:z,reachedStart:X,reachedEnd:J,prevReachedEnd:Z,oldest:$,latest:ee,lastReadTs:T,isGhostLastRead:N,unreadCount:F,unreadCountKnown:H,startTs:M,startTsOffset:x,highlightTs:R,highlightLazy:D,focusRequestedTs:Object(I.e)(e),rollups:Q,isAppSpaceOpen:se,isArchived:Object(B.X)(n),isLoading:S,isLoadingOlder:w,isLimited:Object(Gg.e)(e,a),isSlackbotIm:Object(B.Hb)(n),isAppIm:Object(B.kb)(e,a),overlayVisible:Object(Uh.a)(t.overlayVisible)?t.overlayVisible:Object(I.r)(e),channelSessionId:W,prevChannelSwitchTs:q,theme:G,newxpOnboardingStep:Object(I.l)(e),firstUnreadTs:ae,featureTinyspeck:s,featureClassicNav:i,featureAriaApplicationMode:o,teamId:l,enterpriseId:d,sessionId:p,msgTriggers:m,hasMessagePaneUnmounted:b,windowLastBlurEvent:g,windowLastFocusEvent:f,currentUserId:c,badgeCount:Object(L.d)(e,n),isShared:Object(B.ab)(n),isOrgShared:Object(B.vb)(n),isYou:Object(B.Tb)(e,n),isMuted:Object(xr.c)(e,a),hasUnreads:!!Object(B.U)(n),hasDraft:Object(B.x)(e,a),isScreenReaderEnabled:re,currentThreadKey:v,unavailableTeamId:te,canPostInChannel:Object(sn.p)(e,a),featureAnnounceOnly:Object(h.m)(e,"feature_announce_only"),featureSonicInputs:Object(h.m)(e,"feature_sonic_inputs"),telemeter:O,logger:y,clogger:C,bootInFlight:j,bootType:E,featureOfflineMode:Object(h.m)(e,"feature_offline_mode"),isOffline:!Object(Re.c)(e),userAttentionIsOnChat:oe,contextBarExperimentGroup:r,composerVisible:(Object(ga.a)(e)||"composer_toolbar"===Object(It.c)(e,"composer_toolbar"))&&Object(wt.b)(e),clientTheme:Object(A.c)(e),impressionLoggingWebGroup:k,latestMessageTsWithReactions:ce}},Vy)(Wy),Yy=a("c+rX"),Qy=a("Vfgr"),Xy=a("XRnC"),Jy=a("Sh2I"),Zy=a("7ob2"),$y=a("aXcD"),eC=a("IxGy"),tC=Object(xt.b)("Start editing the last message in a given channel",function(e,t){var{channelId:a,threadTs:n,viewContext:r,keyboardShortcut:s,hasKeyboardFocus:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t(),c=Object(up.b)(o),l=Object(eC.d)(o,{channelId:a,threadTs:n}),d=Object(ne.a)({state:o});return!!l&&(d.track(ie.EventId.MSG_EDIT_LAST,{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.EDIT,[ie.UiContextKeys.ui_properties]:{[ie.UiPropertiesKeys.view_context]:r,[ie.UiPropertiesKeys.key]:s,[ie.UiPropertiesKeys.is_screen_reader_enabled]:c,[ie.UiPropertiesKeys.client_has_keyboard_focus]:i}}}}),e(Object(eC.g)({channelId:a,ts:l.ts,viewContext:r,scroll:!0,keyboardShortcut:s,screenReaderIsEnabled:c,hasKeyboardFocus:i})),!0)});tC.meta={name:"editLastMessageInChannel",key:"actionsEditLastMessageInChannelEditLastMessageInChannel",description:"Start editing the last message in a given channel"},tC.propTypes={channelId:o.default.string.isRequired,threadTs:o.default.string,viewContext:o.default.string};var aC=tC,nC=a("HSEu"),rC=a("oRxB"),sC=a("L8gx"),iC=a("/u/P"),oC="GLOBAL-RXN-SHORTCUT",cC={threadTs:void 0};class message_input_reaction_popover_MessageInputReactionPopover extends s.PureComponent{constructor(e){super(e),this.state={forceOpen:!1},this.onEmojiSelected=this.onEmojiSelected.bind(this),this.onClose=this.onClose.bind(this)}onEmojiSelected(e,t){this.reactionKey?this.props.changeReactionFromUserAction({key:this.reactionKey,name:t}):this.props.logger.warn(oC,"No reaction key")}onClose(){this.setState(()=>({forceOpen:!1}))}startReactionPopoverForLastMessage(){var e,{channelId:t,threadTs:a,logger:n}=this.props;(e=a?this.props.getLastMessageInThread(t,a):this.props.getLastMessageInChannel(t))?(this.reactionKey=Object(ef.b)(e),n.info(oC,"Opening reaction popover for ".concat(this.reactionKey)),this.setState(()=>({forceOpen:!0}))):n.info(oC,"Could not find last message")}render(){var{children:e}=this.props,{forceOpen:t}=this.state;return i.a.createElement(ui.a,{showHandyReactions:!0,customTrigger:!0,forceOpen:t,onEmojiSelected:this.onEmojiSelected,onClose:this.onClose},i.a.createElement(message_input_reaction_popover_PassThrough,null,e))}}message_input_reaction_popover_MessageInputReactionPopover.defaultProps=cC;var lC={getLastMessageInChannel:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(e,a)=>Object(sC.a)(a(),...t)},getLastMessageInThread:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(e,a)=>Object(iC.a)(a(),...t)},changeReactionFromUserAction:function(){return Object(rC.a)(...arguments)}},dC=Object(d.b)(function(e){return{logger:Object(Wa.a)({state:e})}},lC,null,{withRef:!0})(message_input_reaction_popover_MessageInputReactionPopover);class message_input_reaction_popover_PassThrough extends s.PureComponent{render(){return this.props.children}}var pC=a("7/SY"),uC=a("CvCA"),hC=new x.b("coachmarks"),mC={anchorElement:o.default.instanceOf(Element),completeJoinerOnboarding:o.default.func};class joiner_onboarding_coachmark_JoinerOnboardingCoachmark extends fc.a{render(){var{anchorElement:e,completeJoinerOnboarding:t}=this.props;return i.a.createElement("div",{className:"position_relative"},i.a.createElement(fc.a,{anchorElement:e,isOpen:!0,onClickPrimaryButton:t,closeCoachmark:t,coachmarkClassNames:"c-joiner-coachmark",qa:"joiner-coachmark",arrowPosition:10,offsetX:30,offsetY:45,primaryCallToActionText:hC.t("Got It",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0"}),orientation:"top"},i.a.createElement("h3",null,hC.rt("Say hello!",{fallbackHash:"ff30242209ddac7a521de4f37aabe952bc39165f"})),i.a.createElement("p",null,hC.rt("Type a message to let your team know you\u2019re here.",{fallbackHash:"cacc432d26db2e0a0a36a197f329204ee25e63e1"}))))}}joiner_onboarding_coachmark_JoinerOnboardingCoachmark.propTypes=mC,joiner_onboarding_coachmark_JoinerOnboardingCoachmark.defaultProps={anchorElement:null,completeJoinerOnboarding:!1};var bC=new x.b("coachmarks"),_C={anchorElement:o.default.instanceOf(Element),setTractorMessageCoachmarkVisibility:o.default.func},gC={anchorElement:null,setTractorMessageCoachmarkVisibility:r.a};class tractor_send_message_coachmark_TractorSendMessageCoachmark extends fc.a{render(){var{anchorElement:e,setTractorMessageCoachmarkVisibility:t}=this.props;return i.a.createElement("div",{className:"position_relative"},i.a.createElement(fc.a,{anchorElement:e,"data-qa":"coachmark",isOpen:!0,orientation:"top",offsetX:30,offsetY:45,arrowPosition:10,closeCoachmark:()=>t(!1)},i.a.createElement("h3",null,bC.t("Just type and press Enter")),i.a.createElement("p",null,bC.t("Your Slack teammates will see your messages when they join. Feel free to use your own words instead!"))))}}tractor_send_message_coachmark_TractorSendMessageCoachmark.propTypes=_C,tractor_send_message_coachmark_TractorSendMessageCoachmark.defaultProps=gC;var fC=a("yZHI"),vC=a("a6/V");function OC(){var{e:e,isMenuVisible:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!e&&(!t&&(!Object($u.a)(e.target)&&(!!Object(vC.a)(e)&&(!e||e.keyCode!==to.j))))}var yC=a("mLe0"),CC=a("c48M"),jC=a("AgpX"),EC=a("sk4h"),kC=a("Sxi2"),SC=new x.b("welcome_place");var IC=Object(d.b)(e=>({hasMessages:Object(EC.a)(e,Object(_.a)(e))}))(function(e){var t;return t=e.hasMessages?SC.rt("<b>Send your first message</b> to let your teammates know you're here."):SC.rt("<b>Be the first to post a message</b> and help get the conversation started."),i.a.createElement("p",{className:"padding_top_125"},t)}),wC=a("bDqM"),TC=new x.b("welcome_place");var NC=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object(Ca.b)(e);return{hasMessagesToRender:Object(EC.a)(e,n),isEligibleForWrapper:Object(re.t)(e)&&!Object(B.jb)(n)&&!Object(B.Eb)(n)&&!Object(B.Tb)(r.id,n)&&Object(B.nb)(n)&&Object(sn.p)(e,n.id)&&!Object(B.vb)(n)&&!Object(B.ab)(n)&&!Object(B.X)(n)&&!Object(B.Hb)(n),isTaskComplete:Object(re.r)(e),isSendMessageBannerDismissed:!Object(re.j)(e),clogger:Object(ne.a)({state:e}),pageViewingSessionId:Object(re.i)(e)}},e=>({dismissWrapper:()=>e(Object(wC.b)()),goToWelcomePlace:()=>e(Object($d.a)({id:"Pwelcome",fromHistory:!1,replaceHistoryState:!1}))}))(class welcome_message_wrapper_WelcomeMessageWrapper extends s.Component{constructor(e){super(e),this.shouldRenderWrapper=(()=>{var{isEligibleForWrapper:e,isSendMessageBannerDismissed:t}=this.props,{isTaskCompleteAtStart:a}=this.state;return e&&!a&&!t}),this.onClickClose=(()=>{this.props.dismissWrapper()}),this.onClickGetStartedLink=(()=>{var{goToWelcomePlace:e}=this.props;e()}),this.state={isTaskCompleteAtStart:e.isTaskComplete}}componentDidMount(){var{clogger:e,pageViewingSessionId:t}=this.props;this.shouldRenderWrapper()&&e.track("WELCOME_PLACE",{contexts:{ui_context:{action:ie.UiAction.IMPRESSION,ui_element:ie.UiElement.WELCOME_PLACE_CHANNEL_MESSAGE_BANNER},welcome_place:{welcome_session_id:t}}})}render(){var{channelId:e,children:t,hasMessagesToRender:a,prefillMessageInput:n,isTaskComplete:r,shouldShowSuccessfulSent:s}=this.props;if(!this.shouldRenderWrapper())return t;var o=i.a.createElement(He.a,{onClick:this.onClickClose},i.a.createElement(We.b,{type:"times-medium"}));return r||s?i.a.createElement("div",{className:"p-message_pane_input__wrapper--welcome-place","data-qa":"welcome_place_input_wrapper"},i.a.createElement("div",{className:"display_flex justify_content_between"},i.a.createElement("p",{className:"padding_top_125"},i.a.createElement("span",{role:"img","aria-label":TC.t("Tada!")},"\ud83c\udf89"),TC.rt("<b>Sent!</b> Ready to learn more about Slack?")," ",i.a.createElement(jC.a,{onClick:this.onClickGetStartedLink},TC.rt("Head to <b>Get Started</b>"))),o),t):i.a.createElement("div",{className:"p-message_pane_input__wrapper--welcome-place","data-qa":"welcome_place_input_wrapper"},i.a.createElement("div",{className:"display_flex justify_content_between"},i.a.createElement(IC,{channelId:e}),o),t,i.a.createElement("div",{className:"p-message_pane_input__message-suggestions-container"},i.a.createElement(kC.a,{hasMessagesToRender:a,prefillMessageInput:n})))}}),PC=a("M46C"),AC=a("NYp8"),MC=a("lCOO"),xC=a("AaT8"),RC=a("4rp9");var DC=function(e){var{renderIcon:t,renderText:a,type:n}=e;return i.a.createElement("div",{className:"p-context_bar","data-qa":"context_bar"},t(),i.a.createElement("span",{className:"p-context_bar__text",id:"context-bar-text","data-qa":"context_bar_text_".concat(n)},a()))};var FC=Object(cb.a)(function(e){var{status:t}=e;return i.a.createElement(DC,{renderIcon:()=>i.a.createElement(xC.a,{className:"p-context_bar__icon",emoji:t.emoji,emojiSize:Vr.a.SMALL,showTooltips:!0,stopAnimations:!0}),renderText:()=>i.a.createElement(RC.a,{emojiSize:Vr.a.SMALL,showTooltips:!0,stopAnimations:!0,text:t.text}),type:"custom_status"})}),LC=new x.b("messages");var UC=Object(cb.a)(function(e){var{memberId:t}=e;return i.a.createElement(DC,{renderIcon:()=>i.a.createElement(We.b,{className:"p-context_bar__dnd_icon",type:"snooze-filled-small"}),renderText:()=>LC.rt("{member} has <strong>notifications turned off</strong>",{member:i.a.createElement(Wr.a,{id:t}),fallbackHash:"af944df75258fb2dc2f1bacf18089b94d89efec8"}),type:"do_not_disturb"})}),BC=new x.b("messages");var HC=Object(cb.a)(function(e){var t,{channel:a,guestCount:n}=e;return t=Object(B.hb)(a)?BC.rt("This person is a <strong>guest</strong> in your organization",{fallbackHash:"05fd90c8107c4450309a1fac880837845b684fa3"}):Object(B.pb)(a)?BC.rt("{guestCount, plural, =1 {<strong># guest</strong> is} other {<strong># guests</strong> are}} in this conversation",{guestCount:n,fallbackHash:"001b03a22307ab209631ce684de51e97f6eddd94"}):BC.rt("{guestCount, plural, =1 {<strong># guest</strong> is} other {<strong># guests</strong> are}} in this channel",{guestCount:n,fallbackHash:"6101cfd18ba681495b6716c62d50ae9de09aadb7"}),i.a.createElement(DC,{renderIcon:()=>i.a.createElement(We.b,{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"user-filled"}),renderText:()=>t,type:"guest"})}),WC=new x.b("messages");var qC=Object(cb.b)((e,t)=>!Object(Ti.a)(t,e,2))(function(e){var t,{connectedTeamIds:a}=e;return t=Object(bs.a)(a)?WC.rt("<strong>Another organization</strong> has been invited to this channel"):WC.rt("{numConnectedTeams, plural, =1 {{singleTeamName} has} other {<strong># other organizations</strong> have}} been invited to this channel",{singleTeamName:i.a.createElement(eo.a,{id:a[0]}),numConnectedTeams:a.length,fallbackHash:"bda628c81a343fa32b015e193f6efb7d0db4fbc2"}),i.a.createElement(DC,{renderIcon:()=>i.a.createElement(We.b,{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"paper-plane"}),renderText:()=>t,type:"pending_shared"})}),GC=a("GzZI"),KC=3,VC=new x.b("messages");var zC=Object(cb.b)((e,t)=>!Object(Ti.a)(t,e,2))(function(e){var t,a,{channel:n,connectedTeamIds:r,guestCount:s,teamId:o}=e;if(Object(bs.a)(r))t=i.a.createElement(We.b,{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"shared-channels"});else{var c=Math.min(r.length,KC);t=Object(GC.a)(c).map(e=>i.a.createElement(Va.b,{className:"p-context_bar__icon",id:r[e],isPendingShared:Object(B.yb)(n),key:r[e],size:16}))}return a=Object(B.hb)(n)?Object(bs.a)(r)?VC.rt("This person is from <strong>another organization</strong>"):VC.rt("This person is from {team}",{team:i.a.createElement(eo.a,{id:r[0]}),fallbackHash:"d4b920ecdba14d62b4972dd3f8a95382091f31e1"}):Object(B.pb)(n)?Object(bs.a)(r)?VC.rt("This conversation includes people outside {userTeamName}",{userTeamName:i.a.createElement("strong",null,i.a.createElement(eo.a,{id:o}))}):VC.rt("<strong>{numConnectedTeams, plural, =1 {{singleTeamName}} other {# other organizations}}</strong> {guestCount, plural, =0 {{numConnectedTeams, plural, =1 {is} other {are}}} =1 {and <strong># guest</strong> are} other {and <strong># guests</strong> are}} in this conversation",{guestCount:s,singleTeamName:i.a.createElement(eo.a,{id:r[0]}),numConnectedTeams:r.length,fallbackHash:"15c8badcafe7312961e8f41ee9124ac65309cd3f"}):Object(bs.a)(r)?VC.rt("This channel is shared outside {userTeamName}",{userTeamName:i.a.createElement("strong",null,i.a.createElement(eo.a,{id:o}))}):VC.rt("<strong>{numConnectedTeams, plural, =1 {{singleTeamName}} other {# other organizations}}</strong> {guestCount, plural, =0 {{numConnectedTeams, plural, =1 {is} other {are}}} =1 {and <strong># guest</strong> are} other {and <strong># guests</strong> are}} in this channel",{guestCount:s,singleTeamName:i.a.createElement(eo.a,{id:r[0]}),numConnectedTeams:r.length,fallbackHash:"f32040563023486aa2782d3260f9017b3e6b3a7a"}),i.a.createElement(DC,{renderIcon:()=>t,renderText:()=>a,type:"shared"})}),YC=new x.b("messages");function QC(e,t){return Object($n.a)(Date.now(),{timeZone:Object(Fe.Q)(e),timeZoneOffset:Object(Fe.R)(e),do24hrTime:t})}function XC(e){var{member:t,time24:a}=e,[n,r]=Object(s.useState)(QC(t,a));return Object(AC.a)(()=>{r(QC(t,a))},[t,a]),i.a.createElement(DC,{renderIcon:()=>i.a.createElement(We.b,{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"clock-o"}),renderText:()=>YC.rt("It\u2019s {time} for {member}",{member:i.a.createElement(Wr.a,{id:t.id}),time:n?i.a.createElement("strong",null,n):i.a.createElement(Jo.b,{size:"small"}),fallbackHash:"8438a232c197c83b0b53191ac5834f1d8efc5eca"}),type:"time_zone"})}XC.defaultProps={time24:!1};var JC=Object(d.b)(function(e){return{time24:Object(Ke.k)(e,"time24")}})(XC),ZC=new x.b("messages");function $C(e){var{featureMigrationBackgroundClient:t,clogger:a,channel:n}=e;return t?(a.track(ie.EventId.ENTERPRISE_MIGRATION_BACKGROUND,{contexts:{ui_context:{action:ie.UiAction.IMPRESSION,ui_element:ie.UiElement.MIGRATION_CONTEXT_BAR},channel_id:n.id,channel_privacy_type:Object(B.s)(n)}}),i.a.createElement(DC,{renderIcon:()=>i.a.createElement(We.b,{className:"p-context_bar__dnd_icon",type:"info-circle-filled"}),renderText:()=>ZC.rt("Missing messages? They'll show up shortly when your workspace's migration is complete."),type:"is_migrating"})):null}$C.defaultProps={featureMigrationBackgroundClient:!1};var ej=Object(cb.a)($C),tj=(a("AuaN"),22),aj=8,nj={channel:o.default.object.isRequired,currentUser:o.default.object,guestCount:o.default.number,connectedTeamIds:o.default.array,isDnd:o.default.bool,imMember:o.default.object,teamId:o.default.string.isRequired,maybePullDownMessagePane:o.default.func,featureContextBarCustomStatus:o.default.bool,imCustomStatus:o.default.shape({emoji:o.default.string,text:o.default.string}),isMigrating:o.default.bool,featureMigrationBackgroundClient:o.default.bool},rj={currentUser:void 0,guestCount:0,connectedTeamIds:[],isDnd:!1,imMember:null,maybePullDownMessagePane:r.a,featureContextBarCustomStatus:!1,imCustomStatus:void 0,isMigrating:!1,featureMigrationBackgroundClient:!1},sj={};function ij(e){var t,{channel:a,connectedTeamIds:n,featureContextBarCustomStatus:r,guestCount:o,imCustomStatus:c,imMember:l,isDnd:d,maybePullDownMessagePane:p,teamId:u,isMigrating:h,featureMigrationBackgroundClient:m,clogger:b,currentUser:_}=e,g=Object(B.ab)(a),f=Object(B.yb)(a),v=function(e){var{currentUser:t,imMember:a}=e,[n,r]=Object(s.useState)(!1),{featureContextBarTzIssues:i}=Object(Ho.a)(),o=Object(MC.a)(),c=Object(s.useCallback)(()=>{if(!a||Object(Fe.tb)(a)||Object(Fe.Hb)(a)||Object(Fe.kb)(a))r(!1);else if(t.tz!==a.tz&&a.tz)try{var e=Object($n.a)(Date.now(),{timeZone:Object(Fe.Q)(a),timeZoneOffset:Object(Fe.R)(a),do24hrTime:!0,returnMoment:!0,noTzFallback:!0}).hour();if(Object(ci.a)(e))return void r(e>=tj||e<aj);r(!1)}catch(n){r(!1),n&&n.message&&!sj[a.id]&&i&&(sj[a.id]=!0,o.error("CONTEXT_BAR - imMember.id: ".concat(a.id,", imMember.tz: ").concat(a.tz,", currentUser.id: ").concat(t.id,", currentUser.tz: ").concat(t.tz),n,{subtype:"timezone"}))}else r(!1)},[a,o,t,i]);return Object(AC.a)(()=>{c()},[c]),Object(s.useEffect)(()=>{c()},[c]),n}({imMember:l,teamId:u,currentUser:_}),O=r&&c&&c.text&&c.emoji,y=d,C=v;m&&h?t=i.a.createElement(ej,{featureMigrationBackgroundClient:m,clogger:b,channel:a}):f?t=i.a.createElement(qC,{connectedTeamIds:n}):g?t=i.a.createElement(zC,{channel:a,connectedTeamIds:n,guestCount:o,teamId:u}):y?t=i.a.createElement(UC,{memberId:l.id}):O?t=i.a.createElement(FC,{status:c}):C?t=i.a.createElement(JC,{member:l}):o>0&&(t=i.a.createElement(HC,{channel:a,guestCount:o}));var j=!!t;return Object(s.useEffect)(()=>{p(j)},[j,p]),t||null}ij.propTypes=nj,ij.defaultProps=rj;var oj=Object(d.b)(e=>{var t=Object(_.a)(e),a=Object(L.e)(e,t),n=Object(B.N)(e,a),r=Object($i.f)(e,t),s=Object(h.m)(e,"feature_context_bar_guests"),i=Object(h.m)(e,"feature_migration_background_client"),o=s?Object(ps.a)(r,"counts.restricted_member_count"):0,c=Object(h.m)(e,"feature_context_bar_custom_status"),l=Object(B.hb)(a)?Object(B.G)(a):null,d=l?Object(Ca.d)(e,l):null,p=!c||!d||Object(Fe.tb)(d)||Object(Fe.Hb)(d)||Object(Fe.kb)(d)?null:Object(Ca.f)(e,l),m=Object(u.b)(e),b=d&&!Object(Fe.tb)(d)&&!Object(Fe.xb)(d)&&!Object(Fe.Hb)(d)&&!Object(Fe.kb)(d)&&Object(Ue.d)(e,l),g=Object(B.ob)(e,a),f=Object(ne.a)({state:e});return{currentUser:Object(Ca.b)(e),channel:a,connectedTeamIds:n,guestCount:o,isDnd:b,imMember:d,teamId:m,featureContextBarCustomStatus:c,imCustomStatus:p,isMigrating:g,featureMigrationBackgroundClient:i,clogger:f}})(ij),cj=a("+Lv6"),lj=a("jHww"),dj=(a("HQme"),new x.b("msg_input")),pj=e=>{var{tooltip:t,border:a,padding:n,featureAnnounceOnly:r}=e;if(!r)return null;var s=l()("p-message_input_announce_only_roadblock",{"p-message_input_announce_only_roadblock--border":a,"p-message_input_announce_only_roadblock--large_padding":"large"===n});return i.a.createElement("div",{className:s},i.a.createElement(We.b,{type:"emoji-objects",className:"p-message_input_announce_only_roadblock__icon",inline:!0}),dj.t("Read only",{fallbackHash:"9b19a5a212deb29444cc1b420ad81703205848be"}),t&&i.a.createElement(qe.c,{position:"top-right",tip:t},i.a.createElement(We.b,{type:"question-circle",className:"p-message_input_announce_only_roadblock__tip",inline:!0})))};pj.defaultProps={tooltip:null,border:!1,padding:void 0,featureAnnounceOnly:!1};var uj=pj,hj=new x.b("view"),mj={showCloseButton:!1,channelIsIMWithDeletedMember:!1,prevChannelId:void 0,member:void 0,featureAnnounceOnly:!1,featureSharedChannelsFreeTrial:!1};class message_pane_input_disabled_MessagePaneInputDisabled extends s.Component{constructor(){super(),Object(X.a)(this,["onCloseButtonClicked","renderSharedChannelFreeTrialUpgradePane","onUpgradeButtonClicked"])}componentDidMount(){var{clogger:e,featureSharedChannelsFreeTrial:t,isChannelFrozenAndInGracePeriod:a}=this.props;t&&a&&e.track(ie.EventId.CHANNEL_CREATE_FLOW,{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.step]:ie.UiStep.SHARED_CHANNEL_TRIAL_EXPIRED,[ie.UiContextKeys.action]:ie.UiAction.IMPRESSION,[ie.UiContextKeys.ui_properties]:{[ie.UiPropertiesKeys.element_type]:ie.ElementType.BANNER,[ie.UiPropertiesKeys.element_name]:"frozen_message_pane"}}}})}onCloseButtonClicked(){Object(B.hb)(this.props.channel)?this.props.closeChannelApi({channelId:this.props.channelId}):this.props.archiveChannel({id:this.props.channelId,wasArchivedThisSession:!1}),this.props.displayModelOrViewById({id:this.props.prevChannelId})}onUpgradeButtonClicked(){var{team:e,clogger:t,featureSharedChannelsFreeTrial:a,isChannelFrozenAndInGracePeriod:n}=this.props;a&&n&&t.track(ie.EventId.CHANNEL_CREATE_FLOW,{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.step]:ie.UiStep.SHARED_CHANNEL_TRIAL_EXPIRED,[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.ui_properties]:{[ie.UiPropertiesKeys.element_type]:ie.ElementType.BUTTON,[ie.UiPropertiesKeys.element_name]:"frozen_message_pane_upgrade"}}}}),Object(we.P)(e,"".concat(an.a,"?s=1&p=std_y&entry_point=shared_channels_free_trial_frozen_pane"))}renderSharedChannelFreeTrialUpgradePane(){var{featureSharedChannelsFreeTrial:e}=this.props;return e?i.a.createElement("div",{className:"p-message_pane_input__disabled"},i.a.createElement("span",{className:"p-message_pane_input__disabled_text"},hj.rt("Upgrade to reconnect this shared channel for your organization.")),i.a.createElement(jt.d,{pillarClassName:"p-message_pane_input__disabled_button",onClick:this.onUpgradeButtonClicked,type:"outline-primary",size:"small"},hj.t("Upgrade"))):null}render(){var{channel:e,showCloseButton:t,channelIsIMWithDeletedMember:a,member:n,featureAnnounceOnly:r,featureSharedChannelsFreeTrial:s,isChannelFrozenAndInGracePeriod:o}=this.props;if(!e)return null;var c=Object(B.Y)(e)?hj.t("Close Channel"):hj.t("Close"),l=null,d="";if(s&&o)return this.renderSharedChannelFreeTrialUpgradePane();if(Object(B.db)(e))d=Object(B.hb)(e)?hj.rt("Your two organizations are no longer connected."):Object(B.pb)(e)?hj.rt("These organizations are no longer connected."):hj.rt("This channel is no longer shared with your organization.");else if(Object(B.X)(e)&&!Object(B.hb)(e))d=Object(B.B)(e)?hj.rt("{channel_or_group} was moved to another workspace.",{channel_or_group:i.a.createElement("strong",null,i.a.createElement(Ye.a,{channel:e})),fallbackHash:"27c083b405e96387febe1099064dd930b6696124",fallbackHashNs:"view"}):hj.rt("You are viewing {channel_or_group}, an archived channel",{channel_or_group:i.a.createElement("strong",null,i.a.createElement(Ye.a,{channel:e}))});else if(a&&n&&Object(Fe.jb)(n))d=hj.t("You are viewing messages from {app_name} which has been removed from your workspace",{app_name:Object(Fe.K)(n)});else if(a)l=i.a.createElement(We.b,{type:"archive"}),d=hj.rt("You are viewing the archives of a deactivated account",{fallbackHash:"a2f3df2a30993d2303ac6a87adcd41cb35c1799f"});else{if(r){var p=hj.t("Posting to this channel has been restricted to select members");return i.a.createElement(uj,{tooltip:p,featureAnnounceOnly:r,border:!0,padding:"large"})}d=hj.rt("Your Workspace Owners have limited who can post to {channel_or_group}",{channel_or_group:i.a.createElement("strong",null,i.a.createElement(Ye.a,{channel:e}))})}return i.a.createElement("div",{className:"p-message_pane_input__disabled"},i.a.createElement("span",{className:"p-message_pane_input__disabled_text"},l," ",d),t&&i.a.createElement(jt.d,{pillarClassName:"p-message_pane_input__disabled_button",onClick:this.onCloseButtonClicked,type:"outline",size:"small"},c))}}message_pane_input_disabled_MessagePaneInputDisabled.defaultProps=mj;var bj={closeChannelApi:ns.closeChannelApi,archiveChannel:ns.archiveChannel,displayModelOrViewById:Ry.a},_j=Object(d.b)((e,t)=>{var{teamId:a,channelId:n}=t,r=Object(Se.i)(e,a),s=Object(L.e)(e,n),i=Object(B.hb)(s)?Object(Ca.d)(e,Object(B.G)(s)):null,o=Object(B.mb)(e,s);return{team:r,channel:s,member:i,channelIsIMWithDeletedMember:o,prevChannelId:Object(lj.a)(e),showCloseButton:!Object(B.db)(s)&&(Object(B.X)(s)||o),featureAnnounceOnly:Object(h.m)(e,"feature_announce_only"),featureSharedChannelsFreeTrial:Object(h.m)(e,"feature_shared_channels_free_trial"),isChannelFrozenAndInGracePeriod:Object(B.eb)(a,s),clogger:Object(ne.a)({state:e})}},bj)(message_pane_input_disabled_MessagePaneInputDisabled),gj=a("GdsW"),fj=new x.b("archives"),vj={channelCreatedBySelf:!1,channelDetailsVisible:!1,dateCreated:void 0,createdById:void 0,userAttentionIsOnChat:!1,previousChannelId:void 0};class message_pane_input_preview_MessagePaneInputPreview extends s.Component{constructor(){super(),this.onJoinButtonClicked=this.onJoinButtonClicked.bind(this),this.onDetailsButtonClicked=this.onDetailsButtonClicked.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}onDetailsButtonClicked(){this.props.showDetails()}onJoinButtonClicked(){this.props.joinConversationApi({channelId:this.props.channelId})}handleKeyDown(e){var{userAttentionIsOnChat:t,previousChannelId:a}=this.props;if(!(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)&&!Object($u.a)(document.activeElement)&&(!Object(kt.a)()||t)&&(Object(kt.a)()||Object(Ju.f)()))if(e.keyCode!==to.e){if(e.keyCode===to.f){if(Object(kt.a)())return void this.props.displayModelOrViewById({id:a});Object(gj.a)()}}else this.onJoinButtonClicked()}render(){var{channel:e,dateCreated:t,createdById:a,channelCreatedBySelf:n,channelDetailsVisible:r,featureOfflineMode:s,isOffline:o}=this.props,c=i.a.createElement(Hf.a,{type:"unknown"});t&&(c=Object(Bf.i)(t));var l=i.a.createElement(Hf.a,{type:"unknown"});a&&(l=i.a.createElement(Wr.a,{id:a}));var d=fj.rt("You are viewing {channel_name}",{channel_name:i.a.createElement("strong",null,i.a.createElement(qf.a,{channel:e,boldIcon:!0}))}),p="";p=n?fj.rt("Created by you on {created_at}",{created_at:c}):fj.rt("Created by {name} on {created_at}",{name:l,created_at:c});var u=i.a.createElement(jt.d,{pillarClassName:"p-message_pane_input__preview_join",onClick:this.onJoinButtonClicked,type:"primary",size:"medium",disabled:s&&o,dataQA:"join-channel"},fj.t("Join Channel"));if(s&&o){var h=i.a.createElement(n_.a,{tooltipLabel:fj.t("Go online to join this channel")});u=i.a.createElement(qe.c,{tip:h},i.a.createElement("div",{className:"inline_block"},u))}return i.a.createElement("div",{className:"p-message_pane_input__preview"},i.a.createElement("div",{className:"p-message_pane_input__preview_subtitle"},d),i.a.createElement("div",{className:"p-message_pane_input__preview_metadata"},p),i.a.createElement("div",null,u,!r&&i.a.createElement(jt.d,{pillarClassName:"p-message_pane_input__preview_details",onClick:this.onDetailsButtonClicked,type:"outline",size:"medium"},fj.t("See More Details"))))}}message_pane_input_preview_MessagePaneInputPreview.defaultProps=vj;var Oj={joinConversationApi:ns.joinConversationApi,showDetails:Ie.e,displayModelOrViewById:Ry.a},yj=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object(y.j)(e);return{channel:n,channelDetailsVisible:"details"===r||"channel_info"===r,createdById:n.creator,dateCreated:n.created,channelCreatedBySelf:n.creator===Object(h.d)(e),userAttentionIsOnChat:Object(St.e)(e),previousChannelId:Object(lj.a)(e),featureOfflineMode:Object(h.m)(e,"feature_offline_mode"),isOffline:!Object(Re.c)(e)}},Oj)(message_pane_input_preview_MessagePaneInputPreview),Cj=a("8cl8"),jj={isSelfDm:!1,channelName:void 0,memberId:void 0,showStatus:!1,forcePlaceholderText:void 0};class message_pane_input_placeholder_MessagePaneInputPlaceholder extends s.Component{render(){var{channelName:e,isSelfDm:t,showStatus:a,memberId:n,forcePlaceholderText:r}=this.props,s=r||Object(Cj.a)({channelName:e,isSelfDm:t}),o=!r&&a&&i.a.createElement(Ct.b,{memberId:n,tooltip:!1});return i.a.createElement("div",{className:"c-texty_input__placeholder"},s,o)}}message_pane_input_placeholder_MessagePaneInputPlaceholder.defaultProps=jj;var Ej=Object(d.b)((e,t)=>{var{channelId:a,isSelfDm:n}=t,r=Object(L.e)(e,a),s=Object(B.G)(r),i=s?Object(Ca.d)(e,s):null,o=Object(h.m)(e,"feature_context_bar_custom_status");return{memberId:s||void 0,showStatus:Object(B.hb)(r)&&!n&&Object(Fe.ab)(i)&&!o}})(message_pane_input_placeholder_MessagePaneInputPlaceholder),kj=(a("0Eo7"),{channel:void 0,channelId:void 0,isSelfDm:!1,channelName:void 0,prepareAndSendMessage:()=>Promise.resolve(),currentUserStartedTyping:r.a,currentUserEndedTyping:r.a,editLastMessageInChannel:r.a,useSendButton:!1,userCanPost:!0,typingNames:[],teamId:void 0,featureWysiwygComposer:!1,featureAtMentionInvites:!1,featureComposeFlowSend:!1,isUnavailable:!1,shouldShowJoinerLandingPlaceCoachmark:!1,completeJoinerOnboardingCallback:r.a,shouldShowTractorMessageCoachmark:!1,setTractorMessageCoachmarkVisibility:r.a,userAttentionIsOnChat:!1,composerVisible:!1,removeFromSectionNavigation:r.a,addToSectionNavigation:r.a,resetSectionNavigation:r.a,shouldShowWorkflowItemCoachmark:!1,maybePullDownMessagePane:r.a,featureMessageNavigationShortcuts:!1,setFocusLastVisibleMessageInChannel:r.a,focusMessageInput:!1,setFocusMessageInput:r.a});class message_pane_input_MessagePaneInput extends s.Component{constructor(){super(),Object(X.a)(this,["handleKeyDown","onTextChange","onSelectionChange","sendMessage","editLastMessage","startListeningToKeydown","stopListeningToKeydown","registerInput","unregisterInput","focus","blur","onFocus","onBlur","maybePullDownMessagePane","handleContextBarError","onUpArrow","prefillMessageInput"]),this.textyRef=i.a.createRef(),this.reactionPopoverRef=i.a.createRef(),this.state={textyValue:"",textyWysiwygLength:0,hasKeyboardFocus:!1,showSentSuccessfullyWrapper:!1}}componentDidMount(){this.updatePlaceholder(),this.registerInput(),this.restoreLegacyDraft()}shouldComponentUpdate(e){var{userCanPost:t,channel:a}=this.props;return(t&&!e.userCanPost||!Object(B.Ab)(a)&&Object(B.Ab)(e.channel))&&this.unmountPlaceholder(),!0}componentDidUpdate(e){var{userAttentionIsOnChat:t,channelId:a,userCanPost:n,channel:r,focusMessageInput:s,featureMessageNavigationShortcuts:i}=this.props,o={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(fa.a)(o)&&this.props.addToSectionNavigation(),Object(va.a)(o)&&this.props.removeFromSectionNavigation(),e.userAttentionIsOnChat&&!t?this.stopListeningToKeydown():!e.userAttentionIsOnChat&&t&&this.startListeningToKeydown(),e.channelId!==a&&(e.channelId&&this.unregisterInput(e.channelId),a&&(this.registerInput(),this.restoreLegacyDraft())),(a&&e.channelId!==a||!e.userCanPost&&n||(!e.channel||Object(B.Ab)(e.channel))&&!Object(B.Ab)(r))&&this.updatePlaceholder();var c=e.focusMessageInput!==s&&s;if(i&&c){var l=this.getInputRef();l&&l.focus(),this.props.setFocusMessageInput(null)}}componentWillUnmount(){var{channelId:e}=this.props;this.stopListeningToKeydown(),this.unmountPlaceholder(),this.unregisterInput(e),this.shouldNotListenToKeyDownAgain=!0}onUpArrow(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.featureMessageNavigationShortcuts&&!e&&this.props.setFocusLastVisibleMessageInChannel(!0)}onTextChange(e,t){var{channelId:a,featureWysiwygComposer:n}=this.props,r=this.getInputRef(),s=!1;if(n&&r){var i=r.getFormat();s=i&&i["code-block"]}this.setState(()=>({textyValue:e,textyWysiwygLength:Object(yC.a)(new om.a(t)),cursorInCodeBlock:s})),Object(kt.a)()||Object(Qu.h)(e),e&&0!==e.indexOf("/")&&Object(Qy.a)(e).length?this.props.currentUserStartedTyping({channelId:a}):this.props.currentUserEndedTyping({channelId:a})}onSelectionChange(){var{featureWysiwygComposer:e}=this.props,{cursorInCodeBlock:t}=this.state;if(e){var a=this.getInputRef();if(a){var n=a.getFormat(),r=n&&n["code-block"];t!==r&&this.setState(()=>({cursorInCodeBlock:r}))}}}onFocus(){this.stopListeningToKeydown(),this.props.resetSectionNavigation()}onBlur(){this.startListeningToKeydown(),this.getInputRef()&&this.setState(()=>({hasKeyboardFocus:!1}))}getInputRef(){return this.textyRef.current?this.textyRef.current.getWrappedInstance?this.textyRef.current.getWrappedInstance():this.textyRef.current:null}restoreLegacyDraft(){var{channelId:e}=this.props,t=this.getInputRef();if(e&&!Object(kt.a)()&&t){var a=Object(ap.a)(e);t.value(a||"");var n=Object(Qu.b)(e);n?t.setCursor(n.start,n.length):t.setCursorAtEnd()}}registerInput(){var e=this,{channelId:t}=this.props;t&&Object(zu.c)({viewContext:Of.I.MESSAGE_PANE,channelId:t,functions:{getContainer:()=>{var e=this.getInputRef();return e?e.container:null},isEmpty:()=>{var e=this.getInputRef();return e?e.isEmpty():null},clear:()=>{var e=this.getInputRef();e&&e.clear()},prependContents:e=>{var t=this.getInputRef();t&&t.prependContents(e)},setContents:e=>{var t=this.getInputRef();t&&t.setContents(e)},getContents:()=>{var e=this.getInputRef();return e?e.getContents():null},setText:e=>{var t=this.getInputRef();t&&t.value(e)},getText:()=>{var e=this.getInputRef();return e?e.value():null},getLength:()=>{var e=this.getInputRef();return e?e.getLength():null},getDisplayValue:()=>{var e=this.getInputRef();return e?e.displayValue():null},focus:()=>{var e=this.getInputRef();e&&e.setCursorAtEnd()},focusWithoutSettingCursor:()=>{var e=this.getInputRef();e&&e.focus()},hasFocus:()=>{var e=this.getInputRef();return!!e&&e.hasFocus()},isEnabled:()=>{var e=this.getInputRef();return!!e&&e.isEnabled()},getSelection:()=>{var e=this.getInputRef();return e?e.getSelection():null},insertContentsAtCursor:function(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user",r=e.getInputRef();r&&r.insertContentsAtCursor(t,a,n)},setCursor:(e,t)=>{var a=this.getInputRef();a&&a.setCursor(e,t)},setCursorAtEnd:()=>{var e=this.getInputRef();e&&e.setCursorAtEnd()},setPlaceholder:e=>{this.updatePlaceholder(e)},getContentsForCurrentSelection:()=>{var e=this.getInputRef();if(!e)return null;var t=e.getSelection();return t?e.getContentsForRange(t.index,t.length):null},openReactionPopoverForLastMessage:()=>{this.reactionPopoverRef.current&&this.reactionPopoverRef.current.getWrappedInstance().startReactionPopoverForLastMessage()},isCursorAtBeginning:()=>{var e=this.getInputRef();if(!e)return!1;var t=e.getSelection();return t&&0===t.index},isCursorAtEnd:()=>{var e=this.getInputRef();if(!e)return!1;var t=e.getSelection();return t&&t.index===e.getLength()}}})}unregisterInput(e){e&&Object(zu.d)({viewContext:Of.I.MESSAGE_PANE,channelId:e})}unmountPlaceholder(){var e=this.getInputRef();if(e){var t=e.container.querySelector(".ql-placeholder");t&&sh.a.unmountComponentAtNode(t)}}updatePlaceholder(e){var{channelName:t,isSelfDm:a,teamId:n,channelId:r}=this.props,s=this.getInputRef();if(s){var o=s.container.querySelector(".ql-placeholder");if(o){sh.a.render(i.a.createElement(d.a,{store:Object(p.getStoreInstanceByTeamId)(n)},i.a.createElement(Ej,{channelId:r,channelName:t,forcePlaceholderText:e,isSelfDm:a})),o);var c=e||Object(Cj.a)({channelName:t,isSelfDm:a});s.container.querySelector(".ql-editor").setAttribute("aria-label",c)}}}editLastMessage(e){var{keyboardShortcut:t,hasKeyboardFocus:a}=e;this.props.editLastMessageInChannel({channelId:this.props.channelId,keyboardShortcut:t,hasKeyboardFocus:a})}handleKeyDown(e){if(OC({e:e,isMenuVisible:Object(Be.g)()})&&!Object(fC.a)(e.target,e=>e.classList.contains("p-threads_flexpane"))){var t=this.getInputRef();Object(vn.c)()?setTimeout(()=>t.focus(),0):t&&t.focus()}}startListeningToKeydown(){if(!this.shouldNotListenToKeyDownAgain){var{userAttentionIsOnChat:e}=this.props;e&&document.addEventListener("keydown",this.handleKeyDown)}}stopListeningToKeydown(){document.removeEventListener("keydown",this.handleKeyDown)}sendMessage(){var{channelId:e,useSendButton:t,featureWysiwygComposer:a,telemeter:n}=this.props,r=this.getInputRef(),s=r.value(),i=r.getContents();return Object(pC.a)(r.getContents(),{featureWysiwygComposer:a})?(Object(PC.a)()&&n.mark("msg_input_try_to_submit"),r.clear(),this.setState(()=>({cursorInCodeBlock:!1,showSentSuccessfullyWrapper:!0})),t&&r.focus(),this.props.prepareAndSendMessage({channelId:e,text:s,delta:a?new om.a(i.contents):null,includeBroadcastKeywordWarning:!0,includeAtMentionInviteWarning:!0,includePrivateFileReshareWarning:!0}).then(()=>{var e=this.getInputRef();e&&e.clearHistory()}).catch(()=>{r.isEmpty()&&r.setContents(i)})):null}focus(){var e=this.getInputRef();e&&(e.setCursorAtEnd(),this.setState(()=>({hasKeyboardFocus:!0})))}blur(){var e=this.getInputRef();e&&e.blur(),this.onBlur()}maybePullDownMessagePane(e){this.props.maybePullDownMessagePane(e)}handleContextBarError(){this.props.maybePullDownMessagePane(!1)}prefillMessageInput(e){var t=this.getInputRef();t.value(Object($y.b)(e)),t.setCursorAtEnd()}renderContextBar(){return i.a.createElement(cj.a,{onError:this.handleContextBarError},i.a.createElement(oj,{maybePullDownMessagePane:this.maybePullDownMessagePane,key:this.props.channelId}))}renderInput(){var{channelId:e,useSendButton:t,featureComposeFlowSend:a,featureWysiwygComposer:n}=this.props,{hasKeyboardFocus:r,textyValue:s}=this.state,o=i.a.createElement(nC.c,{channelId:e,viewContext:Of.I.MESSAGE_PANE,className:"p-workspace__input",sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,useSendButton:t,useLegacyDrafts:!Object(kt.a)(),ref:this.textyRef,enableEmojiButton:!0,enableMentionButton:!0,enableComposerButton:n,enableSendButton:a&&t,isSendingDisabled:!Object(Qy.a)(s),focusOnMount:!0,focusOnPaste:!0,onTextChange:this.onTextChange,onSelectionChange:this.onSelectionChange,onFocus:this.onFocus,onBlur:this.onBlur,maxLines:null,maxLength:n?Of.C:Of.B,showFocusOutline:r,ariaDescribedBy:"context-bar-text",onUpArrow:this.onUpArrow});return Object(kt.a)()?i.a.createElement(dC,{ref:this.reactionPopoverRef,channelId:e},o):o}render(){var{typingNames:e,useSendButton:t,completeJoinerOnboardingCallback:a,userCanPost:n,channel:r,channelId:s,teamId:o,shouldShowTractorMessageCoachmark:c,setTractorMessageCoachmarkVisibility:l,shouldShowJoinerLandingPlaceCoachmark:d,shouldShowWorkflowItemCoachmark:p,featureWysiwygComposer:u,featureAtMentionInvites:h,featureComposeFlowSend:m}=this.props,{textyValue:b,textyWysiwygLength:_,cursorInCodeBlock:g}=this.state,f=null;if(d?f=i.a.createElement(joiner_onboarding_coachmark_JoinerOnboardingCoachmark,{completeJoinerOnboarding:a}):c?f=i.a.createElement(tractor_send_message_coachmark_TractorSendMessageCoachmark,{setTractorMessageCoachmarkVisibility:l}):p&&(f=i.a.createElement(joiner_onboarding_coachmark_JoinerOnboardingCoachmark,{completeJoinerOnboarding:()=>Object(Zy.c)(!1)})),this.props.isUnavailable)return null;if(s&&Object(B.Ab)(r))return i.a.createElement(yj,{channelId:this.props.channelId});if(s&&!n)return i.a.createElement(_j,{teamId:o,channelId:this.props.channelId});var v=i.a.createElement(NC,{channelId:s,prefillMessageInput:this.prefillMessageInput,shouldShowSuccessfulSent:this.state.showSentSuccessfullyWrapper},i.a.createElement("div",{className:"p-message_pane_input"},i.a.createElement("div",{className:"p-message_pane_input_inner"},this.renderContextBar(),this.renderInput(),i.a.createElement(uC.a,{typingNames:e,textLength:u?_:b.length,cursorInCodeBlock:g})),!m&&t&&i.a.createElement(nC.b,{isDisabled:!Object(Qy.a)(b),sendMessage:this.sendMessage,className:"p-workspace__message_pane_send"})));return Object(kt.a)()?h||f?i.a.createElement(vc.a,{coachmarkElement:f,orientation:"top",style:{width:"100%"}},v):v:i.a.createElement(ry.a,{component:this,order:2},v)}}message_pane_input_MessagePaneInput.defaultProps=kj;var Sj={prepareAndSendMessage:function(){return Object(Xy.a)(...arguments)},currentUserStartedTyping:function(){return Object(Gh.d)(...arguments)},currentUserEndedTyping:function(){return Object(Gh.c)(...arguments)},editLastMessageInChannel:function(){return aC(...arguments)},completeJoinerOnboardingCallback:function(){return Object(Jy.a)(...arguments)},setTractorMessageCoachmarkVisibility:function(){return Object(Zy.g)(...arguments)},setFocusLastVisibleMessageInChannel:function(){return Object(Bs.h)(...arguments)},setFocusMessageInput:function(){return Object(Bs.i)(...arguments)}},Ij=Object(kt.a)()?Object(H.a)(message_pane_input_MessagePaneInput,"MessagePaneInput",{index:5}):message_pane_input_MessagePaneInput,wj=Object(d.b)(e=>{var t=Object(_.a)(e),a=Object(L.e)(e,t),n=Object(ed.a)(Object(Gh.f)(e,t),t=>Object(Ca.d)(e,t));n.sort((t,a)=>Object(x.r)(Object(Fe.X)(e,t),Object(Fe.X)(e,a)));var r=Object(sn.p)(e,t)||Object(h.m)(e,"feature_announce_only_websocket")&&Object(B.y)(e,a),s=n.map(t=>Object(Fe.V)(e,t)),i=Object(h.d)(e);return{channelId:t,channel:a,channelName:Object(B.w)(e,a,{imIncludeAtSign:!1}),isSelfDm:Object(B.Tb)(i,a),userCanPost:r&&!Object(B.X)(a),typingNames:s.length>0?s:CC.a,useSendButton:Object(Ke.k)(e,"msg_input_send_btn"),userAttentionIsOnChat:Object(St.e)(e),composerVisible:(Object(ga.a)(e)||"composer_toolbar"===Object(It.c)(e,"composer_toolbar"))&&Object(wt.b)(e),teamId:Object(u.b)(e),featureWysiwygComposer:Object(ga.a)(e),featureAtMentionInvites:Object(h.m)(e,"feature_at_mention_invites"),featureComposeFlowSend:Object(O.h)(e),isUnavailable:Object(B.Lb)(e,a),telemeter:Object(pr.c)({state:e}),shouldShowTractorMessageCoachmark:Object(cp.c)(e),shouldShowJoinerLandingPlaceCoachmark:Object(cp.a)(e),shouldShowWorkflowItemCoachmark:Object(re.m)(e),featureMessageNavigationShortcuts:Object(h.m)(e,"feature_message_navigation_shortcuts"),focusMessageInput:Object(I.d)(e)}},Sj)(Ij),Tj=a("BeL+"),Nj=a("X6iR"),Pj=a("okoL"),Aj=a("Xjfm"),Mj=a("izWf"),xj=a("ZP0B");function Rj(e,t,a){return Object(xj.a)(Object(Vd.a)(a,a=>(function(e,t,a){var n=Object(Kg.a)(e,t,a);return n&&!Object($g.sb)(n)&&!Object($g.bb)(n)})(e,t,a)))}var Dj=a("tbBR"),Fj=a("eK0w"),Lj=a("q+7W"),Uj=a("Wx4V"),Bj=a("exfU"),Hj=100,Wj=8;function qj(e){var{timestamps:t}=e;return Object(bp.a)(t)}var Gj=a("Gz0X");var Kj=function(e){var{messages:t,timestamps:a,threadTs:n,lastRead:r,reachedStart:s}=e,i=t[n];if(!i)return"0000000000.000000";var o=Object(Vd.a)(a,e=>e!==n);if(Object($g.S)(i)<=4)return"0000000000.000000";var c=Object(Gj.a)(o,e=>e<=r);return s&&c.length<=2?"0000000000.000000":c.length===o.length?Object(Ku.a)(Object(Pj.a)(c,2)):Object(bp.a)(c)},Vj=a("m7fc");function zj(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Yj(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?zj(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zj(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Qj=function(e){var{threads:t,minimumVisibleTsByThread:a,maximumVisibleTsByThread:n,firstReadThreadKey:s,isDoingGlobalRefresh:i,currentUserId:o,initialLastReadByThread:c,hasMore:l,logError:d=r.a}=e,p=[],u=[];i&&(p.push("global-loading"),u.push({type:"loading"}));var h=Object(Vj.a)(t,e=>e.threadKey!==s).some(e=>Object(Dg.a)(e.messages).some(t=>t?t.ts>c[e.threadKey]&&t.user!==o:(d("Missing message in ".concat(e.threadKey)),!1)));if(t.forEach(e=>{var{channelId:t,threadTs:r,timestamps:o,threadKey:l,messages:d,reachedStart:m}=e,b=a[l],_=n[l];i||h||l!==s||(p.push("divider-".concat(l)),u.push({type:"divider"}));var g={channelId:t,threadTs:r,threadKey:l},f=o.some(e=>e>_);p.push("heading-".concat(l)),u.push(Yj({type:"heading"},g)),p.push("root-".concat(l)),u.push(Yj({type:"root"},g)),(!m||Object(Kd.a)(o,e=>e!==r&&e<b))&&(p.push("load_older-".concat(l)),u.push(Yj({type:"load_older",messages:d},g))),o.forEach(t=>{if(t!==r&&!(t<b||t>_)){var a=d[t];if(!Object($g.gb)(a)){var n=c&&t>c[e.threadKey];p.push("".concat(l,"-").concat(t)),u.push(Yj({type:"reply",ts:t,isNewReply:n},g))}}}),f&&(p.push("load_newer-".concat(l)),u.push(Yj({type:"load_newer"},g))),p.push("footer-".concat(l)),u.push(Yj({type:"footer"},g))}),l&&t){var m=Object(bp.a)(t),b=m&&m.threadKey;p.push("loading_more_threads-".concat(b)),u.push({type:"loading_more_threads"})}return{keys:p,rows:u}},Xj=a("1myf");var Jj=a("4RH7"),Zj={channelId:void 0,threadTs:void 0,replyUsers:[],replyUsersCount:0,firstItem:!1,clogLinkClick:r.a};class header_Header extends s.Component{constructor(e){super(e),this.clogClick=this.clogClick.bind(this)}clogClick(){var{clogLinkClick:e}=this.props;e("CLICK_CHANNEL_NAME")}render(){var{channelId:e,threadTs:t,replyUsers:a,replyUsersCount:n,firstItem:r}=this.props,s=Object($g.v)(e,t),o=l()("p-threads_view_header",{"p-threads_view_header--first":r});return i.a.createElement("div",{className:o},i.a.createElement(fe.a,{href:s,className:"p-threads_view_header__permalink",clogLinkClick:this.clogClick},i.a.createElement(Ye.a,{channelId:e,className:"p-threads_view_header__channel_name"})),i.a.createElement(Jj.a,{replyUsers:a,replyUsersCount:n,className:"p-threads_view_header__participant_list"}))}}header_Header.defaultProps=Zj;var $j=Object(d.b)(function(e,t){var{channelId:a,threadTs:n}=t,r=Object(Kg.a)(e,a,n);if(!r)return null;var s=Object($g.T)(r),i=Object($g.U)(r);return r.replies?(s=Object(ed.a)(r.replies,"user"),r.user&&s.push(r.user),i=Object(Tj.a)(s).length):r.user&&s.push(r.user),{replyUsers:s,replyUsersCount:i}})(header_Header),eE={first:!1,last:!1,children:void 0};class threads_default_background_ThreadsDefaultBackground extends s.PureComponent{render(){var{first:e,last:t}=this.props,a=l()("p-threads_view__default_background",{"p-threads_view__default_background--first":e,"p-threads_view__default_background--last":t});return i.a.createElement("div",{className:a},this.props.children)}}threads_default_background_ThreadsDefaultBackground.defaultProps=eE;var tE=threads_default_background_ThreadsDefaultBackground,aE=new x.b("message_kit"),nE={className:void 0,theme:"light",clogLinkClick:r.a,clogThreadEvent:r.a,focused:!1,renderActionsOffscreen:!1,parentId:void 0};class root_message_RootMessage extends s.PureComponent{getMessageBody(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(oO.a,{msg:e}),"\xa0\xa0",i.a.createElement(cO.a,{msg:e,relative:!0,clickable:!0},aE.t("Open in channel")),i.a.createElement("br",null),i.a.createElement(lO.a,{msg:e}),i.a.createElement(dO.a,{msg:e,blocksContainerContext:nO.a.all_threads}),i.a.createElement(iO.b,{msg:e}),i.a.createElement(rO.a,{msg:e}),i.a.createElement(hO.a,{msg:e}))}getCompactMessageBody(e){return i.a.createElement(kO.a,null,i.a.createElement(oO.a,{msg:e,className:"p-threads_view_sender--compact"}),"\xa0\xa0",i.a.createElement(lO.a,{msg:e}),i.a.createElement(pO.a,{msg:e,blocksContainerContext:nO.a.all_threads}),i.a.createElement(iO.b,{msg:e}),i.a.createElement(rO.a,{msg:e}),i.a.createElement(hO.a,{msg:e}))}render(){var{msg:e,theme:t,clogLinkClick:a,focused:n,renderActionsOffscreen:r,clogThreadEvent:s,parentId:o}=this.props,c="dense"===t,d=l()("p-threads_view_root","c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className),p=c?i.a.createElement("div",{className:"p-threads_view_compact_timestamp"},i.a.createElement(cO.a,{msg:e,relative:!0,compact:!0,clickable:!0},aE.t("Open in channel"))):null,u=c?"above":"default",h=c?this.getCompactMessageBody(e):this.getMessageBody(e);return i.a.createElement(_O.a,{msg:e},i.a.createElement(tE,{first:!0},i.a.createElement(gO.a,{msg:e,className:d},i.a.createElement(fO.a,{hovered:n},i.a.createElement(vO.a,{msg:e,showComment:!0,showShare:!1,showJump:!0,messageContainerType:Of.I.THREADS_VIEW,renderOffscreen:r,position:u,clogLinkClick:a,clogThreadEvent:s,parentId:o},i.a.createElement(jO.a,{msg:e},i.a.createElement(OO.a,{light:i.a.createElement(sO.a,{msg:e}),compact:p},i.a.createElement(CO.a,{msg:e},i.a.createElement(EO.a,{msg:e},h)))))))))}}root_message_RootMessage.defaultProps=nE;var rE=new x.b("threads"),sE={className:void 0,highlight:void 0,clearHighlight:void 0,focused:!1,renderActionsOffscreen:!1,isNewReply:!1,theme:"light",clogThreadEvent:r.a,parentId:void 0};class reply_message_ReplyMessage extends s.PureComponent{getMessageBody(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(oO.a,{msg:e}),"\xa0\xa0",i.a.createElement(cO.a,{msg:e,relative:!0,clickable:!0},rE.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"})),i.a.createElement("br",null),i.a.createElement(PO,{msg:e},i.a.createElement(lO.a,{msg:e}),i.a.createElement(dO.a,{msg:e,blocksContainerContext:nO.a.all_threads}),i.a.createElement(iO.b,{msg:e}),i.a.createElement(rO.a,{msg:e})),i.a.createElement(hO.a,{msg:e}))}getCompactMessageBody(e){return i.a.createElement(kO.a,null,i.a.createElement(oO.a,{msg:e,className:"p-threads_view_sender--compact"}),"\xa0\xa0",i.a.createElement(PO,{msg:e},i.a.createElement(lO.a,{msg:e}),i.a.createElement(pO.a,{msg:e,blocksContainerContext:nO.a.all_threads}),i.a.createElement(iO.b,{msg:e}),i.a.createElement(rO.a,{msg:e})),i.a.createElement(hO.a,{msg:e}))}render(){var{msg:e,highlight:t,clearHighlight:a,focused:n,renderActionsOffscreen:r,isNewReply:s,theme:o,clogThreadEvent:c,parentId:d}=this.props,p="dense"===o,u=l()("c-message_kit__message","c-message_kit__thread_message","p-threads_view_reply",{"p-threads_view_reply--new_reply":s},this.props.className),h=p?i.a.createElement("div",{className:"p-threads_view_compact_timestamp"},i.a.createElement(cO.a,{msg:e,relative:!0,compact:!0,clickable:!0},rE.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"}))):null,m=p?"above":"default",b=p?this.getCompactMessageBody(e):this.getMessageBody(e);return i.a.createElement(_O.a,{msg:e},i.a.createElement(tE,null,i.a.createElement(gO.a,{msg:e,className:u,highlight:t,clearHighlight:a},i.a.createElement(fO.a,{hovered:n},i.a.createElement(vO.a,{msg:e,showComment:!1,showShare:!1,messageContainerType:Of.I.THREADS_VIEW,renderOffscreen:r,position:m,clogThreadEvent:c,parentId:d},i.a.createElement(jO.a,{msg:e,showBroadcast:!0},i.a.createElement(OO.a,{light:i.a.createElement(sO.a,{msg:e}),compact:h},i.a.createElement(EO.a,{msg:e},b))))))))}}reply_message_ReplyMessage.defaultProps=sE;var iE=a("8QLk"),oE=new x.b("threads"),cE={channelId:void 0,threadTs:void 0,minimumVisibleTs:void 0,rootMsg:void 0,messages:{},loadOlderReplies:r.a,theme:"light"};class load_older_button_LoadOlderButton extends s.Component{constructor(e){super(e),this.state={isLoading:!1},this.onClick=this.onClick.bind(this)}onClick(){var{channelId:e,threadTs:t,loadOlderReplies:a}=this.props;!this.state.isLoading&&a&&(this.setState(()=>({isLoading:!0})),a(e,t).then(()=>{this.setState(()=>({isLoading:!1}))}))}render(){var{minimumVisibleTs:e,rootMsg:t,messages:a,theme:n}=this.props,r="dense"===n,s=[],o=Object($g.Q)(t),c=Object($g.C)(t);Object(Cf.a)(a,(e,t)=>{!Object($g.bb)(e)&&!Object($g.sb)(e)&&t!==o&&t<=c&&s.push(t)});var d=Object($g.S)(t)-s.length,p=s.filter(t=>t<e),u=Object(iE.a)(d+p.length,0,Hj);if(!u)return null;var h=l()("p_threads_view_load_older_button",{"p_threads_view_load_older_button--with-gutter":r});return i.a.createElement(tE,null,i.a.createElement("div",{className:h},i.a.createElement(fe.a,{onClick:this.onClick},oE.t("Show {showPrevCount, plural, =1 {# more reply} other {# more replies}}",{showPrevCount:u})),this.state.isLoading?i.a.createElement(Oc.a,{size:"medium",className:"margin_left_25",inline:!0}):null))}}load_older_button_LoadOlderButton.defaultProps=cE;var lE=Object(d.b)(function(e,t){var{channelId:a,threadTs:n,messages:r}=t;return{rootMsg:Object(Kg.a)(e,a,n),messages:r}})(load_older_button_LoadOlderButton),dE=new x.b("threads"),pE={channelId:void 0,threadTs:void 0,maximumVisibleTs:"0000000000.000000",timestamps:[],loadNewerReplies:r.a,theme:"light"};class load_newer_button_LoadNewerButton extends s.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){var{channelId:e,threadTs:t,loadNewerReplies:a}=this.props;a(e,t)}render(){var{maximumVisibleTs:e,timestamps:t,theme:a}=this.props,n="dense"===a,r=t.filter(t=>t>e);if(!r.length)return null;var s=dE.t("{count, plural, =1 {# new reply} other {# new replies}}",{count:r.length}),o=l()("p_threads_view_load_newer_button",{"p_threads_view_load_newer_button--with-gutter":n});return i.a.createElement(tE,null,i.a.createElement("div",{className:o},i.a.createElement("span",{className:"p_threads_view_load_newer_button__blue_dot"},"\u2022"),i.a.createElement(fe.a,{onClick:this.onClick},s)))}}load_newer_button_LoadNewerButton.defaultProps=pE;var uE=Object(d.b)(function(e,t){var{channelId:a,threadTs:n}=t,r=Object(af.c)(a,n),{timestamps:s}=Object(Gg.h)(e,r)||{timestamps:[]};return{timestamps:s}})(load_newer_button_LoadNewerButton),hE=a("Rszm"),mE=a("WFc3"),bE=(a("t5GV"),new x.b("threads")),_E=40,gE=150,fE={channelType:"channel",prepareAndSendMessage:()=>Promise.resolve(),legacySendSlashCommand:r.a,editLastMessageInChannel:r.a,viewContext:void 0,useSendButton:!1,focusInputOnMount:!1,featureSonicInputs:!0,featureWysiwygComposer:!1,featureComposeFlowSend:!1,enableStickyComposer:!1,replyCount:0,clogThreadEvent:r.a,onFocus:r.a,onUpArrow:r.a,onDownArrowWhenEmpty:r.a};class input_container_InputContainer extends s.Component{constructor(e){super(e),this.inputRef=i.a.createRef(),this.reactionPopoverRef=i.a.createRef(),this.state={textyValue:"",hasFocus:!1,broadcast:!1,broadcastControlsHeight:0},Object(X.a)(this,["onBroadcastChange","onBroadcastControlsMouseDown","onTextChange","onFocus","onBlur","sendMessage","editLastMessage","onExpandAnimationTick","onExpandAnimationEnd","handleDraftRestore"]),this.getAdditionalDraftContent=Object(Yp.a)(e=>({broadcast:e}))}componentDidMount(){var{channelId:e,threadTs:t,viewContext:a}=this.props;if(!Object(kt.a)()&&this.inputRef.current){var n=Object(ap.c)(e,t);n&&this.inputRef.current.getWrappedInstance().value(n)}Object(zu.c)({viewContext:a,channelId:e,threadTs:t,functions:{clear:()=>{var e=this.getInputRef();e&&e.clear(),this.state.broadcast&&this.setState(()=>({broadcast:!1}))},isEmpty:()=>{var e=this.getInputRef();return e?e.isEmpty():null},prependContents:e=>{var t=this.getInputRef();t&&t.prependContents(e)},setContents:e=>{var t=this.getInputRef();t&&t.setContents(e)},getContents:()=>{var e=this.getInputRef();return e?e.getContents():null},setText:e=>{var t=this.getInputRef();t&&t.value(e)},getText:()=>{var e=this.getInputRef();return e?e.value():null},getDisplayValue:()=>{var e=this.getInputRef();return e?e.displayValue():null},setBroadcast:e=>this.setState(()=>({broadcast:e})),getBroadcast:()=>this.state.broadcast,focus:()=>{var e=this.getInputRef();e&&e.setCursorAtEnd()},clearHistory:()=>{var e=this.getInputRef();e&&e.clearHistory()},setCursorAtEnd:()=>{var e=this.getInputRef();e&&e.setCursorAtEnd()},getContentsForCurrentSelection:()=>{var e=this.getInputRef();if(!e)return null;var t=e.getSelection();return t?e.getContentsForRange(t.index,t.length):null},openReactionPopoverForLastMessage:()=>{this.reactionPopoverRef.current&&this.reactionPopoverRef.current.getWrappedInstance().startReactionPopoverForLastMessage()},isCursorAtBeginning:()=>{var e=this.getInputRef();if(!e)return!1;var t=e.getSelection();return t&&0===t.index},isCursorAtEnd:()=>{var e=this.getInputRef();if(!e)return!1;var t=e.getSelection();return t&&t.index===e.getLength()},setCursor:(e,t)=>{var a=this.getInputRef();a&&a.setCursor(e,t)},scrollIntoView:()=>{var e=this.getInputRef();e&&e.container.scrollIntoView()}}})}componentDidUpdate(e,t){var a=this.state.hasFocus||!!this.state.textyValue,n=t.hasFocus||!!t.textyValue;a&&!n?this.startExpandAnimation(0,_E):!a&&n&&this.startExpandAnimation(_E,0)}componentWillUnmount(){var{channelId:e,threadTs:t,viewContext:a}=this.props;Object(zu.d)({viewContext:a,channelId:e,threadTs:t}),this.expandAnimation&&this.expandAnimation.cancel()}onBroadcastChange(e){var t=e.target.checked;this.setState(()=>({broadcast:!!t})),this.state.textyValue||(this.inputRef.current.getWrappedInstance().focus(),this.preventUnfocus=!1)}onBroadcastControlsMouseDown(e){e.preventDefault(),this.state.textyValue||(this.preventUnfocus=!0)}onTextChange(e){this.setState(()=>({textyValue:e}));var{channelId:t,threadTs:a}=this.props;Object(kt.a)()||Object(ap.g)(t,a,e)}onFocus(){this.setState(()=>({hasFocus:!0}))}onBlur(){this.preventUnfocus?this.preventUnfocus=!1:this.setState(()=>({hasFocus:!1}))}onExpandAnimationTick(e){var{value:t,nextTick:a}=e;this.setState(()=>({broadcastControlsHeight:t}),a)}onExpandAnimationEnd(){this.expandAnimation=null}getInputRef(){return this.inputRef.current.getWrappedInstance?this.inputRef.current.getWrappedInstance():this.inputRef.current}handleDraftRestore(e){this.setState(t=>{var{broadcastControlsHeight:a}=t;return{broadcast:!!e.broadcast,broadcastControlsHeight:e.ops?_E:a}})}startExpandAnimation(e,t){var{broadcastControlsHeight:a}=this.state;a!==t&&(this.expandAnimation&&this.expandAnimation.cancel(),this.expandAnimation=Object(yh.a)({fromValue:e,toValue:t,duration:gE,easing:"easeInOutQuad",onTick:this.onExpandAnimationTick,onComplete:this.onExpandAnimationEnd}))}editLastMessage(e){var{keyboardShortcut:t,hasKeyboardFocus:a}=e;this.props.editLastMessageInChannel({channelId:this.props.channelId,threadTs:this.props.threadTs,viewContext:this.props.viewContext,keyboardShortcut:t,hasKeyboardFocus:a})}sendMessage(){var{channelId:e,threadTs:t,replyCount:a,clogThreadEvent:n,featureSonicInputs:r,featureWysiwygComposer:s}=this.props,{broadcast:i}=this.state;this.setState(()=>({broadcast:!1}));var o=this.getInputRef(),c=o.value();if(!r&&Object(mE.a)(c))return o.clear(),this.props.legacySendSlashCommand(e,t,c),Promise.resolve();if(!Object(pC.a)(o.getContents(),{featureWysiwygComposer:s}))return null;n({event:i?"THREADS_REPLY_BROADCAST_CLICKED":"THREADS_REPLY",metadata:{num_msg_in_thread:a+1}});var l=o.getContents();return o.clear(),o.focus(),this.props.prepareAndSendMessage({channelId:e,text:c,delta:s?new om.a(l.contents):null,replyToTs:t,shouldBroadcast:i}).then(()=>{var e=this.getInputRef();e&&e.clearHistory()}).catch(()=>{o.isEmpty()&&o.setContents(l)})}render(){var{channelId:e,threadTs:t,viewContext:a,channelType:n,useSendButton:r,focusInputOnMount:s,userCanPost:o,featureSonicInputs:c,onFocus:d,featureWysiwygComposer:p,featureComposeFlowSend:u,enableStickyComposer:h}=this.props,{broadcast:m,textyValue:b,hasFocus:_,broadcastControlsHeight:g}=this.state,f=!!b||_,v=l()("p-threads_footer__broadcast_controls",{"p-threads_footer__broadcast_controls--visible":f}),O={height:g},y="";y="mpim"===n?bE.t("Also send to the group"):"im"===n?bE.t("Also send as direct message"):bE.rt("Also send to <span></span>",null,()=>i.a.createElement(Ye.a,{channelId:e,inline:!0,className:"p-threads_footer__broadcast_channel"}));var C="";C="mpim"===n||"im"===n?bE.t("Choose this if you\u2019d like your reply to post in the main conversation, too"):bE.t("Choose this if you\u2019d like your reply to post in the channel, too");var j="p-thread_footer__broadcast_checkbox--".concat(Object(af.c)(e,t),"--").concat(a),E=l()("p-threads_footer__input",{"p-threads_footer__input--legacy":!c}),k=i.a.createElement(nC.c,{key:"wysiwyg_".concat(p),className:E,channelId:e,threadTs:t,viewContext:a,placeholder:bE.t("Reply\u2026",{fallbackHash:"fefcf598b8ea8332c1557b2ee245e83e5c8b0aef"}),enableEmojiButton:!0,enableComposerButton:p,enableSendButton:u&&r,isSendingDisabled:!Object(Qy.a)(b),enableBroadcastKeywords:!1,onTextChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,ref:this.inputRef,useLegacyCreate:!c,useLegacyDrafts:!Object(kt.a)(),maxLines:8,useSendButton:r,focusOnMount:s,maxLength:p?Of.C:Of.B,onDraftRestore:this.handleDraftRestore,additionalDraftContent:this.getAdditionalDraftContent(m),onUpArrow:this.props.onUpArrow,onDownArrowWhenEmpty:this.props.onDownArrowWhenEmpty});Object(kt.a)()&&(k=i.a.createElement(dC,{ref:this.reactionPopoverRef,channelId:e,threadTs:t},k));var S=l()("p-threads_footer__input_container",{"p-threads_footer__input_container--sticky_composer":p&&h});return i.a.createElement("div",{className:S,"data-qa":"reply_container",onFocus:d},k,i.a.createElement("div",{className:v,style:O},i.a.createElement("div",{className:"p-threads_footer__broadcast_controls_inner"},o&&i.a.createElement(i.a.Fragment,null,i.a.createElement(xs.a,{className:"p-threads_footer__broadcast_label",text:y,htmlFor:j,type:"inline",onMouseDown:this.onBroadcastControlsMouseDown},i.a.createElement(hE.a,{className:"p-threads_footer__broadcast_checkbox",id:j,checked:m,onChange:this.onBroadcastChange,"data-qa":"threads_footer_broadcast_checkbox",disabled:!f})),i.a.createElement(qe.c,{tip:C},i.a.createElement(We.b,{className:"p-threads_footer__info_tooltip",type:"question_circle",inline:!0,size:"inherit"}))),!u&&i.a.createElement(nC.b,{isDisabled:!Object(Qy.a)(b),className:"p-threads_footer__send_button",sendMessage:this.sendMessage,buttonSize:"small",tabIndex:0}))))}}input_container_InputContainer.defaultProps=fE;var vE={prepareAndSendMessage:function(){return Object(Xy.a)(...arguments)},editLastMessageInChannel:function(){return aC(...arguments)},legacySendSlashCommand:(e,t,a)=>(n,r)=>{var s=r(),i=Object(L.e)(s,e),o=Object(Kg.a)(s,e,t);i&&o&&Object(Ju.k)(i,a,o)}},OE=Object(d.b)(function(e,t){var{channelId:a,threadTs:n}=t,r=Object(L.e)(e,a),s=Object(Kg.a)(e,a,n);return{channelType:Object(B.u)(r),featureSonicInputs:Object(h.m)(e,"feature_sonic_inputs"),featureWysiwygComposer:Object(ga.a)(e),featureComposeFlowSend:Object(O.h)(e),enableStickyComposer:Object(Ke.k)(e,"msg_input_sticky_composer"),useSendButton:Object(Ke.k)(e,"msg_input_send_btn"),replyCount:Object($g.S)(s),userCanPost:Object(sn.p)(e,a)}},vE)(input_container_InputContainer),yE=(a("fxy3"),new x.b("threads")),CE={channel:void 0,unknown:!1,archived:!1,frozen:!1,imWithDeletedMember:!1,cannotReply:!1,nonMember:!1,canJoin:!1,focusInputOnMount:!0,joinConversationApi:r.a,featureAnnounceOnly:!1,viewContext:void 0,clogThreadEvent:r.a,onFocus:r.a,onUpArrow:r.a,onDownArrowWhenEmpty:r.a};class thread_footer_ThreadFooter extends s.Component{constructor(e){super(e),this.joinChannel=this.joinChannel.bind(this),this.onUpArrow=this.onUpArrow.bind(this),this.onDownArrowWhenEmpty=this.onDownArrowWhenEmpty.bind(this)}onUpArrow(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{channelId:t,threadTs:a}=this.props;this.props.onUpArrow({cmd:e,channelId:t,threadTs:a})}onDownArrowWhenEmpty(){var{channelId:e,threadTs:t}=this.props;this.props.onDownArrowWhenEmpty({channelId:e,threadTs:t})}joinChannel(){var{channelId:e}=this.props;this.props.joinConversationApi({channelId:e})}render(){var{channel:e,channelId:t,threadTs:a,unknown:n,archived:r,frozen:s,imWithDeletedMember:o,cannotReply:c,nonMember:l,canJoin:d,focusInputOnMount:p,featureAnnounceOnly:u,viewContext:h,clogThreadEvent:m,onFocus:b}=this.props;if(n||o&&!s)return null;if(r||s){var _="";return _=s?Object(B.hb)(e)?yE.t("Your two organizations are no longer connected."):Object(B.pb)(e)?yE.t("These organizations are no longer connected."):yE.t("This channel is no longer shared with your organization."):yE.t("You are viewing a thread from an archived channel"),i.a.createElement(_s.a,{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--archived"},_)}if(u&&c){var g=yE.t("Posting to this thread has been restricted to select members");return i.a.createElement(uj,{tooltip:g,featureAnnounceOnly:u})}return c?i.a.createElement(_s.a,{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--no_reply"},yE.rt("Your Workspace Owners have limited who can post to <ChannelName></ChannelName>",null,()=>i.a.createElement(Ye.a,{channelId:t,inline:!0,iconProps:{inherit:!0}}))):l?d?i.a.createElement("div",{className:"p-threads_footer_join_container"},i.a.createElement(jt.d,{type:"primary",size:"medium",onClick:this.joinChannel},yE.t("Join Channel")),!u&&i.a.createElement("p",{className:"p-threads_footer_join_label"},yE.rt("You\u2019ll need to join <ChannelName></ChannelName> to reply",null,()=>i.a.createElement(Ye.a,{channelId:t,inline:!0,iconProps:{inherit:!0}})))):null:i.a.createElement(OE,{channelId:t,threadTs:a,key:Object(af.c)(t,a),focusInputOnMount:p,viewContext:h,clogThreadEvent:m,onFocus:b,onUpArrow:this.onUpArrow,onDownArrowWhenEmpty:this.onDownArrowWhenEmpty})}}thread_footer_ThreadFooter.defaultProps=CE;var jE=Object(d.b)(function(e,t){var{channelId:a}=t,n=Object(L.e)(e,a);return{unknown:Object(B.Nb)(n),archived:Object(B.X)(n),frozen:Object(B.db)(n),imWithDeletedMember:Object(B.mb)(e,n),cannotReply:!Object(B.k)(e,n),nonMember:Object(B.Cb)(n)&&!Object(B.nb)(n),canJoin:Object(sn.f)(e,a),featureAnnounceOnly:Object(h.m)(e,"feature_announce_only"),channel:n}},{joinConversationApi:ns.joinConversationApi})(thread_footer_ThreadFooter);var EE=function(e){return i.a.createElement(tE,{last:!0},i.a.createElement("div",{className:"p-threads_view__footer"},i.a.createElement(jE,e)))},kE=a("81nI"),SE=new x.b("threads");var IE=function(){var e=Object(vn.a)(),t=Object(kE.b)({zdLocale:e,articleId:"115000769927"});return i.a.createElement("div",{className:"p-threads_view_empty"},i.a.createElement("div",{className:"p-threads_view_empty__contents"},i.a.createElement("div",{className:"p-threads_view_empty__emoji"},i.a.createElement(Vr.b,{text:":seedling:",emojiSize:Vr.a.LARGE})),i.a.createElement("p",{className:"p-threads_view_empty__header"},SE.t("Tend to your threads")),i.a.createElement("p",{className:"p-threads_view_empty__message"},SE.t("Threads you\u2019re involved in will be collected right here.")," ",i.a.createElement("br",null),i.a.createElement(fe.a,{href:t},SE.t("Learn about threads")))))},wE={className:void 0,label:void 0,showSpinner:!1};class divider_Divider extends s.PureComponent{render(){var{className:e,label:t,showSpinner:a}=this.props;return i.a.createElement("div",{className:e},i.a.createElement("div",{className:"p-threads_view__divider_line"}),i.a.createElement("div",{className:"p-threads_view__divider_label"},a&&i.a.createElement(Oc.a,{color:"blue",size:"medium",className:"p-threads_view__divider_spinner"}),t))}}divider_Divider.defaultProps=wE;var TE=new x.b("threads");class loading_more_threads_indicator_LoadingMoreThreadsIndicator extends s.PureComponent{render(){var{slowLoadingMore:e}=this.props;return i.a.createElement("div",{className:"p-threads_view__loading_more_threads"},e?TE.t("Still loading... sorry for the long wait!"):TE.t("Loading more messages...",{fallbackHash:"49f93cf64ea9ce3b4fee3f46ee40103e4840b333",fallbackHashNs:"unread"}))}}loading_more_threads_indicator_LoadingMoreThreadsIndicator.defaultProps={slowLoadingMore:!1};var NE=new x.b("threads"),PE={totalNewThreads:0,userHasUnreadThreads:!1,onClick:r.a};class new_threads_banner_NewThreadsBanner extends s.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){this.props.onClick()}render(){var{totalNewThreads:e,userHasUnreadThreads:t}=this.props;if(!e)return null;if(!t)return null;var a=NE.rt('{totalNewThreads,plural,=1{{totalNewThreads} new thread}other{{totalNewThreads} new threads}} <span className="p-new_threads_banner__cta">Click to refresh</span>',{totalNewThreads:e});return i.a.createElement(jt.c,{className:"p-new_threads_banner p-message_pane__banner",onClick:this.onClick},a)}}new_threads_banner_NewThreadsBanner.defaultProps=PE;var AE=Object(d.b)(function(e){return{totalNewThreads:Object(al.j)(e),userHasUnreadThreads:Object(h.m)(e,"feature_incremental_unread_counts")?Object(Jd.j)(e):Object(Xd.c)(e)}})(new_threads_banner_NewThreadsBanner);a("NPry");function ME(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function xE(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ME(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ME(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var RE="THREADS-VIEW",DE=new x.b("threads"),FE=Object(aO.b)(root_message_RootMessage),LE=Object(aO.b)(reply_message_ReplyMessage),UE={teamId:void 0,threads:void 0,threadsPresent:!1,hasMore:!0,refreshId:void 0,cursorTs:void 0,currentUserId:void 0,refreshThreads:r.a,loadMoreThreads:r.a,truncateThreads:r.a,logger:{error:r.a,info:r.a},requestReplies:r.a,markThread:r.a,markAllThreads:r.a,featureAriaApplicationMode:!1,theme:"light",makeMessageSummary:r.a,clearTotalNewThreads:r.a,clogger:{track:r.a},allThreadsRefreshCount:void 0,showThreadOrRefresh:r.a,focusRequestedThreadKey:void 0,setFocusRequestedThreadKey:r.a,totalUnreadReplies:void 0,featureOfflineMode:!1,isOffline:!1,userAttentionIsOnChat:!1,composerVisible:!1,hasReceivedThreadedMessage:!0,setUserPrefByApi:r.a,removeFromSectionNavigation:r.a,addToSectionNavigation:r.a,setInitialActiveSection:r.a,clientTheme:"light",featureMessageNavigationShortcuts:!1,impressionLoggingWebGroup:"control",focusRequestedReplyTs:null,setFocusRequestedReplyTs:r.a,featureContextualMessageShortcuts:!1,isIAPhase1Enabled:!1};class threads_view_ThreadsView extends s.Component{static getDerivedStateFromProps(e,t){var{threads:a,currentUserId:n,refreshId:r,logger:s}=e,{minimumVisibleTsByThread:i,maximumVisibleTsByThread:o,initialLastReadByThread:c,firstReadThreadKey:l,threadKeysOrdered:d}=t;if(r!==t.currentRefreshId&&(i={},o={},c={},l=null,d=[]),Object(bs.a)(d)){var p=function(e){var t=Object(Vd.a)(e,"subscribed");return Object(Xj.a)(t,e=>{var t=e.maxMarkableTs>e.lastRead;return"".concat(t?1:0,"-").concat(e.maxMarkableTs)}).reverse()}(a);if(d=Object(ed.a)(p,"threadKey"),t.currentRefreshId){var u=Object(ed.a)(a,"threadKey");Object(rf.a)(d,u)||s.error(RE,"Thread order different after refreshing: ".concat(d," - ").concat(u))}}if(!l){var h=Object(mp.a)(a,"threadKey");l=Object(hp.a)(d,e=>h[e].maxMarkableTs<=h[e].lastRead)}var m={};a.forEach(e=>{if(!i[e.threadKey]){var t=Kj(e);m[e.threadKey]=t}});var b={};a.forEach(e=>{var t=o[e.threadKey];if(t){e.messages[t]||(t=Object(qu.a)(e.timestamps,e=>e<t),b[e.threadKey]=t);var a=Object(Vd.a)(e.timestamps,e=>e>t),r=Object(Kd.a)(a,t=>{var a=e.messages[t];return a&&a.user===n}),s=Object(Kd.a)(a,t=>{var a=e.messages[t];return Object($g.bb)(a)});if(!r&&!s)return}var i=qj(e);b[e.threadKey]=i});var _={};return a.forEach(e=>{c[e.threadKey]||(_[e.threadKey]=e.lastRead)}),Object(bs.a)(m)&&Object(bs.a)(b)&&Object(bs.a)(_)&&r===t.currentRefreshId&&l===t.firstReadThreadKey&&(d===t.threadKeysOrdered||Object(rf.a)(d,t.threadKeysOrdered))?null:xE({},t,{currentRefreshId:r,firstReadThreadKey:l,threadKeysOrdered:d,minimumVisibleTsByThread:xE({},i,{},m),maximumVisibleTsByThread:xE({},o,{},b),initialLastReadByThread:xE({},c,{},_)})}constructor(e){super(e),Object(X.a)(this,["fetchAround","fetchPre","fetchPost","renderRow","loadOlderReplies","loadNewerReplies","tryAgain","getPropsForItem","isFocusableItem","onKeyDown","reloadThreads","clogThreadEvent","clogThreadCloseEvent","onFocusEnter","onFocusLeave","onItemTabWithin","shouldIgnoreArrowKeys","logError","logInfo","focus","onArrowKeyRight","onItemFocusEnter","onUpArrowInEmptyInput","onDownArrowInEmptyInput","onListScroll"]),this.state={minimumVisibleTsByThread:{},maximumVisibleTsByThread:{},initialLastReadByThread:{},currentRefreshId:void 0,firstReadThreadKey:void 0,threadKeysOrdered:[],isDoingGlobalRefresh:!0,slowLoadingMore:!1,errored:!1,hasKeyboardFocus:!1},this.pendingPromises=[],this.threadsEventSeqId=0,this.initializedTime=Date.now(),this.clogThreadCloseHasBeenCalled=!1,this.onListScrolledDebounce=Object(Df.a)(this.onListScroll,150),this.listRef=i.a.createRef(),this.attachMessageImpressionLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger)}componentDidMount(){this.logInfo("mounting"),this.clogThreadEvent({event:"THREADS_VIEW_OPEN",metadata:{is_iap1:this.props.isIAPhase1Enabled}}),this.loadThreads(),this.props.hasReceivedThreadedMessage||this.props.setUserPrefByApi({pref:"has_received_threaded_message",value:!0})}shouldComponentUpdate(e,t){if(!Object(Ti.a)(this.state,t))return!0;var a=this.props,{threads:n}=a,r=Object(ya.a)(a,["threads"]),{threads:s}=e,i=Object(ya.a)(e,["threads"]);if(!Object(Ti.a)(r,i))return!0;return!Object(Ti.a)(n,s,3)}componentDidUpdate(e){var t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(fa.a)(t)&&this.props.addToSectionNavigation(),Object(va.a)(t)&&this.props.removeFromSectionNavigation(),e.allThreadsRefreshCount<this.props.allThreadsRefreshCount&&!1===this.loading&&this.reloadThreads(),e.refreshId!==this.props.refreshId&&Object(ci.a)(this.nextScrollTop)&&this.listRef.current&&(this.listRef.current.scrollToOffset(this.nextScrollTop),this.nextScrollTop=null),e.teamId!==this.props.teamId&&this.attachMessageImpressionLogger(this.props.teamId,this.props.impressionLoggingWebGroup,this.props.clogger)}componentWillUnmount(){this.logInfo("unmounting"),this.clogThreadCloseEvent("OTHER"),this.pendingPromises.forEach(e=>e.cancel()),this.props.truncateThreads(),this.messageImpressionLogger.flushAllVisibleMessages()}onFocusEnter(e){this.setState(()=>({hasKeyboardFocus:e.isKeyboardFocus}),()=>{var{focusRequestedThreadKey:e,focusRequestedReplyTs:t}=this.props,a=this.listRef.current;if(a&&e){var n=a.getActiveItem(),r=this.threadKeyForListKey(n);e&&r===e&&(this.logInfo("Focused ".concat(e)),this.props.setFocusRequestedThreadKey(null),t&&this.props.setFocusRequestedReplyTs(null))}})}onFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}onItemFocusEnter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:t,relatedTarget:a}=e;if(this.props.featureMessageNavigationShortcuts&&t){var n=this.rows[this.keys.indexOf(t)];n&&"footer"===n.type&&a&&this.focusInput({channelId:n.channelId,threadTs:n.threadTs})}}onUpArrowInEmptyInput(){var{cmd:e=!1,channelId:t,threadTs:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.props.featureMessageNavigationShortcuts&&!e&&t&&a){var n=Object(af.c)(t,a);n&&this.focusItemAboveInput(n)}}onDownArrowInEmptyInput(){var{channelId:e,threadTs:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.props.featureMessageNavigationShortcuts&&e&&t){var a=Object(af.c)(e,t);a&&this.focusItemBelowInput(a)}}onKeyDown(e){if(!Object($u.a)(document.activeElement)&&Object(vC.a)(e)){var t=this.getKeyboardFocusedThreadKey();if(t){var{channelId:a,threadTs:n}=Object(af.a)(t);this.focusInput({channelId:a,threadTs:n})}}}onArrowKeyRight(){var e=this.getKeyboardFocusedThreadKey(),{channelId:t,threadTs:a}=Object(af.a)(e);t&&a&&(this.props.showThreadOrRefresh({channelId:t,threadTs:a,requestFocus:!0}),this.blur())}onItemTabWithin(){this.props.setInitialActiveSection()}onListScroll(){if(this.listRef&&this.listRef.current){var{start:e,end:t}=this.listRef.current.getVisibleRange(void 0,!0),a=this.rows.slice(e,t).filter(e=>["root","reply"].includes(e.type)).map(e=>({ts:"root"===e.type?e.threadTs:e.ts,channel:e.channelId}));try{this.messageImpressionLogger.setCurrentlyVisibleMessages(a)}catch(n){this.props.logger.error("threads_view_unable_log_message_impressions","Threads View unable to log message impressions",n)}}}getKeyboardFocusedThreadKey(){var e=this.listRef.current;if(!e)return null;var t=e.getInitialActiveItem();return this.threadKeyForListKey(t)}getPropsForItem(e){var{index:t}=e;if(this.props.makeMessageSummary){var a=this.rows[t];if(a&&a.type&&("root"===a.type||"reply"===a.type)){var n="root"===a.type?a.threadTs:a.ts;return{"aria-label":this.props.makeMessageSummary({channelId:a.channelId,ts:n,hasFocus:this.state.hasKeyboardFocus,day:{ts:n,isFirstDay:!1,isLastDay:!1},viewContext:Of.I.THREADS_VIEW})}}}}focusItemAboveInput(e){if(e){var t=this.keys[this.keys.indexOf("footer-".concat(e))-1];t&&this.listRef.current&&this.listRef.current.focusOnKey(t)}}focusItemBelowInput(e){if(e){var t=this.keys[this.keys.indexOf("footer-".concat(e))+1];t&&this.listRef.current&&this.listRef.current.focusOnKey(t)}}focusInput(){var{channelId:e,threadTs:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&t){var a=Object(zu.a)({viewContext:Of.I.THREADS_VIEW,channelId:e,threadTs:t});if(a){var n=()=>{a.focus()};Object(vn.c)()?setTimeout(n,0):n()}}}attachMessageImpressionLogger(e,t,a){if(this.messageImpressionLogger)try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(n){this.props.logger.error("threads_view_unable_log_message_impressions","Threads View unable to log message impressions",n)}this.messageImpressionLogger=new gy.a({teamId:e,experimentGroup:t,clogger:a,messageViewLocation:fy.a.ALL_THREADS})}shouldIgnoreArrowKeys(e){return!!Object($u.a)(e.target)||!this.state.hasKeyboardFocus}threadKeyForListKey(e){if(!e)return null;var t=this.keys.indexOf(e),a=this.rows[t];return a?a.threadKey:null}focus(){var e=this.listRef.current;e&&e.focus()}blur(){var e=this.listRef.current;e&&e.blur()}isFocusableItem(e){var{index:t}=e,a=this.rows[t];if(!a)return!1;var n=["root","reply","heading","load_older","load_newer"];return this.props.featureMessageNavigationShortcuts&&n.push("footer"),Object(qp.a)(n,a.type)}clogThreadCloseEvent(e){if(!this.clogThreadCloseHasBeenCalled){var t={view_session_elapsed_time:Date.now()-this.initializedTime,view_session_index:this.threadsEventSeqId,num_threads_loaded:this.props.threads.length,view_exit_event:e};this.clogThreadEvent({event:"THREADS_VIEW_CLOSE",metadata:t}),this.clogThreadCloseHasBeenCalled=!0}}incrementTrackingSeqId(){this.threadsEventSeqId+=1}clogThreadEvent(e){var{event:t,metadata:a}=e,{clogger:n}=this.props;n.track(t,xE({is_threads_view:1,is_flexpane:0,view_session_index:this.threadsEventSeqId},a)),this.incrementTrackingSeqId()}componentDidCatch(e){this.setState(()=>({errored:!0})),this.logError("Threads view componentDidCatch"),this.props.logger.error(RE,e,"threads_view_did_catch")}loadThreads(){var e=this;if(this.loading&&this.logError("Unexpectedly already loading"),this.props.refreshThreads){this.loading=!0;var t=this.props.refreshThreads({limit:Wj,refreshId:"threads-view-refresh-".concat(Date.now())}).then(function(){var{maxTs:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.listRef&&e.listRef.current&&(e.nextScrollTop=e.listRef.current.getScrollTop()),t?(e.logInfo("marking all: ".concat(t)),e.props.markAllThreads({maxTs:t})):e.logInfo("no threads to mark"),e.setState(()=>({isDoingGlobalRefresh:!1,errored:!1}))}).catch(e=>{this.setState(()=>({errored:!0})),this.logError("refreshThreads caught error"),this.props.logger.error(RE,e,"threads_view_loading_error")}).finally(()=>{this.loading=!1,Object(Hp.a)(this.pendingPromises,t)});this.pendingPromises.push(t)}}reloadThreads(){this.logInfo("Reloading threads"),this.setState(()=>({currentRefreshId:null}),()=>{this.listRef&&this.listRef.current&&this.listRef.current.scrollToOffset(0),this.props.clearTotalNewThreads(),this.loadThreads()})}tryAgain(){this.setState(e=>xE({},e,{errored:!1}),()=>this.loadThreads())}loadOlderReplies(e,t){var a=Object(af.c)(e,t),n=Object(hp.a)(this.props.threads,{threadKey:a});if(!n)return this.logError("Could not find ".concat(a," in loadOlderReplies")),Promise.resolve();this.logInfo("Loading older replies in ".concat(a));var r=n.timestamps,s=this.state.minimumVisibleTsByThread[n.threadKey],i=Object(Vd.a)(r,e=>e<s&&e!==t);if(i.length>=Hj)return this.setState(e=>xE({},e,{minimumVisibleTsByThread:xE({},e.minimumVisibleTsByThread,{[a]:Object(Ku.a)(Object(Pj.a)(i,Hj))})})),Promise.resolve();if(n.reachedStart)return this.setState(e=>xE({},e,{minimumVisibleTsByThread:xE({},e.minimumVisibleTsByThread,{[a]:"0000000000.000000"})})),Promise.resolve();var o=this.props.requestReplies({channelId:e,threadTs:t,latest:Object(Ku.a)(r),limit:Hj}).then(e=>{var{msgs:t}=e,n=Object(Ku.a)(Object(Pj.a)(t,Hj-i.length));this.setState(e=>xE({},e,{minimumVisibleTsByThread:xE({},e.minimumVisibleTsByThread,{[a]:n.ts})}))}).finally(()=>{Object(Hp.a)(this.pendingPromises,o)});return this.pendingPromises.push(o),o}loadNewerReplies(e,t){var a=Object(af.c)(e,t),n=Object(hp.a)(this.props.threads,{threadKey:a});n?this.setState(e=>xE({},e,{maximumVisibleTsByThread:xE({},e.maximumVisibleTsByThread,{[a]:qj(n)})}),()=>{this.logInfo("Marking ".concat(a," to ").concat(n.maxMarkableTs)),this.props.markThread({channelId:e,ts:t,lastRead:n.maxMarkableTs,reason:"mark-thread-as-read-from-threads-view"})}):this.logError("Could not find ".concat(a," in loadNewerReplies"))}fetchAround(){return!1}fetchPre(){return!1}fetchPost(){var e=this,{threads:t,hasMore:a,cursorTs:n}=this.props;if(this.loading||!a||!t||!t.length||!n)return!1;var r=setTimeout(()=>{this.setState(e=>xE({},e,{slowLoadingMore:!0}))},Of.X);this.loading=!0,this.logInfo("Loading more from ".concat(n));var s=this.props.loadMoreThreads({currentTs:n,limit:Wj}).then(function(){var{threads:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&e.setState(e=>{var t=Object(ed.a)(a,"threadKey");return{threadKeysOrdered:Object(Tj.a)([...e.threadKeysOrdered,...t])}})}).finally(()=>{var{slowLoadingMore:e}=this.state;this.loading=!1,Object(Hp.a)(this.pendingPromises,s),clearTimeout(r),e&&this.setState(e=>xE({},e,{slowLoadingMore:!1}))});return this.pendingPromises.push(s),s}determineFocusItemForRender(e,t){var{focusRequestedThreadKey:a,featureContextualMessageShortcuts:n,focusRequestedReplyTs:r}=this.props;if(a)return n&&r?"".concat(a,"-").concat(r):"root-".concat(a);var s=this.listRef.current;if(!s)return null;var i=s.getInitialActiveItem();if(!i)return null;if((Object(Nj.a)(i,"load_older-")||Object(Nj.a)(i,"load_newer-"))&&!Object(qp.a)(t,i)){var o=e.indexOf(i);if(-1===o)return null;var c=e[o-1],l=t.indexOf(c);if(-1===l)return null;var d=t[l+1];if(d)return d}return null}logInfo(e){this.props.logger.info(RE,e)}logError(e){this.props.logger.error(RE,e)}renderRow(e,t){var{hasFocus:a,itemId:n}=t,r=this.rows[e],{minimumVisibleTsByThread:s,maximumVisibleTsByThread:o,slowLoadingMore:c,hasKeyboardFocus:d}=this.state,{theme:p,featureOfflineMode:u,isOffline:h}=this.props,m=l()("p-threads_view__divider",{"p-threads_view__divider--first":0===e}),b=DE.t("Loading threads\u2026");switch(r.type){case"heading":return i.a.createElement($j,{channelId:r.channelId,threadTs:r.threadTs,firstItem:0===e,clogLinkClick:this.clogThreadCloseEvent});case"root":return i.a.createElement(FE,{channelId:r.channelId,ts:r.threadTs,theme:p,clogLinkClick:this.clogThreadCloseEvent,focused:a,renderActionsOffscreen:d,clogThreadEvent:this.clogThreadEvent,parentId:n});case"load_older":return i.a.createElement(lE,{messages:r.messages,channelId:r.channelId,threadTs:r.threadTs,minimumVisibleTs:s[r.threadKey],loadOlderReplies:this.loadOlderReplies,theme:p});case"load_newer":return i.a.createElement(uE,{channelId:r.channelId,threadTs:r.threadTs,maximumVisibleTs:o[r.threadKey],loadNewerReplies:this.loadNewerReplies,theme:p});case"reply":return i.a.createElement(LE,{channelId:r.channelId,ts:r.ts,minimumVisibleTs:s[r.threadKey],isNewReply:r.isNewReply,theme:p,focused:a,renderActionsOffscreen:d,clogThreadEvent:this.clogThreadEvent,parentId:n});case"divider":return i.a.createElement(divider_Divider,{className:m,label:DE.t("You\u2019re up to date")});case"loading":return i.a.createElement(divider_Divider,{className:m,label:b,showSpinner:!0});case"footer":return i.a.createElement(EE,{channelId:r.channelId,threadTs:r.threadTs,focusInputOnMount:!1,viewContext:Of.I.THREADS_VIEW,clogThreadEvent:this.clogThreadEvent,onUpArrow:this.onUpArrowInEmptyInput,onDownArrowWhenEmpty:this.onDownArrowInEmptyInput});case"loading_more_threads":return u&&h?i.a.createElement(Bj.a,{caption:DE.t("Go online to load more threads.")}):i.a.createElement(loading_more_threads_indicator_LoadingMoreThreadsIndicator,{slowLoadingMore:c});default:return this.logError("Unknown row type ".concat(r.type)),null}}renderTopBanners(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"p-threads_view__top_banners"},i.a.createElement(ny.a,null),i.a.createElement(yf.a,null,i.a.createElement(xy.a,null)),i.a.createElement(AE,{onClick:this.reloadThreads})),i.a.createElement(ay.a,null))}render(){var{threads:e,threadsPresent:t,currentUserId:a,hasMore:n,featureAriaApplicationMode:r,totalUnreadReplies:s,featureOfflineMode:o,isOffline:c}=this.props,{minimumVisibleTsByThread:l,maximumVisibleTsByThread:d,firstReadThreadKey:p,threadKeysOrdered:u,isDoingGlobalRefresh:h,initialLastReadByThread:m,errored:b}=this.state;if(b)return i.a.createElement(i.a.Fragment,null,this.renderTopBanners(),i.a.createElement("div",{className:"p-threads_view"},i.a.createElement(Uj.a,{tryAgain:this.tryAgain,"data-qa":"threads_view_error"},DE.t("Something\u2019s fishy! Slack can\u2019t seem to load your threads.")," ",i.a.createElement("br",null),DE.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,e=>{var{text:t}=e;return i.a.createElement(fe.a,{href:"https://slack.com/help/contact"},t)}))));if(o&&c&&!t)return i.a.createElement(i.a.Fragment,null,this.renderTopBanners(),i.a.createElement(zv.a,{caption:DE.t("Go online to get the latest threads.")}));if(!t)return i.a.createElement(i.a.Fragment,null,this.renderTopBanners(),i.a.createElement(Lj.a,{clientTheme:this.props.clientTheme}));var _=Object(mp.a)(e,"threadKey"),g=Object(M.a)(Object(ed.a)(u,e=>_[e])),f=this.keys,{rows:v,keys:O}=Qj({threads:g,minimumVisibleTsByThread:l,maximumVisibleTsByThread:d,firstReadThreadKey:p,isDoingGlobalRefresh:h,currentUserId:a,initialLastReadByThread:m,hasMore:n,logError:this.logError});this.rows=v,this.keys=O;var y=this.determineFocusItemForRender(f,this.keys);if(0===g.length)return i.a.createElement(i.a.Fragment,null,this.renderTopBanners(),i.a.createElement(IE,null));var C,j=this.keys.filter(e=>Object(Nj.a)(e,"footer-")),E=[{keys:["right"],handler:this.onArrowKeyRight,filter:this.shouldIgnoreArrowKeys}];C=DE.t("Threads"),Object(ci.a)(s)&&(C=DE.t("Threads, {totalUnreadReplies, plural, =0 {no new replies} =1 {# new reply} other {# new replies}}",{totalUnreadReplies:s}));var k=i.a.createElement(Dj.a,{id:Of.I.THREADS_VIEW},i.a.createElement("div",{className:"p-threads_view",onKeyDown:this.onKeyDown},this.renderTopBanners(),i.a.createElement(fh.a,null,e=>{var{width:t,height:a}=e;return i.a.createElement(Fj.a,{id:"threads_view",ref:this.listRef,width:t,height:a,keys:this.keys,rowRenderer:this.renderRow,isFocusableItem:this.isFocusableItem,loadAround:this.fetchAround,loadPre:this.fetchPre,loadPost:this.fetchPost,persistentKeys:j,getPropsForItem:this.getPropsForItem,"aria-label":C,useAriaApplicationMode:r,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onScroll:this.onListScrolledDebounce,onItemTabWithin:this.onItemTabWithin,onItemFocusEnter:this.onItemFocusEnter,keyCommands:E,activeItem:y})})));return Object(kt.a)()?k:i.a.createElement(ry.a,{component:this,order:.1},k)}}threads_view_ThreadsView.defaultProps=UE;var BE=Object(kt.a)()?Object(H.a)(threads_view_ThreadsView,"ThreadsView",{index:0}):threads_view_ThreadsView;var HE=Object(d.b)(function(e){var t=Object(Wa.a)({state:e}),a=Object(ne.a)({state:e}),n=Object(al.f)(e),r=Object(M.a)(Object(ed.a)(n,a=>{var{threadKey:n}=a,{channelId:r,threadTs:s}=Object(af.a)(n),i=Object(L.e)(e,r);if(!i||Object(Mc.e)(i))return t.warn("Skipping ".concat(n," in unknown or non-existent channel")),null;if(Object(B.Cb)(i)&&!Object(B.nb)(i))return t.warn("Skipping ".concat(n," in non-member public channel")),null;var{timestamps:o,reachedStart:c}=Object(Gg.f)(e,n)||{timestamps:[],reachedStart:!0},l={},d=Object(Kg.a)(e,r,s);if(!d)return t.warn("Skipping ".concat(n," with missing root message")),null;l[s]=d,o.forEach(t=>{var a=Object(Kg.a)(e,r,t);a&&(l[t]=a)});var p=Object(Aj.d)(e,{channelId:r,ts:s});return{threadKey:n,channelId:r,threadTs:s,reachedStart:c,timestamps:o,messages:l,lastRead:p.lastRead,subscribed:p.subscribed,maxMarkableTs:Rj(e,r,o)||s}}));return{logger:t,clogger:a,teamId:Object(u.b)(e),featureAriaApplicationMode:Object(h.m)(e,"feature_aria_application_mode"),threadsPresent:void 0!==n,threads:r,hasMore:Object(al.h)(e),refreshId:Object(al.i)(e),cursorTs:Object(al.g)(e),currentUserId:Object(h.d)(e),theme:Object(Vg.a)(e),allThreadsRefreshCount:Object(al.c)(e),focusRequestedThreadKey:Object(al.e)(e),totalUnreadReplies:Object(al.k)(e),featureOfflineMode:Object(h.m)(e,"feature_offline_mode"),isOffline:!Object(Re.c)(e),userAttentionIsOnChat:Object(St.e)(e),composerVisible:(Object(ga.a)(e)||"composer_toolbar"===Object(It.c)(e,"composer_toolbar"))&&Object(wt.b)(e),hasReceivedThreadedMessage:Object(Ke.k)(e,"has_received_threaded_message"),featureMessageNavigationShortcuts:Object(h.m)(e,"feature_message_navigation_shortcuts"),impressionLoggingWebGroup:Object(It.c)(e,"impression_logging_web"),focusRequestedReplyTs:Object(al.d)(e),featureContextualMessageShortcuts:Object(h.m)(e,"feature_contextual_message_shortcuts"),isIAPhase1Enabled:Object(Rr.d)(e)}},function(e){return{refreshThreads:function(){return e(Object(al.p)(...arguments))},loadMoreThreads:function(){return e(Object(al.n)(...arguments))},truncateThreads:function(){return e(Object(al.s)(...arguments))},requestReplies:function(){return e(Object(Yg.j)(...arguments))},clearTotalNewThreads:function(){return e(Object(al.a)(...arguments))},markThread:function(){return e(Object(Aj.e)(...arguments))},markAllThreads:function(){return e(Object(Mj.c)(...arguments))},makeMessageSummary:function(){return e(Object(Qg.a)(...arguments))},showThreadOrRefresh:function(){return e(Object(Yg.n)(...arguments))},setFocusRequestedThreadKey:function(){return e(Object(al.r)(...arguments))},setUserPrefByApi:function(){return e(Object(Ve.f)(...arguments))},setFocusRequestedReplyTs:function(){return e(Object(al.q)(...arguments))}}})(BE),WE=a("hqEo"),qE=a("O6kw"),GE=(a("PhaV"),new x.b("files"));class message_pane_drag_overlay_MessagePaneDragOverlay extends s.PureComponent{constructor(e){super(e),this.state={spriteLoaded:!1}}componentDidMount(){var e=new Image;this.spritePromise=new Promise(t=>{e.onload=(()=>{t()}),e.src=cdn_url+"/80588/img/dragdrop_sprites@2x.png"}).then(()=>{this.setState(()=>({spriteLoaded:!0}))})}componentWillUnmount(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}render(){var{featureAnnounceOnly:e,teamName:t,channelName:a,userCanPost:n,isImOrMpim:r,useNightIllustration:s}=this.props,{spriteLoaded:o}=this.state,c=!1;if(Object(Uh.a)(s))c=s;else{var d=(new Date).getHours();c=d>=20||d<8}var p=l()("p-message_pane_drag_overlay",{"p-message_pane_drag_overlay--night":!!c}),u=e&&!n?GE.t("Read only",{fallbackHash:"9b19a5a212deb29444cc1b420ad81703205848be"}):GE.rt("Upload to {teamName}",{teamName:t}),h="";h=e&&!n?GE.t("Only selected team members can post in this channel."):r?GE.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately with {userName}',{userName:a}):GE.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately to {channelName}',{channelName:a});var m="";return e&&!n?m=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),i.a.createElement(We.b,{type:"emoji-objects",className:"p-message_pane_drag_overlay__anim_readonly",inline:!0})):o&&(m=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),i.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_03"}),i.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_02"}),i.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_01"}))),i.a.createElement("div",{className:p},i.a.createElement("div",{className:"p-message_pane_drag_overlay__info"},i.a.createElement("div",{className:"p-message_pane_drag_overlay__anim"},m),i.a.createElement("div",{className:"p-message_pane_drag_overlay__title"},u),i.a.createElement("div",{className:"p-message_pane_drag_overlay__subtitle"},h)))}}message_pane_drag_overlay_MessagePaneDragOverlay.defaultProps={featureAnnounceOnly:!1,teamName:"",channelName:"",isImOrMpim:!1,useNightIllustration:void 0};var KE=Object(d.b)(function(e,t){var{channelId:a}=t,n=Object(L.e)(e,a),r=Object(Se.d)(e);return{featureAnnounceOnly:Object(h.m)(e,"feature_announce_only"),channelName:Object(B.w)(e,n,{imIncludeAtSign:!1}),teamName:Object(we.e)(r),userCanPost:Object(sn.p)(e,n.id),isImOrMpim:Object(B.hb)(n)||Object(B.pb)(n)}})(message_pane_drag_overlay_MessagePaneDragOverlay),VE=(a("uC0n"),new x.b("threads"));class drag_overlay_DragOverlay extends s.PureComponent{constructor(e){super(e),this.state={spriteLoaded:!1}}componentDidMount(){var e=new Image;this.spritePromise=new Promise(t=>{e.onload=(()=>{t()}),e.src=cdn_url+"/80588/img/dragdrop_threads_sprites@2x.png"}).then(()=>{this.setState(()=>({spriteLoaded:!0}))})}componentWillUnmount(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}render(){var{featureAnnounceOnly:e,userCanThread:t,useNightIllustration:a}=this.props,{spriteLoaded:n}=this.state,r=!1;if(Object(Uh.a)(a))r=a;else{var s=(new Date).getHours();r=s>=20||s<8}var o=l()("p-thread_drag_overlay",{"p-thread_drag_overlay--night":!!r}),c="";e&&!t?c=i.a.createElement("div",{className:"p-thread_drag_overlay__anim--readonly"},i.a.createElement("div",{className:"p-thread_drag_overlay__anim_circle"}),i.a.createElement(We.b,{type:"emoji-objects",className:"p-thread_drag_overlay__anim_readonly",inline:!0})):n&&(c=i.a.createElement("div",{className:"p-thread_drag_overlay__anim"},i.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_01"}),i.a.createElement("div",{className:"p-thread_drag_overlay__anim_card_01"}),i.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_02"})));var d=e&&!t?VE.t("Read only",{fallbackHash:"9b19a5a212deb29444cc1b420ad81703205848be"}):VE.t("Upload to thread"),p=VE.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately'),u=e&&!t?VE.t("Only selected team members can post in this thread."):p;return i.a.createElement("div",{className:o},i.a.createElement("div",{className:"p-thread_drag_overlay__info"},c,i.a.createElement("div",{className:"p-thread_drag_overlay__title"},d),i.a.createElement("div",{className:"p-thread_drag_overlay__subtitle"},u)))}}drag_overlay_DragOverlay.defaultProps={featureAnnounceOnly:!1,useNightIllustration:void 0};var zE=Object(d.b)(function(e){var t=Object(af.b)(e),{channelId:a}=Object(af.a)(t),n=Object(L.e)(e,a);return{featureAnnounceOnly:Object(h.m)(e,"feature_announce_only"),userCanThread:Object(B.k)(e,n)}})(drag_overlay_DragOverlay),YE=a("H2PH");a("Jm6a");function QE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function XE(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?QE(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):QE(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var JE={MESSAGE_PANE:"message_pane",THREAD:"thread"},ZE={children:void 0,threadTs:void 0,viewContext:void 0,className:void 0,elementProps:void 0,disableFileUploadsPref:void 0,featureAnnounceOnly:!1,userCanPostInChannel:!0,teamId:void 0,openFileUploadDialog:r.a,filterFilesForUpload:()=>Promise.resolve([])};class file_drag_drop_FileDragDrop extends s.Component{constructor(e){super(e),this.state={dragging:!1},this.activeElements=new Set,this.containerRef=i.a.createRef(),this.onDrop=this.onDrop.bind(this)}componentDidMount(){var e=this.containerRef.current;e.addEventListener("dragenter",e=>{this.shouldPreventDrag(e)||(e.preventDefault(),this.activeElements.add(e.target),1===this.activeElements.size&&this.setState(e=>XE({},e,{dragging:!0})))}),e.addEventListener("dragleave",e=>{e.preventDefault(),this.activeElements.delete(e.target),0===this.activeElements.size&&this.setState(e=>XE({},e,{dragging:!1}))}),e.addEventListener("dragover",e=>{this.shouldPreventDrag(e)||e.preventDefault()}),e.addEventListener("dragend",()=>{this.setState(e=>XE({},e,{dragging:!1})),this.activeElements.clear()}),e.addEventListener("drop",this.onDrop)}onDrop(e){var{channelId:t,threadTs:a,viewContext:n,teamId:r,userCanPostInChannel:s,featureAnnounceOnly:i}=this.props;if(e.preventDefault(),this.setState(e=>XE({},e,{dragging:!1})),this.activeElements.clear(),!i||s){var o=e.dataTransfer.files,c=Object(zu.a)({viewContext:n,channelId:t,threadTs:a}),l={fileUploadAction:ie.FileUploadAction.DRAG_AND_DROP,fileUploadSrc:ie.FileUploadSrc.LOCAL};e.shiftKey?this.props.filterFilesForUpload({selectedFiles:[...o],channelId:t,threadTs:a}).then(e=>{e&&e.length&&Object(YE.a)(r).uploadFiles({files:e,shareData:{channelId:t,threadTs:a,metadata:l}})}):this.props.openFileUploadDialog({files:[...o],threadTs:a,initialChannelId:t,inputProxy:c,metadata:l})}}shouldPreventDrag(e){var{disableFileUploadsPref:t,featureAnnounceOnly:a,userCanPostInChannel:n}=this.props,r=Object(ps.a)(e,"dataTransfer.types");return!Object(qp.a)(r.map(e=>e.toLowerCase()),"files")||("disable_all"===t||!a&&!n)}maybeRenderOverlay(){if(!this.state.dragging)return null;var{channelId:e}=this.props;switch(this.props.location){case JE.MESSAGE_PANE:return i.a.createElement(KE,{channelId:e});case JE.THREAD:return i.a.createElement(zE,null);default:return null}}render(){var{children:e,className:t,elementProps:a}=this.props;return i.a.createElement("div",Object(n.a)({className:l()("p-file_drag_drop__container",t),ref:this.containerRef},a),e,this.maybeRenderOverlay())}}file_drag_drop_FileDragDrop.defaultProps=ZE;var $E=Object(Dj.b)(Object(d.b)((e,t)=>{var{channelId:a}=t;return{featureAnnounceOnly:Object(h.m)(e,"feature_announce_only"),disableFileUploadsPref:Object(De.a)(e,"disable_file_uploads"),userCanPostInChannel:Object(sn.p)(e,a),teamId:Object(u.b)(e)}},e=>({openFileUploadDialog:function(){return e(Object(WE.a)(...arguments))},filterFilesForUpload:function(){return e(Object(qE.a)(...arguments))}}))(file_drag_drop_FileDragDrop)),ek={primaryView:void 0,userAttentionIsOnChat:!1,userCanPostInChannel:!1,teamId:void 0,disableFileUploadsPref:void 0};class clipboard_handler_ClipboardHandler extends s.Component{constructor(e){super(e),this.onPaste=this.onPaste.bind(this)}componentDidMount(){window.addEventListener("paste",this.onPaste)}componentWillUnmount(){window.removeEventListener("paste",this.onPaste)}onPaste(e){var{primaryView:t,userAttentionIsOnChat:a,userCanPostInChannel:n,teamId:r}=this.props;if(e&&e.clipboardData&&a){var s=this.getFiles(e);if(!Object(bs.a)(s)){var i,o,c,l,d;if(Object(fC.a)(document.activeElement,e=>{var t=e.classList.contains("p-threads_footer__input");return t&&(l=e.querySelector(".p-message_input_field").getAttribute("data-thread-key"),d=e.querySelector(".p-message_input_field").getAttribute("data-view-context")),t})&&l){var{channelId:p,threadTs:u}=Object(af.a)(l);i=p,o=u,c=Object(zu.a)({viewContext:d,channelId:p,threadTs:u})}else Object(wb.a)(t)&&n&&t&&(i=t,c=Object(zu.a)({viewContext:Of.I.MESSAGE_PANE,channelId:t}));if(i){var h={fileUploadAction:ie.FileUploadAction.COPY_AND_PASTE,fileUploadSrc:ie.FileUploadSrc.LOCAL};e.shiftKey?this.props.filterFilesForUpload({selectedFiles:[...s],channelId:i,threadTs:o}).then(e=>{e&&e.length&&Object(YE.a)(r).uploadFiles({files:e,shareData:{channelId:i,threadTs:o,metadata:h}})}):this.props.openFileUploadDialog({files:Array.from(s),initialChannelId:i,fromPaste:!0,threadTs:o,inputProxy:c,metadata:h}),e.preventDefault()}}}}getFiles(e){if("disable_all"===this.props.disableFileUploadsPref)return null;var t=Object(ed.a)(e.clipboardData.items,e=>e.type);return Object(Vd.a)(e.clipboardData.files,e=>{if(-1!==e.type.indexOf("image")){if(Object(ve.q)()&&Object(qp.a)(t,"text/plain")&&Object(qp.a)(t,"text/html")&&Object(qp.a)(t,"text/rtf"))return!1;if(Object(ve.E)()&&Object(qp.a)(t,"text/plain")&&Object(qp.a)(t,"text/html")&&Object(qp.a)(t,"image/png"))return!1}return!0})}render(){return null}}clipboard_handler_ClipboardHandler.defaultProps=ek;var tk={openFileUploadDialog:function(){return Object(WE.a)(...arguments)},filterFilesForUpload:function(){return Object(qE.a)(...arguments)}},ak=Object(d.b)(e=>{var t=Object(_.a)(e),a=Object(wb.a)(t)&&t;return{primaryView:Object(_.a)(e),userAttentionIsOnChat:Object(St.e)(e),userCanPostInChannel:a&&Object(sn.p)(e,a),disableFileUploadsPref:Object(De.a)(e,"disable_file_uploads"),teamId:Object(u.b)(e)}},tk)(clipboard_handler_ClipboardHandler),nk=a("MIIS"),rk=a("DBPf");class workspace_document_title_WorkspaceDocumentTitle extends s.PureComponent{static getDerivedStateFromProps(e,t){var a=!e.isWindowFocused&&(t.showHighlights||e.highlightCount>t.highlightCount),n=!e.isWindowFocused&&(t.showUnreads||e.unreadCount>t.unreadCount);return{highlightCount:e.highlightCount,unreadCount:e.unreadCount,showHighlights:a,showUnreads:n}}constructor(e){super(e),this.state={highlightCount:0,unreadCount:0,showHighlights:!1,showUnreads:!1}}render(){var{viewName:e,teamName:t}=this.props;if(!t)return null;var a=e?"".concat(e," | ").concat(t):t;return this.state.showHighlights?a="! ".concat(a):this.state.showUnreads&&(a="* ".concat(a)),i.a.createElement(rk.a,{title:a})}}workspace_document_title_WorkspaceDocumentTitle.defaultProps={viewName:"",teamName:""};var sk=workspace_document_title_WorkspaceDocumentTitle,ik=new x.b("view"),ok=new x.b("welcome_place");var ck=class connected_workspace_document_title_ConnectedWorkspaceDocumentTitle extends s.Component{constructor(e){super(e),this.renderWithState=this.renderWithState.bind(this)}renderWithState(e){var t=Object(_.a)(e),a=Object(L.e)(e,t),n=Object(Se.d)(e),r="";return t===dl.a.allUnreads||"Punreads"===t?r=ik.t("Unread Messages"):t===dl.a.allThreads?r=ik.t("Threads"):"Pwelcome"===t?r=ok.t("Get Started"):a&&(r=Object(B.w)(e,a,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1})),i.a.createElement(sk,{viewName:r,teamName:n&&n.name,isWindowFocused:!!Object(ep.g)(e),highlightCount:Object(Jd.f)(e),unreadCount:Object(Jd.g)(e)})}render(){return i.a.createElement(nk.a,{render:this.renderWithState,store:this.props.store})}},lk=a("2LCd"),dk=a("5iqv"),pk={id:o.default.string.isRequired,isEnabled:o.default.bool.isRequired},uk=e=>{var{id:t,isEnabled:a}=e;return t&&a?Object(Y.a)(t).view(t):null};uk.propTypes=pk;var hk=Object(d.b)(e=>{var t=Object(_.a)(e);return{id:t,isEnabled:Object(pl.e)(e,t)}})(uk),mk=a("qMFv"),bk={appProfile:void 0};function _k(e){var{appProfile:t}=e;if(!t)return null;var a=Object(Zo.b)(t.profile,512);return i.a.createElement("div",{className:"p-app_space_profile__side__avatar"},i.a.createElement("img",{className:"rounded",src:a,alt:"app avatar","data-qa":"app_profile_avatar"}))}_k.defaultProps=bk;var gk=_k,fk=new x.b("app_space"),vk={settingsUrl:void 0,homepageUrl:void 0,openAppManagementModal:r.a,appProfile:void 0,clogger:{track:r.a}};class app_space_profile_side_links_BaseAppSpaceProfileSideLinks extends s.PureComponent{constructor(e){super(e),this.onSettingsButtonClick=this.onSettingsButtonClick.bind(this),this.onWebsiteButtonClick=this.onWebsiteButtonClick.bind(this)}onWebsiteButtonClick(){this.props.clogger.track(ie.EventId.APP_CLICK_LINK_APP_HOMEPAGE_IN_APP_SPACE_ABOUT_TAB,{contexts:{ui_context:{step:ie.UiStep.APP_SPACE_ABOUT_TAB,action:ie.UiAction.CLICK,ui_element:ie.UiElement.LINK_APP_HOMEPAGE}}})}onSettingsButtonClick(e){var{appProfile:t}=this.props;this.props.clogger.track(ie.EventId.APP_CLICK_LINK_APP_SETTINGS_IN_APP_SPACE_ABOUT_TAB,{contexts:{ui_context:{step:ie.UiStep.APP_SPACE_ABOUT_TAB,action:ie.UiAction.CLICK,ui_element:ie.UiElement.LINK_APP_SETTINGS}}}),Object(Rc.I)(t)&&(e.preventDefault(),this.props.openAppManagementModal({serviceId:Object(Rc.o)(t),referringEventId:"APP_SPACE_ABOUT_OPEN"}))}renderSettingsButton(){var{showSettingsUrl:e,settingsUrl:t,appProfile:a}=this.props,n=fk.t("Settings",{fallbackHash:"c7f73bb54d928922c3838bb789ee9fb8a5b1eb37",fallbackHashNs:"app_profile"});return e?i.a.createElement(jt.d,{type:"outline",size:"medium",href:Object(Rc.I)(a)?void 0:t,"data-qa":"app_profile_settings_link",onClick:this.onSettingsButtonClick,className:"p-app_space_profile__side_link",title:n},n):null}renderWebsiteUrl(){var{homepageUrl:e,featureAppHomeUTA:t,settingsUrl:a}=this.props,n=fk.t("App Homepage",{fallbackHash:"ee2dbe71c27837ecd0a10d866992e1b3ff0d9b2f",fallbackHashNs:"app_profile"});if(e)return i.a.createElement(jt.d,{type:"outline",size:"medium",href:e,"data-qa":"app_profile_homepage_link",className:"p-app_space_profile__side_link",title:n,onClick:this.onWebsiteButtonClick},n);var r=t&&a;if(!e&&t&&r){var s=fk.t("View in App Directory",{fallbackHash:"89d6871b6c4992dedd85fc07bc53a44293a6a9dd",fallbackHashNs:"app_profile"});return i.a.createElement(jt.d,{type:"outline",size:"medium",href:r,"data-qa":"app_profile_homepage_link",className:"p-app_space_profile__side_link",title:s,onClick:this.onWebsiteButtonClick},s)}return null}render(){return i.a.createElement("div",{className:"p-app_space_profile__side__links"},this.renderSettingsButton(),this.renderWebsiteUrl())}}app_space_profile_side_links_BaseAppSpaceProfileSideLinks.defaultProps=vk;var Ok={openAppManagementModal:Fc.a},yk=Object(d.b)((e,t)=>{var{appProfile:a}=t;return{clogger:Object(ne.a)({state:e}),showSettingsUrl:Object(Rc.z)(e,a),settingsUrl:Object(Rc.y)(e,a),homepageUrl:Object(Rc.k)(a),featureAppHomeUTA:Object(C.b)(e)}},Ok)(app_space_profile_side_links_BaseAppSpaceProfileSideLinks),Ck=a("Owxj"),jk={formattedDescription:"",clogLinkClick:r.a},Ek=e=>{var{formattedDescription:t,clogLinkClick:a}=e,n=Object(s.useCallback)(e=>{e&&e.target&&e.target.href&&"A"===e.target.tagName&&(a(),e.preventDefault(),Object(Le.a)(e.target.href))},[a]);return t?i.a.createElement("div",{onClick:n,dangerouslySetInnerHTML:{__html:t}}):null};Ek.defaultProps=jk;var kk=Object(d.b)((e,t)=>{var{formattedDescription:a}=t;return{formattedDescription:Object(Ck.a)(e,{messageText:a,teamId:Object(u.b)(e)})}})(Ek),Sk=new x.b("app_space"),Ik={appProfile:void 0,truncatedDescription:"",formattedDescription:""};function wk(e){var{appProfile:t,formattedDescription:a,truncatedDescription:n}=e,[r,o]=Object(s.useState)(!1);if(!t||!a)return null;var c=Object(Rc.J)(t),l=i.a.createElement(kk,{formattedDescription:a});return i.a.createElement("section",null,i.a.createElement("div",{className:"p-app_space_profile__description","data-qa":"app_profile_desc"},c?l:i.a.createElement(s.Fragment,null,i.a.createElement("span",{className:"p-app_space_profile__description__collapsed"},r?l:i.a.createElement(Kr.a,{emoji:!0,text:n}))," ",i.a.createElement(fe.a,{onClick:()=>o(!r),"data-qa":"toggle-app-description-expansion"},r?Sk.t("Show less"):Sk.t("Read more")))))}wk.defaultProps=Ik;var Tk=Object(d.b)((e,t)=>{var{appProfile:a}=t;return{truncatedDescription:Object(Ck.a)(e,{messageText:Object(Rc.r)(a),teamId:Object(u.b)(e)}),formattedDescription:Object(Rc.h)(a)}})(Object(cb.a)(wk)),Nk=a("Pl1I"),Pk=new x.b("app_space");function Ak(e){var{isPublished:t,isDistributed:a,appType:n,installedUserId:r,installerIsYou:o,appName:c,appHomeTeamDisplayName:l,featureAddAppHomeTeamName:d}=e;return t?null:i.a.createElement("section",null,i.a.createElement("div",{className:"p-app_space_profile__disclaimer","data-qa":"app_space_profile_disclaimer"},a?i.a.createElement(s.Fragment,null,Pk.t("This app has not been reviewed or approved by Slack.")," ",i.a.createElement(fe.a,{href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team"},Pk.t("Learn more")),"."):i.a.createElement(Nk.a,{isError:!1,appType:n,memberId:r,installerIsYou:o,appName:c,appHomeTeamDisplayName:l,featureAddAppHomeTeamName:d})))}Ak.defaultProps={isPublished:!1,isDistributed:!1,appType:"",installedUserId:"",installerIsYou:!1,appName:"",appHomeTeamDisplayName:"",featureAddAppHomeTeamName:!1};var Mk=Object(d.b)(function(e,t){var{appProfile:a}=t;return{isPublished:Object(Rc.G)(a),isDistributed:Object(Rc.D)(a),appType:Object(Rc.s)(a),installedUserId:Object(Rc.v)(a),installerIsYou:Object(Rc.w)(e,a),appName:Object(Rc.m)(a),appHomeTeamDisplayName:Object(Rc.i)(e,a),featureAddAppHomeTeamName:Object(h.m)(e,"feature_add_app_home_team_name")}})(Ak),xk=new x.b("app_space");function Rk(e){var{appProfile:t,appName:a,isCustomIntegration:n,manageUrl:r}=e;return i.a.createElement("div",{className:"p-app_space_profile__info"},i.a.createElement("div",{className:"p-app_space_profile__side"},i.a.createElement(gk,{appProfile:t}),i.a.createElement(yk,{appProfile:t})),i.a.createElement("div",{className:"p-app_space_profile__about"},!!a&&i.a.createElement("h2",{className:"p-app_space__header","data-qa":"app_profile_name"},a),i.a.createElement(Tk,{appProfile:t}),i.a.createElement(Mk,{appProfile:t}),n&&i.a.createElement(jt.d,{type:"outline",href:r},xk.t("Manage",{note:"Manage permissions"}))))}Rk.defaultProps={appName:"",isCustomIntegration:!1,manageUrl:""};var Dk=Object(d.b)((e,t)=>{var{appProfile:a}=t;return{appName:Object(Rc.m)(a),isCustomIntegration:Object(Rc.C)(a),manageUrl:Object(Rc.x)(e,a)}})(Rk),Fk=a("4phY"),Lk=new x.b("app_space"),Uk={appName:"",appIcon:"",appScreenshots:[],youtubeUrl:"",featureReactFileViewer:!1,openFileViewer:r.a};class app_space_screenshots_AppSpaceScreenshots extends s.PureComponent{constructor(e){super(e),this.handleYoutubeClick=this.handleYoutubeClick.bind(this),this.handleImageClick=this.handleImageClick.bind(this)}handleYoutubeClick(){var{appName:e,appScreenshots:t,appIcon:a,youtubeUrl:n,featureReactFileViewer:r}=this.props;if(r)this.props.openFileViewer({title:e,youtube:{src:n}});else{var s=Object(Rc.A)(n);Object(Ju.g)({youtubeId:s,screenshots:t,appName:e,appIcon:a},0)}}handleImageClick(e){var{appName:t,appScreenshots:a,appIcon:n,youtubeUrl:r,featureReactFileViewer:s}=this.props;if(s)this.props.openFileViewer({title:t,image:{src:a[e].image_1600,altText:t,thumbnailUrl:a[e].image_440,height:400,width:600}});else{var i=Object(Rc.A)(r),o=r?e+1:e;Object(Ju.g)({youtubeId:i,screenshots:a,appName:t,appIcon:n},o)}}generateThumbnailUrl(e){var t=Object(Rc.A)(e);return""!==t&&"https://i.ytimg.com/vi/".concat(t,"/hqdefault.jpg")}renderYoutubeVideo(){var{youtubeUrl:e,appName:t}=this.props;if(!e)return null;var a=this.generateThumbnailUrl(e);if(!a)return null;var n=Lk.t("Video of {appName}",{note:"Alt text for a screenreader to play a video about an app",appName:t});return i.a.createElement(jt.c,{onClick:this.handleYoutubeClick,className:"p-app_space_profile__screenshots_item"},i.a.createElement("img",{src:a,alt:n,className:"p-app_space_profile__youtube_thumbnail"}),i.a.createElement("div",{className:"p-app_space_profile__youtube_play_button"},i.a.createElement(We.b,{type:"play",size:"inherit"})))}renderScreenshots(){var{appScreenshots:e,appName:t}=this.props;if(!e||!e.length)return null;var a=Lk.t("Screenshot of {appName}",{note:"Alt text for screenshots of an app in the full screen modal.",appName:t});return e.map((e,t)=>i.a.createElement(jt.c,{key:e.id,onClick:()=>this.handleImageClick(t),className:"p-app_space_profile__screenshots_item"},i.a.createElement("img",{src:e.image_440,alt:a})))}render(){var{youtubeUrl:e,appScreenshots:t}=this.props;return t&&t.length||e&&""!==e?i.a.createElement("div",{className:"p-app_space__screenshots"},i.a.createElement("h3",{className:"p-app_space__subheader"},Lk.t("Screenshots",{note:"Heading for screenshots of an app in the app profile."})),i.a.createElement("div",{className:"p-app_space_profile__screenshots","data-qa":"app_profile_screenshots"},this.renderYoutubeVideo(),this.renderScreenshots())):null}}app_space_screenshots_AppSpaceScreenshots.defaultProps=Uk,app_space_screenshots_AppSpaceScreenshots.displayName="AppSpaceScreenshots";var Bk=app_space_screenshots_AppSpaceScreenshots;var Hk=Object(d.b)(function(e,t){var{appProfile:a}=t;return{youtubeUrl:Object(Rc.t)(a),appScreenshots:Object(Rc.n)(a),appName:Object(Rc.m)(a),appIcon:Object(Zo.b)(a.profile,512),featureReactFileViewer:Object(h.m)(e,"feature_react_file_viewer")}},e=>({openFileViewer:t=>e(Object(Fk.a)(t))}))(Bk),Wk=a("KPXh"),qk=a("zwKj"),Gk=new x.b("app_space"),Kk={autoFillSlashCommand:r.a,clogger:{track:r.a},appId:"",botId:""};function Vk(e){var{autoFillSlashCommand:t,clogger:a,appId:n,botId:r,command:o}=e,c=Object(Wk.g)(o),l=Object(Wk.i)(o),d=Object(Wk.e)(o),p=Object(s.useCallback)(()=>{t({commandName:c}),a.track(ie.EventId.APP_SPACE_ABOUT_SLASH_COMMAND_CLICK,{app_id:n,bot_id:r,contexts:{core:{app_id:n,bot_id:r}}})},[t,c,a,n,r]);return i.a.createElement("div",{className:"p-app_space_profile__slash_command","data-qa":"app_space_profile_slash_command"},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("strong",null,c),i.a.createElement("span",null,l)),i.a.createElement("div",{className:"p-app_space_profile__slash_command_desc"},d)),i.a.createElement("div",null,i.a.createElement(jt.d,{type:"outline","data-qa":c,onClick:p},Gk.t("Start command"))))}Vk.defaultProps=Kk;var zk={autoFillSlashCommand:function(){return Object(qk.a)(...arguments)}},Yk=Object(d.b)(e=>({clogger:Object(ne.a)({state:e})}),zk)(Vk),Qk=new x.b("app_space");var Xk=i.a.memo(function(e){var{appProfile:t}=e,a=Object(Rc.c)(t),n=Object(Rc.l)(t),r=Object(Rc.o)(t);return a&&a.length?i.a.createElement(s.Fragment,null,i.a.createElement("h3",{className:"p-app_space__subheader"},i.a.createElement("span",null,Qk.t("Commands",{note:"Slash commands the app responds to"})),i.a.createElement("span",{className:"p-app_space__subheader__helper"},Qk.t("Use / to start commands in any conversation",{note:"How to use slash commands helper text"}))),i.a.createElement("div",{className:"p-app_space_profile__slash_commands"},i.a.createElement("section",null,a.map(e=>i.a.createElement(Yk,{key:e.name,command:e,appId:n,botId:r}))))):null}),Jk=(a("VTc2"),new x.b("app_space")),Zk={appProfile:void 0,clogger:{track:r.a},showSlashCommands:!1,forwardedRef:void 0,hasKeyboardFocus:!1,tabIndex:void 0,role:void 0,onFocus:r.a,onBlur:r.a};function $k(e){var{clogger:t,appProfile:a,showSlashCommands:n,forwardedRef:r,hasKeyboardFocus:o,onFocus:c,onBlur:d,tabIndex:p,role:u}=e,h=Object(Rc.l)(a),m=Object(Rc.o)(a),b=Object(s.useCallback)(()=>{t.track("APP_SPACE_ABOUT_OPEN",{app_id:h,bot_id:m,contexts:{core:{app_id:h,bot_id:m}}})},[t,h,m]),_=Object(s.useCallback)(()=>Object(mk.b)(a,m),[a,m]);if(Object(s.useEffect)(()=>{h&&m&&(_(),b())},[h,m,b,_]),!a||Object(Mc.e)(a))return null;var g=Object(Rc.m)(a)||"",f=Jk.t("About {appName}",{appName:g,fallbackHash:"f7f9e16e31e93cf02131b1e81ff028152a103a0a",fallbackHashNs:"app_card"}),v=l()("p-app_space_profile",{"p-app_space_profile--focus":o});return i.a.createElement("div",{"aria-label":f,ref:r,className:v,"data-qa":"app_space_profile",onFocus:c,onBlur:d,tabIndex:p,role:u},i.a.createElement(Dk,{appProfile:a}),i.a.createElement(Hk,{appProfile:a}),n?i.a.createElement(Xk,{appProfile:a}):null)}$k.defaultProps=Zk;var eS=Object(d.b)((e,t)=>{var a=Object(_.a)(e),n=Xc(e,a),r=Object(C.b)(e);if(!(Object(kt.a)()||n&&Object(I.p)(e)))return{};var s=t.utaApp&&r?t.appProfile:Object(Dc.b)(e,a);return{appProfile:s,showSlashCommands:Object(Rc.M)(e,s),clogger:Object(ne.a)({state:e})}})($k),tS=i.a.forwardRef((e,t)=>i.a.createElement(eS,Object(n.a)({},e,{forwardedRef:t}))),aS={appId:null,hasKeyboardFocus:!1,onFocus:r.a,onBlur:r.a};class app_space_wrapper_AppSpaceWrapper extends i.a.Component{constructor(e){super(e),Object(X.a)(this,["focus"]),this.appSpaceRef=i.a.createRef()}componentDidMount(){this.focus()}componentDidUpdate(e){e.appId!==this.props.appId&&this.focus()}focus(){this.appSpaceRef&&this.appSpaceRef.current&&this.appSpaceRef.current.focus()}render(){return i.a.createElement(tS,Object(n.a)({},this.props,{tabIndex:0,role:"tabPanel",ref:this.appSpaceRef}))}}app_space_wrapper_AppSpaceWrapper.defaultProps=aS;var nS=Object(se.a)(Object(H.a)(app_space_wrapper_AppSpaceWrapper,"AppSpaceWrapper",{index:5})),rS=Object(d.b)(e=>{var t=Object(_.a)(e),a=Object(Dc.b)(e,t);return{appId:Object(Mc.b)(a)?a.app_id:null}})(nS),sS=a("M4HD"),iS=a("pnoF"),oS=a("L4J1"),cS=Object(d.b)((e,t)=>{var{viewId:a}=t;return{view:Object(iS.a)(e,a)}})(oS.a),lS=a("jK/K"),dS=a("bbGV"),pS=new x.b("app_home"),uS=Object(d.b)(e=>({channelId:Object(_.a)(e)}),e=>({setTab:function(){return e(Object(F.a)(...arguments))}}))(e=>{var{app:t,setTab:a,channelId:n}=e,r=Object(s.useCallback)(()=>{a({tabId:j.b.ABOUT,channelId:n})},[n,a]),o=pS.rt("In the meantime, learn more about {app} and what it can do by visiting the About tab.",{app:Object(sS.b)(t)||i.a.createElement(dS.a,null)});return i.a.createElement("div",{className:"p-app_home__blockkit_loading_error"},i.a.createElement("h2",null,i.a.createElement(We.b,{type:"life-ring",inline:!0})," ",pS.t("This is still a work in progress")),i.a.createElement("p",{className:"p-app_home__blockkit_loading_error__content"},o),i.a.createElement(jt.d,{type:"primary",onClick:r},pS.t("Learn More")))}),hS=a("6BP1"),mS=new x.b("app_home"),bS=Object(d.b)(e=>({teamId:Object(u.b)(e)}))(e=>i.a.createElement("div",{className:"p-app_home__blockkit_loading_error","data-qa":"app_home_error_view"},i.a.createElement("h2",null,i.a.createElement(We.b,{type:"life-ring",inline:!0})," ",mS.t("Hmm \u2014 something went wrong")),i.a.createElement("p",null,mS.t("There was an error loading this content. Mind trying again?")),i.a.createElement(jt.d,{type:"primary",onClick:()=>Object(hS.e)(e.teamId,[e.viewId])},mS.t("Reload")))),_S=1e4,gS={botId:void 0,containerId:void 0,renderBlockWrapper:void 0,appHomeIsLoading:!0,viewId:null,viewIsLoading:!1,viewIsStale:!1,viewIsNonExistentOrUnknown:!1};class app_home_blockkit_AppHomeBlockkit extends i.a.PureComponent{constructor(e){super(e),this.updateTimedOut=this.updateTimedOut.bind(this),this.state={timedOut:!1}}componentDidMount(){this.updateTimer()}componentDidUpdate(){this.updateTimer()}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}updateTimedOut(){this.setState(()=>({timedOut:!0}));var{appId:e,botId:t,clogger:a}=this.props;a.track(ie.EventId.APP_HOME_LOAD_ERROR,{app_id:e,bot_id:t,timeout:_S})}updateTimer(){this.state.timedOut||(this.timer&&(clearTimeout(this.timer),delete this.timer),this.showLoadingSpinner()&&(this.timer=setTimeout(this.updateTimedOut,_S)))}showLoadingSpinner(){return this.props.appHomeIsLoading||this.props.viewIsLoading}renderLoadingSpinner(){return i.a.createElement(Oc.a,{className:"p-app_home_spinner",size:"jumbo","data-qa":"app_home_bk_spinner"})}render(){if(this.props.viewIsNonExistentOrUnknown)return this.state.timedOut?i.a.createElement(uS,{app:this.props.app}):this.showLoadingSpinner()?this.renderLoadingSpinner():i.a.createElement(bS,{viewId:this.props.viewId});var e=l()("p-app_home__blockkit_container",{"p-app_home__blockkit_container--stale":this.props.viewIsStale});return i.a.createElement("div",{className:"p-app_home__blockkit","data-qa":"app_home_bk_app_view"},i.a.createElement("div",{className:e},i.a.createElement(cS,{viewId:this.props.viewId,containerContext:nO.a.app_home,renderBlockWrapper:this.props.renderBlockWrapper,containerId:this.props.containerId})),this.props.viewIsStale&&this.renderLoadingSpinner())}}app_home_blockkit_AppHomeBlockkit.defaultProps=gS;var fS=Object(d.b)((e,t)=>{var{appId:a,viewId:n}=t,r=n&&Object(iS.a)(e,n);return{app:Object($o.e)(e,a),viewIsLoading:!n||Object(Mc.d)(r),viewIsStale:r&&Object(lS.a)(r),viewIsNonExistentOrUnknown:Object(Mc.c)(r)||Object(Mc.d)(r),clogger:Object(ne.a)({state:e})}})(app_home_blockkit_AppHomeBlockkit);a("Dcvo");function vS(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var OS=new x.b("app_home"),yS={botId:void 0,isLoading:void 0,viewId:void 0,appName:"",hasKeyboardFocus:!1,onFocus:r.a,onBlur:r.a};class app_home_BaseAppHome extends i.a.Component{constructor(e){super(e),Object(X.a)(this,["focus"]),this.appHomeRef=i.a.createRef()}componentDidMount(){this.focus()}componentDidUpdate(e){e.appId!==this.props.appId&&this.focus()}focus(){this.appHomeRef&&this.appHomeRef.current&&this.appHomeRef.current.focus()}render(){var{isLoading:e,appId:t,botId:a,viewId:n,appName:r,hasKeyboardFocus:s,onFocus:o,onBlur:c}=this.props,d=l()("p-app_home",{"p-app_home--focus":s}),p=OS.t("Home",{fallbackHash:"70f8bb9a8a5393ef080507a89e4b98d139000d65",fallbackHashNs:"app_space"}),u="".concat(r," ").concat(p);return i.a.createElement("div",{"aria-label":u,className:d,"data-qa":"app_home",onFocus:o,onBlur:c,tabIndex:0,ref:this.appHomeRef,role:"tabpanel"},i.a.createElement(fS,{appId:t,botId:a,viewId:n,appHomeIsLoading:e}))}}app_home_BaseAppHome.defaultProps=yS;var CS=Object(H.a)(app_home_BaseAppHome,"BaseAppHome",{index:5}),jS=Object(se.a)(Object(d.b)(e=>{var t=Object(U.a)(e),{appId:a}=t,n=Object($o.e)(e,a);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vS(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vS(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({appName:Object(sS.b)(n)||""},t)})(CS)),ES=(a("8ISr"),new x.b("app_settings"));class app_settings_BaseAppSettings extends i.a.Component{render(){return i.a.createElement("div",{className:"p-app_settings","data-qa":"app_settings"},i.a.createElement("div",{className:"p-app_settings_container"},i.a.createElement("h2",{className:"p-app_settings__sub_header"},ES.t("For App Permission and Authorizations, go to permissions")),i.a.createElement(jt.d,{type:"outline",size:"medium","data-qa":"app_settings_link",className:"p-app_settings_button",onClick:()=>window.open(this.props.settingsUrl,"_blank"),title:ES.t("Manage App Permissions")},ES.t("Manage App Permissions"))))}}app_settings_BaseAppSettings.defaultProps={settingsUrl:""};var kS=Object(d.b)(e=>{var t=Object(_.a)(e);return{appProfile:Object(Dc.b)(e,t),settingsUrl:Object(Rc.y)(e,Object(Dc.b)(e,t))}})(app_settings_BaseAppSettings),SS=a("Jufg"),IS=a("r6oD"),wS=a("PAPM"),TS=a("QEGb"),NS=a("pmOY"),PS=a("FdTv"),AS=a("qPro"),MS=a("02hs"),xS=a("O/xh"),RS=new x.b("channel_details"),DS="CHANNEL-MEMBERS",FS={className:"p-members_dialog__member_list_entity"};class members_dialog_MembersDialog extends s.Component{constructor(e){super(e),Object(X.a)(this,["fetchPost","renderRow","onSearchInputChange","onScroll"]),this.keys=null,this.loading=!1,this.state={memberIds:[],searchQuery:"",fullyLoaded:!1,marker:void 0,showScrollIndicatorTop:!1}}componentDidMount(){this.fetchMembers()}onSearchInputChange(e){var t=e.target.value;this.setState(()=>({searchQuery:t,memberIds:[],fullyLoaded:!1,marker:void 0}),()=>{this.fetchMembers()})}onScroll(e){var{scrollTop:t=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t>0;this.setState(()=>({showScrollIndicatorTop:a}))}getListKeys(){var{memberIds:e}=this.state;return e}fetchPost(){this.fetchMembers()}fetchMembers(){this.loading||this.state.fullyLoaded||(this.props.logger.info(DS,"Fetching more"),this.loading=!0,this.props.fetchAndUpsertMembersForChannel({channelId:this.props.channelId,count:50,marker:this.state.marker,searchQuery:this.state.searchQuery}).then(e=>{var{members:t,nextMarker:a}=e;this.setState(e=>({memberIds:Object(Ai.a)(e.memberIds,Object(ed.a)(t,"id")),fullyLoaded:!a,marker:a}),()=>{this.props.logger.info(DS,"Showing ".concat(this.state.memberIds.length," members")),this.state.fullyLoaded&&this.props.logger.info(DS,"Done fetching")})}).finally(()=>{this.loading=!1}))}renderSearch(){return this.props.featureM11nChannelDetails?i.a.createElement("div",{className:"p-channel_details__members_dialog__search"},i.a.createElement(AS.a,{value:this.state.searchQuery,onChange:this.onSearchInputChange,placeholder:RS.t("Search members"),icon:"search","data-qa":"members_dialog_filter",autoFocus:!0})):null}renderRow(e){var t=this.keys[e];return t?this.renderMember(t):null}renderMember(e){return i.a.createElement(xS.a,{userId:e,position:"left-bottom",includeRemoveFromChannelAction:!0},i.a.createElement(MS.a,{id:e,className:"p-members_dialog__member_list_btn","data-qa":"member_row_btn",listEntityProps:FS}))}renderMemberList(){this.keys=this.getListKeys();var{showScrollIndicatorTop:e}=this.state,t=l()("p-channel_details__members_dialog__list",{"p-channel_details__members_dialog__list--indicate-top":e});return i.a.createElement("div",{className:t},i.a.createElement(fh.a,null,e=>{var{width:t,height:a}=e;return i.a.createElement(Fj.a,{width:t,height:a,keys:this.keys,rowRenderer:this.renderRow,loadAround:this.fetchPost,loadPost:this.fetchPost,onScroll:this.onScroll})}))}render(){var{channelId:e}=this.props;if(!this.props.featureM11nChannelDetails)return null;var t=i.a.createElement(qf.a,{truncate:!0,channelId:e}),a=RS.rt("{member_count, number} members in {channel_name}",{member_count:this.props.memberCount,channel_name:t,fallbackHash:"7be769e7cb0f1f771e7a14fb7b1b6c90eaedf0cb",fallbackHashNs:"channel_pages"}),n="members_dialog__title-bar";return i.a.createElement(TS.a,{labelledby:n,centered:!0},i.a.createElement(NS.a,null,i.a.createElement(PS.a,{id:n,title:a,"data-qa":"dialog_header"})),i.a.createElement("div",{className:"p-channel_details__members_dialog"},this.renderSearch(),this.renderMemberList()))}}members_dialog_MembersDialog.defaultProps={featureM11nChannelDetails:!1};var LS=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(Wa.a)({state:e});return{channelId:a,featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details"),logger:n}},e=>({fetchAndUpsertMembersForChannel:function(){return e(Object(wS.a)(...arguments))}}))(members_dialog_MembersDialog),US=e=>{var{channelId:t,channel:a,memberList:n,memberCount:r,dispatch:o}=e;Object(s.useEffect)(()=>{o(Object(SS.b)({channelId:t,count:50}))},[t,o]);var c=Object(s.useCallback)(()=>{o(Object(Ua.e)({element:i.a.createElement(LS,{channelId:t,memberCount:r})}))},[o,r,t]);if(Object(B.hb)(a))return null;var l=Object(ci.a)(r)?Object(x.o)(r):"\u2013",d=n.slice(0,50).map(e=>i.a.createElement(IS.a,{id:e,className:"p-about_tab__members__member",showPresence:!1,showStatus:!1,useShortMode:!0})),p=Object(ci.a)(r)&&r>d.length&&i.a.createElement(Tf.b,{type:"outline",className:"p-about_tab__members__see_all",onClick:c},"See All ",l," Members");return i.a.createElement("div",{className:"p-about_tab__members"},i.a.createElement("div",{className:"p-about_tab__members__heading"},l>0?"".concat(l," Members"):"Members"),i.a.createElement("div",{className:"p-about_tab__members__list"},d),p)};US.defaultProps={channel:void 0,memberList:[],memberCount:void 0};var BS=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object($i.f)(e,a);return{channel:Object(L.e)(e,a),memberList:Object(SS.c)(e,a),memberCount:n&&n.counts&&n.counts.member_count}})(US),HS=e=>{var{channelId:t,channel:a,isCallButtonVisible:n,dispatch:r}=e,o=Object(s.useCallback)(()=>{if(Object(B.pb)(a)){var e=Object(B.H)(a);r(Object(dt.a)({memberIds:e,source:os.b.MPIM}))}else r(Object(cs.b)({channelId:t}))},[a,t,r]),c=Object(s.useCallback)(()=>{r(Object(rs.d)())},[r]),l=!Object(B.hb)(a)&&i.a.createElement(Tf.b,{type:"primary",className:"p-about_tab__actions__button",onClick:o},"Add People"),d=n&&i.a.createElement(Tf.b,{type:"outline",className:"p-about_tab__actions__button",onClick:c},"Start a Call");return i.a.createElement("div",{className:"p-about_tab__actions"},l,d)};HS.defaultProps={channel:void 0,isCallButtonVisible:!0};var WS=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a);return{channel:n,isCallButtonVisible:Object(Vs.f)(e,n)}})(HS),qS=e=>{var{channelId:t,channel:a,dispatch:n}=e,r=Object(s.useCallback)(()=>{n(Object(Ua.e)({element:i.a.createElement(zf,{channelId:t})}))},[n,t]);if(!a)return null;if(Object(B.hb)(a)||Object(B.pb)(a))return null;var o=Object(B.R)(a);return o&&o.value?i.a.createElement("div",{className:"p-about_tab__purpose"},i.a.createElement(Kr.a,{text:o.value,className:"p-about_tab__purpose__text"}),i.a.createElement(te.a,{onClick:r,className:"p-about_tab__purpose__edit"},"Edit")):i.a.createElement("div",{className:"p-about_tab__purpose"},i.a.createElement(te.a,{className:"p-about_tab__purpose__text",onClick:r},i.a.createElement(es.a,{type:"pencil",size:"inherit",inline:!0,className:"margin_right_50"}),"Add a channel description\u2026"))};qS.defaultProps={channel:void 0};var GS=Object(d.b)((e,t)=>{var{channelId:a}=t;return{channel:Object(L.e)(e,a)}})(qS),KS=a("BUzq"),VS=a("hQtm"),zS=e=>{var{pinnedItems:t}=e;if(!t||!t.length)return null;var a=t.map(e=>i.a.createElement("div",{className:"p-about_tab__pins__item",key:e.ts||e.id},i.a.createElement(VS.a,{pin:e})));return i.a.createElement("div",{className:"p-about_tab__pins"},i.a.createElement("h3",{className:"p-about_tab__pins__heading"},"Pinned"),a)};zS.defaultProps={pinnedItems:void 0};var YS=Object(d.b)((e,t)=>{var{channelId:a}=t;return{pinnedItems:Object(KS.h)(e,a)||[]}})(zS),QS=a("Yk7g"),XS=a("glRj"),JS=a("P9LH"),ZS=a("b7Ww"),$S=a("1Uzj"),eI=Object($S.a)(ZS.a);var tI=Object(d.b)(null,function(e){return{previewFile:function(){return e(Object(Ie.c)(...arguments))}}})(class shared_file_SharedFile extends s.PureComponent{constructor(e){super(e),this.showFile=this.showFile.bind(this)}showFile(){this.props.previewFile({fileId:this.props.fileId,flexOrigin:"details",flexOriginId:"shared_files"})}render(){var{fileId:e}=this.props;return i.a.createElement(eI,{className:"p-channel_details__shared_files__file",fileId:e,onClick:this.showFile})}}),aI=Object(d.b)()(e=>{var{channelId:t,dispatch:a}=e,[n,r]=Object(s.useState)([]);if(Object(s.useEffect)(()=>{a(Object(XS.h)({channelId:t,count:10,reason:"about-view-files"})).then(function(){var{files:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(QS.a)(Object(Xj.a)(e,e=>Object(JS.o)(e)));r(Object(ed.a)(t,"id"))})},[t,a]),!n.length)return null;var o=Object(ed.a)(n,e=>i.a.createElement(tI,{key:e,fileId:e}));return i.a.createElement("div",{className:"p-about_tab__files"},i.a.createElement("h3",{className:"p-about_tab__files__heading"},"Recently Shared Files"),o)}),nI=(a("U5UL"),e=>{var{channelId:t,isEnabled:a}=e;return a?i.a.createElement("div",{className:"p-about_tab"},i.a.createElement("div",{className:"p-about_tab__content"},i.a.createElement(GS,{channelId:t}),i.a.createElement(YS,{channelId:t}),i.a.createElement(aI,{channelId:t})),i.a.createElement("div",{className:"p-about_tab__sidebar"},i.a.createElement(WS,{channelId:t}),i.a.createElement(BS,{channelId:t}))):null});nI.defaultProps={isEnabled:!1};var rI=Object(d.b)(e=>({isEnabled:Object(P.e)(e)}))(nI),sI=(a("ZYU7"),e=>{var{tabId:t,embedTabs:a}=e,n=Object(P.b)(t);if(!1===n)return null;var r=a[n];if(!r)return null;switch(r.type){case"figma":return i.a.createElement("iframe",{title:r.label,className:"p-embed_tab__frame",src:"https://www.figma.com/embed?embed_host=astra&url=".concat(decodeURI(r.url))});default:return null}});sI.defaultProps={embedTabs:[]};var iI=Object(d.b)((e,t)=>{var{channelId:a}=t;return{embedTabs:Object(P.c)(e,a)}})(sI),oI=(a("y4ZY"),e=>{var{tab:t,primaryView:n,isAppIm:r}=e;if(!t)return null;if(t&&0===t.indexOf("embed"))return i.a.createElement(iI,{channelId:n,tabId:t});var o="".concat(n).concat(t),c=Object(s.lazy)(()=>Promise.all([a.e(108),a.e(107)]).then(a.bind(null,"MEK5")));switch(t){case"about":return r?i.a.createElement(cj.b,{subtype:"app_space",key:o,className:"p-tab_view__error_boundary"},i.a.createElement(rS,null)):i.a.createElement(rI,{channelId:n});case"space":return i.a.createElement(s.Suspense,{fallback:""},i.a.createElement(c,{channelId:n}));case"app":return i.a.createElement(cj.b,{subtype:"app_home",key:o,className:"p-tab_view__error_boundary"},i.a.createElement(jS,{channelId:n}));case"settings":return i.a.createElement(kS,null);default:return null}});oI.defaultProps={tab:void 0,isAppIm:!1};var cI=Object(d.b)(e=>{var t=Object(_.a)(e);return{tab:v(e),primaryView:t,isAppIm:Object(B.kb)(e,t)}})(oI),lI=a("iqWe"),dI=Object(d.b)(e=>({clogger:Object(ne.a)({state:e})}),e=>({getAppProfile:t=>e(Object(lI.b)({appId:t}))}))(e=>{var{appId:t,getAppProfile:a,clogger:n}=e,[r,o]=Object(s.useState)(null),c=Object(s.useCallback)(()=>{n.track(ie.EventId.APP_HOME_UTA_LOAD,{app_id:t})},[n,t]),l=Object(s.useCallback)(()=>{n.track(ie.EventId.APP_HOME_UTA_ERROR,{app_id:t})},[n,t]),d=Object(s.useCallback)(()=>{a(t).then(e=>o(Object(qk.c)(null,e,null))).catch(l)},[a,l,t]);return Object(s.useEffect)(()=>{c(),d()},[c,d]),r?i.a.createElement("div",{className:"p-app_home_uta"},i.a.createElement(tS,{appProfile:r,utaApp:!0})):i.a.createElement(Oc.a,{className:"p-app_home_spinner",size:"jumbo","data-qa":"app_home_uta_spinner"})}),pI=a("/xs0"),uI=Object(xt.b)("Jump the message pane to the end",e=>{e(Object(Bs.c)({ts:null}))});uI.meta={name:"triggerJumpToEnd",key:"actionsKeyCommandsTriggerJumpToEndTriggerJumpToEnd",description:"Jump the message pane to the end"};var hI=uI;var mI=Object(xt.b)("Handle key commands that trigger search",function(e,t){var{channelId:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(ns.markMostRecentMsgRead)({channelId:a,reason:"triggerMarkAsReadFromEscKey"})),e(Object(Bs.k)(null))});mI.meta={name:"triggerMarkAsReadFromEscKey",key:"actionsKeyCommandsTriggerMarkAsReadFromEscKeyTriggerMarkAsReadFromEscKey",description:"Handle key commands that trigger search"},mI.propTypes={channelId:o.default.string};var bI=mI;var _I=Object(xt.b)("Handle the escape key trigger",function(e,t){var{event:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.preventDefault();var n=t(),r=Object(_.a)(n);Object(wb.a)(r)&&(!function(e,t){var a=Object(I.j)(e),n=Object(Gg.h)(e,t,a);return n&&!n.reachedEnd}(n,r)?function(e,t){var a=Object(L.e)(e,t);return Object(B.Ob)(a)||Object(I.f)(e)}(n,r)&&e(bI({channelId:r})):e(hI()))});_I.meta={name:"handleEscape",key:"actionsKeyCommandsHandleEscapeHandleEscape",description:"Handle the escape key trigger"},_I.propTypes={event:o.default.object.isRequired};var gI=_I,fI=Object(xt.b)("Handle key commands that trigger search",function(e,t){var{event:a,keyCode:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.preventDefault(),n===vh.codes.f?e(Object(Tl.d)()):e(Object(Tl.e)())});fI.meta={name:"triggerSearchFromKeyCommand",key:"actionsKeyCommandsTriggerSearchFromKeyCommandTriggerSearchFromKeyCommand",description:"Handle key commands that trigger search"},fI.propTypes={event:o.default.object.isRequired,keyCode:o.default.number.isRequired};var vI=fI,OI=(a("0nyD"),6e3),yI=new x.b("unread");class undo_mark_all_as_read_toast_BaseUndoMarkAllAsReadToast extends s.PureComponent{constructor(e){super(e),this.onUndo=this.onUndo.bind(this),this.toastRef=i.a.createRef()}onUndo(){this.props.onUndo();var e=this.toastRef.current&&this.toastRef.current.getWrappedInstance&&this.toastRef.current.getWrappedInstance();e&&e.hideToast()}render(){var e=this.props,{onUndo:t,featureUndoMarkAllAsRead:a}=e,r=Object(ya.a)(e,["onUndo","featureUndoMarkAllAsRead"]);return a?i.a.createElement(Ga.b,Object(n.a)({ref:this.toastRef,fadeDelay:OI},r),i.a.createElement("span",{className:"p-undo_mark_all_as_read_toast__icon",role:"img","aria-label":yI.t("Ta-da")},"\ud83c\udf89"),i.a.createElement("span",{className:"p-undo_mark_all_as_read_toast__msg"},yI.t("You\u2019ve marked all unread messages and notifications as read.")," ",i.a.createElement(fe.a,{className:"p-undo_mark_all_as_read_toast__btn","data-qa":"undo_mark_all_as_read_btn",onClick:this.onUndo},yI.t("Undo")))):null}}undo_mark_all_as_read_toast_BaseUndoMarkAllAsReadToast.defaultProps={};var CI=Object(Go.a)("feature_undo_mark_all_as_read")(undo_mark_all_as_read_toast_BaseUndoMarkAllAsReadToast),jI=e=>Object(qa.c)({element:i.a.createElement(CI,e)}),EI=a("q4bl"),kI=Object(Tt.b)(e=>{var t={};return Object(L.g)(e).forEach(e=>{if(Object(B.U)(e)){var a=Object(B.C)(e);"0000000000.000000"!==a&&(t[e.id]=a)}}),t});kI.meta={name:"getLastReadMarkers",key:"actionsGetLastReadMarkersGetLastReadMarkers"},kI.propTypes={};var SI=kI,II=a("PJFs"),wI=a("zRJ2"),TI=Object(xt.b)("Mark all channels as read",(e,t)=>{var a=t(),n="treatment"===Object(It.c)(a,"undo_mark_all_as_read")&&SI(a),r=Object(II.a)(a);if(e(Object(EI.b)({markers:r,reason:"markAllAsRead"})),e(Object(Bs.k)(null)),e(Object(wI.b)()),n){e(jI({onUndo:()=>{e(Object(EI.b)({markers:n,reason:"undo-markAllAsRead"})),e(Object(wI.b)())}}))}});TI.meta={name:"markAllAsRead",key:"actionsMarkAllAsReadMarkAllAsRead",description:"Mark all channels as read"},TI.propTypes={};var NI=TI,PI=new x.b("client");var AI=Object(d.b)(e=>({featureUndoMarkAllAsRead:Object(h.m)(e,"feature_undo_mark_all_as_read")}),e=>({markAllAsRead:function(){return e(NI(...arguments))},setUserPrefByApi:function(){return e(Object(Ve.f)(...arguments))}}))(class shift_escape_confirm_dialog_ShiftEscapeConfirmDialog extends i.a.PureComponent{constructor(e){super(e),this.state={dontAskAgain:!1},this.onGo=this.onGo.bind(this),this.onCheckboxToggle=this.onCheckboxToggle.bind(this)}onCheckboxToggle(){this.setState(e=>({dontAskAgain:!e.dontAskAgain}))}onGo(){var{dontAskAgain:e}=this.state;e&&this.props.setUserPrefByApi({pref:"confirm_clear_all_unreads",value:!1}),this.props.markAllAsRead()}render(){var{featureUndoMarkAllAsRead:e}=this.props,{dontAskAgain:t}=this.state;return i.a.createElement(di.a,{"data-qa":"shift_escape_confirm_dialog",title:PI.t("Clear all unreads?"),goButtonText:PI.t("Yes, clear all!"),onGo:this.onGo,showCancelButton:!0},i.a.createElement("p",null,e?PI.rt("<b>Shift+esc</b> will clear all unread messages and notifications. Are you sure you want to do this?"):PI.rt("<b>Shift+esc</b> will clear all unread messages and notifications. Are you sure you want to do this? It\u2019s liberating\u2026 but there\u2019s no going back.")),i.a.createElement(xs.a,{htmlFor:"dont_ask_again",type:"inline",text:PI.t("Don\u2019t ask me again, please")},i.a.createElement(hE.a,{id:"dont_ask_again",checked:t,onChange:this.onCheckboxToggle})))}}),MI=Object(xt.b)("Opens the Channel Create modal in client",e=>e(Object(Ua.e)({element:i.a.createElement(AI,null)})));MI.meta={name:"openShiftEscapeConfirmDialog",key:"actionsOpenShiftEscapeConfirmDialogOpenShiftEscapeConfirmDialog",description:"Opens the Channel Create modal in client"},MI.propTypes={};var xI=MI,RI=Object(xt.b)("Handle key commands that trigger search",function(e,t){var{event:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!a.repeat){a.preventDefault();var n=t();if(Object(Ke.k)(n,"confirm_clear_all_unreads"))e(xI());else{var r="treatment"===Object(It.c)(n,"undo_mark_all_as_read")&&SI(n),s=Object(II.a)(n);if(e(Object(EI.b)({markers:s,reason:"triggerMarkAllAsReadFromEscKey"})),e(Object(Bs.k)(null)),e(Object(wI.b)()),r){e(jI({onUndo:()=>{e(Object(EI.b)({markers:r,reason:"undo-markAllAsRead"})),e(Object(wI.b)())}}))}}}});RI.meta={name:"triggerMarkAllAsReadFromEscKey",key:"actionsKeyCommandsTriggerMarkAllAsReadFromEscKeyTriggerMarkAllAsReadFromEscKey",description:"Handle key commands that trigger search"},RI.propTypes={event:o.default.object.isRequired};var DI=RI,FI=Object(xt.b)("Cmd+Shift+\\ handler",function(e,t){var a,n,{event:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=Object(Wa.a)({getState:t,label:"GLOBAL-RXN-SHORTCUT"}),i=Object(_.a)(t()),o=Of.I.MESSAGE_PANE,c=Object(wb.a)(i)?i:void 0,l=document.activeElement;if(Object($u.a)(l)&&(Object(fC.a)(document.activeElement,e=>{var t=e.classList.contains("p-threads_footer__input");return t&&(n=e.querySelector(".p-message_input_field").getAttribute("data-thread-key"),o=e.querySelector(".p-message_input_field").getAttribute("data-view-context")),t}),n)){var{channelId:d,threadTs:p}=Object(af.a)(n);c=d,a=p}var u=Object(zu.a)({viewContext:o,channelId:c,threadTs:a});u?u.openReactionPopoverForLastMessage?(u.openReactionPopoverForLastMessage(),r.preventDefault()):s.warn("No openReactionPopoverForLastMessage for ".concat(o,"-").concat(c,"-").concat(a)):s.info("No input for ".concat(o,"-").concat(c,"-").concat(a))});FI.meta={name:"triggerReactionPopoverForLastMessage",key:"actionsKeyCommandsTriggerReactionPopoverForLastMessageTriggerReactionPopoverForLastMessage",description:"Cmd+Shift+\\ handler"},FI.propTypes={event:o.default.object.isRequired};var LI=FI,UI=a("Ymwh"),BI=a("u4Vc"),HI=(a("PQ52"),new x.b("keyboard_shortcuts")),WI={keyboardLocale:null,telemeter:{count:r.a}};class keyboard_shortcut_prompt_KeyboardShortcutPrompt extends s.Component{constructor(e){super(e),this.closeAndShowKeyboardShortcuts=this.closeAndShowKeyboardShortcuts.bind(this)}componentDidMount(){this.props.telemeter.count("displayed_keyboard_shortcuts_coachmark")}componentWillUnmount(){this.props.telemeter.count("dismissed_keyboard_shortcuts_coachmark")}getSlashKey(){var{keyboardLocale:e}=this.props;return Object(x.j)("/",{kb:e})}closeAndShowKeyboardShortcuts(){this.props.telemeter.count("opened_keyboard_shortcuts_fp_from_coachmark"),this.props.showKeyboardShortcuts()}render(){var e=Object(ve.q)()?HI.t("Cmd"):HI.t("Ctrl"),t=this.getSlashKey(),a=HI.t("F6");return i.a.createElement(mc.a,{closeModal:this.props.closeModal},i.a.createElement(mc.h,null,i.a.createElement(mc.j,{title:HI.t("Navigating Slack with a keyboard?")})),i.a.createElement(mc.d,null,i.a.createElement(mc.e,null,i.a.createElement("p",null,HI.t("Shortcuts make it easier to get around in Slack. Here are a few you might find helpful:")),i.a.createElement("ul",{className:"p-keyboard_shortcut_prompt__list"},i.a.createElement("li",{className:"p-keyboard_shortcut_prompt__list_item"},i.a.createElement("span",{className:"c-keyboard_key"},i.a.createElement(We.b,{type:"arrow-up-medium"})),i.a.createElement("span",{className:"c-keyboard_key"},i.a.createElement(We.b,{type:"arrow-down-medium"}))," ",HI.t(" Move focus through messages")),i.a.createElement("li",{className:"p-keyboard_shortcut_prompt__list_item"},!Ia.W&&i.a.createElement("span",{className:"c-keyboard_key"},e),i.a.createElement("span",{className:"c-keyboard_key"},a)," ",HI.t(" Move focus to the next section")),i.a.createElement("li",{className:"p-keyboard_shortcut_prompt__list_item"},!Ia.W&&i.a.createElement("span",{className:"c-keyboard_key"},e),i.a.createElement("span",{className:"c-keyboard_key"},HI.t("K"))," ",HI.t("Quick Switcher"))),i.a.createElement("p",{className:"no_bottom_margin"},HI.rt('And that\u2019s just the beginning. To view the full list of keyboard shortcuts, just press <span class="c-keyboard_key">{cmd_key}</span> + <span class="c-keyboard_key">{slash_key}</span>',{cmd_key:e,slash_key:t})))),i.a.createElement(mc.f,null,i.a.createElement(mc.g,null,i.a.createElement(jt.d,{type:"outline",onClick:this.closeAndShowKeyboardShortcuts},HI.t("View More")),i.a.createElement(mc.c,{type:"primary"},HI.t("Got it")))))}}keyboard_shortcut_prompt_KeyboardShortcutPrompt.defaultProps=WI;var qI={closeModal:function(){return Object(Ua.a)(...arguments)},showKeyboardShortcuts:function(){return Object(Ie.h)(...arguments)}},GI=Object(d.b)(function(e){return{telemeter:Object(pr.c)({state:e})}},qI)(keyboard_shortcut_prompt_KeyboardShortcutPrompt),KI=Object(Td.a)(GI),VI=Object(xt.b)("Opens the keyboard shortcut prompt",e=>{e(Object(Ua.e)({element:i.a.createElement(KI,null),name:BI.a}))});VI.meta={name:"openKeyboardShortcutPrompt",key:"componentsKeyboardShortcutPromptKeyboardShortcutPromptOpenKeyboardShortcutPrompt",description:"Opens the keyboard shortcut prompt"};var zI,YI=0,QI=Object(xt.b)("After 5 consecutive tabs we show a dialog explaining kb shortcuts",e=>{if(4===YI)return e(VI()),e(Object(Ve.f)({pref:"seen_keyboard_shortcuts_coachmark",value:!0})),clearTimeout(zI),void(YI=0);YI+=1,clearTimeout(zI),zI=setTimeout(()=>{YI=0},1e3)});QI.meta={name:"triggerKeyboardShortcutsPrompt",key:"actionsKeyCommandsTriggerKeyboardShortcutsPromptTriggerKeyboardShortcutsPrompt",description:"After 5 consecutive tabs we show a dialog explaining kb shortcuts"};var XI=QI,JI=a("Nc5J"),ZI=a("0Mct"),$I=Object(xt.b)("Toggles Dark Mode; for development only.",(e,t)=>{var a=Object(A.c)(t());e(Object(A.f)("light"===a?"dark":"light"))});$I.meta={name:"triggerDarkModeToggle",key:"actionsKeyCommandsTriggerDarkModeToggleTriggerDarkModeToggle",description:"Toggles Dark Mode; for development only."};var ew=$I,tw=a("YYb+"),aw=a("ZpWa"),nw=[{keys:["mod+f","mod+g"],handler:vI,ignoreIf:e=>!Object(St.e)(e)||!Ia.W&&!Object(Ke.k)(e,"f_key_search")},{keys:["mod+k"],handler:eh.a,ignoreIf:e=>{var t=Object(tw.e)(e);return!Object(St.e)(e)&&!t||!Ia.W&&!Object(Ke.k)(e,"k_key_omnibox")}},{keys:["mod+t"],handler:eh.a,ignoreIf:e=>{var t=Object(tw.e)(e);return!Ia.W||!Object(St.e)(e)&&!t}},{keys:["mod+n"],handler:pt.a,ignoreIf:e=>!Object(O.g)(e)||(!Ia.W||!Object(St.e)(e))},{keys:["esc"],handler:gI,ignoreIf:e=>!Object(St.e)(e)},{keys:["shift+esc"],handler:DI,ignoreIf:e=>!Object(St.e)(e)},{keys:["mod+shift+y"],handler:e=>{var{event:t}=e;return t.preventDefault(),Object(ka.a)({fromKeyboardShortcut:!0})},ignoreIf:e=>!Object(St.e)(e)},{keys:["mod+,"],handler:()=>Object(Ze.a)({fromKeyboardShortcut:!0}),ignoreIf:e=>!Object(St.e)(e)||!(Object(ve.q)()&&Ia.W)},{keys:["mod+shift+k"],handler:e=>{var{event:t}=e;return t.preventDefault(),Object(dt.a)()},ignoreIf:e=>!Object(St.e)(e)},{keys:["mod+shift+l"],handler:()=>Object(eb.a)(),ignoreIf:e=>!Object(St.e)(e)},{keys:["mod+."],handler:Ie.s,ignoreIf:e=>!Object(St.e)(e)},{keys:["mod+/"],handler:e=>{var{event:t,isScreenReaderEnabled:a}=e;t.preventDefault();var n=a?"keyboard_shortcuts":null;return Object(Ie.t)({focusKey:n})},ignoreIf:e=>!Object(St.e)(e)&&!Object(St.d)(e)},{keys:["mod+shift+a"],handler:e=>{var{event:t}=e;return t.preventDefault(),Object(JI.a)()},ignoreIf:e=>!Object(St.e)(e)||!Object(Ke.k)(e,"enable_unread_view")},{keys:["mod+shift+t"],handler:ZI.a,ignoreIf:e=>!Object(St.e)(e)||!Ia.W},{keys:["mod+shift+m"],handler:e=>{var{event:t,isScreenReaderEnabled:a}=e;t.preventDefault();var n=a?"activity":null;return Object(Ie.q)({focusKey:n})},ignoreIf:e=>!(!Fa.a.chrome||Ia.W)||!Object(St.e)(e)},{keys:["mod+shift+s"],handler:e=>{var{isScreenReaderEnabled:t}=e,a=t?"stars":null;return Object(Ie.v)({focusKey:a})},ignoreIf:e=>Fa.a.firefox||!Object(St.e)(e)},{keys:["mod+shift+e"],handler:Ie.u,ignoreIf:e=>Fa.a.firefox||!Object(St.e)(e)},{keys:["mod+shift+i"],handler:e=>{var{isScreenReaderEnabled:t}=e,a=t?"info":null;return Object(Ie.r)({focusKey:a})},ignoreIf:e=>!Ia.W||!Object(St.e)(e)||!Object(wb.a)(Object(_.a)(e))},{keys:["mod+shift+\\"],handler:LI,ignoreIf:e=>!Object(St.e)(e)},{keys:["command+left"],handler:e=>{var{event:t}=e;return Object(UI.a)({event:t,fromKeyboardShortcut:!0})},ignoreIf:e=>!Object(ve.q)()||!Object(St.e)(e)||Object($u.a)(document.activeElement)},{keys:["command+right"],handler:e=>{var{event:t}=e;return Object(UI.b)({event:t,fromKeyboardShortcut:!0})},ignoreIf:e=>!Object(ve.q)()||!Object(St.e)(e)||Object($u.a)(document.activeElement)},{keys:["command+["],handler:e=>{var{event:t}=e;return Object(UI.a)({event:t,fromKeyboardShortcut:!0})},ignoreIf:e=>!Object(ip.a)(e)||!Object(ve.q)()},{keys:["command+]"],handler:e=>{var{event:t}=e;return Object(UI.b)({event:t,fromKeyboardShortcut:!0})},ignoreIf:e=>!Object(ip.a)(e)||!Object(ve.q)()},{keys:["alt+left"],handler:e=>{var{event:t}=e;return Object(UI.a)({event:t,fromKeyboardShortcut:!0})},ignoreIf:e=>!Object(ip.a)(e)||Object(ve.q)()},{keys:["alt+right"],handler:e=>{var{event:t}=e;return Object(UI.b)({event:t,fromKeyboardShortcut:!0})},ignoreIf:e=>!Object(ip.a)(e)||Object(ve.q)()},{keys:["tab"],handler:XI,ignoreIf:e=>!Object(St.e)(e)||Object($u.a)(document.activeElement)||Object(Ke.k)(e,"seen_keyboard_shortcuts_coachmark")},{keys:["command+option+shift+d"],handler:ew,ignoreIf:e=>!(Object(aw.a)(e)&&(ve.l||ve.o))},{keys:["mod+shift+r"],handler:()=>Object(py.a)({reason:"cmd_shift_r",reasonKey:"cmdshiftr"}),ignoreIf:e=>!(Ia.W&&Object(h.m)(e,"feature_sonic_hard_reload"))}],rw=a("KU1P"),sw=a("mqWI");var iw=Object(d.b)(function(e){return{logger:Object(Wa.a)({state:e})}})(function(e){var{children:t,logger:a}=e;return i.a.createElement(sw.a.Provider,{value:a},t)}),ow=a("5APj");var cw=function(e){var{children:t}=e;return i.a.createElement(ow.a,null,i.a.createElement(rw.a,null,i.a.createElement(iw,null,t)))},lw=a("JvzI"),dw=(a("8IIt"),Object(d.b)(e=>({channelId:Object(_.a)(e)}))(e=>{var{channelId:t}=e;return i.a.createElement("div",{className:"p-channel_tabs__header"},i.a.createElement(si,{channelId:t}),i.a.createElement("div",{className:"p-channel_tabs__header__buttons"},i.a.createElement(wc,{channelId:t}),i.a.createElement(Gc,{channelId:t,tooltipPosition:"bottom-right"})))})),pw=a("/K2e"),uw=a("Kdk+"),hw=a("sIET"),mw={timestamp:void 0,url:"",titleUrl:"",title:"",isTitleHtml:!1,isDescriptionHtml:!1,description:"",isLast:!1,isNew:!1,latestNewsTimestamp:void 0,clogger:void 0},bw=e=>{var{url:t,isTitleHtml:a,title:n,onClick:r}=e,s=a?i.a.createElement("span",{dangerouslySetInnerHTML:{__html:n}}):n;return i.a.createElement(wh.a,{href:t,target:"new",onClick:r,"data-qa":"whats_new_title_link"},s)};class update_Update extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["handleDescriptionLinkClick","handleTitleClick","handleMoreLinkClick"])}clogAction(e,t){var{target:a}=e;if(a&&a.href){var{clogger:n,latestNewsTimestamp:r}=this.props;n.track(ie.EventId.WHATSNEW_ACTION,{action:"view_update",trigger:t,page_url:a.href,step:String(r)})}}handleDescriptionLinkClick(e){this.clogAction(e,"description_link")}handleTitleClick(e){this.clogAction(e,"heading_link")}handleMoreLinkClick(e){this.clogAction(e,"read_more_link")}render(){var{timestamp:e,url:t,title:a,titleUrl:n,isDescriptionHtml:r,isTitleHtml:s,description:o,isLast:c,isNew:d}=this.props,p=Object(Bf.c)(e,"{date}"),u=t?bw({url:t,isTitleHtml:s,title:a,onClick:this.handleTitleClick}):a,h=r?i.a.createElement("div",{role:"presentation",dangerouslySetInnerHTML:{__html:o},onClick:this.handleDescriptionLinkClick}):o,m=l()("p-whats_new__item",{"p-whats_new__item_last":c});return i.a.createElement("div",{className:m,"data-qa":"whats_new_item_".concat(e)},i.a.createElement("h5",{className:"p-whats_new__date"},p),i.a.createElement("h3",{className:"p-whats_new__title"},d&&i.a.createElement(We.b,{type:"presence-online",size:"inherit",className:"p-whats_new__blue_dot"}),u),h,t&&n&&i.a.createElement(wh.a,{className:"p-whats_new__link",href:t,onClick:this.handleMoreLinkClick,target:"new","data-qa":"whats_new_more_link"},n,i.a.createElement(We.b,{type:"chevron-medium-right",className:"align_bottom",size:"inherit"})))}}update_Update.defaultProps=mw,update_Update.displayName="Update";var _w=Object(d.b)(e=>({clogger:Object(ne.a)({state:e}),latestNewsTimestamp:Object(jl.d)(e)}))(update_Update),gw=new x.b("whats_new"),fw={items:[],onItemTabWithin:r.a,whatsNewRead:-1,focusKey:null,setFocusKey:r.a};class updates_list_UpdatesList extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["renderItem","focus"]),this.list=i.a.createRef()}componentDidMount(){var{focusKey:e,items:t}=this.props;"whats_new"===e&&t.length&&this.setFocusOnFirstItem()}componentDidUpdate(e){var{focusKey:t}=e,{focusKey:a,items:n}=this.props;"whats_new"===a&&a!==t&&n.length&&this.setFocusOnFirstItem()}setFocusOnFirstItem(){var e=this.getItemKeys()[0],t=this.list.current;t&&t.focusOnKey(e),this.props.setFocusKey(null)}getItemKeys(){return this.props.items.map((e,t)=>"update-".concat(t))}focus(){var e=this.list.current;e&&e.focus()}renderItem(e){var{items:t,whatsNewRead:a}=this.props,n=t[e],r=e===t.length-1,s=-1!==a&&a<n.timestamp;return i.a.createElement(_w,{isLast:r,timestamp:n.timestamp,url:n.url,titleUrl:n.url_title,title:n.title,isTitleHtml:n.html_title,isDescriptionHtml:n.html,description:n.description,isNew:s})}render(){var e=this.getItemKeys(),t=gw.t("What\u2019s New");return i.a.createElement(fh.a,null,a=>{var{width:n,height:r}=a;return i.a.createElement(Eh.a,{ref:this.list,width:n,height:r,keys:e,rowRenderer:this.renderItem,animateOnScroll:!1,"aria-label":t,onItemTabWithin:this.props.onItemTabWithin})})}}updates_list_UpdatesList.defaultProps=fw;var vw=Object(d.b)(e=>({focusKey:Object(uw.a)(e)}),e=>({setFocusKey:t=>e(Object(hw.a)(t))}),null,{withRef:!0})(updates_list_UpdatesList),Ow=new x.b("whats_new");class notify_checkbox_NotifyCheckbox extends s.PureComponent{constructor(e){super(e),this.onChange=this.onChange.bind(this)}onChange(e){var{clogger:t,latestNewsTimestamp:a,setUserPrefByApi:n}=this.props;!!e.target.checked?(t.track(ie.EventId.WHATSNEW_ACTION,{action:"opt_in",trigger:"checkbox_whats_new",step:String(a)}),n({pref:"whats_new_read",value:a||Math.floor(Date.now()/1e3)})):(t.track(ie.EventId.WHATSNEW_ACTION,{action:"opt_out",trigger:"checkbox_whats_new",step:String(a)}),n({pref:"whats_new_read",value:-1}))}render(){var{whatsNewRead:e}=this.props,t=-1!==e;return i.a.createElement(xs.a,{text:Ow.t("Notify me about updates"),type:"inline",cursor:"pointer"},i.a.createElement(hE.a,{checked:t,onChange:this.onChange}))}}notify_checkbox_NotifyCheckbox.defaultProps={latestNewsTimestamp:null};var yw={setUserPrefByApi:function(){return Object(Ve.f)(...arguments)}},Cw=Object(d.b)(e=>({clogger:Object(ne.a)(e),latestNewsTimestamp:Object(jl.d)(e),whatsNewRead:Object(Ke.k)(e,"whats_new_read")}),yw)(notify_checkbox_NotifyCheckbox),jw=(a("Aev0"),e=>{var{dispatch:t,updates:a,whatsNewRead:n}=e,r=Object(s.useCallback)(()=>{t(Object(Ua.a)())},[t]),o=Object(s.useRef)(n);return i.a.createElement(mc.a,{isOpen:!0,centered:!0,closeModal:r,maxWidth:600,className:"p-whats_new_dialog"},i.a.createElement(mc.h,null,i.a.createElement(mc.j,{title:"What\u2019s New",className:"p-whats_new_dialog__title_bar"},i.a.createElement(Cw,null))),i.a.createElement(mc.d,{showScrollIndicatorBottom:!1,className:"p-whats_new_dialog__content"},i.a.createElement("div",{className:"p-whats_new_dialog__content__inner"},i.a.createElement(vw,{items:a,whatsNewRead:o.current}))))});jw.defaultProps={updates:[],whatsNewRead:0};var Ew=Object(d.b)(e=>({updates:Object(jl.f)(e),whatsNewRead:Object(Ke.k)(e,"whats_new_read")}))(jw),kw=a("g9Y9"),Sw=a("/6yw"),Iw=a("l+8s"),ww=(a("J0/G"),e=>{var{menuProps:t,currentUserId:a,userPresence:r,customStatusText:o,customStatusEmoji:c,inDnd:l,currentChannel:d,dispatch:p}=e,u=c&&i.a.createElement("div",{className:"p-ia__user_menu__blurb__status"},i.a.createElement(Kr.a,{text:o?"".concat(c," ").concat(o):c,emojiSize:Vr.a.SMALL,showTooltips:!1,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noHighlights:!0,noEmojiText:!0,preventCopyPaste:!0,stopAnimations:!0})),h=[{type:"custom",children:i.a.createElement("div",{className:"p-ia__user_menu__blurb"},i.a.createElement("div",{className:"p-ia__user_menu__blurb__info"},i.a.createElement(Wr.a,{id:a,className:"p-ia__user_menu__blurb__name"}),u))},{type:"separator"},{label:c?"Edit status":"Set status",shortcut:Object(ve.q)()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:()=>p(Object(ka.a)())},{type:"submenu",label:"Do not disturb",renderSubmenu:e=>l?i.a.createElement(nt,{menuProps:e,currentChannel:d}):i.a.createElement(Ge.a,{menuProps:e,currentChannel:d})},{label:i.a.createElement(s.Fragment,null,"Set yourself to ",i.a.createElement("strong",null,"active"===r?"away":"active")),click:()=>p(Object(ja.h)())},{label:"View profile",click:()=>p(Object(Ie.j)())}];return i.a.createElement(pw.a,Object(n.a)({},t,{template:h}))});ww.defaultProps={menuProps:{},customStatusText:void 0,customStatusEmoji:void 0,inDnd:!1,currentChannel:void 0};var Tw=Object(d.b)(e=>{var t=Object(h.d)(e),a=Object(Ca.f)(e,t),n=Object(_.a)(e);return{currentUserId:t,userPresence:Object(ja.f)(e,t),customStatusText:a.text,customStatusEmoji:a.emoji,inDnd:!!Object(Ue.c)(e),currentChannel:Object(L.e)(e,n)||void 0}})(ww),Nw=e=>{var{size:t,hasMenu:a,menuTriggerProps:r,currentUserId:o}=e,c=Object(s.useCallback)(e=>i.a.createElement(Tw,{menuProps:e}),[]),l=i.a.createElement("div",{className:"p-ia__nav__user"},i.a.createElement(Nr.c,{userId:o,size:t,isInteractive:!1,className:"p-ia__nav__user__avatar"}),i.a.createElement(So.a,{memberId:o,inline:!1,className:"p-ia__nav__user__presence--stroke"}),i.a.createElement(So.a,{memberId:o,inline:!1,className:"p-ia__nav__user__presence"}));return a?i.a.createElement(Iw.a,Object(n.a)({renderMenu:c,position:"bottom-right",offsetY:6,offsetX:4,allowanceX:8},r),i.a.createElement(He.a,{className:"p-ia__nav__user__button"},l)):l};Nw.defaultProps={hasMenu:!1,menuTriggerProps:{}};var Pw=Object(d.b)(e=>({currentUserId:Object(h.d)(e)}))(Nw),Aw={customStatusEmoji:void 0,userPresence:"active",onClick:r.a,highlighted:!1,onMouseEnter:r.a,onMouseLeave:r.a,menuCallback:r.a,clogger:{},isIAPhase1Enabled:!1},Mw=e=>{var{dispatch:t,onClick:a,customStatusEmoji:n,currentUserId:r,userPresence:o,highlighted:c,onMouseEnter:d,onMouseLeave:p,menuCallback:u,clogger:h,isIAPhase1Enabled:m}=e,b=Object(s.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),h.track("VIEW_OWN_PROFILE",{is_iap1:m}),t(Object(Ie.j)()),u(),a()},[h,t,m,u,a]);Object(s.useEffect)(()=>{var e=new pi.a;return c&&e.bindAll([{keys:["return"],handler:b}]),()=>{e.reset()}},[c,b]);var _=l()("p-ia__main_menu__user",{"p-ia__main_menu__user--highlighted":c});return i.a.createElement(He.a,{className:_,onClick:b,onMouseEnter:d,onMouseLeave:p},i.a.createElement(Pw,{size:36}),i.a.createElement("div",{className:"p-ia__main_menu__user__details"},i.a.createElement("div",{className:"p-ia__main_menu__user__name_container"},i.a.createElement(Wr.a,{id:r,className:"p-ia__main_menu__user__name"})),n?i.a.createElement(Sw.a,{className:"p-ia__main_menu__user__status",memberId:r,tooltip:!1}):i.a.createElement("span",{className:"p-ia__main_menu__user__status"},"active"===o?"Active":"Away"),i.a.createElement("span",{className:"p-ia__main_menu__user__status_alt"},"View Profile")))};Mw.defaultProps=Aw;var xw=Object(un.b)(Object(d.b)(e=>{var t=Object(h.d)(e),a=Object(Ca.f)(e,t);return{currentUserId:t,userPresence:Object(ja.f)(e,t),customStatusEmoji:a.emoji,clogger:Object(ne.a)({state:e}),isIAPhase1Enabled:Object(Rr.d)(e)}})(Mw));a("6u4E");class main_menu_MainMenu extends s.Component{render(){var e,{currentChannel:t,customStatusEmoji:a,inDnd:r,showCreateChannelAction:o,showInvitePeopleGlobalAction:c,teamDisplayName:l,userIsRestricted:d,customizeOnlyAdmins:u,userIsAdmin:h,userIsOwner:m,userIsAppmin:b,statsOnlyAdmins:_,team:g,teamUrl:f,teamIsEnterprise:v,orgName:O,orgId:y,isOffline:C,featureOfflineMode:j,isSignedIntoOtherOrgTeams:E,showSwitchWorkspaces:I,showHistory:w,dispatch:T}=this.props,N=!d,P=!u,A=h||m,M=!_,x=[{type:"custom",key:"user",children:i.a.createElement(xw,{className:"p-ia__main_menu__user",onClick:()=>{this.props.menuProps.onClose()}})},{label:a?"Edit status":"Set status",shortcut:Object(ve.q)()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:()=>T(Object(ka.a)()),key:"status"},{type:"submenu",label:"Do not disturb",shortcut:r&&i.a.createElement("span",{className:"p-ia__main_menu__dnd_label"},"On"),renderSubmenu:e=>r?i.a.createElement(nt,{menuProps:e,currentChannel:t,isIAP1Enabled:!0}):i.a.createElement(Ge.a,{menuProps:e,currentChannel:t,isIAP1Enabled:!0}),key:"dnd"},{type:"separator",key:"seppy-2"},{type:"header",label:v?i.a.createElement(s.Fragment,null,i.a.createElement("strong",null,O)," \u2014 ",l):i.a.createElement("strong",null,l)},{label:"Create a channel\u2026",click:()=>T(Object(S.a)({entryPoint:"main_menu"})),show:o,key:"create-channel",icon:i.a.createElement(We.b,{type:"channel"})},{label:"Invite people to ".concat(l,"\u2026"),click:()=>T(Object(k.a)()),show:c,key:"invite-people",icon:i.a.createElement(We.b,{type:"add-user"})},{type:"separator",key:"seppy-3"},{label:"History",type:"submenu",key:"history-submenu",show:w,renderSubmenu:e=>i.a.createElement(kw.a,{menuProps:e})},{type:"separator",key:"seppy-4",show:w},{label:"Settings",type:"submenu",key:"settings-submenu",template:[{label:"Preferences",click:()=>T(Object(Ze.a)()),shortcut:Object(ve.q)()&&Ia.W&&"\u2318,"},{label:"Edit profile",click:()=>T(Object(Ps.a)()),key:"edit-profile"},{label:"Customize ".concat(l),show:N&&(h||P),href:"".concat(f,"customize?utm_source=in-prod&utm_medium=inprod-customize_link-slack_menu-click"),key:"customize-workspace"},{type:"separator",key:"seppy-submenu-1"},{label:"Admin tools",type:"header",key:"admin-tools-header"},{label:"Manage members",show:A,href:"".concat(f,"admin"),key:"manage-members"},{label:"Manage apps",show:!v&&b,href:"".concat(f,"apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"),key:"manage-apps"},{label:"Workspace settings",show:A,href:"".concat(f,"admin/settings"),key:"workspace-settings"},{label:"Analytics",show:N&&(h||M),href:"".concat(f,"stats"),key:"analytics"}].filter(e=>!1!==e.show)},{label:"Help",type:"submenu",key:"help-submenu",template:[{label:"Help center",click:()=>T(Object(Sa.a)()),key:"help"},{label:"What\u2019s new",click:()=>T(Object(Ua.e)({element:i.a.createElement(Ew,null)})),key:"whats-new"},{label:"Keyboard shortcuts",click:()=>T(Object(Ie.h)()),key:"keyboard-shortcuts",shortcut:Object(ve.q)()?"\u2318/":"Ctrl+/"}]},{type:"submenu",label:"Switch workspaces",show:I,renderSubmenu:e=>i.a.createElement(Vn.a,{menuProps:e}),key:"switch-workspaces"},...(e=[{label:"Sign out of ".concat(l),show:!v||Object(dn.b)()&&E,click:()=>Object(p.dispatchForClientStore)(Object(Ka.removeWorkspace)(g.id)),key:"sign-out",disabled:j&&C,showOfflineIcon:j&&C},{label:"Sign out of ".concat(O),show:v,click:()=>Object(p.dispatchForClientStore)(Object(Ka.removeOrg)(y)),key:"org-sign-out",disabled:j&&C,showOfflineIcon:j&&C}].filter(e=>!1!==e.show),1===e.length?e:[{label:"Sign out",type:"submenu",key:"signout-submenu",template:e}])].filter(e=>!1!==e.show);return i.a.createElement(pw.a,Object(n.a)({menuClassNames:"p-ia__main_menu"},this.props.menuProps,{template:x}))}}main_menu_MainMenu.defaultProps={customizeOnlyAdmins:!1,statsOnlyAdmins:!1,showSwitchWorkspaces:!1,showHistory:!1};var Rw=Object(d.b)(e=>{var t=Object(_.a)(e),a=Object(h.d)(e),n=Object(Ca.b)(e),r=Object(Ca.f)(e,a),s=Object(Se.d)(e),i=Object(we.s)(s),o=Object(mr.getNumberOfWorkspaces)(Object(p.getStateForClientStore)()),c=Object(pn.a)({numTeams:o});return{iap1MainMenuIsVisible:Object(Yd.h)(e),currentChannel:Object(L.e)(e,t)||void 0,currentUserId:a,userIsAdmin:Object(Fe.eb)(e,n),userIsOwner:Object(Fe.Eb)(e,n),userIsRestricted:Object(Fe.Gb)(n),userIsEnterpriseAdminOrOwner:Object(Fe.qb)(n)||Object(Fe.rb)(n),userIsAppmin:Object(Ca.k)(e),showCreateChannelAction:Object(sn.D)(e)||Object(sn.C)(e),showInvitePeopleGlobalAction:Object(ln.d)(e),inDnd:!!Object(Ue.c)(e),userPresence:Object(ja.f)(e,a),customStatusEmoji:r.emoji,team:s,orgName:s.enterprise_name,orgId:s.enterprise_id,isSignedIntoOtherOrgTeams:Object(h.h)(e).some(e=>e.id!==s.id&&e.enterprise_id===s.enterprise_id),teamDisplayName:Object(we.e)(s),teamUrl:Object(we.n)(s),customizeOnlyAdmins:Object(De.a)(e,"emoji_only_admins")&&Object(De.a)(e,"slackbot_responses_only_admins")&&Object(De.a)(e,"loading_only_admins"),statsOnlyAdmins:Object(De.a)(e,"stats_only_admins"),teamIsEnterprise:i,isOffline:!Object(Re.c)(e),featureOfflineMode:Object(h.m)(e,"feature_offline_mode"),showSwitchWorkspaces:Object(h.h)(e).length>0&&!c,showHistory:Object(Rr.b)(e)&&!Object(Rr.f)(e)}})(main_menu_MainMenu),Dw=(a("tx91"),new x.b("channel_sidebar")),Fw={currentUserName:void 0,currentStatusEmoji:void 0,shouldUseChannelSections:!1,featureChannelSections:!1,isOrganizing:!1,useIATopNav:!1};class sidebar_header_SidebarHeader extends s.Component{constructor(e){super(e),this.state={animateStatus:!1},this.renderMenu=this.renderMenu.bind(this)}componentDidUpdate(e){this.props.currentStatusEmoji!==e.currentStatusEmoji&&this.setState(()=>({animateStatus:!0}),()=>{this.animateTimeout=setTimeout(()=>this.setState(()=>({animateStatus:!1})),1e3)})}componentWillUnmount(){this.animateTimeout&&clearTimeout(this.animateTimeout)}renderMenu(e){return this.props.clogger.track(ie.EventId.GLOBAL_NAV,{contexts:{ui_context:{action:ie.UiAction.CLICK,ui_component:ie.UiComponent.GLOBAL_NAV,ui_element:ie.UiElement.NAV_TEAM_MENU}},is_iap1:!0}),i.a.createElement(Rw,{menuProps:e})}renderOrganizing(){var{teamId:e,isOrganizing:t}=this.props;return this.props.featureChannelSections&&this.props.shouldUseChannelSections&&t?i.a.createElement("div",{className:l()("p-ia__sidebar_header")},i.a.createElement("div",{className:"p-ia__sidebar_header__mode"},i.a.createElement("div",{className:"p-ia__sidebar_header__info"},i.a.createElement("div",{"data-teamid":e,className:"p-ia__sidebar_header__mode__name","data-qa":"organizing_header"},Dw.t("Organizing\u2026")),i.a.createElement("div",{className:"p-ia__sidebar_header__mode__state"},Dw.t("Create a section, or select a conversation."))))):null}render(){var{teamName:e,currentUserId:t,currentUserName:a,currentStatusEmoji:n,isOrganizing:r,useIATopNav:s}=this.props,o=l()("p-ia__sidebar_header__user__status",{"p-ia__sidebar_header__user__status--animate":this.state.animateStatus});return this.props.shouldUseChannelSections&&r?this.renderOrganizing():i.a.createElement("div",{className:l()("p-ia__sidebar_header",{"p-ia__sidebar_header--top-nav":s})},i.a.createElement(Be.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:12,offsetY:-4},i.a.createElement(He.a,{className:"p-ia__sidebar_header__button"},i.a.createElement("div",{className:"p-ia__sidebar_header__info"},i.a.createElement("div",{className:"p-ia__sidebar_header__team_name"},e),i.a.createElement("div",{className:"p-ia__sidebar_header__user"},i.a.createElement(yt.a,{memberId:t,className:"p-ia__sidebar_header__user__presence"}),i.a.createElement("span",{className:"p-ia__sidebar_header__user__name"},a),i.a.createElement(Ct.b,{memberId:t,className:o,tipPosition:"bottom",key:n}))),i.a.createElement(es.a,{type:"chevron-large-down",className:"p-ia__sidebar_header__menu_icon"}))))}}sidebar_header_SidebarHeader.defaultProps=Fw;var Lw=Object(d.b)(e=>{var t=Object(Se.d)(e),a=Object(Ca.b)(e);return{teamId:t.id,teamName:Object(we.e)(t),currentUserId:a&&a.id,currentUserName:Object(Fe.K)(a),currentStatusEmoji:Object(Ca.f)(e,a.id).emoji,clogger:Object(ne.a)({state:e}),shouldUseChannelSections:Object(N.a)(e),featureChannelSections:Object(h.m)(e,"feature_channel_sections"),isOrganizing:oa(e),useIATopNav:Object(Rr.f)(e)}},{})(sidebar_header_SidebarHeader),Uw=(a("CDIG"),e=>{var{primaryView:t,hideHeader:a,toggleDetails:n,toggleActivity:r,isWindowFrameless:o,appName:c,openFromCmdF:d,channel:p,startCall:u,displayName:h,secondaryView:m,isIAMsgEnabled:_,callButtonIsVisible:g,useIATopNav:f}=e;if(a)return null;var v=(()=>{if("Vall_threads"===t)return i.a.createElement("div",{className:"p-ia__view_header__title"},"Threads");if(t&&"P"===t[0]){var e=Object(Y.a)(t);if(e)return e.header?e.header({className:"p-ia__view_header__page_header"}):i.a.createElement("div",{className:"p-ia__view_header__title"},e.label())}return Object(b.a)(t)?i.a.createElement("div",{className:"p-ia__view_header__title"},c):i.a.createElement("div",{className:"p-ia__view_header__info"},i.a.createElement(ai,{channelId:t,noMenu:!0}),i.a.createElement("div",{className:"p-ia__view_header__metadata"},i.a.createElement(Bo,{channelId:t})))})(),O=Object(ve.v)()&&!f,y=Object(B.jb)(p)&&g,C="details"===m,j="".concat(C?"Hide":"Show"," ").concat(Object(B.jb)(p)?"conversation":"channel"," details"),E="Pactivity"===t;return i.a.createElement("div",{className:l()("p-ia__view_header",{"p-ia__view_header--with-history":O,"p-ia__view_header--frameless":o})},O&&i.a.createElement(mh.a,{isIAP1Enabled:!0}),v,Object(wb.a)(t)&&i.a.createElement(s.Fragment,null,i.a.createElement("div",{className:"p-ia__view_header__spacer"}),!y&&i.a.createElement(qe.c,{tip:"Find in ".concat(h),position:"bottom",delay:qe.a,hideFromScreenReader:!0},i.a.createElement(He.a,{onClick:d,className:"p-ia__view_header__button",type:"outline",size:"small","aria-label":"Find in ".concat(h)},i.a.createElement(We.b,{type:"filter",className:"p-ia__view_header__button_icon"}))),y&&i.a.createElement(qe.c,{tip:"Call ".concat(h),position:"bottom",delay:qe.a,hideFromScreenReader:!0},i.a.createElement(He.a,{onClick:u,className:"p-ia__view_header__button",type:"outline",size:"small","aria-label":"Call ".concat(h)},i.a.createElement(We.b,{type:"phone",className:"p-ia__view_header__button_icon"}))),!C&&i.a.createElement("div",{className:"p-ia__view_header__divider"}),!C&&i.a.createElement(qe.c,{tip:j,position:"bottom",delay:qe.a},i.a.createElement(He.a,{onClick:n,className:l()("p-ia__view_header__button",{"p-ia__view_header__button--open":C}),type:"outline",size:"small","aria-label":"Show details for ".concat(Object(B.jb)(p)?"conversation with":"channel"," ").concat(h),"aria-expanded":C},i.a.createElement(We.b,{type:"info-circle",className:"p-ia__view_header__button_icon"})," ",i.a.createElement("span",{className:"p-ia__view_header__button_text"},"Details")))),_&&E&&i.a.createElement(s.Fragment,null,i.a.createElement("div",{className:"p-ia__view_header__spacer"}),i.a.createElement(He.a,{onClick:r,className:"p-ia__view_header__details"},i.a.createElement(We.b,{type:"side-panel"}))))});Uw.defaultProps={primaryView:void 0,hideHeader:!1,isWindowFrameless:!1,appName:"",channel:void 0,displayName:"",secondaryView:"",callButtonIsVisible:!1,useIATopNav:!1};var Bw=Object(d.b)(e=>{var t,a=Object(_.a)(e),n=Object(Y.a)(a),r="";if(Object(b.a)(a)){var s=Object($o.e)(e,a);r=Object(sS.b)(s)}return Object(wb.a)(a)&&(t=Object(L.e)(e,a)),{primaryView:a,appName:r,hideHeader:n&&n.isChannelHeaderHidden&&n.isChannelHeaderHidden(e),isWindowFrameless:Object(E.l)(e),channel:t,displayName:Object(B.w)(e,t),secondaryView:Object(y.j)(e),isIAMsgEnabled:Object(Rr.c)(e),callButtonIsVisible:t&&Object(Vs.f)(e,t),useIATopNav:Object(Rr.f)(e)}},e=>({toggleDetails:()=>e(Object(Ie.r)()),toggleActivity:()=>e(Object(Ie.q)()),openFromCmdF:()=>e(Object(Tl.d)()),startCall:()=>e(Object(rs.d)())}))(Uw),Hw=a("9rZX"),Ww=a.n(Hw),qw=a("VwqH"),Gw=a("7Ztl"),Kw=(a("Lpwv"),a("+rBa")),Vw=a("1YQg"),zw=a("59b6"),Yw=Object(d.b)(e=>{var t=Object(Gw.c)(e),a=Object(zw.b)(e);return{invitingCall:t&&t.id,callTitle:a}},e=>({onAcceptCall:t=>e(Object(Kw.a)(t)),onRejectCall:t=>e(Object(Kw.b)({id:t,response:Vw.c.Reject}))}))(e=>{var{invitingCall:t,onAcceptCall:a,onRejectCall:n,callTitle:r}=e;if(Object(ve.v)()&&Object(Wa.b)().error("BrowserIncomingCall should only be instantiated in a browser."),!t)return null;return i.a.createElement(Ww.a,{isOpen:!0,overlayClassName:"p-browser_incoming_call--shroud",shouldFocusAfterRender:!0,shouldReturnFocusAfterClose:!0,style:{content:{background:"transparent",border:"none",left:"50%",margin:"0",padding:"0",width:"200px"}},contentLabel:r},i.a.createElement("div",{className:"p-browser_incoming_call"},i.a.createElement(qw.a,{callId:t,onAcceptCall:a,onRejectCall:n})))}),Qw=a("Gmrf"),Xw={lastError:void 0,enqueueToast:r.a};class debug_error_DebugError extends s.Component{UNSAFE_componentWillReceiveProps(e){e.lastError&&e.lastError!==this.props.lastError&&this.props.enqueueToast({element:i.a.createElement(Ga.b,{position:"bottom-right",offsetY:66,shouldAutoFade:!1},i.a.createElement(We.b,{type:"exclamation-circle",className:"margin_right_50"}),i.a.createElement("span",null,e.lastError))})}render(){return null}}debug_error_DebugError.defaultProps=Xw;var Jw={enqueueToast:qa.c},Zw=Object(d.b)(e=>{var t=Object(Qw.b)(e);return{lastError:Object(h.m)(e,"feature_tinyspeck")?t&&t.toString&&t.toString():void 0}},Jw)(debug_error_DebugError),$w=a("UUlk"),eT=a("uFGw"),tT=a("J9z2"),aT=a("uvIC"),nT=a("AUAP"),rT=a("GTwG"),sT=a("EHyS"),iT=a("mOAw"),oT=a("u9my"),cT=a("K5QD"),lT=a("2Jxo"),dT=a("tqVr"),pT=a("y7mK"),uT=Object(As.b)("TS.ui.comments.startDelete"),hT=new x.b("comments"),mT={isStarred:!1,updateStar:r.a,commentId:void 0,fileId:void 0};class comment_actions_CommentActions extends s.PureComponent{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this),this.toggleStar=this.toggleStar.bind(this),this.deleteComment=this.deleteComment.bind(this)}toggleStar(){var{commentId:e,fileId:t,isStarred:a}=this.props;e&&t&&this.props.updateStar(!a,{file_comment:e,file_comment_file:t})}deleteComment(){var{commentId:e,fileId:t}=this.props;e&&t&&uT(t,e)}renderMenu(e){var{isStarred:t}=this.props;return i.a.createElement(Be.f,e,i.a.createElement(Be.b,{label:t?hT.t("Unstar this file comment"):hT.t("Star this file comment"),onSelected:this.toggleStar}),i.a.createElement(Be.d,null),i.a.createElement(Be.b,{label:hT.t("Delete comment"),danger:!0,onSelected:this.deleteComment}))}render(){return i.a.createElement(Be.e,{renderMenu:this.renderMenu,position:"left-bottom"},i.a.createElement(He.a,{className:"p-comment__actions","aria-label":hT.t("Show more actions")},i.a.createElement(We.b,{type:"cog",size:"inherit"})))}}comment_actions_CommentActions.defaultProps=mT;var bT=Object(d.b)(null,{updateStar:ii.a})(comment_actions_CommentActions),_T=(a("2ekl"),new x.b("comments")),gT={time24:!1,fileId:void 0};class comment_Comment extends s.PureComponent{render(){var{comment:e,time24:t,fileId:a}=this.props,{user:n,timestamp:r,comment:s,is_starred:o,id:c}=e;return i.a.createElement("div",{className:"p-comment"},i.a.createElement("div",{className:"p-comment__header"},n?i.a.createElement(pT.a,{userId:n}):null,i.a.createElement("span",{className:"p-comment__timestamp"},_T.t("{date} at {time}",{date:Object(dT.a)(r,{shortenMonth:!0}),time:Object(Cy.a)(r,{do24hrTime:t})})),i.a.createElement(bT,{isStarred:o,commentId:c,fileId:a})),i.a.createElement("div",{className:"p-comment__body"},i.a.createElement(Kr.a,{text:s,memberId:n})))}}comment_Comment.defaultProps=gT;var fT=Object(d.b)(function(e){return{time24:Object(Ke.k)(e,"time24")}})(comment_Comment),vT=(a("G4eq"),new x.b("comments")),OT={toggleList:r.a,commentCount:0,expanded:!1};function yT(e){var{toggleList:t,commentCount:a,expanded:n}=e,r=n?vT.t("Hide older comments",{fallbackHash:"f560b67c78f367354057065ac81410a1c310432b"}):vT.t("See older comments"),s=n?"caret-down":"caret-right";return i.a.createElement("div",{className:"p-comment_list__toggle_container"},i.a.createElement(te.a,{onClick:t,"aria-expanded":n},r),i.a.createElement("span",{className:"p-comment_list__toggle_count_button",role:"presentation",onClick:t},i.a.createElement(We.b,{type:"comment-alt"}),i.a.createElement("span",{className:"p-comment_list__toggle_count"},a),i.a.createElement(We.b,{type:s,className:"p-comment_list__toggle_caret"})))}yT.defaultProps=OT;var CT={comments:o.default.array,fileId:o.default.string},jT={comments:void 0,fileId:void 0};class comment_list_CommentList extends Mr.a{constructor(e){super(e),this.toggle=this.toggle.bind(this),this.state={expanded:!1}}toggle(){this.setState(e=>({expanded:!e.expanded}))}render(){var{comments:e,fileId:t}=this.props,{expanded:a}=this.state;if(Object(bs.a)(e))return null;var n=e.map(e=>{var a=e.id;return i.a.createElement(fT,{key:a,comment:e,fileId:t})}),r=l()("p-comment_list",{"p-comment_list--expanded":a});return i.a.createElement("div",{className:r},i.a.createElement(yT,{expanded:a,commentCount:e.length,toggleList:this.toggle}),i.a.createElement("div",{className:"p-comment_list__comments"},n))}}comment_list_CommentList.propTypes=CT,comment_list_CommentList.defaultProps=jT;var ET=comment_list_CommentList,kT=a("JXW8"),ST=a("5yEy"),IT=a("VfGJ"),wT=a("1Lli"),TT=a("NvKv"),NT=a("Zhly"),PT=a("TegG"),AT=a("oiAH"),MT=new x.b("file-details"),xT={teamIdForIcon:void 0,teamDomain:void 0,channel:void 0,openThread:r.a};class file_details_share_location_FileDetailsShareLocation extends s.Component{constructor(e){super(e),this.onShareClick=this.onShareClick.bind(this)}onShareClick(e){var{share:t,fileId:a,openThread:n}=this.props;e.preventDefault();var r=t.threadTs||t.ts,s=r!==t.ts?t.ts:null,i=a;n({channelId:t.channelId,threadTs:r,highlightTs:s,origin:"file_details",originId:i})}getReplyCountText(e,t,a){var{replyCount:n,ts:r,threadTs:s}=e||{};if(!n)return null;var o="";return o=s&&r!==s?MT.t("from a thread"):MT.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:n}),i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"p-file_details__share_metadata_dot"},"\xb7"),i.a.createElement(fe.a,{href:t,onClick:a},i.a.createElement("span",{className:"p-file_details__share_metadata_reply_count"},o)))}renderEntity(){var{share:e,teamIdForIcon:t,channel:a}=this.props;if(t){var n={id:e.channelId,name:e.channelName,is_channel:!0,is_private:!e.isPublic,shared_team_ids:e.sharedTeamIds,team_id:t};return i.a.createElement(NT.a,{channel:n,className:"p-file_details__share_channel",truncate:!0,truncateWidth:"100%"})}return Object(B.hb)(a)?i.a.createElement(PT.a,{className:"p-file_details__share_channel",showStatus:!1,id:Object(B.G)(a)}):Object(B.pb)(a)?i.a.createElement(AT.a,{className:"p-file_details__share_channel",id:a.id}):i.a.createElement(NT.a,{channelId:e.channelId,className:"p-file_details__share_channel",truncate:!0,truncateWidth:"100%"})}render(){var e,t,{share:a,teamIdForIcon:n,teamDomain:r}=this.props;return n||(t=this.onShareClick),r&&(e=Object($g.u)({teamDomain:r,channelId:a.channelId,ts:a.ts,threadTs:a.threadTs})),i.a.createElement("div",{className:"p-file_details__share",key:"".concat(a.channelId,"_").concat(a.ts)},i.a.createElement(fe.a,{href:e,onClick:t,className:"p-file_details__share_channel_link"},this.renderEntity()),i.a.createElement("span",{className:"p-file_details__share_metadata"},i.a.createElement(TT.a,{timestamp:a.ts,relative:!0}),this.getReplyCountText(a,e,t)))}}file_details_share_location_FileDetailsShareLocation.defaultProps=xT;var RT=Object(d.b)(function(e,t){var{share:a}=t,n=Object(Se.d)(e);if(!n)return{};var r,s,i=n.id,o=n.enterprise_id,c=n.domain,l=a.teamId===o&&!Object(bs.a)(a.sharedTeamIds)&&!Object(qp.a)(a.sharedTeamIds,i),d=a.teamId&&a.teamId!==i&&a.teamId!==o;if(l||d){r=Object(Ku.a)(a.sharedTeamIds)||a.teamId;var p=Object(Se.j)(e,[r]);c=Object(we.t)(p&&p[0])?p[0].domain:null}return r||(s=Object(L.e)(e,a.channelId)),{teamIdForIcon:r,teamDomain:c,channel:s}},{openThread:Ie.l})(file_details_share_location_FileDetailsShareLocation),DT=new x.b("file-details");class file_details_shares_FileDetailsShares extends s.PureComponent{getFormattedSharesData(e){var t=[];Object(Cf.a)(e.public,(e,a)=>{Object(Cf.a)(e,e=>{var n=this.formatShareData(e,a,!0);n&&t.push(n)})});Object(Cf.a)(e.private,(e,a)=>{Object(Cf.a)(e,e=>{var n=this.formatShareData(e,a,!1);n&&t.push(n)})});var a=t.concat([]);return Object(wT.a)(a,"ts","desc")}formatShareData(e,t,a){if("0000000000.000000"===e.ts)return Object(Wa.b)().warn("Skipping 0000000000.000000 share for ".concat(this.props.file.id)),null;var n=e.reply_count||null,r=e.reply_users,s=e.reply_users_count,i=e.latest_reply||e.ts,o=e.internal_team_ids;return{channelId:t,replyCount:n,replyUsers:r,replyUsersCount:s,latest:i,ts:e.ts,threadTs:e.thread_ts,channelName:e.channel_name,teamId:e.team_id,sharedTeamIds:o,isPublic:a}}render(){var{file:e}=this.props;if(!e||!e.shares)return null;var t=e.shares,a=!!Object.keys(e.shares).length,n=a&&this.getFormattedSharesData(t);return a&&i.a.createElement("div",{className:"p-file_details__shares"},i.a.createElement("div",{className:"p-file_details__share_divider"},i.a.createElement("span",null,DT.rt("Shared in")),i.a.createElement("hr",null)),n.map(t=>i.a.createElement(RT,{key:"".concat(t.ts,"-").concat(t.channelId),share:t,fileId:e.id})))}}file_details_shares_FileDetailsShares.defaultProps={file:null};var FT=a("s/YD"),LT=new x.b("file-details"),UT={tryAgain:r.a};function BT(e){var{tryAgain:t}=e;return i.a.createElement("div",{role:"alert",className:"p-file_details__error"},i.a.createElement("p",{className:"p-file_details__error_header"},LT.t("Couldn't load file")),i.a.createElement("p",null,LT.rt("If the problem persists, please <a>drop us a line.</a>",null,e=>{var{text:t,key:a}=e;return i.a.createElement(fe.a,{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:a},t)})),i.a.createElement(jt.d,{type:"primary",onClick:t},LT.t("Try Again")))}BT.defaultProps=UT;var HT=new x.b("file-details");function WT(){return i.a.createElement("div",{role:"alert",className:"p-file_details__tombstone"},i.a.createElement("div",{className:"p-file_details__tombstone_icon"},i.a.createElement(We.b,{type:"trash",size:"inherit"})),i.a.createElement("p",null,HT.t("This file was deleted.")))}var qT=new x.b("file-details");function GT(e){var{featureDocsTranslations:t}=e,a=t?qT.t("This file was not found."):"This file was not found.";return i.a.createElement("div",{role:"alert",className:"p-file_details__tombstone"},i.a.createElement("div",{className:"p-file_details__tombstone_icon"},i.a.createElement(We.b,{type:"question",size:"inherit"})),i.a.createElement("p",null,a))}GT.defaultProps={featureDocsTranslations:!1};var KT=Object(d.b)(e=>({featureDocsTranslations:Object(h.m)(e,"feature_docs_translations")}),{})(GT),VT=(a("JHKc"),a("FXxD"),new x.b("file-details")),zT={file:null,origin:null,do24hrTime:!1,fileIsFetching:!1,reloadFile:r.a,isWorkflow:!1,userId:"",botId:"",ownerName:"",featureReactMemberProfileCard:!1,clogFileClick:r.a};class file_details_FileDetails extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["renderPreview","onNameClick","clogLinkClick","renderBody"])}onNameClick(e){if(!Object(sT.a)(e)){var{userId:t,botId:a,featureReactMemberProfileCard:n}=this.props;(t||a)&&(e.preventDefault(),e.persist(),n||(a?Object(oT.a)(e,a):Object(iT.a)(e,t)))}}clogLinkClick(e){var{file:t}=this.props;this.props.clogFileClick({file:t,payload:e})}isImage(){return"image"===Object(JS.p)(this.props.file)}renderPreview(){return i.a.createElement(IT.a,{file:this.props.file,showActions:!1,forceExpanded:!0,largeImage:!0,clogLinkClick:this.clogLinkClick,channelId:"",ts:""})}renderUserNameAndTimestamp(){var{file:e,do24hrTime:t,ownerName:a,userId:n,botId:r,isWorkflow:s,featureReactMemberProfileCard:o}=this.props,c="";Object(JS.I)(e)||(c=i.a.createElement("div",{className:"p-file_details__private"},VT.t("Private file")));var l,d="";return d=r?"/services/".concat(r):"/team/".concat(n),l=o?i.a.createElement(xS.a,{botId:r,userId:n,onClick:this.onNameClick},i.a.createElement(fe.a,{href:d,className:"p-file_details__user_link"},a)):i.a.createElement(fe.a,{href:d,className:"p-file_details__user_link",onClick:this.onNameClick},a),i.a.createElement("div",{className:"p-file_details__user_meta"},l,r&&i.a.createElement(kT.a,{isWorkflow:s}),i.a.createElement("div",{className:"p-file_details__upload_date"},VT.t("{date} at {time}",{date:e.timestamp&&Object(Bf.j)(e.timestamp),time:e.timestamp&&Object(Bf.n)(e.timestamp,{do24hrTime:t})})),c)}renderComments(){var{file:e}=this.props;return Object(bs.a)(e.comments)?null:i.a.createElement("div",{className:"p-file_details__comments"},i.a.createElement("hr",{className:"p-file_details__comment_separator"}),i.a.createElement(ET,{comments:e.comments,fileId:e.id}))}renderFileDetails(){var{file:e,fileIsFetching:t,reloadFile:a}=this.props;if(t&&(!e||Object(Mc.d)(e)&&!Object(Mc.c)(e)))return null;if(!e||Object(Mc.c)(e))return i.a.createElement(BT,{tryAgain:a});if(Object(JS.Q)(e))return i.a.createElement(WT,null);if(Object(JS.L)(e))return i.a.createElement(KT,null);var n=!Object(JS.K)(e),r={};this.isImage()&&(r.maxWidth="".concat(e.thumb_480_w||e.thumb_360_w,"px"),r.maxHeight="".concat(e.thumb_480_h||e.thumb_360_h,"px"));var s=Object(JS.p)(e),o="image"===s||"snippet"===s,c=l()("p-file_details__meta",{"p-file_details__meta--show_filename":o});return i.a.createElement(i.a.Fragment,null,n?i.a.createElement("div",{className:"p-file_details__meta_container","data-qa":"file_details-meta_container"},i.a.createElement("div",{className:c},o?i.a.createElement(cT.a,{file:e,className:"p-file_details__name"}):null,this.renderUserNameAndTimestamp()),i.a.createElement(ST.a,{file:e,clogLinkClick:this.clogLinkClick,inFileDetails:!0})):null,i.a.createElement("div",{className:"p-file_details__preview",style:r},this.renderPreview()),this.renderComments(),i.a.createElement(file_details_shares_FileDetailsShares,{file:e}))}renderBody(){return i.a.createElement("div",{className:"p-file_flexpane__content"},i.a.createElement(fh.a,null,e=>{var{width:t,height:a}=e;return i.a.createElement(Ch.b,{width:t,height:a,fade:!0},i.a.createElement("div",{className:"p-file_details"},this.renderFileDetails()))}))}render(){var e=this.props.origin,t={member_preview:VT.t("Member"),starred_items:VT.t("Starred Items"),search_results:VT.t("Search Results"),channel_page:VT.t("Channel Details"),group_page:VT.t("Channel Info"),im_page:VT.t("Conversation Details"),mentions:VT.t("Activity")},a=VT.t("Files"),n=t[e]||a,r=l()("p-file_flexpane","p-file_flexpane--detail");return i.a.createElement(FT.b,{flexOrigin:e,className:r,title:n,renderBody:this.renderBody,viewId:"file-details",kbNavOrder:Object(kt.a)()?void 0:4.9})}}file_details_FileDetails.defaultProps=zT;var YT={clogFileClick:function(){return Object(rT.a)(...arguments)}},QT=Object(d.b)((e,t)=>{var{fileId:a}=t;if(!a)return{};var n=Object(aT.c)(e,a);if(!n)return{};var{userId:r,botId:s}=Object(JS.l)(n),i=r?Object(Ca.d)(e,r):null,o=i?Object(Fe.q)(i):null,c=s||o,l="";if(c){var d=Object(nT.c)(e,c);d&&d.name&&(l=d.name)}return!l&&i&&(l=Object(Fe.V)(e,i)),l||(l=n.username),{file:Object(aT.c)(e,a),do24hrTime:Object(Ke.k)(e,"time24"),featureEmailWorkobjectUi:Object(h.m)(e,"feature_email_workobject_ui"),featureReactMemberProfileCard:Object(h.m)(e,"feature_react_member_profile_card"),userId:r,botId:c,ownerName:l,isWorkflow:Object(Fe.Qb)(i)}},YT)(file_details_FileDetails),XT=Object(lT.a)(QT,{alwaysFetchOnMount:!0}),JT=a("YLnb"),ZT=a("fX3E"),$T=a("jYCR"),eN=a("kX2h"),tN=new x.b("files"),aN={member:null,onChange:r.a};class files_flexpane_members_select_FilesFlexpaneMembersSelect extends s.PureComponent{constructor(e){super(e),this.onChange=this.onChange.bind(this),this.state={value:e.member?e.member.id:null,selectedOption:e.member?nN(e.member.id):null}}onChange(e,t){this.setState(()=>({value:e,selectedOption:{value:e,label:t}})),this.props.onChange(e)}UNSAFE_componentWillReceiveProps(e){this.setState(()=>({value:e.member?e.member.id:null,selectedOption:e.member?nN(e.member.id):null}))}render(){return i.a.createElement(eN.a,{className:"p-file_list__select p-file_list__members_select",placeholder:tN.t("Everyone",{fallbackHash:"c756f6af1f03c9ce381cb85934ffb274e2f54af3"}),onChange:this.onChange,value:this.state.value,selectedOption:this.state.selectedOption,optionsFetcher:this.props.searchMembers,optionsRowHeight:30})}}function nN(e){return{value:e,label:i.a.createElement("div",{className:"p-file_list__select__member"},i.a.createElement(Ov.a,{id:e,size:"small"}))}}files_flexpane_members_select_FilesFlexpaneMembersSelect.defaultProps=aN;var rN=Object(d.b)((e,t)=>{var{userId:a}=t;return{member:Object(Ca.d)(e,a)}},e=>({searchMembers:t=>e(Object($T.c)({query:t,options:{entities:{members:{includeSelf:!0,onlyLocalTeam:!0}},sort:{selfFirst:!0},allowEmptyQuery:!0}})).then(e=>({options:e.map(e=>nN(e.id))}))}))(files_flexpane_members_select_FilesFlexpaneMembersSelect),sN=(a("vr4i"),new x.b("files")),iN=Object($S.a)(ZS.a),oN={files:[],filetype:"",user:"",scrollmark:void 0,fetchFilesPre:r.a,fetchFilesPost:r.a,saveScrollmark:r.a,setFiletype:r.a,setUser:r.a,previewFile:r.a,focusKey:null,clogFileClick:r.a,setFocusKey:r.a};class file_list_FileList extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["onFileClick","onScroll","fetchPre","fetchPost","fetchAround","renderRow","renderFile","clogFileClick","clogPricingLinkClick","renderBody","focus","isEmpty","isFocusableItem","onItemTabWithin"]),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.keys=null,this.layout=new JT.a,this.list=i.a.createRef(),this.flexpane=i.a.createRef(),this.layout.heightCache.DEFAULT_HEIGHT=69}componentDidMount(){var{scrollmark:e,clogger:t,overStorageLimit:a}=this.props;if(e){var{key:n,offset:r}=e;this.layout.setAnchor(n,r),this.props.saveScrollmark(null)}a&&t.track(ie.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:ie.UiAction.IMPRESSION,step:ie.UiStep.FILE_PANE,ui_component:ie.UiComponent.FILE_STORAGE_LIMIT_BANNER}}});var{focusKey:s,files:i}=this.props;"files"===s&&i.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}componentDidUpdate(e){var{focusKey:t}=e,{focusKey:a,files:n}=this.props;"files"===a&&a!==t&&n.length&&(this.setFocusOnFirstItem(),this.clearFocusKey()),"files"===a&&n.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}onFileClick(e){var{id:t}=e,a=this.list.current;if(a&&t){var{clogger:n}=this.props;n.track(ie.EventId.FLEXPANE_FILE_CLICKED,{click_file_id:t}),this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-a.getScrollTop()}),this.props.previewFile({fileId:t,flexOrigin:"files"})}}onItemTabWithin(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}onScroll(){this.layout.anchor&&this.layout.setAnchor(!1)}setFocusOnFirstItem(){var e=this.keys[0],t=this.list.current;t&&t.focusOnKey(e)}UNSAFE_componentWillReceiveProps(e){var{filetype:t,user:a}=this.props;e.filetype===t&&e.user===a||(this.requestPre&&this.requestPre.cancel(),this.requestPost&&this.requestPost.cancel(),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.layout&&this.layout.setAnchor(!1))}clearFocusKey(){this.props.setFocusKey(null)}clogFileClick(e,t){this.props.clogFileClick({file:t,payload:e})}clogPricingLinkClick(){this.props.clogger.track(ie.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:ie.UiAction.CLICK,step:ie.UiStep.FILE_PANE,ui_element:ie.UiElement.PRICING_LINK,ui_component:ie.UiComponent.FILE_STORAGE_LIMIT_BANNER}}})}fetchAround(){return(!this.requestPre||!this.requestPost)&&(this.reachedEnd?this.fetchPre():this.reachedStart?this.fetchPost():this.fetchPre())}fetchPost(){var e=this;if(this.requestPost)return!1;if(this.reachedEnd)return!1;var{filetype:t,user:a}=this.props;return this.requestPost=this.props.fetchFilesPost({types:t,user:a}),this.requestPost.then(function(){var{paging:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{page:a,pages:n}=t;a>=n&&(e.reachedEnd=!0)}).finally(()=>{this.requestPost=null})}fetchPre(){var e=this;if(this.requestPre)return!1;if(this.reachedStart)return!1;var{filetype:t,user:a}=this.props;return this.requestPre=this.props.fetchFilesPre({types:t,user:a}),this.requestPre.then(function(){var{paging:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{page:a}=t;1===a&&(e.reachedStart=!0)}).finally(()=>{this.requestPre=null})}focus(){var e=this.list.current;e&&e.focus()}isEmpty(){return!this.props.files.length&&this.reachedStart&&this.reachedEnd}isFocusableItem(){var{key:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object($w.a)(e)}renderBody(){var{files:e,overStorageLimit:t}=this.props,a=e.map(e=>e.id);return this.keys=[...a],this.reachedEnd||this.keys.push("Loading".concat(this.keys.length)),this.isEmpty()&&this.keys.push("Placeholder"),i.a.createElement(i.a.Fragment,null,t&&this.renderStorageWarningBanner(),i.a.createElement("div",{className:"p-file_list"},i.a.createElement(fh.a,null,e=>{var{width:t,height:a}=e;return i.a.createElement(Fj.a,{width:t,height:a,keys:this.keys,layout:this.layout,rowRenderer:this.renderRow,onScroll:this.onScroll,ref:this.list,loadAround:this.fetchAround,loadPre:this.fetchPre,loadPost:this.fetchPost,onItemTabWithin:this.onItemTabWithin,onItemClick:this.onFileClick,isFocusableItem:this.isFocusableItem,"aria-label":sN.t("Files")})})))}renderFile(e){var t=this.props.files[e]&&this.props.files[e].id;if(!t)return null;var a=e===this.props.files.length-1,n=l()("p-file_list__file",{"p-file_list__file--last":a});return i.a.createElement(iN,{fileId:t,className:n,clogLinkClick:this.clogFileClick,fullWidth:!0,useRowAction:!0})}renderRow(e){var t=this.keys[e];if(!t)return null;switch(t[0]){case"L":return i.a.createElement("div",{className:"p-file_list__loading"},sN.t("Loading\u2026"));case"P":return i.a.createElement("div",{className:"p-file_list__empty"},sN.t("No matching files were found."));default:return this.renderFile(e)}}renderStorageWarningBanner(){return i.a.createElement("div",{className:"p-file_flexpane__storage-warning-container"},i.a.createElement("div",{className:"display_flex"},i.a.createElement(We.b,{className:"p-message_limit_banner__graphic",type:"eye-closed"}),i.a.createElement("div",null,i.a.createElement("span",null,sN.rt("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit. <a>See paid plans</a>",null,e=>{var{text:t}=e;return i.a.createElement(fe.a,{href:Object(an.j)({entryPoint:"flexpane_file_list"}),onClick:this.clogPricingLinkClick,target:"new","data-qa":"file-flexpane__pricing-link"},t)})))))}render(){var{filetype:e,user:t}=this.props;return i.a.createElement(FT.b,{ref:this.flexpane,focus:this.focus,isEmpty:this.isEmpty(),title:sN.t("Files"),className:l()("p-file_flexpane","p-file_flexpane--list"),bodyClassName:"p-file_flexpane__body",renderBody:this.renderBody,renderControls:()=>i.a.createElement("div",{className:"p-file_list__filters"},i.a.createElement(ZT.a,{filetype:e,onChange:this.props.setFiletype}),i.a.createElement(rN,{userId:t,onChange:e=>{this.props.setUser(e)}})),viewId:"file-list",kbNavOrder:Object(kt.a)()?void 0:4.8})}}file_list_FileList.defaultProps=oN;var cN={fetchFilesPre:function(){return Object(XS.c)(...arguments)},fetchFilesPost:function(){return Object(XS.b)(...arguments)},saveScrollmark:function(){return Object(XS.i)(...arguments)},setFiletype:function(){return Object(XS.j)(...arguments)},setUser:function(){return Object(XS.k)(...arguments)},previewFile:function(){return Object(Ie.c)(...arguments)},clogFileClick:function(){return Object(rT.a)(...arguments)},setFocusKey:e=>Object(hw.a)(e)},lN=Object(d.b)(e=>({files:Object(XS.e)(e),scrollmark:Object(XS.f)(e),filetype:Object(XS.d)(e),user:Object(XS.g)(e),clogger:Object(ne.a)({state:e}),overStorageLimit:Object(we.C)(Object(Se.d)(e)),focusKey:Object(uw.a)(e)}),cN)(e=>{var{forwardedRef:t}=e,a=Object(ya.a)(e,["forwardedRef"]);return i.a.createElement(file_list_FileList,Object(n.a)({ref:t},a))}),dN=i.a.forwardRef((e,t)=>i.a.createElement(lN,Object(n.a)({forwardedRef:t},e))),pN=a("YhFg"),uN=a("nyjr"),hN=a("l4bA"),mN=a("18Pa"),bN=a("SwU4"),_N=a("CEgY"),gN=(a("5NHF"),new x.b("member_directory")),fN={isEnterprise:!1,isAdmin:!1,isRestricted:!1,setSearchQuery:r.a,setFilter:r.a,searchQuery:"",filter:"people",featureSonicMemberDirectory:!1,isVisible:!1,flexParams:[],teamUrl:"/",fetchMemberCountsForTeam:r.a};class member_directory_MemberDirectoryFlexpane extends s.Component{constructor(e){super(e),Object(X.a)(this,["onSearchInputChange","onMenuItemSelected","renderMenu","renderBody","focus","onItemTabWithin"]),this.state={externalTeams:[]},this.list=i.a.createRef(),this.flexpane=i.a.createRef()}componentDidMount(){this.fetchExternalTeams()}onSearchInputChange(e){var t=e.target.value||"";this.props.setSearchQuery(t)}onMenuItemSelected(e){this.props.setFilter(e)}onItemTabWithin(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}getTitle(){var{featureSonicMemberDirectory:e,isEnterprise:t}=this.props;return e?t?gN.t("Organization Directory"):gN.t("Workspace Directory"):null}focus(){var e=this.list.current;e&&e.focus()}fetchExternalTeams(){this.props.fetchMemberCountsForTeam().then(e=>{e&&e.external_teams&&this.setState(()=>({externalTeams:Object.keys(e.external_teams)}))})}renderSearch(){return this.props.featureSonicMemberDirectory?i.a.createElement("div",{className:"p-member_directory__search"},i.a.createElement(AS.a,{value:this.props.searchQuery,onChange:this.onSearchInputChange,placeholder:gN.t("Search by name or title"),icon:"search",autoFocus:!0,inputAriaLabel:gN.t("Search members by name or title",{fallbackHash:"4be82cb9b1458f2d26a012d16010b3630c49c611"})})):null}renderMenu(e){return i.a.createElement(_N.a,{onMenuItemSelected:this.onMenuItemSelected,selectedFilter:this.props.filter,menuProps:e,externalTeams:this.state.externalTeams})}renderFilterIconButton(){if(!this.props.featureSonicMemberDirectory)return null;if(this.props.isRestricted)return null;var e="people"!==this.props.filter,t=e?gN.t("Filter members (filter active)"):gN.t("Filter members");return i.a.createElement(Be.e,{renderMenu:this.renderMenu,position:"bottom-left"},i.a.createElement(mN.a,{icon:"filters","data-qa":"p-member_directory_menu_trigger",showBadge:e,"aria-label":t}))}renderBody(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"p-member_directory__search_filter_container","data-qa":"member_directory"},this.renderSearch(),this.renderFilterIconButton()),i.a.createElement(bN.a,{ref:this.list,onItemTabWithin:this.onItemTabWithin,"aria-label":this.getTitle()}))}render(){var{isVisible:e,flexParams:t,teamUrl:a,featureSonicMemberDirectory:n}=this.props;return n&&e?t.length?null:i.a.createElement(FT.b,{ref:this.flexpane,focus:this.focus,title:this.getTitle(),renderBody:this.renderBody,kbNavOrder:Object(kt.a)()?void 0:5,viewId:"member-directory",headerProps:{optionsHref:this.props.isAdmin?"".concat(a,"admin"):void 0,optionsIconType:"cog-o",optionsTooltipText:gN.t("Manage members")}}):null}}member_directory_MemberDirectoryFlexpane.defaultProps=fN;var vN={setSearchQuery:function(){return Object(hN.f)(...arguments)},setFilter:function(){return Object(hN.d)(...arguments)},fetchMemberCountsForTeam:function(){return Object(pN.b)(...arguments)}},ON=Object(d.b)(e=>{var t=Object(y.j)(e),a=!Object(kt.a)()&&"team"===t||"directory"===t;return{featureSonicMemberDirectory:Object(h.m)(e,"feature_sonic_member_directory"),isEnterprise:Object(h.q)(e),isAdmin:Object(Fe.eb)(e,Object(Ca.b)(e)),isRestricted:Object(Fe.Gb)(Object(Ca.b)(e)),searchQuery:Object(uN.f)(e),filter:Object(uN.a)(e),flexParams:Object(y.e)(e),teamUrl:Object(we.n)(Object(Se.d)(e)),isVisible:a}},vN)(member_directory_MemberDirectoryFlexpane),yN=a("1cj1"),CN=a("3JmS"),jN=a("kyN7"),EN=a("Ect7"),kN=a("YcId"),SN=a("RoDk"),IN=a("bkaq"),wN=new x.b("member_profile"),TN={isPresenceActive:!1,openPrefsModal:r.a,showFileList:r.a,toggleUserPresence:r.a,userCanEditCustomResponses:!1,onClick:r.a};function NN(e){var t,a,{isPresenceActive:r,member:s,menuProps:o,openPrefsModal:c,showFileList:l,team:d,toggleUserPresence:p,userCanEditCustomResponses:u,onClick:h}=e,{featureModernProfileFlexpane:m}=Object(Ho.a)();if(!m)return null;Object(Fe.Hb)(s)?(a=r?wN.t("Set yourself away"):wN.t("[AWAY] Set yourself active"),t=[{label:wN.t("View preferences"),click:()=>{h(),c()}},{label:wN.t("Account settings"),click:()=>{Object(we.P)(d,"/account/settings")},showLinkIndicatorIcon:!0},{type:"separator"},{label:wN.t("View your files"),click:()=>{h(),l({user:s.id})}},{label:a,click:()=>{h(),p()}}]):(t=[{label:wN.t("View files"),click:()=>{h(),l({user:s.id})}}],Object(Fe.Ib)(s)&&u&&t.push({label:wN.t("Create/edit Slackbot responses"),href:Object(we.n)(d,"/customize/slackbot")}));return Object(Yh.a)()&&(t.push({type:"separator"}),t.push({label:wN.t("Copy member ID"),description:s.id,click:()=>{h(),Object(Yh.c)(s.id)}})),i.a.createElement(pw.a,Object(n.a)({},o,{template:t}))}NN.defaultProps=TN;var PN={openPrefsModal:function(){return Object(Ze.a)(...arguments)},showFileList:function(){return Object(Ie.g)(...arguments)},toggleUserPresence:function(){return Object(ja.h)(...arguments)}},AN=Object(d.b)(function(e,t){var{member:a}=t;return{isPresenceActive:Object(ja.f)(e,a.id)===ja.a,userCanEditCustomResponses:Object(sn.I)(e)}},PN)(NN),MN=a("G7w5"),xN=(a("UCMe"),{currentMemberId:void 0,member:void 0,memberTeam:void 0,team:void 0,canInteract:!0,clogger:{track:r.a}});function RN(e){var{currentMemberId:t,member:a,memberTeam:n,team:r,canInteract:o,clogger:c}=e,l=Object(s.useMemo)(()=>{var e=[MN.a.STATUS,MN.a.NAME,MN.a.TIME,MN.a.PHONE,MN.a.EMAIL,MN.a.CUSTOM,MN.a.GUEST,MN.a.SHARED_CHANNELS];return a.id!==t&&e.push(MN.a.SHARED_WORKSPACES),e},[t,a]),{featureModernProfileFlexpane:d}=Object(Ho.a)(),p=Object(s.useCallback)(()=>{c.track(ie.EventId.USER_PROFILE_CLICK)},[c]);if(!d)return null;var u=i.a.createElement(CN.a,{className:"p-member_profile__picture",member:a}),h=i.a.createElement(EN.a,{className:"p-member_profile__restriction",member:a,team:n}),m=i.a.createElement(IN.a,{className:"p-member_profile__name",member:a,canInteract:o});return Object(we.K)(n)?i.a.createElement(i.a.Fragment,null,u,h,m,i.a.createElement(kN.a,{memberTeam:n})):o?i.a.createElement(fh.a,null,e=>{var{width:t,height:s}=e;return i.a.createElement(Ch.b,{width:t,height:s,fade:!0},u,h,i.a.createElement(jN.a,{className:"p-member_profile__buttons",includeOverflow:!0,member:a,showCallButton:!0,onClick:p},i.a.createElement(Be.e,{offsetY:8,position:"bottom-right",renderMenu:e=>i.a.createElement(AN,{member:a,menuProps:e,team:n,onClick:p})},i.a.createElement(jt.d,{className:"p-member_profile_buttons__button p-member_profile_buttons__button--overflow",type:"outline"},i.a.createElement(We.b,{type:"vertical-ellipsis"})))),m,i.a.createElement(MN.b,{member:a,team:r,types:l,onClick:p}))}):i.a.createElement(i.a.Fragment,null,u,h,m,i.a.createElement(SN.a,{member:a}))}RN.defaultProps=xN;var DN=Object(d.b)(function(e,t){var{memberId:a}=t,n=Object(Ca.d)(e,a);if(!n)return{};var r=Object(h.m)(e,"feature_stranger_danger")?Object(yN.a)(e,a):!Object(Fe.Jb)(n);return{currentMemberId:Object(h.d)(e),member:n,memberTeam:Object(Se.i)(e,Object(Fe.P)(n)),team:Object(Se.d)(e),canInteract:r,clogger:Object(ne.a)({state:e})}})(RN),FN=(a("20nV"),new x.b("menu")),LN={fetchTeamProfile:r.a,isEnterprise:!1};class member_profile_flexpane_MemberProfileFlexpane extends s.PureComponent{constructor(e){super(e),this.state={isLoading:!0}}componentDidMount(){this.props.fetchTeamProfile({reason:"MemberProfileFlexpane"}).finally(()=>{this.setState(()=>({isLoading:!1}))})}render(){var e=this.props.isEnterprise?FN.t("Organization Directory"):FN.t("Workspace Directory");return i.a.createElement(FT.b,{className:"p-member_profile_flexpane",dataQa:"member_profile_pane",flexOrigin:"directory",isLoading:this.state.isLoading,renderBody:()=>i.a.createElement(DN,{memberId:this.props.memberId}),title:e,viewId:Of.I.MEMBER_PROFILE_FLEXPANE,kbNavOrder:Object(kt.a)()?void 0:4.2})}}member_profile_flexpane_MemberProfileFlexpane.defaultProps=LN;var UN={fetchTeamProfile:function(){return Object(Oa.e)(...arguments)}},BN=Object(d.b)(e=>({isEnterprise:Object(h.q)(e)}),UN)(member_profile_flexpane_MemberProfileFlexpane);function HN(e,t){return{appProfile:e,appId:Object(Rc.l)(e),botId:Object(Rc.o)(e),isPublished:Object(Rc.G)(e),customIntegrationType:Object(Rc.d)(e),dateCreated:Object(Rc.e)(e),isUserRestricted:Object(Fe.Gb)(t)||Object(Fe.Mb)(t),installedUserId:Object(Rc.v)(e),commands:Object(Rc.c)(e),description:Object(Rc.f)(e),formattedDescription:Object(Rc.h)(e),hideDescriptionExpansion:Object(Rc.J)(e)}}var WN=a("VMwU"),qN=a("yluG"),GN=new x.b("app_profile");var KN=function(e){var{appId:t,serviceId:a,appHomepageUrl:n,supportUrl:r,isSlackIntegration:s,dispatch:o,currentTeamId:c,currentUserId:l,locale:d,currentEnterpriseId:u}=e,h=Object(ne.a)({userId:l,teamId:c,locale:d,enterpriseId:u}),m=Object(Se.d)(Object(p.getStateByTeamId)(c)),b={app_id:t,bot_id:a},_=()=>h.track(ie.EventId.USER_PROFILE_CLICK,b);return[{key:"app_homepage",label:GN.t("App Homepage"),href:n,click:()=>{_(),h.track(ie.EventId.APP_CLICK_APP_HOMEPAGE_IN_USER_PROFILE,{contexts:{ui_context:{step:ie.UiStep.USER_PROFILE,action:ie.UiAction.CLICK,ui_element:ie.UiElement.APP_HOMEPAGE}}})},show:!!n,dataQa:"app_profile_overflow_homepage"},{key:"app_directory_page",label:GN.t("View in App Directory"),href:Object(we.n)(m,"/apps/".concat(t,"?utm_source=in-prod&utm_medium=inprod-link_app_directory-user_profile-click")),click:()=>{_(),h.track(ie.EventId.APP_CLICK_LINK_APP_DIRECTORY_IN_USER_PROFILE,{contexts:{ui_context:{step:ie.UiStep.USER_PROFILE,action:ie.UiAction.CLICK,ui_element:ie.UiElement.LINK_APP_DIRECTORY}}})},show:!0,dataQA:"app_profile_app_directory_page"},{key:"support",label:GN.t("Support for this app"),href:r||void 0,click:()=>{_(),h.track(ie.EventId.APP_CLICK_LINK_APP_SUPPORT_IN_USER_PROFILE,{contexts:{ui_context:{step:ie.UiStep.USER_PROFILE,action:ie.UiAction.CLICK,ui_element:ie.UiElement.LINK_APP_SUPPORT}}}),s&&o(Object(Ua.e)({element:i.a.createElement(xc.a,{trigger:"app_support_profile_button"})}))},show:!0}].filter(e=>e.show)},VN={customIntegrationType:"",appProfile:void 0,dispatch:o.default.noop,currentTeamId:"",currentUserId:"",currentEnterpriseId:""};class app_profile_overflow_menu_button_AppProfileOverflowMenuButton extends s.Component{constructor(e){super(e),Object(X.a)(this,["renderMenu"])}renderMenu(e){var{dispatch:t,appProfile:a,currentTeamId:n,currentUserId:r,currentEnterpriseId:s}=this.props,o=KN({appId:Object(Rc.l)(a),serviceId:Object(Rc.o)(a),appHomepageUrl:Object(Rc.k)(a),supportUrl:Object(Rc.p)(a),isSlackIntegration:Object(Rc.H)(a),dispatch:t,currentTeamId:n,currentUserId:r,locale:Object(x.s)(),currentEnterpriseId:s});return o.length?i.a.createElement(Be.a,{template:o,stripTerminalSeparators:!0,onMenuItemSelected:e.onMenuItemSelected}):null}render(){return this.props.isDistributed&&!this.props.customIntegrationType?i.a.createElement(Be.e,{renderMenu:this.renderMenu,position:"bottom-right"},i.a.createElement(jt.d,{"data-qa":"app_header_overflow_menu_button",className:"p-app_profile_flexpane_header__button p-app_profile_flexpane_header__button_container__button",icon:"chevron-large-down",size:"large"})):null}}app_profile_overflow_menu_button_AppProfileOverflowMenuButton.defaultProps=VN;var zN=Object(d.b)((e,t)=>{var{appProfile:a}=t;return{isDistributed:Object(Rc.D)(a),customIntegrationType:Object(Rc.d)(a),currentTeamId:Object(u.b)(e),currentUserId:Object(h.d)(e),currentEnterpriseId:Object(h.q)(e)?Object(Se.g)(e).id:void 0}})(app_profile_overflow_menu_button_AppProfileOverflowMenuButton),YN=(a("avbl"),new x.b("app_card")),QN={appProfile:void 0,color:"",name:"",tagline:"",settingsUrl:"",clogger:{track:r.a},externalTeam:void 0,isAvatarEmoji:!1};class app_profile_header_AppProfileHeader extends s.Component{constructor(e){super(e),Object(X.a)(this,["calculateStyle","renderSettingsButton","onSettingsButtonClick"])}onSettingsButtonClick(){this.props.clogger.track(ie.EventId.USER_PROFILE_CLICK,{app_id:Object(Rc.l)(this.props.appProfile),bot_id:Object(Rc.o)(this.props.appProfile)}),this.props.clogger.track(ie.EventId.APP_CLICK_LINK_APP_SETTINGS_IN_USER_PROFILE,{contexts:{ui_context:{step:ie.UiStep.USER_PROFILE,action:ie.UiAction.CLICK,ui_element:ie.UiElement.LINK_APP_SETTINGS}}})}calculateStyle(){var{color:e}=this.props,t=Object(WN.f)(e);if(t&&e){var[a,n,r]=t;return{background:"linear-gradient(136.53deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.2) 100%), linear-gradient(312.01deg, ".concat(e," 0%, rgba(").concat(a,",").concat(n,",").concat(r,",0.75) 100%)"),backgroundColor:e}}}renderSettingsButton(){var{isExternal:e,isUserRestricted:t,settingsUrl:a}=this.props;return e||t||!a?null:i.a.createElement(jt.d,{"data-qa":"app_header_settings_button",href:"".concat(a,"?utm_source=in-prod&utm_medium=inprod-link_app_settings-user_profile-click"),className:"p-app_profile_flexpane_header__button p-app_profile_flexpane_header__button_container__button",onClick:this.onSettingsButtonClick},YN.t("Settings"))}render(){var{avatarUrl:e,isAvatarEmoji:t,color:a,isExternal:n,name:r,tagline:s,appProfile:o,externalTeam:c}=this.props;return i.a.createElement("div",{className:l()({"p-app_profile_flexpane_header":!n,"p-app_profile_flexpane_header--external":n}),style:this.calculateStyle(a)},!!n&&i.a.createElement(qN.a,{externalTeam:c}),i.a.createElement("img",{className:l()("p-app_profile_flexpane_header__icon rounded",{"p-app_profile_flexpane_header__icon--emoji":t}),alt:"app avatar","data-qa":"app_header_icon",src:e}),i.a.createElement("div",{className:"p-app_profile_flexpane_header__text"},i.a.createElement("div",{className:"p-app_profile_flexpane_header__row"},i.a.createElement("span",{className:"p-app_profile_flexpane_header__app_name","data-qa":"app_header_name"},r),i.a.createElement("div",null,i.a.createElement("span",{className:"p-app_profile_flexpane_header__app_label rounded","data-qa":"app_header_app_label"},YN.t("APP")))),!!s&&i.a.createElement("div",{className:"p-app_profile_flexpane_header__tagline overflow_hidden","data-qa":"app_header_tagline"},s),i.a.createElement("div",{className:"p-app_profile_flexpane_header__button_container"},this.renderSettingsButton(),i.a.createElement(zN,{appProfile:o}))))}}app_profile_header_AppProfileHeader.defaultProps=QN;var XN=Object(d.b)((e,t)=>{var{appProfile:a}=t,n=Object(Rc.g)(a),r=Object(Rc.a)(e,a);return{clogger:Object(ne.a)({state:e}),avatarUrl:r,isAvatarEmoji:!!n,customIntegrationType:Object(Rc.d)(a),color:Object(Rc.b)(a),tagline:Object(Rc.q)(a),isExternal:Object(Rc.E)(e,a),isDistributed:Object(Rc.D)(a),isUserRestricted:Object(Fe.Gb)(self)||Object(Fe.Mb)(self),settingsUrl:Object(Rc.y)(e,a),name:Object(Rc.m)(a),externalTeam:Object(Rc.u)(e,a)}})(app_profile_header_AppProfileHeader),JN=(a("W90I"),new x.b("app_profile")),ZN={formattedDescription:"",hideExpandButton:!1,clogLinkClick:r.a};function $N(e){var{formattedDescription:t,hideExpandButton:a,clogLinkClick:n}=e,[r,o]=Object(s.useState)(!1);return t?i.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_how_to_use"},i.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},JN.t("How to use this app")),i.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},i.a.createElement("div",{className:l()("p-app_profile_flexpane__description",{"p-app_profile_flexpane__description--collapse":!a&&!r})},i.a.createElement(kk,{formattedDescription:t,clogLinkClick:n}),!a&&i.a.createElement(s.Fragment,null,!r&&i.a.createElement("div",{className:"p-app_profile_flexpane__description__fade"}),i.a.createElement(jt.c,{className:l()("p-app_profile_flexpane__description__button",{"p-app_profile_flexpane__description__button--expand":!r,"p-app_profile_flexpane__description__button--collapse":r}),onClick:()=>{o(!r)}},r?JN.t("Collapse"):JN.t("Expand"),i.a.createElement(We.b,{type:r?"arrow-up-medium":"arrow-down-medium"})))))):null}$N.defaultProps=ZN;var eP=Object(cb.a)($N),tP={autoFillSlashCommand:r.a};class app_profile_slash_command_item_AppProfileSlashCommandItem extends s.PureComponent{autoFillSlashCommand(e){this.props.autoFillSlashCommand({commandName:e});var{appId:t,clogger:a}=this.props;a.track(ie.EventId.USER_PROFILE_CLICK,{app_id:t}),a.track(ie.EventId.APP_PROFILE_SLASH_COMMAND_CLICK,{app_id:t,contexts:{core:{app_id:t}}})}render(){var{command:{name:e,usage:t,description:a}}=this.props;return i.a.createElement(jt.c,{type:"outline","data-qa":e,onClick:()=>this.autoFillSlashCommand(e),className:"p-app_profile_flexpane__slash_command"},i.a.createElement("div",{className:"p-app_profile_flexpane__slash_command__title overflow_ellipsis"},i.a.createElement("span",{className:"bold"},e)," ",i.a.createElement("span",null,t)),i.a.createElement("div",{className:"p-app_profile_flexpane__slash_command__description overflow_ellipsis"},a))}}app_profile_slash_command_item_AppProfileSlashCommandItem.defaultProps=tP;var aP=Object(d.b)(e=>({clogger:Object(ne.a)({state:e})}),e=>Object(Ac.b)({autoFillSlashCommand:qk.a},e))(app_profile_slash_command_item_AppProfileSlashCommandItem);function nP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var rP=new x.b("app_profile"),sP={isPublished:!1,installedUserId:"",appProfile:void 0,appId:"",botId:"",customIntegrationType:"",isUserRestricted:!1,dateCreated:void 0,commands:[],formattedDescription:"",hideDescriptionExpansion:!1,showSlashCommands:!1,clogger:{track:r.a}};class app_profile_BaseAppProfile extends s.PureComponent{constructor(e){super(e),this.clogLinkClick=this.clogLinkClick.bind(this)}getSectionHeaderText(){var{customIntegrationType:e}=this.props;switch(e){case"incoming-webhook":return rP.t("About this Incoming Webhook");case"outgoing-webhook":return rP.t("About this Outgoing Webhook");case"bot":return rP.t("How to use this Bot");case"slash-commands":return rP.t("How to use this Slash Command");default:return null}}getSectionText(){var{customIntegrationType:e}=this.props;switch(e){case"outgoing-webhook":return null;case"bot":return rP.t("You can message bots and invite them to channels like other members.");case"slash-commands":return rP.t("Slash commands take actions when you post them in a conversation.");default:return null}}clogLinkClick(){var{clogger:e,appId:t,botId:a}=this.props;e.track(ie.EventId.USER_PROFILE_CLICK,{appId:t,botId:a})}renderAboutSection(){var{customIntegrationType:e,dateCreated:t,isUserRestricted:a,installedUserId:n}=this.props;if(e){var r=i.a.createElement(Wf.a,{id:n,onClick:e=>{e.preventDefault(),this.clogLinkClick(),Object(Ju.i)(n)}});return i.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_about"},i.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},this.getSectionHeaderText(e)),i.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},this.getSectionText(e)," ",!a&&rP.rt("Created by {custom_integration_creator} on {date_created, date, long}.",{custom_integration_creator:r,date_created:1e3*t})))}return null}renderCommandsSection(){var{appId:e,commands:t,showSlashCommands:a}=this.props;return t&&t.length&&a?i.a.createElement("section",{"data-qa":"app_profile_commands",className:"p-app_profile_flexpane__section"},i.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},rP.t("Responds to\u2026",{note:"Refers to slash commands the app responds to."})),t.map(t=>i.a.createElement(aP,{key:t.name,command:t,appId:e}))):null}renderMetaSection(){return this.props.isPublished?null:i.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_meta"},i.a.createElement("p",null,i.a.createElement("i",{className:"sk_foreground_max"},rP.t("This app has not been reviewed by Slack."))))}render(){var{appProfile:e,appId:t,botId:a,formattedDescription:n,hideDescriptionExpansion:r}=this.props;return!e||Object(Mc.e)(e)?null:i.a.createElement("div",{className:"p-app_profile_flexpane__container","data-qa":"app_profile_container","data-app_id":t,"data-bot_id":a},i.a.createElement(XN,{appProfile:e}),i.a.createElement("div",{className:"sk_primary_foreground large_bottom_margin"},this.renderAboutSection(),i.a.createElement(eP,{formattedDescription:n,hideExpandButton:r,clogLinkClick:this.clogLinkClick}),this.renderCommandsSection(),this.renderMetaSection()))}}app_profile_BaseAppProfile.defaultProps=sP;var iP=Object(d.b)((e,t)=>{var{serviceId:a}=t,n=Object(Dc.c)(e,{serviceId:a});return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nP(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nP(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},HN(n,Object(Ca.b)(e)),{showSlashCommands:Object(Rc.M)(e,n),clogger:Object(ne.a)({state:e})})})(app_profile_BaseAppProfile);function oP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var cP={appId:"",fetchLegacyAppProfile:void 0};class generic_app_profile_GenericAppProfile extends s.Component{constructor(e){super(e),this.state={appProfile:void 0},this.getAppProfileProps=this.getAppProfileProps.bind(this)}componentDidMount(){this.props.appId&&this.fetchAppProfile()}componentDidUpdate(e){this.props.appId!==e.appId&&this.fetchAppProfile()}getAppProfileProps(){var{appProfile:e}=this.state,{currentMember:t}=this.props;return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oP(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oP(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},HN(e,t),{showSettingsSection:!1})}fetchAppProfile(){this.props.fetchLegacyAppProfile({appId:this.props.appId}).then(e=>{this.setState(()=>({appProfile:Object(qk.c)(null,e)}))})}render(){return i.a.createElement(app_profile_BaseAppProfile,this.getAppProfileProps())}}generic_app_profile_GenericAppProfile.defaultProps=cP;var lP=Object(d.b)(e=>({currentMember:Object(Ca.b)(e)}),e=>Object(Ac.b)({fetchLegacyAppProfile:lI.b},e))(generic_app_profile_GenericAppProfile),dP=(a("zbnt"),new x.b("app_profile")),pP={serviceId:void 0,appId:void 0,customIntegrationType:""};class app_profile_flexpane_AppProfilePane extends s.PureComponent{render(){var e={"incoming-webhook":dP.t("About this Incoming Webhook"),"outgoing-webhook":dP.t("About this Outgoing Webhook"),bot:dP.t("About this Bot"),"slash-commands":dP.t("About this Slash Command")},t=dP.t("About this app"),a=e[this.props.customIntegrationType]||t;return i.a.createElement(FT.b,{className:"p-app_profile_flexpane",dataQa:"app_profile_pane",title:a,viewId:"app-profile-flepane",kbNavOrder:Object(kt.a)()?void 0:4.7,renderBody:()=>i.a.createElement(fh.a,null,e=>{var{width:t,height:a}=e;return i.a.createElement(Ch.b,{width:t,height:a,fade:!0},this.props.serviceId?i.a.createElement(iP,{serviceId:this.props.serviceId}):i.a.createElement(lP,{appId:this.props.appId}))})})}}app_profile_flexpane_AppProfilePane.defaultProps=pP;var uP=Object(d.b)((e,t)=>{var{serviceId:a}=t,n=a?Object(Dc.c)(e,{serviceId:a}):void 0;return{customIntegrationType:Object(Rc.d)(n)}})(app_profile_flexpane_AppProfilePane),hP=a("HYSh"),mP=a("9XiS"),bP=a("DQNL"),_P=a("3Hq1"),gP=new x.b("a11y");var fP=a("VBRD");a("Sqd7");var vP,OP,yP=function(e){var{children:t}=e;return i.a.createElement(fP.a,null,e=>{var{width:a,height:n,measureRef:r}=e;return i.a.createElement("div",{ref:r,className:"c-measure_container"},t({width:a,height:n}))})},CP=a("Xuqh"),jP=a("0xwB"),EP=a("pbgM"),kP=a("plEq"),SP=a("P3Po"),IP=a("kpmE"),wP=a("rVFV"),TP=80,NP=new x.b("user_groups");var PP=Object(xt.b)("Validate user group name",(e,t,a)=>{var{name:n,prevName:r,reason:s}=a;if(function(e,t){Object(h.m)(e,"feature_sonic_user_groups")&&(OP={hasNameRequiredWarning:NP.t("Please enter a name for this group."),hasReservedName:NP.t('The name "{name}" is reserved and cannot be used.',{name:t,fallbackHash:"fc741acb2c5d6bf755a8dfceb173bf447313e359"}),hasMaxLengthWarning:NP.t("Names can\u2019t be more than {maxLength} characters.",{maxLength:TP}),hasNameTakenWarning:NP.t("This name is already in use by another group."),unknownError:NP.t("Sorry, something went wrong. Please try a different name.")})}(t(),n),vP={admins:NP.t("Team Admins"),owners:NP.t("Team Owners")},!n||!n.trim())return Promise.resolve(OP.hasNameRequiredWarning);var i=n.toLowerCase().trim();return r&&i===r.toLowerCase().trim()?Promise.resolve(""):i===vP.admins.toLowerCase()||i===vP.owners.toLowerCase()?Promise.resolve(OP.hasReservedName):Object(wP.a)(n)>TP?Promise.resolve(OP.hasMaxLengthWarning):e(Object(IP.p)({name:n,reason:s})).then(e=>{var{error:t}=e;return"name_already_exists"===t?OP.hasNameTakenWarning:t?OP.unknownError:""})});PP.meta={name:"validateUserGroupName",key:"utilityValidateUserGroupNameValidateUserGroupName",description:"Validate user group name"},PP.propTypes={name:o.default.string,prevName:o.default.string};var AP,MP,xP=PP,RP=new x.b("user_groups"),DP=80;var FP=Object(xt.b)("Validate user group handle",(e,t,a)=>{var{handle:n,prevHandle:r,reason:s}=a;return function(e,t){Object(h.m)(e,"feature_sonic_user_groups")&&(AP={hasHandleRequiredWarning:RP.t("Please enter a handle for this group."),hasMaxLengthWarning:RP.t("Handles can\u2019t be more than {maxLength} characters.",{maxLength:DP}),hasReservedHandle:RP.t("The group name @{handle} is reserved and cannot be used.",{handle:t,fallbackHash:"87ee177397df658b72975b506208aebb74090907"}),hasSpecialsWarning:RP.t("Handles can only contain letters or numbers."),hasPunctuationWarning:RP.t("Handles can only contain letters or numbers."),hasLowercaseWarning:RP.t("Handles can only be in lowercase."),hasHandleTakenWarning:RP.t("This handle is already in use by a member, channel, or another group."),unknownError:RP.t("Sorry, something went wrong. Please try a different handle.")})}(t(),n),MP={admins:RP.t("admins"),owners:RP.t("owners")},n&&n.trim()?n===r?Promise.resolve(""):n.toLowerCase()===MP.admins.toLowerCase()||n.toLowerCase()===MP.owners.toLowerCase()?Promise.resolve(AP.hasReservedHandle):/[ ,;'`~!@#$%^&*+=\\:"<>?|]/.test(n.trim())?Promise.resolve(AP.hasSpecialsWarning):/^[-|_]+$/.test(n)?Promise.resolve(AP.hasPunctuationWarning):/[A-Z]/.test(n)?Promise.resolve(AP.hasLowercaseWarning):Object(wP.a)(n)>DP?Promise.resolve(AP.hasMaxLengthWarning):e(Object(IP.o)({handle:n,reason:s})).then(e=>{var{error:t}=e;return"handle_already_exists"===t?AP.hasHandleTakenWarning:t?AP.unknownError:""}):Promise.resolve(AP.hasHandleRequiredWarning)});FP.meta={name:"validateUserGroupHandle",key:"utilityValidateUserGroupHandleValidateUserGroupHandle",description:"Validate user group handle"},FP.propTypes={handle:o.default.string,prevHandle:o.default.string};var LP=FP,UP=a("20gP"),BP=a("dI1W"),HP=new x.b("user_groups"),WP={selectedChannels:[],onChange:r.a},qP=32,GP={entities:{channels:{includePublic:!0,includePrivate:!0,includeFromAnotherTeam:!1,includeMpims:!1,includeArchived:!1,searchPreviousNames:!1,onlyVisibleMpims:!1,includeRequired:!0}},limit:100,tiered:!0,sort:{frecency:!0}};class user_group_default_channel_picker_UserGroupDefaultChannelPicker extends s.PureComponent{getSelectedOptions(){return(this.props.selectedChannels||[]).map(e=>({value:e}))}renderChannelOption(e){return i.a.createElement(NT.a,{channel:e.entity,channelId:e.value})}render(){if(!this.props.featureSonicUserGroups)return null;var{onChange:e}=this.props,t=HP.t("Default channels"),a=HP.t("Group members are added to these channels automatically.");return i.a.createElement(xs.a,{htmlFor:"user_group_default_channel_select",id:"user_group_default_channel",key:"user_group_default_channel",text:t,optional:!0},i.a.createElement(UP.c,{selectedOptions:this.getSelectedOptions(),renderOption:this.renderChannelOption,width:"100%",optionsRowHeight:qP,onSelectedItemsChange:e,selectId:"user_group_default_channel_select",searcherOptions:GP}),i.a.createElement(BP.a,null,a))}}user_group_default_channel_picker_UserGroupDefaultChannelPicker.defaultProps=WP;var KP={search:$T.c},VP=Object(d.b)(e=>({getChannelById:t=>Object(L.e)(e,t),featureSonicUserGroups:Object(h.m)(e,"feature_sonic_user_groups")}),KP)(user_group_default_channel_picker_UserGroupDefaultChannelPicker),zP=new x.b("user_groups");class user_group_edit_create_form_UserGroupEditCreateForm extends s.PureComponent{constructor(e){super(e),this.state={name:e.detailsFormValues.name,handle:e.detailsFormValues.handle,purpose:e.detailsFormValues.purpose,channels:e.detailsFormValues.channels};var t=!this.state.name||!this.state.handle;this.props.setRequiredFieldsEmpty(t),this.validateUserGroupName=Object(td.a)(this.validateUserGroupName,300).bind(this),this.validateUserGroupHandle=Object(td.a)(this.validateUserGroupHandle,300).bind(this),Object(X.a)(this,["onNameChange","onHandleChange","onPurposeChange","onChannelsUpdate","getFormValues","setUserGroupFormRef","maybeRenderApiError","focusNameInput"]),this.postValidateHandle=null,this.postValidateName=null,this.nameInputRef=i.a.createRef()}componentDidMount(){this.props.onRef(this),this.focusNameInput()}componentDidUpdate(e){if(e!==this.props){var t=!this.state.name||!this.state.handle;this.props.setRequiredFieldsEmpty(t)}}componentWillUnmount(){this.props.onRef(void 0)}onNameChange(e){return this.postValidateName&&(this.postValidateName.cancel(),this.postValidateName=null),this.setState(()=>({name:e})),this.validateUserGroupName(e)}onHandleChange(e){this.postValidateHandle&&(this.postValidateHandle.cancel(),this.postValidateHandle=null);var t=e.replace(/ /g,"");return this.setState(()=>({handle:t}))," "!==e.charAt(0)?this.validateUserGroupHandle(t):Promise.resolve()}onPurposeChange(e){this.props.onPurposeChange(e),this.setState(()=>({purpose:e}))}onChannelsUpdate(e){var t=e.map(e=>e.value);this.setState(()=>({channels:t}))}getFormValues(){return this.state}setUserGroupFormRef(e){this.defaultChannelsRef=e}focusNameInput(){this.nameInputRef.current.focus()}validateUserGroupHandle(e){var{userGroup:t}=this.props;return this.props.validateUserGroupHandle({handle:e,prevHandle:Object(bP.f)(t,{includeAtSign:!1}),reason:"user-group-edit-create-form"}).then(e=>{this.props.setFormErrors({handleError:e})}).finally(()=>{this.postValidateHandle=null})}validateUserGroupName(e){var{userGroup:t}=this.props;return this.props.validateUserGroupName({name:e,prevName:Object(bP.h)(t),reason:"user-group-edit-create-form"}).then(e=>{this.props.setFormErrors({nameError:e})}).finally(()=>{this.postValidateName=null})}hasValidationErrors(e){return Object(hp.a)(e,e=>e)}maybeRenderApiError(){if(!this.props.featureSonicUserGroups)return null;if(this.props.submitError){var e=zP.t("We\u2019re not sure why, but that didn\u2019t work. Try again?");return i.a.createElement(_s.a,{level:"error",type:"inline",className:"margin_bottom_100"},e)}return!1}maybeRenderAutogeneratedUserGroupAlert(){var e=this.props.userGroup;if(!Object(bP.n)(e))return null;var t,a=zP.t("This user group is automatically generated for Workspace Admins.",{fallbackHash:"0cf6a765aa60fc4bc7f34f9ec7e18139d7ab4c37"}),n=zP.t("This user group is automatically generated for Workspace Owners.",{fallbackHash:"18d8fa9ec13425420cc46bc2669fc1f2055284c6"});return Object(bP.p)(e)&&(t=n),Object(bP.o)(e)&&(t=a),i.a.createElement(_s.a,{level:"info",type:"inline",className:"margin_bottom_100"},t)}renderUserGroupNameField(){if(!this.props.featureSonicUserGroups)return null;var e=zP.t("Name"),t=zP.t("e.g. Accounts Team");return i.a.createElement("div",null,i.a.createElement(xs.a,{htmlFor:"name_label",id:"user_group_name",key:"user_group_name",text:e},i.a.createElement(kP.a,{name:"user_group_name",ref:this.nameInputRef,id:"name_input",placeholder:t,labelId:"user_group_name",value:this.state.name,type:"text",onChange:e=>this.onNameChange(e),errorText:this.props.errors.nameError,isRequired:!0,useInlineAlert:!0,isDisabled:Object(bP.n)(this.props.userGroup)})))}renderUserGroupHandleField(){if(!this.props.featureSonicUserGroups)return null;var e=zP.t("e.g. accounts-team"),t=zP.t("You\u2019ll use the display name to get the group\u2019s attention. It should be all lowercase, with no spaces."),a=zP.t("Handle");return i.a.createElement("div",null,i.a.createElement(xs.a,{htmlFor:"handle_label",id:"user_group_handle",key:"user_group_handle",text:a},i.a.createElement(kP.a,{name:"user_group_handle",id:"handle_input",placeholder:e,labelId:"user_group_handle",value:this.state.handle,type:"text",onChange:e=>this.onHandleChange(e),errorText:this.props.errors.handleError,hintText:t,isRequired:!0,icon:"mentions",useInlineAlert:!0,isDisabled:Object(bP.n)(this.props.userGroup)})))}renderUserGroupPurposeField(){if(!this.props.featureSonicUserGroups)return null;var e=zP.t("Purpose"),t=zP.t("What is this group about?");return i.a.createElement("div",null,i.a.createElement(xs.a,{htmlFor:"purpose_label",id:"user_group_purpose",key:"user_group_purpose",text:e,optional:!0},i.a.createElement(SP.a,{name:"user_group_purpose",id:"purpose_input",labelId:"user_group_purpose",value:this.state.purpose,type:"text",onChange:e=>this.onPurposeChange(e),errorText:this.props.errors.purposeError,hintText:t,maxCharacterLimit:this.props.purposeMaxLength,useInlineAlert:!0})))}renderDefaultChannelSelect(){return i.a.createElement(VP,{selectedChannels:this.state.channels,onChange:this.onChannelsUpdate})}render(){return this.props.featureSonicUserGroups?i.a.createElement("div",null,this.maybeRenderApiError(),this.maybeRenderAutogeneratedUserGroupAlert(),i.a.createElement("form",{className:"p-user_group_create_form"},this.renderUserGroupNameField(),this.renderUserGroupHandleField(),this.renderUserGroupPurposeField(),this.renderDefaultChannelSelect())):null}}user_group_edit_create_form_UserGroupEditCreateForm.defaultProps={detailsFormValues:{name:"",handle:"",purpose:"",channels:[]},errors:{nameError:"",handleError:"",purposeError:""},submitError:""};var YP={validateUserGroupName:xP,validateUserGroupHandle:LP},QP=Object(d.b)(e=>({featureSonicUserGroups:Object(h.m)(e,"feature_sonic_user_groups")}),YP)(user_group_edit_create_form_UserGroupEditCreateForm),XP=(a("UJZI"),new x.b("user_groups")),JP={onSelectedItemsChange:r.a,getMemberById:r.a,userGroupMemberIds:[],isEnterprise:null,teamId:null},ZP=32,$P=148;class user_group_member_selector_UserGroupMemberSelector extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["getSelectedMembers","renderMemberOption","filterMembers"])}getSelectedMembers(e){return e.map(e=>this.formatMemberOption(this.props.getMemberById(e)))}formatMemberOption(e){return e?{label:Object(Fe.F)(e),value:e.id}:null}filterMembers(e){return!(this.props.isEnterprise&&!Object(Fe.o)(e,[this.props.teamId]).length)}renderMemberOption(e){return i.a.createElement(PT.a,{id:e.value})}render(){var{userGroupMemberIds:e}=this.props,t=this.getSelectedMembers(e);return i.a.createElement(UP.c,{isRequired:!0,focusOnMount:!0,key:"user_group_member_select",selectId:"user_group_member_select",renderOption:this.renderMemberOption,selectedOptions:t,onSelectedItemsChange:this.props.onSelectedItemsChange,placeholderText:XP.t("Search by name"),width:"100%",size:"large",maxHeight:$P,optionsRowHeight:ZP,searcherOptions:{entities:{members:{includeSelf:!0,onlyLocalTeam:!0,includeSlackbot:!1,includeBots:!1,includeDeleted:!1,includeGuests:!1}},allowEmptyQuery:!0,sort:{frecency:!1,selfFirst:!1},limit:40,filter:this.filterMembers}})}}user_group_member_selector_UserGroupMemberSelector.defaultProps=JP;var eA=Object(d.b)((e,t)=>{var{groupId:a}=t,n=Object(hP.e)(e,a);return{userGroupMemberIds:Object(bP.g)(n),getMemberById:t=>Object(Ca.d)(e,t),isEnterprise:Object(c_.d)(e),teamId:Object(u.b)(e)}})(user_group_member_selector_UserGroupMemberSelector),tA=new x.b("user_groups"),aA={groupId:void 0,onSelectedItemsChange:r.a,userGroupMemberIds:[],fetchAndUpsertUserGroupMembers:r.a};class user_group_member_management_UserGroupMemberManagement extends s.PureComponent{constructor(e){super(e),this.state={updatedGroupMembers:e.userGroupMemberIds,displayNoMemberError:!1,haveUpsertedExistingMembers:!1},Object(X.a)(this,["setAllMembers","onSelectedItemsChange"])}componentDidMount(){var{groupId:e}=this.props;e&&this.props.fetchAndUpsertUserGroupMembers({groupId:e}).then(e=>{this.setState(()=>({haveUpsertedExistingMembers:!0})),Object(bs.a)(e)||this.setState(()=>({updatedGroupMembers:e}))})}componentWillUnmount(){this.keyCommands&&this.keyCommands.reset()}onSelectedItemsChange(e){this.setDisplayNoMemberError(!e.length),this.setAllMembers(e.map(e=>e.value)),this.props.onSelectedItemsChange(e)}getUpdatedUserGroupMembers(){return this.state.updatedGroupMembers}setDisplayNoMemberError(e){this.setState(()=>({displayNoMemberError:e}))}setAllMembers(e){this.setState(()=>({updatedGroupMembers:e}))}validateUpdatedGroupMemberCount(){var e=this.state.updatedGroupMembers.length>0;return e||this.setDisplayNoMemberError(!0),e}maybeRenderNoMembersAlert(){return this.state.displayNoMemberError?i.a.createElement(_s.a,{type:"inline",level:"error",className:"margin_right_150 margin_left_150 margin_bottom_100","data-qa-user-group-error":!0},tA.t("User groups need to have at least one member.")):null}renderLoadingSpinner(){return i.a.createElement("div",{className:"full_height full_width display_flex align_items_center","data-qa-user-group-loading":!0},i.a.createElement(Oc.a,{size:"jumbo",className:"inline_block full_width margin_top_200"}))}renderUserGroupMemberSelector(){var{haveUpsertedExistingMembers:e}=this.state,{groupId:t}=this.props;return i.a.createElement("div",{className:"p-user_group_member_selector","data-qa-user-group-member-management-body":!0},!t||e?i.a.createElement("div",null,this.maybeRenderNoMembersAlert(),i.a.createElement(eA,{groupId:this.props.groupId,onSelectedItemsChange:this.onSelectedItemsChange})):i.a.createElement("div",{className:"p-user_group_member_selector_loading_spinner_container"},this.renderLoadingSpinner()))}render(){return this.renderUserGroupMemberSelector()}}user_group_member_management_UserGroupMemberManagement.defaultProps=aA;var nA={fetchAndUpsertUserGroupMembers:EP.j},rA=Object(d.b)((e,t)=>{var{groupId:a}=t,n=Object(hP.e)(e,a);return{userGroupMemberIds:Object(bP.g)(n)}},nA,null,{withRef:!0})(user_group_member_management_UserGroupMemberManagement),sA=Object(xt.b)("Validate the user group form",(e,t,a)=>{var{name:n,handle:r,prevName:s,prevHandle:i}=a;return Promise.all([e(xP({name:n,prevName:s})),e(LP({handle:r,prevHandle:i}))]).then(e=>{var[t,a]=e;return{nameError:t,handleError:a}})});sA.meta={name:"validate",key:"componentsFlexpaneUserGroupsUtilityValidationValidate",description:"Validate the user group form"},sA.propTypes={name:o.default.string,handle:o.default.string,prevName:o.default.string,prevHandle:o.default.string};var iA=sA;function oA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function cA(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oA(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oA(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var lA,dA=new x.b("user_groups"),pA={userGroupId:"",userGroupName:null,userGroupHandle:null,userGroupPurpose:"",userGroupDefaultChannels:[],closeModal:r.a,enqueueToast:r.a,showUserGroupDetails:r.a},uA=Object(Wa.b)(),hA=140;class user_group_edit_create_dialog_UserGroupEditCreateDialog extends s.PureComponent{constructor(e){super(e),this.state={formSubmitPending:!1,errors:{nameError:"",handleError:"",purposeError:""},formStep:"",submitError:"",requiredFieldsEmpty:!1,detailsFormValues:{name:this.props.userGroupName,handle:this.props.userGroupHandle,purpose:this.props.userGroupPurpose,channels:this.props.userGroupDefaultChannels},purposeTooLong:!1},Object(X.a)(this,["setFormErrors","setUserGroupFormRef","setUserGroupMemberManagementRef","setRequiredFieldsEmpty","onSubmitSuccess","onSubmitFailure","onDetailsStepComplete","onEditDialogSubmit","onCreateDialogSubmit","createDialogViewInfo","shouldShowCloseDialogSpeedBump","onSelectedItemsChange","onPurposeChange"]),this.onPurposeChange=Object(td.a)(this.onPurposeChange,300).bind(this),this.formRef=null}onCreateDialogSubmit(){if(!this.props.featureSonicUserGroups)return null;var{detailsFormValues:{name:e,handle:t,purpose:a,channels:n}={}}=this.state;if(!this.userGroupMemberManagementRef)return!1;if(!this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount())return this.setRequiredFieldsEmpty(!0),!1;var r=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.createUserGroup({name:Object(Qy.a)(e),handle:t,description:a,channels:n,users:r,reason:"onCreateDialogSubmit"}).then(e=>{var{id:t}=e;this.props.showUserGroupDetails({groupId:t}),this.props.addUserGroupIds([t])}).then(()=>{this.props.enqueueToast({element:i.a.createElement(Ga.b,null,dA.t("User group created!"))}),this.onSubmitSuccess()}).catch(e=>{uA.error("Error creating user group: ".concat(e)),this.onSubmitFailure(e)})}onDetailsStepComplete(){var e=this.formRef.getFormValues();return this.setFormSubmitPending(!0),this.props.validate(cA({},e,{prevName:this.props.userGroupName,prevHandle:this.props.userGroupHandle})).then(t=>{this.setFormErrors(t),this.hasValidationErrors(t)?this.setFormSubmitPending(!1):this.state.formStep===lA.edit.id?this.onEditDialogSubmit(e):(this.setDetailsFormValues(e),this.setDialogStep(lA.members.id),this.setFormSubmitPending(!1))})}onEditDialogSubmit(e){var{name:t,handle:a,purpose:n,channels:r}=e;if(!this.props.featureSonicUserGroups)return null;var{userGroupId:s}=this.props;return this.props.updateUserGroup({groupId:s,name:Object(Qy.a)(t),handle:a,description:n,channels:r,reason:"onEditDialogSubmit"}).then(()=>{this.props.enqueueToast({element:i.a.createElement(Ga.b,null,dA.t("Group has been updated."))}),this.onSubmitSuccess()}).catch(e=>{uA.error("Error editing user group: ".concat(e)),this.onSubmitFailure(e)})}onPurposeChange(e){var t=e.length>hA;this.setState(()=>({purposeTooLong:t}))}onSelectedItemsChange(e){this.setRequiredFieldsEmpty(!e.length)}onSubmitFailure(e){this.setFormSubmitPending(!1),this.setApiError(e)}onSubmitSuccess(){this.setFormSubmitPending(!1),this.props.closeModal(),this.setApiError("")}getDetailsFormDialogProps(){if(!this.props.featureSonicUserGroups)return null;var e=this.state.formStep,t=Object(hp.a)(lA,t=>t.id===e);return{title:t.title,contentLabel:t.title,goButtonText:t.goButtonText,onGo:this.onDetailsStepComplete,shouldCloseOnCancel:!0,cancelText:dA.t("Cancel"),shouldCloseOnGo:!1,footerText:t.footerText}}getMemberSelectorDialogProps(){return this.props.featureSonicUserGroups?{title:lA.members.title,contentLabel:lA.members.title,shouldCloseOnGo:!0,bodyClassName:"p-user_group_member_management__dialog_body",onGo:this.onCreateDialogSubmit,goButtonText:lA.members.goButtonText,shouldCloseOnCancel:!1,cancelText:dA.t("Back"),onCancel:()=>{this.setDialogStep(lA.details.id)},footerText:lA.members.footerText}:null}setApiError(e){this.setState(()=>({submitError:e}))}setDetailsFormValues(e){this.setState(t=>({detailsFormValues:cA({},t.detailsFormValues,{},e)}))}setDialogStep(e){this.setState(()=>({formStep:e}))}setFormErrors(e){this.setState(t=>({errors:cA({},t.errors,{},e)}))}setFormSubmitPending(e){this.setState(()=>({formSubmitPending:e}))}setRequiredFieldsEmpty(e){this.setState(()=>({requiredFieldsEmpty:e}))}setUserGroupFormRef(e){this.formRef=e}setUserGroupMemberManagementRef(e){this.userGroupMemberManagementRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}UNSAFE_componentWillMount(){this.createDialogViewInfo(),this.props.userGroupId?this.setDialogStep(lA.edit.id):this.setDialogStep(lA.details.id)}createDialogViewInfo(){this.props.featureSonicUserGroups&&(lA={details:{id:"details",footerText:dA.t("Step 1 of 2"),title:dA.t("Create User Group"),goButtonText:dA.t("Next")},members:{id:"members",footerText:dA.t("Step 2 of 2"),title:dA.t("Add members"),goButtonText:dA.t("Create Group")},edit:{id:"edit",footerText:null,title:dA.t("Edit User Group"),goButtonText:dA.t("Save")}})}hasValidationErrors(e){return!!Object(hp.a)(e,e=>e.length)}shouldShowCloseDialogSpeedBump(e){if("go"===e||this.state.formStep===lA.members.id)return!1;var t=this.formRef.getFormValues();return!Object(rf.a)(this.state.detailsFormValues,t)}renderDetailsForm(){return i.a.createElement("div",null,i.a.createElement(QP,Object(n.a)({},this.props,{detailsFormValues:this.state.detailsFormValues,errors:this.state.errors,submitError:this.state.submitError,setFormErrors:this.setFormErrors,onRef:e=>this.setUserGroupFormRef(e),setRequiredFieldsEmpty:this.setRequiredFieldsEmpty,onPurposeChange:this.onPurposeChange,purposeMaxLength:hA,userGroup:this.props.userGroup})))}renderDialogStep(){return this.state.formStep===lA.details.id||this.state.formStep===lA.edit.id?this.renderDetailsForm():this.state.formStep===lA.members.id?this.renderMemberSelector():""}renderMemberSelector(){return this.props.featureSonicUserGroups?i.a.createElement(rA,{groupId:this.props.userGroupId,ref:this.setUserGroupMemberManagementRef,onSelectedItemsChange:this.onSelectedItemsChange}):null}render(){if(!this.props.featureSonicUserGroups)return null;var e=this.hasValidationErrors(this.state.errors)||this.state.requiredFieldsEmpty||this.state.purposeTooLong,t=this.state.formStep===lA.details.id||this.state.formStep===lA.edit.id?this.getDetailsFormDialogProps():this.getMemberSelectorDialogProps();return i.a.createElement(di.a,Object(n.a)({showCancelButton:!0,goButtonIsDisabled:e,goButtonIsPending:this.state.formSubmitPending},t,{getShouldShowSpeedBump:this.shouldShowCloseDialogSpeedBump,speedBumpCancelButtonText:dA.t("Keep Editing"),speedBumpContinueButtonText:dA.t("Close"),speedBumpTitleText:dA.t("Your work won\u2019t be saved - are you sure you want to close?")}),this.renderDialogStep())}}user_group_edit_create_dialog_UserGroupEditCreateDialog.defaultProps=pA;var mA={createUserGroup:EP.g,updateUserGroup:EP.o,closeModal:Ua.a,enqueueToast:qa.c,showUserGroupDetails:Ie.n,validate:iA,addUserGroupIds:mP.a},bA=Object(d.b)((e,t)=>{var a=Object(hP.e)(e,t.userGroupId);return a?{userGroup:a,userGroupName:Object(bP.h)(a),userGroupHandle:Object(bP.f)(a,{includeAtSign:!1}),userGroupPurpose:Object(bP.e)(a),userGroupDefaultChannels:Object(bP.d)(e,a),featureSonicUserGroups:Object(h.m)(e,"feature_sonic_user_groups")}:{userGroup:{},userGroupName:"",userGroupHandle:"",userGroupPurpose:"",userGroupDefaultChannels:[],featureSonicUserGroups:Object(h.m)(e,"feature_sonic_user_groups")}},mA)(user_group_edit_create_dialog_UserGroupEditCreateDialog),_A={isDetailsView:!1,featureSonicUserGroups:!1,onEnableUserGroup:r.a,onDisableUserGroup:r.a,canEditUserGroups:r.a,canCreateAndDeleteUserGroups:r.a,openModal:r.a,menuProps:{},onClick:r.a},gA=new x.b("user_groups");class user_group_context_menu_UserGroupContextMenu extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["onEnableUserGroup","onDisableUserGroup","onEditDetails","onEditMembers"])}onEnableUserGroup(){return this.props.onClick(),this.props.onEnableUserGroup()}onDisableUserGroup(){this.props.openModal({element:this.renderConfirmationDialog({action:"disable_group",onSubmit:this.props.onDisableUserGroup})}),this.props.onClick()}onEditDetails(){this.props.openModal({element:this.renderEditDialog(this.props.groupId)})}onEditMembers(){this.props.openModal({element:this.renderEditMembersDialog()})}getEditMenuItems(){if(!this.props.featureSonicUserGroups)return null;var{isAutoGenerated:e,isDetailsView:t}=this.props;if(e&&t)return null;var a=[];return t||e||a.push({key:"menu-edit-members",label:gA.t("Edit group members..."),onSelected:this.onEditMembers}),a.push({key:"menu-edit-details",label:gA.t("Edit group details..."),onSelected:this.onEditDetails}),a}getMenuItems(){if(!this.props.featureSonicUserGroups)return null;var e=[];if(this.userGroupIsEditable()){var t=this.getEditMenuItems();t&&e.push(...t)}return this.canEnableUserGroup()?e.push({key:"menu-enable",label:gA.t("Enable group"),onSelected:()=>this.onEnableUserGroup()}):this.canDisableUserGroup()&&e.push({key:"menu-disable",label:gA.t("Deactivate group"),danger:!0,onSelected:()=>this.onDisableUserGroup()}),e}userGroupIsEditable(){return this.props.canEditUserGroups()&&this.props.isActive}canDisableUserGroup(){return this.props.canCreateAndDeleteUserGroups()&&this.props.isActive}canEnableUserGroup(){return this.props.canCreateAndDeleteUserGroups()&&!this.props.isActive}renderConfirmationDialog(e){var{action:t,onSubmit:a}=e,{groupId:n}=this.props;return i.a.createElement(wA,{groupId:n,action:t,onSubmit:a})}renderEditDialog(e){return i.a.createElement(bA,{userGroupId:e})}renderEditMembersDialog(){var{groupId:e}=this.props;return i.a.createElement(FA,{groupId:e})}render(){return this.props.featureSonicUserGroups?i.a.createElement(Be.f,Object(n.a)({},this.props.menuProps,{width:"auto"}),this.getMenuItems().map(e=>i.a.createElement(Be.b,e))):null}}user_group_context_menu_UserGroupContextMenu.defaultProps=_A;var fA=Object(d.b)((e,t)=>{var{groupId:a,isDetailsView:n}=t,r=Object(hP.e)(e,a);return{isActive:Object(bP.v)(r),isAutoGenerated:Object(bP.n)(r),isDetailsView:n,canEditUserGroups:()=>Object(bP.c)(e),canCreateAndDeleteUserGroups:()=>Object(bP.b)(e),featureSonicUserGroups:Object(h.m)(e,"feature_sonic_user_groups")}},(e,t)=>{var{groupId:a}=t;return{openModal:function(){return e(Object(Ua.e)(...arguments))},onLoad:()=>e(Object(EP.j)({groupId:a})),onDisableUserGroup:()=>{e(Object(EP.h)({groupId:a})).then(()=>e(Object(Ie.o)()))},onEnableUserGroup:()=>{e(Object(EP.i)({groupId:a})).then(()=>e(Object(Ie.n)({groupId:a})))}}})(user_group_context_menu_UserGroupContextMenu),vA=(a("sQIv"),new x.b("user_groups")),OA={userGroup:void 0};class user_groups_details_action_bar_UserGroupsDetailsActionBar extends s.Component{constructor(e){super(e),this.renderUserGroupOptionsMenu=this.renderUserGroupOptionsMenu.bind(this)}renderUserGroupOptionsMenu(e){return i.a.createElement(fA,{menuProps:e,groupId:this.props.userGroup.id,isDetailsView:!0})}renderUserGroupOptions(){if(!this.props.featureSonicUserGroups)return null;var e=vA.t("More actions");return i.a.createElement(Be.e,{renderMenu:this.renderUserGroupOptionsMenu,position:"bottom-right"},i.a.createElement(qe.c,{tip:e,delay:qe.a,position:"top-right"},i.a.createElement(jt.d,{type:"outline",className:"p-user_group_details__button--options","data-qa-user-group-details-group-options-btn":!0,"aria-label":e,icon:"ellipsis"})))}renderEditMembersButton(){return this.props.featureSonicUserGroups?i.a.createElement(jt.d,{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditMembers,"data-qa-user-group-details-edit-members-btn":!0},vA.t("Edit Members")):null}renderEditDetailsButton(){return this.props.featureSonicUserGroups?i.a.createElement(jt.d,{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditDetails,"data-qa-user-group-details-edit-details-btn":!0},vA.t("Edit Details")):null}renderPrimaryAction(){return Object(bP.n)(this.props.userGroup)?this.renderEditDetailsButton():this.renderEditMembersButton()}render(){return this.props.featureSonicUserGroups?i.a.createElement("div",{className:"p-user_group_details__actions"},this.renderPrimaryAction(),this.renderUserGroupOptions()):null}}user_groups_details_action_bar_UserGroupsDetailsActionBar.defaultProps=OA;var yA=Object(d.b)((e,t)=>{var{groupId:a}=t;return{userGroup:Object(hP.e)(e,a),featureSonicUserGroups:Object(h.m)(e,"feature_sonic_user_groups")}})(user_groups_details_action_bar_UserGroupsDetailsActionBar),CA={members:"members",channels:"channels"},jA=new x.b("user_groups"),EA={userGroup:{},fetchUserGroupMembers:r.a,onChannelSwitch:r.a,removeMember:r.a,removeChannel:r.a,openModal:r.a,openUserGroupList:r.a,enqueueToast:r.a,canEditUserGroups:r.a,canCreateAndDeleteUserGroups:r.a,userGroupMembers:[],newMembers:[],userGroupDefaultChannels:[],showMemberProfile:r.a,getPrefCompliantMemberNameLowerCase:r.a,featureSonicUserGroups:!1},kA=Object(Wa.b)();class user_group_details_UserGroupDetails extends s.PureComponent{constructor(e){super(e),this.state={sortedMembers:[],freshMount:!0},Object(X.a)(this,["onViewProfile","onRemoveFromGroup","onAddMembers","onAddChannels","renderMemberItem","renderChannelItem","renderChannelsList","renderMembersList","renderListItemOptionsMenu","renderConfirmationDialog","renderContent","focus","getAriaLabelForChannelRow","getAriaLabelForMemberRow","onItemTabWithin","sortMembers","setSortedMembers","setAndUpdateSortedMembers"]),this.memberList=i.a.createRef(),this.channelsList=i.a.createRef(),this.flexpane=i.a.createRef(),this.channelListKeys=null,this.memberListKeys=null}componentDidMount(){Object(bP.v)(this.props.userGroup)&&this.props.fetchUserGroupMembers("user-group-details/componentDidMount")}componentDidUpdate(e){var t=e.userGroup,{users:a}=t,n=Object(ya.a)(t,["users"]),r=this.props.userGroup,{users:s}=r,i=Object(ya.a)(r,["users"]),{userGroupMembers:o}=this.props,{freshMount:c}=this.state;Object(rf.a)(n,i)||this.props.fetchUserGroupMembers("user-group-details/componentDidUpdate"),(c&&!Object(rf.a)(e.userGroupMembers,o)||c&&e.userGroupMembers.length)&&this.setSortedMembers(this.sortMembers(o)),c||Object(rf.a)(e.userGroupMembers,o)||this.setAndUpdateSortedMembers(this.state.sortedMembers,o)}onRemoveMember(e){this.props.featureSonicUserGroups&&this.props.openModal({element:this.renderConfirmationDialog({action:"remove_member",onSubmit:()=>{this.props.removeMember(e).then(()=>{this.props.enqueueToast({element:i.a.createElement(Ga.b,null,jA.t("Member removed from group."))})}).catch(e=>{kA.error("Error removing member from user group: ".concat(e)),"no_users_provided"===e.data.error&&this.props.enqueueToast({element:i.a.createElement(Ga.b,null,jA.t("User groups need to have at least one member."))})})},id:e})})}onRemoveChannel(e){this.props.featureSonicUserGroups&&this.props.openModal({element:this.renderConfirmationDialog({action:"remove_channel",onSubmit:()=>{this.props.removeChannel(e).then(()=>{this.props.enqueueToast({element:i.a.createElement(Ga.b,null,jA.t("Channel removed from group."))})}).catch(e=>{kA.error("Error removing default channel from user group: ".concat(e))})},id:e})})}onAddMembers(){this.displayMemberManagementDialog()}onAddChannels(){this.displayEditDetailsDialog()}onRemoveFromGroup(e){var{type:t,id:a}=e;t===CA.members?this.onRemoveMember(a):t===CA.channels&&this.onRemoveChannel(a)}onViewProfile(e){var{type:t,id:a}=e;return t===CA.members?this.props.showMemberProfile({memberId:a}):t===CA.channels?this.props.onChannelSwitch(a):null}onItemTabWithin(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}setSortedMembers(e){this.setState(()=>({sortedMembers:e}))}setAndUpdateSortedMembers(e,t){var a=Object(oi.a)(e,t),n=Object(Pt.a)(t,e);a=a.concat(n),this.setState(()=>({sortedMembers:a}))}getTabs(){if(!this.props.featureSonicUserGroups)return null;var{userGroup:e,userGroupDefaultChannels:t=[]}=this.props,a=Object(bP.l)(e);return[{title:jA.rt("Members"),titleCount:a,id:"user-groups-members-tab",content:this.renderMembersList()},{title:jA.rt("Channels"),titleCount:t.length,id:"user-groups-channels-tab",content:this.renderChannelsList()}]}getAriaLabelForChannelRow(e){var{index:t}=e;if(this.channelListKeys){var{userGroupDefaultChannels:a}=this.props,n=a[t];return{"aria-label":zh({type:Object(B.u)(n),displayName:Object(B.v)(n),isShared:Object(B.ab)(n),isOrgShared:Object(B.vb)(n),isArchived:Object(B.X)(n)})}}}getAriaLabelForMemberRow(e){var{index:t}=e;if(this.memberListKeys){var{userGroupMembers:a}=this.props,n=a[t];return{"aria-label":Object(pp.a)({name:Object(Fe.K)(n),isDeleted:Object(Fe.mb)(n),isAppOrBot:!1,isGuest:!1})}}}sortMembers(e){return this.setState(()=>({freshMount:!1})),Object(Xj.a)(e,e=>this.props.getPrefCompliantMemberNameLowerCase(e))}focus(){var e=this.memberList.current||this.channelsList.current;e&&e.focus()}displayMemberManagementDialog(){this.props.openModal({element:this.renderEditMembersDialog()})}displayEditDetailsDialog(){this.props.openModal({element:this.renderEditDetailsDialog()})}userGroupIsEditable(){var{userGroup:e}=this.props;return this.props.canEditUserGroups()&&Object(bP.v)(e)}canRemoveItem(e){var{userGroup:t}=this.props;return e!==CA.members||!Object(bP.n)(t)}renderHeader(){var{userGroup:e}=this.props;return i.a.createElement("div",{className:"p-user_group_details__section"},i.a.createElement("div",{className:"p-user_group_details__name"},Object(bP.h)(e)),i.a.createElement("div",{className:"p-user_group_details__description"},Object(bP.e)(e)),i.a.createElement("div",{className:"p-user_group_details__handle"},Object(bP.f)(e,{includeAtSign:!0})))}renderActions(){return this.props.featureSonicUserGroups&&this.userGroupIsEditable()&&this.props.canEditUserGroups()?i.a.createElement("div",{className:"p-user_group_details__section"},i.a.createElement(yA,{groupId:this.props.groupId,onEditMembers:()=>this.displayMemberManagementDialog(),onEditDetails:()=>this.displayEditDetailsDialog()})):null}renderTabs(){var e=this.getTabs();return i.a.createElement(q.a,{tabs:e,defaultTabId:"user-groups-members-tab",fullHeight:!0,fullWidthMenu:!0})}renderListItemOptionsMenu(e){var{menuProps:t,id:a,type:r}=e;if(!this.props.featureSonicUserGroups)return null;var s=r===CA.channels?jA.t("Open channel"):jA.t("View profile"),o=[i.a.createElement(Be.b,{key:a,label:s,onSelected:()=>this.onViewProfile({type:r,id:a})})];return this.canRemoveItem(r)&&o.push(i.a.createElement(Be.b,{key:a,label:jA.t("Remove from group..."),onSelected:()=>this.onRemoveFromGroup({type:r,id:a}),danger:!0})),i.a.createElement(Be.f,Object(n.a)({},t,{width:"auto"}),o)}renderMemberItem(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.userGroupIsEditable(),a=Object(qp.a)(this.props.newMembers,e),n={className:l()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":t,"p-user_group_base_row--active":a}),isContextButtonVisible:t,tooltip:this.renderTooltip(),onClick:()=>this.onViewProfile({type:CA.members,id:e.id}),renderMenu:t=>this.renderListItemOptionsMenu({menuProps:t,id:e.id,type:CA.members}),customProps:{key:e.id,"data-qa-user-group-details-members-list-item":!0,"data-qa-user-group-details-members-list-item-id":e.id},id:e.id};return i.a.createElement(RA,n)}renderChannelItem(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.userGroupIsEditable(),a={className:l()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":t}),isContextButtonVisible:t,tooltip:this.renderTooltip(),onClick:()=>this.onViewProfile({type:CA.channels,id:e.id}),renderMenu:t=>this.renderListItemOptionsMenu({menuProps:t,id:e.id,type:CA.channels}),customProps:{key:e.id,"data-qa-user-group-details-channels-list-item":!0,"data-qa-user-group-details-channels-list-item-id":e.id},id:e.id};return i.a.createElement(RA,a)}renderTooltip(){return this.props.featureSonicUserGroups?jA.t("More actions"):null}renderMembersList(){var{userGroup:e,userGroupMembers:t}=this.props,{sortedMembers:a}=this.state;if(!t||Object(bs.a)(t))return this.renderEmptyMemberState();this.memberListKeys=Object(ed.a)(a,"id");var n=Object(bP.h)(e);return i.a.createElement(fP.a,null,e=>{var{width:t,height:r,measureRef:s}=e;return i.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-members-list":!0,ref:s},i.a.createElement(Fj.a,{ref:this.memberList,width:t,height:r,keys:this.memberListKeys,rowRenderer:e=>this.renderMemberItem(a[e]),"aria-label":jA.t("{userGroupName} Members",{userGroupName:n}),getPropsForItem:this.getAriaLabelForMemberRow,onItemTabWithin:this.onItemTabWithin}))})}renderChannelsList(){var{userGroupDefaultChannels:e,userGroup:t}=this.props;if(!e||Object(bs.a)(e))return this.renderEmptyChannelState();this.channelListKeys=Object(ed.a)(e,"id");var a=Object(bP.h)(t);return i.a.createElement(fP.a,null,t=>{var{width:n,height:r,measureRef:s}=t;return i.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-channels-list":!0,ref:s},i.a.createElement(Fj.a,{ref:this.channelsList,width:n,height:r,keys:this.channelListKeys,rowRenderer:t=>this.renderChannelItem(e[t]),"aria-label":jA.t("{userGroupName} Default Channels",{userGroupName:a}),getPropsForItem:this.getAriaLabelForChannelRow,onItemTabWithin:this.onItemTabWithin}))})}renderEmptyMemberState(){if(!this.props.featureSonicUserGroups)return null;var e=jA.t("Nobody\u2019s in this group"),t=jA.t("Add Members");return i.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-members-empty-list":!0},i.a.createElement(CP.a,{title:e,description:"You can add a few people with the button below.",primaryActionText:t,onClickPrimaryAction:this.onAddMembers}))}renderEmptyChannelState(){if(!this.props.featureSonicUserGroups)return null;var e=jA.t("Add Default Channels"),t=jA.t("No default channels"),a=jA.t("All members of a user group are automatically added to its default channels.");return i.a.createElement("div",{className:"p-user_group_details__empty_list"},i.a.createElement(CP.a,{title:t,description:a,primaryActionText:e,onClickPrimaryAction:this.onAddChannels}))}renderConfirmationDialog(e){var{action:t,onSubmit:a,id:n}=e,{groupId:r}=this.props;return i.a.createElement(wA,{action:t,onSubmit:a,id:n,groupId:r})}renderEditMembersDialog(){var{groupId:e}=this.props;return i.a.createElement(FA,{groupId:e})}renderEditDetailsDialog(){var{groupId:e}=this.props;return i.a.createElement(bA,{userGroupId:e})}renderContent(){if(!this.props.featureSonicUserGroups)return null;var{userGroup:e}=this.props;return i.a.createElement("div",{className:"p-user_group_details p-user_group__content","data-qa-user-group-details":!0,"data-qa-user-group-details-id":e.id},this.renderHeader(),this.renderActions(),this.renderTabs())}render(){var{featureSonicUserGroups:e}=this.props;return e?i.a.createElement(FT.b,{ref:this.flexpane,focus:this.focus,className:"p-user_groups_flexpane_container",onOptionsClick:this.onCreateUserGroup,renderBody:this.renderContent,title:jA.t("User Groups"),viewId:"user-group-details",kbNavOrder:Object(kt.a)()?void 0:7}):null}}user_group_details_UserGroupDetails.defaultProps=EA;var SA=Object(d.b)((e,t)=>{var{groupId:a}=t,n=Object(hP.e)(e,a),r=Object(h.m)(e,"feature_sonic_user_groups");if(Object(bP.t)(n))return{userGroup:n,featureSonicUserGroups:r};var s=Object(bP.g)(n),i=Object(ed.a)(s,t=>Object(Ca.d)(e,t)),o=Object(bP.d)(e,n);return{userGroup:n,featureSonicUserGroups:r,userGroupMembers:i,userGroupDefaultChannels:Object(ed.a)(o,t=>Object(L.e)(e,t)),canEditUserGroups:()=>Object(bP.c)(e),canCreateAndDeleteUserGroups:()=>Object(bP.b)(e),getPrefCompliantMemberNameLowerCase:t=>Object(Fe.X)(e,t)}},(e,t)=>{var{groupId:a}=t;return{openModal:function(){return e(Object(Ua.e)(...arguments))},fetchUserGroupMembers:t=>e(Object(EP.j)({groupId:a,reason:t})),removeMember:t=>e(Object(EP.n)({groupId:a,memberId:t})),removeChannel:t=>e(Object(EP.m)({groupId:a,channelId:t})),onChannelSwitch:t=>e(Object(Ry.a)({id:t})),openUserGroupList:()=>e(Object(Ie.o)()),enqueueToast:function(){return e(Object(qa.c)(...arguments))},showMemberProfile:function(){return e(Object(Ie.j)(...arguments))}}})(user_group_details_UserGroupDetails),IA=new x.b("user_groups");class user_group_confirmation_dialog_UserGroupConfirmationDialog extends s.Component{constructor(e){super(e),this.onGo=this.onGo.bind(this)}onGo(){return this.props.onSubmit()}getTitle(){if(!this.props.featureSonicUserGroups)return"";var{action:e,groupName:t}=this.props;switch(e){case"disable_group":return IA.t("Deactivate {groupName}?",{groupName:t});case"remove_member":return IA.t("Remove from group?");case"remove_channel":return IA.t("Remove default channel?")}return""}getButtonText(){if(!this.props.featureSonicUserGroups)return"";var{action:e}=this.props;switch(e){case"disable_group":return IA.t("Deactivate");case"remove_member":case"remove_channel":return IA.t("Remove")}return""}getDialogBody(){if(!this.props.featureSonicUserGroups)return"";var{groupName:e,label:t,action:a}=this.props;switch(a){case"disable_group":return IA.rt("If you deactivate this user group, you won\u2019t be able to use <strong>{groupName}</strong> or view a list of its members. You can reactivate this group at any time.",{groupName:e});case"remove_member":return IA.rt("Are you sure you want to remove <strong>{label}</strong> from the <strong>{groupName}</strong> user group?",{label:t,groupName:e});case"remove_channel":return IA.rt("Are you sure you want to remove <strong>{label}</strong> as a default channel for the <strong>{groupName}</strong> user group?",{label:t,groupName:e})}return""}render(){return i.a.createElement(di.a,{showHeader:!0,showGoButton:!0,title:this.getTitle(),goButtonText:this.getButtonText(),goButtonType:"danger",onGo:this.onGo},i.a.createElement("p",null,this.getDialogBody()))}}user_group_confirmation_dialog_UserGroupConfirmationDialog.defaultProps={label:"",groupName:"",featureSonicUserGroups:!1};var wA=Object(d.b)((e,t)=>{var{id:a,groupId:n}=t,r="",s=Object(hP.e)(e,n);if(Object(wb.a)(a)){var i=Object(L.e)(e,a);r=Object(B.w)(e,i)}else if(Object(gp.a)(a)){var o=Object(Ca.d)(e,a);r=Object(Fe.K)(o)}return{groupName:Object(bP.h)(s),label:r,featureSonicUserGroups:Object(h.m)(e,"feature_sonic_user_groups")}})(user_group_confirmation_dialog_UserGroupConfirmationDialog),TA=a("8pCN"),NA=a("6ne/"),PA=a("/foC"),AA=a("FQfs"),MA=(a("/VNe"),new x.b("user_groups")),xA={id:null,className:"",isContextButtonVisible:!1,onClick:r.a,tooltip:void 0};class user_group_base_row_UserGroupBaseRow extends s.PureComponent{getTooltipLabel(){return this.props.tooltip||MA.t("Edit user groups")}renderContextButton(){var{isContextButtonVisible:e,renderMenu:t}=this.props;if(!e)return null;var a={tooltip:this.getTooltipLabel(),icon:"ellipsis",tooltipPosition:"top-right",onClick:t,menuProps:{renderMenu:t,width:"auto"}};return i.a.createElement(TA.b,{customClasses:"p-user_group_base_row__list_item_option"},i.a.createElement(TA.a,a))}render(){var{className:e,id:t,onClick:a}=this.props,n=l()("p-user_group_base_row__list_item","p-user_group_base_row__entity",{"p-user_group_base_row__entity_group":t&&Object(eT.a)(t)},e);return Object(wb.a)(t)?i.a.createElement(PA.a,{channelId:t,secondaryContent:this.renderContextButton(),showPurpose:!1,onClick:a,className:n}):Object(gp.a)(t)?i.a.createElement(AA.a,{className:n,id:t,secondaryContent:this.renderContextButton()}):i.a.createElement(NA.a,{id:t,secondaryContent:this.renderContextButton(),className:n})}}user_group_base_row_UserGroupBaseRow.defaultProps=xA;var RA=user_group_base_row_UserGroupBaseRow,DA=new x.b("user_groups");class user_group_member_management_dialog_UserGroupMemberManagementDialog extends s.PureComponent{constructor(e){super(e),this.state={searchResultMode:!1,disableGoButton:!1},Object(X.a)(this,["onSave","onUpsertSuccess","onToggleSearchResultsMode","setUserGroupMemberManagementRef","onSelectedItemsChange"]),this.userGroupMemberManagementRef=null}onSave(){if(!this.userGroupMemberManagementRef)return!1;if(!this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount())return!1;var e=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.bulkUpsertUserGroupMembers(e).then(this.onUpsertSuccess).catch(this.onUpsertFailure)}onSelectedItemsChange(e){this.setState(()=>({disableGoButton:!e.length}))}onUpsertSuccess(){this.props.featureSonicUserGroups&&this.props.enqueueToast({element:i.a.createElement(Ga.b,null,DA.t("Group has been updated."))})}onUpsertFailure(e){Object(Wa.b)().error("Error updating user group members: ".concat(JSON.stringify(e)))}onToggleSearchResultsMode(){this.setState(e=>({searchResultMode:!e.searchResultMode}))}setUserGroupMemberManagementRef(e){this.userGroupMemberManagementRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}render(){if(!this.props.featureSonicUserGroups)return null;var e=DA.t("Edit members");return i.a.createElement(di.a,{showHeader:!0,showGoButton:!0,showFooter:!0,bodyClassName:"p-user_group_member_management__dialog_body",title:e,contentLabel:e,goButtonText:DA.t("Save"),onGo:this.onSave,goOnEnterPressed:!1,goButtonIsDisabled:this.state.disableGoButton},i.a.createElement(rA,{groupId:this.props.groupId,ref:this.setUserGroupMemberManagementRef,onSelectedItemsChange:this.onSelectedItemsChange}))}}user_group_member_management_dialog_UserGroupMemberManagementDialog.defaultProps={featureSonicUserGroups:!1};var FA=Object(d.b)(e=>({featureSonicUserGroups:Object(h.m)(e,"feature_sonic_user_groups")}),(e,t)=>{var{groupId:a}=t;return{bulkUpsertUserGroupMembers:t=>e(Object(EP.f)({groupId:a,users:t})),enqueueToast:function(){return e(Object(qa.c)(...arguments))}}})(user_group_member_management_dialog_UserGroupMemberManagementDialog),LA=a("F3Uw");a("hZjP");class user_groups_UserGroupsFlexpane extends s.PureComponent{constructor(e){super(e),this.state={newMembers:[],timeoutId:null,searchTerm:""},Object(X.a)(this,["onSearchInputChange","onClearSearch"])}componentDidUpdate(e){var t=[];if(e.userGroupMembers.length&&!Object(rf.a)(e.userGroupMembers,this.props.userGroupMembers)&&(t=Object(LA.a)(this.props.userGroupMembers,e.userGroupMembers,"id")),t.length){this.setState(()=>({newMembers:t}));var{timeoutId:a}=this.state;a&&clearTimeout(a);var n=setTimeout(()=>{this.setState(()=>({newMembers:[]}))},1050);this.setState(()=>({timeoutId:n}))}}onSearchInputChange(e){var t=e.target.value;this.setState(()=>({searchTerm:t}))}onClearSearch(){this.setState(()=>({searchTerm:""}))}render(){if(!this.props.featureSonicUserGroups)return null;var{groupId:e}=this.props,{newMembers:t,searchTerm:a}=this.state;return e?i.a.createElement(SA,{groupId:e,newMembers:t}):i.a.createElement(pM,{searchTerm:a,onSearchInputChange:this.onSearchInputChange,onClearSearch:this.onClearSearch})}}user_groups_UserGroupsFlexpane.defaultProps={groupId:null,featureSonicUserGroups:!1,userGroupMembers:[]};Object(d.b)(e=>{var t=Object(y.e)(e)[0],a=Object(hP.e)(e,t),n=Object(bP.g)(a);return{groupId:t,userGroupMembers:Object(ed.a)(n,t=>Object(Ca.d)(e,t)),featureSonicUserGroups:Object(h.m)(e,"feature_sonic_user_groups")}})(user_groups_UserGroupsFlexpane),a("Oxmb");function UA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var BA={description:null,isActive:!1,handle:void 0,featureSonicUserGroups:!1,onClick:r.a},HA=new x.b("user_groups");class user_group_row_UserGroupRow extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["onMenuClick","renderContextMenu"])}onMenuClick(e){var{id:t}=this.props;this.props.onClick(e,t)}renderName(){var{name:e,isActive:t,featureSonicUserGroups:a}=this.props;if(!a)return null;var n=l()("black",{sk_foreground_max:!t}),r=t?e:HA.t("{name} (Deactivated)",{name:e});return i.a.createElement("div",{className:n},r)}renderDescription(){var{description:e,isActive:t}=this.props;if(!e)return null;var a=l()("overflow_ellipsis",{sk_foreground_max:!t});return i.a.createElement("div",{className:a},e)}renderHandle(){var{handle:e}=this.props;return e?i.a.createElement("span",{className:"p-user_group_row__handle"},e):null}renderContextMenu(e){return i.a.createElement(fA,{menuProps:e,groupId:this.props.id,onClick:this.onMenuClick})}render(){var{userCount:e,isActive:t,featureSonicUserGroups:a}=this.props;if(!a)return null;var n=l()("p-user_group_row",{"p-user_group_row--inactive":!t}),r={renderMenu:this.renderContextMenu,className:n,isContextButtonVisible:this.props.canEditUserGroups()||this.props.canCreateAndDeleteUserGroups(),id:this.props.id,isActive:t};return i.a.createElement(RA,r,this.renderName(),this.renderDescription(),this.renderHandle(),i.a.createElement("span",{className:"p-user_group_row__count"},HA.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:e})))}}user_group_row_UserGroupRow.defaultProps=BA;var WA={showUserGroupDetails:Ie.n},qA=Object(d.b)((e,t)=>{var{id:a}=t,n=Object(hP.e)(e,a),r={canEditUserGroups:()=>Object(bP.c)(e),canCreateAndDeleteUserGroups:()=>Object(bP.b)(e),featureSonicUserGroups:Object(h.m)(e,"feature_sonic_user_groups")};return n?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?UA(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):UA(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({name:Object(bP.h)(n),description:Object(bP.e)(n),handle:Object(bP.f)(n),userCount:Object(bP.l)(n),isActive:Object(bP.v)(n)},r):r},WA)(user_group_row_UserGroupRow),GA=a("sK36"),KA=a("uqAm"),VA=new x.b("user_groups"),zA={userGroup:{},defaultChannelNames:void 0,showToggle:!1,creator:void 0};class legacy_user_group_browser_list_item_LegacyUserGroupBrowserListItem extends s.Component{constructor(e){super(e),this.onButtonClick=this.onButtonClick.bind(this)}onButtonClick(e,t){var{userGroup:a}=this.props;Object(KA.c)({action:t,userGroup:a})}maybeRenderDescription(e){var{userGroup:t}=this.props,a=Object(bP.e)(t);return a?i.a.createElement("p",{className:e},a):null}maybeRenderHandle(){var{userGroup:e}=this.props,t=Object(bP.f)(e,{includeAtSign:!0});return t?i.a.createElement("span",{className:"subtle_silver"},t):null}maybeRenderToggle(){var{showToggle:e}=this.props;return e?i.a.createElement(i.a.Fragment,null,i.a.createElement(qe.c,{position:"left",zIndex:"above_fs",tip:VA.t("Enable group")},i.a.createElement(te.a,{"data-action":"enable_user_group",className:"user_group_toggle_btn no_bottom_margin subtle_silver small small_right_padding",onClick:e=>this.onButtonClick(e,"enable"),"aria-label":VA.t("Enable group")},i.a.createElement("i",{className:"ts_icon ts_icon_power_off"})))):null}maybeRenderDefaultChannels(){var{defaultChannelNames:e}=this.props;if(!e||!e.length)return null;var t=Object(x.k)(e,{react:!0,noEscape:!0}).join("");return i.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},i.a.createElement("span",{className:"bold"},VA.t("Default channels: {channels}",{channels:t})))}maybeRenderCreatedBy(){var{userGroup:e,creator:t}=this.props;if(!(e||e.created_by&&e.date_create))return null;var a=VA.rt("Created by <strong>{creator}</strong> on {creationDate}",{creator:t,creationDate:Zn()(1e3*e.date_create).format("MMMM Do, YYYY")});return i.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},a)}maybeRenderDisableButton(){var{showToggle:e}=this.props;return e?i.a.createElement(qe.c,{position:"bottom",zIndex:"above_fs",tip:VA.t("Disable group")},i.a.createElement(jt.d,{size:"large",type:"outline",icon:"disable",className:"user_group_toggle_btn",title:"".concat(VA.t("Disable")),"data-action":"disable_user_group",onClick:e=>this.onButtonClick(e,"disable")})):null}renderDeactivatedRow(){var{userGroup:e}=this.props,t=Object(bP.h)(e);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col span_4_of_6 small_padding no_bottom_margin"},i.a.createElement("p",{className:"no_bottom_margin subtle_silver"},i.a.createElement("span",{className:"bold"},t),VA.t("(Disabled)"))),i.a.createElement("div",{className:"col span_2_of_6 small_padding no_bottom_margin float_right align_right"},this.maybeRenderToggle()))}renderCount(){var{userGroup:e}=this.props,t=e.isExternal||Object(bP.n)(e)?i.a.createElement("i",{className:"ts_icon ts_icon_sync"}):null;return i.a.createElement("p",{className:"user_group_count no_bottom_margin float_right small subtle_silver"},t,i.a.createElement("i",{className:"ts_icon ts_icon_user"}),Object(bP.l)(e))}renderSettingsButton(){return i.a.createElement(qe.c,{position:"bottom",tip:VA.t("Edit group info"),zIndex:"above_fs"},i.a.createElement(jt.d,{size:"large",type:"outline",icon:"cog_o",title:"".concat(VA.t("Settings")),"data-action":"open_form",onClick:e=>this.onButtonClick(e,"editInfo")}))}renderMemberButton(){var e,{userGroup:t}=this.props;return e=Object(bP.n)(t||t.is_external)?VA.t("View group members"):VA.t("Edit group members"),i.a.createElement(qe.c,{position:"bottom",tip:e,zIndex:"above_fs"},i.a.createElement(jt.d,{size:"large",type:"outline",icon:"user",title:"".concat(VA.t("Members")),"data-action":"edit_members",onClick:e=>this.onButtonClick(e,"editMembers")}))}render(){var{userGroup:e}=this.props;if(!Object(bP.v)(this.props.userGroup))return this.renderDeactivatedRow();var t=Object(bP.h)(e);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col span_3_of_4 small_padding no_bottom_margin"},i.a.createElement("p",{className:"bold no_bottom_margin"},t," ",this.maybeRenderHandle()),this.maybeRenderDescription("small no_bottom_margin"),this.maybeRenderDefaultChannels(),this.maybeRenderCreatedBy()),i.a.createElement("div",{className:"float_right right_padding"},this.renderCount(),i.a.createElement("p",{className:"user_group_actions user_group_actions--modern small no_bottom_margin"},this.maybeRenderDisableButton(),this.renderSettingsButton(),this.renderMemberButton())))}}legacy_user_group_browser_list_item_LegacyUserGroupBrowserListItem.defaultProps=zA;var YA=Object(d.b)((e,t)=>{var{id:a}=t,n=Object(hP.e)(e,a),r=Object(bP.d)(e,n,{includePrivateChannels:!1}),s=r.map(t=>{if(!t)return null;var a=Object(L.e)(e,t);if(!a)return null;var n=Object(B.M)(a);return n?"#".concat(n):null});return{userGroup:n,defaultChannels:r,defaultChannelNames:s=Object(Vd.a)(s),creator:Object(Fe.W)(e,n.created_by),showDelete:!Object(bP.n)(n)&&!n.is_external,showToggle:Object(bP.b)(e)}},null,null,{areStatePropsEqual:(e,t)=>Object(Ti.a)(e,t,2)})(legacy_user_group_browser_list_item_LegacyUserGroupBrowserListItem),QA=new x.b("user_groups"),XA={userGroup:{},onClick:r.a,isUserGroupBrowser:!1};class legacy_user_group_list_item_LegacyUserGroupListItem extends s.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){return this.props.onClick(e,this.props.id),Object(GA.d)(e,this.props.id)}maybeRenderDescription(){var{userGroup:e}=this.props,t=Object(bP.e)(e);return t?i.a.createElement("p",null,t):null}maybeRenderCountOrHandle(){var{userGroup:e}=this.props,t=Object(bP.l)(e),a=Object(bP.f)(e,{includeAtSign:!1});if(!t&&!a)return null;var n=QA.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:t});return a&&(n="".concat(n," - ").concat(Object(bP.f)(e))),i.a.createElement("p",{className:"subtle_silver tiny_bottom_margin"},n)}renderRow(){var{userGroup:e,id:t,isUserGroupBrowser:a}=this.props;return a?i.a.createElement(YA,{id:t}):i.a.createElement("div",{className:"col span_5_of_6 small_padding no_bottom_margin"},i.a.createElement(He.a,{"data-user-group-id":"".concat(t),onClick:this.onClick},i.a.createElement("h4",null,Object(bP.h)(e)),this.maybeRenderDescription(),this.maybeRenderCountOrHandle()))}render(){var{id:e}=this.props;return i.a.createElement("div",{className:"user_group_item small_padding bottom_border clearfix","data-qa":"user_group_list_item","data-user-group-id":"".concat(e)},this.renderRow())}}legacy_user_group_list_item_LegacyUserGroupListItem.defaultProps=XA;var JA=Object(d.b)((e,t)=>{var{id:a}=t;return{userGroup:Object(hP.e)(e,a)}})(legacy_user_group_list_item_LegacyUserGroupListItem),ZA=a("ITcr"),$A=new x.b("user_groups");class legacy_user_group_empty_state_LegacyUserGroupEmptyState extends s.PureComponent{computeAtLabel(e){var t=e;"group"===t&&(t="channel");var a=Object(ZA.b)({ms_name:t});return"@".concat(a)}renderContent(){var{isFlexpane:e}=this.props,t=e?null:l()("col","span_3_of_4"),a=l()("normal_padding",{dull_grey:e}),n=$A.rt('While commands like <span className="mention">{atEveryone}</span>, <span className="mention">{atChannel}</span>, and <span className="mention">{atHere}</span> call the attention of all members in a conversation, User Groups let you choose exactly who should get your message.',{atEveryone:this.computeAtLabel("everyone"),atChannel:this.computeAtLabel("channel"),atHere:this.computeAtLabel("here"),fallbackHash:"b74e7333e097c646698fe696052060665b263452"}),r=$A.rt('Choose a group name, like <span className="mention">@design</span> or <span className="mention">@marketing</span>, then select the group members. Now, when someone in your workspace mentions the User Group, only its members will be notified. You can even add those members to channels of your choice automatically!',{fallbackHash:"a7c79b0ec617bd1a98db5c6183b5e1f91d52cb31"});return i.a.createElement("div",{className:t},i.a.createElement("div",{className:a},i.a.createElement("p",{className:"user_groups_tip"},n),i.a.createElement("p",{className:"user_groups_tip"},r)))}render(){var{isFlexpane:e,featureSonicUserGroups:t}=this.props;if(t)return null;var a=e?i.a.createElement("div",null,i.a.createElement("span",{className:"user_groups_img"})):null,n=e?null:i.a.createElement("div",{className:"col span_1_of_4 no_right_padding"},i.a.createElement("span",{className:"user_groups_img"}));return i.a.createElement(s.Fragment,null,a,this.renderContent(),n)}}legacy_user_group_empty_state_LegacyUserGroupEmptyState.defaultProps={isFlexpane:!1,featureSonicUserGroups:!1};var eM=Object(d.b)((e,t)=>{var{id:a}=t;return{userGroup:Object(hP.e)(e,a),featureSonicUserGroups:Object(h.m)(e,"feature_sonic_user_groups")}})(legacy_user_group_empty_state_LegacyUserGroupEmptyState),tM=(a("5g6K"),new x.b("user_groups")),aM={userGroups:[],scrollmark:void 0,searchQuery:void 0,setCursorMark:r.a,fetchUserGroupsPost:r.a,fetchDeactivatedUserGroupsPost:r.a,saveScrollmark:r.a,onItemClick:r.a,onCreateUserGroup:r.a,onClearSearch:r.a,isLegacy:!1,includeDeactivated:!1,isUserGroupBrowser:!1,featureSonicUserGroups:!1,onItemTabWithin:r.a};class searchable_user_group_list_SearchableUserGroupsList extends s.PureComponent{constructor(e){super(e),this.onGroupClick=this.onGroupClick.bind(this),this.onScroll=this.onScroll.bind(this),this.setListRef=this.setListRef.bind(this),this.fetchPost=this.fetchPost.bind(this),this.handleFetchDeactivatedGroupsResponse=this.handleFetchDeactivatedGroupsResponse.bind(this),this.handleFetchActiveGroupsResponse=this.handleFetchActiveGroupsResponse.bind(this),this.fetchAround=this.fetchAround.bind(this),this.renderRow=this.renderRow.bind(this),this.maybeRenderList=this.maybeRenderList.bind(this),this.focus=this.focus.bind(this),this.getAriaLabelForRow=this.getAriaLabelForRow.bind(this),this.isFocusableItem=this.isFocusableItem.bind(this),this.requestPost=null,this.keys=null,this.list=null,this.layout=new JT.a,this.layout.heightCache.DEFAULT_HEIGHT=90,this.totalGroups=0,this.isFirstFetch=!e.userGroups.length&&!e.searchQuery,this.state={reachedEnd:!1,fetchingDeactivatedGroups:!1}}componentDidMount(){if(this.props.scrollmark){var{key:e,offset:t}=this.props.scrollmark;this.layout.setAnchor(e,t),this.props.saveScrollmark(null)}}componentWillUnmount(){this.requestPost&&(this.requestPost.cancel(),this.requestPost=null)}onGroupClick(e,t){this.list&&t&&this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-this.list.getScrollTop()})}onScroll(){this.layout.anchor&&this.layout.setAnchor(!1)}getAriaLabelForRow(e){var{index:t}=e;if(this.keys){var{userGroups:a}=this.props,n=a[t];return{"aria-label":function(){var{name:e,handle:t,purpose:a,isDeactivated:n,memberCount:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)return"";var s=!Object(_P.a)(r);return t&&a&&n&&!s?gP.t("{name}, @{handle}, {purpose} (deactivated)",{name:e,handle:t,purpose:a}):t&&a&&n&&s?gP.t("{name}, @{handle}, {purpose} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:e,handle:t,purpose:a,memberCount:r}):t&&a&&!n&&s?gP.t("{name}, @{handle}, {purpose} ({ memberCount, plural, =1 {# member} other {# members}})",{name:e,handle:t,purpose:a,memberCount:r}):t&&!a&&!n&&s?gP.t("{name}, @{handle} ({ memberCount, plural, =1 {# member} other {# members}})",{name:e,handle:t,memberCount:r}):!t&&a&&!n&&s?gP.t("{name}, {purpose} ({ memberCount, plural, =1 {# member} other {# members}})",{name:e,purpose:a,memberCount:r}):!t&&a&&n&&s?gP.t("{name}, {purpose} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:e,purpose:a,memberCount:r}):!t&&a&&n&&!s?gP.t("{name}, {purpose} (deactivated)",{name:e,purpose:a}):t||!a||n||s?!t&&!a&&n&&s?gP.t("{name} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:e,memberCount:r}):t||a||!n||s?t&&!a&&n&&!s?gP.t("{name}, @{handle} (deactivated)",{name:e,handle:t}):t&&!a&&n&&s?gP.t("{name}, @{handle} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:e,handle:t,memberCount:r}):t||a||n||s?!t||a||n||s?t&&a&&!n&&!s?gP.t("{name}, @{handle}, {purpose}",{name:e,handle:t,purpose:a}):t||a||n||!s?e:gP.t("{name} ({ memberCount, plural, =1 {# member} other {# members}})",{name:e,memberCount:r}):gP.t("{name}, @{handle}",{name:e,handle:t}):e:gP.t("{name} (deactivated)",{name:e}):gP.t("{name}, {purpose}",{name:e,purpose:a})}({name:Object(bP.i)(n),handle:Object(bP.f)(n,!1),purpose:Object(bP.e)(n),isDeactivated:!Object(bP.v)(n),memberCount:Object(bP.l)(n)})}}}setListRef(e){this.list=e}UNSAFE_componentWillReceiveProps(e){var{searchQuery:t}=this.props;e.searchQuery!==t&&(this.setState(()=>({reachedEnd:!1,fetchingDeactivatedGroups:!1})),this.requestPost&&this.requestPost.cancel(),this.requestPost=null,this.totalGroups=0,this.layout&&this.layout.setAnchor(!1))}fetchActiveGroups(){return this.props.fetchUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchActiveGroupsResponse)}fetchAround(){return!this.requestPost&&!this.state.reachedEnd&&this.fetchPost()}fetchDeactivatedGroups(){return this.props.fetchDeactivatedUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchDeactivatedGroupsResponse)}fetchPost(){return!this.requestPost&&(!this.state.reachedEnd&&(this.requestPost=this.state.fetchingDeactivatedGroups?this.fetchDeactivatedGroups():this.fetchActiveGroups(),this.isFirstFetch&&this.props.telemeter.mark("start_user_group_list_show"),this.requestPost.bind(this).finally(()=>{this.requestPost=null,this.isFirstFetch&&(this.props.telemeter.measureAndClear("start_user_group_list_show","user_group_list_show_lazy"),this.isFirstFetch=!1)})))}focus(){this.list&&this.list.focus()}handleFetchActiveGroupsResponse(){var{items:e,num_found:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.totalGroups=t,(this.props.userGroups.length>=this.totalGroups||!e.length)&&(this.props.includeDeactivated?(this.props.setCursorMark(null),this.setState(()=>({fetchingDeactivatedGroups:!0})),this.requestPost=this.fetchDeactivatedGroups()):this.setState(()=>({reachedEnd:!0})))}handleFetchDeactivatedGroupsResponse(){var{items:e,num_found:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.totalGroups+t;(this.props.userGroups.length>=a||!e.length)&&this.setState(()=>({reachedEnd:!0}))}isFocusableItem(e){var{key:t}=e;return t!==this.loadingIndicatorKey}maybeRenderList(e){return!e.length&&this.state.reachedEnd?this.renderEmptyListView():(this.state.reachedEnd||(this.loadingIndicatorKey="Loading".concat(e.length),e.push(this.loadingIndicatorKey)),i.a.createElement(yP,null,t=>{var{width:a,height:n}=t;return i.a.createElement(Fj.a,{width:a,height:n,keys:e,layout:this.layout,rowRenderer:this.renderRow,onScroll:this.onScroll,onItemClick:this.props.onItemClick,ref:this.setListRef,loadAround:this.fetchAround,loadPost:this.fetchPost,isFocusableItem:this.isFocusableItem,onItemTabWithin:this.props.onItemTabWithin,"aria-label":tM.t("User Groups"),getPropsForItem:this.getAriaLabelForRow})}))}renderEmptyListView(){var e,t,a,n,{featureSonicUserGroups:r,searchQuery:s,onClearSearch:o,onCreateUserGroup:c,isLegacy:d,isUserGroupBrowser:p}=this.props,u=!!s.length;if(u)t=tM.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:s}),a=tM.t("Clear Search"),n=o;else{if(d&&!r)return i.a.createElement(eM,{isFlexpane:!p});Object(jP.a)()?(e=tM.t("Organize your team"),a=tM.t("Create a User Group"),n=c):e=tM.t("No user groups yet"),t=tM.t("User groups make it easy to get the attention of many members at once.")}var h=l()({"p-user_group_list__empty_list":!u,"p-user_group_list__empty_search_results":u});return i.a.createElement("div",{className:h,"data-qa":"searchable_ug_list_empty_state"},i.a.createElement(CP.a,{title:e,description:t,primaryActionText:a,onClickPrimaryAction:n}))}renderRow(e){var t=this.keys[e];return t?t===this.loadingIndicatorKey?i.a.createElement("div",{className:"margin_top_200"},i.a.createElement(Oc.a,{color:"blue"})):this.renderUserGroup(e):null}renderUserGroup(e){var{userGroups:t,isLegacy:a,isUserGroupBrowser:n}=this.props,{id:r}=t[e];return r?a?i.a.createElement(JA,{id:r,isUserGroupBrowser:n,onClick:this.onGroupClick}):i.a.createElement(qA,{id:r,onClick:this.onGroupClick}):null}render(){var{userGroups:e}=this.props;return this.keys=this.props.includeDeactivated?e.map(e=>e.id):e.filter(e=>!e.isDeactivated).map(e=>e.id),i.a.createElement("div",{className:"p-user_group_list","aria-live":"polite"},this.maybeRenderList(this.keys))}}searchable_user_group_list_SearchableUserGroupsList.defaultProps=aM;var nM=Object(_p.createSelector)([hP.a,mP.e],(e,t)=>{return t.map(t=>{var a=e[t];return a?{id:a.id,isDeactivated:!!a.date_delete,name:a.name,handle:a.handle,user_count:a.user_count}:null}).filter(e=>e)}),rM={fetchUserGroupsPost:mP.d,saveScrollmark:mP.h,setSearchQuery:mP.j,setCursorMark:mP.i,fetchDeactivatedUserGroupsPost:mP.c},sM=Object(d.b)(e=>({userGroups:nM(e),scrollmark:Object(mP.f)(e),searchQuery:Object(mP.g)(e),featureSonicUserGroups:Object(h.m)(e,"feature_sonic_user_groups"),telemeter:Object(pr.c)({state:e})}),rM)(e=>{var{forwardedRef:t}=e,a=Object(ya.a)(e,["forwardedRef"]);return i.a.createElement(searchable_user_group_list_SearchableUserGroupsList,Object(n.a)({ref:t},a))}),iM=i.a.forwardRef((e,t)=>i.a.createElement(sM,Object(n.a)({forwardedRef:t},e)));function oM(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var cM={userGroups:{},featureSonicUserGroups:!1,openModal:r.a,searchTerm:"",searchQuery:"",onSearchInputChange:r.a,onClearSearch:r.a,setSearchQuery:r.a,shouldDisplayCreateUserGroupOption:!1,isActive:r.a,showUserGroupDetails:r.a},lM=new x.b("user_groups");class user_group_list_UserGroupList extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["onCreateUserGroup","onSearchInputChange","renderRow","renderContent","onClearSearch","focus","onItemClick","onItemTabWithin"]),this.searchableGroupList=i.a.createRef(),this.groupList=i.a.createRef(),this.flexpane=i.a.createRef()}onItemClick(e){var{id:t}=e;this.props.isActive(t)&&this.props.showUserGroupDetails({groupId:t})}onCreateUserGroup(){this.props.openModal({element:this.renderCreateEditDialog()})}onSearchInputChange(e){return this.props.setSearchQuery(e.target.value)}onClearSearch(){return this.props.setSearchQuery("")}onItemTabWithin(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}getGroupedUserGroups(e){var t=Object(jf.a)(e,e=>Object(bP.v)(e)?"active":"inactive");return t.active=t.active||[],t.inactive=t.inactive||[],t.active.concat(t.inactive)}getSearchResults(e,t){return t?Object(Vd.a)(e,e=>{if(!e)return!1;var a=Object(bP.h)(e),n=Object(bP.f)(e)||"",r=Object(bP.e)(e)||"";return!!this.checkForMatch(a,t)||(!!this.checkForMatch(n,t)||!!this.checkForMatch(r,t,!1))}):Object.values(e)}getSortedResults(e){return Object(Xj.a)(e,e=>{return Object(bP.h)(e).toLocaleLowerCase()})}focus(){var e=this.searchableGroupList.current||this.groupList.current;e&&e.focus()}checkForMatch(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.prepStringForSearch(e,a).includes(this.prepStringForSearch(t,a))}prepStringForSearch(e,t){if(!e)return"";var a=e.toLocaleLowerCase();return t&&(a=a.replace(/[\s-_]/g,"")),Object(x.a)(a)}renderSearch(){var e=this.props.searchQuery;return this.props.featureSonicUserGroups?i.a.createElement("div",{className:"p-user_group_list__search"},i.a.createElement(AS.a,{value:e,onChange:this.onSearchInputChange,placeholder:lM.t("Find by name..."),autoFocus:!0,icon:"search"})):null}renderRow(e){var t=this.keys[e];return i.a.createElement(qA,{id:t})}renderEmptySearchResults(){return this.props.featureSonicUserGroups?i.a.createElement("div",{className:"p-user_group_list__empty_search_results"},i.a.createElement("div",{className:"p-user_group_list__empty_search_results_subtext"},lM.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:this.props.searchTerm})),i.a.createElement(jt.d,{type:"outline",size:"small",onClick:this.props.onClearSearch},lM.t("Clear Search"))):null}renderSearchableList(){return i.a.createElement(iM,{ref:this.searchableGroupList,onCreateUserGroup:this.onCreateUserGroup,includeDeactivated:!0,onClearSearch:this.onClearSearch,onItemClick:this.onItemClick,onItemTabWithin:this.onItemTabWithin})}renderContent(){return i.a.createElement("div",{className:"p-user_group__content"},this.renderSearch(),this.renderSearchableList())}renderCreateEditDialog(){return i.a.createElement(bA,null)}render(){var{featureSonicUserGroups:e,shouldDisplayCreateUserGroupOption:t}=this.props;if(!e)return null;var a={renderBody:this.renderContent,title:lM.t("User Groups"),viewId:"user-group-list"};return t&&(a.onOptionsClick=this.onCreateUserGroup,a.headerProps={optionsIconType:"compose-dm",optionsTooltipText:lM.t("Create a user group")}),i.a.createElement(FT.b,Object(n.a)({ref:this.flexpane,focus:this.focus,className:"p-user_groups_flexpane_container"},a,{kbNavOrder:Object(kt.a)()?void 0:7}))}}user_group_list_UserGroupList.defaultProps=cM;var dM={openModal:Ua.e,setSearchQuery:mP.j,showUserGroupDetails:Ie.n},pM=Object(d.b)((e,t)=>{var a=Object(hP.a)(e),n=Object(h.m)(e,"feature_sonic_user_groups"),r=Object(bP.b)(e);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oM(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oM(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({userGroups:a,searchQuery:Object(mP.g)(e),featureSonicUserGroups:n,shouldDisplayCreateUserGroupOption:r,isActive:t=>Object(bP.v)(Object(hP.e)(e,t))},t)},dM)(user_group_list_UserGroupList),uM=a("hWiY"),hM=Object(xt.b)("If All Threads is open and the thread is present, request it to be focused via the all-threads-store",function(e,t){var{channelId:a,threadTs:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object(af.c)(a,n),s=Object(Wa.a)({getState:t,label:"MAYBE-JUMP-THREAD"}),i=t(),o=Object(_.a)(t()),c=Object(y.k)(t())||!Object(y.g)(t());if(o!==dl.a.allThreads||!c)return s.info("All Threads not open"),!1;var l=Object(al.f)(i);return l?Object(hp.a)(l,{threadKey:r})?(s.info("Requesting ".concat(r)),e(Object(al.r)(r)),!0):(s.info("Thread not found"),!1):(s.info("No threads"),!1)});hM.meta={name:"maybeFocusThreadInAllThreads",key:"actionsMaybeFocusThreadInAllThreadsMaybeFocusThreadInAllThreads",description:"If All Threads is open and the thread is present, request it to be focused via the all-threads-store"},hM.propTypes={channelId:o.default.string,threadTs:o.default.string};var mM=hM,bM=a("4v0o"),_M=a("SHa9"),gM=(a("l31K"),new x.b("flexpane"));function fM(e){var{clientTheme:t}=e,a="light"===t?cdn_url+"/80588/img/loading_hash_animation_@2x_vogue.gif":cdn_url+"/80588/img/loading_hash_animation_@2x_vogue_dark.gif",n="light"===t?cdn_url+"/80588/img/loading_hash_animation_vogue.gif":cdn_url+"/80588/img/loading_hash_animation_vogue_dark.gif",r=gM.t("loading\u2026"),s="".concat(n," 1x, ").concat(a," 2x");return i.a.createElement("div",{className:"p-flexpane_loading","data-qa":"flexpane_loading"},i.a.createElement("img",{className:"p-flexpane_loading__spinner",src:a,alt:r,srcSet:s}),i.a.createElement("br",null),r)}fM.defaultProps={clientTheme:"light"};var vM=fM,OM=(a("vOUN"),new x.b("threads")),yM={channelId:void 0,threadTs:void 0,isMpim:!1,numMpimMembers:0,mpimName:void 0};function CM(e){var t,{channelId:a,threadTs:n,isMpim:r,numMpimMembers:s,mpimName:o}=e;return t=r?i.a.createElement("div",{className:"p-threads_flexpane__header_channel_name"},i.a.createElement(qe.c,{tip:o},i.a.createElement("span",null,OM.t("Direct message with {count} others",{count:s})))):i.a.createElement(Ye.a,{channelId:a,className:"p-threads_flexpane__header_channel_name",inline:!0,iconProps:{inherit:!0}}),i.a.createElement(fe.a,{className:"p-threads_flexpane__header_permalink",href:Object($g.v)(a,n)},t)}CM.defaultProps=yM;var jM=Object(d.b)(function(e,t){var{channelId:a}=t,n=Object(L.e)(e,a),r={};if(n&&"mpim"===Object(B.u)(n)){r.isMpim=!0;var s=Object(B.H)(n)||[];r.numMpimMembers=s.length-1,r.mpimName=Object(B.w)(e,n)}return r})(CM),EM=(a("uS0p"),new x.b("threads"));function kM(e){var{replyCount:t}=e,a=Math.max(1,t),n=EM.t("{count, plural, =1 {# reply} other {# replies}}",{count:a,fallbackHash:"45d5eeb729c4b8d8b91f810f9387e5a97b3e6ce5"});return i.a.createElement("div",{className:"p-threads_flexpane__separator"},i.a.createElement("span",{className:"p-threads_flexpane__separator_count"},n),i.a.createElement("hr",{className:"p-threads_flexpane__separator_line"}))}kM.defaultProps={replyCount:0};var SM=Object(d.b)(function(e,t){var{channelId:a,threadTs:n}=t,r=Object(Kg.a)(e,a,n);return{replyCount:Object($g.S)(r)}})(kM),IM=(a("x++y"),new x.b("threads")),wM={tryAgain:r.a};function TM(e){var{tryAgain:t}=e;return i.a.createElement("div",{className:"p-threads_flexpane__error","data-qa":"threads_flexpane_error"},i.a.createElement("div",{className:"p-threads_flexpane__error_contents"},i.a.createElement("div",{className:"p-threads_flexpane__error_emoji"},i.a.createElement(Vr.b,{text:":mag:",emojiSize:Vr.a.LARGE})),i.a.createElement("p",{className:"p-threads_flexpane__error_header"},IM.t("Couldn't load thread")),i.a.createElement("p",{className:"p-threads_flexpane__error_body"},IM.rt("If the problem persists, please <a>drop us a line.</a>",null,e=>{var{text:t,key:a}=e;return i.a.createElement(fe.a,{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:a},t)})),i.a.createElement(jt.d,{type:"primary",onClick:t,"data-qa":"threads_flexpane_error_try_again"},IM.t("Try Again"))))}TM.defaultProps=wM;var NM=TM,PM=a("lU/5"),AM=(a("XThT"),a("07TJ"),new x.b("message_kit")),MM={className:void 0,highlight:void 0,clearHighlight:void 0,focused:!1,renderActionsOffscreen:!1,parentId:void 0};class root_ThreadRootMessage extends s.PureComponent{render(){var{msg:e,highlight:t,clearHighlight:a,focused:n,renderActionsOffscreen:r,parentId:s}=this.props,o=l()("c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className);return i.a.createElement(_O.a,{msg:e},i.a.createElement(gO.a,{msg:e,className:o,highlight:t,clearHighlight:a},i.a.createElement(fO.a,{hovered:n},i.a.createElement(vO.a,{msg:e,showComment:!1,showShare:!1,showJump:!0,messageContainerType:Of.I.THREADS_FLEXPANE,position:"inside",renderOffscreen:r,parentId:s},i.a.createElement(PM.a,{msg:e},i.a.createElement(jO.a,{msg:e},i.a.createElement(OO.a,{light:i.a.createElement(sO.a,{msg:e})},i.a.createElement(EO.a,{msg:e},i.a.createElement(oO.a,{msg:e}),"\xa0",i.a.createElement(cO.a,{msg:e,full:!0,clickable:!0},AM.t("Open in channel")),i.a.createElement("br",null),i.a.createElement(kO.a,null,i.a.createElement(lO.a,{msg:e}),i.a.createElement(dO.a,{msg:e,blocksContainerContext:nO.a.threads_flexpane}),i.a.createElement(iO.b,{msg:e}),i.a.createElement(rO.a,{msg:e,blocksContainerContext:nO.a.threads_flexpane}),i.a.createElement(hO.a,{msg:e}))))))))))}}root_ThreadRootMessage.defaultProps=MM;var xM={className:void 0,highlight:void 0,clearHighlight:void 0,focused:!1,renderActionsOffscreen:!1,parentId:void 0};class reply_ThreadReplyMessage extends s.PureComponent{render(){var{msg:e,highlight:t,clearHighlight:a,focused:n,renderActionsOffscreen:r,parentId:s}=this.props,o=l()("c-message_kit__message","c-message_kit__thread_message",this.props.className);return i.a.createElement(_O.a,{msg:e},i.a.createElement(gO.a,{msg:e,className:o,highlight:t,clearHighlight:a},i.a.createElement(fO.a,{hovered:n},i.a.createElement(vO.a,{msg:e,showComment:!1,showShare:!1,messageContainerType:Of.I.THREADS_FLEXPANE,renderOffscreen:r,parentId:s},i.a.createElement(jO.a,{msg:e,showBroadcast:!0},i.a.createElement(OO.a,{light:i.a.createElement(sO.a,{msg:e})},i.a.createElement(EO.a,{msg:e},i.a.createElement(oO.a,{msg:e}),"\xa0\xa0",i.a.createElement(cO.a,{msg:e,relative:!0}),i.a.createElement("br",null),i.a.createElement(kO.a,null,i.a.createElement(PO,{msg:e},i.a.createElement(lO.a,{msg:e}),i.a.createElement(dO.a,{msg:e,blocksContainerContext:nO.a.threads_flexpane}),i.a.createElement(iO.b,{msg:e}),i.a.createElement(rO.a,{msg:e,blocksContainerContext:nO.a.threads_flexpane})),i.a.createElement(hO.a,{msg:e})))))))))}}function RM(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function DM(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?RM(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):RM(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}reply_ThreadReplyMessage.defaultProps=xM;var FM=new x.b("threads"),LM=Object(aO.b)(root_ThreadRootMessage),UM=Object(aO.b)(reply_ThreadReplyMessage),BM={threadTs:void 0,channelId:void 0,teamId:void 0,subscribed:void 0,lastRead:void 0,maxMarkableTs:void 0,oldest:void 0,latest:void 0,timestamps:[],reachedStart:!1,reachedEnd:!1,prevReachedEnd:!1,userHasUnreadThreads:!1,fileId:void 0,comments:[],messages:{},startTs:void 0,highlightTs:void 0,highlightKey:void 0,showDragOverlay:!1,scrollMarkTs:void 0,scrollMarkOffset:0,serializationKey:void 0,clearSerializedDataForKey:r.a,requestHistory:r.a,clearHighlight:r.a,markThread:r.a,primaryView:void 0,windowFocused:!1,userAttention:"",featureAriaApplicationMode:!1,clientTheme:"light",logInfo:r.a,logWarn:r.a,logError:r.a,clogger:{track:r.a},jumpToMessage:r.a,setFocusRequestedTs:r.a,focusRequested:void 0,setFocusRequested:r.a,maybeFocusThreadInAllThreads:()=>!1,maybeFocusThreadInAllUnreads:r.a,focusInput:null,setFocusInput:r.a,makeMessageSummary:r.a,channel:void 0,channelIsYou:!1,channelIsMuted:!1,channelHasDraft:!1,channelBadgeCount:0,isChannelUnavailable:!1,unavailableTeamId:"",readOnly:!1,featureAnnounceOnly:!1,isFileExpanding:!1,featureOfflineMode:!1,isOffline:!1,truncateThreadHistory:r.a,impressionLoggingWebGroup:"control",hasReceivedThreadedMessage:!0,setUserPrefByApi:r.a,featureMessageNavigationShortcuts:!1,featureContextualMessageShortcuts:!1},HM="THREAD-FLEXPANE";class threads_ThreadsFlexpane extends s.Component{static getRowsAndKeys(e,t){var{threadTs:a,reachedStart:n,reachedEnd:r,prevReachedEnd:s,timestamps:i,comments:o,messages:c}=e,{commentsExpanded:l,degraded:d}=t,p=[],u=[];if(Object(bs.a)(i))return{rows:u,keys:p};var h=Object(Ku.a)(i)===a,m=Object(Iv.a)(i,a);return n||d||(p.push("loading-start-".concat(Object(Ku.a)(m))),u.push({type:"loading"})),h&&(p.push(a),u.push({type:"root",ts:a}),Object(bs.a)(o)||(p.push("comments-toggle"),u.push({type:"comments-toggle"}),l&&o.forEach(e=>{p.push(e.id),u.push({type:"comment",comment:e})})),m.length&&(p.push("separator"),u.push({type:"separator"}))),m.forEach((e,t)=>{var a=c[e];Object($g.gb)(a)||(p.push(e),u.push({type:"reply",ts:e,prevTs:m[t-1]}))}),r||s?(p.push("input"),u.push({type:"input"})):d||(p.push("loading-end"),u.push({type:"loading"})),{rows:u,keys:p}}constructor(e){super(e),this.requestHistory=this.requestHistory.bind(this),this.renderRow=this.renderRow.bind(this),this.renderList=this.renderList.bind(this),this.tryAgain=this.tryAgain.bind(this),this.toggleComments=this.toggleComments.bind(this),this.isFocusableItem=this.isFocusableItem.bind(this),this.onFocusEnter=this.onFocusEnter.bind(this),this.onFocusLeave=this.onFocusLeave.bind(this),this.clogThreadEvent=this.clogThreadEvent.bind(this),this.onArrowKeyLeft=this.onArrowKeyLeft.bind(this),this.shouldIgnoreArrowKeys=this.shouldIgnoreArrowKeys.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.getAriaLabelForRow=this.getAriaLabelForRow.bind(this),this.renderBody=this.renderBody.bind(this),this.renderSubtitle=this.renderSubtitle.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onItemTabWithin=this.onItemTabWithin.bind(this),this.onVisibleRowsChanged=this.onVisibleRowsChanged.bind(this),this.onItemFocusEnter=this.onItemFocusEnter.bind(this),this.onUpArrowInEmptyInput=this.onUpArrowInEmptyInput.bind(this),this.keys=null,this.rows=null,this.historyRateLimiter=new vy.a,this.listRef=i.a.createRef(),this.flexpane=i.a.createRef(),this.state={degraded:Object(eO.a)(),commentsExpanded:!1,hasKeyboardFocus:!1,errored:!1},e.scrollMarkTs||e.scrollMarkOffset?this.initialScrollMark={mark:e.scrollMarkTs,offset:e.scrollMarkOffset}:this.initialScrollMark={},this.attachMessageImpressionsLogger(e)}componentDidMount(){this.checkUnreads(),Object(kt.a)()&&this.maybeFocus();var{scrollMarkTs:e,scrollMarkOffset:t,serializationKey:a}=this.props;(e||t)&&a&&this.props.clearSerializedDataForKey(a),this.props.hasReceivedThreadedMessage||this.props.setUserPrefByApi({pref:"has_received_threaded_message",value:!0})}shouldComponentUpdate(e,t){if(!Object(Ti.a)(this.state,t))return!0;var a=this.props,{messages:n}=a,r=Object(ya.a)(a,["messages"]),{messages:s}=e,i=Object(ya.a)(e,["messages"]);return!Object(Ti.a)(r,i)}componentDidUpdate(e){this.checkUnreads();var{threadTs:t,channelId:a}=this.props,n=Object(af.c)(a,t),{threadTs:r,channelId:s}=e,i=Object(af.c)(s,r);n!==i&&this.historyRateLimiter.reset(),i&&n!==i&&this.props.truncateThreadHistory({threadKey:i}),this.maybeFocus()}componentWillUnmount(){var{focusInput:e,channelId:t,threadTs:a}=this.props;e===Object(af.c)(t,a)&&this.props.setFocusInput(null),this.props.truncateThreadHistory({threadKey:Object(af.c)(t,a)});try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(n){this.props.logError(HM,"threads_flexpane_unable_log_message_impressions","ThreadsFlexpane unable to log message impressions",n)}delete this.messageImpressionLogger}onArrowKeyLeft(){var{channelId:e,threadTs:t,primaryView:a}=this.props;if(Object(qp.a)([bM.a.allUnreads,"Punreads"],a))return this.props.maybeFocusThreadInAllUnreads(Object(af.c)(e,t)),Promise.resolve();if(a===bM.a.allThreads&&this.props.maybeFocusThreadInAllThreads({channelId:e,threadTs:t}))return Promise.resolve();return this.props.jumpToMessage({channelId:this.props.channelId,ts:this.props.threadTs}).then(()=>{this.props.setFocusRequestedTs(this.props.threadTs)})}onFocusEnter(e){this.setState(()=>({hasKeyboardFocus:e.isKeyboardFocus}),()=>{var{focusRequested:e}=this.props;e&&this.props.setFocusRequested(null)})}onFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}onItemTabWithin(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}onKeyDown(e){OC({e:e,isMenuVisible:Object(Be.g)()})&&this.focusInput()}onItemFocusEnter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:t,relatedTarget:a}=e;this.props.featureMessageNavigationShortcuts&&(this.state.hasKeyboardFocus||this.setState(()=>({hasKeyboardFocus:!0})),"input"===t&&a&&this.focusInput())}onUpArrowInEmptyInput(){var{cmd:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{featureMessageNavigationShortcuts:t}=this.props;!e&&t&&this.focusLastMessage()}onVisibleRowsChanged(e,t){try{this.messageImpressionLogger.setCurrentlyVisibleMessages(t.map(e=>this.props.messages[e]))}catch(a){this.props.logError(HM,"threads_flexpane_unable_log_message_impressions","ThreadsFlexpane unable to log message impressions",a)}}getAriaLabelForRow(e){var{index:t}=e;if(this.props.makeMessageSummary){var a=this.rows[t];if(a&&a.type)if("root"===a.type||"reply"===a.type)return{"aria-label":this.props.makeMessageSummary({channelId:this.props.channelId,ts:a.ts,hasFocus:this.state.hasKeyboardFocus,day:{ts:a.ts,isFirstDay:!1,isLastDay:!1},viewContext:Of.I.THREADS_FLEXPANE})}}}componentDidCatch(e){this.setState(()=>({errored:!0})),this.props.logError(HM,"ThreadsFlexpane componentDidCatch","threads_flexpane_did_catch",e)}UNSAFE_componentWillReceiveProps(e){var t=Object(af.c)(this.props.channelId,this.props.threadTs),a=Object(af.c)(e.channelId,e.threadTs);this.state.errored&&t!==a&&this.setState(e=>DM({},e,{errored:!1})),this.props.teamId!==e.teamId&&this.attachMessageImpressionsLogger(e)}attachMessageImpressionsLogger(e){this.messageImpressionLogger=new gy.a({teamId:e.teamId,experimentGroup:e.impressionLoggingWebGroup,clogger:e.clogger,messageViewLocation:fy.a.THREAD})}focusLastMessage(){var e=Object(qu.a)(this.rows,{type:"reply"})||Object(hp.a)(this.rows,{type:"root"});e&&this.listRef.current.list.focusOnKey(e.ts)}focusInput(){var e=Object(zu.a)({viewContext:Of.I.THREADS_FLEXPANE,channelId:this.props.channelId,threadTs:this.props.threadTs});if(e){var t=()=>{e.focus()};Object(vn.c)()?setTimeout(t,0):t()}}blur(){var e=this.listRef.current&&this.listRef.current.list;e&&e.blur()}checkUnreads(){var{channelId:e,threadTs:t,subscribed:a,lastRead:n,reachedEnd:r,maxMarkableTs:s,userAttention:i,userHasUnreadThreads:o,logInfo:c}=this.props;if(a&&r&&s){var l=Object(af.c)(e,t);if(!n||n<s){if(Object(kt.a)()){if(i!==St.a.MESSAGE_PANE)return void c(HM,"Not marking ".concat(l," to ").concat(s," because ").concat(i))}else if(!Object(Ju.f)())return void c(HM,"Not marking ".concat(l," to ").concat(s," because ").concat(Object(Ju.c)()));if(!o)return void c(HM,"Not marking ".concat(l," to ").concat(s," because no unread threads yet"));c(HM,"Marking ".concat(Object(af.c)(e,t),": ").concat(s)),this.props.markThread({channelId:e,ts:t,lastRead:s,reason:"mark-thread-as-read-from-flexpane"})}}}checkUserAttentionIsOnChat(){return Object(kt.a)()?this.props.userAttention===St.a.MESSAGE_PANE:Object(Ju.f)()}clogThreadEvent(e){var{event:t,metadata:a}=e,{channelId:n,threadTs:r,clogger:s}=this.props;s.track(t,DM({parent_message_id:r,channel_id:n,is_threads_view:0,is_flexpane:1},a))}focus(){var e=this.listRef.current&&this.listRef.current.list;if(e){this.setState(()=>({hasKeyboardFocus:!0}));var t=e.getInitialActiveItem();if(t)return e.scrollToKey(t),void e.setActiveItem(t);e.focus()}}isFocusableItem(e){var{index:t}=e,a=this.rows[t];return!!a&&("loading"!==a.type&&("separator"!==a.type&&!("input"===a.type&&!this.props.featureMessageNavigationShortcuts)))}isListScrollable(){var e=this.listRef.current&&this.listRef.current.list;return!(e&&e.layout.getHeightValidity("input"))||e.getContentHeight()>e.getContainerHeight()}maybeFocus(){var{focusRequested:e,timestamps:t,channelId:a,threadTs:n,featureContextualMessageShortcuts:r}=this.props;if(e&&!Object(bs.a)(t)){var s=e===Object(af.c)(a,n),i=this.keys&&-1!==this.keys.indexOf(e);(s||r&&i)&&this.focus()}}requestHistory(e){var{oldest:t,latest:a}=e,{channelId:n,threadTs:r,requestHistory:s,logError:i,logWarn:o}=this.props;if(this.historyRateLimiter.isRequestPending({oldest:t,latest:a}))return!1;if(this.historyRateLimiter.shouldPreventHistoryRequest({oldest:t,latest:a}))return this.beaconedRateLimit?o(HM,"Rate-limited thread: ".concat(Object(af.c)(n,r))):(i(HM,"Rate-limited thread: ".concat(Object(af.c)(n,r))),this.beaconedRateLimit=!0),!1;this.beaconedRateLimit=!1;var c=s({oldest:t,latest:a,channelId:n,threadTs:r});return c&&this.historyRateLimiter.logHistoryRequest({oldest:t,latest:a,promise:c}),c.then(e=>(this.setState(e=>DM({},e,{errored:!1})),e)).catch(e=>(this.setState(e=>DM({},e,{errored:!0})),Promise.reject(e)))}shouldIgnoreArrowKeys(e){return!!Object($u.a)(e.target)||(!this.checkUserAttentionIsOnChat()||!this.state.hasKeyboardFocus)}toggleComments(){var e=this.state.commentsExpanded;this.setState(()=>({commentsExpanded:!e}))}tryAgain(){this.setState(e=>DM({},e,{errored:!1}))}renderBody(){var{channelId:e,threadTs:t,timestamps:a,showDragOverlay:n,featureOfflineMode:r,isOffline:o,clientTheme:c}=this.props,{errored:l}=this.state;if(r&&o&&Object(bs.a)(a))return i.a.createElement("div",{className:"p-threads_flexpane"},i.a.createElement(zv.a,null));if(l)return i.a.createElement("div",{className:"p-threads_flexpane"},i.a.createElement(NM,{tryAgain:this.tryAgain}));var d=i.a.createElement(s.Fragment,null,this.renderMessageList(),Object(bs.a)(a)&&i.a.createElement(vM,{clientTheme:c}),n&&i.a.createElement(zE,null));return Object(kt.a)()?i.a.createElement($E,{location:JE.THREAD,channelId:e,threadTs:t,className:"p-threads_flexpane",viewContext:Of.I.THREADS_FLEXPANE,elementProps:{onKeyDown:this.onKeyDown}},d):i.a.createElement("div",{className:"p-threads_flexpane",onKeyDown:this.onKeyDown},d)}renderList(e){var{rows:t,keys:a}=threads_ThreadsFlexpane.getRowsAndKeys(this.props,this.state);this.rows=t,this.keys=a;var r=this.state.degraded?Jv.a:Fj.a,{reachedEnd:s,reachedStart:o,featureAriaApplicationMode:c,channel:l,channelId:d,channelIsYou:p,channelIsMuted:u,channelHasDraft:h,channelBadgeCount:m,threadTs:b,readOnly:_,featureAnnounceOnly:g,featureOfflineMode:f,isOffline:v}=this.props,O=[{keys:["left"],handler:this.onArrowKeyLeft,filter:this.shouldIgnoreArrowKeys}],y=zh({type:Object(B.u)(l),displayName:Object(B.v)(l),isShared:Object(B.ab)(l),isOrgShared:Object(B.vb)(l),hasUnreads:!!Object(B.U)(l),isArchived:Object(B.X)(l),unreadCount:Object(B.U)(l),isYou:p,isMuted:u,hasDraft:h,badgeCount:m,isSelected:!1,userActive:!1,isTyping:!1,isThread:!0,canPost:!_,featureAnnounceOnly:g}),C=(()=>{if(!this.rows.length)return null;var e=this.rows.filter(e=>"reply"===e.type)[0];return e?e.ts:b})(),j=Object(af.e)(Object(af.c)(d,b));return i.a.createElement(fP.a,null,t=>{var{measureRef:l,width:d,height:p}=t;return i.a.createElement("div",{className:"flex_one no_min_height",ref:l},i.a.createElement(r,Object(n.a)({},e,{id:j,keys:a,width:d,height:p,rowRenderer:this.renderRow,isFocusableItem:this.isFocusableItem,ignoreKeyCommandsOnInputs:!this.props.featureMessageNavigationShortcuts,initialActiveItem:C,onFocusEnter:this.onFocusEnter,onItemTabWithin:this.onItemTabWithin,onItemFocusEnter:this.onItemFocusEnter,onFocusLeave:this.onFocusLeave,reachedEnd:s,reachedStart:o,"aria-label":y,getPropsForItem:this.getAriaLabelForRow,persistentKeys:["input"],keyCommands:O,useAriaApplicationMode:c,featureOfflineMode:f,isOffline:v,shouldIgnoreArrowKeys:this.shouldIgnoreArrowKeys})))})}renderMessageList(){if(this.props.isChannelUnavailable){var{unavailableTeamId:e,channelId:t}=this.props;return i.a.createElement(_y,{unavailableTeamId:e,channelId:t,isThread:!0})}var{channelId:a,threadTs:r,oldest:s,latest:o,timestamps:c,startTs:l,highlightTs:d,highlightKey:p,reachedStart:u,reachedEnd:h,comments:m,clientTheme:b}=this.props;if(!a||!r)return null;var{commentsExpanded:_}=this.state,g={comments:m,commentsExpanded:_,highlightTs:d,highlightKey:p},{mark:f,offset:v}=this.initialScrollMark;return i.a.createElement(_M.a,Object(n.a)({oldest:s,latest:o,timestamps:c,listRenderer:this.renderList,startTs:f||l,startTsOffset:v,highlightKey:p,requestHistory:this.requestHistory,reachedStart:u,reachedEnd:h,isFileExpanding:this.props.isFileExpanding,clientTheme:b,ref:this.listRef},g,{key:Object(af.c)(a,r),onVisibleRowsChanged:this.onVisibleRowsChanged}))}renderRow(e,t){var{hasFocus:a,itemId:n}=t,{channelId:r,highlightTs:s,threadTs:o,comments:c,fileId:l,focusInput:d,featureOfflineMode:p,isOffline:u}=this.props,{commentsExpanded:h}=this.state,m=this.rows[e];if(!m)return null;var b=this.state.hasKeyboardFocus;switch(m.type){case"separator":return i.a.createElement(SM,{channelId:r,threadTs:o});case"root":return i.a.createElement(LM,{channelId:r,ts:m.ts,highlight:m.ts===s,clearHighlight:this.props.clearHighlight,focused:a,renderActionsOffscreen:b,parentId:n});case"reply":return i.a.createElement(UM,{channelId:r,ts:m.ts,highlight:m.ts===s,clearHighlight:this.props.clearHighlight,focused:a,renderActionsOffscreen:b,parentId:n});case"input":return i.a.createElement(jE,{channelId:r,threadTs:o,focusInputOnMount:d===Object(af.c)(r,o)&&!this.isListScrollable(),viewContext:Of.I.THREADS_FLEXPANE,clogThreadEvent:this.clogThreadEvent,onFocus:this.onItemTabWithin,onUpArrow:this.onUpArrowInEmptyInput});case"comments-toggle":return i.a.createElement(yT,{commentCount:c.length,expanded:h,toggleList:this.toggleComments});case"comment":return i.a.createElement(fT,{comment:m.comment,fileId:l});case"loading":return p&&u?i.a.createElement(Bj.a,null):i.a.createElement("div",{className:"p-threads_flexpane__loading"},FM.t("Loading messages..."));default:return null}}renderSubtitle(){var{channelId:e,threadTs:t}=this.props;return i.a.createElement(jM,{channelId:e,threadTs:t})}render(){var{channelId:e,threadTs:t}=this.props;if(!e||!t)return null;var a=Object(kt.a)()?r.a:this.focus,n=Object(kt.a)()?r.a:this.blur;return i.a.createElement(FT.b,{ref:this.flexpane,focus:this.focus,title:FM.t("Thread"),renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,flexName:"convo",viewId:Of.I.THREADS_FLEXPANE,kbNavOrder:Object(kt.a)()?void 0:4,bodyClassName:"p-threads_flexpane_container",onFocus:a,onBlur:n})}}threads_ThreadsFlexpane.defaultProps=BM;var WM=Object(sy.a)(threads_ThreadsFlexpane,{getStateToSerialize:r.a,getDerivedProps:e=>{var{instance:t}=e;if(!t.listRef||!t.listRef.current)return{};var{mark:a,offset:n,stickToBottom:r}=t.listRef.current.getScrollmark();return{scrollMarkTs:r?"input":a,scrollMarkOffset:r?0:n}}});var qM=Object(lT.a)(WM,{alwaysFetchOnMount:!0}),GM=Object(d.b)((e,t)=>{var a=Object(y.e)(e)[0],[n,r]=(a||"").split("-"),s=t.threadTs||r,i=t.channelId||n,o=Object(L.e)(e,i);if(!s||!i)return{};var c,l,d=Object(Yg.h)(e)||s,{highlightTs:p,highlightKey:m}=Object(Yg.f)(e),b=Object(af.c)(i,s),{start:g,end:f,timestamps:v,reachedStart:O,reachedEnd:C,prevReachedEnd:j}=Object(Gg.f)(e,b,d),E=Object(Aj.d)(e,{channelId:i,ts:s}),k=Object(Kg.a)(e,i,s,!1);if(k&&k.files&&1===k.files.length){l=k.files[0];var S=Object(aT.c)(e,l);S&&(c=S.comments)}var I={};Object(kt.a)()?I.userAttention=Object(St.c)(e):I.windowFocused=Object(ep.g)(e);var w=Object(Wa.a)({state:e}),T=Object(ne.a)({state:e});return DM({isFileExpanding:Object(nf.e)(e),threadTs:s,channelId:i,teamId:Object(u.b)(e),channel:o,subscribed:E&&E.subscribed,lastRead:E&&E.lastRead,maxMarkableTs:Rj(e,i,v),oldest:g,latest:f,timestamps:v,reachedStart:O,reachedEnd:C,prevReachedEnd:j,userHasUnreadThreads:Object(h.m)(e,"feature_incremental_unread_counts")?Object(Jd.j)(e):Object(Xd.c)(e),fileId:l,comments:c,messages:Object(Kg.b)(e,i)||{},startTs:d,highlightTs:p,highlightKey:m,showDragOverlay:Object(Yg.g)(e),primaryView:Object(_.a)(e)},I,{featureAriaApplicationMode:Object(h.m)(e,"feature_aria_application_mode"),logInfo:w.info,logWarn:w.warn,logError:w.error,clogger:T,channelIsYou:Object(B.Tb)(e,o),channelIsMuted:Object(xr.c)(e,i),channelHasDraft:Object(B.x)(e,i),channelBadgeCount:Object(L.d)(e,o),focusRequested:Object(Yg.e)(e),focusInput:Object(Yg.d)(e),isChannelUnavailable:Object(B.Lb)(e,o),unavailableTeamId:Object(B.T)(e,o),readOnly:Object(B.Eb)(e,o),featureAnnounceOnly:Object(h.m)(e,"feature_announce_only"),featureOfflineMode:Object(h.m)(e,"feature_offline_mode"),isOffline:!Object(Re.c)(e),clientTheme:Object(A.c)(e),impressionLoggingWebGroup:Object(It.c)(e,"impression_logging_web"),hasReceivedThreadedMessage:Object(Ke.k)(e,"has_received_threaded_message"),featureMessageNavigationShortcuts:Object(h.m)(e,"feature_message_navigation_shortcuts"),featureContextualMessageShortcuts:Object(h.m)(e,"feature_contextual_message_shortcuts")})},function(e){return{requestHistory:function(){return e(Object(Yg.j)(...arguments))},clearHighlight:function(){return e(Object(Yg.a)(...arguments))},markThread:function(){return e(Object(Aj.e)(...arguments))},jumpToMessage:function(){return e(Object(Lm.a)(...arguments))},setFocusRequestedTs:function(){return e(Object(Bs.j)(...arguments))},setFocusRequested:function(){return e(Object(Yg.l)(...arguments))},setFocusInput:function(){return e(Object(Yg.k)(...arguments))},makeMessageSummary:function(){return e(Object(Qg.a)(...arguments))},maybeFocusThreadInAllThreads:function(){return e(mM(...arguments))},maybeFocusThreadInAllUnreads:function(){return e(Object(wI.c)(...arguments))},clearSerializedDataForKey:function(){return e(Object(uM.b)(...arguments))},truncateThreadHistory:function(){return e(Object(Yg.o)(...arguments))},setUserPrefByApi:function(){return e(Object(Ve.f)(...arguments))}}})(qM),KM=a("Xthn"),VM=new x.b("mentions"),zM=Object(xt.b)("build message summary for aria labels",function(e,t){var{channelId:a,messageTs:n,hasFocus:r,viewContext:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e(Object(Qg.a)({channelId:a,ts:n,hasFocus:r,viewContext:s}));if(i){var o=t(),c=Object(Kg.a)(o,a,n),l=Object(ef.b)(c),d=Object(Jg.e)(o,l),p=Object(h.m)(o,"feature_a11y_message_summary"),u=Object(h.d)(o),m=Object(Iv.a)(Object(Tj.a)(Object(em.a)(d,"users")),u),b="";if(m.length<=2){var _=m.map(e=>Object(KM.a)(o,{userId:e}));b=VM.t("{names} reacted to your message",{names:Object(x.k)(_).join("")})}else b=p?VM.t("Several people reacted to your message"):"";return"".concat(b," ").concat(i)}});zM.meta={name:"makeReactionsSummary",key:"actionsMakeReactionsSummaryMakeReactionsSummary",description:"build message summary for aria labels"},zM.propTypes={channelId:o.default.string.isRequired,messageTs:o.default.string.isRequired,hasFocus:o.default.bool,viewContext:o.default.string};var YM=zM,QM=a("oUB8"),XM=a("O9e6"),JM=new x.b("mentions"),ZM={prefExcludeAtChannel:"mentions_exclude_at_channels",prefExcludeReactions:"mentions_exclude_reactions",prefExcludeUserGroups:"mentions_exclude_at_user_groups"},$M={closeModal:r.a,featureSonicActivity:!1,onGo:r.a,prefExcludeAtChannel:!1,prefExcludeReactions:!1,prefExcludeUserGroups:!1,removeActivityByType:r.a,setUserPrefByApi:r.a,userGroups:void 0};class activity_options_dialog_ActivityOptionsDialog extends i.a.Component{constructor(e){super(e),Object(X.a)(this,["togglePref"]),this.state={initialPrefs:{prefExcludeAtChannel:e.prefExcludeAtChannel,prefExcludeReactions:e.prefExcludeReactions,prefExcludeUserGroups:e.prefExcludeUserGroups}}}onClose(){var{onGo:e,prefExcludeAtChannel:t,prefExcludeReactions:a,prefExcludeUserGroups:n}=this.props,{initialPrefs:r}=this.state;r.prefExcludeAtChannel===t&&r.prefExcludeReactions===a&&r.prefExcludeUserGroups===n||(t&&!r.prefExcludeAtChannel&&this.props.removeActivityByType("channel"),a&&!r.prefExcludeReactions&&this.props.removeActivityByType("reaction"),n&&!r.prefExcludeUserGroups&&this.props.removeActivityByType("user_group"),e())}togglePref(e){var t=e.target.name,a=ZM[t];this.props.setUserPrefByApi({pref:a,value:!e.target.checked})}renderUserGroupList(){var{featureSonicActivity:e,userGroups:t}=this.props;if(!e)return null;var a=t.filter(e=>Object(bP.v)(e)&&Object(bP.m)(e));if(Object(bs.a)(a))return JM.t("User Groups are collections of individual members");var n=a.slice(0,3).map(e=>i.a.createElement("strong",null,Object(bP.f)(e)));return a.length<=3?JM.rt("You\u2019re a member of {groups}",{groups:Object(x.k)(n,{react:!0})}):JM.rt("You\u2019re a member of {group1}, {group2}, {group3}, and {numOthers, plural, =1 {# other} other {# others}}",{group1:n[0],group2:n[1],group3:n[2],numOthers:a.length-3})}render(){var{featureSonicActivity:e,prefExcludeAtChannel:t,prefExcludeReactions:a,prefExcludeUserGroups:n}=this.props;return e?i.a.createElement(mc.a,{closeModal:()=>{this.onClose(),this.props.closeModal()}},i.a.createElement(mc.h,null,i.a.createElement(mc.j,{id:"activity_options__title-bar",title:JM.t("Activity view options")})),i.a.createElement(mc.d,null,i.a.createElement(mc.e,null,i.a.createElement("p",null,JM.rt("Your activity view will always include <r1>mentions</r1> and <r1>keywords</r1>. You can also choose to show or hide the following:",null,e=>{var{text:t}=e;return i.a.createElement("strong",null,t)})),i.a.createElement(xs.a,{type:"inline",cursor:"pointer",text:JM.t("@channel mentions")},i.a.createElement(hE.a,{onChange:this.togglePref,checked:!t,name:"prefExcludeAtChannel"})),i.a.createElement(xs.a,{type:"inline",cursor:"pointer",text:JM.t("Reactions")},i.a.createElement(hE.a,{onChange:this.togglePref,checked:!a,name:"prefExcludeReactions"})),i.a.createElement(xs.a,{type:"inline",cursor:"pointer",text:JM.t("User Groups"),className:"margin_bottom_175",subtext:this.renderUserGroupList()},i.a.createElement(hE.a,{onChange:this.togglePref,checked:!n,name:"prefExcludeUserGroups"}))))):null}}activity_options_dialog_ActivityOptionsDialog.defaultProps=$M;var ex={closeModal:function(){return Object(Ua.a)(...arguments)},removeActivityByType:function(){return Object(QM.h)(...arguments)},setUserPrefByApi:function(){return Object(Ve.f)(...arguments)}},tx=Object(d.b)(e=>({prefExcludeAtChannel:Object(Ke.k)(e,"mentions_exclude_at_channels"),prefExcludeReactions:Object(Ke.k)(e,"mentions_exclude_reactions"),prefExcludeUserGroups:Object(Ke.k)(e,"mentions_exclude_at_user_groups"),featureSonicActivity:Object(h.m)(e,"feature_sonic_activity"),userGroups:Object(hP.b)(e)}),ex)(activity_options_dialog_ActivityOptionsDialog),ax=(a("YjF7"),20),nx=new x.b("mentions"),rx={activityList:[],enqueueToast:r.a,featureSonicActivity:!1,hasMore:!1,isLoading:!1,fetchActivityMentions:r.a,openModal:r.a,makeMessageSummary:r.a,makeReactionsSummary:r.a,isIAMessagingEnabled:!1};class activity_flexpane_ActivityFlexpane extends i.a.Component{constructor(e){super(e),Object(X.a)(this,["fetchMentions","fetchMoreMentions","openOptionsDialog","renderEmpty","focus","onItemTabWithin"]),this.list=i.a.createRef(),this.flexpane=i.a.createRef()}componentDidMount(){this.fetchMentions()}onItemTabWithin(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}fetchMentions(){var{afterTs:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props.fetchActivityMentions({afterTs:e,limit:ax})}fetchMoreMentions(){var{activityList:e,hasMore:t,isLoading:a}=this.props;if(!a&&t){var n=e[e.length-1].ts;this.fetchMentions({afterTs:n})}}focus(){var e=this.list.current;e&&e.getWrappedInstance().focus()}openOptionsDialog(){var{featureSonicActivity:e}=this.props;e&&this.props.openModal({element:i.a.createElement(tx,{onGo:()=>{this.fetchMentions(),this.props.enqueueToast({element:i.a.createElement(Ga.b,Object(n.a)({},FT.a,{position:"top-right",invert:!0}),nx.t("Activity view updated"))})}})})}renderEmpty(e){var{isOffline:t}=e,{featureSonicActivity:a}=this.props;return a?t?i.a.createElement(CP.a,{title:nx.t("Couldn\u2019t load your recent activity"),description:nx.t("Try again when you\u2019re online"),primaryActionText:nx.t("Retry"),onClickPrimaryAction:this.fetchMentions}):i.a.createElement(CP.a,{imageUrl:cdn_url+"/80588/img/accent-bird.png",imageUrl2x:cdn_url+"/80588/img/accent-bird@2x.png",title:nx.t("Never miss a beat"),description:nx.t("When a team member mentions you or adds a reaction to your message, that message will appear here."),secondaryActionText:nx.t("View options"),onClickSecondaryAction:this.openOptionsDialog}):null}render(){var{activityList:e,isLoading:t,featureSonicActivity:a}=this.props;return a?i.a.createElement(FT.b,{ref:this.flexpane,focus:this.focus,className:"p-activity_flexpane",isEmpty:Object(bs.a)(e),isLoading:t,onOptionsClick:this.props.isIAMessagingEnabled?null:this.openOptionsDialog,renderBody:()=>i.a.createElement(XM.a,{ref:this.list,fetchActivity:this.fetchMoreMentions,isLoading:t,items:e,onItemTabWithin:this.onItemTabWithin,makeMessageSummary:this.props.makeMessageSummary,makeReactionsSummary:this.props.makeReactionsSummary}),renderEmpty:this.renderEmpty,title:nx.t("Activity"),viewId:Of.I.ACTIVITY_FLEXPANE,kbNavOrder:Object(kt.a)()?void 0:4.1}):null}}activity_flexpane_ActivityFlexpane.defaultProps=rx;var sx={enqueueToast:function(){return Object(qa.c)(...arguments)},fetchActivityMentions:function(){return Object(QM.c)(...arguments)},openModal:function(){return Object(Ua.e)(...arguments)},makeMessageSummary:function(){return Object(Qg.a)(...arguments)},makeReactionsSummary:function(){return YM(...arguments)}},ix=Object(d.b)(e=>({activityList:Object(QM.d)(e),hasMore:Object(QM.e)(e),isLoading:Object(QM.f)(e),featureSonicActivity:Object(h.m)(e,"feature_sonic_activity"),isIAMessagingEnabled:Object(Rr.c)(e)}),sx)(activity_flexpane_ActivityFlexpane),ox=(a("BfV3"),new x.b("whats_new")),cx={isLoading:!1,updates:[],setUserPrefByApi:r.a};class whats_new_WhatsNew extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["renderBody","renderControls","focus","onItemTabWithin"]),this.list=i.a.createRef(),this.flexpane=i.a.createRef(),this.initialWhatsNewRead=e.whatsNewRead}componentDidMount(){this.maybeUpdateWhatsReadPref()}componentDidUpdate(){this.maybeUpdateWhatsReadPref()}componentWillUnmount(){this.timer&&clearTimeout(this.timer),this.timer=null}onItemTabWithin(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}maybeUpdateWhatsReadPref(){var{updates:e}=this.props;if(-1!==this.props.whatsNewRead&&!Object(bs.a)(e)){var t=e[0].timestamp;this.props.whatsNewRead>=t||(this.timer&&clearTimeout(this.timer),this.timer=null,this.timer=setTimeout(()=>{this.props.setUserPrefByApi({pref:"whats_new_read",value:t})},1e3))}}focus(){var e=this.list.current;e&&e.getWrappedInstance().focus()}renderBody(){var{updates:e}=this.props;return i.a.createElement(vw,{ref:this.list,items:e,whatsNewRead:this.initialWhatsNewRead,onItemTabWithin:this.onItemTabWithin})}renderControls(){return i.a.createElement(Cw,null)}render(){var{isLoading:e,updates:t}=this.props,a=ox.t("What\u2019s New");return i.a.createElement(FT.b,{ref:this.flexpane,focus:this.focus,isEmpty:Object(bs.a)(t),isLoading:e,renderBody:this.renderBody,renderControls:this.renderControls,title:a,viewId:Of.I.WHATS_NEW,kbNavOrder:Object(kt.a)()?void 0:4.4})}}whats_new_WhatsNew.defaultProps=cx;var lx={setUserPrefByApi:function(){return Object(Ve.f)(...arguments)}},dx=Object(d.b)(e=>({updates:Object(jl.f)(e),isLoading:Object(jl.c)(e),whatsNewRead:Object(Ke.k)(e,"whats_new_read")}),lx)(whats_new_WhatsNew),px=a("o18M"),ux=a("+sOg"),hx=new x.b("starred_items"),mx={fetchStarsList:r.a,isLoading:!1,starredItems:void 0,cursorMark:void 0};class starred_items_StarredItemsFlexpane extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["fetchMoreStarredItems","renderEmpty","focus","fetchStarredItems","onItemTabWithin"]),this.list=i.a.createRef(),this.flexpane=i.a.createRef(),this.requestStars=null}componentDidUpdate(e){var{starredItems:t,cursorMark:a}=this.props;!Object(bs.a)(e.starredItems)&&Object(bs.a)(t)&&a&&this.fetchStarredItems(a)}onItemTabWithin(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}focus(){var e=this.list.current;e&&e.focus()}fetchStarredItems(e){return!this.requestStars&&(this.requestStars=this.props.fetchStarsList({exclude:"Ch,Gh,Dh",limit:20,cursor:e}),this.requestStars.finally(()=>{this.requestStars=null}))}fetchMoreStarredItems(){var{isLoading:e,cursorMark:t}=this.props;e||t&&this.fetchStarredItems(t)}renderEmpty(e){var{isOffline:t}=e;return t?i.a.createElement(CP.a,{title:hx.t("Couldn\u2019t load your Starred Items"),description:hx.t("Try again when you\u2019re online"),primaryActionText:hx.t("Retry"),onClickPrimaryAction:this.fetchStarredItems}):i.a.createElement(CP.a,{imageUrl:cdn_url+"/80588/img/posts.png",imageUrl2x:cdn_url+"/80588/img/posts@2x.png",title:hx.t("No starred items",{fallbackHash:"d46c3b7fbafdaa0aee845d35ce59b0d5f6de8b70"}),description:hx.t("Star a message or file to save it here. Mark your to-dos, or save something for later \u2014 only you can see your starred items, so use them however you like!",{fallbackHash:"02f88652fff0da938a523c5543e133eefa38b085"})})}render(){return i.a.createElement(FT.b,{ref:this.flexpane,focus:this.focus,className:"p-starred_items_flexpane",isEmpty:Object(bs.a)(this.props.starredItems),isLoading:this.props.isLoading,renderBody:()=>i.a.createElement(ux.a,{ref:this.list,fetchMoreItems:this.fetchMoreStarredItems,isLoading:this.props.isLoading,items:this.props.starredItems,onItemTabWithin:this.onItemTabWithin}),renderEmpty:this.renderEmpty,title:hx.t("Starred Items"),viewId:Of.I.STARS_FLEXPANE,kbNavOrder:Object(kt.a)()?void 0:4.3})}}starred_items_StarredItemsFlexpane.defaultProps=mx;var bx={fetchStarsList:function(){return Object(px.c)(...arguments)}},_x=Object(d.b)(e=>({isLoading:Object(px.f)(e),starredItems:Object(px.d)(e),totalPages:Object(px.g)(e),cursorMark:Object(px.e)(e)}),bx)(starred_items_StarredItemsFlexpane),gx=a("0agN"),fx=(a("WJwm"),160),vx=60,Ox={sectionId:"",expand:r.a,collapse:r.a,header:null,children:null,sectionClasses:"",key:null,featureM11nChannelDetails:!1,focusKey:null,setFocusKey:r.a,clogger:{track:r.a},isIAPhase1Enabled:!1};class section_container_SectionContainer extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["onClick","focus","onAnimationTick","onAnimationEnd"]),this.headerButtonRef=i.a.createRef(),this.contentRef=i.a.createRef(),this.state={contentHeight:e.isExpanded?"auto":0,isAnimating:!1,isExpanding:!1}}componentDidMount(){this.props.focusKey&&this.props.focusKey===this.props.sectionId&&this.setFocusForKeyboardUsers()}componentDidUpdate(e){var{focusKey:t,isExpanded:a}=e,{isExpanded:n,focusKey:r}=this.props,s=!a&&n;(s||a&&!n)&&this.startAnimation(s),r&&t!==r&&r===this.props.sectionId&&this.setFocusForKeyboardUsers()}componentWillUnmount(){this.animation&&this.animation.cancel()}onClick(){var{collapse:e,clogger:t,expand:a,isExpanded:n,sectionId:r,isIAPhase1Enabled:s}=this.props;return"apps"===r&&t.track(ie.EventId.APP_CLICK_EXPAND_APP_LIST_IN_CHANNEL_DETAILS,{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.step]:ie.UiStep.CHANNEL_DETAILS,[ie.UiContextKeys.ui_element]:ie.UiElement.EXPAND_APP_LIST}},is_iap1:s}),"pins"===r&&t.track("APP_CLICK_EXPAND_PINS_LIST_IN_CHANNEL_DETAILS",{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.step]:ie.UiStep.CHANNEL_DETAILS}},is_iap1:s}),"members"===r&&t.track("APP_CLICK_EXPAND_MEMBERS_LIST_IN_CHANNEL_DETAILS",{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.step]:ie.UiStep.CHANNEL_DETAILS}},is_iap1:s}),"shared_files"===r&&t.track("APP_CLICK_EXPAND_SHARED_FILES_LIST_IN_CHANNEL_DETAILS",{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.step]:ie.UiStep.CHANNEL_DETAILS}},is_iap1:s}),"notification_prefs"===r&&t.track("APP_CLICK_EXPAND_NOTIFICATION_PREFS_IN_CHANNEL_DETAILS",{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.step]:ie.UiStep.CHANNEL_DETAILS}},is_iap1:s}),n?e():a()}onAnimationTick(e){var{value:t,nextTick:a}=e;this.contentRef.current&&this.setState(()=>({contentHeight:t}),a)}onAnimationEnd(){this.animation=null,this.setState(e=>({isExpanding:!1,contentHeight:e.isExpanding?"auto":0,isAnimating:!1}))}setFocusForKeyboardUsers(){this.focus(),this.props.focusKey&&this.props.setFocusKey(null)}focus(){var e=this.headerButtonRef.current;e&&(e.focus(),e.scrollIntoView())}startAnimation(e){this.setState(()=>({isExpanding:e,isAnimating:!0}),()=>{if(this.contentRef.current){this.animation&&this.animation.cancel();var t=this.contentRef.current.scrollHeight,a=e?0:t,n=e?t:0;this.animation=Object(yh.a)({fromValue:a,toValue:n,duration:this.props.isIAPhase1Enabled?vx:fx,easing:"easeInOutQuad",onTick:this.onAnimationTick,onComplete:this.onAnimationEnd})}else Object(Wa.b)().warn("The element to animate was not rendered. Ensure that `this.state.isAnimating` is set to true")})}render(){var{isExpanded:e,header:t,children:a,sectionClasses:n,key:r,featureM11nChannelDetails:s,isIAPhase1Enabled:o}=this.props;if(!s)return null;var c=l()("p-channel_details_section",n),{contentHeight:d,isAnimating:p}=this.state,u=0!==d||p,h=l()("p-channel_details_section__content",{"p-channel_details_section__content--active":u&&!p}),m=e?"caret-down":"caret-right";return o&&(m=e?"chevron-medium-down":"chevron-medium-right"),i.a.createElement("div",{className:c,key:r},i.a.createElement(He.a,{className:l()("p-channel_details_section__header",{"p-channel_details_section__header--iap1":o}),onClick:this.onClick,"aria-expanded":e,ref:this.headerButtonRef},t,i.a.createElement(We.b,{type:m,inline:!0,className:"p-channel_details_section__caret_icon"})),u&&i.a.createElement("div",{"data-qa":"section_container_content",className:h,ref:this.contentRef,style:{height:d}},a))}}section_container_SectionContainer.defaultProps=Ox;var yx=Object(d.b)((e,t)=>{var a=Object(y.e)(e)[0],n=Object(uw.a)(e);return{featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details"),isExpanded:a===t.sectionId,focusKey:n,isIAPhase1Enabled:Object(Rr.d)(e),clogger:Object(ne.a)({state:e})}},e=>({setFocusKey:t=>e(Object(hw.a)(t))}),null,{withRef:!0})(section_container_SectionContainer);a("N5rH");class section_header_SectionHeader extends s.PureComponent{maybeRenderIcon(){var{iconType:e}=this.props;return e?i.a.createElement(We.b,{type:e,inline:!0,className:"p-channel_details_section__icon"}):null}render(){var{sectionTitle:e,featureM11nChannelDetails:t,isIAPhase1Enabled:a,count:n,hideCount:r}=this.props;return t?i.a.createElement("span",{className:"p-channel_details_section__title"},this.maybeRenderIcon(),i.a.createElement("span",{className:"p-channel_details_section__title-content","data-qa":"channel-details-section-title-content"},e),a&&!r&&i.a.createElement("span",{className:"p-channel_details_section__count"},n)):null}}section_header_SectionHeader.defaultProps={iconType:null,count:0,featureM11nChannelDetails:!1,hideCount:!1};var Cx=Object(d.b)(e=>({featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details"),isIAPhase1Enabled:Object(Rr.d)(e)}))(section_header_SectionHeader),jx=a("/1FC"),Ex=a("MYD1"),kx=(a("zBLs"),new x.b("channel_details")),Sx={openModal:function(){return Object(Ua.e)(...arguments)}},Ix=Object(d.b)(null,Sx)(e=>{var{pin:t,channelId:a,openModal:n}=e,r=Object(s.useCallback)(()=>{n({element:i.a.createElement(Ex.a,{pin:t,channelId:a})})},[t,a,n]),{featureM11nChannelDetails:o}=Object(Ho.a)();if(!o)return null;var c=kx.t("Un-pin this item");return i.a.createElement($r.c,{tip:c,delay:$r.a,position:"bottom-right"},i.a.createElement(He.a,{className:"p-pinned_items__remove_item",onClick:r,"aria-label":c},i.a.createElement(We.b,{type:"times-small"})))}),wx=(a("W3Yc"),new x.b("channel_details"));var Tx=Object(d.b)((e,t)=>{var a=t.channelId,n=Object(L.e)(e,a),r=Object(KS.h)(e,a)||[],s=Object(h.m)(e,"feature_m11n_channel_details"),i=Object(h.m)(e,"feature_longer_channel_names");return{pinnedItemsToRender:r,isImOrMpim:Object(B.hb)(n)||Object(B.pb)(n),isMember:Object(B.nb)(n),featureM11nChannelDetails:s,featureLongerChannelNames:i}},(e,t)=>{var a={channelId:t.channelId};return{maybeFetchPins:()=>{e(Object(KS.k)(a))},fetchPins:()=>{e(Object(KS.e)(a))}}})(class pinned_items_list_PinnedItemsList extends s.Component{componentDidUpdate(e){this.props.channelId!==e.channelId&&this.props.maybeFetchPins(),this.props.isMember&&!e.isMember&&this.props.fetchPins()}render(){var e=this.props.pinnedItemsToRender,t=this.props.channelId;if(!Object(jx.a)(e)||e.length<1){var a=null;if(this.props.featureM11nChannelDetails)if(this.props.isImOrMpim)a=wx.rt("No items have been pinned yet! Open the context menu on important messages or files and choose <span>Pin to this conversation</span> to stick them here.",{},e=>{var{text:t,key:a}=e;return i.a.createElement("span",{key:a,className:"p-pinned_items__empty_list_action"},t)});else{var n=this.props.featureLongerChannelNames?i.a.createElement(qf.a,{channelId:t}):i.a.createElement(Ye.a,{channelId:t,inline:!0});a=wx.rt("No items have been pinned yet! Open the context menu on important messages or files and choose <span>Pin to {channelName}</span> to stick them here.",{channelName:n},e=>{var{text:t,key:a}=e;return i.a.createElement("span",{key:a,className:"p-pinned_items__empty_list_action"},t)})}return i.a.createElement("p",{className:"p-pinned_items__empty_list"},a)}return i.a.createElement("ul",{className:"p-pinned_items no_bullets"},e.map(e=>i.a.createElement("li",{key:e.ts||e.id,className:"p-pinned_items__item"},i.a.createElement(VS.a,{pin:e}),i.a.createElement(Ix,{pin:e,channelId:t}))))}}),Nx="pins",Px=new x.b("channel_details");var Ax=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a);return{channelId:a,count:Object(B.O)(n)||0,featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details"),isLoading:Object(KS.i)(e,a)===KS.b.LOADING,isIAPhase1Enabled:Object(Rr.d)(e)}},(e,t)=>{var a={channelId:t.channelId};return{fetchPins:()=>{e(Object(KS.e)(a))},expandPinsSection:()=>e(Object(Ie.e)({sectionId:Nx}))}},null,{withRef:!0})(class pinned_items_section_PinnedItemsSection extends s.Component{componentDidMount(){this.props.fetchPins(),this.focus=this.focus.bind(this),this.sectionContainerRef=i.a.createRef()}componentDidUpdate(e){this.props.channelId!==e.channelId&&this.props.fetchPins()}focus(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}maybeRenderSpinner(){return this.props.isLoading?i.a.createElement(Oc.a,{size:"jumbo"}):null}render(){var{featureM11nChannelDetails:e,count:t,channelId:a,expandPinsSection:n,collapse:r,isIAPhase1Enabled:s}=this.props;if(!e)return null;var o=0===t?Px.t("Pinned Items"):Px.t("{count, plural, =1 {# Pinned Item} other {# Pinned Items}}",{count:t});s&&(o=Px.t("Pinned Items"));var c=i.a.createElement(Cx,{iconType:"thumb-tack",sectionTitle:o,count:t});return i.a.createElement(yx,{ref:this.sectionContainerRef,expand:n,collapse:r,sectionId:Nx,header:c,sectionClasses:"p-channel_details__pinned_items_section",key:Nx},i.a.createElement(Tx,{channelId:a}),this.maybeRenderSpinner())}}),Mx=a("sDWr"),xx=a("wBxZ"),Rx=a("9soY"),Dx=(a("zJYr"),new x.b("team"));var Fx=Object(d.b)(null,function(e){return{fetchAndUpsertTeamsWithQuery:function(){return e(Object(Rx.c)(...arguments))}}})(class enterprise_teams_dialog_EnterpriseTeamsDialog extends s.PureComponent{constructor(e){super(e),this.renderRow=this.renderRow.bind(this),this.fetchPost=this.fetchPost.bind(this),this.onSearchInputChange=this.onSearchInputChange.bind(this),this.state={filteredTeamIds:[],searchQuery:"",marker:void 0,fullyLoaded:!1},this.loading=!1}onSearchInputChange(e){var t=e.target.value;this.setState(()=>({searchQuery:t,filteredTeamIds:[],fullyLoaded:!1,marker:void 0}),()=>{this.fetchTeams()})}fetchPost(){this.fetchTeams()}fetchTeams(){var e=this,{teamIds:t}=this.props,{searchQuery:a,fullyLoaded:n,marker:r}=this.state;return this.loading||n?null:(this.loading=!0,this.props.fetchAndUpsertTeamsWithQuery({query:a,ids:t,marker:r,count:50,reason:"enterprise-teams-dialog/fetchPost"}).then(function(){var{teams:t,next_cursor_mark:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState(e=>({filteredTeamIds:Object(Ai.a)(e.filteredTeamIds,Object(ed.a)(t,"id")),marker:a,fullyLoaded:!a||Object(bs.a)(t)}),()=>{e.loading=!1})}).catch(()=>{this.loading=!1}))}renderSearch(){return this.props.teamIds.length<=10?null:i.a.createElement("div",{className:"p-enterprise_teams_dialog__search"},i.a.createElement(AS.a,{value:this.state.searchQuery,onChange:this.onSearchInputChange,placeholder:Dx.t("Search workspaces"),icon:"search",autoFocus:!0}))}renderTeam(e){return i.a.createElement("div",{className:"p-enterprise_teams_dialog__team"},i.a.createElement(Va.b,{id:e,size:20,className:"p-enterprise_teams_dialog__team_icon"}),i.a.createElement("span",{className:"p-enterprise_teams_dialog__team_name"},i.a.createElement(eo.a,{id:e})))}renderRow(e){var t=this.state.filteredTeamIds[e];return t?this.renderTeam(t):null}renderList(){var{filteredTeamIds:e}=this.state;return i.a.createElement("div",{className:"p-enterprise_teams_dialog__list"},i.a.createElement(fP.a,null,t=>{var{measureRef:a,width:n,height:r}=t;return i.a.createElement("div",{className:"flex_one no_min_height",ref:a},i.a.createElement(Fj.a,{width:n,height:r,keys:e,rowRenderer:this.renderRow,loadAround:this.fetchPost,loadPost:this.fetchPost}))}))}render(){var{title:e}=this.props;return i.a.createElement(di.a,{title:e,showGoButton:!1,showCancelButton:!1,showFooter:!1},i.a.createElement("div",{className:"p-enterprise_teams_dialog__dialog"},this.renderSearch(),this.renderList()))}}),Lx=new x.b("teams"),Ux={channelDisplayName:"",internalTeamIds:[],currentMember:void 0};class channel_workspaces_dialog_ChannelWorkspacesDialog extends s.PureComponent{render(){var{channelDisplayName:e,internalTeamIds:t,currentMember:a}=this.props;if(!a)return null;var n=t;Object(Fe.Gb)(a)&&(n=Object(Fe.o)(a,t));var r=Lx.t("{team_count, number} workspaces in {channel_name}",{team_count:n.length,channel_name:e});return i.a.createElement(Fx,{title:r,teamIds:n})}}channel_workspaces_dialog_ChannelWorkspacesDialog.defaultProps=Ux;var Bx=Object(d.b)(function(e,t){var{channelId:a}=t,n=Object(L.e)(e,a);return{channelDisplayName:Object(B.w)(e,n),internalTeamIds:Object(B.A)(e,n),currentMember:Object(Ca.b)(e)}})(channel_workspaces_dialog_ChannelWorkspacesDialog),Hx=new x.b("channel_details"),Wx=10,qx={enterpriseName:"",enterpriseTeam:void 0,internalTeamIds:void 0,currentMember:void 0,openModal:r.a};class channel_details_workspaces_ChannelDetailsWorkspaces extends s.PureComponent{constructor(e){super(e),this.seeAllWorkspaces=this.seeAllWorkspaces.bind(this)}seeAllWorkspaces(){var{channel:e}=this.props;this.props.openModal({element:i.a.createElement(Bx,{channelId:e.id})})}renderHeading(){return i.a.createElement("h4",{className:"p-channel_details__heading p-channel_details__heading--workspaces"},Hx.t("Workspaces",{fallbackHash:"205b4561ed36923d5a51de1b34c70044bf82e111",fallbackHashNs:"channel_pages"}))}renderOrgWide(){var{enterpriseName:e,enterpriseTeam:t}=this.props;if(!t||!e)return null;var a=i.a.createElement(Va.b,{id:t.id,size:34,className:"p-channel_details__team_icon"});return i.a.createElement("p",{className:"p-channel_details__workspaces_row"},a,i.a.createElement("span",null,Hx.t("Shared with all workspaces in the {enterprise_org_name} organization",{enterprise_org_name:e,fallbackHash:"e66187091a690d71cfc89449bb9c1436d1f3fe20",fallbackHashNs:"channel_pages"})))}renderOrgShared(){var{internalTeamIds:e,currentMember:t}=this.props;if(!e||!t)return null;var a=e;Object(Fe.Gb)(t)&&(a=Object(Fe.o)(t,e));var n,r=Object(xx.a)(a,Wx).map(e=>{var t=e;return i.a.createElement("div",{className:"p-channel_details__workspaces_row",key:t},i.a.createElement(Va.b,{id:e,size:34,className:"p-channel_details__team_icon"}),i.a.createElement(eo.a,{id:e}))});return a.length>Wx&&(n=i.a.createElement(jt.d,{onClick:this.seeAllWorkspaces,type:"outline",size:"small"},Hx.t("See all {total_teams_count, number} workspaces",{total_teams_count:a.length,fallbackHash:"e7958956b6e81d7b4d36988146dbe7ff402bbe38",fallbackHashNs:"channel_pages"}))),i.a.createElement("div",{className:"margin_bottom_100"},r,n)}render(){var{channel:e}=this.props;if(!e||!Object(B.vb)(e))return null;var t=Object(B.xb)(e)?this.renderOrgWide():this.renderOrgShared();return t?i.a.createElement(i.a.Fragment,null,this.renderHeading(),t):null}}channel_details_workspaces_ChannelDetailsWorkspaces.defaultProps=qx;var Gx=Object(d.b)(function(e,t){var{channel:a}=t;return{enterpriseName:Object(Se.e)(e),enterpriseTeam:Object(Se.g)(e),internalTeamIds:Object(B.A)(e,a),currentMember:Object(Ca.b)(e)}},function(e){return{openModal:function(){return e(Object(Ua.e)(...arguments))}}})(channel_details_workspaces_ChannelDetailsWorkspaces),Kx=a("fgg+"),Vx=new x.b("channel_details"),zx={currentTeamId:void 0,memberCounts:void 0,pendingAndConnectedTeamIds:[]};class channel_details_ext_shared_ChannelDetailsExtShared extends s.PureComponent{renderHeading(){var e=Vx.t("Organizations",{fallbackHash:"07605242f7a070b43bdc103189dccf6a5cc43506",fallbackHashNs:"channel_pages"});return i.a.createElement("h4",{className:"p-channel_details__heading p-channel_details__heading--workspaces"},e)}renderMemberCount(e){var{memberCounts:t,currentTeamId:a}=this.props;if(!t||!t.counts)return null;var n=0;if(t.counts.teams_member_count&&!Object(_P.a)(t.counts.teams_member_count[e]))n=t.counts.teams_member_count[e];else if(e===a){var r=Object(k_.a)(Object(Dg.a)(t.counts.teams_member_count));n=t.counts.member_count-r}return Vx.t("{count, plural, =1 {# member} other {# members}}",{count:n,fallbackHash:"03cd6f56ce61c03b5e511a02466ea71e50eab325",fallbackHashNs:"channel_pages"})}renderTeams(){var{pendingAndConnectedTeamIds:e,channel:t}=this.props,a=e.map(e=>{var a=Object(B.zb)(t,e);return i.a.createElement("div",{className:"p-channel_details__workspaces_row",key:e},i.a.createElement(Va.b,{id:e,size:34,className:"p-channel_details__team_icon",isPendingShared:a}),i.a.createElement("div",null,i.a.createElement(eo.a,{id:e}),i.a.createElement("div",{className:"p-channel_details__workspaces_row_member_count"},a?Vx.t("Waiting for them to join\u2026",{fallbackHash:"d180f395db2335524b00cd84b96a7e075edf1694",fallbackHashNs:"channel_pages"}):this.renderMemberCount(e))))});return i.a.createElement("div",{className:"margin_bottom_100"},a)}render(){var{channel:e,pendingAndConnectedTeamIds:t}=this.props;return!Object(B.ab)(e)||Object(bs.a)(t)?null:i.a.createElement(i.a.Fragment,null,this.renderHeading(),this.renderTeams(),!Object(B.vb)(e)&&i.a.createElement(Kx.a,{channel:e}))}}channel_details_ext_shared_ChannelDetailsExtShared.defaultProps=zx;var Yx=Object(d.b)(function(e,t){var{channel:a}=t;return{currentTeamId:Object(u.c)(e),memberCounts:Object($i.f)(e,a.id),pendingAndConnectedTeamIds:Object(B.N)(e,a,{includeSelfTeamId:!0})}})(channel_details_ext_shared_ChannelDetailsExtShared),Qx=a("DO5Y"),Xx=a("ejSh"),Jx=a("IRiz"),Zx=Object(xt.b)("Fetch highlights items list for channel",(e,t,a)=>e(Object(Jx.c)(a)).then(t=>{var n=Object(ps.a)(t,"highlightMsgs.messages",[]);if(Object(bs.a)(n))return[];var r=e(Object(Qx.a)({imsgs:n,channelId:a}));return e(Object(Xx.a)(r)),r}).catch(e=>{throw Object(Wa.a)({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_channel_highlights"}),e}));Zx.meta={name:"fetchHighlightsListForChannel",key:"highlightsStoreFetchHighlightsListForChannel",description:"Fetch highlights items list for channel"},Zx.propTypes={channelId:o.default.string};var $x=Object(xt.b)("Fetch highlights items list for channel",(e,t,a)=>e(Object(Jx.d)(a)).then(e=>{return{topContributors:Object(ps.a)(e,"resp.top_contributors.users",[]),similarChannels:Object(ps.a)(e,"resp.similar_channels.channels",[])}}).catch(e=>{throw Object(Wa.a)({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_top_contributors"}),e}));$x.meta={name:"fetchTopContributorsAndRelatedChannels",key:"highlightsStoreFetchTopContributorsAndRelatedChannels",description:"Fetch highlights items list for channel"},$x.propTypes={channelId:o.default.string};var eR=a("71a+"),tR=a("lkgS"),aR=a("B/i4");class channel_details_similar_channel_ChannelDetailsSimilarChannel extends s.Component{render(){var{channelId:e,memberCount:t}=this.props,a=Object(aR.a)({channelId:e}),n=0===t?"\u2013":t;return i.a.createElement("div",{key:e,className:"p-channel_details__similar_channels_item"},i.a.createElement("div",{className:"p-channel_details__similar_channels_channel"},i.a.createElement(fe.a,{className:"p-channel_details__similar_channels_channel_link",href:a,target:Object(tR.a)(a)},i.a.createElement(qf.a,{channelId:e,truncate:!0}))),i.a.createElement("div",{className:"p-channel_details__member_count"},i.a.createElement(We.b,{type:"user",inline:!0,size:"inherit",className:"p-channel_details__member_count__icon"}),i.a.createElement("span",null,n)))}}channel_details_similar_channel_ChannelDetailsSimilarChannel.defaultProps={channelId:"",memberCount:0};var nR=Object(d.b)((e,t)=>{var a=Object($i.f)(e,t.channelId);return a.counts&&a.counts.member_count?{memberCount:a.counts.member_count}:{memberCount:0}},null)(channel_details_similar_channel_ChannelDetailsSimilarChannel),rR=new x.b("channel_details"),sR={featureM11nChannelDetails:!1,fetchTopContributorsAndRelatedChannels:r.a};class channel_details_insights_ChannelDetailsInsights extends s.Component{constructor(e){super(e),this.state={isLoading:!1,topContributors:[],similarChannels:[]}}componentDidMount(){this.fetchTopContributorsAndRelatedChannels()}componentDidUpdate(e){this.props.channel.id!==e.channel.id&&(this.resetState(),this.fetchTopContributorsAndRelatedChannels())}componentWillUnmount(){this.pendingContributorsAndChannelsFetch&&this.pendingContributorsAndChannelsFetch.cancel()}resetState(){this.setState(()=>({topContributors:[],similarChannels:[]}))}fetchTopContributorsAndRelatedChannels(){var{channel:e}=this.props;this.setState(()=>({isLoading:!0})),this.pendingContributorsAndChannelsFetch=this.props.fetchTopContributorsAndRelatedChannels(e.id).then(e=>{this.setState(()=>({topContributors:e.topContributors,similarChannels:e.similarChannels,isLoading:!1}))}).catch(()=>{this.setState(()=>({topContributors:[],similarChannels:[],isLoading:!1}))}).finally(()=>{this.pendingContributorsAndChannelsFetch=null})}renderTopContributors(){var{featureM11nChannelDetails:e}=this.props,{topContributors:t}=this.state;if(t.length<1||!e)return null;var a=t.map(e=>i.a.createElement(eR.a,{key:e,userId:e},i.a.createElement("div",{className:"p-channel_detais__top_contributor_item"},i.a.createElement(Ov.a,{id:e,size:"medium",showPresence:!0,showStatus:!0})," ")));return i.a.createElement("div",{className:"p-channel_details__subsection"},i.a.createElement("h4",{className:"p-channel_details__heading"},rR.rt("Questions? Try asking...",{fallbackHash:"0f6ef28a0f900aa53c3851aa2411634470e68586",fallbackHashNs:"highlights"})),a)}renderSimilarChannels(){var{similarChannels:e}=this.state;if(e.length<1)return null;var t=e.map(e=>i.a.createElement(nR,{key:e,channelId:e}));return i.a.createElement("div",{className:"p-channel_details__subsection"},i.a.createElement("h4",{className:"p-channel_details__heading"},rR.rt("Related channels",{fallbackHash:"d8396f482fcfaa760ddc8eb1b3b36c193d53b70c",fallbackHashNs:"highlights"})),t)}render(){var{isLoading:e}=this.state;return e?i.a.createElement(Oc.a,{size:"jumbo"}):i.a.createElement("div",null,this.renderTopContributors(),this.renderSimilarChannels())}}channel_details_insights_ChannelDetailsInsights.defaultProps=sR;var iR=Object(d.b)(e=>{return{featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details")}},e=>({fetchTopContributorsAndRelatedChannels:function(){return e($x(...arguments))}}))(channel_details_insights_ChannelDetailsInsights),oR="info",cR=new x.b("channel_details"),lR={collapse:r.a,featureM11nChannelDetails:!1,userIsChannelMember:!0,userCanPost:!0,userCanRenameChannel:!0,userCanSetPurpose:!1,currentMember:null,openModal:r.a,openChannelOptions:r.a,jumpToMessage:r.a,featureLongerChannelNames:!1};class channel_details_section_ChannelDetailsSection extends s.Component{constructor(e){super(e),Object(X.a)(this,["focus","onChannelNameClick","onPurposeLinkClick","onCreatedLinkClick"]),this.sectionContainerRef=i.a.createRef(),this.createdTime=null}onChannelNameClick(){var{channel:e}=this.props;this.props.openChannelOptions({channelId:e.id,section:"rename"})}onPurposeLinkClick(){this.props.userCanSetPurpose&&this.props.openModal({element:i.a.createElement(zf,{channelId:this.props.channel.id})})}onCreatedLinkClick(){return this.props.jumpToMessage({channelId:this.props.channel.id,ts:this.createdTime})}focus(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}renderName(){var{channel:e,userCanRenameChannel:t,featureLongerChannelNames:a}=this.props;return a?i.a.createElement(s.Fragment,null,i.a.createElement("h4",{className:"p-channel_details__heading"},cR.t("Name"),t&&i.a.createElement(te.a,{"aria-label":cR.t("Edit channel name"),className:"p-channel_details__edit_link",onClick:this.onChannelNameClick},cR.t("edit"))),i.a.createElement("div",{className:"p-channel_details__section"},i.a.createElement(qf.a,{channelId:e.id}))):null}renderWorkspaces(){var{channel:e}=this.props;return Object(B.vb)(e)?i.a.createElement(Gx,{channel:e}):Object(B.ab)(e)?i.a.createElement(Yx,{channel:e}):null}renderNonEditablePurpose(e){var{channel:t}=this.props,a=""===e,n=i.a.createElement(qf.a,{channelId:t.id}),r=cR.rt("A description has not been set for {channel_name}.",{channel_name:n,fallbackHash:"b82c50c4275d22bf40adba6201f394c53a0e9d94",fallbackHashNs:"channel_pages"});return i.a.createElement(s.Fragment,null,i.a.createElement("h4",{className:"p-channel_details__heading"},cR.t("Description")),i.a.createElement("div",{className:"p-channel_details__detail_purpose"},i.a.createElement("div",null,a&&r),i.a.createElement(Kr.a,{text:e})))}renderPurpose(){var e=Object(B.Q)(this.props.channel),{userCanPost:t,userCanSetPurpose:a,userIsChannelMember:n}=this.props,r=""===e;if(!n||!t||!a)return this.renderNonEditablePurpose(e);var o=i.a.createElement(te.a,{"aria-label":cR.t("Edit channel description"),className:"p-channel_details__edit_link",onClick:this.onPurposeLinkClick,"data-qa":"channel-details-edit-purpose"},cR.t("edit",{fallbackHash:"9ead47a82a0d25985f22f10651d1f93b3abba317",fallbackHashNs:"channel_pages"})),c=i.a.createElement(te.a,{className:"p-channel_details__set_purpose",onClick:this.onPurposeLinkClick,"data-qa":"channel-details-set-purpose"},cR.t("Set a channel description"));return i.a.createElement(s.Fragment,null,i.a.createElement("h4",{className:"p-channel_details__heading"},cR.t("Description"),!r&&o),i.a.createElement("p",{className:"p-channel_details__detail_purpose"},r&&c,i.a.createElement(Kr.a,{text:e})))}renderCreated(){var e,{channel:t,currentMember:a}=this.props,n=Object(B.q)(t),r=Object(B.p)(t),s=r&&Object(Bf.l)(r);this.createdTime=r;try{e=cR.rt("Created by {creator_name} {days_since_creation, select, 0 {today} 1 {yesterday} other {on {creation_date, date, long}}}",{creator_name:n?i.a.createElement(Wr.a,{id:n}):i.a.createElement(Hf.a,null),days_since_creation:s&&Object(Bf.b)(new Date,s),creation_date:s&&s.getTime()}),a&&a.id===n&&(e=cR.rt("Created by you {days_since_creation, select, 0 {today} 1 {yesterday} other {on {creation_date, date, long}}}",{days_since_creation:s&&Object(Bf.b)(new Date,s),creation_date:s&&s.getTime(),fallbackHash:"20d8301c36c420754114799216822e21d87573a3",fallbackHashNs:"channel_pages"}))}catch(o){return null}return i.a.createElement("div",{className:"p-channel_details__subsection"},i.a.createElement("h4",{className:"p-channel_details__heading"},cR.t("Created")),i.a.createElement(te.a,{className:"p-channel_details__created_link",onClick:this.onCreatedLinkClick},e))}render(){var{featureM11nChannelDetails:e,channel:t,collapse:a,expandInfoSection:n}=this.props;if(!e)return null;if(Object(B.hb)(t)||Object(B.pb)(t))return null;var r=i.a.createElement(Cx,{iconType:"channel-info",sectionTitle:cR.t("Channel Details")});return i.a.createElement(yx,{ref:this.sectionContainerRef,sectionId:oR,expand:n,collapse:a,header:r,sectionClasses:"p-channel_details__channel_details_section",key:"".concat(Mx.d,"_DETAILS_SECTION")},this.renderName(),this.renderWorkspaces(),this.renderPurpose(),this.renderCreated(),i.a.createElement(iR,{channel:t}))}}channel_details_section_ChannelDetailsSection.defaultProps=lR;var dR=Object(d.b)((e,t)=>{var a=Object(h.m)(e,"feature_m11n_channel_details"),n=Object(h.m)(e,"feature_longer_channel_names"),{channel:r}=t,s=r.id;return{userIsChannelMember:Object(B.Rb)(r),userCanPost:Object(sn.p)(e,s),userCanRenameChannel:Object(sn.O)(e,s).ok,userCanSetPurpose:Object(sn.v)(e,s).ok,currentMember:Object(Ca.b)(e),featureM11nChannelDetails:a,featureLongerChannelNames:n}},e=>({openModal:function(){return e(Object(Ua.e)(...arguments))},expandInfoSection:()=>e(Object(Ie.e)({sectionId:oR})),jumpToMessage:function(){return e(Object(Lm.a)(...arguments))},openChannelOptions:function(){return e(Object(ls.a)(...arguments))}}),null,{withRef:!0})(channel_details_section_ChannelDetailsSection),pR=a("hXpn"),uR=a("A+cF"),hR=(a("p6gI"),e=>{var{action:t,app:a,channelId:n,clogger:r,disabled:o,index:c,runChannelAction:d,isOffline:p}=e,u=Object(ps.a)(t,"app.icons.image_64",Object(Zo.b)(a,64)),h=Object(s.useCallback)(e=>{var{className:t}=e;return i.a.createElement(Jc.a,{ariaHidden:!0,classes:t,image:u})},[u]),m=Object(s.useCallback)(()=>{d({actionId:t.id,channelId:n}),((e,t)=>{var{index:a,appId:n,actionId:r}=t;e.track(ie.EventId.CHANNEL_ACTIONS_SECTION,{app_id:n,action_id:r,contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.ui_component]:ie.UiComponent.CHANNEL_ACTION,[ie.UiContextKeys.ui_properties]:{[ie.UiPropertiesKeys.element_type]:ie.ElementType.BUTTON,[ie.UiPropertiesKeys.element_name]:"action_item",[ie.UiPropertiesKeys.element_index]:a}}}})})(r,{index:c,actionId:t.id,appId:t.appId})},[t,n,r,c,d]);return Object(s.useEffect)(()=>{((e,t)=>{var{index:a,appId:n,actionId:r}=t;e.track(ie.EventId.CHANNEL_ACTIONS_SECTION,{app_id:n,action_id:r,contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.IMPRESSION,[ie.UiContextKeys.ui_component]:ie.UiComponent.CHANNEL_ACTION,[ie.UiContextKeys.ui_properties]:{[ie.UiPropertiesKeys.element_type]:ie.ElementType.BUTTON,[ie.UiPropertiesKeys.element_name]:"action_item",[ie.UiPropertiesKeys.element_index]:a}}}})})(r,{index:c,actionId:t.id,appId:t.appId})},[t.appId,t.id,r,c]),i.a.createElement(jt.c,{onClick:m,className:l()("p-channel_actions_section_item",{"p-channel_actions_section_item--disabled":o||p}),disabled:o||p},i.a.createElement(pR.a,{className:"p-channel_actions_section_item__list_entity",size:"small",primaryContent:i.a.createElement(uR.d,{avatar:h,text:i.a.createElement(uR.c,null,i.a.createElement("strong",null,t.name)),size:"small"}),secondaryContent:p?i.a.createElement(We.b,{className:"block",type:"cloud-offline-small"}):null}))});hR.defaultProps={app:null,index:0};var mR=Object(d.b)((e,t)=>{var{action:{appId:a},channelId:n}=t;return{app:Object($o.e)(e,a)||null,clogger:Object(ne.a)({state:e}),isOffline:!Object(Re.c)(e),disabled:!uo(e,n)}},e=>({runChannelAction:t=>e(Object(ec.a)(t))}))(hR),bR=(a("T4si"),new x.b("channel_actions_section")),_R={small:160,medium:200,large:240},gR=Object(s.forwardRef)((e,t)=>{var{addChannelActionWithWorkflowBuilder:a,channelActionCount:n,channelActions:r,channelId:o,clogger:c,collapse:l,expandChannelActionsSection:d,omitCountFromTitle:p,shouldShowCreateButton:u,userIsInChannel:h,isIAPhase1Enabled:m}=e,b=Object(Xo.a)(()=>new Array(n).fill(null).map((e,t)=>i.a.createElement("li",{key:t,"data-qa":"channel_action_placeholder_item",className:"p-channel_actions_section__list_item p-channel_actions_section__list_item--placeholder"},i.a.createElement(Jo.b,{size:"random",sizes:_R}))),[n]),_=Object(s.useMemo)(()=>r&&0!==r.length?r.map((e,t)=>i.a.createElement("li",{key:e.id,className:"p-channel_actions_section__list_item"},i.a.createElement(mR,{action:e,channelId:o,index:t}))):b,[b,r,o]),g=Object(s.useCallback)(()=>{((e,t)=>e.track(ie.EventId.CHANNEL_ACTIONS_SECTION,{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.ui_component]:ie.UiComponent.CHANNEL_ACTION,[ie.UiContextKeys.ui_properties]:{[ie.UiPropertiesKeys.element_type]:ie.ElementType.LINK,[ie.UiPropertiesKeys.element_name]:"create_action"}}},is_iap1:t}))(c,m),a(o)},[a,o,c,m]),f=bR.t("Channel Actions",{fallbackHash:"b225cbd5ab14bf4bbd8e4b05e1beb652d1f7c33b",fallbackHashNs:"classic_nav"});return n>0&&!p&&(f=bR.rt("{channelActionCount, plural, =1 {# Channel Action} other {# Channel Actions}}",{channelActionCount:n,fallbackHash:"b225cbd5ab14bf4bbd8e4b05e1beb652d1f7c33b",fallbackHashNs:"classic_nav"})),i.a.createElement(yx,{ref:t,sectionId:"actions",expand:d,collapse:l,header:i.a.createElement(Cx,{iconType:"bolt",sectionTitle:f,count:n}),sectionClasses:"p-channel_actions_section",key:"actions"},_.length>0&&i.a.createElement("ul",{className:"p-channel_actions_section__list"},_),h&&u&&i.a.createElement(jt.d,{className:"p-channel_actions_section__add_action",type:"outline",onClick:g,"data-qa":"channel_action_section__create_action_cta"},bR.t("Add Channel Action",{fallbackHash:"8e8e6c20342428a0e94984f56ca352e01d632ff4",fallbackHashNs:"channel_action_menu"})),!h&&i.a.createElement("p",{className:"p-channel_actions_section__non_member"},bR.t("These actions are available to members of this channel.",{fallbackHash:"b225cbd5ab14bf4bbd8e4b05e1beb652d1f7c33b",fallbackHashNs:"classic_nav"})))});gR.defaultProps={channelActions:[],isIAPhase1Enabled:!1};var fR=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a);return{channelActionCount:Object(co.c)(e,a),channelActions:Object(co.a)(e,a),channelId:a,clogger:Object(ne.a)({state:e}),omitCountFromTitle:Object(Rr.d)(e),shouldShowCreateButton:Object(Qn.a)(e),userIsInChannel:Object(B.nb)(n),isIAPhase1Enabled:Object(Rr.d)(e)}},e=>({addChannelActionWithWorkflowBuilder:t=>e(Qo(t)),expandChannelActionsSection:()=>e(Object(Ie.e)({sectionId:"actions"}))}),null,{withRef:!0})(gR),vR=a("OISv"),OR={msg:void 0,previewFile:r.a};class highlights_item_HighlightsItem extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["onFileClick"])}onFileClick(e,t){t&&this.props.previewFile({fileId:t.id,flexOrigin:"details",flexOriginId:"highlights"})}render(){var{msg:e}=this.props;return e&&e.ts?i.a.createElement(vR.a,{msg:e,timestampClickable:!0,onFileClick:this.onFileClick,flexOrigin:"details",flexOriginId:"highlights"}):null}}highlights_item_HighlightsItem.defaultProps=OR;var yR=Object(d.b)((e,t)=>{var a=t.highlightMsg.ts;return{msg:Object(Kg.a)(e,t.channelId,a)}},e=>({previewFile:function(){return e(Object(Ie.c)(...arguments))}}))(highlights_item_HighlightsItem);var CR=new x.b("channel_details");var jR=Object(d.b)(e=>({featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details"),featureLongerChannelNames:Object(h.m)(e,"feature_longer_channel_names")}),e=>({fetchHighlightsListForChannel:function(){return e(Zx(...arguments))}}))(class highlights_list_HighlightsList extends s.Component{constructor(e){super(e),this.state={isLoading:!1,highlightsMsgs:[]}}componentDidMount(){this.fetchHighlights()}componentDidUpdate(e){this.props.channelId!==e.channelId&&(this.resetState(),this.fetchHighlights())}componentWillUnmount(){this.pendingHighlightsFetch&&this.pendingHighlightsFetch.cancel()}getTitleText(e){if(!this.props.featureM11nChannelDetails)return null;switch(e){case"this-week-header":return CR.rt("This week",{fallbackHash:"7b72883e078a6858cf0c79bf3e93e72e765e9ada",fallbackHashNs:"channel_pages"});case"this-month-header":return CR.rt("This month",{fallbackHash:"1b4785331db3b08cd8e3cfa4bd36216731a79e54",fallbackHashNs:"channel_pages"});case"within-three-months-header":return CR.rt("More than a month ago",{fallbackHash:"89d5943beaee33befc436bdb3150890cc429cdf2",fallbackHashNs:"channel_pages"});case"within-six-months-header":return CR.rt("More than 3 months ago",{fallbackHash:"d78be90f6b3e1fa97548920440fd9a31bd4395cc",fallbackHashNs:"channel_pages"});case"older-header":return CR.rt("More than 6 months ago",{fallbackHash:"6707456354b81ac81d62b826dc37ccb8e017739b",fallbackHashNs:"channel_pages"});default:return null}}resetState(){this.setState(()=>({highlightsMsgs:[]}))}fetchHighlights(){var{channel:e,channelId:t}=this.props;Object(B.hb)(e)||Object(B.pb)(e)||!t||(this.setState(()=>({isLoading:!0})),this.pendingHighlightsFetch=this.props.fetchHighlightsListForChannel(t).then(e=>{e?this.setState(()=>({highlightsMsgs:e,isLoading:!1})):this.setState(()=>({highlightsMsgs:[],isLoading:!1}))}).catch(()=>{this.setState(()=>({highlightsMsgs:[],isLoading:!1}))}).finally(()=>{this.pendingHighlightsFetch=null}))}renderTitle(e){return e?i.a.createElement("div",{key:e,className:"p-highlights_section__group_title"},i.a.createElement("div",{className:"p-highlights_section__group_title_line"}),i.a.createElement("div",{className:"p-highlights_section__group_title_label bold"},this.getTitleText(e))):null}renderEmptyState(){return i.a.createElement("p",{className:"p-channel_details__subtitle"}," ",CR.rt("<strong>Nothing yet.</strong> When this channel gets a bit more active, check back here.",{fallbackHash:"0312eef94042834b79371db2371832bb4f8b361f",fallbackHashNs:"channel_pages"})," ")}render(){var{channelId:e,featureM11nChannelDetails:t,featureLongerChannelNames:a}=this.props,{isLoading:n,highlightsMsgs:r}=this.state;if(!t)return null;if(n)return i.a.createElement(Oc.a,{size:"jumbo"});if(0===r.length)return this.renderEmptyState();var s=function(e){if(!e)return null;var t=[],a=!1,n=!1,r=!1,s=!1,i=!1,o=new Date/1e3,c=Object(Xj.a)(e,"ts");return Object(QS.a)(c),Object(Cf.a)(c,e=>{e.ts>=o-604800?(a||(t.push({type:"header",content:"this-week-header"}),a=!0),t.push({type:"message",content:e})):e.ts>=o-2678400?(n||(t.push({type:"header",content:"this-month-header"}),n=!0),t.push({type:"message",content:e})):e.ts>=o-8035200?(r||(t.push({type:"header",content:"within-three-months-header"}),r=!0),t.push({type:"message",content:e})):e.ts>=o-16070400?(s||(t.push({type:"header",content:"within-six-months-header"}),s=!0),t.push({type:"message",content:e})):(i||(t.push({type:"header",content:"older-header"}),i=!0),t.push({type:"message",content:e}))}),t}(r),o=a?i.a.createElement(qf.a,{channelId:e}):i.a.createElement(Ye.a,{channelId:e,inline:!0}),c=CR.rt("Below {count, plural, =1 {is the top message} other {are a few of the top messages}} in <strong>{channel_name}</strong>.",{count:r.length,channel_name:o,fallbackHash:"1992d0038710cbd48278cc708a9ea5db8b4be72a",fallbackHashNs:"channel_pages"});return i.a.createElement("div",null,i.a.createElement("p",{className:"p-channel_details__subtitle"},c),i.a.createElement("ul",{className:"p-highlights_section no_bullets"},s.map(e=>"header"===e.type?this.renderTitle(e.content):i.a.createElement("li",{key:e.content.ts||e.content.id,className:"p-highlights_section__item"},i.a.createElement(yR,{highlightMsg:e.content,channelId:this.props.channelId})))))}}),ER=(a("6S4m"),"highlights"),kR=new x.b("channel_details"),SR={collapse:r.a,featureM11nChannelDetails:!1};class highlights_section_HighlightsSection extends s.Component{constructor(e){super(e),this.focus=this.focus.bind(this),this.sectionContainerRef=i.a.createRef()}focus(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}renderHighlights(){return i.a.createElement(jR,{channel:this.props.channel,channelId:this.props.channelId})}render(){var{featureM11nChannelDetails:e,channel:t,collapse:a,expandHighlightsSection:n}=this.props;if(!e)return null;if(Object(B.hb)(t)||Object(B.pb)(t))return null;var r=i.a.createElement(Cx,{iconType:"sparkles",sectionTitle:kR.t("Highlights")});return i.a.createElement(yx,{ref:this.sectionContainerRef,sectionId:ER,expand:n,collapse:a,header:r,sectionClasses:"p-channel_details__highlights_section",key:"".concat(Mx.d,"_DETAILS_SECTION")},this.renderHighlights())}}highlights_section_HighlightsSection.defaultProps=SR;var IR=Object(d.b)((e,t)=>{var a=Object(h.m)(e,"feature_m11n_channel_details");return{channelId:t.channel.id,featureM11nChannelDetails:a}},e=>({expandHighlightsSection:()=>e(Object(Ie.e)({sectionId:ER}))}),null,{withRef:!0})(highlights_section_HighlightsSection),wR=a("Z7NI"),TR=Object(wR.a)(PT.a,{useShortMode:!0}),NR={className:"p-channel_details__member_list_entity"};var PR=function(e){var{memberId:t}=e;return i.a.createElement(xS.a,{userId:t,position:"left-bottom",includeRemoveFromChannelAction:!0},i.a.createElement(TR,{id:t,className:"p-channel_details__member_list__member_btn","data-qa":"member_row_btn",listEntityProps:NR}))};class member_list_MemberList extends s.Component{componentDidMount(){this.props.fetchMembersAboveTheFold()}componentDidUpdate(e){this.props.channelId!==e.channelId&&this.props.fetchMembersAboveTheFold()}render(){var{memberList:e}=this.props;if(!e)return null;var t=e.slice(0,Of.G).map(e=>i.a.createElement("li",{key:e,className:"p-channel_details__member_list__member"},i.a.createElement(PR,{memberId:e})));return i.a.createElement("ul",{className:"p-channel_details__member_list"},t)}}member_list_MemberList.defaultProps={memberList:[]};var AR=Object(d.b)((e,t)=>{var{channelId:a}=t;return{memberList:Object(SS.c)(e,a)}},(e,t)=>{var{channelId:a}=t;return{fetchMembersAboveTheFold:()=>e(Object(SS.b)({channelId:a,count:Of.G}))}})(member_list_MemberList),MR=(a("SaAd"),new x.b("channel_details")),xR="members",RR={memberCount:void 0,restrictedMemberCount:void 0,openDmBrowserModal:r.a,startChannelInviteModal:r.a,openModal:r.a,showInviteButton:!1,showSeeAllMembersButton:!1,isIAPhase1Enabled:!1};class member_list_section_MemberListSection extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["handleSeeAllClick","handleInviteClick","focus"]),this.sectionContainerRef=i.a.createRef()}focus(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}handleSeeAllClick(){var{memberCount:e}=this.props;this.props.openModal({element:i.a.createElement(LS,{channelId:this.props.channelId,memberCount:e})})}handleInviteClick(){if(Object(B.pb)(this.props.channel)){var e=Object(B.H)(this.props.channel);this.props.openDmBrowserModal({memberIds:e,source:os.b.MPIM})}else this.props.startChannelInviteModal({channelId:this.props.channelId,entryPoint:"channel_details_add_people"})}renderSeeAllMembersButton(){var{memberCount:e}=this.props,{showSeeAllMembersButton:t}=this.props;if(!t)return null;if(!e||e<Of.G)return null;var a=MR.t("See All {total_member_count, number} Members",{total_member_count:e,fallbackHash:"20a6f972248d119a0e90fbfc724fd70f2d54cdd2",fallbackHashNs:"channel_pages"});return i.a.createElement(jt.d,{className:"margin_top_50",onClick:this.handleSeeAllClick,type:"outline"},a)}renderHeader(){if(!this.props.featureM11nChannelDetails)return null;var e,{memberCount:t,restrictedMemberCount:a,isIAPhase1Enabled:n}=this.props;e=Object(ci.a)(t)?MR.rt("{memberCount, plural, =1 {# Member} other {# Members}}",{memberCount:t}):MR.rt("\u2013 Members",{memberCount:t}),n&&(e="Members");var r=Object(ci.a)(a)&&a>0,o=Object(ci.a)(a)&&a>0?MR.rt("{restrictedMemberCount, plural, =1 {# Guest} other {# Guests}}",{restrictedMemberCount:a}):null,c=i.a.createElement(qe.c,{tip:o,position:"top"},i.a.createElement("div",{className:"p-channel_details__member_list__guests"},i.a.createElement(We.b,{type:"lock-o",inline:!0,className:"p-channel_details__member_list__guests_icon"}),a)),l=i.a.createElement(s.Fragment,null,e,r&&c);return i.a.createElement(Cx,{iconType:"user",sectionTitle:l,count:t})}render(){var{featureM11nChannelDetails:e,channel:t,channelId:a,memberCount:n,collapse:r,expandMembersSection:s,showInviteButton:o,showSeeAllMembersButton:c}=this.props;if(Object(B.hb)(t)||!e)return null;var d=MR.t("Add People",{fallbackHash:"8d158f5400b7631734fdbff564885963c8b7b76d"}),p=l()("p-channel_details__members_list_buttons",{"p-channel_details__members_list_button":!c});return i.a.createElement(yx,{ref:this.sectionContainerRef,sectionId:xR,expand:s,collapse:r,header:this.renderHeader(),sectionClasses:"p-channel_details__members_list_section",key:xR},n>0&&i.a.createElement(AR,{memberCount:n,channelId:a}),i.a.createElement("div",{className:p},this.renderSeeAllMembersButton(),o&&i.a.createElement(jt.d,{onClick:this.handleInviteClick,type:"outline","data-qa":"members-list-invite-button"},d)))}}member_list_section_MemberListSection.defaultProps=RR;var DR=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object($i.f)(e,a),r=Object(L.e)(e,a),s=n&&n.counts?n.counts.member_count:void 0,i=n&&n.counts?n.counts.restricted_member_count:void 0;return{featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details"),memberCount:s,restrictedMemberCount:i,channel:r,showInviteButton:Object(sn.K)(e,a)||Object(B.pb)(r),showSeeAllMembersButton:s&&s>=Of.G,isIAPhase1Enabled:Object(Rr.d)(e),clogger:Object(ne.a)({state:e})}},e=>({openDmBrowserModal:function(){return e(Object(dt.a)(...arguments))},startChannelInviteModal:function(){return e(Object(cs.b)(...arguments))},openModal:function(){return e(Object(Ua.e)(...arguments))},expandMembersSection:()=>e(Object(Ie.e)({sectionId:xR}))}),null,{withRef:!0})(member_list_section_MemberListSection),FR=a("4ZGf"),LR=0,UR="APP_CHANNEL_DETAIL_LIST",BR={appId:void 0,botId:void 0},HR={className:"p-channel_details_apps__member_list_entity",forceRealName:!0};class apps_section_item_AppsSectionItem extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["handleNameClick"])}trackClick(e){var{appId:t,botId:a,channelId:n,clogger:r}=this.props,s={[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.ui_element]:e};return r.track(UR,{contexts:{[ie.ClientEventKeys.ui_context]:s,[ie.ClientEventKeys.core]:{[ie.CoreKeys.app_id]:t,[ie.CoreKeys.bot_id]:a,[ie.CoreKeys.channel_id]:n}}}),s}handleNameClick(){this.trackClick(ie.UiElement.BTN_APP_NAME)}render(){var{featureM11nChannelDetails:e,userId:t}=this.props;return e?i.a.createElement(eR.a,{position:"left-bottom",offsetX:LR,onClick:this.handleNameClick,userId:t},i.a.createElement(TR,{"data-qa":"channel_apps_section_row",className:"p-channel_details_apps__row",id:t,listEntityProps:HR})):null}}apps_section_item_AppsSectionItem.defaultProps=BR;var WR=Object(d.b)((e,t)=>{var{userId:a}=t,n=Object(Ca.d)(e,a);return{appId:Object(Fe.p)(n),botId:Object(Fe.q)(n),clogger:Object(ne.a)({state:e}),featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details")}})(apps_section_item_AppsSectionItem);function qR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function GR(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qR(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qR(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var KR=new x.b("channel_details"),VR={userIds:[],openAppsBrowserModal:r.a,canAddAppsToChannel:!1};class apps_section_list_AppsSectionList extends s.PureComponent{constructor(e){super(e),this.handleAddAppsClick=this.handleAddAppsClick.bind(this)}componentDidMount(){this.fireImpressionClog()}componentDidUpdate(e){var{channelId:t}=this.props;e.channelId!==t&&this.fireImpressionClog()}fireImpressionClog(){var{channelId:e,clogger:t}=this.props;t.track(ie.EventId.APP_CHANNEL_DETAIL_LIST,{contexts:{[ie.ClientEventKeys.ui_context]:{[ie.UiContextKeys.action]:ie.UiAction.EXPAND},[ie.ClientEventKeys.core]:{[ie.CoreKeys.channel_id]:e}}})}handleAddAppsClick(){var{clogger:e,channelId:t}=this.props,a={[ie.UiContextKeys.action]:ie.UiAction.CLICK,[ie.UiContextKeys.ui_element]:ie.UiElement.BTN_ADD_APPS};e.track(ie.EventId.APP_CHANNEL_DETAIL_LIST,{contexts:{[ie.ClientEventKeys.ui_context]:a,[ie.ClientEventKeys.core]:{[ie.CoreKeys.channel_id]:t}}}),e.track(ie.EventId.APP_CLICK_BTN_ADD_APPS_IN_CHANNEL_DETAILS,{contexts:{[ie.ClientEventKeys.ui_context]:GR({},a,{[ie.UiContextKeys.step]:ie.UiStep.CHANNEL_DETAILS})}}),this.props.featureM11nAppsBrowser&&this.props.openAppsBrowserModal({addAppsVariant:!0,referringEventId:ie.EventId.APP_CHANNEL_DETAIL_LIST,referringUiContext:a,channelId:t})}render(){var{channelId:e,featureM11nChannelDetails:t,isLoading:a,userIds:n,canAddAppsToChannel:r}=this.props;if(!t)return null;if(a)return i.a.createElement(Oc.a,{size:"jumbo"});var s=l()("p-channel_details_apps",{"p-channel_details_apps__button_only":n.length<1});return i.a.createElement("div",null,i.a.createElement("ul",{className:s},n.map(t=>i.a.createElement("li",{className:"no_margin",key:t},i.a.createElement(WR,{channelId:e,userId:t})))),r&&i.a.createElement(jt.d,{className:"p-channel_details_apps__row--add",onClick:this.handleAddAppsClick,type:"outline","data-qa":"channel_apps_section_add"},KR.t("Add App",{fallbackHash:"1ae2c6ac44fb57fa370643de37789a2d84fa5202",fallbackHashNs:"channel_details"})))}}apps_section_list_AppsSectionList.defaultProps=VR;var zR=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(FR.b)(e,a);return{clogger:Object(ne.a)({state:e}),featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details"),isLoading:Object(Mc.d)(n),userIds:n.userIds,featureM11nAppsBrowser:Object(h.m)(e,"feature_m11n_apps_browser"),canAddAppsToChannel:Object(sn.x)(e,a)}},e=>({openAppsBrowserModal:function(){return e(Object(ds.a)(...arguments))}}))(apps_section_list_AppsSectionList),YR=(a("Q2Pv"),"apps"),QR=new x.b("channel_details"),XR={appCount:void 0,isImWithApp:!1,isIAPhase1Enabled:!1};class apps_section_AppsSection extends s.PureComponent{constructor(e){super(e),this.focus=this.focus.bind(this),this.sectionContainerRef=i.a.createRef()}focus(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}render(){var{featureM11nChannelDetails:e,channelId:t,isImWithApp:a,appCount:n,collapse:r,expandAppsSection:s,isIAPhase1Enabled:o}=this.props;if(!e)return null;if(a)return null;var c=n?QR.t("{appCount, plural, =1 {# App} other {# Apps}}",{appCount:n}):QR.t("Apps");o&&(c=QR.t("Apps"));var l=i.a.createElement(Cx,{iconType:"gn-menu",sectionTitle:c,count:n});return i.a.createElement(yx,{ref:this.sectionContainerRef,sectionId:YR,expand:s,collapse:r,header:l,sectionClasses:"p-channel_details__apps_section",key:YR},i.a.createElement(zR,{channelId:t}))}}apps_section_AppsSection.defaultProps=XR;var JR=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object($i.f)(e,a);return{appCount:Object(ps.a)(n,"counts.app_count"),featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details"),isImWithApp:Object(B.lb)(e,a),isIAPhase1Enabled:Object(Rr.d)(e)}},e=>({expandAppsSection:()=>e(Object(Ie.e)({sectionId:YR}))}),null,{withRef:!0})(apps_section_AppsSection),ZR=new x.b("channel_details");class shared_files_list_SharedFilesList extends s.PureComponent{constructor(e){super(e),this.showMoreFiles=this.showMoreFiles.bind(this),this.state={isLoading:!0,fileIds:[],hasMore:!1}}componentDidMount(){this.fetchFiles()}componentDidUpdate(e){e.channelId!==this.props.channelId&&this.fetchFiles()}fetchFiles(){var e=this,{channelId:t,logger:a}=this.props;this.setState(()=>({isLoading:!0})),this.props.listAndUpsertFiles({channelId:t,count:10,reason:"shared-files-section/fetchFiles"}).then(function(){var{files:t,paging:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object(QS.a)(Object(Xj.a)(t,e=>Object(JS.o)(e)));e.setState(()=>({isLoading:!1,fileIds:Object(ed.a)(n,"id"),hasMore:a&&a.pages>1}))}).catch(e=>{this.setState(()=>({isLoading:!1,fileIds:[]})),a.logError("SHARED-FILES",e,{subtype:"shared_files_loading_failed"})})}showMoreFiles(){this.props.openFromFilesMenu()}renderEmptyState(){var{featureM11nChannelDetails:e}=this.props;return e?i.a.createElement("div",{className:"p-channel_details__shared_files__empty"},ZR.rt("There are no files to see here right now! But there could be \u2014 drag and drop any file into the message pane to add it to this conversation.",{fallbackHash:"32dfdcb3bc1f3bbe4a27120ff93d9d0a90312489",fallbackHashNs:"channel_pages"})):null}renderFiles(){var{fileIds:e,hasMore:t}=this.state,{featureM11nChannelDetails:a}=this.props;if(!a)return null;var n,r=Object(ed.a)(e,e=>i.a.createElement(tI,{key:e,fileId:e}));return t&&(n=i.a.createElement("div",{className:"p-channel_details__shared_files__more"},i.a.createElement(jt.d,{type:"outline",onClick:this.showMoreFiles},ZR.rt("See All Files",{fallbackHash:"af3d09ab48b386df129640b14786b79264a4fa87",fallbackHashNs:"menu"})))),i.a.createElement(i.a.Fragment,null,r,n)}render(){var{isLoading:e,fileIds:t}=this.state;return e?i.a.createElement(Oc.a,{size:"jumbo"}):t.length?this.renderFiles():this.renderEmptyState()}}shared_files_list_SharedFilesList.defaultProps={featureM11nChannelDetails:!1};var $R=Object(d.b)(function(e){var t=Object(h.m)(e,"feature_m11n_channel_details");return{logger:Object(Wa.a)({state:e}),featureM11nChannelDetails:t}},function(e){return{listAndUpsertFiles:function(){return e(Object(XS.h)(...arguments))},openFromFilesMenu:function(){return e(Object(Tl.g)(...arguments))}}})(shared_files_list_SharedFilesList),eD=(a("r/YP"),"shared_files"),tD=new x.b("channel_details"),aD={collapse:r.a,featureM11nChannelDetails:!1};class shared_files_section_SharedFilesSection extends s.Component{constructor(e){super(e),this.focus=this.focus.bind(this),this.sectionContainerRef=i.a.createRef()}focus(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}render(){var{featureM11nChannelDetails:e,channelId:t,collapse:a,expandSharedFilesSection:n}=this.props;if(!e||!t)return null;var r=i.a.createElement(Cx,{iconType:"all-files",sectionTitle:tD.t("Shared Files"),hideCount:!0});return i.a.createElement(yx,{ref:this.sectionContainerRef,sectionId:eD,expand:n,collapse:a,header:r,sectionClasses:"p-channel_details__shared_files_section",key:"".concat(Mx.d,"_DETAILS_SECTION")},i.a.createElement($R,{channelId:t}))}}shared_files_section_SharedFilesSection.defaultProps=aD;var nD=Object(d.b)(e=>{return{featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details")}},e=>({expandSharedFilesSection:()=>e(Object(Ie.e)({sectionId:eD}))}),null,{withRef:!0})(shared_files_section_SharedFilesSection),rD=(a("o2sZ"),new x.b("channel_details")),sD="notification_prefs",iD={desktopSetting:void 0,mobileSetting:void 0,notificationDisabledType:null,openChannelNotificationPrefsModal:r.a,openPrefsModal:r.a};class notification_prefs_section_NotificationPrefsSection extends s.Component{constructor(e){super(e),Object(X.a)(this,["handleEditPreferencesClick","focus"]),this.sectionContainerRef=i.a.createRef()}getDisabledNotificationsText(){var e=rD.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.",{fallbackHash:"1a4db9df0870ea9d3249727659a462c79ca89790",fallbackHashNs:"prefs"}),t=rD.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",{fallbackHash:"19c9da8051d592482b03309bbfcae4f052791067",fallbackHashNs:"prefs"},e=>{var{key:t,text:a}=e;return i.a.createElement(te.a,{onClick:this.props.openPrefsModal,key:t},a)}),a=rD.rt("Your browser does not support desktop notifications. <a>Try using our app instead.</a>",{fallbackHash:"38d4c3b2088ba1759fed9615fb958c7a90fbfb4b",fallbackHashNs:"prefs"},e=>{var{key:t,text:a}=e;return i.a.createElement(wh.a,{target:"_blank",key:t,href:"/downloads"},a)});switch(this.props.notificationDisabledType){case"not_allowed":return e;case"not_yet_allowed":return t;case"impossible":return a;default:return null}}focus(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}handleEditPreferencesClick(){var{channelId:e}=this.props;this.props.openChannelNotificationPrefsModal({channelId:e,entryPoint:"notification_prefs_section"})}renderHeader(){return this.props.featureM11nChannelDetails?i.a.createElement(Cx,{iconType:"bell-o",sectionTitle:rD.rt("Notification Preferences"),hideCount:!0}):null}renderStandardNotificationPrefText(e){var t=rD.t("All new messages",{fallbackHash:"9b6c1f2aedfe68e695cee3b82fa493c77114ede1",fallbackHashNs:"channel_pages"}),a=rD.t("Mentions & keywords",{fallbackHash:"92a10c6a3a84448a8c091d6947909b8a0335f595",fallbackHashNs:"channel_pages"}),n=rD.t("Nothing",{fallbackHash:"4481948392a8846400c954e77f58d76cdaa73963",fallbackHashNs:"channel_pages"});switch(e){case"everything":return t;case"mentions_dms":return a;case"nothing":return n;default:return null}}renderDesktopNotificationText(){var{notificationsAllowed:e,notificationDisabledType:t}=this.props;return!e&&t?i.a.createElement("div",{className:"p-channel_details__notification_prefs_section__notification_warning"},this.getDisabledNotificationsText()):this.renderStandardNotificationPrefText(this.props.desktopSetting)}renderCurrentNotificationPreferences(){var{isMuted:e}=this.props;return e?i.a.createElement("div",null,i.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref bold"},rD.t("This channel is muted",{fallbackHash:"cc1784b8b4d0f3f15c487e68c7ace48ce5d7dd7d",fallbackHashNs:"channel_pages"}))):i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref_label bold"},rD.t("Desktop Notifications",{fallbackHash:"53a3505aad0eab70ba3cff84cca6f5cdcf527c25",fallbackHashNs:"channel_pages"})),i.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref"},this.renderDesktopNotificationText())),i.a.createElement("div",null,i.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref_label bold"},rD.t("Mobile Notifications",{fallbackHash:"872d1b49f956b8bd1bdd73f7e9a1595f7de35ab2",fallbackHashNs:"channel_pages"})),i.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref"},this.renderStandardNotificationPrefText(this.props.mobileSetting))))}render(){var{featureM11nChannelDetails:e,channel:t,collapse:a,expandNotificationPrefsSection:n}=this.props;return Object(B.hb)(t)||!e?null:i.a.createElement(yx,{ref:this.sectionContainerRef,sectionId:sD,expand:n,collapse:a,header:this.renderHeader(),sectionClasses:"p-channel_details__notification_prefs_section",key:sD},this.renderCurrentNotificationPreferences(),i.a.createElement(jt.d,{className:"margin_top_50",onClick:this.handleEditPreferencesClick,type:"outline"},rD.t("Edit Preferences",{fallbackHash:"4cefcb344f3354ae347d4d8d62e31331cb72312f",fallbackHashNs:"channel_details"})))}}notification_prefs_section_NotificationPrefsSection.defaultProps=iD;var oD=Object(d.b)((e,t)=>{var a,n,{channelId:r}=t,s=Object(L.e)(e,r);Object(B.hb)(s)||(a=Object(Z.f)(e,r),n=Object(Z.g)(e,r));var i=Object(Z.m)().notificationDisabledType;return{featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details"),isMuted:Object(xr.c)(e,r),notificationsAllowed:Object(Z.e)(),notificationDisabledType:i,desktopSetting:a,mobileSetting:n,channel:s}},e=>({openChannelNotificationPrefsModal:function(){return e(Object(et.a)(...arguments))},openPrefsModal:()=>e(Object(Ze.a)()),expandNotificationPrefsSection:()=>e(Object(Ie.e)({sectionId:sD}))}),null,{withRef:!0})(notification_prefs_section_NotificationPrefsSection),cD=(a("dutO"),new x.b("channel_details")),lD={memberId:void 0,member:void 0,time24:!1,canInteract:!0};class dm_section_DmSection extends s.PureComponent{constructor(e){super(e),this.focus=this.focus.bind(this),this.memberRef=i.a.createRef(),this.state={tzUpdateCounter:0}}componentDidMount(){this.scheduleNextTzUpdate()}componentWillUnmount(){clearTimeout(this.tzUpdater)}focus(){var e=this.memberRef.current;e&&e.focus()}scheduleNextTzUpdate(){var e=60-(new Date).getSeconds();e<5&&(e=5),this.tzUpdater=setTimeout(()=>{this.setState(e=>({tzUpdateCounter:e.tzUpdateCounter+1})),this.scheduleNextTzUpdate()},1e3*e)}render(){var{memberId:e,member:t,time24:a,canInteract:n,featureM11nChannelDetails:r}=this.props;if(!e||!t)return null;if(!r)return null;var s,o=Object(Fe.Q)(t);if(o&&!Object(Fe.kb)(t)){var c=Object($n.a)(Date.now(),{timeZone:o,timeZoneOffset:Object(Fe.R)(t),do24hrTime:a});s=i.a.createElement("div",{className:"p-channel_details__dm_section__tz_section"},i.a.createElement("span",{className:"p-channel_details__dm_section__tz_label"},cD.t("Time zone"))," ",cD.t("{local_time} local time",{local_time:c}))}return i.a.createElement(i.a.Fragment,null,i.a.createElement(eR.a,{userId:e},i.a.createElement("div",{className:"p-channel_details__dm_section"},i.a.createElement(Ov.a,{ref:this.memberRef,id:e,size:"large",showStatus:n,showPresence:n}))),s)}}dm_section_DmSection.defaultProps=lD;var dD=Object(d.b)(function(e,t){var{channel:a}=t,n=Object(B.G)(a),r=Object(h.m)(e,"feature_stranger_danger")?Object(yN.a)(e,n):!Object(Fe.Jb)(Object(Ca.d)(e,n));return{memberId:n,member:Object(Ca.d)(e,n),time24:Object(Ke.k)(e,"time24"),canInteract:r,featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details")}},null,null,{withRef:!0})(dm_section_DmSection),pD=(a("qTUc"),new x.b("channel_details")),uD={info:"detailsSectionRef",highlights:"highlightSectionRef",pins:"pinnedSectionRef",members:"memberListSectionRef",apps:"appsSectionRef",shared_files:"sharedFilesSectionRef",notification_prefs:"notificationSectionRef"};class channel_details_ChannelDetails extends s.PureComponent{constructor(e){super(e),this.focus=this.focus.bind(this),this.findFirstSectionRefName=this.findFirstSectionRefName.bind(this),this.detailsSectionRef=i.a.createRef(),this.highlightSectionRef=i.a.createRef(),this.pinnedSectionRef=i.a.createRef(),this.memberListSectionRef=i.a.createRef(),this.appsSectionRef=i.a.createRef(),this.sharedFilesSectionRef=i.a.createRef(),this.notificationSectionRef=i.a.createRef()}findFirstSectionRefName(){return uD[this.props.expandedSectionId]||Object.keys(uD).reduce((e,t)=>{if(null!==e)return e;var a=uD[t];return this[a].current?a:null},null)}focus(){var e=this.findFirstSectionRefName(),t=this[e]&&this[e].current;if(t){var a=t.getWrappedInstance();a&&a.focus()}}renderTitle(){var{channel:e,featureM11nChannelDetails:t,featureLongerChannelNames:a,isImOrMpim:n}=this.props;return t?n?pD.t("About this conversation"):a?pD.t("About this channel"):pD.rt("About {channelName}",{channelName:i.a.createElement(Ye.a,{channel:e,inline:!0})}):null}renderBody(){var{channel:e,collapse:t,isImOrMpim:a,shouldDisplayChannelActionSection:n}=this.props;return i.a.createElement(fh.a,null,r=>{var{width:o,height:c}=r;return i.a.createElement(Ch.b,{width:o,height:c},i.a.createElement(s.Fragment,null,Object(B.hb)(e)&&i.a.createElement(dD,{ref:this.detailsSectionRef,channel:e}),!a&&i.a.createElement(dR,{ref:this.detailsSectionRef,channel:e,collapse:t}),n&&i.a.createElement(fR,{ref:this.channelActionsSectionRef,channelId:e.id,collapse:t}),!a&&i.a.createElement(IR,{ref:this.highlightSectionRef,channel:e,collapse:t}),i.a.createElement(Ax,{ref:this.pinnedSectionRef,channelId:e.id,collapse:t}),!Object(B.hb)(e)&&i.a.createElement(DR,{ref:this.memberListSectionRef,channelId:e.id,collapse:t}),i.a.createElement(JR,{ref:this.appsSectionRef,channelId:e.id,collapse:t}),i.a.createElement(nD,{ref:this.sharedFilesSectionRef,channelId:e.id,collapse:t}),i.a.createElement(oD,{ref:this.notificationSectionRef,channelId:e.id,collapse:t})))})}render(){var{channel:e,featureM11nChannelDetails:t}=this.props;if(!e||Object(B.Mb)(e)||!t)return null;var a=this.renderTitle();return i.a.createElement(FT.b,{className:"p-channel_details",focus:this.focus,title:a,renderBody:()=>this.renderBody(),viewId:Of.I.CHANNEL_DETAILS_FLEXPANE,kbNavOrder:Object(kt.a)()?void 0:4.5})}}channel_details_ChannelDetails.defaultProps={channel:null,shouldDisplayChannelActionSection:!1};var hD=Object(d.b)(e=>{var t=Object(_.a)(e),a=Object(L.e)(e,t),n=Object(y.e)(e)[0]||"";return{shouldDisplayChannelActionSection:po(e,a&&a.id),featureM11nChannelDetails:Object(h.m)(e,"feature_m11n_channel_details"),featureLongerChannelNames:Object(h.m)(e,"feature_longer_channel_names"),isImOrMpim:!(!Object(B.hb)(a)&&!Object(B.pb)(a)),expandedSectionId:n,channel:a}},e=>({collapse:()=>e(Object(Ie.e)())}))(channel_details_ChannelDetails),mD=a("533h"),bD=a("SAUz"),_D=(a("oP4J"),new x.b("calendar"));class calendar_flexpane_CalendarFlexpane extends i.a.Component{focus(){return null}blur(){return null}renderBody(){var{isLoading:e,featureCalendarSimpleAgendaView:t}=this.props;return t?e?i.a.createElement("div",{className:"p-calendar_flexpane__loading"},_D.t("Loading\u2026")):i.a.createElement("div",null," This is user calendar "):null}render(){var{featureCalendarSimpleAgendaView:e}=this.props;return e?i.a.createElement(ry.a,{component:this,order:4},i.a.createElement(Dj.a,{id:Of.I.ACTIVITY_FLEXPANE},i.a.createElement("div",{className:"p-calendar_flexpane"},i.a.createElement(mD.a,null,i.a.createElement(bD.a,{size:"medium"}),i.a.createElement("div",null,_D.t("Your calendar"))),this.renderBody()))):null}}calendar_flexpane_CalendarFlexpane.defaultProps={featureCalendarSimpleAgendaView:!0,isLoading:!0};var gD=Object(d.b)(e=>({featureCalendarSimpleAgendaView:Object(h.m)(e,"feature_calendar_simple_agenda_view")}),{})(calendar_flexpane_CalendarFlexpane),fD=a("yJbr");function vD(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function OD(e,t){var a=t||Object(fD.e)(e.id)||{};return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vD(Object(a),!0).forEach(function(t){Object(ke.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vD(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{fileName:a.name,imageSource:a.thumb_160||a.thumb_80,fileType:a.filetype,prettyType:a.pretty_type,fileSize:a.size})}var yD=a("XxnT"),CD=a("Lnf+"),jD=(a("nfA0"),new x.b("downloads")),ED={downloadPath:"",downloadState:"",startTime:0,progress:0,fileName:"",imageSource:"",fileType:"",prettyType:"",fileSize:0,highlight:!1,openDownload:r.a,showDownload:r.a,cancelDownload:r.a,retryDownload:r.a,removeDownload:r.a,pauseDownload:r.a,resumeDownload:r.a,hasKeyboardFocusWithin:!1,onFocus:r.a,onBlur:r.a};class download_item_DownloadItem extends i.a.Component{static getEstimatedTimeRemaining(e){var{downloadState:t,progress:a,startTime:n}=e;if(!["progressing","paused"].includes(t))return"";if(a>=1)return"";if(-1===a)return"";if(!a)return"";var r=Date.now()-n,s=r*(1/a)-r;return jD.t("{duration} remaining",{duration:yD.a.duration(s,"milliseconds").humanize()})}constructor(e){super(e),Object(X.a)(this,["onOpenClick","onShowClick","onCancel","onRetry","onRemove","onPause","onResume"])}onOpenClick(e){e.stopPropagation(),this.props.openDownload(this.props.id)}onShowClick(e){e.stopPropagation(),this.props.showDownload(this.props.id)}onCancel(e){e.stopPropagation(),this.props.cancelDownload(this.props.id)}onRetry(e){e.stopPropagation(),this.props.retryDownload(this.props.id)}onRemove(e){e.stopPropagation(),this.props.removeDownload(this.props.id)}onPause(e){e.stopPropagation(),this.props.pauseDownload(this.props.id)}onResume(e){e.stopPropagation(),this.props.resumeDownload(this.props.id)}renderDownloadIcon(){var{fileType:e,imageSource:t}=this.props,a=()=>i.a.createElement(We.b,{type:e,file:!0});return t?i.a.createElement(ht.a,{src:t,renderPending:a,width:"32",height:"32",className:"p-download_item__image",alt:""}):a()}renderExtraActions(){var e="paused"===this.props.downloadState?i.a.createElement(te.a,{className:"p-download_item__link--resume",onClick:this.onResume},jD.t("Resume")):i.a.createElement(te.a,{className:"p-download_item__link--pause",onClick:this.onPause},jD.t("Pause"));return i.a.createElement("span",{className:"p-download_item__extra_actions"},e,i.a.createElement(te.a,{className:"p-download_item__link--cancel",onClick:this.onCancel},jD.t("Cancel")))}render(){var e,{downloadPath:t,downloadState:a,fileName:n,imageSource:r,fileType:s,prettyType:o,fileSize:c,highlight:d,hasKeyboardFocusWithin:p}=this.props,u=Math.max(this.props.progress,0),h=n||t.split(/\/|\\/).reverse()[0],m="completed"===a?100:100*u,b=["progressing","paused"].includes(a)&&u?u*c:void 0;e=b?jD.t("{partialSize} of {size} {prettyType}",{partialSize:Object(CD.a)(b,{decimalPlaces:2}),size:Object(CD.a)(c),prettyType:o}):"".concat(Object(CD.a)(c)," ").concat(o);var _=download_item_DownloadItem.getEstimatedTimeRemaining(this.props),g=l()("p-download_item",a,{highlight:d,"p-download_item--focus-within":p}),f=l()({"p-download_item__action_icon":!0,"p-download_item__action_icon--image":!!r,fileType:s}),v=Object(ve.q)()?jD.t("Show in Finder"):jD.t("Open containing folder"),O={width:"".concat(m,"%")},y=jD.t("Remove {file}",{file:h,fallbackHash:"e963907dac5cd5c017869b4c96c18021c9bd058b",fallbackHashNs:"admin"});return i.a.createElement("div",{role:"presentation",className:g,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onClick:this.onOpenClick},i.a.createElement("div",{className:"p-download_item__icon_container"},this.renderDownloadIcon(),i.a.createElement(We.b,{className:f})),i.a.createElement("div",{className:"p-download_item__container"},i.a.createElement("div",{className:"p-download_item__name_row"},i.a.createElement("span",{className:"p-download_item__name overflow_ellipsis"},h),this.renderExtraActions()),i.a.createElement("div",{className:"p-download_item__size_row"},i.a.createElement("span",{className:"p-download_item__size overflow_ellipsis"},i.a.createElement("span",{className:"p-download_item__partial_size"},e)),i.a.createElement("span",{className:"p-download_item__actions"},i.a.createElement(te.a,{className:"p-download_item__link--show",onClick:this.onShowClick},v),i.a.createElement(te.a,{className:"p-download_item__link--retry",onClick:this.onRetry},jD.t("Retry"))),i.a.createElement("span",{className:"p-download_item__time_remaining"},_)),i.a.createElement("div",{className:"p-download_item__progress_row progress_bar"},i.a.createElement("div",{className:"p-download_item__progress progress_bar_progress",style:O}))),i.a.createElement(mN.a,{"aria-label":y,icon:"close-filled",className:"p-download_item__link--remove",onClick:this.onRemove}))}}download_item_DownloadItem.defaultProps=ED;var kD={openDownload:E.n,showDownload:E.t,cancelDownload:E.a,retryDownload:E.r,removeDownload:E.p,pauseDownload:E.o,resumeDownload:E.q},SD=Object(se.a)(Object(d.b)(null,kD)(download_item_DownloadItem)),ID=new x.b("page_client"),wD={items:void 0,onItemTabWithin:r.a,openDownload:r.a,retryDownload:r.a,focusKey:null,setFocusKey:r.a};class downloads_list_DownloadsList extends s.PureComponent{constructor(e){super(e),Object(X.a)(this,["renderItem","onFileClick","focus"]),this.list=i.a.createRef()}componentDidMount(){var{focusKey:e,items:t}=this.props;"downloads"===e&&t.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}componentDidUpdate(e){var{focusKey:t}=e,{focusKey:a,items:n}=this.props;"downloads"===a&&a!==t&&n.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}onFileClick(e){var{id:t}=e,a=this.getItemKeys(),n=Object(Gu.a)(a,t),r=this.props.items[n];if(r){var{downloadState:s}=r;"completed"!==s?"cancelled"!==s&&"interrupted"!==s||this.props.retryDownload(t):this.props.openDownload(t)}}getItemKeys(){return this.props.items.map(e=>e.id)}setFocusOnFirstItem(){var e=this.getItemKeys()[0],t=this.list.current;t&&t.focusOnKey(e)}clearFocusKey(){this.props.setFocusKey(null)}focus(){var e=this.list.current;e&&e.focus()}renderItem(e){var t=this.props.items[e];return i.a.createElement(SD,Object(n.a)({key:t.id},t))}render(){var e=this.getItemKeys();return i.a.createElement(fh.a,null,t=>{var{width:a,height:n}=t;return i.a.createElement(Eh.a,{ref:this.list,width:a,height:n,keys:e,rowRenderer:this.renderItem,animateOnScroll:!1,"aria-label":ID.t("Downloads"),onItemTabWithin:this.props.onItemTabWithin,onItemClick:this.onFileClick})})}}downloads_list_DownloadsList.defaultProps=wD;var TD=Object(d.b)(e=>({focusKey:Object(uw.a)(e)}),e=>({openDownload:()=>e(E.n),retryDownload:()=>e(E.r),setFocusKey:t=>e(Object(hw.a)(t))}))(e=>{var{forwardedRef:t}=e,a=Object(ya.a)(e,["forwardedRef"]);return i.a.createElement(downloads_list_DownloadsList,Object(n.a)({ref:t},a))}),ND=i.a.forwardRef((e,t)=>i.a.createElement(TD,Object(n.a)({forwardedRef:t},e))),PD=(a("erm0"),{clearDownloads:r.a,isShowing:!0}),AD=new x.b("page_client");class downloads_flexpane_DownloadsFlexpane extends i.a.Component{constructor(e){super(e),Object(X.a)(this,["focus","onItemTabWithin"]),this.list=i.a.createRef(),this.flexpane=i.a.createRef()}onItemTabWithin(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}UNSAFE_componentWillUpdate(e){var{fileIdsToFetch:t}=e;this.props.fileIdsToFetch!==t&&0!==t.length&&(Object(rf.a)(this.props.fileIdsToFetch,t)||this.props.fetchFileInfo({ids:t}))}focus(){var e=this.list.current;e&&e.focus()}render(){var e,{clearDownloads:t,downloads:a,isShowing:n}=this.props;return n?(Object(bs.a)(a)||(e={onOptionsClick:t,optionsIconType:"clear",optionsTooltipText:AD.t("Clear all")}),i.a.createElement(FT.b,{isEmpty:Object(bs.a)(a),ref:this.flexpane,focus:this.focus,className:"p-downloads_list",title:AD.t("Downloads"),renderBody:()=>i.a.createElement(ND,{ref:this.list,"aria-label":AD.t("Downloads"),items:a,onItemTabWithin:this.onItemTabWithin}),renderEmpty:()=>i.a.createElement(CP.a,{imageUrl:cdn_url+"/80588/img/downloads_empty.png",imageUrl2x:cdn_url+"/80588/img/downloads_empty@2x.png",title:AD.t("Downloaded files"),description:AD.rt("You can download files by selecting the {icon} icon.",{icon:i.a.createElement(We.b,{inline:!0,type:"cloud-download"})})}),headerProps:e,viewId:"downloads-list",kbNavOrder:Object(kt.a)()?void 0:6})):null}}downloads_flexpane_DownloadsFlexpane.defaultProps=PD;var MD=downloads_flexpane_DownloadsFlexpane,xD=e=>e.files,RD=(e,t)=>t.startTime-e.startTime,DD=Object(_p.createSelector)([E.i,xD],(e,t)=>(e||[]).map(e=>OD(e,t[e.id])).sort(RD)),FD=Object(_p.createSelector)([E.h,xD],(e,t)=>(e||[]).filter(e=>!t[e])),LD={fetchFileInfo:E.d,clearDownloads:E.b},UD=Object(d.b)(e=>{var t=Object(y.j)(e);return{downloads:DD(e),fileIdsToFetch:FD(e),isShowing:"downloads"===t}},LD)(MD),BD=a("wtMW"),HD=e=>{var{channel:t,callConfirmationStrings:a,dispatch:n}=e,r=Object(s.useCallback)(()=>{n(Object(Ua.a)())},[n]),o=Object(s.useCallback)(()=>{n(Object(Ua.a)()),n(Object(rs.d)())},[n]);return i.a.createElement(mc.a,{closeModal:r,isOpen:!0,centered:!0},i.a.createElement(mc.h,null,i.a.createElement(mc.j,{title:a.title})),i.a.createElement(mc.d,null,i.a.createElement(mc.e,null,i.a.createElement("p",null,Object(B.jb)(t)?a.descriptionMPIM:a.description))),i.a.createElement(mc.f,null,i.a.createElement(mc.g,null,i.a.createElement(mc.c,{type:"outline",onClick:r},a.cancel),i.a.createElement(jt.d,{type:"primary",onClick:o},a.confirm))))};HD.defaultProps={channel:void 0,callConfirmationStrings:{}};var WD=Object(d.b)((e,t)=>{var{channelId:a}=t,n=Object(L.e)(e,a),r=Object($i.f)(e,n.id),s=Object(ps.a)(r,"counts.member_count")||0;return{channel:n,callConfirmationStrings:Object(Vs.b)(s)}})(HD),qD=(a("9jbU"),{info:"detailsSectionRef",highlights:"highlightSectionRef",pins:"pinnedSectionRef",members:"memberListSectionRef",apps:"appsSectionRef",shared_files:"sharedFilesSectionRef",notification_prefs:"notificationSectionRef"}),GD={channel:null,muted:!1,clogger:{},isIAPhase1Enabled:!1,shouldUseChannelSections:!1,isInAnyChannelSection:!1,notificationSetting:"",channelSections:[],topic:"",channelDisplayName:"",memberId:void 0};class channel_details_IAPrototypeChannelDetails extends s.PureComponent{constructor(e){super(e),this.focus=this.focus.bind(this),this.findFirstSectionRefName=this.findFirstSectionRefName.bind(this),this.editChannelPurpose=this.editChannelPurpose.bind(this),this.editChannelTopic=this.editChannelTopic.bind(this),this.openInviteModal=this.openInviteModal.bind(this),this.openNotificationPrefs=this.openNotificationPrefs.bind(this),this.toggleMuteChannel=this.toggleMuteChannel.bind(this),this.toggleStarChannel=this.toggleStarChannel.bind(this),this.pinnedSectionRef=i.a.createRef(),this.memberListSectionRef=i.a.createRef(),this.appsSectionRef=i.a.createRef(),this.sharedFilesSectionRef=i.a.createRef(),this.notificationSectionRef=i.a.createRef()}findFirstSectionRefName(){return qD[this.props.expandedSectionId]||Object.keys(qD).reduce((e,t)=>{if(null!==e)return e;var a=qD[t];return this[a].current?a:null},null)}focus(){var e=this.findFirstSectionRefName(),t=this[e]&&this[e].current;if(t){var a=t.getWrappedInstance();a&&a.focus()}}editChannelPurpose(){this.props.userCanSetPurpose&&this.props.openModal({element:i.a.createElement(zf,{channelId:this.props.channel.id})})}editChannelTopic(){this.props.userCanSetTopic&&this.props.openModal({element:i.a.createElement(Co,{channelId:this.props.channel.id})})}openInviteModal(){var{channel:e}=this.props;if(Object(B.pb)(e)){var t=Object(B.H)(e);this.props.openDmBrowserModal({memberIds:t,source:os.b.MPIM})}else this.props.startChannelInviteModal({channelId:e.id,entryPoint:"channel_details"})}openNotificationPrefs(){var{channel:e}=this.props;this.props.openChannelNotificationPrefsModal({channelId:e.id,entryPoint:"notification_prefs_section"})}toggleMuteChannel(){var{channel:e,muted:t}=this.props;t?this.props.unmuteChannelById(e.id):this.props.muteChannelById(e.id)}toggleStarChannel(){var{channel:e,isInAnyChannelSection:t}=this.props,a=this.props.shouldUseChannelSections?t:Object(B.Ib)(e);this.props.updateStar(!a,{channel:e.id})}renderHeader(){var{channel:e,isApp:t,memberId:a}=this.props,n=Object(B.q)(e),r=Object(B.p)(e),s=r&&Object(Bf.l)(r,{returnMoment:!0}),o=i.a.createElement(Ye.a,{channel:e});return Object(B.pb)(e)&&(o=this.renderMpimFaces()),i.a.createElement("div",{className:"p-channel_details__header"},i.a.createElement("h2",{className:"p-channel_details__header__title"},o),!t&&!Object(B.hb)(e)&&i.a.createElement("div",{className:"p-channel_details__header__created"},"Created by"," ",i.a.createElement("span",{className:"p-ia__channel_details__created_member_name"},i.a.createElement(Wf.a,{id:n}))," ","on ",s.format("MMMM Do, YYYY")),Object(B.hb)(e)&&i.a.createElement(Ct.b,{tooltip:!1,memberId:a}))}renderMpimFaces(){var{channel:e}=this.props;return Object(B.H)(e).map(e=>i.a.createElement(wa.c,{userId:e,size:wa.a.large,isInteractive:!0,showCard:!0}))}renderActionButton(e){var{icon:t,label:a,onClick:n,classes:r=""}=e;return i.a.createElement(He.a,{onClick:n,className:l()("p-ia__channel_details__action",r)},i.a.createElement(We.b,{type:t,size:20,className:"p-ia__channel_details__action_icon"}),i.a.createElement("div",{className:"p-ia__channel_details__action_label"},a))}renderActions(){var{channel:e,isApp:t}=this.props;return i.a.createElement("div",{className:"p-ia__channel_details__actions"},this.renderActionButton({label:"Find",icon:"filter",onClick:this.props.openFromCmdF}),!t&&!Object(B.hb)(e)&&this.renderActionButton({label:"Invite",icon:"add-user",onClick:this.openInviteModal}),!t&&this.renderActionButton({label:"Call",icon:"phone",onClick:()=>{this.props.clogger.track("CALLS_USER_JOIN_INTENT",{is_iap1:this.props.isIAPhase1Enabled}),Object(B.hb)(e)?this.props.startCall():this.props.openModal({element:i.a.createElement(WD,{channelId:e.id})})}}),i.a.createElement(Iw.a,{position:"bottom-right",offsetX:-8,offsetY:8,onClick:()=>{this.props.clogger.track("DETAILS_MORE_CLICK",{is_iap1:this.props.isIAPhase1Enabled})},renderMenu:a=>t?i.a.createElement(Wc,Object(n.a)({},a,{channelId:e.id})):i.a.createElement($s,Object(n.a)({},a,{channelId:e.id,isIAPhase1Enabled:!0}))},i.a.createElement(He.a,{className:"p-ia__channel_details__action"},i.a.createElement(We.b,{type:"ellipsis",size:20,className:"p-ia__channel_details__action_icon"}),i.a.createElement("div",{className:"p-ia__channel_details__action_label"},"More"))))}renderDetails(){var{channel:e,userCanSetPurpose:t,userCanSetTopic:a,topic:n}=this.props,r=Object(B.Q)(e);return Object(B.jb)(e)?null:i.a.createElement("div",{className:"p-ia__channel_details__details"},i.a.createElement("div",{className:"p-ia__channel_details__about_title"},"About"),i.a.createElement("div",{className:"p-ia__channel_details__about"},i.a.createElement("div",{className:"p-ia__channel_details__blurb p-ia__channel_details__blurb--topic"},n?i.a.createElement(Kr.a,{text:n}):a&&i.a.createElement("span",{className:"sk_foreground_high_solid"},"Set a topic"),a&&i.a.createElement(He.a,{className:"p-ia__channel_details__blurb_edit",onClick:this.editChannelTopic},"Edit topic")),i.a.createElement("div",{className:"p-ia__channel_details__blurb p-ia__channel_details__blurb--purpose"},r?i.a.createElement(Kr.a,{text:r}):t&&i.a.createElement("span",{className:"sk_foreground_high_solid"},"What\u2019s this channel about?"),t&&i.a.createElement(He.a,{className:"p-ia__channel_details__blurb_edit",onClick:this.editChannelPurpose},"Edit description"))))}renderPreferences(){var e,{channel:t,muted:a,isApp:n,notificationSetting:r,channelSections:s,canMute:o}=this.props,c=!this.props.shouldUseChannelSections,l=Object(B.Ib)(t),d=!Object(B.hb)(t)&&!n,p=s&&s[0]&&s[0].name,u=s&&s[0]&&s[0].emoji;switch(!p&&l&&(p=Object(B.Ib)(t)?"Starred":"",u="star"),r){case"everything":e="Everything";break;case"mentions_dms":e="Mentions";break;case"nothing":e="Nothing"}return i.a.createElement("div",{className:"p-ia__channel_details__prefs"},i.a.createElement("div",{className:"p-ia__channel_details__prefs_title"},"Preferences"),d&&i.a.createElement(He.a,{onClick:this.openNotificationPrefs,className:"p-ia__channel_details__prefs_control p-ia__channel_details__prefs_control__notifications"},"Notifications"," ",i.a.createElement("span",{className:"p-ia__channel_details__prefs_control__content"},e)),o&&i.a.createElement("div",{className:"p-ia__channel_details__prefs_control p-ia__channel_details__prefs_control--with-toggle p-ia__channel_details__prefs_control__mute"},"Mute",i.a.createElement(BD.a,{id:"channel-details-mute-channel",isToggled:a,onChange:this.toggleMuteChannel,ariaLabel:"Mute"})),c&&i.a.createElement("div",{className:"p-ia__channel_details__prefs_control p-ia__channel_details__prefs_control--with-toggle p-ia__channel_details__prefs_control__star"},"Star",i.a.createElement(BD.a,{id:"channel-details-star-channel",isToggled:l,onChange:this.toggleStarChannel,ariaLabel:"Mute"})),this.props.shouldUseChannelSections&&i.a.createElement(Yi,{channelIds:[t.id]},i.a.createElement(He.a,{className:"p-ia__channel_details__prefs_control"},"Section"," ",i.a.createElement("span",{className:"p-ia__channel_details__prefs_control__content"},u&&i.a.createElement(dm.b,{text:u,emojiSize:dm.a.SMALL})," ",p||"None"))))}renderBody(){var{channel:e,collapse:t,isApp:a}=this.props;return i.a.createElement(fh.a,null,n=>{var{width:r,height:o}=n;return i.a.createElement(Ch.b,{width:r,height:o},i.a.createElement(s.Fragment,null,this.renderHeader(),this.renderActions(),this.renderDetails(),this.renderPreferences(),Object(B.hb)(e)&&!a&&i.a.createElement(dD,{ref:this.detailsSectionRef,channel:e}),!Object(B.jb)(e)&&i.a.createElement(fR,{ref:this.pinnedSectionRef,channelId:e.id,collapse:t}),i.a.createElement(Ax,{ref:this.pinnedSectionRef,channelId:e.id,collapse:t}),!Object(B.hb)(e)&&i.a.createElement(DR,{ref:this.memberListSectionRef,channelId:e.id,collapse:t}),i.a.createElement(nD,{ref:this.sharedFilesSectionRef,channelId:e.id,collapse:t})))})}render(){var{channel:e}=this.props;return!e||Object(B.Mb)(e)?null:i.a.createElement(FT.b,{className:"p-channel_details p-ia__channel_details",focus:this.focus,title:"Details",renderBody:()=>this.renderBody(),viewId:Of.I.CHANNEL_DETAILS_FLEXPANE,kbNavOrder:Object(kt.a)()?void 0:4.5})}}channel_details_IAPrototypeChannelDetails.defaultProps=GD;var KD=Object(d.b)(e=>{var t=Object(_.a)(e),a=Object(L.e)(e,t),n=Object(y.e)(e)[0]||"",r=Qt(e),s=ra(e,a.id).map(e=>r[e]);return{expandedSectionId:n,channel:a,muted:Object(xr.c)(e,a&&a.id),canMute:!Object(B.kb)(a)&&!Object(B.Tb)(Object(h.d)(e),a),userCanSetPurpose:Object(sn.v)(e,a&&a.id).ok,isApp:Object(B.kb)(e,a.id),clogger:Object(ne.a)({state:e}),isIAPhase1Enabled:Object(Rr.d)(e),shouldUseChannelSections:Object(N.a)(e),isInAnyChannelSection:sa(e,a.id),notificationSetting:Object(Z.f)(e,a.id),channelSections:s,topic:a&&a.topic&&a.topic.value,userCanSetTopic:Object(sn.w)(e,a.id),memberId:Object(B.hb)(a)&&Object(B.G)(a)}},e=>({collapse:()=>e(Object(Ie.e)()),startChannelInviteModal:function(){return e(Object(cs.b)(...arguments))},muteChannelById:function(){return e(Object(Zr.a)(...arguments))},unmuteChannelById:function(){return e(Object(Zr.b)(...arguments))},startCall:()=>e(Object(rs.d)()),openModal:function(){return e(Object(Ua.e)(...arguments))},openDmBrowserModal:function(){return e(Object(dt.a)(...arguments))},updateStar:function(){return e(Object(ii.a)(...arguments))},openChannelNotificationPrefsModal:function(){return e(Object(et.a)(...arguments))},openFromCmdF:function(){return e(Object(Tl.d)(...arguments))}}))(channel_details_IAPrototypeChannelDetails);class secondary_view_SecondaryView extends s.PureComponent{render(){var{id:e,params:t,isIAPhase1Enabled:a}=this.props;if(!e)return null;switch(e){case"files":if(t&&Object($w.a)(t[0]))return i.a.createElement(XT,{fileId:t[0]});var n=t&&t[0]||"all",r=t&&t[1]||"all";return i.a.createElement(dN,{user:n,filetype:r});case"downloads":return i.a.createElement(UD,null);case"thread":if(!t)return null;var{channelId:s,threadTs:o}=Object(af.a)(t[0]),c="threads-flexpane-".concat(s,"-").concat(o);return i.a.createElement(GM,{threadTs:o,channelId:s,key:c,serializationKey:c});case"activity":return i.a.createElement(ix,null);case"directory":return i.a.createElement(ON,null);case"user_profile":return t&&Object(gp.a)(t[0])?i.a.createElement(BN,{memberId:t[0]}):null;case"app_profile":var l=t[0];return t&&Object(tT.a)(l)?i.a.createElement(uP,{serviceId:l}):t&&Object(b.a)(l)?i.a.createElement(uP,{appId:l}):null;case"user_groups":return t&&Object(eT.a)(t[0])?i.a.createElement(SA,{groupId:t[0]}):i.a.createElement(pM,null);case"whats_new":return i.a.createElement(dx,null);case"starred_items":return i.a.createElement(_x,null);case"shortcuts":return i.a.createElement(gx.b,null);case"details":return a?i.a.createElement(KD,null):i.a.createElement(hD,null);case"calendar":return i.a.createElement(gD,null);default:throw new Error("".concat(e," flexpane is not implemented!"))}}}secondary_view_SecondaryView.defaultProps={id:null,params:null,isIAPhase1Enabled:!1};var VD=Object(d.b)(e=>({isIAPhase1Enabled:Object(Rr.d)(e)}))(secondary_view_SecondaryView),zD=(a("tEVE"),{primaryView:void 0,secondaryView:void 0,tab:void 0,isPage:!1,hideChannelHeader:!1,channelHeaderProps:void 0,isAppSpace:!1,isAppSpaceOpen:!1,flexParams:void 0,renderSonicMenu:void 0,featureClassicNav:!1,featureAppHomeUTA:!1,featureComposeFlow:!1,featureModernizeChannelCreateModal:!1,openInviteModal:r.a,openChannelCreateModal:r.a,usePrimarySearch:!1,isWindowFrameless:!1,inCreatorOnboarding:!1,clogger:void 0,clientTheme:"light",systemThemeSync:!1,useTabsHeaderVariant:!1,featureWysiwygComposer:!1,featureMessageActionsRefresh:!1,isIAP1Enabled:!1,shouldUseChannelSections:!1});class workspace_Workspace extends s.PureComponent{constructor(e){super(e),this.state={locale:Object(lw.a)({teamId:this.props.teamId})||x.b.DEFAULT_LOCALE,showingContextBar:!1},this.setLocaleState=this.setLocaleState.bind(this),this.onInviteClick=this.onInviteClick.bind(this),this.maybePullDownMessagePane=this.maybePullDownMessagePane.bind(this),this.onStorageEvent=this.onStorageEvent.bind(this),this.onCreateChannelClick=this.onCreateChannelClick.bind(this)}componentDidMount(){var{teamId:e,primaryView:t,clientTheme:a}=this.props;Object(lw.b)({teamId:e,fn:this.setLocaleState}),Object(wb.a)(t)||(Object(p.dispatchForClientStore)(Object(m.d)(!1)),Object(p.dispatchForClientStore)(Object(m.c)(!1))),"dark"===a&&document.body.classList.add("sk-client-theme--dark"),this.props.loadBanner(),this.beaconClientThemeCounts(),this.props.isIAP1Enabled&&Object(p.dispatchForClientStore)(Object(Q.c)({ts:Date.now(),teamId:e,primaryView:t})),window.addEventListener("storage",this.onStorageEvent)}componentDidUpdate(e){this.props.clientTheme!==e.clientTheme&&("dark"===this.props.clientTheme?document.body.classList.add("sk-client-theme--dark"):document.body.classList.remove("sk-client-theme--dark"),this.beaconClientThemeCounts(),window.skFirstPaintStyle&&(window.skFirstPaintStyle.remove(),window.skFirstPaintStyle=null))}componentWillUnmount(){Object(lw.d)({teamId:this.props.teamId}),window.removeEventListener("storage",this.onStorageEvent)}onStorageEvent(e){e.key===A.a&&Object(p.dispatchForClientStore)(Object(A.g)(e.newValue))}onInviteClick(){this.props.clogger.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"invite_people"}}}}),this.props.openInviteModal()}onCreateChannelClick(){this.props.featureModernizeChannelCreateModal&&this.props.openChannelCreateModal({entryPoint:"channel_sidebar"})}setLocaleState(e){var{locale:t}=e;this.setState(e=>e.locale===t?e:{locale:t})}beaconClientThemeCounts(){var{clientTheme:e,systemThemeSync:t,telemeter:a}=this.props;a.count("client_theme_".concat(e)),a.count("client_system_theme_sync_".concat(t?"on":"off"))}maybePullDownMessagePane(e){this.setState(t=>t.contextBarShowing===e?null:{showingContextBar:e})}render(){var e=Object(p.getStoreInstanceByTeamId)(this.props.teamId),t=l()("p-workspace",{"p-workspace--context-pane-collapsed":!this.props.secondaryView,"p-workspace--context-pane-expanded":this.props.secondaryView,"p-workspace--no-header":this.props.hideChannelHeader,"p-workspace--classic-nav":this.props.featureClassicNav,"p-workspace--classic-nav--frameless":this.props.isWindowFrameless,"p-workspace--primary-search":this.props.usePrimarySearch&&"Vsearch"===this.props.primaryView,"p-workspace--in-creator-onboarding":this.props.inCreatorOnboarding,"p-workspace--context-bar-showing":this.state.showingContextBar,"p-workspace--channel-tabs-header":this.props.useTabsHeaderVariant,"p-workspace--channel-tabs-header-channel":this.props.useTabsHeaderVariant&&Object(wb.a)(this.props.primaryView),"p-workspace--iap1":this.props.isIAP1Enabled,"p-workspace--feature_message_actions_refresh":this.props.featureMessageActionsRefresh}),a=this.props.useTabsHeaderVariant&&Object(wb.a)(this.props.primaryView)&&i.a.createElement(dw,null),r=!this.props.isIAP1Enabled&&i.a.createElement("div",{className:"p-workspace__top_nav"},i.a.createElement(cj.b,{variant:"short",subtype:"top_nav"},i.a.createElement(Gd,Object(n.a)({renderSonicMenu:this.props.renderSonicMenu,hideChannelHeader:this.props.hideChannelHeader},this.props.channelHeaderProps)))),s=this.props.shouldUseChannelSections,o=this.props.isIAP1Enabled&&i.a.createElement(Lw,null),c=this.props.isIAP1Enabled&&i.a.createElement(Bw,null);return i.a.createElement(d.a,{store:e,key:this.state.locale},i.a.createElement(cw,null,i.a.createElement(ig.a,null),i.a.createElement(cj.a,null,i.a.createElement(ck,{store:e}),i.a.createElement(lk.a,{store:e})),i.a.createElement(pI.a,{commands:nw}),i.a.createElement("div",{className:t,role:"tabpanel"},i.a.createElement("div",{className:"p-workspace__banner"},i.a.createElement(ge,null),i.a.createElement(xe,null),i.a.createElement(Ee,null)),r,(this.props.isIAP1Enabled||this.props.featureComposeFlow)&&i.a.createElement(kl.a,null),i.a.createElement(cj.b,{subtype:"sidebar"},i.a.createElement("div",{className:"p-workspace__sidebar"},i.a.createElement("div",{className:"p-workspace__channel_sidebar","data-qa":"ws_channel_sidebar"},o,s?i.a.createElement(xg,{onInviteClick:this.onInviteClick,onCreateChannelClick:this.onCreateChannelClick}):i.a.createElement(Rg,{onInviteClick:this.onInviteClick,onCreateChannelClick:this.onCreateChannelClick})))),i.a.createElement(cj.b,{id:this.props.primaryView,subtype:"primary_view"},i.a.createElement("div",{className:"p-workspace__primary_view"},a,i.a.createElement("div",{className:"p-workspace__primary_view_contents"},c,Object(wb.a)(this.props.primaryView)&&this.props.isAppSpace&&i.a.createElement(cj.b,{id:this.props.primaryView,subtype:"app_home",variant:"short"},i.a.createElement(z,null)),"Vall_threads"===this.props.primaryView&&i.a.createElement("div",{className:"p-workspace__primary_view_body"},i.a.createElement(HE,{clientTheme:this.props.clientTheme})),this.props.usePrimarySearch&&"Vsearch"===this.props.primaryView&&i.a.createElement("div",{className:"p-workspace__primary_view_body"},i.a.createElement(dk.a,null)),this.props.isPage&&i.a.createElement(hk,null),this.props.tab&&i.a.createElement(cI,null),Object(wb.a)(this.props.primaryView)&&(!this.props.isAppSpace||!this.props.isAppSpaceOpen)&&!this.props.tab&&i.a.createElement($E,{location:JE.MESSAGE_PANE,channelId:this.props.primaryView,role:this.props.isAppSpace?"tabpanel":null},i.a.createElement("div",{className:"p-workspace__primary_view_body"},i.a.createElement(zy,{serializationKey:"message-pane",showingContextBar:this.state.showingContextBar})),i.a.createElement("footer",{className:"workspace__primary_view_footer"},i.a.createElement(wj,{key:"wysiwyg_".concat(this.props.featureWysiwygComposer),maybePullDownMessagePane:this.maybePullDownMessagePane}))),this.props.featureAppHomeUTA&&Object(b.a)(this.props.primaryView)&&!this.props.tab&&i.a.createElement("div",{className:"p-workspace__primary_view_body p-workspace__primary_view_body"},i.a.createElement(dI,{appId:this.props.primaryView})),Object(wb.a)(this.props.primaryView)&&this.props.isAppSpace&&this.props.isAppSpaceOpen&&!this.props.tab&&i.a.createElement("div",{className:"p-workspace__primary_view_body p-workspace__primary_view_body--with-scroll"},i.a.createElement(tS,null))))),i.a.createElement(cj.b,{id:this.props.secondaryView,subtype:"secondary_view"},i.a.createElement("div",{className:"p-workspace__secondary_view"},i.a.createElement("div",{className:"p-workspace__secondary_view_contents"},i.a.createElement(VD,{id:this.props.secondaryView,params:this.props.flexParams}))))),i.a.createElement(ak,null),i.a.createElement(Yy.a,null),i.a.createElement(Ga.a,null),!Object(ve.v)()&&i.a.createElement(Yw,null),i.a.createElement(Zw,null)))}}workspace_Workspace.defaultProps=zD;t.a=Object(d.b)(function(e){var t,a,n=Object(_.a)(e),r=Xc(e,n),s=Object(pl.e)(e,n);if(s){var i=Object(Y.a)(n);i&&(t=i.isChannelHeaderHidden&&i.isChannelHeaderHidden(e),a=i.headerProps)}var o=Object(y.e)(e),c=v(e);return{teamId:Object(u.b)(e),primaryView:n,secondaryView:Object(y.j)(e),tab:c,isPage:s,hideChannelHeader:t,channelHeaderProps:a,isAppSpace:r,isAppSpaceOpen:Object(I.p)(e),flexParams:o&&o.length?o:CC.a,featureClassicNav:Object(h.m)(e,"feature_classic_nav"),featureAppHomeUTA:Object(C.b)(e),featureComposeFlow:Object(O.g)(e),usePrimarySearch:Object(T.a)(e),featureModernizeChannelCreateModal:Object(h.m)(e,"feature_modernize_channel_create_modal"),isWindowFrameless:Object(E.l)(e),inCreatorOnboarding:Object(cp.d)(e),clogger:Object(ne.a)({state:e}),telemeter:Object(pr.c)({state:e}),clientTheme:Object(A.c)(e),systemThemeSync:Object(A.d)(e),useTabsHeaderVariant:Object(P.f)(e),featureWysiwygComposer:Object(ga.a)(e),featureMessageActionsRefresh:Object(h.m)(e,"feature_message_actions_refresh"),isIAP1Enabled:Object(Rr.d)(e),shouldUseChannelSections:Object(N.a)(e)}},e=>({openInviteModal:function(){return e(Object(k.a)(...arguments))},openChannelCreateModal:function(){return e(Object(S.a)(...arguments))},loadBanner:()=>e(Object(w.h)())}))(workspace_Workspace)},m0k8:function(e,t,a){},m1aP:function(e,t,a){e.exports=a.p+"sidebar_bg_standard-7b3252c.png"},m2U7:function(e,t,a){},m5Fn:function(e,t,a){"use strict";var n=a("UXvI"),r=a("q1tI"),s=a.n(r),i=(a("aK/h"),a("XHGt")),o=a("JrUZ"),c=a("yHhI"),l=a("Zr7G"),d=a("TSYQ"),p=a.n(d),u=a("tn36"),h=a("GbAX"),m=a("tfx1"),b=a("Go8C"),_=a("BrU6"),g=a("Tc5z"),f=a("cMxN"),v=a("1F8+"),O=a("od5y"),y=a("llxT"),C=a("g5qt"),j=a("nNoG"),E=a("Rjjz"),k=a("ROZo"),S=Object(k.b)("TS.client.channel_header.calculateNoDragRegions"),I=(Object(k.b)("TS.client.channel_header.legacySetupDragRegions"),a("F8qq")),w=a("MREy"),T=a("HXD8"),N=a("ifKl"),P=Object(k.b)("TS.view.resize_sig.add",N.a,!0),A=Object(k.b)("TS.view.resize_sig.remove",N.a,!0),M=a("rWF5"),x=a("YDA8"),R=a("NPpR"),D=a("5iqv"),F=new j.b("search"),L=new j.b("jumper"),U=new j.b("keys"),B={displayQuery:"",telemeter:l.d,isCustomTitlebarShown:!1,lastOpenMethod:""};class search_Search extends r.PureComponent{constructor(e){super(e),Object(u.a)(this,["onSearchClose","onSearchAutocompleteSuggestionAccept","onSearchAutocompleteSuggestionDelete","onSearchInputBoxEscape","onClickRefreshSearch"]),this.state={appBannerHeightPx:this.getBannerHeight()},this.onSearchInputBoxFocus=Object(n.a)(()=>this.props.searchPrecache(),6e4),this.onResize=Object(n.a)(this.onResize.bind(this),50),P(this.onResize),this.inputRef=s.a.createRef()}componentDidMount(){C.W&&Object(C.db)()&&Object(C.yc)([])}componentWillUnmount(){C.W&&Object(C.db)()&&S(),A(this.onResize)}onResize(){this.setState(()=>({appBannerHeightPx:this.getBannerHeight()}))}onSearchAutocompleteSuggestionAccept(){Object(T.e)(this.props.telemeter),this.props.searchAutocompleteSuggestionAccept()}onSearchAutocompleteSuggestionDelete(){this.inputRef.current&&this.inputRef.current.getWrappedInstance().focusTexty()}onSearchInputBoxEscape(){return this.onSearchClose(),!0}onSearchClose(){Object(w.g)()||this.props.close()}onClickRefreshSearch(){this.props.setRequestFromEditableRequest({fetchSuggestions:!0})}getBannerHeight(){var e=window.$&&window.$("#banner");return e&&e.height()||0}clear(){this.props.setSearchInputBoxUserQuery({textyString:""})}renderMode(){switch(this.props.interfaceMode){case m.a.SEARCH_RESULTS:return this.renderSearchResults();case m.a.EDIT:default:return this.renderQueryEdit()}}renderSearchResults(){return s.a.createElement(D.a,{onClickRefreshSearch:this.onClickRefreshSearch})}renderQueryEdit(){return s.a.createElement("div",{className:"c-search-autocomplete","data-qa":"search_autocomplete"},s.a.createElement(x.a,{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept,onDelete:this.onSearchAutocompleteSuggestionDelete}))}renderCmdKHint(){if("key_button"===this.props.lastOpenMethod){var e=Object(M.q)()?U.t("\u2318K"):U.t("Ctrl+K");return s.a.createElement("div",{className:"c-search_modal__tip_wrapper"},s.a.createElement("div",{className:"c-search_modal__tip"},L.rt("<strong>Tip:</strong> Open this faster with {cmd_shortcut}",{cmd_shortcut:e})))}return null}render(){var e=p()("c-popover","c-search_modal",{"c-search_modal--autocomplete":this.props.interfaceMode===m.a.EDIT,"c-search_modal--custom_titlebar":this.props.isCustomTitlebarShown}),t=F.t("Search");return s.a.createElement(f.a,{ariaRole:"dialog",ariaLabel:t,isOpen:this.props.visible,position:"top-left",targetBounds:{top:0,left:0,bottom:0,right:0},onClose:this.onSearchClose,shouldFade:!1,overlayClassName:e,allowanceX:0,allowanceY:0,shouldFocusAfterRender:!0,shouldReturnFocusAfterClose:!1,contentStyle:{marginTop:this.state.appBannerHeightPx}},s.a.createElement("div",{className:"c-search__input_and_close"},s.a.createElement(R.a,{autoFocus:!0,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus,ref:this.inputRef}),s.a.createElement(y.a,{className:"c-search__input_and_close__close",onClick:this.props.close,"aria-label":F.t("Cancel"),"data-qa":"search_input_close"},s.a.createElement(O.b,{type:"times"}))),this.renderMode(),this.renderCmdKHint())}}search_Search.defaultProps=B;var H={searchAutocompleteSuggestionAccept:I.a,searchPrecache:function(){return Object(E.s)(...arguments)},setRequestFromEditableRequest:function(){return Object(o.D)(...arguments)},setSearchInputBoxUserQuery:function(){return Object(_.a)(...arguments)},close:function(){return Object(v.a)(...arguments)}},W=Object(i.b)(e=>({interfaceMode:Object(h.g)(e),displayQuery:Object(b.b)(e),userQuery:Object(b.d)(e),visible:Object(h.v)(e),telemeter:Object(l.c)({state:e}),isCustomTitlebarShown:Object(g.k)(e),lastOpenMethod:Object(h.i)(e)}),H)(search_Search),q="IMPROVED_SEARCH";var G={resetSearchAfterUnknownUIError:function(){return Object(o.t)(...arguments)}},K=Object(i.b)(e=>({logger:Object(c.a)({state:e}),telemeter:Object(l.c)({state:e})}),G)(class protected_search_ProtectedSearch extends r.PureComponent{constructor(e){super(e),this.state={hasError:!1},this.retryRender=Object(n.a)(this.retryRender.bind(this),100,{leading:!1})}componentDidUpdate(){this.state.hasError&&this.retryRender()}componentDidCatch(e,t){this.props.telemeter.count("search_full_render_fail",1),this.props.logger.error(q,"Error caught by ProtectedSearch ".concat(t.componentStack),e,{subtype:"search"}),this.setState(()=>({hasError:!0})),this.props.resetSearchAfterUnknownUIError()}retryRender(){this.setState(()=>({hasError:!1}))}render(){return this.state.hasError?null:s.a.createElement(W,null)}});t.a=K},mIgp:function(e,t,a){"use strict";var n=a("oUPN"),r=a("ifKl"),s=(a("aK/h"),a("q1tI")),i=a.n(s),o=a("uPpK"),c=a("ukTK"),l=a("z0G2"),d=a("tQ8E"),p={className:"",onScroll:r.a,scrollElement:null,defaultRowHeight:200,topOffset:0,height:0,isScrolling:!1,scrollTop:0};class full_page_list_FullLengthList extends d.a{isScrolling(){return this.props.scrolling}getContainerHeight(){return this.getContentHeight()}getScrollTop(){return this.props.scrollTop}setScrollTop(e){this.props.scrollElement.scrollTop=Math.ceil(e)}getClassName(){return this.props.className}onScroll(e){this.relayout(),this.props.onScroll(e,{scrollTop:this.getScrollTop(),scrollHeight:this.getContentHeight(),clientHeight:this.props.height})}render(){var{width:e,height:t}=this.props;if(0===e||0===t)return null;var a=this.getClassName(),n=this.renderContents();return i.a.createElement("div",{className:a,style:{width:e,height:"auto"},onScroll:this.onScroll,role:this.props.role},n)}}class full_page_list_FullPageList extends s.PureComponent{constructor(e){super(e),this.heightCache=new c.a({DEFAULT_HEIGHT:this.props.defaultRowHeight}),this.layout=new l.a({heightCache:this.heightCache}),this.list=null,this.setListRef=this.setListRef.bind(this)}getContentHeight(){return this.list.getContentHeight()}getVisibleRange(){return this.list.getVisibleRange()}setListRef(e){this.list=e}invalidateRowHeights(){this.heightCache.invalidate()}scrollToKey(){return this.list.scrollToKey(...arguments)}render(){var{keys:e,className:t,rowRenderer:a,scrollElement:n,topOffset:r}=this.props,{height:s,isScrolling:c,scrollTop:l}=this.props,d=n||window;return i.a.createElement(o.a,{disableHeight:!0},n=>{var{width:o}=n;return i.a.createElement("div",{className:t},i.a.createElement(full_page_list_FullLengthList,{width:o,height:s,keys:e,layout:this.layout,rowRenderer:a,scrolling:c,scrollTop:Math.max(l-r,0),scrollElement:d,ref:this.setListRef,topOffset:r}))})}}full_page_list_FullPageList.defaultProps=p,a.d(t,"a",function(){return full_page_list_FullPageList});t.b=n.a},"mZe+":function(e,t,a){"use strict";var n=a("ifKl"),r=a("zmn3"),s=a("fujP"),i=a("aK/h"),o=a("q1tI"),c=a.n(o),l=a("XHGt"),d=a("TSYQ"),p=a.n(d),u=a("uPpK"),h=a("8Duq"),m=a("XfeM"),b=a("dhvi"),_=a("YVZO"),g={threadTs:void 0,initialFileTitle:void 0,closeModal:n.a};class rename_pending_file_dialog_RenamePendingFileDialog extends o.PureComponent{constructor(e){super(e),this.handleRename=this.handleRename.bind(this)}handleRename(e){var{fileId:t,channelId:a,threadTs:n}=this.props;this.props.renamePendingFile({channelId:a,threadTs:n,fileId:t,title:e})}render(){var{initialFileTitle:e}=this.props;return c.a.createElement(_.a,{closeModal:this.props.closeModal,initialFileTitle:e,handleRename:this.handleRename})}}rename_pending_file_dialog_RenamePendingFileDialog.defaultProps=g;var f={closeModal:function(){return Object(b.a)(...arguments)},renamePendingFile:function(){return Object(h.j)(...arguments)}},v=Object(l.b)(null,f)(rename_pending_file_dialog_RenamePendingFileDialog),O=a("yPgC"),y=Object(m.b)("Opens the rename file dialog",(e,t,a)=>{e(Object(b.e)({element:c.a.createElement(v,a),isStackable:!0}))});y.meta={name:"openRenamePendingFileDialog",key:"actionsOpenRenamePendingFileDialogOpenRenamePendingFileDialog",description:"Opens the rename file dialog"},y.propTypes={file:O.a.File().isRequired,channelId:i.default.string.isRequired,threadTs:i.default.string};var C=y,j=a("kRTx"),E=a("fQu5"),k=a("P9LH"),S=a("B+Mk"),I=a("rePB"),w=a("8QLk"),T=a("UXvI"),N=a("rWF5"),P=a("lfjV"),A=a("od5y"),M={isShowing:!0,onClick:n.a},x=e=>{var{arrowDirection:t,onClick:a,isShowing:n}=e,r=p()("p-gallery_scroller__arrow","p-gallery_scroller__".concat(t,"_arrow"),{"p-gallery_scroller__arrow_hidden":!n});return c.a.createElement("div",{className:r},c.a.createElement(A.b,{type:"circle-fill",className:"p-gallery_scroller__arrow_fill",size:"inherit"}),c.a.createElement(A.b,{type:"arrow-large-".concat(t),className:"p-gallery_scroller__arrow_icon",onClick:e=>a(e,t)}))};x.defaultProps=M;var R=x;a("sUzI");function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach(function(t){Object(I.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var L={right:"right",left:"left"},U=160,B=50,H=50;class gallery_scroller_GalleryScroller extends o.Component{constructor(e){super(e),this.onArrowClick=this.onArrowClick.bind(this),this.onScroll=Object(T.a)(this.onScroll,B).bind(this),this.onContentMutation=this.onContentMutation.bind(this),this.setWrapperRef=this.setWrapperRef.bind(this),this.setContentRef=this.setContentRef.bind(this),this.wrapper=void 0,this.content=void 0,this.mutationObserver=new MutationObserver(this.onContentMutation),this.state={scrollLeft:0,scrollWidth:void 0}}componentDidMount(){this.content&&this.mutationObserver.observe(this.content,{childList:!0,subtree:!0})}componentWillUnmount(){this.mutationObserver.disconnect()}onArrowClick(e,t){e.preventDefault();var{pageSize:a}=this.props,{scrollLeft:n}=this.state,r=n+(t===L.right?a:-a),s=this.getMinScroll(),i=this.getMaxScroll(),o=Object(w.a)(r,s,i);i-o<H?o=i:o-s<H&&(o=s),this.scrollWithAnimation(o)}onScroll(e){if(e){var t=e.scrollLeft;this.setState(()=>({scrollLeft:t}))}}onContentMutation(){var{scrollWidth:e}=this.state,t=this.content&&this.content.scrollWidth;e!==t&&this.setState(e=>F({},e,{scrollWidth:t}))}getMinScroll(){return 0}getMaxScroll(){if(!this.content)return 0;var{width:e}=this.props,{scrollWidth:t}=this.state;return t-e}setWrapperRef(e){if(e){this.wrapper=e;var t=this.wrapper.scrollLeft;this.setState(e=>F({},e,{scrollLeft:t}))}}setContentRef(e){if(e){this.content=e;var t=this.content.scrollWidth;this.setState(e=>F({},e,{scrollWidth:t}))}}shouldShowArrow(e){var{arrowDirection:t}=e,{width:a}=this.props,{scrollLeft:n,scrollWidth:r}=this.state,s=this.getMinScroll(),i=this.getMaxScroll();return t===L.right?n<i&&r>a:n>s}scrollWithAnimation(e){var t=0;this.trackAnimation&&this.trackAnimation.cancel(),this.trackAnimation=Object(P.a)({fromValue:this.wrapper.scrollLeft,toValue:e,duration:U,delta:!0,onTick:e=>{var{value:a,nextTick:n}=e,r=this.wrapper.scrollLeft+a+t,s=Math.round(r);t=r-s,this.wrapper.scrollLeft=s,n()}})}renderArrow(e){var{arrowDirection:t}=e,a=this.shouldShowArrow({arrowDirection:t});return c.a.createElement(R,{arrowDirection:t,onClick:this.onArrowClick,isShowing:a})}render(){var{width:e,children:t}=this.props,a=p()("p-gallery_scroller__wrapper",{"p-gallery_scroller__wrapper--can_scroll":Object(N.k)()});return c.a.createElement("div",{className:"p-gallery_scroller",style:{width:e}},c.a.createElement("div",{className:a,ref:this.setWrapperRef,onScroll:e=>this.onScroll(e&&e.target)},c.a.createElement("div",{className:"p-gallery_scroller__content",ref:this.setContentRef},t)),this.renderArrow({arrowDirection:L.left}),this.renderArrow({arrowDirection:L.right}))}}gallery_scroller_GalleryScroller.defaultProps={pageSize:100};var W=gallery_scroller_GalleryScroller,q=a("XLFM"),G=a("nNoG"),K=a("RfGh"),V=a("9gIX"),z=a("wOaD"),Y=(a("j4JU"),new G.b("multi_file_upload"));class pending_file_PendingFile extends o.PureComponent{renderEditFileButton(){var{onEditFile:e}=this.props;return e?c.a.createElement(q.c,{className:"p-pending_file__edit_btn","aria-label":Y.t("Edit file title"),onClick:e},Y.t("Edit")):null}render(){var{file:e,className:t,isCompact:a}=this.props,n=p()("p-pending_file",t,{"p-pending_file--compact":a}),r=a?c.a.createElement(z.a,{file:e,isCompact:!0}):c.a.createElement(V.a,{file:e,showThumbnail:!1},this.renderEditFileButton());return c.a.createElement(K.a,{file:e,className:n,showActions:!1},r)}}pending_file_PendingFile.defaultProps={isCompact:!1,className:null,onEditFile:null};var Q=pending_file_PendingFile,X=a("b98e"),J=a("18Pa"),Z=(a("lKsX"),new G.b("multi_file_upload")),$={fileId:void 0,channelId:void 0,threadTs:void 0,title:void 0,closeModal:n.a,openRenamePendingFileDialog:n.a};class pending_file_viewer_header_Header extends o.PureComponent{constructor(e){super(e),this.closeModal=this.closeModal.bind(this),this.renameFile=this.renameFile.bind(this)}closeModal(){this.props.closeModal()}renameFile(){var{fileId:e,channelId:t,threadTs:a,title:n}=this.props;this.props.openRenamePendingFileDialog({fileId:e,channelId:t,threadTs:a,initialFileTitle:n})}render(){var{title:e}=this.props;return c.a.createElement("div",{className:"p-file_viewer__header"},c.a.createElement("div",{className:"p-file_viewer__header__meta"},c.a.createElement("div",{className:"p-file_viewer__header__meta__stack"},c.a.createElement("div",{className:"bold"},e),c.a.createElement(q.c,{className:"p-file_viewer__header__meta__minor p-file_viewer__header__edit_btn","aria-label":Z.t("Edit file title"),onClick:this.renameFile},Z.t("Edit")))),c.a.createElement("div",{className:"p-file_viewer__header__actions"},c.a.createElement(J.a,{className:"p-file_viewer__header__button",icon:"times",backgroundStyle:null,onClick:this.closeModal})))}}pending_file_viewer_header_Header.defaultProps=$;var ee=Object(l.b)(null,e=>({closeModal:()=>e(Object(b.a)()),openRenamePendingFileDialog:t=>e(C(t))}))(pending_file_viewer_header_Header),te=a("N36p"),ae={threadTs:void 0,title:void 0,image:void 0};class pending_file_viewer_FileViewer extends o.Component{render(){var{image:e,title:t,fileId:a,channelId:n,threadTs:r}=this.props;return c.a.createElement(X.a,{contentLabel:t},c.a.createElement(ee,{title:t,fileId:a,channelId:n,threadTs:r}),c.a.createElement(te.a,{title:t,image:e}))}}pending_file_viewer_FileViewer.defaultProps=ae;var ne=Object(l.b)((e,t)=>{var{fileId:a,channelId:n,threadTs:r,image:s}=t;if(!a||!n||!s)return null;var i=Object(h.d)(e,{fileId:a,channelId:n,threadTs:r});return{fileId:a,channelId:n,threadTs:r,title:i.title||i.name,image:s}})(pending_file_viewer_FileViewer);function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var se=Object(m.b)("Opens the PendingFileViewer",(e,t,a)=>{e(Object(b.e)({element:c.a.createElement(ne,a),isStackable:!0}))});se.meta={name:"openPendingFileViewer",key:"actionsOpenPendingFileViewerOpenPendingFileViewer",description:"Opens the PendingFileViewer"},se.propTypes=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(Object(a),!0).forEach(function(t){Object(I.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},ne.propTypes);var ie=se,oe=a("b0Xh");var ce=function(e){return new Promise((t,a)=>{if(e&&e instanceof File)if(window.FileReader)if(e.dataUrl)t({dataUrl:e.dataUrl,orientation:e.orientation,width:e.width,height:e.height});else{var r=new FileReader;r.onload=(a=>{var n=a.target.result,r=function(e){for(var t=e.replace(/^data:([^;]+);base64,/gim,""),a=atob(t),n=a.length,r=new Uint8Array(n),s=0;s<n;s++)r[s]=a.charCodeAt(s);return r.buffer}(n),s=Object(oe.readFromBinaryFile)(r),i=s&&"number"==typeof s.Orientation?s.Orientation:null,o=new Image;o.onload=(()=>{var a=o.width,r=o.height;e.dataUrl=n,e.orientation=i,e.width=a,e.height=r,t({dataUrl:n,orientation:i,width:a,height:r})}),o.src=n}),r.onloadstart=(e=>{Object(n.a)(e)}),r.onerror=(e=>{r.abort(),a(e)}),r.readAsDataURL(e)}else a(new Error("Cannot read file data, browser does not support FileReader"));else a(new Error("Invalid file argument provided to getPendingFileData"))})},le=a("cD5Y"),de=(a("TepT"),new G.b("multi_file_upload")),pe={channelId:void 0,threadTs:void 0,useThumbnail:!1,className:null,openPendingFileViewer:n.a};class pending_image_file_PendingImageFile extends o.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.state={dataUrl:void 0,orientation:void 0,height:void 0,width:void 0,isLoading:!0}}componentDidMount(){var e=this,{file:t}=this.props;ce(t).then(function(){var{dataUrl:t,orientation:a,height:n,width:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState(()=>({dataUrl:t,orientation:a,height:n,width:r})),requestAnimationFrame(()=>{e.setState(()=>({isLoading:!1}))})}).catch(e=>{Object(n.a)(e)})}onClick(e){e.stopPropagation();var{file:t,channelId:a,threadTs:n}=this.props,{dataUrl:r,width:s,height:i,orientation:o}=this.state;this.props.openPendingFileViewer({fileId:t.id,channelId:a,threadTs:n,title:t.title||t.name,image:{src:r,width:s,height:i,orientation:o}})}renderImage(){var{file:e}=this.props,{dataUrl:t}=this.state;return c.a.createElement("img",{className:"p-pending_image_file__img",src:t,alt:Object(k.k)(e)})}renderImageThumbnail(){var{file:e}=this.props,{dataUrl:t}=this.state||{},a=t?{backgroundImage:"url('".concat(t,"')")}:null;return c.a.createElement("span",{className:"p-multi_file_upload__image_file__thumbnail p-pending_image_file__thumbnail",style:a,"aria-label":Object(k.k)(e)})}render(){var{file:e,useThumbnail:t,className:a}=this.props,{isLoading:n,orientation:r,height:s,width:i}=this.state,o=t?1:s/i;if(!Object(k.N)(e))return null;var l=p()("p-multi_file_upload__image_file p-pending_image_file",a,{"p-pending_image_file__thumbnail_container":t,"p-pending_image_file__loading":n});return c.a.createElement(q.c,{className:"p-pending_image_file__btn",onClick:this.onClick,"aria-label":de.t("Preview image"),style:Object(k.u)({orientation:r,imageDimensionRatio:o})},c.a.createElement("div",{className:l},t?this.renderImageThumbnail():this.renderImage(),c.a.createElement(le.a,{size:"large",className:"p-pending_image_file__loading_spinner"})))}}pending_image_file_PendingImageFile.defaultProps=pe;var ue=Object(l.b)(null,e=>({openPendingFileViewer:function(){return e(ie(...arguments))}}))(pending_image_file_PendingImageFile),he=(a("P5pr"),new G.b("multi_file_upload")),me={channelId:void 0,threadTs:void 0,className:null,openPendingFileViewer:n.a};class draft_image_file_DraftImageFile extends o.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){e.stopPropagation();var{file:t,channelId:a,threadTs:n}=this.props;this.props.openPendingFileViewer({fileId:t.id,channelId:a,threadTs:n,title:Object(k.k)(t),image:{src:t.thumb_360,width:t.thumb_360_w,height:t.thumb_360_h}})}renderImageThumbnail(){var{file:e}=this.props,t=e.thumb_360,a=t?{backgroundImage:"url('".concat(t,"')")}:null;return c.a.createElement("span",{className:"p-multi_file_upload__image_file__thumbnail p-draft_image_file__thumbnail",style:a,"aria-label":Object(k.k)(e)})}render(){var{className:e}=this.props,t=p()("p-multi_file_upload__image_file p-draft_image_file",e);return c.a.createElement(q.c,{className:"p-draft_image_file__btn",onClick:this.onClick,"aria-label":he.t("Preview image")},c.a.createElement("div",{className:t},this.renderImageThumbnail()))}}draft_image_file_DraftImageFile.defaultProps=me;var be=Object(l.b)(null,e=>({openPendingFileViewer:function(){return e(ie(...arguments))}}))(draft_image_file_DraftImageFile),_e=new G.b("multi_file_upload"),ge={threadTs:null,removePendingFile:n.a,featureMultiFileUpload:!0};class remove_file_button_RemoveFileButton extends o.PureComponent{constructor(e){super(e),this.onRemoveFileClick=this.onRemoveFileClick.bind(this)}onRemoveFileClick(e){e.stopPropagation();var{fileId:t,channelId:a,threadTs:n}=this.props;t&&a&&this.props.removePendingFile({channelId:a,threadTs:n,fileId:t})}render(){var{featureMultiFileUpload:e}=this.props;return e?c.a.createElement(q.c,{className:"p-multi_file_upload__remove_btn",onClick:this.onRemoveFileClick,"aria-label":_e.t("Remove file")},c.a.createElement(A.b,{type:"circle-fill",className:"p-multi_file_upload__remove_btn_circle"}),c.a.createElement(A.b,{type:"times-circle",className:"p-multi_file_upload__remove_btn_times"})):null}}remove_file_button_RemoveFileButton.defaultProps=ge;var fe=Object(l.b)(null,{removePendingFile:h.i})(remove_file_button_RemoveFileButton),ve=a("NFsq"),Oe=a("RAhH"),ye=a("g+Y+"),Ce=new G.b("drafts"),{ERROR:je,IDLE:Ee,PROCESSING:ke,UPLOADING:Se}=j.a,Ie={featureComposeFlow:!1,onClick:n.a,status:Ee},we=e=>{var{featureComposeFlow:t,onClick:a,status:n}=e,[r,s]=Object(o.useState)(!1);if(!t)return null;var i,l=c.a.createElement(A.b,{type:"close-filled",className:"p-multi_file_upload__file_status_icon--remove"});i=r?l:Object(ve.a)([Ee,Se,ke],n)?c.a.createElement(le.a,{size:"medium"}):n===je?c.a.createElement(A.b,{type:"exclamation-circle",className:"p-multi_file_upload__file_status_icon--error"}):l;var d=p()("p-multi_file_upload__file_status_btn",{"p-multi_file_upload__file_status_btn--remove":i===l});return c.a.createElement(Oe.c,{position:"top",tip:Ce.t("Remove file")},c.a.createElement(q.c,{className:d,onClick:a,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},i))};we.defaultProps=Ie;var Te=Object(l.b)(e=>({featureComposeFlow:Object(ye.g)(e)}))(we);a("pmpI");a.d(t,"a",function(){return multi_file_upload_MultiFileUpload});var Ne={files:[],channelId:null,threadTs:null,isCompact:!1,isEagerUpload:!1,onFilesSelected:n.a,onRemoveFile:n.a,openRenamePendingFileDialog:n.a},Pe=184,Ae=26214400;class multi_file_upload_MultiFileUpload extends o.Component{constructor(e){super(e),this.hiddenFileInputRef=c.a.createRef(),this.onAddFileClick=this.onAddFileClick.bind(this),this.onPendingFileClick=this.onPendingFileClick.bind(this),this.onFilesSelectedHandler=this.onFilesSelectedHandler.bind(this)}onAddFileClick(){this.hiddenFileInputRef&&this.hiddenFileInputRef.current&&this.hiddenFileInputRef.current.click()}onPendingFileClick(e,t){e.stopPropagation();var{channelId:a,threadTs:n}=this.props,r=t.title||t.name;this.props.openRenamePendingFileDialog({fileId:t.id,channelId:a,threadTs:n,initialFileTitle:r})}onFilesSelectedHandler(e){Object(s.a)(e)||this.props.onFilesSelected(e)}getComponentSize(){var{files:e,isCompact:t}=this.props;return t?"small":e&&1===e.length&&this.shouldRenderPendingImage(e[0].file)?"large":"medium"}shouldRenderPendingImage(e){return Object(k.N)(e)&&e.size<Ae}shouldRenderDraftImage(e){return!!Object(k.e)(e)}maybeRenderImageFile(e){return this.shouldRenderPendingImage(e)?this.renderPendingImageFile(e):this.shouldRenderDraftImage(e)?this.renderDraftImageFile(e):this.renderPendingFile(e)}renderDraftImageFile(e){var{channelId:t,threadTs:a}=this.props;return c.a.createElement(be,{file:e,channelId:t,threadTs:a})}renderRemoveFileButton(e){var{files:t,channelId:a,threadTs:n}=this.props;return t&&t.length<2?null:c.a.createElement(fe,{fileId:e,channelId:a,threadTs:n})}renderPendingImageFile(e){var{files:t,channelId:a,threadTs:n,isCompact:r}=this.props,s=t&&t.length>1||r;return c.a.createElement(ue,{file:e,channelId:a,threadTs:n,useThumbnail:s})}renderPendingFile(e){var{isCompact:t}=this.props;return c.a.createElement(Q,{file:e,isCompact:t,onEditFile:t=>this.onPendingFileClick(t,e)})}renderFileGallery(){var{files:e,isEagerUpload:t,onRemoveFile:a}=this.props;return c.a.createElement("div",{className:"p-multi_file_upload__file_gallery"},e.map(e=>{var n=Object(S.a)(e),r=Object(S.b)(e),s=Object(S.d)(e),i=Object(S.c)(e);return c.a.createElement("div",{className:"p-multi_file_upload__file_container",key:r||i},this.maybeRenderImageFile(n),!t&&this.renderRemoveFileButton(r),t&&c.a.createElement(Te,{onClick:()=>a({pendingFileId:r,persistedFileId:i}),status:s}))}))}renderFileGalleryScroller(){var e=1.25*Pe;return c.a.createElement(u.a,{disableHeight:!0},t=>{var{width:a}=t;return c.a.createElement(W,{width:a,pageSize:e},this.renderFileGallery())})}render(){var{files:e}=this.props;if(!e)return null;var t=this.getComponentSize(),a=p()("p-multi_file_upload__container","p-multi_file_upload__container--".concat(t));return c.a.createElement("div",{className:a},this.renderFileGalleryScroller())}}multi_file_upload_MultiFileUpload.defaultProps=Ne;t.b=Object(l.b)(function(e,t){var{channelId:a,threadTs:n}=t,s=Object(h.f)(e,{channelId:a,threadTs:n});return{files:Object(r.a)(s,e=>Object(E.b)(e))}},{openRenamePendingFileDialog:C})(multi_file_upload_MultiFileUpload)},maFm:function(e,t,a){e.exports=a.p+"guests-85830c1.png"},mqzt:function(e,t,a){"use strict";a.d(t,"a",function(){return l}),a.d(t,"d",function(){return d}),a.d(t,"c",function(){return p}),a.d(t,"b",function(){return u});var n=a("wd/R"),r=a.n(n),s=a("HBMi"),i=a("vg2h"),o=a("A/mR"),c=new(a("nNoG").b)("do_not_disturb"),l=function(e){var{currentTime:t=r()().unix()}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(s.a)(t),n=Object(s.a)(e);return Math.ceil(Object(i.a)(n,a))},d=function(){var{time:e="09:00"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r()().add(1,"days").format("YYYY-MM-DD"),a=r()("".concat(t," ").concat(e)).unix();return l(a)},p=function(){var{time:e="09:00"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r()().add(1,"week").startOf("isoWeek").format("YYYY-MM-DD"),a=r()("".concat(t," ").concat(e)).unix();return l(a)},u=function(e){var{do24hrTime:t=!1,today:a=r()().format("YYYY-MM-DD"),tomorrow:n=r()().add(1,"day").format("YYYY-MM-DD")}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"";var s=Object(o.n)(e,{do24hrTime:t}),i=Object(o.k)(e,{omitTime:!0});return i===a?c.t("Notifications paused until {time}",{time:s}):i===n?c.t("Notifications paused until tomorrow at {time}",{time:s}):c.t("Notifications paused until {expires}",{expires:Object(o.c)(e,"{status_expiration}",{do24hrTime:t})})}},nTMe:function(e,t,a){},ndUn:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),s=a("q1tI"),i=a.n(s),o=a("XHGt"),c=(a("aK/h"),a("1hAG")),l=a("hXpn"),d=a("kd6D"),p=a("kFoU"),u={className:void 0,isActive:!1,isDisabled:!1,secondaryContent:void 0};function h(e){var t,{className:a,id:s,isActive:o,isDisabled:c,secondaryContent:u,team:h}=e,m=Object(r.a)(e,["className","id","isActive","isDisabled","secondaryContent","team"]);return o?t=c?d.c.highlightDim:d.c.highlightDark:c&&(t=d.c.dim),i.a.createElement(l.a,{className:a,size:"small",style:t,primaryContent:i.a.createElement(p.a,Object(n.a)({},m,{team:h,invert:t===d.c.highlightDark})),secondaryContent:u,"data-team-id":s})}h.defaultProps=u;t.a=Object(o.b)((e,t)=>{var a=t.team||Object(c.i)(e,t.id);return{team:a,id:a.id}})(h)},nfA0:function(e,t,a){},nr7U:function(e,t,a){e.exports=a.p+"sidebar_bg_plus@2x-590de7a.png"},nyjr:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"c",function(){return s}),a.d(t,"e",function(){return i}),a.d(t,"d",function(){return o}),a.d(t,"f",function(){return c}),a.d(t,"a",function(){return l});var n=a("U/ze"),r=Object(n.b)(e=>e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.memberIds);r.meta={name:"getFlexpaneMemberIds",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFlexpaneMemberIds"};var s=Object(n.b)(e=>e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.nonExactMatchMemberIds);s.meta={name:"getFlexpaneNonExactMatchMemberIds",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFlexpaneNonExactMatchMemberIds"};var i=Object(n.b)(e=>e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.scrollmark);i.meta={name:"getScrollmark",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetScrollmark"};var o=Object(n.b)(e=>e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.marker);o.meta={name:"getMarker",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetMarker"};var c=Object(n.b)(e=>e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.searchQuery);c.meta={name:"getSearchQuery",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetSearchQuery"};var l=Object(n.b)(e=>e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.filter);l.meta={name:"getFilter",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFilter"}},o2sZ:function(e,t,a){},o4sC:function(e,t,a){"use strict";a.d(t,"a",function(){return GravityAnchorLayout});var n=a("F294"),r=a("TSHB"),s=a("vJtL"),i=a("YLnb");class GravityAnchorLayout extends i.a{constructor(e){super(e),Object(s.a)(e.shouldExcludeFirstItemFromGravity)&&(this.shouldExcludeFirstItemFromGravity=e.shouldExcludeFirstItemFromGravity)}layout(){if(super.layout(),this.totalHeight<this.containerHeight){var e=this.containerHeight-this.totalHeight;this.tops=Object(r.a)(this.tops,t=>t+e),this.totalHeight=this.containerHeight}this.shouldExcludeFirstItemFromGravity&&this.shouldExcludeFirstItemFromGravity()&&this.keys.length>0&&(this.tops[Object(n.a)(this.keys)]=0)}}},"oE+f":function(e,t,a){},"oFS/":function(e,t,a){},oHBb:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("Cfkr");t.a=r.a.createContext(new s.a)},oP4J:function(e,t,a){},oV5z:function(e,t,a){},oq3d:function(e,t,a){},oqAd:function(e,t,a){"use strict";var n=a("rePB"),r=a("F3Uw"),s=a("lE2N"),i=a("aK/h"),o=a("q1tI"),c=a.n(o),l=a("XHGt"),d=a("TSYQ"),p=a.n(d),u=a("QB+X"),h=a("oRxB"),m=a("t85p"),b=a("quKg"),_=a("Ro9a"),g=a("K7CU"),f=a("nNoG"),v=a("PM8X"),O=a("Q+UV"),y=a("NrNc"),C=a("hOQf"),j=new f.b("email_workflow"),E=a("fYfO"),k=a("Lev8"),S=a("NcDR"),I=a("Wofk"),w=a("ifKl"),T=a("XLFM"),N=a("od5y"),P=a("RAhH"),A=a("wMtF"),M=new f.b("emoji"),x={onEmojiSelected:w.a,featureSonicEmoji:!1,clientTheme:"light"};function R(e){var{onClick:t,onEmojiSelected:a,featureSonicEmoji:n,clientTheme:r}=e,s=c.a.createElement(P.c,{tip:M.t("Add reaction..."),delay:P.a},c.a.createElement(T.c,{className:p()("c-reaction_add","c-reaction_add--".concat(r)),onClick:t,"aria-label":M.t("Add reaction..."),"data-qa":"add_reaction_button"},c.a.createElement("div",{className:"c-reaction_add__container"},c.a.createElement(N.b,{type:"small-reaction-bg",className:"c-reaction_add__icon c-reaction_add__icon--bg","aria-hidden":!0}),c.a.createElement(N.b,{type:"small-reaction",className:"c-reaction_add__icon c-reaction_add__icon--fg","aria-hidden":!0}))));return n?c.a.createElement(A.a,{onEmojiSelected:a,showHandyReactions:!0},s):s}R.defaultProps=x;var D=a("kOzZ"),F=a("KdfD"),L=a("cnLP"),U=a("qkTT"),B=a("FghR"),H=new f.b("messages"),W={channelId:i.default.string,anchorElement:i.default.instanceOf(Element),closeCoachmark:i.default.func,featureReactjiEducationTip:i.default.bool,clogger:i.default.object.isRequired},q={channelId:void 0,anchorElement:null,closeCoachmark:w.a,featureReactjiEducationTip:!1},G="EDUCATION_IN_CONTEXT_MESSAGE_PANE";class reaction_education_coachmark_ReactionEducationCoachmark extends B.a{constructor(e){super(e),this.onCloseCoachmark=this.onCloseCoachmark.bind(this),this.onButtonClick=this.onButtonClick.bind(this)}onCloseCoachmark(){var{clogger:e,closeCoachmark:t}=this.props;e.track(G,{contexts:{ui_context:{step:"whats_this_modal",step_variant:"reaction",action:"click",ui_properties:{element_type:"x"}}}}),t()}onButtonClick(){var{clogger:e,closeCoachmark:t}=this.props;e.track(G,{contexts:{ui_context:{step:"whats_this_modal",step_variant:"reaction",action:"click",ui_properties:{element_type:"button"}}}}),t()}render(){var{featureReactjiEducationTip:e,anchorElement:t,isOpen:a}=this.props;if(!e)return null;var n=H.rt("Say it faster with emoji <sparkles></sparkles>",null,e=>{var{tag:t,key:a}=e;return"sparkles"===t?c.a.createElement(U.b,{key:a,text:":sparkles:",emojiSize:U.a.MEDIUM}):null}),r=H.t("Emoji reactions are a quick way to respond in Slack without having to send a message.");return c.a.createElement("div",{className:"position_relative"},c.a.createElement(B.a,{anchorElement:t,isOpen:a,closeCoachmark:this.onCloseCoachmark,onClickPrimaryButton:this.onButtonClick,onClickSecondaryButton:this.sendMessage,primaryCallToActionText:H.t("Got It"),arrowPosition:50,offsetX:-140,offsetY:-10,orientation:"top"},c.a.createElement("h3",{className:"margin_bottom_50"},n),c.a.createElement("div",{className:"hidden"},H.t("Try It")),c.a.createElement("p",null,r)))}}reaction_education_coachmark_ReactionEducationCoachmark.propTypes=W,reaction_education_coachmark_ReactionEducationCoachmark.defaultProps=q;var K=Object(l.b)(e=>({featureReactjiEducationTip:Object(m.m)(e,"feature_reactji_education_tip"),clogger:Object(D.a)({state:e})}))(reaction_education_coachmark_ReactionEducationCoachmark),V=(a("7HtE"),new f.b("reactions")),z={UNOPENED:0,OPEN:1,CLOSED:2},Y="EDUCATION_IN_CONTEXT_MESSAGE_PANE";class reaction_education_tip_ReactionEducationTip extends o.Component{constructor(e){super(e),this.onHelperNoteClick=this.onHelperNoteClick.bind(this),this.onEducationCoachmarkDismiss=this.onEducationCoachmarkDismiss.bind(this),this.state={coachmarkState:z.UNOPENED}}componentDidMount(){this.props.setInProductCoachmarkAsSeen({notification:"reactji_awareness_coachmark",step:"tooltip"})}onHelperNoteClick(){var{clogger:e}=this.props,{coachmarkState:t}=this.state;t===z.UNOPENED&&(this.setState(()=>({coachmarkState:z.OPEN})),this.props.setInProductCoachmarkAsSeen({notification:"reactji_awareness_coachmark",step:"dialog"}),e.track(Y,{contexts:{ui_context:{step:"whats_this_pill",action:"click",step_variant:"reaction"}}}))}onEducationCoachmarkDismiss(){this.setState(()=>({coachmarkState:z.CLOSED})),this.props.setInProductCoachmark(null)}render(){var{featureReactjiEducationTip:e}=this.props,{coachmarkState:t}=this.state;if(!e)return null;if(t!==z.CLOSED){var a=c.a.createElement(K,{isOpen:t===z.OPEN,closeCoachmark:this.onEducationCoachmarkDismiss});return c.a.createElement(L.a,{coachmarkElement:a,orientation:"top",key:"reaction_education_coachmark_anchor",style:{width:"100%",display:"inline"}},c.a.createElement(T.c,{className:"c-reaction_add__note",onClick:this.onHelperNoteClick,"data-qa":"reaction_education_note"},c.a.createElement(N.b,{type:"arrow-left","aria-hidden":!0}),V.t("What\u2019s this?",{fallbackHash:"9082edb7e9cfc2988efd8e1a6e0a6f5c0487ee24",fallbackHashNs:"messages"})))}return null}}reaction_education_tip_ReactionEducationTip.defaultProps={featureReactjiEducationTip:!1};var Q={setInProductCoachmark:F.h,setInProductCoachmarkAsSeen:F.i},X=Object(l.b)(e=>({featureReactjiEducationTip:Object(m.m)(e,"feature_reactji_education_tip"),clogger:Object(D.a)({state:e})}),Q)(reaction_education_tip_ReactionEducationTip),J=a("wx14"),Z=new f.b("emoji"),$={forwardedRef:void 0};function ee(e){var{onClick:t,number:a,selected:n,forwardedRef:r,featureCollapseReactions:s}=e;return s?c.a.createElement(P.c,{tip:Z.t("Show more reactions"),delay:P.a},c.a.createElement(T.c,{className:p()("c-reaction_expand",{"c-reaction_expand--reacted":n}),onClick:t,"aria-label":Z.t("More reactions"),"aria-expanded":"false","data-qa":"expand_reaction_button",ref:r},c.a.createElement("div",{className:"c-reaction_expand__overlay"},Z.rt("{number} more",{number:a})))):null}ee.defaultProps=$;var te=c.a.forwardRef((e,t)=>c.a.createElement(ee,Object(J.a)({},e,{forwardedRef:t}))),ae=new f.b("emoji");function ne(e){var{onClick:t,featureCollapseReactions:a}=e;return a?c.a.createElement(P.c,{tip:ae.t("Show fewer reactions"),delay:P.a},c.a.createElement(T.c,{className:"c-reaction_expand",onClick:t,"aria-label":ae.t("More reactions"),"aria-expanded":"true","data-qa":"expand_reaction_button"},c.a.createElement("div",{className:"c-reaction_expand__overlay"},c.a.createElement(N.b,{type:"chevron-medium-left","aria-hidden":!0})))):null}function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ie=21,oe=17,ce=new f.b("reactions");class reaction_bar_ReactionBar extends c.a.PureComponent{static getDerivedStateFromProps(e,t){if(e.featureCollapseReactions){var a=reaction_bar_ReactionBar.getReactions(e);if(!t.collapsed||!a||a.length<=ie)return se({},t,{reactions:a});var n=a.slice(oe).filter(t=>t.users.includes(e.currentUser)),s=t.reactions&&t.reactions.filter(t=>t.users.includes(e.currentUser));return se({},t,{collapsed:!!!Object(r.a)(n,s,"name").length&&t.collapsed,reactions:a})}return{}}static getReactions(e){var{canReact:t,cannedReactions:a,featureEmailWorkflow:n,reactions:r}=e;if(!n||!t)return r;var i=(a||[]).map(e=>{var{tooltip:t,name:a}=e;return{count:0,users:[],tooltip:t||(n?ce.t("Click to react with {emoji}",{emoji:":".concat(a,":")}):void 0),name:a}});return Object(s.a)((r||[]).concat(i),"name")}constructor(e){super(e),this.onAddReaction=this.onAddReaction.bind(this),this.onReactionClick=this.onReactionClick.bind(this),this.onReactionEmojiPickerSelected=this.onReactionEmojiPickerSelected.bind(this),this.onExpand=this.onExpand.bind(this),this.onCollapse=this.onCollapse.bind(this),e.featureCollapseReactions?(this.reactionBarRef=c.a.createRef(),this.reactionExpandRef=c.a.createRef(),this.state={collapsed:!0,reactions:e.reactions}):this.state={}}componentDidUpdate(e,t){this.props.featureCollapseReactions&&this.maybeUpdateCollapseFocus(t.collapsed)}onAddReaction(e){Object(v.a)({e:e,rxn_key:this.props.reactionKey})}onReactionClick(e,t){var{reactionKey:a}=this.props;this.props.changeReactionFromUserAction({key:a,name:e,adding:!t})}onReactionEmojiPickerSelected(e,t){this.onReactionClick(t)}onExpand(){this.setState(()=>({collapsed:!1}))}onCollapse(){this.setState(()=>({collapsed:!0}))}maybeUpdateCollapseFocus(e){if(this.props.hasKeyboardFocus){if(e&&!this.state.collapsed){var t=this.reactionBarRef.current&&this.reactionBarRef.current.children,a=t&&t[oe];a&&a.focus()}if(!e&&this.state.collapsed){var n=this.reactionExpandRef&&this.reactionExpandRef.current;n&&n.focus()}}}render(){var{reactionKey:e,currentUser:t,emojiMode:a,featureSonicEmoji:n,canReact:r,isLatestReactionInChannel:s,isInReactjiAwarenessTreatmentGroup:i,clientTheme:o,featureCollapseReactions:l}=this.props,d=reaction_bar_ReactionBar.getReactions(this.props);if(!d||0===d.length)return null;var u=d.map(n=>{var{count:s,name:i,users:l,url:d,tooltip:p}=n;return c.a.createElement(I.a,{name:i,count:s,users:l,url:d,currentUser:t,key:i,reactionKey:e,onClick:this.onReactionClick,emojiMode:a,canReact:r,clientTheme:o,tooltip:p})});if(l&&d.length>ie)if(this.state.collapsed){u=u.slice(0,oe);var h=d.length-oe,m=d.slice(oe).some(e=>e.users.includes(t));u.push(c.a.createElement(te,{onClick:this.onExpand,number:h,selected:m,ref:this.reactionExpandRef,key:"reaction-expand-button",featureCollapseReactions:l}))}else u.push(c.a.createElement(ne,{onClick:this.onCollapse,key:"reaction-collapse-button",featureCollapseReactions:l}));r&&(u=u.concat(c.a.createElement(R,{onClick:this.onAddReaction,onEmojiSelected:this.onReactionEmojiPickerSelected,key:"reaction-add-button",featureSonicEmoji:n,clientTheme:o}))),r&&s&&i&&(u=u.concat(c.a.createElement(X,{key:"reaction-education-tip"})));var b=p()(this.props.className,"c-reaction_bar"),_=ce.t("Reactions",{note:"Screenreader: Label for blind users"});return c.a.createElement("div",{className:b,role:"group","aria-label":_,ref:this.reactionBarRef},u)}}reaction_bar_ReactionBar.defaultProps={reactions:null,reactionKey:null,currentUser:null,className:null,emojiMode:null,featureSonicEmoji:!1,featureEmailWorkflow:!1,featureCollapseReactions:!1,hasKeyboardFocus:!1,canReact:!0,clientTheme:"light",isLatestReactionInChannel:!1,isInReactjiAwarenessTreatmentGroup:!1,cannedReactions:[]};var le={changeReactionFromUserAction:h.a},de=Object(l.b)((e,t)=>{var{reactionKey:a,isLatestReactionInChannel:n}=t,{entityId:r,channelId:s}=Object(O.d)(a),i=[],o=!0;if(Object(O.e)(a)){var c=Object(E.a)(e,s,r);(o=Object(C.e)(e,c))&&(i=((e,t)=>{if(Object(_.a)(e)&&Object(y.a)(e,t)&&!Object(C.lb)(t))return[{name:"eyes",tooltip:j.t("I\u2019m looking into this")},{name:"white_check_mark",tooltip:j.t("Mark as resolved")}]})(e,c))}var l=!1;return n&&(l="treatment"===Object(b.c)(e,"reactji_awareness_coachmark_v2")),{canReact:o,cannedReactions:i,reactions:Object(u.e)(e,a),currentUser:Object(m.d)(e),emojiMode:Object(g.h)(e),featureSonicEmoji:Object(m.m)(e,"feature_sonic_emoji"),featureEmailWorkflow:Object(_.a)(e),featureReactjiEducationTip:Object(m.m)(e,"feature_reactji_education_tip"),featureCollapseReactions:Object(m.m)(e,"feature_collapse_reactions"),clientTheme:Object(k.c)(e),isInReactjiAwarenessTreatmentGroup:l}},le)(Object(S.a)(reaction_bar_ReactionBar));t.a=de},p6QP:function(e,t,a){},p6gI:function(e,t,a){},pVvT:function(e,t,a){},peKf:function(e,t,a){"use strict";function n(e){var{prevUserAttentionIsOnChat:t,prevComposerVisible:a,currentUserAttentionIsOnChat:n,currentComposerVisible:r}=e;return!(t||!n||r)||!(!a||r||!n)}a.d(t,"a",function(){return n})},pic6:function(e,t,a){},"plp+":function(e,t,a){},pmpI:function(e,t,a){},"q+7W":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("nNoG"),i=(a("aK/h"),a("TSYQ")),o=a.n(i),c=(a("Usoh"),new s.b("unread"));class MessageContainerLoading extends r.a.Component{constructor(e){super(e),this.state={slow:!1},this.timer=null}componentDidMount(){this.timer=setTimeout(()=>{this.setState(()=>({slow:!0}))},5e3)}componentWillUnmount(){clearTimeout(this.timer)}render(){var{clientTheme:e}=this.props,t=c.t("Loading messages..."),a=c.t("Still loading... sorry for the long wait!"),n=o()("p-message_container_loading",{["p-message_container_loading--".concat(e)]:"light"!==e});return r.a.createElement("div",{className:n,"data-qa":"message_container_loading"},r.a.createElement("div",{className:"p-message_container_loading__msg"},this.state.slow?a:t))}}MessageContainerLoading.defaultProps={clientTheme:"light"},t.a=MessageContainerLoading},q2IZ:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=a("XHGt"),o=a("aK/h"),c=a("M1FR"),l=a("HvGc"),d=a("1hAG"),p=a("kOzZ"),u=a("kcos"),h=a("tn36"),m=a("aolG"),b=a("nNoG"),_=a("5mKg"),g=a("81nI"),f=a("ynxK"),v=new b.b("help"),O={tickets:{open:0,closed:0,unread:0},helpCenterToken:o.default.string},y="/help/requests",C=(e,t,a,n)=>e.closed>0&&0===e.unread&&0===e.open?s.a.createElement("div",null,s.a.createElement("span",null,v.t("No pending requests.")),s.a.createElement(f.a,{className:"p-help_modal__requests",onClick:()=>((e,t,a)=>{e.track("HELP_MODAL_ACTION",{action:"view_request_history",trigger:"click_view_request_history"}),Object(_.P)(a,Object(g.a)(y,t))})(t,a,n),"data-qa":"help_modal_requests_closed"},s.a.createElement("span",{className:"p-help_modal__requests__message bold"},v.t("View your help request history"),"."))):null,j=(e,t,a,n)=>{if(e>0){var r=e>1?v.t("You have new replies to your help requests."):v.t("You have a new reply to your help request.");return s.a.createElement(f.a,{className:"p-help_modal__requests",onClick:()=>((e,t,a)=>{e.track("HELP_MODAL_ACTION",{action:"view_new_replies",trigger:"click_view_new_replies"}),Object(_.P)(a,Object(g.a)(y,t))})(t,a,n),"data-qa":"help_modal_requests_unread"},s.a.createElement("span",{className:"p-help_modal__requests_badge unread"},e),s.a.createElement("span",{className:"p-help_modal__requests__message bold"},r))}return null},E=(e,t,a,n)=>{if(e>0){var r=e>1?v.t("You have open help requests."):v.t("You have an open help request.");return s.a.createElement(f.a,{className:"p-help_modal__requests",onClick:()=>((e,t,a)=>{e.track("HELP_MODAL_ACTION",{action:"view_open_requests",trigger:"click_view_open_requests"}),Object(_.P)(a,Object(g.a)(y,t))})(t,a,n),"data-qa":"help_modal_requests_read"},s.a.createElement("span",{className:"p-help_modal__requests_badge read"},e),s.a.createElement("span",{className:"p-help_modal__requests__message read bold"},r))}return null},k=e=>s.a.createElement("div",{className:"display_flex flex_direction_column"},C(e.tickets,e.clogger,e.helpCenterToken,e.team),s.a.createElement("div",{className:e.tickets.unread>0?"padding_top_50":""},j(e.tickets.unread,e.clogger,e.helpCenterToken,e.team)),s.a.createElement("div",{className:e.tickets.closed>0||e.tickets.unread>0?"padding_top_50":""},E(e.tickets.open,e.clogger,e.helpCenterToken,e.team)));k.defaultProps=O;var S=k,I=a("+6YQ"),w=a("7nxQ"),T=a("od5y"),N=a("ftfc"),P=(a("zG9j"),new b.b("help")),A={query:"",helpCenterToken:"",tickets:{closed:0,read:0,unread:0},onClose:n.a,showKeyboardShortcuts:n.a,withoutFullscreenModal:!1,isIAPhase1Enabled:!1};class help_modal_HelpModal extends r.Component{constructor(e){super(e),this.state={isModalOpen:!0,query:e.query},this.zdLocale=Object(w.a)(),Object(h.a)(this,["onClickBrowseLink","onClickContactUsButton","onClickShortcutsButton","onOpenSearchLink","onQueryChange"])}componentDidMount(){var{trigger:e,clogger:t,isIAPhase1Enabled:a}=this.props;t.track("HELP_MODAL_ACTION",{action:"open_modal",trigger:e,is_iap1:a})}onClickBrowseLink(){var{query:e}=this.state,{clogger:t}=this.props,a=Object(g.b)({zdLocale:this.zdLocale,query:e,sidTrackingToken:this.props.helpCenterToken});e&&t.track("HELP_MODAL_SEARCH",{search_terms:e}),t.track("HELP_MODAL_ACTION",{action:"browse_all",trigger:"click_browse_all"}),window.open(a)}onClickContactUsButton(){var{clogger:e,team:t}=this.props;e.track("HELP_MODAL_ACTION",{action:"submit_new_request",trigger:"click_submit_new_request"}),Object(_.P)(t,Object(g.a)("/help/requests/new",this.props.helpCenterToken))}onClickShortcutsButton(){var{clogger:e}=this.props;this.setState(()=>({isModalOpen:!1})),e.track("HELP_MODAL_ACTION",{action:"keyboard_shorcuts",trigger:"click_keyboard_shorcuts"}),this.props.showKeyboardShortcuts()}onOpenSearchLink(e){var{url:t,query:a}=e,{clogger:n}=this.props;a&&n.track("HELP_MODAL_SEARCH",{search_terms:this.state.query,locale:this.zdLocale}),n.track("HELP_MODAL_ZD_HIT",{zd_article_url:t})}onQueryChange(e){this.setState(()=>({query:e}))}render(){var{isModalOpen:e}=this.state,{tickets:t,clogger:a,onClose:n,team:i,query:o,withoutFullscreenModal:c}=this.props,l=s.a.createElement(r.Fragment,null,s.a.createElement(I.b,{className:"p-help_modal__shortcuts__button c-button--outline",type:"outline",onClick:this.onClickShortcutsButton,"data-qa":"help_modal_shortcuts_button"},s.a.createElement(T.b,{type:"keyboard",className:"small_right_margin"}),s.a.createElement("strong",null,P.t("Keyboard shortcuts"))),s.a.createElement("div",{className:"display_flex align_items_baseline justify_content_between padding_top_200 p-help_modal__header"},s.a.createElement("h1",{className:"p-help_modal_title"},P.t("How can we help?")),s.a.createElement(f.a,{className:"p-help_modal__browse display_flex align_items_end",onClick:this.onClickBrowseLink,"data-qa":"help_modal_browse"},s.a.createElement("span",{className:"p-help_modal__browse__text"},P.t("Browse all answers")),s.a.createElement(T.b,{type:"arrow-large-right",className:"padding_left_100 p-help_modal__browse__icon"}))),s.a.createElement(N.a,{query:o,onOpenLink:this.onOpenSearchLink,autoFocus:!0,onQueryChange:this.onQueryChange}),s.a.createElement("div",{className:"p-help_modal__footer display_flex align_items_center justify_content_between"},s.a.createElement("div",{className:"p-help_modal__footer_tickets display_flex flex_direction_column"},s.a.createElement(S,{tickets:t,team:i,clogger:a,helpCenterToken:this.props.helpCenterToken})),s.a.createElement("div",{className:"p-help_modal__footer_contact"},s.a.createElement("div",null,s.a.createElement("span",{className:"p-help_modal__contact_us__message"},P.t("Can\u2019t find what you need, or have some feedback?")),s.a.createElement(I.b,{type:"primary",size:"medium",className:"margin_left_100 p-help_modal__contact_us__button",onClick:this.onClickContactUsButton,"data-qa":"help_modal_contact_button"},P.t("Contact Us"))))));return c?l:s.a.createElement(m.a,{isOpen:e,showCancelButton:!1,showGoButton:!1,onCancel:n,modalClasses:"p-help_modal",contentLabel:"help-modal","data-qa":"help_modal"},l)}}help_modal_HelpModal.defaultProps=A;var M=help_modal_HelpModal,x={query:"",helpCenterTrackingToken:"",showKeyboardShortcuts:n.a,onClose:n.a,withoutFullscreenModal:!1,isIAPhase1Enabled:!1};class help_modal_container_HelpModalContainer extends r.Component{render(){var{trigger:e,clogger:t,onClose:a,team:n,tickets:r,query:i,withoutFullscreenModal:o,isIAPhase1Enabled:c}=this.props;return s.a.createElement(M,{query:i,team:n,helpCenterToken:this.props.helpCenterTrackingToken,tickets:r,onClose:a,showKeyboardShortcuts:this.props.showKeyboardShortcuts,trigger:e,clogger:t,withoutFullscreenModal:o,isIAPhase1Enabled:c})}}help_modal_container_HelpModalContainer.defaultProps=x;var R={showKeyboardShortcuts:l.h};t.a=Object(i.b)(e=>({clogger:Object(p.a)({state:e}),helpCenterTrackingToken:Object(c.b)(e),team:Object(d.d)(e),tickets:Object(c.c)(e),isIAPhase1Enabled:Object(u.d)(e)}),R)(help_modal_container_HelpModalContainer)},qMiJ:function(e,t,a){},qOjI:function(e,t,a){"use strict";var n=a("UXvI"),r=a("yHhI"),s=a("lhZz"),i=a("Smdl"),o=a("vWCh");function c(e){var t=Object(i.a)()?Object(s.getClientStoreInstance)():Object(s.getStoreInstanceByTeamId)(e),a=Object(i.a)()?Object(r.b)():Object(r.a)({teamId:e});t?(a.info("NETWORK-CONNECTIVITY","Received offline event! Upserting that the client is offline."),t.dispatch(Object(o.a)(!1))):a.warn("NETWORK-CONNECTIVITY","Received offline event, but no store found.")}function l(e){var t=Object(i.a)()?Object(s.getClientStoreInstance)():Object(s.getStoreInstanceByTeamId)(e),a=Object(i.a)()?Object(r.b)():Object(r.a)({teamId:e});t?(a.info("NETWORK-CONNECTIVITY","Received online event! Upserting that the client is online."),t.dispatch(Object(o.a)(!0))):a.warn("NETWORK-CONNECTIVITY","Received online event, but no store found.")}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(n.a)(c.bind(null,e),500,{leading:!1});window.addEventListener("offline",t),window.addEventListener("online",()=>(t.cancel(),l(e)))}},qPro:function(e,t,a){"use strict";var n=a("ZHrX");t.a=n.a},qSXi:function(e,t,a){"use strict";var n=a("rePB"),r=a("negh"),s=a("n2GJ");function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function o(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({id:e.id,appId:e.app.id,name:e.name,description:e.app.name,iconSet:e.app.icons||{},uiElement:r.UiElement.APP_ACTION_BUTTON,"data-qa":"app_action_".concat(e.id)},Object(s.e)(e))}var c=a("NFsq"),l=a("c8Bs"),d=a("/X+W");function p(e,t){if(!e)return!1;var a=Object(d.a)(e.name);if(!a)return!1;var n=Object(d.a)(e.description),r=t.split(/\s+/);return Object(l.a)(r,e=>Object(c.a)(a,e)||Object(c.a)(n,e))}a.d(t,"a",function(){return o}),a.d(t,"b",function(){return p})},qTUc:function(e,t,a){},qYtJ:function(e,t,a){"use strict";var n=a("wBxZ"),r=a("GxtX"),s=a("zmn3"),i=a("BeL+"),o=a("uXhx"),c=a("qAkX"),l=a("ifKl"),d=(a("aK/h"),a("q1tI")),p=a.n(d),u=a("XHGt"),h=a("TSYQ"),m=a.n(h),b=a("t85p"),_=a("XL7r"),g=a("nNoG"),f=a("ubOb"),v=a("rsVu"),O=a("hwN2"),y=a("3kjJ"),C=a("HBMi"),j=new g.b("threads");var E=a("3dqR"),k=a("od5y"),S=a("lwWk"),I=a("Fdc0"),w=a("2Zgd"),T=a("J9z2"),N=new g.b("threads"),P={replies:null,do24hrTime:!1,replyUsers:[],replyUsersCount:0,latestReply:null,showThreadIfThreadable:l.a,featureNewRepliesAfterBcast:!1,isThreadExpanded:void 0,threadListId:void 0,className:void 0,hasKeyboardFocusWithin:!1,onFocus:l.a,onBlur:l.a};class reply_bar_ReplyBar extends p.a.PureComponent{constructor(e){super(e),this.openThread=this.openThread.bind(this)}getLastReplyTs(){if(this.props.latestReply)return this.props.latestReply;if(this.props.replies){var e=Object(c.a)(this.props.replies);if(e)return e.ts}return null}openThread(e){e.preventDefault(),this.props.showThreadIfThreadable({channelId:this.props.channelId,threadTs:this.props.threadTs,requestFocus:this.props.hasKeyboardFocusWithin})}renderFaces(){var e;e=this.props.replyUsers&&this.props.replyUsers.length?Object(o.a)(this.props.replyUsers,e=>"B00"===e):Object(i.a)(Object(o.a)(Object(s.a)(this.props.replies,"user"),e=>"B00"===e));var t=this.props.replyUsersCount?this.props.replyUsersCount:e.length;return e.length>5?Object(r.a)(Object(s.a)(Object(n.a)(e,4),e=>this.renderSingleAvatar(e)),this.renderSingleAvatar(e[4],t-5)):Object(s.a)(e,e=>this.renderSingleAvatar(e))}renderSingleAvatar(e,t){var a=Object(T.a)(e),n=!Object(I.nb)({id:e});return p.a.createElement(E.c,{key:e,userId:a?null:e,botId:a?e:null,size:24,additionalOverlay:t,showCard:!0,isInteractive:n})}render(){var{replyCount:e,channelId:t,threadTs:a,do24hrTime:n,featureNewRepliesAfterBcast:r,isThreadExpanded:s,onFocus:i,onBlur:o,hasKeyboardFocusWithin:c,threadListId:l}=this.props,d=N.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:e}),u=Object(w.b)(t,a),h=this.getLastReplyTs(),b="";b=r?function(){var{latestReply:e,replyCount:t,do24hrTime:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(y.a)(Object(C.a)(e),new Date)?1===t?j.t("Today at {time}",{time:Object(v.a)(e,{do24hrTime:a})}):j.t("Last reply today at {time}",{time:Object(v.a)(e,{do24hrTime:a})}):1===t?Object(O.a)(e):j.t("Last reply {time_ago}",{time_ago:Object(O.a)(e)})}({latestReply:h,replyCount:e,do24hrTime:n}):Object(y.a)(Object(C.a)(h),new Date)?1===e?N.t("Today at {time}",{time:Object(v.a)(h,{do24hrTime:n})}):N.t("Last reply today at {time}",{time:Object(v.a)(h,{do24hrTime:n})}):1===e?Object(O.a)(h):N.t("Last reply {time_ago}",{time_ago:Object(O.a)(h)});var _=m()("c-message__reply_bar",this.props.className,{"c-message__reply_bar--focus-within":c}),g=!0===s?l:void 0;return p.a.createElement("div",{role:"presentation",className:_,onClick:this.openThread,"data-qa":"reply_bar",onFocus:i,onBlur:o},this.renderFaces(),p.a.createElement(S.a,{className:"c-message__reply_count",href:u,target:"_blank",rel:"noopener noreferrer","aria-expanded":s,"aria-controls":g},d),p.a.createElement("div",{className:"c-message__reply_bar_description"},p.a.createElement("span",{className:"c-message__reply_bar_last_reply"},b),p.a.createElement("span",{className:"c-message__reply_bar_view_thread"},N.t("View thread"))),p.a.createElement(k.a,{type:"chevron_right",className:"c-message__reply_bar_arrow",align:"baseline","aria-hidden":!0}))}}reply_bar_ReplyBar.defaultProps=P;t.a=Object(f.a)(Object(u.b)(function(e){return{do24hrTime:Object(_.k)(e,"time24"),featureNewRepliesAfterBcast:Object(b.m)(e,"feature_new_replies_after_bcast")}})(reply_bar_ReplyBar))},qcAq:function(e,t,a){"use strict";var n=a("aK/h"),r=a("XfeM"),s=a("mly0"),i=a("t85p"),o=a("rtjy"),c=a("yPgC"),l=Object(r.b)("Record a frecency event for some message action + maybe a query",function(e,t){var{action:a,query:n=""}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{frecencyId:r}=a;Object(i.m)(t(),"feature_app_actions_fe_refactor")?e(Object(o.c)({id:r,text:n})):Object(s.c)({id:r},n)});l.meta={name:"recordMessageActionFrecencyEvent",key:"actionsRecordMessageActionFrecencyEventRecordMessageActionFrecencyEvent",description:"Record a frecency event for some message action + maybe a query"},l.propTypes={action:c.a.MessageAction.isRequired,query:n.default.string},t.a=l},qfOp:function(e,t,a){},qiqk:function(e,t,a){},qnZ7:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("0wDQ"),r=a("XRnC"),s=a("fYfO"),i=a("PxLB");function o(e,t){return(a,o)=>{var c=Object(s.a)(o(),e,t);if(c){a(Object(n.a)({channelId:e,ts:t})),a(Object(r.d)(c,t));a(Object(i.a)({channelId:e,msg:c,resent:!0}))}}}},qqis:function(e,t,a){},qrk6:function(e,t,a){"use strict";a.d(t,"a",function(){return p});var n=a("x91h"),r=a("nNoG"),s=a("JoAr"),i=a("XxnT"),o=a("HBMi"),c=a("3kjJ"),l=a("aLpA"),d=new r.b("aria_msg_summary");function p(e){if(!e)return null;var t=[],{featureA11yMessageSummary:a,viewContext:r}=e,{isFirstDay:p,isLastDay:u}=e.day,h=e.day.ts/1e3,m=Object(i.a)(),b=Object(i.a)(m).subtract(1,"days"),_=Object(o.a)(h,{returnMoment:!0}),g=Object(c.a)(m,_),f=Object(c.a)(b,_),v=h&&Object(s.a)(h,"{day_divider_pretty}"),O=!r||[l.I.MESSAGE_PANE,l.I.THREADS_FLEXPANE,l.I.THREADS_VIEW,l.I.UNREAD_VIEW].includes(r);return e.isFirstMsgForDay&&!e.isLastMsgForDay&&!p&&O&&(g?t.push(d.t("First message from today.",{day:v})):f?t.push(d.t("First message from yesterday.",{day:v})):t.push(d.t("First message from {day}.",{day:v}))),e.isLastMsgForDay&&!e.isFirstMsgForDay&&!u&&O&&(g?t.push(d.t("Last message from today.",{day:v})):f?t.push(d.t("Last message from yesterday.",{day:v})):t.push(d.t("Last message from {day}.",{day:v}))),(e.isLastMsgForDay&&e.isFirstMsgForDay&&!u&&!p||!O)&&(g?t.push(d.t("Message from today.",{day:v})):f?t.push(d.t("Message from yesterday.",{day:v})):t.push(d.t("Message from {day}.",{day:v}))),e.isFirstUnreadMsg&&O&&t.push(d.t("First unread message.")),e.isTombstone||t.push(d.t("{name} at {time}.",{name:e.name,time:e.time})),e.isEKMOrDLPTombstone&&t.push(e.name),e.channelName&&!O&&t.push(a?d.t("In {channel}.",{channel:e.channelName}):e.channelName),t.push(e.text),e.reactionCount>0&&!e.isTombstone&&t.push(d.t("{count, plural, =1 {# reaction} other {# reactions}}.",{count:e.reactionCount})),e.replyCount>0&&t.push(d.t("{count, plural, =1 {# reply} other {# replies}}.",{count:e.replyCount})),e.isStarred&&r!==l.I.STARS_FLEXPANE&&t.push(d.t("Message is starred.")),e.isPinned&&r!==l.I.PINS_FLEXPANE&&t.push(d.t("Message is pinned.")),e.isEdited&&t.push(a?d.t("Message is edited.",{note:"Part of the description for customers using screen readers: indicates that a message has been edited"}):"Message is edited."),e.attachmentCount>0&&t.push(d.t("{count, plural, =1 {# attachment} other {# attachments}}.",{count:e.attachmentCount})),e.attachmentTexts&&e.attachmentTexts.length>0&&(t=t.concat(e.attachmentTexts)),Object(n.a)(t.join(" "))}},qsRF:function(e,t,a){e.exports=a.p+"user_groups@2x-3a400be.png"},"r/YP":function(e,t,a){},r6UO:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=(a("aK/h"),a("O0RF")),i=a("Rszm"),o=a("nNoG"),c=(a("yWse"),new o.b("file-upload"));t.a=class FileUploadBroadcastCheckbox extends n.PureComponent{constructor(e){super(e),this.handleChange=this.handleChange.bind(this)}handleChange(e){var t=e.target.checked;this.props.onChange(t)}render(){var{channelType:e,selectedChannelName:t,value:a}=this.props,n="";return n="mpim"===e?c.t("Also send to the group"):"im"===e?c.t("Also send as direct message"):c.rt("Also send to <span></span>",null,()=>r.a.createElement("span",{className:"p-file_upload_dialog__broadcast_channel_name"},t)),r.a.createElement(s.a,{text:n,className:"p-file_upload_dialog__broadcast_label",htmlFor:"file-upload-broadcast-to-channel",type:"inline"},r.a.createElement(i.a,{className:"p-file_upload_dialog__broadcast_checkbox","data-qa":"file_upload_broadcast_checkbox",id:"file-upload-broadcast-to-channel",checked:a,onChange:this.handleChange}))}}},rCFu:function(e,t,a){"use strict";a.d(t,"c",function(){return _}),a.d(t,"b",function(){return g}),a.d(t,"a",function(){return f}),a.d(t,"f",function(){return v}),a.d(t,"g",function(){return O}),a.d(t,"i",function(){return y}),a.d(t,"j",function(){return C}),a.d(t,"h",function(){return j}),a.d(t,"d",function(){return S}),a.d(t,"e",function(){return w});var n=a("rePB"),r=a("kOzZ"),s=a("Smdl"),i=a("g5qt"),o=a("Zr7G"),c=a("lhZz"),l=a("U28S"),d=a("Z7Ay"),p=a("eK5+"),u=a("negh"),h=a("nNoG");function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _=0,g=1,f=2;function v(e,t,a,n,i,d,p,m){if(w(i,d,u.EventId.PRQ_CHANNEL_SWITCH_USABLE)){var v,O;switch(n){case _:default:v=u.TimingStatus.COMPLETED,O=!1;break;case g:v=u.TimingStatus.ABANDONED,O=!0;break;case f:v=u.TimingStatus.COMPLETED,O=!0}var y=b({elapsed_time:Object(l.b)(1e3*e*1e3,0),target_channel_id:a,required_sync:O,end_state:v},E(p,t,m)),C={userId:m,teamId:i,enterpriseId:d,locale:Object(h.s)()};Object(r.a)(C).track(u.EventId.PRQ_CHANNEL_SWITCH_USABLE,y);var j=Object(c.getStoreInstanceByTeamId)(i),k=j&&j.getState(),S=Object(s.a)()?"channel_switch_usable_sonic":"channel_switch_usable_legacy";Object(o.c)({state:k}).store(S,Math.round(e))}}function O(e,t,a,n,i,d,p,m){if(w(i,d,u.EventId.PRQ_CHANNEL_SWITCH_VISIBLE)){var v,O;switch(n){case _:default:v=u.TimingStatus.COMPLETED,O=!1;break;case g:v=u.TimingStatus.ABANDONED,O=!0;break;case f:v=u.TimingStatus.COMPLETED,O=!1}var y=b({elapsed_time:Object(l.b)(1e3*e*1e3,0),target_channel_id:a,required_sync:O,end_state:v},E(p,t,m)),C={userId:m,teamId:i,enterpriseId:d,locale:Object(h.s)()};Object(r.a)(C).track(u.EventId.PRQ_CHANNEL_SWITCH_VISIBLE,y);var j=Object(c.getStoreInstanceByTeamId)(i),k=j&&j.getState(),S=Object(s.a)()?"channel_switch_visible_sonic":"channel_switch_visible_legacy";Object(o.c)({state:k}).store(S,Math.round(e))}}function y(e,t,a,n,s,i,o,c){if(w(n,s,u.EventId.PRQ_TIME_TO_USABLE)){var d=Object(l.b)(1e3*e*1e3,0),p=k(),m=b({elapsed_time:d+p,desktop_elapsed_time:p,required_sync:a,end_state:c,start_type:u.MetricStartType.COLD,target_type:u.MetricTargetType.CHANNEL},E(i,t,o)),_={userId:o,teamId:n,enterpriseId:s,locale:Object(h.s)()};Object(r.a)(_).track(u.EventId.PRQ_TIME_TO_USABLE,m)}}function C(e,t,a,n,s,i,o){if(w(n,s,u.EventId.PRQ_TIME_TO_VISIBLE)){var c=Object(l.b)(1e3*e*1e3,0),d=k(),p=b({elapsed_time:c+d,desktop_elapsed_time:d,required_sync:a,end_state:u.TimingStatus.COMPLETED,start_type:u.MetricStartType.COLD,target_type:u.MetricTargetType.CHANNEL},E(i,t,o)),m={userId:o,teamId:n,enterpriseId:s,locale:Object(h.s)()};Object(r.a)(m).track(u.EventId.PRQ_TIME_TO_VISIBLE,p)}}function j(e,t,a,n,s,i,o){if(w(n,s,u.EventId.PRQ_SESSION_FRAME_STATS)){var c=b({duration_ms:e,sample_filter:"entire_session",hist_frame_render_time:t,hist_janky_windows:a},E(i,void 0,o)),l={userId:o,teamId:n,enterpriseId:s,locale:Object(h.s)()};Object(r.a)(l).track(u.EventId.PRQ_SESSION_FRAME_STATS,c)}}function E(e,t,a){var n,r="string"==typeof a&&a.startsWith("W"),o={device:{id:"",make:navigator.platform,model:navigator.platform,os:i.W?"electron":"webapp",os_version:i.Rb||""}};if(t)switch(o.ui_context={action:"QUICK_SWITCH"===t?"keydown":"click",ui_component:t},t.toUpperCase()){case"APP_ICON":n=u.MetricTrigger.APP_ICON;break;case"MSG_PANE":n=u.MetricTrigger.MSG_PANE;break;case"SIDE_BAR":n=u.MetricTrigger.SIDE_BAR;break;case"QUICK_SWITCH":n=u.MetricTrigger.QUICK_SWITCH;break;default:n=u.MetricTrigger.UNKNOWN}var c=b({contexts:o,session_id:e,time:Date.now(),app_id:Object(s.a)()?"web_sonic":"web",is_tablet:!1,user_id:r?void 0:a,external_id:r?a:void 0},I());return t&&(c.trigger=n),c}function k(){if(i.W){var e=Object(i.F)();if(e&&void 0!==e.numTeamsAtLaunch&&void 0!==e.isInitialTeamBooted&&e.numTeamsAtLaunch>0&&e.isInitialTeamBooted){var t=e.BOOT,a=e.PRELOAD_READY,n=Object(i.d)(t,a);return n>0?1e6*n:0}}return 0}function S(){if(i.W){var e=Object(i.F)();if(e&&void 0!==e.numTeamsAtLaunch&&void 0!==e.isInitialTeamBooted&&e.numTeamsAtLaunch>0){var t=e.PRELOAD_STARTED,a=e.PRELOAD_READY,n=Object(i.d)(t,a);return Math.floor(n)}}return 0}function I(){if(i.W){var e=Object(i.s)();if(e){var t,a=e.prerelease?" (".concat(e.prerelease,")"):"";switch("string"==typeof e.prerelease?e.prerelease.match(/(alpha|beta|electron3|sonic)/i)&&e.prerelease.match(/(alpha|beta|electron3|sonic)/i)[1]:"production"){case"alpha":case"electron3":t=u.ClientBuildType.ALPHA;break;case"beta":t=u.ClientBuildType.BETA;break;default:t=u.ClientBuildType.PRODUCTION}return{app_version:"".concat(e.major,".").concat(e.minor,".").concat(e.patch).concat(a),release_version:"".concat(e.major,".").concat(e.minor,".").concat(e.patch),build_type:t}}}return{app_version:"",release_version:"",build_type:u.ClientBuildType.PRODUCTION}}function w(e,t,a){return!(!["E12KS1G65"].includes(t)&&!["T024BE7LD","T5J4Q04QG"].includes(e))||(!(!["E27SFGS2W","E655JKQRX","E7RBBBXHB","E23RHNDU5","E5BRU6WAE","E4XV0NYS0","E7AN7J5RP","E3T9KQULR","E23RE8G4F","E46RWAPHC","E6GDLMBCM","E3U2DUYG4","E783C7HT4","E8YCM8N9L","E30MTJF0C","E4BGDDU1H","E56KHGV6G","E7U335QS3","E8RLKB40H","E61V1AN6R","E7SV3P9PU","E3ZLD3D42"].includes(t)||!Object(p.a)(10))||(!(!["E27SFGS2W"].includes(t)||![u.EventId.PRQ_TIME_TO_USABLE,u.EventId.PRQ_TIME_TO_VISIBLE].includes(a))||(!![u.EventId.PRQ_TIME_TO_USABLE,u.EventId.PRQ_TIME_TO_VISIBLE].includes(a)||(u.EventId.PRQ_SESSION_FRAME_STATS,Object(p.a)(10)))))}Object(d.a)("prq",{getDesktopElapsedTime:k,getDesktopPreloadTime:S,getElectronInfo:I})},rGr5:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=a("guIn"),o=(a("aK/h"),a("MREy")),c=a("Fdc0"),l=a("6kok"),d=a("wx14"),p=a("7EGn"),u=a("1zbP"),h=a("XHGt"),m=a("4M+g"),b=a("K2Qr"),_=a("2olY"),g=a("Jn9h"),f=a("nNoG"),v=a("cD5Y"),O=a("/m+M"),y=a("ENxx"),C=(a("al7r"),new f.b("calls")),j="channel",E="im",k="mpim",S={type:"none",value:null},I=(e,t,a,n)=>a?"video"===t?n.type===k?C.t("Use {appName} to start a video and audio call with {conversationContext} people",{appName:e,conversationContext:n.value}):n.type===j?C.t("Use {appName} to start a video and audio call with #{conversationContext}",{appName:e,conversationContext:n.value}):n.type===E?C.t("Use {appName} to start a video and audio call with {conversationContext}",{appName:e,conversationContext:n.value}):C.t("Use {appName} to start a video and audio call",{appName:e}):n.type===k?C.t("Use {appName} to start a phone call with {conversationContext} people",{appName:e,conversationContext:n.value}):n.type===j?C.t("Use {appName} to start a phone call with #{conversationContext}",{appName:e,conversationContext:n.value}):n.type===E?C.t("Use {appName} to start a phone call with {conversationContext}",{appName:e,conversationContext:n.value}):C.t("Use {appName} to start a phone call",{appName:e}):"",w="video",T="phone",N={memberPhoneNumber:void 0,memberRealName:void 0,callsApp:{video:[],phone:[]},menuProps:{},onSelected:n.a,appsById:{},skipPhoneApps:!1,conversationContext:S,featureFlagPhoneIntegrationAy11Enabled:!1},P=(e,t,a,n,r,i)=>s.a.createElement(o.b,{dataQa:"".concat(a,"-").concat(i.id),key:"".concat(a,"-").concat(i.id),className:"display_flex flex_direction_row",onSelected:()=>e({appId:i.id})},s.a.createElement("div",{className:"display_flex flex_direction_row"},s.a.createElement("div",{className:"c-menu_item__icon"},s.a.createElement(g.a,{className:"p-classic_nav__call-menu_icon",src:t[i.id].icons?t[i.id].icons.image_32:"",height:"20",width:"20",alt:i.name})),s.a.createElement("div",{"aria-label":I(i.name,a,n,r)},i.name))),A=e=>{var{appsById:t,callsApp:a,featurePhoneIntegration:n,memberPhoneNumber:c,menuProps:l,onSelected:p,skipPhoneApps:h,conversationContext:m}=e,{featurePlatformCallsPhoneIntegrationA11yCopy:b}=Object(O.a)(),_=Object(r.useCallback)(()=>{window.open("zoomphonecall://".concat(c))},[c]);if(!n)return null;var g=!1;if(Object.keys(t).forEach(e=>{Object(u.d)(t[e])&&(g=!0)}),g)return s.a.createElement(o.f,Object(d.a)({width:"auto"},l),[s.a.createElement(v.a,{key:"call_menu_spinner"})]);var f=[];return a.video&&a.video.length>0&&(f.push(s.a.createElement(o.c,{label:C.t("Video & Audio"),key:"video_audio"})),f.push(...a.video.map(P.bind(null,p,t,w,b,m)))),!h&&Object(i.a)(c)&&a.phone&&a.phone.length>0&&(f.push(s.a.createElement(o.d,{key:"phone_separator"})),f.push(s.a.createElement(o.c,{label:C.t("Phone {phone}",{phone:c}),key:"phone"})),f.push(...a.phone.map(P.bind(null,_,t,T,b,m)))),s.a.createElement(o.f,Object(d.a)({width:"auto"},l),f)};A.defaultProps=N;var M=Object(h.b)((e,t)=>{var{channelId:a,memberRealName:n}=t,r=Object(y.d)(e),s=Object(y.b)(e),i=((e,t,a)=>{var n=Object(m.e)(e,t);if(Object(l.Y)(n)&&Object(l.hb)(n))return{type:E,value:a};if(Object(l.pb)(n)){var r=Object(b.f)(e,n.id),s=Object(p.a)(r,"counts.member_count")||0;return{type:k,value:s}}return Object(l.Y)(n)?{type:j,value:Object(l.M)(n)}:a?{type:E,value:a}:S})(e,a,n);return{featurePhoneIntegration:Object(_.b)(e),callsApp:r,appsById:s,conversationContext:i}},null)(A),x={member:{},onMenuItemSelected:n.a,onRenderMenuCallback:n.a,onCloseMenuCallback:n.a,channelId:null};class with_call_menu_WithCallMenu extends r.PureComponent{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this)}renderMenu(e){this.props.onRenderMenuCallback&&this.props.onRenderMenuCallback();var t=Object(c.D)(this.props.member);return s.a.createElement(M,{channelId:this.props.channelId,onSelected:this.props.onMenuItemSelected,memberPhoneNumber:t,memberRealName:Object(c.K)(this.props.member),menuProps:e,skipPhoneApps:Object(l.Y)(this.props.channelId)||!Object(i.a)(t)})}render(){return s.a.createElement(o.e,{onClose:this.props.onCloseMenuCallback,position:"bottom-right",renderMenu:this.renderMenu},this.props.children)}}with_call_menu_WithCallMenu.defaultProps=x;t.a=with_call_menu_WithCallMenu},rqkC:function(e,t,a){},"s/YD":function(e,t,a){"use strict";a.d(t,"a",function(){return N});var n=a("Ff2n"),r=a("wx14"),s=a("vJtL"),i=a("ifKl"),o=a("q1tI"),c=a.n(o),l=a("XHGt"),d=a("TSYQ"),p=a.n(d),u=a("tn36"),h=(a("aK/h"),a("dxEi")),m=a("tbBR"),b=a("4EIq"),_=a("cD5Y"),g=a("533h"),f=a("SAUz"),v=a("VymY"),O=a("/Rx2"),y=a("2jER"),C=a("Smdl"),j=a("quKg"),E=a("Srcy"),k=a("a+Oh"),S=a("peKf"),I=a("SNtu"),w=a("Lev8"),T=a("kcos"),N=(a("JlHJ"),{offsetX:24,offsetY:134}),P=e=>{var t=e&&e.current||e;if(t){var a=Object(s.a)(t.getWrappedInstance)?t.getWrappedInstance():t;if(a)return Object(s.a)(a.focus)?a:void 0}},A={className:void 0,bodyClassName:void 0,flexOrigin:void 0,isEmpty:!1,isOffline:!1,isLoading:!1,onBlur:i.a,onFocus:i.a,renderEmpty:i.a,renderControls:i.a,renderSubtitle:i.a,onOptionsClick:void 0,kbNavOrder:void 0,dataQa:void 0,headerProps:{},userAttentionIsOnChat:!1,composerVisible:!1,focus:void 0,removeFromSectionNavigation:i.a,addToSectionNavigation:i.a,setInitialActiveSection:i.a,clientTheme:"light",isIAP1Enabled:!1};class Flexpane extends c.a.Component{constructor(e){super(e),Object(u.a)(this,["focus","blur","setInitialActiveSection"]),this.flexpaneBodyRef=c.a.createRef(),this.flexpaneHeaderRef=c.a.createRef()}componentDidUpdate(e){var t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(S.a)(t)&&this.props.addToSectionNavigation(),Object(I.a)(t)&&this.props.removeFromSectionNavigation()}setInitialActiveSection(){this.props.setInitialActiveSection()}focusCloseButton(){var e=P(this.flexpaneHeaderRef);e&&e.focus()}focusItemInBody(){var e=P(this.flexpaneBodyRef);if(e){var t=Object(v.a)(e)[0];t&&t.focus()}}focus(){var{isEmpty:e,focus:t,onFocus:a}=this.props;e?this.focusCloseButton():(t?t():this.focusItemInBody(),Object(C.a)()||a())}blur(){document.activeElement.blur(),Object(C.a)()||this.props.onBlur()}isLoading(){var{isLoading:e,isOffline:t}=this.props;return e&&!t}renderBody(){var{isEmpty:e,isOffline:t,renderBody:a,renderEmpty:n}=this.props;return e?this.isLoading()?null:n({isOffline:t}):a()}renderSubtitle(){var{renderSubtitle:e}=this.props,t=e();return t?c.a.createElement("div",{className:"p-flexpane__subtitle","data-qa":"subtitle"},t):null}render(){var{className:e,bodyClassName:t,flexOrigin:a,isEmpty:n,onOptionsClick:s,title:i,viewId:o,kbNavOrder:l,dataQa:d,renderControls:u,headerProps:h,clientTheme:v,isIAP1Enabled:O}=this.props,y=c.a.createElement(m.a,{id:o},c.a.createElement("div",{"data-qa":d,className:p()("p-flexpane",{"p-flexpane--iap1":O},e)},c.a.createElement(g.a,Object(r.a)({ref:this.flexpaneHeaderRef,onOptionsClick:s,renderSecondary:u,clientTheme:v,isIAP1Enabled:O},h),!O&&c.a.createElement(f.a,{flexOrigin:a,size:"medium"}),c.a.createElement("div",{className:"p-flexpane__title_container"},i,this.renderSubtitle())),c.a.createElement("div",{ref:this.flexpaneBodyRef,className:p()("p-flexpane__body",t,"p-flexpane__body--".concat(v),{"p-flexpane__body--empty":n&&!this.isLoading(),"p-flexpane__body--empty_loading":n&&this.isLoading()})},this.isLoading()&&c.a.createElement("div",{className:"p-flexpane__floating_loader","data-qa":"floating_loader"},c.a.createElement(_.a,{size:"medium",noMargin:!0})),this.renderBody())));return Object(C.a)()?y:c.a.createElement(b.a,{component:this,order:l},y)}}Flexpane.defaultProps=A;var M=Object(C.a)()?Object(y.a)(Flexpane,"Flexpane",{index:1}):Flexpane,x=Object(l.b)(e=>({isOffline:!Object(h.c)(e),userAttentionIsOnChat:Object(O.e)(e),composerVisible:(Object(k.a)(e)||"composer_toolbar"===Object(j.c)(e,"composer_toolbar"))&&Object(E.b)(e),clientTheme:Object(w.c)(e),isIAP1Enabled:Object(T.d)(e)}),null,null,{pure:!1})(e=>{var{forwardedRef:t}=e,a=Object(n.a)(e,["forwardedRef"]);return c.a.createElement(M,Object(r.a)({ref:t},a))});t.b=c.a.forwardRef((e,t)=>c.a.createElement(x,Object(r.a)({forwardedRef:t},e)))},s8zD:function(e,t,a){},sI2V:function(e,t,a){},sQIv:function(e,t,a){},sUzI:function(e,t,a){},sYFF:function(e,t,a){e.exports=a.p+"calls@2x-5027823.png"},sk4h:function(e,t,a){"use strict";a.d(t,"b",function(){return c}),a.d(t,"a",function(){return l});var n=a("U/ze"),r=a("fYfO"),s=a("DTfP"),i=a("hOQf"),o=a("8dKT"),c=Object(n.b)(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=Object(s.f)(e,t);return{slice:n,messages:(n?n.timestamps:[]).map(a=>Object(r.a)(e,t,a)).filter(t=>!(Object(o.a)(t.subtype)||Object(i.bb)(t)||Object(i.fb)(t)||Object(i.X)(e,t)||Object(i.wb)(t)||Object(i.sb)(t)||Object(i.qb)(t))).slice(-1*Math.abs(a))}});c.meta={name:"getLastHumanMessages",key:"channelHistoryStoreGetLastChannelMessagesGetLastHumanMessages"};var l=Object(n.b)((e,t)=>c(e,t,1).messages.length>0);l.meta={name:"doesChannelHaveMessages",key:"channelHistoryStoreGetLastChannelMessagesDoesChannelHaveMessages"}},skMg:function(e,t,a){},t5GV:function(e,t,a){},tBeP:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("aK/h"),i=a("dhvi"),o=a("XfeM"),c=a("ifKl"),l=a("fujP"),d=a("TSYQ"),p=a.n(d),u=a("nNoG"),h=a("aolG"),m=a("0f2Y"),b=a("XLFM"),_=a("rJQH"),g=a("P8Y3"),f=a("O0RF"),v=a("Rszm"),O=a("RAhH"),y=a("cD5Y"),C=(a("g0Ht"),a("rePB")),j=a("bPB8"),E=a("XHGt"),k=a("tn36"),S=a("81jb"),I=a("4qCO"),w=a("4M+g"),T=a("7oqf"),N=a("6kok"),P=a("vmJv"),A=a("G4ux"),M=a("Qrgz"),x=a("od5y"),R=a("vPEJ"),D=new u.b("app_management_modal");class app_channel_list_item_AppChannelListItem extends n.PureComponent{constructor(e){super(e),this.handleRemove=this.handleRemove.bind(this)}handleRemove(){var{channel:{id:e},onRemove:t}=this.props;t(e)}render(){var{channel:e,"data-qa":t,canBeRemovedFromChannel:a}=this.props;return r.a.createElement("li",{className:"p-app_management_modal__channel_list_item","data-qa":t},r.a.createElement(R.a,{className:"flex_one",channel:e,inheritPresenceIconSize:!0}),a&&r.a.createElement(b.c,{className:"p-app_management_modal__channel_list_item_remove position_relative","aria-label":D.t("Remove app from channel"),onClick:this.handleRemove,"data-qa":"".concat(t,"_remove")},r.a.createElement(x.b,{inline:!0,type:"times-circle"})))}}app_channel_list_item_AppChannelListItem.displayName="AppChannelListItem",app_channel_list_item_AppChannelListItem.defaultProps={"data-qa":"app_channel_list_item",canBeRemovedFromChannel:!1};var F=app_channel_list_item_AppChannelListItem,L=a("wx14"),U=a("Ff2n"),B=a("kX2h"),H=new u.b("app_management_modal"),W=220,q=36,G=28,K=200;class app_channel_list_selector_AppChannelListSelector extends n.PureComponent{constructor(e){super(e),Object(k.a)(this,["buildChannelOptions","optionsFetcher","setSelectorReference","scrollSelectorIntoView"])}componentDidMount(){if(this.selector){var{focusSelectInput:e}=this.selector;e&&e()}}componentWillUnmount(){clearTimeout(this.mobileKeyboardTimeout)}setSelectorReference(e){this.selector=e}buildChannelOption(e){return{label:r.a.createElement(R.a,{className:"p-app_management_modal__channel_selector_item",channel:e,inheritPresenceIconSize:!0}),value:e.id}}buildChannelOptions(e){return{options:e.map(this.buildChannelOption)}}scrollSelectorIntoView(){if(this.selector){var{select:e}=this.selector;e&&e.wrapper&&(this.mobileKeyboardTimeout=setTimeout(()=>{e.wrapper.scrollIntoView()},this.props.isMobile?K:0))}}optionsFetcher(e){var{forExclusions:t,serviceId:a}=this.props;return this.props.searchChannelsForApp({query:e,forExclusions:t,serviceId:a}).then(this.buildChannelOptions).tap(this.scrollSelectorIntoView)}render(){var e=this.props,{serviceId:t,forExclusions:a,searchChannelsForApp:n,isMobile:s}=e,i=Object(U.a)(e,["serviceId","forExclusions","searchChannelsForApp","isMobile"]),o=s?q:G;return r.a.createElement(B.a,Object(L.a)({},i,{innerRef:this.setSelectorReference,optionsFetcher:this.optionsFetcher,prefetchOptions:!0,className:"p-app_management_modal__channel_selector_input",isAlwaysOpen:!0,optionsListWidth:W,optionsRowHeight:o,placeholder:H.t("Find a channel"),type:"short",usePlaceholderOption:!1,wrapperClassName:"p-app_management_modal__channel_selector"}))}}var V={searchChannelsForApp:T.j};app_channel_list_selector_AppChannelListSelector.defaultProps={forExclusions:!1,isMobile:!1};var z=Object(E.b)(null,V)(app_channel_list_selector_AppChannelListSelector);function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach(function(t){Object(C.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var X=new u.b("app_management_modal");class app_channel_list_AppChannelList extends n.PureComponent{constructor(e){super(e),this.state={showChannelSelector:!1},Object(k.a)(this,["handleAddChannel","toggleChannelSelector"])}componentWillUnmount(){clearTimeout(this.timeout)}setSelectorInputReference(e){this.selectorInput=e}toggleChannelSelector(){this.setState(e=>({showChannelSelector:!e.showChannelSelector}))}handleAddChannel(e){var{onAddChannel:t}=this.props;t(e),this.toggleChannelSelector()}renderHiddenChannelCountText(){var{channels:e,hiddenChannelCount:t}=this.props;return e.length>0?X.t("...and {hiddenChannelCount, plural, =1 {# other private conversation} other {# other private conversations}}",{hiddenChannelCount:t}):X.t("{hiddenChannelCount, plural, =1 {# private conversation} other {# private conversations}}",{hiddenChannelCount:t})}renderListItems(){var{channels:e,emptyListText:t,hiddenChannelCount:a,canBeRemovedFromChannel:n,onRemoveChannel:s,"data-qa":i}=this.props;if(0===e.length&&0===a)return r.a.createElement("li",{className:"p-app_management_modal__channel_list_item sk_foreground_high","data-qa":"".concat(i,"_empty_message")},t);var o=Object(j.a)(e).map(e=>r.a.createElement(F,{key:e.id,channel:e,canBeRemovedFromChannel:n,onRemove:s,"data-qa":"".concat(i,"_channel_").concat(e.id)}));return a>0&&o.push(r.a.createElement("li",{key:"0",className:"p-app_management_modal__channel_list_item","data-qa":"".concat(i,"_hidden_channels_message")},this.renderHiddenChannelCountText())),o}renderChannelSelector(){var{buttonText:e,"data-qa":t,isMobile:a,forExclusions:n,serviceId:s}=this.props,{showChannelSelector:i}=this.state;return r.a.createElement("div",{className:"position_relative"},r.a.createElement(b.d,{className:"p-app_management_modal__channel_list_add",type:"outline",size:"small",onClick:this.toggleChannelSelector,"data-qa":"".concat(t,"_button")},e),i&&r.a.createElement(z,{onChange:this.handleAddChannel,onOutsideClick:this.toggleChannelSelector,"data-qa":"".concat(t,"_selector"),isMobile:a,forExclusions:n,serviceId:s}))}render(){var{headerText:e,"data-qa":t}=this.props;return r.a.createElement(S.a,{className:"p-app_management_modal__card","data-qa":t},r.a.createElement(S.b,{className:"p-app_management_modal__card_header"},r.a.createElement("strong",{className:"flex_one align_self_center margin_right_50"},e),this.renderChannelSelector()),r.a.createElement(S.c,{className:"no_margin no_padding"},r.a.createElement("ul",{className:"no_margin p-app_management_modal__channel_list"},this.renderListItems())))}}var J=(e,t)=>Object(I.a)(Object(N.v)(e),Object(N.v)(t)),Z=(e,t)=>Object.keys(e).map(e=>Object(w.e)(t,e)).filter(e=>!Object(N.X)(e)&&!Object(N.Mb)(e)).sort(J);app_channel_list_AppChannelList.defaultProps={channels:[],hiddenChannelCount:0,"data-qa":"app_channel_list",isMobile:!1,forExclusions:!1,canBeRemovedFromChannel:!1};var $=Object(E.b)((e,t)=>{var{forExclusions:a,serviceId:n,memberId:r}=t,{exclusionIds:s,hiddenChannelCount:i,privateChannelIds:o,publicChannelIds:c}=Object(T.e)(e,n);if(a)return{channels:Z(s,e)};var l=Object(P.a)(e),d=Object(A.d)(e,r),p=Object(M.r)(e,l,d);return{channels:Z(Q({},c,{},o),e),hiddenChannelCount:i,canBeRemovedFromChannel:p}})(app_channel_list_AppChannelList),ee=a("hbEN"),te=a("uQWY"),ae=e=>r.a.createElement(n.Fragment,null,r.a.createElement(y.a,{size:"small",className:"c-infinite_spinner--inline"}),r.a.createElement("span",{className:"c-infinite_spinner__loading_msg"},e.children)),ne=a("qPro"),re=a("mIgp"),se=a("3dqR"),ie=a("MREy"),oe=a("t85p"),ce=a("w6pt"),le=a("ZYn4"),de=a("Fdc0"),pe=new u.b("app_management_modal");class app_member_name_AppMemberName extends n.PureComponent{renderIsYou(){return this.props.isYou?r.a.createElement("span",null,pe.t("(you)")):null}renderPrimaryName(){return r.a.createElement("span",{className:"p-app_management_modal__member_list_primary_name"},this.props.memberPrimaryName," ",this.renderIsYou())}renderSecondaryName(){var{memberSecondaryName:e}=this.props;return e?r.a.createElement("span",{className:"p-app_management_modal__member_list_secondary_name"},e):null}render(){return this.props.isUnknown?r.a.createElement(ce.a,{type:"unknown"}):this.props.isNonExistent?r.a.createElement(ce.a,{type:"non-existent"}):r.a.createElement("span",{className:"p-app_member_name"},this.renderPrimaryName(),r.a.createElement(le.a,{memberId:this.props.memberId}),this.renderSecondaryName())}}app_member_name_AppMemberName.defaultProps={memberSecondaryName:""};var ue=Object(E.b)(function(e,t){var{memberId:a}=t,n=Object(A.d)(e,a);return{isYou:Object(oe.d)(e)===a,isUnknown:Object(de.Ob)(n),isNonExistent:Object(de.Bb)(n),memberPrimaryName:Object(de.V)(e,n,!1,!1),memberSecondaryName:Object(de.M)(e,n)}})(app_member_name_AppMemberName),he=new u.b("app_management_modal"),me={"data-qa":"app_member_list_item",onRevokeButtonClick:c.a,onViewUserPermissionsClick:c.a};class app_member_list_item_AppMemberListItem extends n.PureComponent{constructor(e){super(e),Object(k.a)(this,["handleViewUserPermissionsClick","renderMenu"])}handleViewUserPermissionsClick(){var{onViewUserPermissionsClick:e,userId:t,scopes:a}=this.props;e(t,a)}renderAvatar(){var{userId:e}=this.props;return r.a.createElement(se.c,{className:"p-app_management_modal__member_list_avatar",userId:e,size:36,isInteractive:!1,showCard:!1,showTooltip:!1,tabIndex:"-1"})}renderUserName(){var{userId:e}=this.props;return r.a.createElement(ue,{memberId:e})}renderScopeInfo(){var{scopes:e}=this.props;return r.a.createElement("div",null,r.a.createElement(m.a,{className:"p-app_management_modal__member_list_scope_info","data-qa":"".concat(this.props["data-qa"],"_permissions_link"),onClick:this.handleViewUserPermissionsClick},he.t("{scopeCount, plural, =1 {# permission} other {# permissions}} granted",{scopeCount:e.length})))}renderMenu(e){var{isYou:t,onRevokeButtonClick:a}=this.props;return r.a.createElement(ie.f,e,r.a.createElement(ie.b,{"data-qa":"".concat(this.props["data-qa"],"_menu_permissions"),onSelected:this.handleViewUserPermissionsClick,label:he.t("View permissions")}),t&&r.a.createElement(ie.b,{"data-qa":"".concat(this.props["data-qa"],"_menu_revoke"),onSelected:a,label:he.t("Revoke authorization")}))}renderMenuTrigger(){return r.a.createElement(ie.e,{renderMenu:this.renderMenu,position:"bottom-right"},r.a.createElement(b.c,{"data-qa":"".concat(this.props["data-qa"],"_menu_trigger")},r.a.createElement(x.b,{type:"ellipsis"})))}render(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"p-app_management_modal__member_list_gutter"},this.renderAvatar()),r.a.createElement("div",{className:"p-app_management_modal__member_list_content"},this.renderUserName(),this.renderScopeInfo()),this.renderMenuTrigger())}}app_member_list_item_AppMemberListItem.displayName="AppMemberListItem",app_member_list_item_AppMemberListItem.defaultProps=me;var be=Object(E.b)((e,t)=>{var{userId:a}=t;return{isYou:Object(oe.d)(e)===a}})(app_member_list_item_AppMemberListItem),_e=new u.b("app_management_modal"),ge={"data-qa":"app_member_list",memberQuery:"",modalBodyRef:void 0,onAppSearchUsers:c.a,onRevokeButtonClick:c.a,onViewUserPermissionsClick:c.a,totalResultsCount:0,userCount:0,useVirtualizedList:!0},fe=300,ve=5;class app_member_list_AppMemberList extends n.PureComponent{constructor(e){super(e),Object(k.a)(this,["handleScroll","renderListItem","setListRef","setMemberQuery","handleScrollToTopButtonClick"]),this.state={searchValue:"",showScrollToTopButton:!1},this.debouncedFetchMemberList=Object(ee.a)(this.fetchMemberList,fe)}componentDidMount(){this.fetchMemberList()}getMemberListKeys(){var{memberResults:e,isLoading:t}=this.props,a=e.map(e=>{var{user_id:t}=e;return t});return t?a.concat("loading"):a}setListRef(e){this.list=e}setMemberQuery(e){var{target:{value:t}}=e;this.setState(()=>({searchValue:t})),this.debouncedFetchMemberList(t)}fetchMemberList(e,t){var{onAppSearchUsers:a,serviceId:n}=this.props;a({serviceId:n,query:e,nextPage:t})}handleScroll(e){var{scrollTop:t}=e,{isLoading:a,memberResults:n,totalResultsCount:r,memberQuery:s}=this.props,{showScrollToTopButton:i}=this.state;if(t>0&&!i?this.setState(()=>({showScrollToTopButton:!0})):0===t&&i&&this.setState(()=>({showScrollToTopButton:!1})),!a){var o=n.length;if(o!==r)o-(this.list&&this.list.getVisibleRange&&this.list.getVisibleRange().end||0)>ve||this.fetchMemberList(s,!0)}}handleScrollToTopButtonClick(){this.props.modalBodyRef.scrollTo(0,0)}renderHeader(){var{memberQuery:e,totalResultsCount:t,userCount:a}=this.props,n=_e.t("Member Results");return e?t&&(n=_e.t("{totalResultsCount} Member Results",{totalResultsCount:t})):n=_e.t("{userCount, plural, =1 {# Member} other {# Members}}",{userCount:a}),r.a.createElement(S.b,{className:"p-app_management_modal__card_header"},r.a.createElement("strong",{className:"flex_one align_self_center margin_right_50","data-qa":"".concat(this.props["data-qa"],"_count")},n),r.a.createElement(ne.a,{className:"p-app_management_modal__member_search","data-qa":"".concat(this.props["data-qa"],"_search"),icon:"search",onChange:this.setMemberQuery,placeholder:_e.t("Search members"),value:this.state.searchValue}))}renderListItem(e){var{memberResults:t}=this.props;if(e===t.length)return this.renderLoadingItem();var a=t[e];return this.renderMemberItem(a)}renderMemberItem(e){var{onRevokeButtonClick:t,onViewUserPermissionsClick:a}=this.props,n="".concat(this.props["data-qa"],"_item_").concat(e.user_id);return r.a.createElement("li",{key:e.user_id,className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--member","data-qa":n},r.a.createElement(be,{"data-qa":n,userId:e.user_id,scopes:e.scopes,onRevokeButtonClick:t,onViewUserPermissionsClick:a}))}renderLoadingItem(){var{memberQuery:e}=this.props;return r.a.createElement("li",{key:"loading",className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--loading","data-qa":"".concat(this.props["data-qa"],"_loading")},r.a.createElement(ae,null,e?_e.t("Loading member results\u2026"):_e.t("Loading members\u2026")))}renderEmptyItem(){return r.a.createElement("li",{key:"empty_message",className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--empty_message","data-qa":"".concat(this.props["data-qa"],"_empty_message")},_e.t("No matching members found."))}renderScrollToTopButton(){return this.state.showScrollToTopButton?r.a.createElement(b.d,{type:"outline",size:"small",className:"p-app_management_modal__member_list_scroll_button",onClick:this.handleScrollToTopButtonClick,"data-qa":"".concat(this.props["data-qa"],"_scroll_button")},r.a.createElement(x.b,{type:"arrow-up-medium"}),"\xa0",_e.t("Back to top")):null}renderListItems(){var{totalResultsCount:e,isLoading:t,modalBodyRef:a,useVirtualizedList:n}=this.props;return e||t?n?r.a.createElement(te.a,{scrollElement:a,onScroll:this.handleScroll},e=>{var{height:t,isScrolling:n,onChildScroll:s,scrollTop:i}=e;return r.a.createElement(re.a,{height:t,rowRenderer:this.renderListItem,keys:this.getMemberListKeys(),onScroll:s,isScrolling:n,ref:this.setListRef,scrollTop:i,scrollElement:a})}):this.getMemberListKeys().map((e,t)=>this.renderListItem(t)):this.renderEmptyItem()}renderBody(){return r.a.createElement(S.c,{className:"no_margin no_padding"},r.a.createElement("ul",{className:"p-app_management_modal__card_list"},this.renderListItems(),this.renderScrollToTopButton()))}render(){var{"data-qa":e}=this.props;return r.a.createElement(S.a,{className:"p-app_management_modal__card","data-qa":e},this.renderHeader(),this.renderBody())}}app_member_list_AppMemberList.defaultProps=ge;var Oe=Object(E.b)((e,t)=>{var{serviceId:a}=t,n=Object(T.f)(e,a);if(!n)return{};var{isLoading:r,query:s,results:i,total:o}=n;return{isLoading:r,memberQuery:s,memberResults:i,totalResultsCount:o}})(app_member_list_AppMemberList),ye=a("uI5u"),Ce=new u.b("app_management_modal"),je={alertBannerType:void 0,channelId:void 0,onClose:c.a},Ee=e=>{var t,{alertBannerType:a,appName:n,channelId:s,onClose:i}=e;if(!a)return null;var o="error",c=s?r.a.createElement(R.a,{channelId:s,inline:!0}):null;switch(a){case"addSuccess":t=Ce.rt("{appName} was added to {channelName}",{appName:n,channelName:c}),o="success";break;case"addError":t=Ce.rt("Adding {appName} to {channelName} failed. Try again?",{appName:n,channelName:c});break;case"removeSuccess":t=Ce.rt("{appName} was removed from {channelName}",{appName:n,channelName:c}),o="success";break;case"removeError":t=Ce.rt("Removing {appName} from {channelName} failed. Try again?",{appName:n,channelName:c});break;case"wildcardAddError":t=Ce.rt("Adding {appName} to all public channels failed. Try again?",{appName:n,channelName:c});break;case"wildcardRemoveError":t=Ce.rt("Removing {appName} from all public channels failed. Try again?",{appName:n,channelName:c});break;case"uninstallError":t=Ce.rt("Uninstalling {appName} failed. Try again?",{appName:n});break;case"revokeSuccess":t=Ce.rt("Access successfully revoked."),o="success";break;case"revokeError":t=Ce.rt("Revoking access to your member data failed. Try again?");break;default:t=Ce.t("Hmm, something went wrong. Try again?")}return r.a.createElement(ye.a,{type:o,topOffset:60,"data-qa":"app_management_modal_alert_banner",showCloseButton:!1,autoFadeout:!0,onClose:i},t)};Ee.defaultProps=je;var ke=Ee,Se=(a("TBaU"),new u.b("app_management_modal")),Ie={isLoading:!0,workspaceScopeInfo:[],channelScopeInfo:[],userScopeInfo:[],currentUserScopeInfo:[],userCount:0,appHomepageUrl:void 0,appSupportUrl:void 0,showAppDirectoryLink:!0,appIconLarge:void 0,showWildcardToggle:!0,alertBannerType:void 0,activeDialogChannelId:void 0,wildcardEnabled:!1,workspaceName:void 0,userIsAppmin:!1,isMobile:!1,onClose:c.a,onAppSearchUsers:c.a,onSidebarMenuLinkClick:c.a,hasError:!1},we=-5;class app_management_modal_AppManagementModal extends n.PureComponent{constructor(e){super(e),this.setModalBodyRef=this.setModalBodyRef.bind(this)}setModalBodyRef(e){this.modalBodyRef=e}renderUserAccessSidebarMenuItem(){var{currentUserScopeInfo:e,userCount:t,userIsAppmin:a,onSidebarMenuItemClick:n}=this.props;return(a?0===t:Object(l.a)(e))?null:r.a.createElement(_.a,{itemId:"user",onClick:n,"data-qa":"app_management_modal_user_access_link"},a?Se.t("Member data access",{fallbackHash:"54485606f08a3c5d7e73fe0730e62de7b3fe9ea2"}):Se.t("Access to your data",{fallbackHash:"7284a962539fd4edca8ba9beccf1501937e2f49e"}))}renderSidebarMenu(){var{activeSection:e,appId:t,appHomepageUrl:a,appSupportUrl:n,showAppDirectoryLink:s,onSidebarMenuItemClick:i,onSidebarMenuLinkClick:o}=this.props;return r.a.createElement(_.b,{activeItemId:e},r.a.createElement(_.a,{itemId:"channel",onClick:i,"data-qa":"app_management_modal_channel_access_link"},Se.t("Channel access",{fallbackHash:"93f2f019560a491cf643b739cc7027f2a62c1d38"})),r.a.createElement(_.a,{itemId:"workspace",onClick:i,"data-qa":"app_management_modal_workspace_access_link"},Se.t("Workspace access",{fallbackHash:"a976c398ad6ec00251f8f90209b8393dd1b68b3a"})),this.renderUserAccessSidebarMenuItem(),a||s||n?r.a.createElement(_.a,{isDivider:!0}):null,a&&r.a.createElement(_.a,{itemId:"homepage",onClick:o,isExternalLink:!0,href:a,"data-qa":"app_management_modal_homepage_link"},Se.t("App homepage",{fallbackHash:"ee2dbe71c27837ecd0a10d866992e1b3ff0d9b2f"})),s&&r.a.createElement(_.a,{itemId:"directory",onClick:o,isExternalLink:!0,href:"/apps/".concat(t,"?utm_source=in-prod&utm_medium=inprod-view_in_app_directory-user_profile-click"),"data-qa":"app_management_modal_directory_link"},Se.t("View in App Directory")),n&&r.a.createElement(_.a,{itemId:"support",onClick:o,isExternalLink:!0,href:n,"data-qa":"app_management_modal_support_link"},Se.t("Support for this App")))}renderChannelAccessSection(){var{activeSection:e,appName:t,channelScopeInfo:a,onWorkspaceSectionLinkClick:n,onExclusionListAdd:s,onExclusionListRemove:i,onGrantListAdd:o,onGrantListRemove:c,wildcardEnabled:d,onWildcardCheckboxChange:p,userIsAppmin:h,showWildcardToggle:b,isMobile:_,serviceId:y}=this.props;if("channel"!==e)return null;var C=Object(u.q)(t),j=r.a.createElement("h3",null,Se.t("What can {appName} do in a channel?",{appName:C}));if(Object(l.a)(a)){var E=Se.rt("This app can\u2019t be added to individual channels \u2014 it has access to your entire workspace. Check <Link>Workspace Access</Link> for more.",null,e=>{var{text:t}=e;return r.a.createElement(m.a,{onClick:n,"data-qa":"app_management_modal_empty_channel_section_link"},t)});return r.a.createElement("div",null,j,r.a.createElement("p",{className:"margin_top_50 sk_foreground_max"},E))}var k=r.a.createElement(v.a,{className:"p-app_management_modal__wildcard_checkbox",checked:d,onChange:p,disabled:!h,"data-qa":"app_management_modal_wildcard_checkbox"});return r.a.createElement("div",null,r.a.createElement("div",null,j,r.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},Se.t("In channels it\u2019s added to, {appName} can:",{appName:C})),r.a.createElement(g.a,{scopeInfo:a,"data-qa":"app_management_modal_channel_scope_info"})),r.a.createElement("div",{className:"margin_top_250"},r.a.createElement("h3",null,Se.t("Which channels can {appName} access?",{appName:C})),b&&r.a.createElement("div",{className:"margin_top_50"},r.a.createElement(f.a,{text:Se.t("All public channels"),cursor:"pointer",type:"inline",subtext:Se.t("{appName} will join all public channels, in addition to other conversations it\u2019s added to.",{appName:C})},h?k:r.a.createElement(O.c,{offsetX:we,tip:Se.t("Only an app admin can change this setting."),"data-qa":"app_management_modal_wilcard_checkbox_tooltip"},r.a.createElement("span",null,k)))),d&&r.a.createElement($,{isMobile:_,headerText:Se.t("Excluded Public Channels"),buttonText:Se.t("Add Excluded Channel"),emptyListText:Se.t("No public channels excluded."),onAddChannel:s,onRemoveChannel:i,"data-qa":"app_management_modal_exclusion_list",serviceId:y,forExclusions:!0}),r.a.createElement($,{isMobile:_,headerText:Se.t("{appName} was individually added to:",{appName:C}),buttonText:Se.t("Add App to channel",{fallbackHash:"b15a7b87166cf757534bf619b95f1e9b49b6f92a"}),emptyListText:Se.t("{appName} has not been individually added to any channels.",{appName:C}),onAddChannel:o,onRemoveChannel:c,"data-qa":"app_management_modal_grant_list",serviceId:y})))}renderWorkspaceAccessSection(){var{activeSection:e,appName:t,workspaceName:a,workspaceScopeInfo:n}=this.props;if("workspace"!==e)return null;var s=Object(u.q)(t),i=Object(u.q)(a);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",null,Se.t("What can {appName} do in this workspace?",{appName:s})),r.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},Se.t("On {workspaceName}, {appName} can:",{appName:s,workspaceName:i})),r.a.createElement(g.a,{scopeInfo:n,"data-qa":"app_management_modal_workspace_scope_info"})),r.a.createElement("div",{className:"margin_top_250"},r.a.createElement("h3",null,Se.t("Uninstall {appName}",{appName:s})),r.a.createElement("p",{className:"margin_top_50 margin_bottom_100"},Se.t("Remove this app from the {workspaceName} workspace and revoke all access and authorizations.",{workspaceName:i})),this.renderUninstallButton()))}renderAppminUserAccessSection(){var{activeSection:e,appName:t,serviceId:a,userCount:n,userScopeInfo:s,workspaceName:i,onAppSearchUsers:o,onMemberListRevokeClick:c,onViewUserPermissionsClick:d}=this.props;if("user"!==e||0===n||Object(l.a)(s))return null;var p=Object(u.q)(t),h=Se.t("{workspaceName} members have allowed {appName} to:",{appName:p,workspaceName:Object(u.q)(i)});return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",null,Se.t("What can {appName} do with member data?",{appName:p})),r.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},h),r.a.createElement(g.a,{scopeInfo:s,"data-qa":"app_management_modal_member_appmin_scope_info"})),r.a.createElement("div",{className:"margin_top_250"},r.a.createElement("h3",null,Se.t("Which members have authorized {appName} to access their data?",{appName:p})),r.a.createElement(Oe,{modalBodyRef:this.modalBodyRef,onAppSearchUsers:o,onRevokeButtonClick:c,onViewUserPermissionsClick:d,serviceId:a,userCount:n})))}renderUserAccessSection(){var{activeSection:e,appName:t,currentUserScopeInfo:a,onRevokeButtonClick:n}=this.props;if("user"!==e||Object(l.a)(a))return null;var s=Object(u.q)(t);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",null,Se.t("What can {appName} do with your data?",{appName:s})),r.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},Se.t("You\u2019ve allowed {appName} to:",{appName:s,fallbackHash:"7313b20011628c3948a6a709c3e227ae089e2c81"})),r.a.createElement(g.a,{scopeInfo:a,"data-qa":"app_management_modal_member_scope_info"})),r.a.createElement("div",{className:"margin_top_250"},r.a.createElement("h3",null,Se.t("Revoke access")),r.a.createElement("p",{className:"margin_top_50 margin_bottom_100"},Se.t("{appName} will no longer be able to access your data or take actions for you.",{appName:s})),r.a.createElement(b.d,{"data-qa":"app_management_modal_revoke_button",type:"outline",onClick:n},Se.t("Revoke"))))}renderUninstallButton(){var{userIsAppmin:e,onUninstallButtonClick:t}=this.props;return r.a.createElement("div",null,r.a.createElement(b.d,{type:"outline",disabled:!e,onClick:t,"data-qa":"app_management_modal_uninstall_button"},Se.t("Uninstall App")),!e&&r.a.createElement("span",{className:"margin_left_100 sk_foreground_max"},Se.t("Only an app admin can uninstall this app.")))}renderAlertBanner(){var{appName:e,activeDialogChannelId:t,alertBannerType:a,onAlertBannerClose:n}=this.props;return a?r.a.createElement(ke,{alertBannerType:a,appName:e,channelId:t,onClose:n}):null}renderModalContents(){var{isLoading:e,userIsAppmin:t}=this.props;return e?r.a.createElement(y.a,null):r.a.createElement(n.Fragment,null,this.renderAlertBanner(),r.a.createElement("div",{className:"p-app_management_modal__sidebar_container"},this.renderSidebarMenu()),r.a.createElement("div",{className:"p-app_management_modal__content_container"},this.renderChannelAccessSection(),this.renderWorkspaceAccessSection(),t?this.renderAppminUserAccessSection():this.renderUserAccessSection()))}render(){var{appIconLarge:e,appName:t,hasError:a,isMobile:n,onClose:s}=this.props;if(a)return null;var i=t?Se.t("{appName} Settings",{appName:Object(u.q)(t)}):t;return r.a.createElement(h.a,{onCancel:s,showCancelButton:!1,showGoButton:!1,title:i,modalClasses:p()("p-app_management_modal",{"p-app_management_modal--mobile":n}),modalBodyOpenClassName:"p-app_management_modal__ReactModal__Body--open",position:"fixed",withHeader:!0,headerImage:e,setBodyRef:this.setModalBodyRef},this.renderModalContents())}}app_management_modal_AppManagementModal.defaultProps=Ie;var Te=app_management_modal_AppManagementModal,Ne=a("syB0"),Pe=a("7EGn"),Ae=a("qafc"),Me=a("dCAd"),xe=a("ns4K"),Re=a("1hAG"),De=a("1zbP"),Fe=a("V/As"),Le=a("EOYu"),Ue=a("h9PG"),Be=a("5mKg"),He=a("NV5S"),We=a("1Oc4"),qe=a("f8fv"),Ge=a("HOkk"),Ke=new u.b("app_management_modal"),Ve={workspaceName:void 0,title:void 0,workspaceAccessCheckboxText:void 0,channelAccessCheckboxText:void 0,onCancel:c.a};class app_uninstall_dialog_AppUninstallDialog extends n.PureComponent{constructor(e){super(e),this.state={workspaceConfirmChecked:!1,channelConfirmChecked:!e.channelAccessCheckboxText,confirmInProgress:!1},Object(k.a)(this,["handleConfirm","handleCheckboxChange"])}handleConfirm(){var{onGo:e}=this.props;return this.setState(()=>({confirmInProgress:!0})),e()}handleCheckboxChange(e){var{name:t,checked:a}=e.target;this.setState(()=>({["".concat(t,"Checked")]:a}))}renderCheckbox(e,t){return r.a.createElement(f.a,{type:"inline",cursor:"pointer",text:t},r.a.createElement(v.a,{onChange:this.handleCheckboxChange,name:e,isRequired:!0,"data-qa":"app_uninstall_dialog_".concat(Object(qe.a)(e),"_checkbox")}))}renderWorkspaceAccessConfirmCheckbox(){var{appName:e,workspaceName:t,workspaceAccessCheckboxText:a}=this.props,n=a||Ke.rt("I understand members of the <strong>{workspaceName}</strong> workspace will no longer be able to use {appName}.",{appName:e,workspaceName:t});return this.renderCheckbox("workspaceConfirm",n)}renderChannelAccessConfirmCheckbox(){var{channelAccessCheckboxText:e}=this.props;return e?this.renderCheckbox("channelConfirm",e):null}renderTitle(){var{appName:e,workspaceName:t,title:a}=this.props;return a||Ke.t("Uninstall {appName} from {workspaceName}?",{appName:Object(u.q)(e),workspaceName:Object(u.q)(t)})}render(){var{onCancel:e,appIcon:t}=this.props,{workspaceConfirmChecked:a,channelConfirmChecked:n,confirmInProgress:s}=this.state,i=!(a&&n)||s;return r.a.createElement(Ge.a,{contentLabel:this.renderTitle(),title:this.renderTitle(),titleImage:t,truncateTitle:!1,goButtonText:Ke.t("Uninstall App"),onGo:this.handleConfirm,goButtonType:"danger",goButtonIsDisabled:i,goButtonIsPending:s,showCancelButton:!0,onCancel:e,"data-qa":"app_uninstall_dialog"},this.renderWorkspaceAccessConfirmCheckbox(),this.renderChannelAccessConfirmCheckbox())}}app_uninstall_dialog_AppUninstallDialog.displayName="AppUninstallDialog",app_uninstall_dialog_AppUninstallDialog.defaultProps=Ve;var ze=app_uninstall_dialog_AppUninstallDialog,Ye=a("negh"),Qe=a("kOzZ"),Xe=a("AE1P"),Je=new u.b("app_management_modal"),Ze={onCancel:c.a};class app_wildcard_dialog_AppWildcardDialog extends n.PureComponent{constructor(e){super(e),this.state={confirmInProgress:!1},this.handleConfirm=this.handleConfirm.bind(this)}handleConfirm(){var{onGo:e}=this.props;return this.setState(()=>({confirmInProgress:!0})),e()}render(){var e,t,{appName:a,wildcardEnabled:n,onCancel:s}=this.props,{confirmInProgress:i}=this.state,o=Object(u.q)(a);return n?(e={title:Je.t("Remove {appName} from all public channels?",{appName:o}),goButtonText:Je.t("Remove"),goButtonType:"danger","data-qa":"app_wildcard_disable_dialog"},t=Je.t("{appName} will only be able to post in channels it\u2019s individually added to.",{appName:o})):(e={title:Je.t("Allow {appName} access to all public channels?",{appName:o}),goButtonText:Je.t("Allow"),"data-qa":"app_wildcard_enable_dialog"},t=Je.t("{appName} will be added to all public channels (quietly, of course).",{appName:o})),r.a.createElement(Ge.a,Object(L.a)({showCancelButton:!0,contentLabel:e.title,truncateTitle:!1,onGo:this.handleConfirm,onCancel:s,goButtonIsPending:i,goButtonIsDisabled:i},e),r.a.createElement("p",{className:"margin_bottom_0"},t))}}app_wildcard_dialog_AppWildcardDialog.defaultProps=Ze,app_wildcard_dialog_AppWildcardDialog.displayName="AppWildcardDialog";var $e=app_wildcard_dialog_AppWildcardDialog,et=new u.b("app_management_modal"),tt={onCancel:c.a};class app_revoke_dialog_AppRevokeDialog extends n.PureComponent{constructor(e){super(e),this.state={confirmInProgress:!1},this.handleConfirm=this.handleConfirm.bind(this)}handleConfirm(){var{onGo:e}=this.props;return this.setState(()=>({confirmInProgress:!0})),e()}render(){var{appName:e,onCancel:t,workspaceName:a}=this.props,{confirmInProgress:n}=this.state,s=et.t("Revoke access to your member data?"),i=et.t("{appName} will remain installed on {workspaceName}, but will no longer be able to access your member data.",{appName:Object(u.q)(e),workspaceName:Object(u.q)(a)});return r.a.createElement(Ge.a,{"data-qa":"app_revoke_dialog",goButtonIsDisabled:n,goButtonIsPending:n,goButtonText:et.t("Revoke"),goButtonType:"danger",onCancel:t,onGo:this.handleConfirm,showCancelButton:!0,title:s,truncateTitle:!1},r.a.createElement("p",{className:"margin_bottom_0"},i))}}app_revoke_dialog_AppRevokeDialog.defaultProps=tt,app_revoke_dialog_AppRevokeDialog.displayName="AppRevokeDialog";var at=app_revoke_dialog_AppRevokeDialog,nt=a("CpTu"),rt=new u.b("app_management_modal"),st={currentUserScopeInfo:[],isMemberCurrentUser:!1,memberName:void 0,onGo:c.a,onClose:c.a,scopes:[],userScopeInfo:[]},it={memberId:s.default.string.isRequired},ot=(e,t)=>t.map(t=>((e,t)=>Object(nt.a)(e,e=>e.scopes[0]===t))(e,t)),ct=e=>{var t,{appName:a,currentUserScopeInfo:n,isMemberCurrentUser:s,memberName:i,onGo:o,onClose:c,scopes:l,userScopeInfo:d}=e;t=s?n:ot(d,l);var p=Object(u.q)(a),h=s?rt.t("You\u2019ve allowed {appName} to:",{appName:p,fallbackHash:"7313b20011628c3948a6a709c3e227ae089e2c81"}):rt.t("{memberName} has allowed {appName} to:",{appName:p,memberName:Object(u.q)(i)});return r.a.createElement(Ge.a,{cancelText:rt.t("Done"),"data-qa":"app_user_permissions_dialog",goButtonType:"outline",goButtonText:rt.t("Revoke All"),showGoButton:s,reverseButtons:!0,truncateTitle:!1,onGo:o,onCancel:c,title:h},r.a.createElement("div",{className:"margin_bottom_400"},r.a.createElement(g.a,{scopeInfo:t})))};ct.defaultProps=st;var lt=Object(E.b)((e,t)=>{var{memberId:a}=t;return{isMemberCurrentUser:a===Object(oe.d)(e),memberName:Object(de.W)(e,a)}})(ct);lt.propTypes=it;var dt=lt;function pt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ut(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(a),!0).forEach(function(t){Object(C.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ht=new u.b("app_management_modal"),mt="APP_SETTINGS_MODAL",bt="APP_CHANNEL_ADD_DIALOG",_t="APP_CHANNEL_REMOVE_DIALOG",gt={onUninstall:c.a,showAppDirectoryLink:!0,isMobile:!1,workspaceName:"",enqueueToast:c.a,serviceId:void 0,appProfile:void 0,appId:void 0,appUserId:void 0,appName:void 0,wildcardEnabled:!1,onClose:c.a,appIcon:void 0,privateChannelCount:0,publicChannelCount:0,openModal:c.a,closeModal:c.a,currentUserScopeInfo:[],userScopeInfo:[],userCount:0,userIsAppmin:!1,referringEventId:void 0,referringUiContext:void 0,isLoading:!0,hasError:!1},ft=80,vt="already_has_resource",Ot="no_resource_to_remove",yt="permission_exists",Ct=Ot;class app_management_modal_container_AppManagementModalContainer extends n.PureComponent{static getDerivedStateFromProps(e,t){var{currentUserScopeInfo:a,userIsAppmin:n,userCount:r}=e;return"user"===t.activeSection&&(n?0===r:Object(l.a)(a))?{activeSection:"channel"}:null}constructor(e){super(e),this.state={alertBannerType:null,activeDialogChannelId:null,addChannelScopeInfo:null,activeSection:"channel"},Object(k.a)(this,["handleSidebarMenuItemClick","handleWorkspaceSectionLinkClick","handleUninstallButtonClick","handleAlertBannerClose","handleWildcardCheckboxChange","handleAppSearchUsers","handleExclusionListAdd","handleExclusionListRemove","handleGrantListAdd","handleGrantListRemove","handleRevokeButtonClick","handleMemberListRevokeClick","handleViewUserPermissionsClick"]),this.referringEventId=e.referringEventId,this.referringUiContext=e.referringUiContext}componentDidUpdate(e,t){var{isLoading:a,hasError:n}=this.props,{activeSection:r}=this.state;e.hasError||!n?(e.isLoading&&!a||t.activeSection!==r)&&this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.IMPRESSION}):this.handleError()}componentWillUnmount(){this.props.clearAppPermissions(),this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLOSE})}getClogStep(){var{userIsAppmin:e}=this.props,{activeSection:t}=this.state;switch(t){case"workspace":return Ye.UiStep.WORKSPACE_ACCESS_SECTION;case"user":return e?Ye.UiStep.APPMIN_MEMBER_ACCESS_SECTION:Ye.UiStep.MEMBER_ACCESS_SECTION;default:return Ye.UiStep.CHANNEL_ACCESS_SECTION}}trackClog(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mt,{appId:n,clogger:r}=this.props,s=ut({[Ye.UiContextKeys.step]:a===mt?this.getClogStep():void 0},e);r.track(a,{contexts:{[Ye.ClientEventKeys.ui_context]:s,[Ye.ClientEventKeys.referring_ui_context]:this.referringUiContext,[Ye.ClientEventKeys.core]:ut({[Ye.CoreKeys.app_id]:n},t)},[Ye.ClientEventKeys.referring_event_id]:this.referringEventId}),this.referringEventId=a,this.referringUiContext=s}trackClogForSidebarMenuClick(e){var t;switch(e){case"workspace":t=Ye.UiElement.LINK_WORKSPACE_ACCESS_SECTION;break;case"channel":t=Ye.UiElement.LINK_CHANNEL_ACCESS_SECTION;break;case"user":t=this.props.userIsAppmin?Ye.UiElement.LINK_APPMIN_MEMBER_ACCESS_SECTION:Ye.UiElement.LINK_MEMBER_ACCESS_SECTION;break;case"homepage":t=Ye.UiElement.LINK_APP_HOMEPAGE;break;case"directory":t=Ye.UiElement.LINK_APP_DIRECTORY;break;case"support":t=Ye.UiElement.LINK_APP_SUPPORT;break;default:t=void 0}this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLICK,[Ye.UiContextKeys.ui_element]:t})}handleError(){this.props.closeModal(),this.props.enqueueToast({element:r.a.createElement(Ae.b,{offsetY:ft,icon:"warning-filled",iconClassName:"sk_raspberry_red margin_right_75"},r.a.createElement("span",{"data-qa":"app_management_modal_error_toast"},ht.t("Hmm, something went wrong. Try again?")))})}handleSidebarMenuItemClick(e){this.trackClogForSidebarMenuClick(e),e!==this.state.activeSection&&this.setState(()=>({activeSection:e}))}handleWorkspaceSectionLinkClick(){this.handleSidebarMenuItemClick("workspace")}showUninstallToast(){var{appName:e,workspaceName:t}=this.props;this.props.enqueueToast({element:r.a.createElement(Ae.b,{offsetY:ft},r.a.createElement("span",{"data-qa":"app_management_modal_uninstall_toast"},ht.t("{appName} was removed from {workspaceName}",{appName:Object(u.q)(e),workspaceName:Object(u.q)(t)})))})}handleUninstallConfirm(){var{onUninstall:e,appId:t,onClose:a}=this.props;return this.props.fetchAppUninstall({appId:t}).then(()=>{e(),this.showUninstallToast(),a(),this.props.closeModal()}).catch(()=>{this.setState(()=>({alertBannerType:"uninstallError"}))})}toggleWildcardEnabled(){var{appUserId:e,wildcardEnabled:t,serviceId:a}=this.props,n="fetchAppWildcard".concat(t?"Disable":"Enable");return this.props[n]({appUserId:e}).then(n=>{this.props.maybeUpdateAppPermissionsAfterWildcardChange({appUserId:e,wildcardEnabled:!t}),t||this.props.updatePublicChannelCount({countDelta:n,serviceId:a})}).catch(e=>{var a=Object(Pe.a)(e,"data.error");a===yt||a===Ct||this.setState(()=>({alertBannerType:t?"wildcardRemoveError":"wildcardAddError"}))})}handleChannelAddOrRemove(e,t,a){this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLICK,[Ye.UiContextKeys.ui_element]:a},{[Ye.CoreKeys.channel_id]:e}),this[t](e)}handleExclusionListAdd(e){this.handleChannelAddOrRemove(e,"showRemoveDialog",Ye.UiElement.BTN_APP_ADD_EXCLUSION)}handleExclusionListRemove(e){this.handleChannelAddOrRemove(e,"showAddDialog",Ye.UiElement.BTN_APP_REMOVE_EXCLUSION)}handleGrantListAdd(e){this.handleChannelAddOrRemove(e,"showAddDialog",Ye.UiElement.BTN_APP_ADD_CHANNEL)}handleGrantListRemove(e){this.handleChannelAddOrRemove(e,"showRemoveDialog",Ye.UiElement.BTN_APP_REMOVE_CHANNEL)}showRemoveDialog(e){var{appName:t}=this.props;this.setState(()=>({activeDialogChannelId:e,alertBannerType:null}));var a={appName:t,channelId:e,onConfirm:()=>(this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.OK},{[Ye.CoreKeys.channel_id]:e},_t),this.handleRemoveChannel()),onCancel:()=>this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLOSE},{[Ye.CoreKeys.channel_id]:e},_t)};this.props.openModal({element:r.a.createElement(We.a,a),isStackable:!0}),this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.IMPRESSION},{[Ye.CoreKeys.channel_id]:e},_t)}handleRemoveChannel(){var{appUserId:e}=this.props,{activeDialogChannelId:t}=this.state,a={alertBannerType:"removeSuccess"};return this.props.fetchAppRemoveResource({appUserId:e,channelId:t}).then(()=>{this.props.maybeUpdateAppPermissionsAfterChannelRemove({appUserId:e,channelId:t}),this.setState(()=>a)}).catch(e=>{Object(Pe.a)(e,"data.error")===Ot?this.setState(()=>a):this.setState(()=>({alertBannerType:"removeError"}))})}showAddDialog(e){var{appUserId:t,appName:a,appIcon:n}=this.props;return this.props.fetchAppAddResource({appUserId:t,channelId:e,didConfirm:!1}).then(t=>{this.setState(()=>({activeDialogChannelId:e,addChannelScopeInfo:t,alertBannerType:null}));var s={channelId:e,appName:a,appIcon:n,scopeInfo:t,onAuthorize:()=>{this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.ALLOW},{[Ye.CoreKeys.channel_id]:e},bt),this.handleAddChannel()},onDismiss:()=>{this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.DO_NOT_ALLOW},{[Ye.CoreKeys.channel_id]:e},bt)},onClose:()=>{this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLOSE},{[Ye.CoreKeys.channel_id]:e},bt)}};this.props.openModal({element:r.a.createElement(He.b,s),isStackable:!0}),this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.IMPRESSION},{[Ye.CoreKeys.channel_id]:e},bt)}).catch(t=>{Object(Pe.a)(t,"data.error")===vt?this.setState(()=>({addChannelScopeInfo:null,alertBannerType:"addSuccess"})):this.setState(()=>({activeDialogChannelId:e,alertBannerType:"addError"}))})}handleAddChannel(){var{appUserId:e}=this.props,{activeDialogChannelId:t}=this.state;return this.props.fetchAppAddResource({appUserId:e,channelId:t,didConfirm:!0}).then(()=>{this.props.maybeUpdateAppPermissionsAfterChannelAdd({appUserId:e,channelId:t}),this.setState(()=>({addChannelScopeInfo:null,alertBannerType:"addSuccess"}))}).catch(()=>{this.setState(()=>({alertBannerType:"addError"}))})}handleAlertBannerClose(){this.setState(()=>({alertBannerType:null}))}handleWildcardCheckboxChange(){this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLICK,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_WILDCARD_CHECKBOX}),this.showWildcardDialog()}showWildcardDialog(){var{wildcardEnabled:e,appName:t}=this.props,a=e?Ye.UiElement.APP_WILDCARD_DISABLE_DIALOG:Ye.UiElement.APP_WILDCARD_ENABLE_DIALOG,n={appName:t,wildcardEnabled:e,onGo:()=>(this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.OK,[Ye.UiContextKeys.ui_element]:a}),this.toggleWildcardEnabled()),onCancel:()=>this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLOSE,[Ye.UiContextKeys.ui_element]:a})};this.props.openModal({element:r.a.createElement($e,n),isStackable:!0}),this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.IMPRESSION,[Ye.UiContextKeys.ui_element]:a})}handleUninstallButtonClick(){this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLICK,[Ye.UiContextKeys.ui_element]:Ye.UiElement.BTN_APP_UNINSTALL}),this.showUninstallDialog()}showUninstallDialog(){var e,{appName:t,appIcon:a,workspaceName:n,publicChannelCount:s,privateChannelCount:i}=this.props,o={appName:t,appIcon:a,workspaceName:n,publicChannelCount:s,privateChannelCount:i,onGo:()=>(this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.ALLOW,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_UNINSTALL_DIALOG}),this.handleUninstallConfirm()),onCancel:()=>this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLOSE,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_UNINSTALL_DIALOG})};s>0?e=i>0?ht.rt("I understand {appName} will no longer be able to access <strong>{publicChannelCount, plural, =1 {# public channel} other {# public channels}} and {privateChannelCount, plural, =1 {# other private conversation} other {# other private conversations}}</strong>.",{appName:t,publicChannelCount:s,privateChannelCount:i}):ht.rt("I understand {appName} will no longer be able to access <strong>{publicChannelCount, plural, =1 {# public channel} other {# public channels}}</strong>.",{appName:t,publicChannelCount:s}):i>0&&(e=ht.rt("I understand {appName} will no longer be able to access <strong>{privateChannelCount, plural, =1 {# private conversation} other {# private conversations}}</strong>.",{appName:t,privateChannelCount:i})),o.channelAccessCheckboxText=e,this.props.openModal({element:r.a.createElement(ze,o),isStackable:!0}),this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.IMPRESSION,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_UNINSTALL_DIALOG})}handleRevokeButtonClick(){this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLICK,[Ye.UiContextKeys.ui_element]:Ye.UiElement.BTN_APP_REVOKE}),this.showRevokeDialog()}handleMemberListRevokeClick(){this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLICK,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_MEMBER_LIST_MENU_REVOKE}),this.showRevokeDialog()}showRevokeDialog(){var{appName:e,workspaceName:t}=this.props;this.setState(()=>({alertBannerType:null}));var a={appName:e,onGo:()=>(this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.OK,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_REVOKE_DIALOG}),this.handleRevokeConfirm()),onCancel:()=>this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLOSE,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_REVOKE_DIALOG}),workspaceName:t};this.props.openModal({element:r.a.createElement(at,a),isStackable:!0}),this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.IMPRESSION,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_REVOKE_DIALOG})}handleRevokeConfirm(){var{serviceId:e}=this.props;return this.props.fetchAppRevokeUserAndUpdateAppPermissions({serviceId:e}).then(()=>{this.setState(()=>({alertBannerType:"revokeSuccess"}))}).catch(()=>{this.setState(()=>({alertBannerType:"revokeError"}))})}handleViewUserPermissionsClick(e,t){this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLICK,[Ye.UiContextKeys.ui_element]:Ye.UiElement.LINK_APP_VIEW_PERMISSIONS}),this.showUserPermissionsDialog(e,t)}showUserPermissionsDialog(e,t){var{appName:a,currentUserScopeInfo:n,userScopeInfo:s}=this.props,i={appName:a,currentUserScopeInfo:n,memberId:e,onGo:()=>Object(Ne.a)(()=>this.showRevokeDialog()),onClose:()=>this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLOSE,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_USER_PERMISSIONS_DIALOG}),scopes:t,userScopeInfo:s};this.props.openModal({element:r.a.createElement(dt,i),isStackable:!0}),this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.IMPRESSION,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_USER_PERMISSIONS_DIALOG})}handleAppSearchUsers(e){return e.query&&this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.SEARCH,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_MEMBER_LIST_SEARCH}),this.props.searchUsersForApp(e).catch(()=>{this.setState(()=>({alertBannerType:"error"}))})}render(){var e=ut({onSidebarMenuItemClick:this.handleSidebarMenuItemClick,onSidebarMenuLinkClick:this.trackClogForSidebarMenuClick,onWorkspaceSectionLinkClick:this.handleWorkspaceSectionLinkClick,onRevokeButtonClick:this.handleRevokeButtonClick,onMemberListRevokeClick:this.handleMemberListRevokeClick,onUninstallButtonClick:this.handleUninstallButtonClick,onExclusionListAdd:this.handleExclusionListAdd,onExclusionListRemove:this.handleExclusionListRemove,onGrantListAdd:this.handleGrantListAdd,onGrantListRemove:this.handleGrantListRemove,onWildcardCheckboxChange:this.handleWildcardCheckboxChange,onAlertBannerClose:this.handleAlertBannerClose,onViewUserPermissionsClick:this.handleViewUserPermissionsClick,onAppSearchUsers:this.handleAppSearchUsers},this.props,{},this.state);return r.a.createElement(Te,e)}}app_management_modal_container_AppManagementModalContainer.displayName="AppManagementModalContainer",app_management_modal_container_AppManagementModalContainer.defaultProps=gt;var jt={clearAppPermissions:T.b,enqueueToast:xe.c,fetchAppAddResource:Me.a,fetchAppRemoveResource:Me.h,fetchAppUninstall:Me.k,fetchAppWildcardDisable:Me.l,fetchAppWildcardEnable:Me.m,fetchAppRevokeUserAndUpdateAppPermissions:T.d,maybeUpdateAppPermissionsAfterChannelAdd:T.g,maybeUpdateAppPermissionsAfterChannelRemove:T.h,maybeUpdateAppPermissionsAfterWildcardChange:T.i,searchUsersForApp:T.k,updatePublicChannelCount:T.l,openModal:i.e,closeModal:i.a},Et=Object(E.b)((e,t)=>{var{appProfile:a,serviceId:n}=t,r=Object(Re.d)(e),s=r?Object(Be.e)(r):"",i={},o=Object(Xe.f)(e);if(a)i=(e=>{var{app_user_id:t,id:a,name:n,support_url:r,url:s}=e;return{appUserId:t,appIcon:Object(Fe.b)(e,48),appIconLarge:Object(Fe.b)(e,88),appId:a,appName:n,appSupportUrl:r,appHomepageUrl:s}})(a);else if(n){var c=Object(Le.c)(e,{serviceId:n});c&&(i=((e,t)=>{var{app_user:a,app_id:n,profile:r,directory_profile:s}=e;return{appUserId:a.id,appIcon:Object(Fe.b)(r,48,t),appIconLarge:Object(Fe.b)(r,88,t),appId:n,appName:r.name,appSupportUrl:s.support_url,appHomepageUrl:s.home_url}})(c,o))}var d=Object(T.e)(e,n);return ut({workspaceName:s,userIsAppmin:!Object(Ue.a)(e,"app_whitelist_enabled")||Object(A.k)(e),isLoading:Object(De.d)(d),hasError:Object(De.c)(d)||Object(l.a)(i),showWildcardToggle:Object(T.a)(d,"channel")},i,{},d,{clogger:Object(Qe.a)({state:e})})},jt)(app_management_modal_container_AppManagementModalContainer),kt=Object(o.b)("Opens app app management modal in client",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.a.createElement(Et,a);e(Object(i.e)({element:n}))});kt.meta={name:"openAppManagementModal",key:"actionsOpenAppManagementModalOpenAppManagementModal",description:"Opens app app management modal in client"},kt.propTypes={serviceId:s.default.string,appProfile:s.default.object,onClose:s.default.func,showAppDirectoryLink:s.default.bool,onUninstall:s.default.func,isMobile:s.default.bool,referringEventId:s.default.string,referringUiContext:s.default.object};t.a=kt},tEVE:function(e,t,a){},tFl5:function(e,t,a){},tLal:function(e,t,a){},tMdt:function(e,t,a){"use strict";var n=a("zmn3"),r=a("fujP"),s=a("ifKl"),i=(a("aK/h"),a("q1tI")),o=a.n(i),c=a("XHGt"),l=a("TSYQ"),d=a.n(l),p=a("pfyZ"),u=a("RAhH"),h=a("nNoG"),m=a("od5y"),b=a("XLFM"),_=a("lek6"),g=a("MREy"),f=new h.b("message"),v={isHovered:!1,sliHighlight:null,onSliHighlightsDefaultFeedback:s.a,onSliHighlightsSecondaryFeedbackOption:s.a};class SliHighlightsMessageLabel extends i.PureComponent{constructor(e){super(e),this.onSliHighlightsFeedbackDefaultPositive=this.onSliHighlightsFeedbackDefaultPositive.bind(this),this.onSliHighlightsFeedbackDefaultNegative=this.onSliHighlightsFeedbackDefaultNegative.bind(this),this.renderNegativeFeedbackMenu=this.renderNegativeFeedbackMenu.bind(this)}onSliHighlightsFeedbackDefaultPositive(){this.props.sliHighlight.feedback||this.props.onSliHighlightsDefaultFeedback(!0)}onSliHighlightsFeedbackDefaultNegative(){this.props.sliHighlight.feedback||this.props.onSliHighlightsDefaultFeedback(!1)}renderPositiveHighlightLabel(){return o.a.createElement("span",null,o.a.createElement("span",{className:"c-message__label__highlight_title"},f.t("Highlight")),(this.props.sliHighlight.justification||this.props.isHovered)&&" \u2014 ",this.renderFeedbackControls())}renderFeedbackControls(){var{isHovered:e,sliHighlight:t}=this.props,a="default_positive"===t.feedback;if(e){var n=d()({"c-message__label__highlight_positive":!0,"c-message__label__highlight_positive--active":a}),r=d()({"c-message__label__highlight_negative":!0,"c-message__label__highlight_negative--inactive":a});return o.a.createElement("span",null,f.t("Is this helpful?"),o.a.createElement(u.c,{tip:a?f.t("Thank you!"):f.t("This was helpful")},o.a.createElement(b.c,{className:n,onClick:this.onSliHighlightsFeedbackDefaultPositive},o.a.createElement(m.b,{type:"thumbs-up",size:"inherit",inline:!0}))),o.a.createElement(u.c,{tip:f.t("This wasn\u2019t helpful")},o.a.createElement(b.c,{className:r,onClick:this.onSliHighlightsFeedbackDefaultNegative},o.a.createElement(m.b,{type:"thumbs-down",size:"inherit",inline:!0}))))}return o.a.createElement(_.a,{text:this.props.sliHighlight.justification})}renderNegativeHighlightLabel(){return o.a.createElement("span",null,o.a.createElement("strong",null,f.t("What\u2019s not working about this highlight?"))," ",f.t("Let us know, and we\u2019ll adjust."),"\xa0",o.a.createElement(g.e,{renderMenu:this.renderNegativeFeedbackMenu,position:"right",offsetX:0,offsetY:0},o.a.createElement(b.c,{className:"c-message__label__feedback_dropdown btn_unstyle sk_highlight_accent"},f.t("Give Feedback")," ",o.a.createElement(m.b,{type:"chevron-down",inline:!0}))))}renderNegativeFeedbackMenu(e){var{feedbackOptions:t}=this.props.sliHighlight;return Object(r.a)(t)?null:o.a.createElement(g.f,e,Object(n.a)(t.negative,e=>o.a.createElement(g.b,{key:e.args.ts,label:o.a.createElement(_.a,{text:e.text,noLinking:!0,showTooltips:!1}),onSelected:()=>this.props.onSliHighlightsSecondaryFeedbackOption(e.args)})))}render(){var{sliHighlight:e}=this.props;return e.feedback&&"default_positive"!==e.feedback?this.renderNegativeHighlightLabel():this.renderPositiveHighlightLabel()}}SliHighlightsMessageLabel.defaultProps=v,t.a=Object(c.b)(null,function(e,t){var{channelId:a,ts:n,sliHighlight:r}=t;return{onSliHighlightsDefaultFeedback:t=>e(Object(p.g)({channelId:a,ts:n,feedback:t?"default_positive":"default_negative",leftFeedback:t,args:r.feedbackOptions[t?"default_positive":"default_negative"].args,requestId:r.requestId})),onSliHighlightsSecondaryFeedbackOption:t=>e(Object(p.g)({channelId:a,ts:n,feedback:"negative",leftFeedback:!0,args:t,requestId:r.requestId}))}})(SliHighlightsMessageLabel)},thgq:function(e,t,a){},tn36:function(e,t,a){"use strict";function n(e,t){if(!t||!Array.isArray(t))throw new Error("bindAll: methodNames must be an array of method name strings to bind to the object");for(var a=0;a<t.length;a++){var n=e[t[a]];"function"==typeof n&&(e[t[a]]=n.bind(e))}return e}a.d(t,"a",function(){return n})},tx91:function(e,t,a){},uC0n:function(e,t,a){},uG0r:function(e,t,a){"use strict";var n=a("aK/h"),r=a("Pb16"),s=a("Ff2n"),i=a("q1tI"),o=a.n(i),c=a("qafc"),l=a("nNoG"),d=a("/m+M"),p=new l.b("channel_action_menu"),u=e=>{var{name:t}=e,a=Object(s.a)(e,["name"]),{featureChannelActionsClient:n}=Object(d.a)();return o.a.createElement(c.b,a,o.a.createElement("span",null,n?p.rt("You used the action <b>{name}</b>",{name:t}):""))},h=a("vhAc"),m=a("XfeM"),b=a("ns4K"),_=a("DVJN"),g=a("yHhI"),f=a("yzQ7");a.d(t,"a",function(){return v});var v=Object(m.b)("Runs a channel action",function(e,t){var{channelId:a,actionId:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=t(),i=Object(g.a)({state:s,label:"PLATFORM-CHANNEL-ACTIONS"}),c=Object(f.b)(s,n);if(!c)return i.error("Unable to run unknown channel action with ID ".concat(n," for channel ").concat(a)),Promise.resolve();var l={actionId:n,appId:c.appId,channelId:a,type:_.a.channelAction};return e(Object(h.c)(l)).tap(()=>{i.info("Successfully ran channel action ".concat(n," for channel ").concat(a));var t=(e=>o.a.createElement(u,e))({name:c.name});e(Object(b.c)({element:t}))}).catch(t=>{i.error("Failed to run channel action ".concat(n," for channel ").concat(a),t);var s=Object(r.a)({onRetry:()=>e(v({channelId:a,actionId:n}))});e(Object(b.c)({element:s}))})});v.meta={name:"runChannelAction",key:"channelActionsStoreActionsRunChannelAction",description:"Runs a channel action"},v.propTypes={actionId:n.default.string.isRequired,channelId:n.default.string.isRequired}},uI5u:function(e,t,a){"use strict";var n=a("ifKl"),r=a("q1tI"),s=a.n(r),i=(a("aK/h"),a("nNoG")),o=a("TSYQ"),c=a.n(o),l=a("tn36"),d=a("VymY"),p=a("18Pa"),u=a("lfjV"),h=(a("K1NN"),new i.b("sk_banner")),m={type:"success",showCloseButton:!0,autoFadeout:!1,topOffset:0,className:null,isFixedPosition:!0,"data-qa":"banner",onClose:n.a,onFocus:n.a,onBlur:n.a},b=2e3;class banner_Banner extends r.PureComponent{constructor(e){super(e),this.state={isShowing:!0,opacity:1},Object(l.a)(this,["handleCloseButtonClick","focus"]),this.handleCloseButtonClick=this.handleCloseButtonClick.bind(this),this.cancelAnimation=n.a,this.banner=s.a.createRef()}componentDidMount(){this.fadeOutMaybe()}componentWillUnmount(){this.cancelAnimation()}handleCloseButtonClick(){var{onClose:e}=this.props;this.setState(()=>({isShowing:!1})),e()}fadeOutMaybe(){var{autoFadeout:e,onClose:t}=this.props;if(e){var a=Object(u.a)({delay:b,fromValue:1,toValue:0,duration:b,easing:"easeOutQuad",onTick:e=>{var{value:t,nextTick:a}=e;this.setState(()=>({opacity:t})),a()},onComplete:()=>{this.setState(()=>({isShowing:!1})),t()}});this.cancelAnimation=a.cancel}}focus(){var e=Object(d.b)(this.banner.current);e&&e.focus()}render(){var{type:e,children:t,showCloseButton:a,topOffset:n,className:r,isFixedPosition:i,"data-qa":o}=this.props,{isShowing:l,opacity:d}=this.state;if(!l)return!1;var u=c()("c-banner",{["c-banner--".concat(e)]:!!e,"c-banner--fixed":i},r),m="warning"!==e?"dark":void 0;return s.a.createElement("div",{role:"alert",className:u,style:{top:n,opacity:d},"data-qa":o,ref:this.banner,onFocus:this.props.onFocus,onBlur:this.props.onBlur},s.a.createElement("div",{className:"c-banner__text"},t),a&&s.a.createElement(p.a,{className:"c-banner__close",icon:"times",onClick:this.handleCloseButtonClick,backgroundStyle:m,"aria-label":h.t("Dismiss")}))}}banner_Banner.defaultProps=m,banner_Banner.displayName="Banner";var _=banner_Banner;t.a=_},uS0p:function(e,t,a){},um7Q:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return i});a("NFsq"),a("CpTu");var n=a("t85p"),r=a("cErB");var s=(e,t)=>"https://".concat(function(e,t){var a=t||"my",s=Object(r.d)(Object(n.f)(e,"abs_root_url"));return"".concat(a,".").concat(s)}(e,t)),i=(e,t)=>"https://".concat(function(e,t){var a=Object(r.d)(Object(n.f)(e,"abs_root_url"));return"".concat(t,".enterprise.").concat(a)}(e,t))},unce:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("aLpA"),r=a("+uGN"),s=a("2I0B"),i=a("Qrgz");function o(e){return Object(s.a)(e,{canPostInChannel:i.p,canPostInThread:i.q}).filter(e=>Object(r.p)(e)).length>=n.D}},uxXE:function(e,t,a){e.exports=a.p+"sidebar_bg_standard@2x-0801db7.png"},uylt:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=(a("aK/h"),a("uvIC")),o=a("HckQ"),c=(a("2FVR"),{comment:void 0,fileId:void 0,className:void 0,"data-qa":void 0});class StarredItemFileComment extends n.PureComponent{render(){var{comment:e,fileId:t,className:a,"data-qa":n}=this.props;if(!e)return null;var s={user:e.user,ts:e.timestamp.toString(),subtype:"file_comment",comment:e,files:[t]};return r.a.createElement(o.a,{msg:s,className:a,"data-qa":n})}}StarredItemFileComment.defaultProps=c;t.a=Object(s.b)((e,t)=>{var{fileId:a,commentId:n}=t;return{comment:Object(i.d)(e,a,n)}})(StarredItemFileComment)},"v+20":function(e,t,a){},vKzi:function(e,t,a){},vOUN:function(e,t,a){},vP1t:function(e,t,a){"use strict";var n=a("rePB"),r=a("ifKl"),s=a("q1tI"),i=a.n(s),o=(a("aK/h"),a("XHGt")),c=a("TSYQ"),l=a.n(c),d=(a("yPgC"),a("yHhI")),p=a("Zr7G"),u=a("uvIC"),h=a("RfGh"),m=a("9gIX"),b=a("MAit");function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var g="IMPROVED_SEARCH",f={index:null,clogLinkClick:r.a,className:null,fullWidth:!1,onClick:r.a,logger:{error:r.a},telemeter:p.d};class SearchFile extends s.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.props.onClick(e,{file:this.props.file,index:this.props.index})}componentDidCatch(e,t){this.props.telemeter.count("search_ui_files_result_file_render_error"),this.props.logger.error(g,"Error caught by SearchFile ".concat(t.componentStack))}render(){var{file:e,fileFromRedux:t,clogLinkClick:a,fullWidth:r}=this.props,s=l()("p-search_file",this.props.className),o=t&&t.title,c=t&&t.name,d=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t,{title:e.search_title||e.title||o,name:e.search_name||e.name||c});return i.a.createElement(h.a,{file:d,className:s,fullWidth:r,clogLinkClick:a,"data-qa":"search_result_file"},i.a.createElement(m.a,{file:d,onClick:this.onClick},i.a.createElement(b.a,{file:d,excludeTime:!0})))}}SearchFile.defaultProps=f;t.a=Object(o.b)((e,t)=>{var{file:a}=t;return{fileFromRedux:a?Object(u.c)(e,a.id):null,logger:Object(d.a)({state:e}),telemeter:Object(p.c)({state:e})}})(SearchFile)},vr4i:function(e,t,a){},vuMC:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=(a("aK/h"),a("nNoG")),o=a("vmJv"),c=a("Dpde"),l=a("Ymwh"),d=a("rWF5"),p=a("i6Ao"),u=a("TSYQ"),h=a.n(u),m=a("XLFM"),b=a("od5y"),_=a("hW7Y"),g=(a("/6P7"),e=>{var{iconType:t,onClick:a,isDisabled:n,tooltip:s,ariaLabel:i,className:o}=e,c=h()("p-channel_sidebar__history_button",o,{"p-channel_sidebar__history_button--disabled":n});return r.a.createElement(_.c,{tip:s,position:"bottom",delay:_.a},r.a.createElement(m.c,{className:c,onClick:a,"aria-label":i,"aria-disabled":n,tabIndex:n?-1:void 0},r.a.createElement(b.b,{type:t})))});g.defaultProps={tooltip:void 0,ariaLabel:void 0,className:void 0};var f=g,v=new i.b("navigation");class history_History extends n.Component{constructor(e){super(e),this.onBackClick=this.onBackClick.bind(this),this.onForwardClick=this.onForwardClick.bind(this)}componentDidMount(){Object(p.c)()}componentDidUpdate(e){this.props.primaryView!==e.primaryView&&Object(p.c)()}onBackClick(){this.props.triggerNavigateBack({fromKeyboardShortcut:!1})}onForwardClick(){this.props.triggerNavigateForward({fromKeyboardShortcut:!1})}render(){var{historyNavigationEnabled:e,isIAP1Enabled:t}=this.props;if(!e)return null;var a=v.t("Previous conversation"),s=v.t("Next conversation");return t&&(a=r.a.createElement("div",null,r.a.createElement("div",null,"Previous"),r.a.createElement("div",{className:"sk_light_gray"},Object(d.q)()?"\u2318[":"Ctrl \u2190")),s=r.a.createElement("div",null,r.a.createElement("div",null,"Next"),r.a.createElement("div",{className:"sk_light_gray"},Object(d.q)()?"\u2318]":"Ctrl \u2192]"))),r.a.createElement(n.Fragment,null,r.a.createElement(f,{onClick:this.onBackClick,tooltip:a,ariaLabel:v.t("Move to the previous conversation"),className:"p-channel_sidebar__history_button-left",iconType:"chevron-medium-left",isDisabled:Object(p.a)()}),r.a.createElement(f,{onClick:this.onForwardClick,tooltip:s,ariaLabel:v.t("Move to the next conversation"),className:"p-channel_sidebar__history_button-right",iconType:"chevron-medium-right",isDisabled:Object(p.b)()}))}}history_History.defaultProps={historyNavigationEnabled:!1,isIAP1Enabled:!1};t.a=Object(s.b)(e=>({historyNavigationEnabled:Object(c.a)(e),primaryView:Object(o.a)(e)}),e=>({triggerNavigateForward:t=>e(Object(l.b)(t)),triggerNavigateBack:t=>e(Object(l.a)(t))}),null,{pure:!1})(history_History)},vv9w:function(e,t,a){},wEz6:function(e,t,a){e.exports=a.p+"shared_channels-cdd6afa.png"},wMxR:function(e,t,a){},wUmu:function(e,t,a){},wb76:function(e,t,a){},wgy9:function(e,t,a){"use strict";var n=a("wCpp"),r=a("g+Y+"),s=a("iTOt");t.a=function(e){if(Object(r.g)(e)){var t=Object(s.c)(e),a=t.entityId,i=t.draftId;return a&&Object(n.a)(i)}}},wljo:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a("nNoG"),r=a("9/ob"),s=a("0f2Y"),i=(a("aK/h"),a("q1tI")),o=a.n(i),c=new n.b("search");function l(e){var{onClick:t,short:a,className:n}=e;return o.a.createElement(r.a,{enabled:["feature_tinyspeck"]},o.a.createElement("span",{className:n},a?"":"".concat(c.t("Something off?")," "),o.a.createElement(s.a,{onClick:t},c.t("Give feedback"))))}l.defaultProps={className:"",short:!1}},wuDf:function(e,t,a){"use strict";var n=a("rePB"),r=a("NFsq"),s=a("ifKl"),i=a("q1tI"),o=a.n(i),c=a("XHGt"),l=a("TSYQ"),d=a.n(l),p=(a("aK/h"),a("1hAG")),u=a("4ry+"),h=a("nNoG"),m=a("XLFM"),b=a("yJbr"),_=a("H2PH");a("9m5W");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var f=new h.b("files"),v={fileName:"",fileCount:0,percentComplete:0,status:u.e,cancelable:!1,cancelUpload:s.a,isRetry:!1,teamId:void 0};class file_upload_banner_FileUploadBanner extends i.PureComponent{static renderComplete(){var e=f.t("Processing uploaded file\u2026 complete!");return o.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},o.a.createElement("div",{className:"p-file_upload_banner__text"},e))}constructor(e){super(e),this.cancel=this.cancel.bind(this),this.clearOverrides=this.clearOverrides.bind(this),this.doneProlongingStatus=this.doneProlongingStatus.bind(this),this.state={statusOverride:null,fileNameOverride:null,timer:null,fading:!1}}componentWillUnmount(){this.state.timer&&clearTimeout(this.state.timer)}getFileName(){var{fileName:e}=this.props,{fileNameOverride:t}=this.state;return t||e}getStatus(){var{status:e}=this.props,{statusOverride:t}=this.state;return t||e}UNSAFE_componentWillReceiveProps(e){var t=[u.b,u.a];this.props.status!==e.status&&Object(r.a)(t,e.status)&&this.setState(()=>({statusOverride:e.status,fileNameOverride:e.fileName,timer:setTimeout(this.doneProlongingStatus,1e3)}))}cancel(){var{teamId:e}=this.props,t=this.props.cancelUpload,a=Object(_.a)(e);t=a.cancelCurrentUpload.bind(a),setTimeout(()=>{t()},1)}clearOverrides(){this.setState(()=>({statusOverride:null,fileNameOverride:null,timer:null,fading:!1}))}doneProlongingStatus(){this.props.status===u.c?this.setState(()=>({fading:!0,timer:setTimeout(this.clearOverrides,250)})):this.clearOverrides()}renderCanceled(){var{fileCount:e}=this.props,t=this.getFileName(),a=f.t("Canceling {fileName}\u2026",{fileName:Object(h.q)(t)});return e>1&&(a=f.t("Canceling upload\u2026")),o.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--canceled"},o.a.createElement("div",{className:"p-file_upload_banner__text"},a))}renderMultiFileUploadComplete(){var{fileCount:e}=this.props,t=f.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026 complete!",{fileCount:e});return o.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},o.a.createElement("div",{className:"p-file_upload_banner__text"},t))}renderUploading(){var e,{fileName:t,fileCount:a,percentComplete:n,cancelable:r,isRetry:s}=this.props,i=this.getStatus()===u.d||n>=99;i?e=f.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026",{fileCount:a}):(s?(e=f.t("Re-uploading {fileName}",{fileName:Object(h.q)(t)}),a>1&&(e=f.t("Re-uploading {fileCount} files",{fileCount:a}))):(e=f.t("Uploading {fileName}",{fileName:Object(h.q)(t)}),a>1&&(e=f.t("Uploading {fileCount} files",{fileCount:a}))),e+="\u2026 ".concat(n,"%"));var c=d()("p-file_upload_banner__progress_inner",{"p-file_upload_banner__progress_inner--animated":i}),l={width:"".concat(n,"%")},p=null;return r&&!i&&(p=o.a.createElement(m.c,{key:"cancel",className:"p-file_upload_banner__cancel",onClick:this.cancel},f.t("cancel"))),[o.a.createElement("div",{key:"bar",className:"p-file_upload_banner__progress"},o.a.createElement("span",{className:c,style:l})),o.a.createElement("div",{key:"text",className:"p-file_upload_banner__text"},e),p]}render(){var e,t=this.getStatus(),{fading:a}=this.state;if(t===u.c)return null;e=t===u.e||t===u.d?this.renderUploading():t===u.b?this.renderMultiFileUploadComplete():this.renderCanceled();var n=d()("p-file_upload_banner p-message_pane__banner",{"p-file_upload_banner--fading":a});return o.a.createElement("div",{className:n},e)}}file_upload_banner_FileUploadBanner.defaultProps=v;var O=Object(c.b)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},Object(u.g)(e),{teamId:Object(p.d)(e).id,cancelUpload:b.a})})(file_upload_banner_FileUploadBanner);t.a=O},wumb:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),s=a("q1tI"),i=a.n(s),o=(a("aK/h"),a("TSYQ")),c=a.n(o),l=a("Smdl"),d={className:void 0,flex:!1};function p(e){var{regionId:t,className:a,flex:s}=e,o=Object(r.a)(e,["regionId","className","flex"]);if(Object(l.a)())return null;var d=c()(a,{"p-classic_nav__page_header__legacy_drag_region":!0,flex_one:s,channel_header_drag_region:!0});return i.a.createElement("div",Object(n.a)({},o,{className:d,"data-region":t}))}p.defaultProps=d,t.a=p},wvq5:function(e,t,a){"use strict";var n=a("wSSu"),r=a.n(n);t.a=((e,t,a)=>{if(!t||!t.setAttribute)throw new TypeError("React mount point must be a valid HTML element");t.setAttribute("data-reactroot",""),r.a.render(e,t,a)})},"x++y":function(e,t,a){},x4cI:function(e,t,a){},xRgT:function(e,t,a){"use strict";var n=a("wx14"),r=a("ifKl"),s=a("q1tI"),i=a.n(s),o=a("XHGt"),c=(a("aK/h"),a("nNoG")),l=a("TSYQ"),d=a.n(l),p=a("ngQI"),u=a("tn36"),h=a("g5qt"),m=a("lhZz"),b=a("kLJo"),_=a("toaU"),g=a("HuaI"),f=a("IY6O"),v=a("s5Is"),O=a("t85p"),y=a("Tc5z"),C=a("peKf"),j=a("SNtu"),E=a("rWF5"),k=a("RQI5"),S=a("2jER"),I=a("/Rx2"),w=a("Smdl"),T=a("yHhI"),N=a("negh"),P=a("kOzZ"),A=a("kcos"),M=a("TGBA"),x=a("lE2N"),R=a("JvzI"),D=a("KGMq"),F=a("1hAG"),L=a("hjTk"),U=a("od5y"),B=a("llxT"),H=a("MREy");class team_switcher_context_button_TeamSwitcherContextButton extends s.PureComponent{constructor(e){super(e),this.openFindMoreWorkspacesModal=this.openFindMoreWorkspacesModal.bind(this),this.renderMenu=this.renderMenu.bind(this)}getOneWorkpacePerOrg(){return Object(x.a)(Object(M.a)(this.props.teams),"enterprise_id").filter(e=>e.enterprise_id)}openFindMoreWorkspacesModal(e){var{currentTeam:t}=this.props;t.enterprise_id===e.enterprise_id?this.props.openFindMoreWorkspacesModal(this.props.currentUserId):Object(b.g)(_.a,{teamId:e.id},{reason:"team-sidebar/selectTeam"}).then(()=>{this.props.openFindMoreWorkspacesModal(this.props.currentUserId)})}openFindGlobalWorkspaces(){Object(L.a)("https://slack.com/signin/find")}renderMenu(e){var t=this.getOneWorkpacePerOrg().map(e=>{return{label:"Find more workspaces on ".concat(e.enterprise_name),click:()=>this.openFindMoreWorkspacesModal(e),key:e.enterprise_id}}),a=[{label:"Add a new workspace",click:this.props.startWorkspaceSignIn,key:"add"},{label:"Find workspaces",click:this.openFindGlobalWorkspaces,key:"find"}].concat(t);return this.props.clogger.track("TEAM_SIDEBAR_CONTEXT_CLICK",{is_iap1:this.props.isIAPhase1Enabled}),i.a.createElement(H.a,Object(n.a)({},e,{template:a}))}render(){var e=d()("p-team_sidebar__add_button",{"p-team_sidebar__add_button--mac":Object(E.q)()});return i.a.createElement(H.e,{position:"right-bottom",offsetX:8,renderMenu:this.renderMenu},i.a.createElement(B.a,{className:e},i.a.createElement(U.b,{type:"ellipsis",className:"p-team_sidebar__add_button_icon"})))}}team_switcher_context_button_TeamSwitcherContextButton.defaultProps={isIAPhase1Enabled:!1,clogger:{}};var W=Object(o.b)(e=>{var t=Object(F.d)(e),a=Object(m.getStoreInstanceByTeamId)(t.id).getState();return{locale:Object(R.a)(),currentUserId:Object(O.d)(e),currentTeam:Object(F.d)(e),isIAPhase1Enabled:Object(A.d)(a),clogger:Object(P.a)({state:a})}},e=>({openFindMoreWorkspacesModal:function(){return e(Object(D.a)(...arguments))}}))(team_switcher_context_button_TeamSwitcherContextButton),q=a("RAhH"),G=a("XL7r"),K=a("5mKg"),V=a("XLFM"),z=a("bmfP"),Y=a("Ff2n"),Q=a("AjwY"),X=a("6Jf9"),J=a("SQvH"),Z=a("XUHR"),$=a("qN/r"),ee=a("ROZo"),te=Object(ee.b)("TS.ui.workspaces.start"),ae=a("8vJI"),ne=a("N/g+"),re=Object(ee.b)("TS.magic_login.execute"),se=e=>{var{name:t,icon:a,org:n,url:r}=e;return i.a.createElement("div",{className:"p-global_nav__top_menu_header"},i.a.createElement("div",{className:"p-global_nav__top_menu_header_icon",style:{backgroundImage:a&&"url(".concat(a,")")}}),i.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},i.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},t),i.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},n||r)))};se.defaultProps={org:void 0,icon:void 0,url:void 0};var ie=Object(o.b)(e=>{var t=Object(F.d)(e);return{name:Object(K.e)(t),org:t.enterprise_name,icon:t.icon&&t.icon.image_88||void 0,url:"".concat(t.domain,".slack.com")}})(se),oe=a("G4ux"),ce=a("syB0"),le=a("wSSu"),de=a.n(le),pe=a("wvq5"),ue=a("kEaP"),he=a("yg0S"),me=(e,t)=>{var a=document.getElementById("manage_shared_channels_modal_mount_point");if(!e)throw new Error("mountChannelOptions must be called with a teamId parameter");var r=Object(m.getStoreInstanceByTeamId)(e);Object(pe.a)(i.a.createElement(o.a,{store:r},i.a.createElement(he.a,null,i.a.createElement(ue.a,Object(n.a)({},t,{onClose:()=>{Object(ce.a)(()=>{de.a.unmountComponentAtNode(a)})}})))),a)},be=a("ONPw"),_e=new c.b("global_nav"),ge=e=>{var{featureGlobalNav:t,team:a,isEnterprise:r,enterpriseURL:s,isAppmin:o,menuProps:c}=e;if(!t)return null;var l=[{label:_e.t("Manage members"),href:Object(K.n)(a,"/admin")},{label:_e.t("Workspace settings"),href:Object(K.n)(a,"/admin/settings")},{label:_e.t("Organization settings"),href:"https://".concat(s,"/manage"),hide:!r},{label:_e.t("Manage apps"),href:Object(K.n)(a,"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"),hide:r||!o},{label:_e.t("Manage shared channels"),click:()=>me(a.id),hide:!Object(be.a)()}].filter(e=>!e.hide);return i.a.createElement(H.a,Object(n.a)({},c,{template:l}))};ge.defaultProps={menuProps:void 0,isEnterprise:!1,enterpriseURL:void 0,isAppmin:!1,featureGlobalNav:!1};var fe=Object(o.b)(e=>{var t=Object(F.d)(e);return{team:t,isEnterprise:Object(K.s)(t),enterpriseURL:Object(O.f)(e,"enterprise_url"),isAppmin:Object(oe.k)(e),featureGlobalNav:Object(O.m)(e,"feature_global_nav")}})(ge),ve=a("0BC7"),Oe=a("7EGn"),ye=a("h9PG"),Ce=a("AE1P"),je=a("Fdc0"),Ee=a("x4bP"),ke=a("Qrgz"),Se=a("0xwB");function Ie(e){var t=Object(oe.b)(e),a=Object(F.d)(e),n=Object(je.eb)(e,t),r=Object(je.Eb)(e,t),s=Object(je.Gb)(t),i=Object(O.q)(e),o=Object(K.D)(a),c=n,l=Object(Se.b)(),d=Object(O.m)(e,"feature_builder_can_access"),p=n||!s&&(!Object(ye.a)(e,"emoji_only_admins")||!Object(ye.a)(e,"slackbot_responses_only_admins")||!Object(ye.a)(e,"loading_only_admins")),u=i&&Object(Ce.g)(e)&&Object(oe.k)(e),m=n||!Object(ye.a)(e,"stats_only_admins")&&!s,b=(r||Object(G.k)(e,"purchaser")||Object(ye.a)(e,"all_users_can_purchase"))&&o,_=!o&&!Object(h.U)(),g=i&&!Object(je.Gb)(t),f=o&&Object(ke.k)(e),v=Object(O.f)(e,"help_url"),y=Object(O.m)(e,"feature_tinyspeck")||E.l,C=i&&!s,j=Object(O.h)(e).length-1,k=(Object(Ee.a)()?j:j+Object(Oe.a)(t,"enterprise_user.teams.length",1))>=1&&!h.W;return{administration:c,invite:l,launchWorkflowBuilder:d,customize:p,manageApps:u,analytics:m,billing:b,plans:_,orgShared:g,externalShared:f,help:v,version:y,findWorkspaces:C,switchWorkspaces:k,signin:!k&&!!Object(O.f)(e,"signin_url")}}var we=new c.b("global_nav"),Te={actions:{},signOut:r.a,openPrefsModal:r.a,openSharedChannelIntroductionModal:r.a,openInviteModal:r.a,signoutURL:void 0,signinURL:void 0,renderSonicMenu:void 0,featureGlobalNav:!1};class team_menu_TeamMenu extends s.Component{constructor(e){super(e),this.onSigninClick=this.onSigninClick.bind(this),this.onOpenAppClick=this.onOpenAppClick.bind(this),this.renderAdminSubmenu=this.renderAdminSubmenu.bind(this),this.renderWorkspacesSubmenu=this.renderWorkspacesSubmenu.bind(this)}onSigninClick(e){h.W&&(e.preventDefault(),Object(h.sc)())}onOpenAppClick(e){e.preventDefault(),re({fallback_to_browser:!0,browser_uri:"/downloads",app_uri:"/ssb/open"})}renderAdminSubmenu(e){return i.a.createElement(fe,{menuProps:e})}renderWorkspacesSubmenu(e){return i.a.createElement(ve.a,{menuProps:e})}render(){var e=this.props,{actions:t,renderSonicMenu:a,featureGlobalNav:r,signoutName:s,signoutURL:o,signinURL:c,team:l}=e,d=Object(Y.a)(e,["actions","renderSonicMenu","featureGlobalNav","signoutName","signoutURL","signinURL","team"]);if(!r)return null;var p=[{type:"submenu",label:"Sonic",renderSubmenu:a,hide:!a},{type:"separator"},{type:"custom",children:i.a.createElement(ie,{key:"team-header"})},{type:"separator"},{label:we.t("Preferences"),shortcut:Object(E.q)()&&h.W&&"\u2318,",click:()=>this.props.openPrefsModal()},{type:"separator"},{type:"submenu",label:we.t("Administration"),renderSubmenu:this.renderAdminSubmenu,hide:!t.administration},{label:we.t("Analytics"),hide:!t.analytics,href:Object(K.n)(l,"/stats")},{label:we.t("Billing"),hide:!t.billing,href:Object(K.n)(l,"/admin/billing")},{label:we.t("See paid plans"),hide:!t.plans,href:Object(K.n)(l,Object(Q.j)({entryPoint:"global_nav_team_menu"}))},{label:we.t("Customize Slack"),hide:!t.customize,href:Object(K.n)(l,"/customize?utm_source=in-prod&utm_medium=inprod-customize_link-slack_menu-click"),target:"_blank"},{type:"separator"},{label:we.t("Invite people"),hide:!t.invite,click:()=>this.props.openInviteModal({source:"team_menu"})},{label:we.t("Manage apps"),hide:!t.manageApps,href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"},{label:we.t("Shared channels"),hide:!t.externalShared,click:()=>Object(w.a)()?this.props.openSharedChannelIntroductionModal():Object(J.a)()},{type:"separator"},{label:we.t("Help & feedback"),hide:!t.help,click:ae.a},{label:"Version info (TS only)",hide:!t.version,click:ne.a},{type:"separator"},{label:we.t("Find more workspaces"),hide:!t.findWorkspaces,click:()=>te()},{type:"submenu",label:we.t("Switch workspaces"),hide:Object(w.a)()||!t.switchWorkspaces,renderSubmenu:this.renderWorkspacesSubmenu},{label:we.t("Sign in to another workspace"),hide:!t.signin,href:c,click:this.onSigninClick},{label:we.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:s}),hide:!Object(w.a)(),click:()=>this.props.signOut(l.id),dataQa:"logout"},{label:we.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:s}),hide:Object(w.a)(),href:o,target:"_self",dataQa:"logout"},{type:"separator"},{label:we.rt("Open the Slack App"),hide:h.W,href:Object(K.n)(l,"/ssb/open"),click:this.onOpenAppClick}].filter(e=>!e.hide);return i.a.createElement(H.a,Object(n.a)({},d,{template:p,menuClassNames:"p-global_nav__top_team_menu",stripTerminalSeparators:!0}))}}team_menu_TeamMenu.defaultProps=Te;var Ne=Object(o.b)(e=>{var t=Object(F.d)(e);return{actions:Ie(e),team:t,signoutName:t.enterprise_name||Object(K.e)(t),signoutURL:Object(K.s)(t)?Object(O.f)(e,"enterprise_logout_url"):Object(O.f)(e,"logout_url"),signinURL:Object(O.f)(e,"signin_url"),featureGlobalNav:Object(O.m)(e,"feature_global_nav")}},e=>({signOut:function(){return e(Object(v.removeWorkspace)(...arguments))},openPrefsModal:()=>e(Object($.a)()),openSharedChannelIntroductionModal:function(){return e(Object(Z.a)(...arguments))},openInviteModal:function(){return e(Object(X.a)(...arguments))}}))(team_menu_TeamMenu),Pe=new c.b("global_nav"),Ae={name:void 0,featureGlobalNav:!1,featureOfflineMode:!1,renderSonicMenu:void 0};class name_Name extends s.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.renderMenu=this.renderMenu.bind(this),this.renderIcon=this.renderIcon.bind(this)}onClick(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_TEAM_MENU"}}})}renderMenu(e){return i.a.createElement(Ne,Object(n.a)({},e,{renderSonicMenu:this.props.renderSonicMenu}))}renderIcon(){return this.props.featureOfflineMode?i.a.createElement(s.Fragment,null,i.a.createElement(z.b,null,i.a.createElement(U.b,{type:"chevron-down",className:"p-global_nav__top_name_icon"})),i.a.createElement(z.a,null,i.a.createElement(q.c,{tip:Pe.t("No network connection"),position:"bottom"},i.a.createElement(U.b,{type:"cloud-offline-small",className:"p-global_nav__top_name_icon margin_left_25"})))):i.a.createElement(U.b,{type:"chevron-down",className:"p-global_nav__top_name_icon"})}render(){var{name:e,featureGlobalNav:t}=this.props;return e&&t?i.a.createElement(H.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:-4,allowanceX:12,onClick:this.onClick},i.a.createElement(V.c,{className:"p-global_nav__top_name","data-qa":"team_menu","aria-label":Pe.t("Team menu")},i.a.createElement("div",{className:"overflow_ellipsis"},e),this.renderIcon())):null}}name_Name.defaultProps=Ae;var Me=Object(o.b)(e=>{var t=Object(F.d)(e);return{name:t?Object(K.e)(t):void 0,featureGlobalNav:Object(O.m)(e,"feature_global_nav"),featureOfflineMode:Object(O.m)(e,"feature_offline_mode"),clogger:Object(P.a)({state:e})}})(name_Name),xe=a("eqKo"),Re=a("3dqR"),De=a("6avh"),Fe=a("ZYn4"),Le=a("/LVU"),Ue=a("W045"),Be=a("yZEV"),He=a("vmJv"),We=a("4M+g"),qe=a("4vzu"),Ge=a("s19S"),Ke=a("/Qam"),Ve=e=>{var{name:t,secondary:a,userId:n,inDnd:r,inDndBySnooze:s}=e,o=a?i.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},a):null,c=d()("p-global_nav__top_menu_header","p-global_nav__top_menu_header--full","p-global_nav__top_menu_header--user",{"p-global_nav__top_menu_snooze_background":r&&s,"p-global_nav__top_menu_schedule_background":r&&!s});return i.a.createElement("div",{className:c},i.a.createElement(Re.c,{userId:n,size:36,isInteractive:!1,className:"p-global_nav__top_menu_header_icon",tabIndex:"-1"}),i.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},i.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},t),o))};Ve.defaultProps={name:void 0,secondary:void 0,userId:void 0,inDnd:!1,inDndBySnooze:!1};var ze=Object(o.b)(e=>{var t=Object(oe.b)(e),{snoozeEnabled:a}=Object(qe.f)(e);return{name:Object(je.V)(e,t),secondary:Object(je.M)(e,t),userId:t.id,inDnd:!!Object(qe.d)(e,t.id),inDndBySnooze:a}})(Ve),Ye=a("mqzt"),Qe=(a("1iAE"),new c.b("do_not_disturb")),Xe={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:!1};class dnd_header_DndHeader extends s.PureComponent{render(){var{inDndBySnooze:e,snoozeEndTs:t,dndEndTs:a,do24hrTime:n}=this.props,r=d()("p-dnd_header",{"p-dnd_header__snooze_background":e,"p-dnd_header__schedule_background":!e}),s=e?t:a,o=Object(Ye.b)(s,{do24hrTime:n});return i.a.createElement("div",{className:r},i.a.createElement("div",{className:"p-dnd_header__status"},i.a.createElement("div",null,i.a.createElement("strong",null,Qe.t("Do Not Disturb: ON",{fallbackHash:"e9f808845f44c3345ade56f562f58e9da896e00e"}))),i.a.createElement("div",{className:"p-dnd_header__sub_text"},o)))}}dnd_header_DndHeader.defaultProps=Xe;var Je=Object(o.b)(e=>{var t=Object(O.d)(e),{nextDndEndTs:a}=Object(qe.e)(e,t),{snoozeEnabled:n,snoozeEndTs:r}=Object(qe.f)(e);return{inDndBySnooze:n,snoozeEndTs:r,dndEndTs:a,do24hrTime:Object(G.k)(e,"time24")}})(dnd_header_DndHeader);function Ze(e){var t=Object(O.m)(e,"feature_tinyspeck");return{help:Object(O.f)(e,"help_url"),version:t||E.l}}var $e=new c.b("global_nav"),et={actions:void 0,currentMember:void 0,currentPresence:void 0,onTriggerClose:r.a,openCustomStatusDialog:r.a,currentChannel:void 0,inDnd:!1,inDndBySnooze:!1,endDndSnooze:r.a,endDndSchedule:r.a,featureGlobalNav:!1,toggleUserPresence:r.a,updateCurrentMemberProfile:r.a,openPrefsModal:r.a};class user_menu_UserMenu extends s.Component{constructor(e){super(e),this.renderDndMenu=this.renderDndMenu.bind(this),this.renderPresenceLabel=this.renderPresenceLabel.bind(this)}renderDndMenu(e){var{currentChannel:t}=this.props;return i.a.createElement(Ke.a,{currentChannel:t,menuProps:e,useGlobalNav:!0})}renderPresenceLabel(){var{currentPresence:e,featureGlobalNav:t}=this.props;if(!t)return null;switch(e){case"active":return $e.rt("Set yourself to <strong>away</strong>",null,e=>{var{text:t,key:a}=e;return i.a.createElement("strong",{key:a},t)});case"away":return $e.rt("<status>Away</status> Set yourself to <strong>active</strong>",null,e=>{var{tag:t,text:a,key:n}=e;switch(t){case"status":return i.a.createElement("strong",{className:"half_opacity",key:n},a);case"strong":return i.a.createElement("strong",{key:n},a);default:return null}});default:return null}}render(){var e=this.props,{actions:t,currentMember:a,inDnd:r,inDndBySnooze:s,featureGlobalNav:o}=e,c=Object(Y.a)(e,["actions","currentMember","inDnd","inDndBySnooze","featureGlobalNav"]);if(!o)return null;var l=[{type:"custom",children:i.a.createElement(ze,{key:"user-header"})},{type:"custom",children:i.a.createElement(Je,{key:"dnd-header"}),hide:!r},{type:"submenu",label:$e.rt("Turn on <strong>Do Not Disturb</strong>"),renderSubmenu:this.renderDndMenu,hide:r},{label:$e.t("Resume notifications now"),key:"turn-off-dnd",hide:!r,click:s?this.props.endDndSnooze:this.props.endDndSchedule},{type:"submenu",label:$e.t("Adjust time"),renderSubmenu:this.renderDndMenu,hide:!r||r&&!s},{label:$e.t("Adjust schedule\u2026",{fallbackHash:"ce0d0efeb198eef758ed1a5393ca0a0f33012be6"}),key:"adjust-dnd-schedule",hide:!r||r&&s,click:()=>this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"})},{type:"separator",key:"dnd-separator",hide:!r},{label:$e.t("Clear status"),hide:!Object(je.ab)(a),click:()=>{this.props.updateCurrentMemberProfile({profile:{status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0}})}},{label:Object(je.ab)(a)?$e.t("Edit status"):$e.t("Set a status"),shortcut:Object(E.q)()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:this.props.openCustomStatusDialog},{label:this.renderPresenceLabel(),key:"set-active-away",click:this.props.toggleUserPresence},{type:"separator",key:"header-separator"},{label:$e.t("Profile & account"),click:()=>Object(Ge.i)(a.id)},{label:$e.rt("Notification preferences"),key:"notification-preferences",click:()=>this.props.openPrefsModal({activeSection:"notifications"})},{type:"custom",children:i.a.createElement("div",{className:"p-global_nav__top_menu_cap",key:"user-menu-bottom-cap"})}].filter(e=>!e.hide),p=d()({"p-global_nav__top_user_menu":!0,"p-global_nav__top_user_menu--dnd":r});return i.a.createElement(H.a,Object(n.a)({},c,{template:l,menuClassNames:p,noMargin:!0}))}}user_menu_UserMenu.defaultProps=et;var tt={openCustomStatusDialog:xe.a,toggleUserPresence:Be.h,updateCurrentMemberProfile:Ue.a,endDndSnooze:Le.b,endDndSchedule:Le.a,openPrefsModal:$.a},at=Object(o.b)(e=>{var t=Object(oe.b)(e),a=Object(He.a)(e),{snoozeEnabled:n}=Object(qe.f)(e);return{actions:Ze(e),currentMember:t,currentPresence:Object(Be.e)(e),currentChannel:Object(We.e)(e,a,!1)||void 0,inDnd:!!Object(qe.d)(e,t.id),inDndBySnooze:n,featureGlobalNav:Object(O.m)(e,"feature_global_nav")}},tt)(user_menu_UserMenu),nt=new c.b("global_nav"),rt={userId:void 0,hasCustomStatus:!1,openCustomStatusDialog:r.a,featureGlobalNav:!1};class user_User extends s.Component{constructor(e){super(e),this.onUserClick=this.onUserClick.bind(this),this.onStatusClick=this.onStatusClick.bind(this),this.renderMenu=this.renderMenu.bind(this)}onUserClick(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_USER_MENU"}}})}onStatusClick(){this.props.openCustomStatusDialog(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CUSTOM_STATUS"}}})}renderMenu(e){return i.a.createElement(at,e)}render(){var{userId:e,hasCustomStatus:t,featureGlobalNav:a}=this.props;if(!e||!a)return null;var n=t&&i.a.createElement(V.c,{onClick:this.onStatusClick,className:"p-global_nav__top_user_status_button","aria-label":nt.t("Edit status")},i.a.createElement(De.b,{memberId:e,tipPosition:"bottom-right",className:"p-global_nav__top_user_status"}),i.a.createElement(U.b,{type:"pencil",className:"p-global_nav__top_user_status_edit"}));return i.a.createElement("div",{className:"p-global_nav__top_user"},n,i.a.createElement(H.e,{renderMenu:this.renderMenu,position:"bottom-right",offsetX:4,offsetY:10,allowanceX:12,onClick:this.onUserClick},i.a.createElement(V.c,{"aria-label":nt.t("User menu")},i.a.createElement(Re.c,{userId:e,size:32,showBadge:!1,isInteractive:!1,className:d()({"p-global_nav__top_user_avatar":!0,"p-global_nav__top_user_avatar--beside-status":t}),tabIndex:"-1"}),i.a.createElement(Fe.a,{memberId:e,className:"p-global_nav__top_user_presence",inline:!1}))))}}user_User.defaultProps=rt;var st={openCustomStatusDialog:xe.a},it=Object(o.b)(e=>({userId:Object(O.d)(e),hasCustomStatus:Object(je.ab)(Object(oe.b)(e)),featureGlobalNav:Object(O.m)(e,"feature_global_nav"),clogger:Object(P.a)({state:e})}),st)(user_User),ot=a("yU6Y"),ct=a.n(ot),lt=a("V0Bv"),dt=a("F6LU"),pt=a("qkTT"),ut=a("zoXk"),ht=a("HvGc"),mt=a("KDee"),bt={active:!1,children:void 0,className:void 0};class flex_button_FlexButton extends s.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){var{pane:e,active:t,clogger:a}=this.props;"team"===e?Object(Ge.m)():"starred_items"===e&&Object(w.a)()?t?this.props.closeFlexpane():this.props.showStarredItemsList():"activity"===e?this.props.toggleActivityFlexpane():Object(mt.d)(e),"mentions"===e?a.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_ACTIVITY"}}}):"stars"===e&&a.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_STARS"}}})}render(){var{icon:e,tooltip:t,pane:a,active:n,children:r,"aria-label":s}=this.props,o=d()("p-global_nav__top_button","p-global_nav__top_flex","p-global_nav__top_flex--".concat(a),n&&"p-global_nav__top_flex--active",this.props.className);return i.a.createElement(q.c,{tip:t,delay:q.a,position:"bottom",offsetY:Zt},i.a.createElement(V.c,{className:o,onClick:this.onClick,"aria-label":s},i.a.createElement(U.b,{type:e,className:"p-global_nav__top_button_icon"}),r))}}flex_button_FlexButton.defaultProps=bt;var _t=Object(o.b)((e,t)=>{var{pane:a}=t;return{active:Object(ut.j)(e)===a,clogger:Object(P.a)({state:e})}},e=>({toggleActivityFlexpane:()=>e(Object(ht.q)()),showStarredItemsList:()=>e(Object(ht.k)()),closeFlexpane:()=>e(Object(ht.a)())}))(flex_button_FlexButton),gt=new c.b("global_nav"),ft=e=>{var{reactionToast:t,noAnimation:a,featureGlobalNav:n}=e;if(!n)return null;var r=t&&i.a.createElement(pt.b,{text:":".concat(t.emoji,":"),emojiSize:pt.a.LARGE,className:"p-global_nav__top_activity_toast"}),o=!(ct.a.chrome&&!h.W)&&i.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(E.q)()?"\u2318\u21e7M":"Ctrl+Shift+M"),c=t?i.a.createElement(s.Fragment,null,Object(dt.a)(t.memberName),i.a.createElement("br",null),i.a.createElement("span",{className:"sk_foreground_high"},Object(dt.a)(t.channelName))):i.a.createElement(s.Fragment,null,gt.t("Activity"),o),l=d()({"p-global_nav__top_activity":!0,"p-global_nav__top_activity--no-animation":a,"p-global_nav__top_activity--toasting":t});return i.a.createElement("div",{className:l},i.a.createElement(_t,{icon:"mentions",pane:"activity",tooltip:c,"aria-label":gt.t("Activity")}),r)};ft.defaultProps={reactionToast:void 0,noAnimation:!1,featureGlobalNav:!1};var vt=Object(o.b)(e=>({reactionToast:Object(lt.b)(e),noAnimation:!Object(G.k)(e,"a11y_animations"),featureGlobalNav:Object(O.m)(e,"feature_global_nav")}))(ft),Ot=new c.b("global_nav"),yt={isUserRestricted:!1,isPaid:!1,isEnterprise:!1,userId:void 0,showFileList:r.a,showDownloads:r.a,showKeyboardShortcuts:r.a,showWhatsNew:r.a,showUserGroupList:r.a,showUserCalendar:r.a,featureCalendarSimpleAgendaView:!1,featureGlobalNav:!1,featureSonicUserGroups:!1,openHelpModal:r.a};class flexpanes_menu_FlexpanesMenu extends s.PureComponent{constructor(e){super(e),this.onTriggerClick=this.onTriggerClick.bind(this),this.clogItem=this.clogItem.bind(this),this.renderMenu=this.renderMenu.bind(this)}onTriggerClick(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU"}}})}clogItem(e){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU_ITEM"}},flex_name:e})}renderMenu(e){var{featureGlobalNav:t,featureSonicUserGroups:a,isUserRestricted:r,isPaid:s,isEnterprise:o,userId:c}=this.props;if(!t)return null;var l=[{label:Ot.t("Your events"),icon:i.a.createElement(U.b,{type:"all-files-alt"}),click:()=>{this.props.showUserCalendar(),this.clogItem("calendar")},hide:!this.props.featureCalendarSimpleAgendaView},{label:Ot.t("Files"),icon:i.a.createElement(U.b,{type:"all-files-alt"}),click:()=>{this.props.showFileList({user:c}),this.clogItem("files_user")}},{label:Ot.t("Downloads"),icon:i.a.createElement(U.b,{type:"cloud-download"}),click:()=>{this.props.showDownloads({user:c}),this.clogItem("downloads")},hide:!h.W},{type:"separator"},{label:o?Ot.t("Organization Directory"):Ot.t("Workspace Directory"),icon:i.a.createElement(U.b,{type:"team-directory"}),shortcut:!ct.a.firefox&&(Object(E.q)()?"\u2318\u21e7E":"Ctrl+Shift+E"),click:()=>{Object(Ge.m)(),this.clogItem("team")}},{label:Ot.t("User Groups"),icon:i.a.createElement(U.b,{type:"user-groups"}),click:()=>{a?this.props.showUserGroupList():Object(Ge.l)(),this.clogItem("groups")},hide:r||!s},{type:"separator"},{label:Ot.t("What\u2019s New"),icon:i.a.createElement(U.b,{type:"emoji-celebration"}),click:()=>{this.props.showWhatsNew(),this.clogItem("whats_new")}},{label:Ot.t("Keyboard Shortcuts"),icon:i.a.createElement(U.b,{type:"keyboard"}),shortcut:Object(E.q)()?"\u2318/":"Ctrl+/",click:()=>{this.props.showKeyboardShortcuts(),this.clogItem("shortcuts")}},{label:Ot.t("Help"),icon:i.a.createElement(U.b,{type:"question-circle"}),click:()=>{this.props.openHelpModal({trigger:"flex_menu"}),this.clogItem("help")}}].filter(e=>!e.hide);return i.a.createElement(H.a,Object(n.a)({},e,{menuClassNames:"p-global_nav__top_flexpanes_menu",template:l,stripTerminalSeparators:!0,width:Object(E.q)()?void 0:360}))}render(){return this.props.featureGlobalNav?i.a.createElement(H.e,{position:"bottom-right",renderMenu:this.renderMenu,offsetY:$t,onClick:this.onTriggerClick},i.a.createElement(q.c,{tip:Ot.t("More options"),position:"bottom",delay:q.a,offsetY:Zt},i.a.createElement(V.c,{className:"p-global_nav__top_button p-global_nav__top_button--flexpanes","aria-label":Ot.t("More options")},i.a.createElement(U.b,{type:"vertical-ellipsis",className:"p-global_nav__top_button_icon"})))):null}}flexpanes_menu_FlexpanesMenu.defaultProps=yt;var Ct={showFileList:ht.g,showKeyboardShortcuts:function(){return Object(ht.h)(...arguments)},showDownloads:ht.f,showWhatsNew:ht.p,showUserGroupList:ht.o,showUserCalendar:ht.m,openHelpModal:ae.a},jt=Object(o.b)(e=>({isUserRestricted:Object(je.Gb)(Object(oe.b)(e)),isPaid:Object(K.D)(Object(F.d)(e)),isEnterprise:Object(O.q)(e),userId:Object(O.d)(e),featureCalendarSimpleAgendaView:Object(O.m)(e,"feature_calendar_simple_agenda_view"),featureGlobalNav:Object(O.m)(e,"feature_global_nav"),featureSonicUserGroups:Object(O.m)(e,"feature_sonic_user_groups"),clogger:Object(P.a)({state:e})}),Ct)(flexpanes_menu_FlexpanesMenu),Et=a("Go8C"),kt=a("7ARk"),St=a("m5Fn"),It=a("UXvI"),wt=a("cMxN"),Tt=a("YYb+"),Nt=a("9/ob"),Pt=a("HXD8"),At=a("F8qq"),Mt=a("Zr7G"),xt=a("YDA8"),Rt=a("Rjjz"),Dt=a("NPpR"),Ft={displayQuery:"",telemeter:Mt.d};class autocomplete_input_in_primary_search_AutocompleteInputInPrimarySearch extends s.PureComponent{constructor(e){super(e),Object(u.a)(this,["onClick","onSearchInputBoxFocus","onSearchInputBoxEscape","onSearchAutocompleteSuggestionAccept"]),this.precacheSearch=Object(It.a)(this.precacheSearch.bind(this),6e4)}onClick(){this.props.autocompleteIsOpen||this.props.openSearchAutocomplete()}onSearchInputBoxFocus(){this.props.openSearchAutocomplete(),this.precacheSearch()}onSearchInputBoxEscape(){this.props.closeSearchAutocomplete()}onSearchAutocompleteSuggestionAccept(){Object(Pt.e)(this.props.telemeter),this.props.searchAutocompleteSuggestionAccept()}precacheSearch(){this.props.searchPrecache()}render(){var e=d()({"p-global_nav__top_search":!0,"p-global_nav__top_search--browser":!h.W,"p-global_nav__top_search--primarysearch":!0,"p-global_nav__top_search--primarysearch_open":this.props.autocompleteIsOpen});return i.a.createElement(Nt.a,{enabled:["feature_primary_search"]},i.a.createElement(V.c,{className:e,onClick:this.onClick},i.a.createElement(Dt.a,{autoFocus:!1,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus})))}}autocomplete_input_in_primary_search_AutocompleteInputInPrimarySearch.defaultProps=Ft;var Lt={searchPrecache:Rt.s,openSearchAutocomplete:Tt.f,closeSearchAutocomplete:Tt.a,searchAutocompleteSuggestionAccept:At.a},Ut=Object(o.b)(e=>({autocompleteIsOpen:Object(Tt.e)(e),displayQuery:Object(Et.b)(e),telemeter:Object(Mt.c)({state:e})}),Lt)(autocomplete_input_in_primary_search_AutocompleteInputInPrimarySearch),Bt={telemeter:Mt.d};class autocomplete_in_primary_search_AutocompleteInPrimarySearch extends s.PureComponent{constructor(e){super(e),Object(u.a)(this,["handleClick","onSearchAutocompleteSuggestionAccept","handleAutocompleteRef"]),this.calculatePopoverConstraints=Object(It.a)(this.calculatePopoverConstraints.bind(this),1e3),this.searchHeaderBackdrop=Object(s.createRef)(),this.state={hasCalculatedConstraints:!1,overlayStyle:{marginTop:0},contentStyle:{top:0,left:0,width:200}},this.autocompleteInputRef=null}onSearchAutocompleteSuggestionAccept(){Object(Pt.e)(this.props.telemeter),this.props.searchAutocompleteSuggestionAccept()}calculatePopoverConstraints(){if(this.autocompleteInputRef){var e=Object(le.findDOMNode)(this.autocompleteInputRef),t=e.getBoundingClientRect(),a=e.parentElement.getBoundingClientRect();this.setState(()=>({hasCalculatedConstraints:!0,overlayStyle:{marginTop:a.bottom},contentStyle:{top:0,left:t.left-10,width:t.width+20}}))}}handleAutocompleteRef(e){this.autocompleteInputRef=e,e&&this.calculatePopoverConstraints()}handleClick(e){this.searchHeaderBackdrop&&this.searchHeaderBackdrop.current===e.target&&this.props.closeAutocomplete()}render(){var{isOpen:e,closeAutocomplete:t}=this.props,a=e&&this.state.hasCalculatedConstraints;return i.a.createElement(Nt.a,{enabled:["feature_primary_search"]},a&&i.a.createElement("div",{className:"c-search_autocomplete__header_backdrop",ref:this.searchHeaderBackdrop,onClick:this.handleClick}),i.a.createElement(Ut,{ref:this.handleAutocompleteRef}),i.a.createElement(wt.a,{ariaRole:"dialog",ariaLabel:"Search",isOpen:a,position:"bottom-right",onClose:t,shouldFade:!1,overlayClassName:"c-popover c-search_modal c-search_modal--autocomplete c-search_modal--primarysearch",allowanceX:20,allowanceY:0,shouldFocusAfterRender:!1,shouldReturnFocusAfterClose:!1,onResize:this.calculatePopoverConstraints,shouldObserveResize:!0,contentStyle:this.state.contentStyle,overlayStyle:this.state.overlayStyle},e&&i.a.createElement("div",{className:"c-search-autocomplete"},i.a.createElement(xt.a,{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept}))))}}autocomplete_in_primary_search_AutocompleteInPrimarySearch.defaultProps=Bt;var Ht={closeAutocomplete:Tt.a,searchAutocompleteSuggestionAccept:At.a},Wt=Object(o.b)(e=>({userQuery:Object(Et.d)(e),isOpen:Object(Tt.e)(e),telemeter:Object(Mt.c)({state:e})}),Ht)(autocomplete_in_primary_search_AutocompleteInPrimarySearch),qt=a("lek6"),Gt=a("iH/p"),Kt=a("V18M");function Vt(e){return"Vsearch"===Object(He.a)(e)}var zt=new c.b("search"),Yt={displayQuery:void 0,orgName:void 0,teamName:void 0,openFromClick:r.a,clearSearchInputField:r.a};class search_placeholder_input_SearchPlaceholderInput extends s.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.onClearClick=this.onClearClick.bind(this)}onClick(){this.props.isPrimarySearchFeatureEnabled?this.props.openSearchAutocomplete():this.props.openFromClick(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_SEARCH"}}})}onClearClick(e){e.stopPropagation(),this.props.clearSearchInputField()}render(){var{displayQuery:e,orgName:t,teamName:a,isPrimarySearchFeatureEnabled:n,showSearchAsActive:r}=this.props,o=e?i.a.createElement(s.Fragment,null,i.a.createElement(qt.a,{text:e,className:"p-global_nav__top_search_text",customLineEnding:" ",showTooltips:!1,noLinking:!0,noSpecials:!0,noHighlights:!0}),i.a.createElement(V.c,{className:"p-global_nav__top_search_clear",onClick:this.onClearClick,label:zt.t("Clear")},i.a.createElement(U.b,{type:"times-small"}))):i.a.createElement("span",{className:"p-global_nav__top_search_text p-global_nav__top_search_text--placeholder"},zt.rt("Search {teamName}",{teamName:t||a||""})),c=d()({"p-global_nav__top_search":!0,"p-global_nav__top_search--no_history":!0}),l=!n||!r;return i.a.createElement(s.Fragment,null,l&&i.a.createElement(V.c,{className:c,onClick:this.onClick},i.a.createElement(U.b,{type:"search-medium",className:"p-global_nav__top_search_icon"}),o),!n&&i.a.createElement(St.a,null),!l&&i.a.createElement(Wt,null))}}search_placeholder_input_SearchPlaceholderInput.defaultProps=Yt;var Qt={openSearchAutocomplete:Tt.f,openFromClick:Gt.c,clearSearchInputField:kt.a},Xt=Object(o.b)(e=>({displayQuery:Object(Et.b)(e),orgName:Object(F.e)(e)||"",teamName:Object(K.e)(Object(F.d)(e)),clogger:Object(P.a)({state:e}),isPrimarySearchFeatureEnabled:Object(Kt.a)(e),showSearchAsActive:Vt(e)||Object(Tt.e)(e)}),Qt)(search_placeholder_input_SearchPlaceholderInput),Jt=(a("AByf"),new c.b("global_nav")),Zt=-12,$t=-4,ea=e=>{var{theme:t,renderSonicMenu:a,featureGlobalNav:n}=e;if(!n)return null;var r=d()("p-global_nav__top",t&&"p-global_nav__top--theme-".concat(t));return i.a.createElement("div",{className:r},i.a.createElement(Me,{renderSonicMenu:a}),i.a.createElement("div",{className:"p-global_nav__top_spacer"}),i.a.createElement(Xt,null),i.a.createElement("div",{className:"p-global_nav__top_spacer--fill"}),i.a.createElement(vt,null),i.a.createElement(_t,{icon:"star-o",pane:Object(w.a)()?"starred_items":"stars",tooltip:i.a.createElement(s.Fragment,null,Jt.t("Starred items"),i.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(E.q)()?"\u2318\u21e7S":"Ctrl+Shift+S")),"aria-label":Jt.t("Starred items")}),i.a.createElement(jt,null),i.a.createElement("div",{className:"p-global_nav__top_spacer"}),i.a.createElement(it,null))};ea.defaultProps={theme:void 0,renderSonicMenu:void 0,featureGlobalNav:!1};Object(o.b)(e=>({theme:Object(G.k)(e,"sidebar_theme"),featureGlobalNav:Object(O.m)(e,"feature_global_nav")}))(ea);var ta=new c.b("team_picker");class add_team_button_AddTeamButton extends s.PureComponent{render(){var{featureClassicNav:e,isDragInProgress:t}=this.props,a={onClick:this.props.startWorkspaceSignIn},r=d()("p-team_sidebar__add_button",{"p-team_sidebar__add_button--mac":e&&Object(E.q)()}),s={opacity:t?0:1},o=ta.t("Add a new workspace");return i.a.createElement(q.c,{tip:o,position:e?"right":"bottom-left",delay:q.a,offsetX:e?5:0,offsetY:e?0:Zt,style:s},i.a.createElement(B.a,Object(n.a)({"aria-label":o},a,{className:r}),i.a.createElement(U.b,{type:"plus-thick",className:"p-team_sidebar__add_button_icon"})))}}add_team_button_AddTeamButton.defaultProps={featureClassicNav:!1,isDragInProgress:!1};var aa=Object(o.b)(()=>({locale:Object(R.a)()}))(add_team_button_AddTeamButton),na=a("rePB"),ra=a("9oTK"),sa=a("vJtL"),ia=a("eD8c"),oa=a("G3Sk"),ca=a("derf");function la(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var da=new c.b("team_picker"),pa={order:0,isActive:!1,failedToBoot:!1,shadow:1,hasUnreads:!1,mentionCount:0,icon:null,shouldShowKeyboardShortcut:!1,hasSessionExpired:!1,forwardedRef:void 0,isDragging:!1,draggableProps:{},dragHandleProps:{},onItemActive:r.a},ua=99;function ha(){return(ha=Object(ra.coroutine)(function*(e){var{removeWorkspaceFromPreviousWorkspaces:t}=yield Promise.resolve().then(a.bind(null,"s5Is")),{dispatchForClientStore:n}=yield Promise.resolve().then(a.bind(null,"lhZz"));n(t(e))})).apply(this,arguments)}class team_sidebar_item_TeamSidebarItem extends s.Component{constructor(e){super(e),Object(u.a)(this,["getContextMenuTemplate","renderShortcutHint","renderBadge","setRef"])}componentDidMount(){this.props.isActive&&this.props.onItemActive(this.ref)}componentDidUpdate(e){this.props.isActive&&!e.isActive&&this.props.onItemActive(this.ref)}getTooltip(){var{teamName:e,order:t}=this.props,a=t+1;if(!h.W||a>9)return e;var n=Object(E.q)()?"\u2318".concat(a):"Ctrl+".concat(a),r=da.t("Press {shortcut} to switch",{shortcut:n});return i.a.createElement("span",null,e," ",i.a.createElement("span",{className:"sk_foreground_high"},r))}getContextMenuTemplate(){var{teamId:e,teamName:t,signOutFromTeam:a,hasTeamBooted:n,hasSessionExpired:r}=this.props,s=t&&t.replace(/&/g,"&&");return[{label:"".concat(da.t("&Sign out of")," ").concat(s),enabled:r||n,click:()=>{Object(T.b)().info("TEAM-SIDEBAR","context-menu sign-out teamId:".concat(e," hasSessionExpired:").concat(r)),r?function(e){ha.apply(this,arguments)}(e):a(e)}}]}setRef(e){if(e){this.ref=e;var{forwardedRef:t}=this.props;t&&(Object(sa.a)(t)?t(e):t.current=e)}}renderShortcutHint(){var{order:e,shouldShowKeyboardShortcut:t}=this.props,a=e+1,n=d()("p-team_sidebar__shortcut_hint",{"p-team_sidebar__shortcut_hint--visible":t});return a<=9?i.a.createElement("div",{className:n},a):null}renderBadge(){var{hasUnreads:e,mentionCount:t,hasSessionExpired:a}=this.props,n="";return a?n=i.a.createElement("div",{className:"p-team_sidebar__signed_out_badge"},i.a.createElement(U.b,{type:"warning",className:"p-team_sidebar__signed_out_badge__stroke"}),i.a.createElement(U.b,{type:"warning-filled"})):t?n=i.a.createElement("div",{className:"p-team_sidebar__mentions_badge"},i.a.createElement("span",null,t>ua?"".concat(ua,"+"):t)):e&&(n=i.a.createElement("div",{className:"p-team_sidebar__unread_dot"})),n}render(){var{icon:e,isActive:t,teamName:a,hasTeamBooted:r,draggableProps:s,dragHandleProps:o,isDragging:c,onClick:l,teamId:p}=this.props,u=d()("p-team_sidebar__item",{"p-team_sidebar__item--active":t,"p-team_sidebar__item--is_dragging":c,"p-team_sidebar__item--mac":Object(E.q)()}),h=d()("p-team_sidebar__icon",{"p-team_sidebar__icon--active":t,"p-team_sidebar__icon--is_dragging":c}),m=r?ca.b:ca.a;return i.a.createElement(q.c,{position:"right",offsetX:5,tip:this.getTooltip()},i.a.createElement(V.c,Object(n.a)({},s,o,{ref:this.setRef,onClick:()=>l(p),className:u,"data-qa":"team_sidebar_item","aria-label":a,role:"tab","aria-selected":t}),i.a.createElement(ia.a,{getTemplate:this.getContextMenuTemplate,overrideDefaultMenu:!0,desktopAppOnly:!1},i.a.createElement("div",{className:h},i.a.createElement(m,{icon:e,size:36,teamName:a,className:"p-team_sidebar__image"}))),this.renderBadge(),this.renderShortcutHint()))}}team_sidebar_item_TeamSidebarItem.defaultProps=pa;var ma=Object(o.b)(function(e,t){if(function(e){return e&&e.workspaces}(e)||t.failedToBoot)return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?la(Object(a),!0).forEach(function(t){Object(na.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):la(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t,{hasTeamBooted:!1});var a=Object(F.d)(e),n=Object(K.h)(a);return{hasTeamBooted:!0,hasUnreads:Object(oa.o)(e),mentionCount:Object(oa.f)(e),icon:n,teamName:a.name}})(team_sidebar_item_TeamSidebarItem),ba=i.a.forwardRef((e,t)=>i.a.createElement(ma,Object(n.a)({},e,{forwardedRef:t}))),_a=a("W+QA"),ga=a("Lev8"),fa=a("VMwU"),va={"-3":.7,"-2":.8,"-1":.9,0:1,1:1.1,2:1.25,3:1.5},Oa=e=>{var t,{sidebarTheme:a,sidebarThemeCustomValues:n,featureClassicNav:r,clientTheme:o,isWindowFrameless:c}=e,[l,d]=Object(s.useState)(h.W&&Object(h.P)()),p=Object(s.useCallback)(()=>{d(h.W&&Object(h.P)())},[]);Object(s.useEffect)(()=>(window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}),[p]);try{t=JSON.parse(n)}catch(O){t=fa.a}var u=Object(_a.c)(a,t,{clientTheme:o})||fa.a,m=u.text_color,b=Object(fa.c)(u.column_bg,20),_=r?b:u.column_bg,g=va[l]||1,f="\n\t\t.p-client--show-team-sidebar {\n\t\t\tgrid-template-columns: ".concat(Math.round(68/g),"px auto;\n\t\t}\n\t\t.p-team_sidebar--frameless:before {\n\t\t\twidth: ").concat(Math.round(68/g),"px;\n\t\t}\n\t"),v="\n\t\t.p-team_sidebar,\n\t\t.p-team_sidebar--frameless::before {\n\t\t\tbackground: ".concat(_,";\n\t\t}\n\n\t\t.p-team_sidebar__item {\n\t\t\tcolor: ").concat(u.text_color,";\n\t\t}\n\n\t\t.p-team_sidebar__add_button,\n\t\t.p-team_sidebar__add_button:hover,\n\t\t.p-team_sidebar__add_button:focus,\n\t\t.p-team_sidebar__add_button:active {\n\t\t\tcolor: ").concat(Object(fa.i)(u.text_color,50),";\n\t\t}\n\n\t\t.p-team_sidebar__add_button {\n\t\t\tbackground: ").concat(_,";\n\t\t\tborder-color: ").concat(Object(fa.m)(u.text_color,.3),";\n\t\t}\n\n\t\t.p-team_sidebar__add_button:hover,\n\t\t.p-team_sidebar__add_button:focus,\n\t\t.p-team_sidebar__add_button:active {\n\t\t\tborder-color: ").concat(u.text_color,";\n\t\t\tbackground: ").concat(Object(fa.c)(u.column_bg,60),";\n\t\t\tbox-shadow: 0 0 0 3px ").concat(_,",\n\t\t\t0 0 0 6px ").concat(Object(fa.m)(u.text_color,.3),";\n\t\t}\n\n\t\t.p-team_sidebar__unread_dot,\n\t\t.p-team_sidebar__mentions_badge {\n\t\t\tborder-color: ").concat(_,";\n\t\t}\n\n\t\t.p-team_sidebar__mentions_badge {\n\t\t\tbackground: ").concat(u.badge,";\n\t\t}\n\n\t\t.p-team_sidebar__unread_dot {\n\t\t\tbackground: ").concat(u.text_color,"\n\t\t}\n\n\t\t.p-team_sidebar__item.c-button--focus-visible:focus,\n\t\t.p-team_sidebar__add_button.c-link--focus-visible:focus {\n\t\t\tbox-shadow: ").concat(function(e,t,a){return"0 0 0 3px ".concat(t,", 0 0 0 4px ").concat(e,", 0 0 0 6px ").concat(a)}(m,_,Object(fa.m)(m,.3)),";\n\t\t}\n\n\t\t.c-button--focus-visible:focus .p-team_sidebar__icon--active {\n\t\t\tbox-shadow: none;\n\t\t}\n\n\t\t.p-team_sidebar__signed_out_badge__stroke {\n\t\t\t-webkit-text-stroke: 6px ").concat(_,";\n\t\t\tcolor: ").concat(_,";\n\t\t}\n\n\t\t.p-team_sidebar__icon:hover {\n\t\t\tbox-shadow: 0 0 0 3px ").concat(_,",\n\t\t\t0 0 0 6px ").concat(Object(fa.m)(u.text_color,.3),";\n\t\t}\n\n\t\t.p-team_sidebar__icon--active,\n\t\t.p-team_sidebar__icon--active:hover {\n\t\t\tbox-shadow: 0 0 0 3px ").concat(_,",\n\t\t\t0 0 0 6px ").concat(u.text_color,";\n\t\t}\n\n\t\t").concat(h.W&&c?f:"","\n\t");return i.a.createElement("style",{className:"p-team_sidebar__theme"},v)};Oa.defaultProps={featureClassicNav:!1,clientTheme:"light",isWindowFrameless:!1};var ya=Object(o.b)(e=>{return{sidebarTheme:Object(G.k)(e,"sidebar_theme"),sidebarThemeCustomValues:Object(G.k)(e,"sidebar_theme_custom_values"),featureClassicNav:Object(O.m)(e,"feature_classic_nav"),clientTheme:Object(ga.c)(e),isWindowFrameless:Object(y.l)(e)}})(Oa),Ca=a("kiPk"),ja=a("MIIS");function Ea(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}class dock_badge_listener_DockBadgeListener extends i.a.PureComponent{constructor(e){super(e),this.onWorkspaceBadgeUpdated=this.onWorkspaceBadgeUpdated.bind(this),this.updateAggregatedBadge=this.updateAggregatedBadge.bind(this)}onWorkspaceBadgeUpdated(){var{id:e,unreadCnt:t,unreadHighlightCnt:a,badgeDockIcon:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState(r=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(a),!0).forEach(function(t){Object(na.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ea(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e})({},r,{[e]:{unreadHighlightCnt:a,unreadCnt:t,badgeDockIcon:n}}),this.updateAggregatedBadge)}updateAggregatedBadge(){var e=Object(M.a)(this.state),t=Object(Ca.a)(e,e=>e.unreadHighlightCnt),a=Object(Ca.a)(e.filter(e=>e.badgeDockIcon),e=>e.unreadCnt),n=e.some(e=>e.badgeDockIcon);Object(h.Tb)(t,a,n)}render(){return this.props.workspaces.map(e=>({teamId:e,store:Object(m.getStoreInstanceByTeamId)(e)})).map(e=>{var{teamId:t,store:a}=e;return i.a.createElement(ja.a,{store:a,key:t,render:e=>i.a.createElement(dock_badge_listener_WorkspaceBadgeItem,{id:t,onBadgeUpdated:this.onWorkspaceBadgeUpdated,unreadHighlightCnt:Object(oa.f)(e),unreadCnt:Object(oa.g)(e),badgeDockIcon:Object(G.k)(e,"mac_ssb_bullet")})})})}}class dock_badge_listener_WorkspaceBadgeItem extends i.a.PureComponent{componentDidUpdate(){this.props.onBadgeUpdated({id:this.props.id,unreadCnt:this.props.unreadCnt,unreadHighlightCnt:this.props.unreadHighlightCnt,badgeDockIcon:this.props.badgeDockIcon})}render(){return null}}dock_badge_listener_WorkspaceBadgeItem.defaultProps={unreadCnt:!1,unreadHighlightCnt:0,badgeDockIcon:!0};a("3dej");var ka=new c.b("sonic-toolbar"),Sa={selectedTeamStore:void 0,bootedWorkspaces:{},failedToBootWorkspaces:[],className:void 0,featureClassicNav:!1,allWorkspaces:[],isWindowFrameless:!1,willNavigateToUnbootedWorkspaceId:void 0,composerVisible:!1,iaPhase1IsEnabled:!1,userAttentionIsOnChat:!1,removeFromSectionNavigation:r.a,addToSectionNavigation:r.a,clogger:{track:r.a}},Ia={One:49,Nine:57,NumOne:97,NumNine:105},wa=(e,t,a)=>{var n=[...e],[r]=n.splice(t,1);return n.splice(a,0,r),n},Ta=e=>{var{teamId:t,selectedTeamId:a,willNavigateToUnbootedWorkspaceId:n}=e;return t===n||!n&&t===a};class team_sidebar_TeamSidebar extends s.Component{constructor(e){super(e),this.state={isModifierPressed:!1},this.currentActiveTeamIndex=null,Object(u.a)(this,["onKeyDown","onKeyUp","onWindowBlur","selectTeamByIndex","onDragEnd","onItemActive","focus","selectTeam"])}componentDidMount(){h.W&&(window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),window.addEventListener("blur",this.onWindowBlur))}componentDidUpdate(e){var t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(C.a)(t)&&this.props.addToSectionNavigation(),Object(j.a)(t)&&this.props.removeFromSectionNavigation()}componentWillUnmount(){h.W&&(window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),window.removeEventListener("blur",this.onWindowBlur))}onWindowBlur(){var{isModifierPressed:e}=this.state;e&&this.setState(()=>({isModifierPressed:!1}))}onKeyDown(e){var t=Object.keys(this.props.teams).length,a=Object(E.q)()?e.metaKey:e.ctrlKey;if(!e.shiftKey&&a&&t>0){var n=this.keyCodeInRange(e,Ia.One,Ia.Nine),r=this.keyCodeInRange(e,Ia.NumOne,Ia.NumNine);if(n||r){e.preventDefault();var s=e.keyCode-(n?Ia.One:Ia.NumOne);t>s&&this.selectTeamByIndex(s)}}a&&!e.shiftKey?this.setState(()=>({isModifierPressed:!0})):this.state.isModifierPressed&&this.setState(()=>({isModifierPressed:!1})),!e.shiftKey&&e.ctrlKey&&"Tab"===e.key?(e.preventDefault(),this.currentActiveTeamIndex>=this.props.allWorkspaces.length-1?this.selectTeamByIndex(0):this.selectTeamByIndex(this.currentActiveTeamIndex+1)):e.shiftKey&&e.ctrlKey&&"Tab"===e.key&&(e.preventDefault(),this.currentActiveTeamIndex<1?this.selectTeamByIndex(this.props.allWorkspaces.length-1):this.selectTeamByIndex(this.currentActiveTeamIndex-1))}onKeyUp(e){!(Object(E.q)()?e.metaKey:e.ctrlKey)&&this.state.isModifierPressed&&this.setState(()=>({isModifierPressed:!1}))}onItemActive(e){this.activeItemRef=e}onDragEnd(e){var{destination:t,source:a}=e;if(t){var{allWorkspaces:n,setTeamOrder:r}=this.props;a.index>=n.length||r(wa(n,a.index,t.index))}}focus(){this.activeItemRef&&this.activeItemRef.focus()}keyCodeInRange(e,t,a){var{keyCode:n}=e;return n>=t&&n<=a}selectTeam(e){var{bootedWorkspaces:t,failedToBootWorkspaces:a,teams:n,selectedTeamStore:r,selectedTeamId:s,clogger:i}=this.props;if(Object(I.b)(r.getState())){var o=t.includes(e),c=a.includes(e),l=n[e]&&n[e].isExpired;!o&&!c&&!l?this.props.setWillNavigateToUnbootedWorkspaceId(e):(this.props.setWillNavigateToUnbootedWorkspaceId(null),Object(b.g)(_.a,{teamId:e},{reason:"team-sidebar/selectTeam"}),i.track(N.EventId.TEAM_SIDEBAR_CLICK,{team_id:e,target_team_id:s,items_count:Object.keys(n).length,is_iap1:this.props.iaPhase1IsEnabled}))}else Object(T.b)().info("TEAM-SIDEBAR","Cannot switch workspaces because canUserSwitchWorkspaces returned false.")}selectTeamByIndex(e){var t=this.props.allWorkspaces;t[e]&&this.selectTeam(t[e])}renderSidebarItem(e,t){var{signOutFromTeam:a,teams:r,bootedWorkspaces:s,selectedTeamId:c,failedToBootWorkspaces:l,willNavigateToUnbootedWorkspaceId:d}=this.props,{isModifierPressed:u}=this.state,{icon:h,name:b,isExpired:_}=r[e],g=s.includes(e),f=l.includes(e),v=Ta({teamId:e,selectedTeamId:c,willNavigateToUnbootedWorkspaceId:d});e===c&&this.currentActiveTeamIndex!==t&&(this.currentActiveTeamIndex=t);var O={teamId:e,teamName:b,icon:h,order:t,isActive:v,onClick:this.selectTeam,signOutFromTeam:()=>a(e),key:e,shouldShowKeyboardShortcut:u,hasSessionExpired:_,failedToBoot:f};return i.a.createElement(p.b,{draggableId:e,key:e,index:t,disableInteractiveElementBlocking:!0},(t,a)=>{var{isDragging:r}=a,s=i.a.createElement(ba,Object(n.a)({ref:t.innerRef},O,{draggableProps:t.draggableProps,dragHandleProps:t.dragHandleProps,isDragging:r,onItemActive:this.onItemActive}));return g?i.a.createElement(o.a,{store:Object(m.getStoreInstanceByTeamId)(e),key:e},s):s})}renderAddTeamButton(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{iaPhase1IsEnabled:t,teams:a}=this.props;return t?i.a.createElement(o.a,{store:this.props.selectedTeamStore},i.a.createElement(W,{startWorkspaceSignIn:this.props.startWorkspaceSignIn,teams:a})):i.a.createElement(o.a,{store:this.props.selectedTeamStore},i.a.createElement(aa,Object(n.a)({startWorkspaceSignIn:this.props.startWorkspaceSignIn},e)))}renderTeamSidebarContents(e,t){var{isDraggingOver:a}=t,{allWorkspaces:r,featureClassicNav:o}=this.props,c=r.map((e,t)=>this.renderSidebarItem(e,t));return o?i.a.createElement(s.Fragment,null,i.a.createElement("div",Object(n.a)({role:"presentation",ref:e.innerRef},e.droppableProps,{className:"p-team_sidebar__teams"}),c,e.placeholder),this.renderAddTeamButton({featureClassicNav:!0,isDragInProgress:a})):i.a.createElement(s.Fragment,null,this.renderAddTeamButton(),i.a.createElement("div",{ref:e.innerRef,className:"p-team_sidebar__teams"},c,e.placeholder))}renderDesktopComponents(){var{bootedWorkspaces:e}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(dock_badge_listener_DockBadgeListener,{workspaces:e}))}render(){var{selectedTeamId:e,selectedTeamStore:t,featureClassicNav:a,isWindowFrameless:r}=this.props,c=t&&i.a.createElement(o.a,{store:t,key:e},i.a.createElement(ya,null)),l=d()(this.props.className,"p-team_sidebar",{"p-team_sidebar--classic_nav":a,"p-team_sidebar--frameless":r});return i.a.createElement(s.Fragment,null,c,h.W?this.renderDesktopComponents():null,i.a.createElement(p.a,{onDragEnd:this.onDragEnd},i.a.createElement(p.c,{droppableId:"droppable"},(e,t)=>{var{isDraggingOver:a}=t;return i.a.createElement("div",Object(n.a)({role:"tablist","aria-label":ka.t("Teams"),ref:e.innerRef},e.droppableProps,{"data-qa":"team_sidebar_scroll_container",className:l}),this.renderTeamSidebarContents(e,{isDraggingOver:a}))})))}}team_sidebar_TeamSidebar.defaultProps=Sa;var Na={startWorkspaceSignIn:v.startWorkspaceSignIn,signOutFromTeam:v.removeWorkspace,setTeamOrder:g.setWorkspaceOrder,setWillNavigateToUnbootedWorkspaceId:g.setWillNavigateToUnbootedWorkspaceId},Pa=Object(w.a)()?Object(S.a)(team_sidebar_TeamSidebar,"TeamSidebar",{index:4}):team_sidebar_TeamSidebar,Aa=Object(o.b)(function(e,t){var a=Object(m.getStoreInstanceByTeamId)(t.selectedTeamId),n=Object(f.getAllWorkspaces)(e),r=Object(f.getWillNavigateToUnbootedWorkspaceId)(e),s=Object(f.getFailedToBootWorkspaces)(e),i=Object(f.hasWorkspaceFailedToBoot)(e,t.selectedTeamId);return{teams:Object(f.getWorkspacesMeta)(e),willNavigateToUnbootedWorkspaceId:r,selectedTeamStore:a,allWorkspaces:n,bootedWorkspaces:Object(f.getBootedWorkspaces)(e),failedToBootWorkspaces:s,isWindowFrameless:Object(y.l)(e)&&!Object(A.f)(a.getState()),featureClassicNav:i||a&&Object(O.m)(a.getState(),"feature_classic_nav"),iaPhase1IsEnabled:Object(A.d)(a.getState()),clogger:Object(P.a)({state:a.getState()})}},Na)((e=>i.a.forwardRef((t,a)=>i.a.createElement(k.a.Consumer,null,r=>i.a.createElement(e,Object(n.a)({ref:a},t,{userAttentionIsOnChat:r})))))(Pa));t.a=Aa},xrsA:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("aK/h"),i=a("dhvi"),o=a("XfeM"),c=a("G4ux"),l=a("Fdc0"),d=a("nNoG"),p=a("kOzZ"),u=a("HOkk"),h=a("ANjH"),m=a("XHGt"),b=a("4qCO"),_=a("nlS/"),g=a("6kok"),f=a("vPEJ"),v=a("eR+M"),O=a("4M+g"),y=a("wfE8"),C=a("3C31"),j=a("WD4z"),E=(a("e31y"),new d.b("channel_invite")),k={DISABLED:"disabled",LOADING:"loading",ENABLED:"enabled"};class invite_member_to_channel_dialog_BaseInviteMemberToChannelDialog extends r.a.Component{constructor(e){super(e),this.state={addButtonState:k.DISABLED,isAlreadyMember:!1,selectedChannelId:void 0},this.onChannelSelected=this.onChannelSelected.bind(this),this.onAddToChannel=this.onAddToChannel.bind(this)}onChannelSelected(){var e=this,{value:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{member:a}=this.props,n=a.id;return this.setState(()=>({selectedChannelId:t,addButtonState:k.LOADING})),this.props.getChannelMembershipInfoForUsers({channelId:t,userIds:[n]}).then(function(){var{membershipInfo:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isMember:a}=t[n];return e.setState(()=>({addButtonState:a?k.DISABLED:k.ENABLED,isAlreadyMember:a})),t})}onAddToChannel(){var{selectedChannelId:e}=this.state,{member:t}=this.props,a=t.id;Object(l.jb)(t)?this.props.addAppToChannel({appUserId:a,channelId:e,referringEventId:"INVITE_TO_CHANNEL_DIALOG",referringUiContext:{action:"IMPRESSION"}}):this.props.submitInviteToChannel({channelId:e,users:a})}renderChannelOption(e){return r.a.createElement(f.a,{channelId:e.value})}renderChannelPicker(){var{channels:e,memberName:t}=this.props,{isAlreadyMember:a}=this.state,n=e.map(e=>({label:Object(g.M)(e),value:e.id}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.e,{options:n,placeholderText:E.t("Select a channel"),ariaLabel:E.t("Select a channel"),selectId:"searchSelectChannelOptions",size:"medium",selectDataQa:"search-select-channel-options",renderOption:this.renderChannelOption,renderSelectedOption:this.renderChannelOption,onOptionSelected:this.onChannelSelected}),a&&r.a.createElement(j.a,{type:"inline",level:"error",className:"p-invite_member_to_channel_dialog__error"},r.a.createElement("span",null,E.t("{name} is already a member of this channel.",{name:t,__react:!0}))))}render(){var{memberName:e}=this.props,{addButtonState:t}=this.state,a=E.t("Add {name} to a channel",{name:e,__react:!0});return r.a.createElement(u.a,{title:a,goButtonIsDisabled:t===k.DISABLED,goButtonIsPending:t===k.LOADING,goButtonText:E.t("Add"),onGo:this.onAddToChannel},r.a.createElement("div",{className:"p-invite_member_to_channel_dialog__body"},this.renderChannelPicker()))}}invite_member_to_channel_dialog_BaseInviteMemberToChannelDialog.defaultProps={channels:[]};var S=Object(m.b)((e,t)=>{var{member:a}=t;return{channels:Object(O.t)(e).sort(Object(b.b)("name")),memberName:Object(l.V)(e,a,!1)}},e=>Object(h.b)({getChannelMembershipInfoForUsers:v.g,submitInviteToChannel:y.L,addAppToChannel:C.a},e))(invite_member_to_channel_dialog_BaseInviteMemberToChannelDialog);a.d(t,"a",function(){return T});var I=new d.b("channel_invite");function w(){var{title:e,body:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.e)({element:r.a.createElement(u.a,{title:e,goButtonText:I.t("OK",{fallbackHash:"9ce3bd4224c8c1780db56b4125ecf3f24bf748b7",fallbackHashNs:"fullscreen_modal"}),showCancelButton:!1},t)})}var T=Object(o.b)("Opens app dialog",function(e,t){var{memberId:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t(),s=Object(c.b)(n),o=Object(c.d)(n,a),d=Object(p.a)({state:n}),u=Object(l.V)(n,o,!1),h=I.t("Add {name} to a channel",{name:u,__react:!0});d.track("INVITE_TO_CHANNEL_DIALOG",{contexts:{ui_context:{action:"IMPRESSION"}}}),Object(l.Mb)(s)?e(w({title:h,body:I.t("You are not allowed to add other members to channels.")})):Object(l.Mb)(o)?e(w({title:h,body:I.t("{name} cannot be added to any new channels.",{name:u,__react:!0})})):Object(l.Gb)(o)&&!Object(l.eb)(n,s)?e(w({title:h,body:I.t("Only a Workspace Admin can add {name} into new channels.",{name:u,__react:!0})})):e(Object(i.e)({element:r.a.createElement(S,{member:o})}))});T.meta={name:"openInviteMemberToChannelDialog",key:"actionsOpenInviteMemberToChannelDialogOpenInviteMemberToChannelDialog",description:"Opens app dialog"},T.propTypes={memberId:s.default.string.isRequired}},y4ZY:function(e,t,a){},y5qN:function(e,t,a){},yN0s:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("nNoG"),r=a("aerA"),s=new n.b("team_creation");function i(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{[r.a.Free]:t?s.t("Slack Free"):"",[r.a.Standard]:t?s.t("Slack Standard"):"",[r.a.Plus]:t?s.t("Slack Plus"):""}[e]}},"yNt+":function(e,t,a){},ySrZ:function(e,t,a){"use strict";a.d(t,"a",function(){return HistoryRateLimiter});var n=2,r=1e4;class HistoryRateLimiter{constructor(){var{limit:e=n,duration:t=r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.historyRequests={},this.promise=null,this.requestLimit=e,this.initialDuration=t}reset(){this.historyRequests={},this.promise=null}logHistoryRequest(e){var{oldest:t,latest:a,now:n=Date.now(),promise:r}=e,s="".concat(t,"_").concat(a),i=this.historyRequests[s];i||(i={count:0,time:0,duration:this.initialDuration},this.historyRequests[s]=i),r&&(i.promise=r,r.finally(()=>{i.promise=null})),n-i.duration>i.time?(i.count>=this.requestLimit?i.duration=Math.min(2*i.duration,16e4):i.duration=this.initialDuration,i.count=1,i.time=n):i.count+=1}shouldPreventHistoryRequest(e){var{oldest:t,latest:a,now:n=Date.now()}=e,r=this.historyRequests["".concat(t,"_").concat(a)];return!!r&&(!(r.count<this.requestLimit)&&!(r.time<n-r.duration))}isRequestPending(e){var{oldest:t,latest:a}=e,n=this.historyRequests["".concat(t,"_").concat(a)];return!!n&&(n.promise&&n.promise.isPending())}}},yWse:function(e,t,a){},yluG:function(e,t,a){"use strict";a.d(t,"a",function(){return c});a("aK/h");var n=a("q1tI"),r=a.n(n),s=a("derf"),i=a("5mKg"),o=(a("6mX7"),{externalTeam:void 0});function c(e){var{externalTeam:t}=e,a=Object(i.e)(t),n=Object(i.i)(t);return t&&a?r.a.createElement("div",{className:"p-app_external_team_banner"},r.a.createElement("span",{className:"p-app_external_team_banner__team_name overflow_ellipsis bold"},a),n&&r.a.createElement(s.b,{id:n,className:"p-app_external_team_banner__team_icon"})):null}c.defaultProps=o},ym0a:function(e,t,a){},yqYT:function(e,t,a){},yuuz:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("XHGt"),i=a("TSYQ"),o=a.n(i),c=a("aK/h"),l=a("Uk1S"),d=a("hOQf"),p=a("RjVJ"),u=(a("vKzi"),{msg:c.default.object,children:null,theme:"light"});class BroadcastPreamble extends n.PureComponent{render(){var{msg:e,children:t,theme:a}=this.props;if(!Object(d.ub)(e))return t;var n=o()("c-message_kit__broadcast_preamble",{"c-message_kit__broadcast_preamble--dense":"dense"===a});return r.a.createElement("div",{className:n},t,r.a.createElement(p.a,{ts:e.ts,threadTs:e.thread_ts,channelId:e.channel,className:"c-message_kit__broadcast_preamble__inner"}))}}BroadcastPreamble.defaultProps=u,t.a=Object(s.b)(e=>({theme:Object(l.a)(e)}))(BroadcastPreamble)},yw6X:function(e,t,a){"use strict";var n=a("ifKl"),r=(a("aK/h"),a("q1tI")),s=a.n(r),i=a("XHGt"),o=a("TSYQ"),c=a.n(o),l=a("XLFM"),d=a("c695"),p=a("od5y"),u=a("w8qk"),h=a("YB7p"),m=a("Smdl"),b=a("kOzZ"),_=a("negh"),g=a("nNoG"),f=(a("C8Zo"),new g.b("migration_blocker_page")),v={isOrgOwner:!1,isWorkspaceOwner:!1,isOrgAdmin:!1,isWorkspaceAdmin:!1,enterpriseName:null,teamURL:null,migrationID:null,sendEmail:!1,teamId:null,teamName:null,migrationIsComplete:!1,clogger:{track:n.a},pollMigrationStatus:n.a},O="migration_blocker_reload",y="migration_blocker_page";class MigrationBlockerPage extends r.Component{constructor(e){super(e),this.state={loading:!1},this.handleReload=this.handleReload.bind(this)}componentDidMount(){this.clogImpression(),Object(m.a)()&&this.props.pollMigrationStatus(this.props.teamId)}componentDidUpdate(e){e.migrationIsComplete===this.props.migrationIsComplete&&e.teamId===this.props.teamId||this.clogImpression()}clogImpression(){var{migrationIsComplete:e,clogger:t}=this.props;t.track(_.EventId.ENTERPRISE_MIGRATIONS,{contexts:{ui_context:{action:_.UiAction.IMPRESSION,ui_properties:{element_name:e?O:y}}}})}handleReload(){var{teamId:e,clogger:t}=this.props;this.setState(()=>({loading:!0})),Object(h.a)({reason:"MigrationBlockerPage: Grid Migration for team ".concat(e," is complete, user triggered client reload"),reasonKey:"migration_blocker_reload"}),t.track(_.EventId.ENTERPRISE_MIGRATIONS,{contexts:{ui_context:{action:_.UiAction.CLICK,ui_element:_.UiElement.BTN_RELOAD,ui_properties:{element_type:_.ElementType.BUTTON,element_name:O}}}}),t.sendDataAndEmptyQueue()}renderMigrationTitle(){var{teamName:e,enterpriseName:t,migrationIsComplete:a}=this.props,n=a?f.t("Welcome to Slack Enterprise Grid!"):f.rt("The {teamName} workspace is joining {enterpriseName}!",{teamName:e,enterpriseName:t});return s.a.createElement("h3",{className:"p-migration_blocker_page__title"},n)}renderMigrationMessage(){var{enterpriseName:e,sendEmail:t}=this.props,a=f.rt("It\u2019s moving day! Your workspace is being migrated into the <b>{enterpriseName}</b> Enterprise Grid organization, and will be temporarily unavailable until the process is complete.",{enterpriseName:e,fallbackHash:"f805600b955705eefe22feb6f32b1871508f03bd"});return s.a.createElement("div",{className:"p-migration_blocker_page__description"},a,t?f.t(" You\u2019ll receive an email when it\u2019s all done."):"")}renderMigrationCompleteMessage(){var{enterpriseName:e}=this.props,t=e?f.rt("Starting today, your workspace is part of the <b>{enterprise_name}</b> organization. That means you can now message and share files with anyone at {enterprise_name} \u2014 even if you\u2019re not in the same workspace. Continue to your workspace, and we\u2019ll show you what\u2019s new.",{enterprise_name:e}):f.t("Starting today, your workspace is part of an organization. That means you can now message and share files with anyone in the organization \u2014 even if you\u2019re not on the same workspace. Continue to your workspace, and we\u2019ll show you what\u2019s new.");return s.a.createElement("div",{className:"p-migration_blocker_page__description"},s.a.createElement("p",null,f.t("Your workspace has just been upgraded to Slack Enterprise Grid, which makes it simpler for large organizations to work together.")),s.a.createElement("p",null,t),s.a.createElement("div",{className:"align_center margin_top_150"},s.a.createElement(d.a,{type:"primary",size:"large",onClick:this.handleReload,disabled:this.state.loading,loading:this.state.loading},f.t("Continue to Your Workspace"))))}renderMigrationButton(){var{migrationID:e,isOrgOwner:t,isWorkspaceOwner:a,isOrgAdmin:n,isWorkspaceAdmin:r,teamURL:i,migrationIsComplete:o}=this.props;return o?null:t||a||n||r?s.a.createElement(l.c,{className:"p-migration_blocker_page__button",href:"".concat(i,"migrations/").concat(e,"/status")},s.a.createElement("div",{className:"p-migration_blocker_page__button__text"},s.a.createElement("span",{className:"p-migration_blocker_page__button__title"},f.t("View migration status")),s.a.createElement("span",{className:"p-migration_blocker_page__button__subtitle"},f.t("Migration status is only visible to owners and admins."))),s.a.createElement("span",{className:"p-migration_blocker_page__button_icon"},s.a.createElement(p.b,{type:"chevron-large-right"}))):null}render(){var{migrationIsComplete:e}=this.props,t=c()("p-migration_blocker_page","p-migration_blocker_page--large"),a=c()("p-migration_blocker_page__icon",{"p-migration_blocker_page__icon--complete":e});return s.a.createElement("div",{className:t},s.a.createElement("div",{className:"p-migration_blocker_text"},s.a.createElement("div",{className:a}),this.renderMigrationTitle(),e?this.renderMigrationCompleteMessage():this.renderMigrationMessage()),this.renderMigrationButton())}}MigrationBlockerPage.defaultProps=v;var C={pollMigrationStatus:u.a};t.a=Object(i.b)(e=>({clogger:Object(b.a)({state:e})}),C)(MigrationBlockerPage)},yywf:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("ZBlo"),r=a("zmn3"),s=a("xWuZ");function i(e,t){return Object(s.a)(Object(r.a)(Object(n.a)(e.split(/(\ue000[^\ue001]+\ue001)/g),2),(e,a)=>{var[n,r]=e;return[n,r?t(r.replace(/\ue000/g,"").replace(/\ue001/g,""),a):""]}))}},yzQ7:function(e,t,a){"use strict";a.d(t,"b",function(){return l}),a.d(t,"c",function(){return u}),a.d(t,"d",function(){return h}),a.d(t,"a",function(){return m});var n=a("yIs4"),r=a("ZS+m"),s=a("U/ze"),i=a("brL+"),o=a("Z1bu"),c=Object(s.b)(e=>e&&e.channelActions||{});c.meta={name:"selectChannelActionsState",key:"channelActionsStoreSelectorsSelectChannelActionsState"};var l=Object(r.a)(c,(e,t)=>t,(e,t)=>{var{actions:a}=e;return a[t]||null}),d=Object(r.a)(c,(e,t)=>t,(e,t)=>{var{actionIdsByChannelId:a}=e,n=a[t];return Array.isArray(n)?n:[]}),p=Object(r.a)(d,c,(e,t)=>{var{actions:a}=t;return e?e.map(e=>a[e]).filter(e=>void 0!==e):[]}),u=Object(r.a)(c,(e,t)=>t,(e,t)=>{var{actionCountByChannelId:a}=e;return a&&a[t]||0}),h=Object(s.b)((e,t)=>{var a=c(e),{actionCountByChannelId:r}=a;return!!r&&Object(n.a)(r[t])});h.meta={name:"selectChannelActionCountIsKnownForChannelId",key:"channelActionsStoreSelectorsSelectChannelActionCountIsKnownForChannelId"};var m=Object(r.a)(i.b,u,p,(e,t)=>t,(e,t,a,n)=>(t>0&&Object(o.b)(e,n),a))},z1BW:function(e,t,a){},zA5J:function(e,t,a){"use strict";var n=a("yHhI"),r=a("k0uR"),s=a("KXAH"),i=a("MvLI"),o=a("kFZb");class log_watcher_LogWatcher{constructor(e,t){this.logger=e,this.watchFunc=t,this.action=this.watch(this.logger.action),this.debug=this.watch(this.logger.debug),this.error=this.watch(this.logger.error),this.info=this.watch(this.logger.info),this.warn=this.watch(this.logger.warn),this.timeStamp=this.watch(this.logger.timeStamp)}watch(e){return Object(o.a)(e,this.watchFunc)}}function c(e){var t=Object(i.a)(),a=Object(n.a)({getState:t&&t.getState,label:e});return new log_watcher_LogWatcher(a,function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return r.a.store(Object(s.a)(),...(e?[e]:[]).concat(a))})}a.d(t,"a",function(){return c})},zBLs:function(e,t,a){},zG9j:function(e,t,a){},zJYr:function(e,t,a){},zXku:function(e,t,a){},zaOK:function(e,t,a){"use strict";var n=a("rePB"),r=a("TGBA"),s=a("wBxZ"),i=a("m8R6"),o=a("ifKl"),c=a("r31G"),l=a("kOzZ"),d=a("g5qt");var p=a("rWF5");var u=a("H9m0"),h=a("GdsW"),m=a("lnxZ"),b=a("s19S"),_=a("QLsh"),g=a("ROZo"),f=Object(g.b)("TS.inline_videos.maybeStopInlineVideoPlayback"),v=a("N/g+"),O=a("2Y1Y"),y=a("i1Fx"),C=a("HvGc"),j=a("rMey"),E=a("qN/r"),k=a("eCgt"),S=a("iH/p"),I=a("gLeh"),w=a("t85p"),T=a("Tc5z"),N=a("XL7r"),P=a("yZEV"),A=a("vmJv"),M=a("brL+"),x=a("G4ux"),R=a("fYfO"),D=a("1hAG"),F=a("5mKg"),L=a("Cfkr"),U=a("VMwU"),B=a("yHhI"),H=a("T5R/"),W=a("tVnY"),q=a("YB7p"),G=a("cErB"),K=a("s5Is");function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Y=["https://www.dropbox.com/chooser?","https://www.dropbox.com/saver?","https://account.box.com/index.php?","https://account.box.com/webviews/login/box_select?","https://app.box.com/index.php?","https://app.boxcn.net","https://ent.box.com","https://onedrive.live.com",/^https:\/\/[\w.-]+my\.sharepoint\.com\//,"https://login.microsoftonline.com/"],Q=["files/import/box","files/import/dropbox","files/import/gdrive","files/create/gdrive/auth","files/import/onedrive","files/import/onedrive/redirect",/files\/(T[A-Z0-9]{8,}|W[A-Z0-9]{8,}|U[A-Z0-9]{8,})\/F[A-Z0-9]{8,}(\/[a-zA-Z0-9_]+)?/],X=Object(B.b)();t.a=z({analytics:new class analytics_DesktopAnalytics{reportLocale(){if(d.W){var e=Object(d.pb)();e&&Object(l.a)().track("SYSTEM_LOCALE",e)}}reportCrash(){if(d.W){var e=Object(d.lb)();e&&Object(l.a)().track("DESKTOP_CRASH",e)}}reportHang(){if(d.W){var e=Object(d.nb)();e&&Object(l.a)().track("DESKTOP_HANG",e)}}reportDisplays(){if(d.W){var e=Object(d.y)();if(e&&e.displays&&e.windowFrame){var{displays:t,windowFrame:a}=e,{size:n,position:r}=a,[s,i]=n,[o,c]=r,p=[s||0,i||0,o||0,c||0],u=[];t.forEach(e=>{e&&e.size&&e.size.width&&e.size.height&&(u.push(e.size.width),u.push(e.size.height)),u.push(e.scaleFactor||1)}),Object(l.a)().track("DISPLAY_INFO",{display_resolutions:u,window_frame:p})}}}},nodrag:new class drag_regions_DesktopDragRegions{updateElements(e){var t=[];return Array.isArray(e)&&e.filter(e=>e&&e.getBoundingClientRect).forEach(e=>t.push(this.updateElement(e))),t}updateElement(e,t){var a=t||e.id||"".concat(e.type,".").concat(e.classList.toString().replace(/ /g,".")),n=e.getBoundingClientRect(),r={id:a,width:Math.round(n.width+2),height:Math.round(n.height+2),top:Math.round(n.top),left:Math.round(n.left)},s=Object(p.w)("3.0.0");if(r.width<2&&r.height<2&&s){var i=Object(d.qb)(),o=i.filter(e=>e.id!==r.id);i.length>o.length&&Object(d.Db)(o)}else Object(d.Db)(r);return r}}},_,{accessibilitySupportChanged:function(){return Object(I.c)(Object(d.ab)())},canOpenURLInWindow:function(e,t){if(!t)return!1;if(t.startsWith("chrome://"))return!0;if(Object(G.g)(t))return!0;if(Y.some(e=>e instanceof RegExp?e.test(t):t.startsWith(e)))return!0;var a=Object(F.n)(Object(D.d)(e)),n=Object(G.k)(t),r=n.hostname;return Q.some(e=>e instanceof RegExp&&Object(G.h)(r)&&e.test(t)?t.startsWith("".concat(n.protocol,"//").concat(n.hostname)):e instanceof RegExp?t.startsWith("".concat(a))&&e.test(t):t.startsWith("".concat(a).concat(e)))},closeCall:y.a,focusNextWorkspace:K.focusNextWorkspace,focusPreviousWorkspace:K.focusPreviousWorkspace,getCurrentUserId:w.d,getCurrentUserName:function(e){return Object(x.b)(e).name},getEnterpriseId:M.a,getSelectedInputText:function(){var e=document.activeElement,t=Object(O.b)(e);return Object(O.d)(e,t.start,t.length)},getThemeValues:function(e){try{var t=JSON.parse(Object(N.k)(e,"sidebar_theme_custom_values"));return Object(W.b)(e)?z({},t,{},Object(W.a)(t)):t}catch(a){return U.a}},getTokenFromBootData:w.j,getUserPref:N.k,getWebappVersionUid:w.k,handleDeepLinkWithArgs:h.g,handleDeepLinkFromDesktop:j.b,isOnBetaReleaseChannel:function(){return!1},maybeTickleMS:u.a,notificationActivated:function(e,t,a,n){X.info("DESKTOP","notificationActivated",{channelId:t,messageTs:a,threadTs:n}),e(Object(c.a)({channelId:t,messageTs:a,threadTs:n}))},notificationClicked:c.a,openDialog:function(e,t,a){switch(a){case"prefs":e(Object(E.a)());break;case"shortcuts":e(Object(C.h)());break;default:X.warn("openDialog failed, unrecognized dialog: ".concat(a))}},openFromCmdF:S.d,recentMessagesFromCurrentChannel:function(e){var t=Object(A.a)(e),a=[];return t&&(a=Object(s.a)(Object(r.a)(Object(R.b)(e,t)),50),Object(p.q)()||Object(p.w)("3.3.0")||(a=a.map(e=>e.subtype?e:Object(i.a)(e,"subtype")))),{user_id:Object(w.d)(e),msgs:a}},reload:q.b,replyToNotification:function(){for(var e,t,a,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return 4===r.length?[e,t,,a]=r:[e,t,a]=r,Object(k.a)({channelId:e,text:t,replyToTs:a})},setCurrentMemberPresence:P.g,setFocusedWorkspace:K.setFocusedWorkspace,ssbChromeClicked:o.a,systemTextSettingsChanged:function(){Object(H.a)({bustCache:!0})},teamSelectionChanged:function(e,t){Object(v.b)(),Object(b.b)(),f(),e(Object(T.s)(t))},track:L.d,updateDownloadsView:m.b,updateState:T.v})},zbnt:function(e,t,a){},zoXK:function(e,t,a){},ztz9:function(e,t,a){},zzVd:function(e,t,a){}}]);